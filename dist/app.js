/*! For license information please see app.js.LICENSE.txt */
(()=>{"use strict";var e,t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(e){e.CuriousReader="CuriousReader",e.GDL="GDL",e.Unknown="Unknown"}(e||(e={}));class n{constructor(e){this.emptyGlowImageTag="empty_glow_image",this.contentFilePath=e}async parseBook(){return new Promise(((e,t)=>{this.parseContentJSONFile().then((t=>{this.contentJSON=t,console.log("Content JSON file parsed!"),console.log(this.contentJSON);let n={bookName:"",pages:[],bookType:this.determineBookType()};n.pages=this.parsePages(n),e(n)})).catch((e=>{t(e)}))}))}determineBookType(){return void 0!==this.contentJSON.presentation?e.CuriousReader:void 0!==this.contentJSON.chapters?e.GDL:e.Unknown}parsePages(t){let n=[];if(t.bookType===e.CuriousReader){let e=this.contentJSON.presentation.slides,t=this.contentJSON.presentation.globalBackgroundSelector.fillGlobalBackground;for(let i=0;i<e.length;i++){let r=e[i],o={visualElements:[],backgroundColor:t};o.visualElements=this.parsePageCR(r),n.push(o)}}else if(t.bookType===e.GDL){let e=this.contentJSON.chapters,t="#FCFCF2";for(let i=0;i<e.length;i++){let r=e[i],o={visualElements:[],backgroundColor:t};o.visualElements=this.parsePageGDL(r),n.push(o)}}else console.log("Unknown book type!");return n}parsePageCR(e){let t=[],n=e.elements;for(let e=0;e<n.length;e++){let i=n[e].action.library;if(i.includes("AdvancedText")){let i=this.parseTextElementCR(n[e]);t.push(i)}else if(i.includes("Image")){let i=this.parseImageElementCR(n[e]);t.push(i)}else if(i.includes("Audio")){let i=this.parseAudioElementCR(n[e]);t.push(i)}}return t}parsePageGDL(e){let t=[],n=e.params.content;for(let e=0;e<n.length;e++){let i=n[e].content.library;if(i.includes("AdvancedText")){let i=this.parseTextElementGDL(n[e].content.params);t.push(i)}else if(i.includes("Image")){let i=this.parseImageElementGDL(n[e].content.params);t.push(i)}}return t}parseTextElementCR(e){return{type:"text",positionX:e.x,positionY:e.y,width:e.width,height:e.height,textContentAsHTML:e.action.params.text}}parseTextElementGDL(e){return{type:"text",positionX:NaN,positionY:NaN,width:NaN,height:NaN,textContentAsHTML:e.text}}parseImageElementCR(e){let t="";return t=void 0===e.action.params.file?this.emptyGlowImageTag:e.action.params.file.path,{domID:t===this.emptyGlowImageTag?e.id:e.action.subContentId,type:"image",positionX:e.x,positionY:e.y,width:e.width,height:e.height,imageSource:t}}parseImageElementGDL(e){return{domID:"",type:"image",positionX:NaN,positionY:NaN,width:e.width,height:e.height,imageSource:e.file.path}}parseAudioElementCR(e){let t={timestamps:[]},n=e.action.params.timeStampForEachText;for(let i=0;i<n.length;i++){let r=i,o=n[i],a={domID:e.action.subContentId+"_"+r.toString(),word:o.text.replace(/&#039;/g,"'"),startTimestamp:o.startDuration,endTimestamp:o.endDuration,audioSrc:o.wordfile[0].path};t.timestamps.push(a)}return{domID:e.action.subContentId,type:"audio",positionX:e.x,positionY:e.y,width:e.width,height:e.height,glowColor:e.action.params.glowColor,audioSrc:e.action.params.files[0].path,audioTimestamps:t,styles:""}}async parseContentJSONFile(){return new Promise(((e,t)=>{let n=new XMLHttpRequest;n.open("GET",this.contentFilePath,!0),n.responseType="json",n.onload=function(){if(200===n.status){let t=n.response;delete t.l10n,delete t.override,e(t)}else t(n.response)},n.send()}))}}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r="(prefers-reduced-motion: reduce)";function o(e){e.length=0}function a(e,t,n){return Array.prototype.slice.call(e,t,n)}function s(e){return e.bind.apply(e,[null].concat(a(arguments,1)))}var c=setTimeout,l=function(){};function u(e){return requestAnimationFrame(e)}function d(e,t){return typeof t===e}function h(e){return!v(e)&&d("object",e)}var f=Array.isArray,p=s(d,"function"),g=s(d,"string"),m=s(d,"undefined");function v(e){return null===e}function y(e){try{return e instanceof(e.ownerDocument.defaultView||window).HTMLElement}catch(e){return!1}}function w(e){return f(e)?e:[e]}function b(e,t){w(e).forEach(t)}function I(e,t){return e.indexOf(t)>-1}function E(e,t){return e.push.apply(e,w(t)),e}function S(e,t,n){e&&b(t,(function(t){t&&e.classList[n?"add":"remove"](t)}))}function C(e,t){S(e,g(t)?t.split(" "):t,!0)}function k(e,t){b(t,e.appendChild.bind(e))}function T(e,t){b(e,(function(e){var n=(t||e).parentNode;n&&n.insertBefore(e,t)}))}function P(e,t){return y(e)&&(e.msMatchesSelector||e.matches).call(e,t)}function A(e,t){var n=e?a(e.children):[];return t?n.filter((function(e){return P(e,t)})):n}function D(e,t){return t?A(e,t)[0]:e.firstElementChild}var x=Object.keys;function L(e,t,n){return e&&(n?x(e).reverse():x(e)).forEach((function(n){"__proto__"!==n&&t(e[n],n)})),e}function N(e){return a(arguments,1).forEach((function(t){L(t,(function(n,i){e[i]=t[i]}))})),e}function O(e){return a(arguments,1).forEach((function(t){L(t,(function(t,n){f(t)?e[n]=t.slice():h(t)?e[n]=O({},h(e[n])?e[n]:{},t):e[n]=t}))})),e}function B(e,t){b(t||x(e),(function(t){delete e[t]}))}function M(e,t){b(e,(function(e){b(t,(function(t){e&&e.removeAttribute(t)}))}))}function F(e,t,n){h(t)?L(t,(function(t,n){F(e,n,t)})):b(e,(function(e){v(n)||""===n?M(e,t):e.setAttribute(t,String(n))}))}function j(e,t,n){var i=document.createElement(e);return t&&(g(t)?C(i,t):F(i,t)),n&&k(n,i),i}function R(e,t,n){if(m(n))return getComputedStyle(e)[t];v(n)||(e.style[t]=""+n)}function z(e,t){R(e,"display",t)}function $(e){e.setActive&&e.setActive()||e.focus({preventScroll:!0})}function W(e,t){return e.getAttribute(t)}function H(e,t){return e&&e.classList.contains(t)}function G(e){return e.getBoundingClientRect()}function U(e){b(e,(function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}))}function V(e){return D((new DOMParser).parseFromString(e,"text/html").body)}function X(e,t){e.preventDefault(),t&&(e.stopPropagation(),e.stopImmediatePropagation())}function q(e,t){return e&&e.querySelector(t)}function Y(e,t){return t?a(e.querySelectorAll(t)):[]}function J(e,t){S(e,t,!1)}function K(e){return e.timeStamp}function Q(e){return g(e)?e:e?e+"px":""}var Z="splide",ee="data-"+Z;function te(e,t){if(!e)throw new Error("["+Z+"] "+(t||""))}var ne=Math.min,ie=Math.max,re=Math.floor,oe=Math.ceil,ae=Math.abs;function se(e,t,n){return ae(e-t)<n}function ce(e,t,n,i){var r=ne(t,n),o=ie(t,n);return i?r<e&&e<o:r<=e&&e<=o}function le(e,t,n){var i=ne(t,n),r=ie(t,n);return ne(ie(i,e),r)}function ue(e){return+(e>0)-+(e<0)}function de(e,t){return b(t,(function(t){e=e.replace("%s",""+t)})),e}function he(e){return e<10?"0"+e:""+e}var fe={};function pe(){var e=[];function t(e,t,n){b(e,(function(e){e&&b(t,(function(t){t.split(" ").forEach((function(t){var i=t.split(".");n(e,i[0],i[1])}))}))}))}return{bind:function(n,i,r,o){t(n,i,(function(t,n,i){var a="addEventListener"in t,s=a?t.removeEventListener.bind(t,n,r,o):t.removeListener.bind(t,r);a?t.addEventListener(n,r,o):t.addListener(r),e.push([t,n,i,r,s])}))},unbind:function(n,i,r){t(n,i,(function(t,n,i){e=e.filter((function(e){return!!(e[0]!==t||e[1]!==n||e[2]!==i||r&&e[3]!==r)||(e[4](),!1)}))}))},dispatch:function(e,t,n){var i,r=!0;return"function"==typeof CustomEvent?i=new CustomEvent(t,{bubbles:r,detail:n}):(i=document.createEvent("CustomEvent")).initCustomEvent(t,r,!1,n),e.dispatchEvent(i),i},destroy:function(){e.forEach((function(e){e[4]()})),o(e)}}}var ge="mounted",me="ready",ve="move",ye="moved",we="click",be="refresh",Ie="updated",Ee="resize",Se="resized",Ce="scroll",ke="scrolled",Te="destroy",Pe="navigation:mounted",Ae="autoplay:play",_e="autoplay:pause",De="lazyload:loaded",xe="ei";function Le(e){var t=e?e.event.bus:document.createDocumentFragment(),n=pe();return e&&e.event.on(Te,n.destroy),N(n,{bus:t,on:function(e,i){n.bind(t,w(e).join(" "),(function(e){i.apply(i,f(e.detail)?e.detail:[])}))},off:s(n.unbind,t),emit:function(e){n.dispatch(t,e,a(arguments,1))}})}function Ne(e,t,n,i){var r,o,a=Date.now,s=0,c=!0,l=0;function d(){if(!c){if(s=e?ne((a()-r)/e,1):1,n&&n(s),s>=1&&(t(),r=a(),i&&++l>=i))return h();o=u(d)}}function h(){c=!0}function f(){o&&cancelAnimationFrame(o),s=0,o=0,c=!0}return{start:function(t){t||f(),r=a()-(t?s*e:0),c=!1,o=u(d)},rewind:function(){r=a(),s=0,n&&n(s)},pause:h,cancel:f,set:function(t){e=t},isPaused:function(){return c}}}var Oe="Arrow",Be=Oe+"Left",Me=Oe+"Right",Fe=Oe+"Up",je=Oe+"Down",Re="ttb",ze={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[Fe,Me],ArrowRight:[je,Be]};var $e="role",We="tabindex",He="aria-",Ge=He+"controls",Ue=He+"current",Ve=He+"selected",Xe=He+"label",qe=He+"labelledby",Ye=He+"hidden",Je=He+"orientation",Ke=He+"roledescription",Qe=He+"live",Ze=He+"busy",et=He+"atomic",tt=[$e,We,"disabled",Ge,Ue,Xe,qe,Ye,Je,Ke],nt=Z+"__",it="is-",rt=Z,ot=nt+"track",at=nt+"list",st=nt+"slide",ct=st+"--clone",lt=st+"__container",ut=nt+"arrows",dt=nt+"arrow",ht=dt+"--prev",ft=dt+"--next",pt=nt+"pagination",gt=pt+"__page",mt=nt+"progress__bar",vt=nt+"toggle",yt=nt+"sr",wt=it+"initialized",bt=it+"active",It=it+"prev",Et=it+"next",St=it+"visible",Ct=it+"loading",kt=it+"focus-in",Tt=it+"overflow",Pt=[bt,St,It,Et,Ct,kt,Tt],At={slide:st,clone:ct,arrows:ut,arrow:dt,prev:ht,next:ft,pagination:pt,page:gt,spinner:nt+"spinner"},_t="touchstart mousedown",Dt="touchmove mousemove",xt="touchend touchcancel mouseup click",Lt="slide",Nt="loop",Ot="fade";var Bt=ee+"-interval",Mt={passive:!1,capture:!0},Ft={Spacebar:" ",Right:Me,Left:Be,Up:Fe,Down:je};function jt(e){return e=g(e)?e:e.key,Ft[e]||e}var Rt="keydown",zt=ee+"-lazy",$t=zt+"-srcset",Wt="["+zt+"], ["+$t+"]",Ht=[" ","Enter"],Gt=Object.freeze({__proto__:null,Media:function(e,t,n){var i=e.state,o=n.breakpoints||{},a=n.reducedMotion||{},s=pe(),c=[];function l(e){e&&s.destroy()}function u(e,t){var n=matchMedia(t);s.bind(n,"change",d),c.push([e,n])}function d(){var t=i.is(7),r=n.direction,o=c.reduce((function(e,t){return O(e,t[1].matches?t[0]:{})}),{});B(n),h(o),n.destroy?e.destroy("completely"===n.destroy):t?(l(!0),e.mount()):r!==n.direction&&e.refresh()}function h(t,r,o){O(n,t),r&&O(Object.getPrototypeOf(n),t),!o&&i.is(1)||e.emit(Ie,n)}return{setup:function(){var e="min"===n.mediaQuery;x(o).sort((function(t,n){return e?+t-+n:+n-+t})).forEach((function(t){u(o[t],"("+(e?"min":"max")+"-width:"+t+"px)")})),u(a,r),d()},destroy:l,reduce:function(e){matchMedia(r).matches&&(e?O(n,a):B(n,x(a)))},set:h}},Direction:function(e,t,n){return{resolve:function(e,t,i){var r="rtl"!==(i=i||n.direction)||t?i===Re?0:-1:1;return ze[e]&&ze[e][r]||e.replace(/width|left|right/i,(function(e,t){var n=ze[e.toLowerCase()][r]||e;return t>0?n.charAt(0).toUpperCase()+n.slice(1):n}))},orient:function(e){return e*("rtl"===n.direction?1:-1)}}},Elements:function(e,t,n){var i,r,a,s=Le(e),c=s.on,l=s.bind,u=e.root,d=n.i18n,h={},f=[],g=[],m=[];function v(){var e,t,o;i=b("."+ot),r=D(i,"."+at),te(i&&r,"A track/list element is missing."),E(f,A(r,"."+st+":not(."+ct+")")),L({arrows:ut,pagination:pt,prev:ht,next:ft,bar:mt,toggle:vt},(function(e,t){h[t]=b("."+e)})),N(h,{root:u,track:i,list:r,slides:f}),t=u.id||""+(e=Z)+he(fe[e]=(fe[e]||0)+1),o=n.role,u.id=t,i.id=i.id||t+"-track",r.id=r.id||t+"-list",!W(u,$e)&&"SECTION"!==u.tagName&&o&&F(u,$e,o),F(u,Ke,d.carousel),F(r,$e,"presentation"),w()}function y(e){var t=tt.concat("style");o(f),J(u,g),J(i,m),M([i,r],t),M(u,e?t:["style",Ke])}function w(){J(u,g),J(i,m),g=I(rt),m=I(ot),C(u,g),C(i,m),F(u,Xe,n.label),F(u,qe,n.labelledby)}function b(e){var t=q(u,e);return t&&function(e,t){if(p(e.closest))return e.closest(t);for(var n=e;n&&1===n.nodeType&&!P(n,t);)n=n.parentElement;return n}(t,"."+rt)===u?t:void 0}function I(e){return[e+"--"+n.type,e+"--"+n.direction,n.drag&&e+"--draggable",n.isNavigation&&e+"--nav",e===rt&&bt]}return N(h,{setup:v,mount:function(){c(be,y),c(be,v),c(Ie,w),l(document,_t+" keydown",(function(e){a="keydown"===e.type}),{capture:!0}),l(u,"focusin",(function(){S(u,kt,!!a)}))},destroy:y})},Slides:function(e,t,n){var i=Le(e),r=i.on,a=i.emit,c=i.bind,l=t.Elements,u=l.slides,d=l.list,h=[];function f(){u.forEach((function(e,t){v(e,t,-1)}))}function m(){A((function(e){e.destroy()})),o(h)}function v(t,n,i){var r=function(e,t,n,i){var r,o=Le(e),a=o.on,c=o.emit,l=o.bind,u=e.Components,d=e.root,h=e.options,f=h.isNavigation,p=h.updateOnMove,g=h.i18n,m=h.pagination,v=h.slideFocus,y=u.Direction.resolve,w=W(i,"style"),b=W(i,Xe),I=n>-1,E=D(i,"."+lt);function C(){var r=e.splides.map((function(e){var n=e.splide.Components.Slides.getAt(t);return n?n.slide.id:""})).join(" ");F(i,Xe,de(g.slideX,(I?n:t)+1)),F(i,Ge,r),F(i,$e,v?"button":""),v&&M(i,Ke)}function k(){r||T()}function T(){if(!r){var n=e.index;(o=P())!==H(i,bt)&&(S(i,bt,o),F(i,Ue,f&&o||""),c(o?"active":"inactive",A)),function(){var t=function(){if(e.is(Ot))return P();var t=G(u.Elements.track),n=G(i),r=y("left",!0),o=y("right",!0);return re(t[r])<=oe(n[r])&&re(n[o])<=oe(t[o])}(),n=!t&&(!P()||I);if(e.state.is([4,5])||F(i,Ye,n||""),F(Y(i,h.focusableNodes||""),We,n?-1:""),v&&F(i,We,n?-1:0),t!==H(i,St)&&(S(i,St,t),c(t?"visible":"hidden",A)),!t&&document.activeElement===i){var r=u.Slides.getAt(e.index);r&&$(r.slide)}}(),S(i,It,t===n-1),S(i,Et,t===n+1)}var o}function P(){var i=e.index;return i===t||h.cloneStatus&&i===n}var A={index:t,slideIndex:n,slide:i,container:E,isClone:I,mount:function(){I||(i.id=d.id+"-slide"+he(t+1),F(i,$e,m?"tabpanel":"group"),F(i,Ke,g.slide),F(i,Xe,b||de(g.slideLabel,[t+1,e.length]))),l(i,"click",s(c,we,A)),l(i,"keydown",s(c,"sk",A)),a([ye,"sh",ke],T),a(Pe,C),p&&a(ve,k)},destroy:function(){r=!0,o.destroy(),J(i,Pt),M(i,tt),F(i,"style",w),F(i,Xe,b||"")},update:T,style:function(e,t,n){R(n&&E||i,e,t)},isWithin:function(n,i){var r=ae(n-t);return I||!h.rewind&&!e.is(Nt)||(r=ne(r,e.length-r)),r<=i}};return A}(e,n,i,t);r.mount(),h.push(r),h.sort((function(e,t){return e.index-t.index}))}function E(e){return e?_((function(e){return!e.isClone})):h}function A(e,t){E(t).forEach(e)}function _(e){return h.filter(p(e)?e:function(t){return g(e)?P(t.slide,e):I(w(e),t.index)})}return{mount:function(){f(),r(be,m),r(be,f)},destroy:m,update:function(){A((function(e){e.update()}))},register:v,get:E,getIn:function(e){var i=t.Controller,r=i.toIndex(e),o=i.hasFocus()?1:n.perPage;return _((function(e){return ce(e.index,r,r+o-1)}))},getAt:function(e){return _(e)[0]},add:function(e,t){b(e,(function(e){if(g(e)&&(e=V(e)),y(e)){var i=u[t];i?T(e,i):k(d,e),C(e,n.classes.slide),r=e,o=s(a,Ee),l=Y(r,"img"),(h=l.length)?l.forEach((function(e){c(e,"load error",(function(){--h||o()}))})):o()}var r,o,l,h})),a(be)},remove:function(e){U(_(e).map((function(e){return e.slide}))),a(be)},forEach:A,filter:_,style:function(e,t,n){A((function(i){i.style(e,t,n)}))},getLength:function(e){return e?u.length:h.length},isEnough:function(){return h.length>n.perPage}}},Layout:function(e,t,n){var i,r,o,a=Le(e),c=a.on,l=a.bind,u=a.emit,d=t.Slides,f=t.Direction.resolve,p=t.Elements,g=p.root,m=p.track,v=p.list,y=d.getAt,w=d.style;function b(){i=n.direction===Re,R(g,"maxWidth",Q(n.width)),R(m,f("paddingLeft"),E(!1)),R(m,f("paddingRight"),E(!0)),I(!0)}function I(e){var t,a=G(g);(e||r.width!==a.width||r.height!==a.height)&&(R(m,"height",(t="",i&&(te(t=C(),"height or heightRatio is missing."),t="calc("+t+" - "+E(!1)+" - "+E(!0)+")"),t)),w(f("marginRight"),Q(n.gap)),w("width",n.autoWidth?null:Q(n.fixedWidth)||(i?"":k())),w("height",Q(n.fixedHeight)||(i?n.autoHeight?null:k():C()),!0),r=a,u(Se),o!==(o=x())&&(S(g,Tt,o),u("overflow",o)))}function E(e){var t=n.padding,i=f(e?"right":"left");return t&&Q(t[i]||(h(t)?0:t))||"0px"}function C(){return Q(n.height||G(v).width*n.heightRatio)}function k(){var e=Q(n.gap);return"calc((100%"+(e&&" + "+e)+")/"+(n.perPage||1)+(e&&" - "+e)+")"}function T(){return G(v)[f("width")]}function P(e,t){var n=y(e||0);return n?G(n.slide)[f("width")]+(t?0:D()):0}function A(e,t){var n=y(e);if(n){var i=G(n.slide)[f("right")],r=G(v)[f("left")];return ae(i-r)+(t?0:D())}return 0}function _(t){return A(e.length-1)-A(0)+P(0,t)}function D(){var e=y(0);return e&&parseFloat(R(e.slide,f("marginRight")))||0}function x(){return e.is(Ot)||_(!0)>T()}return{mount:function(){var e,t;b(),l(window,"resize load",(e=s(u,Ee),t=Ne(0,e,null,1),function(){t.isPaused()&&t.start()})),c([Ie,be],b),c(Ee,I)},resize:I,listSize:T,slideSize:P,sliderSize:_,totalSize:A,getPadding:function(e){return parseFloat(R(m,f("padding"+(e?"Right":"Left"))))||0},isOverflow:x}},Clones:function(e,t,n){var i,r=Le(e),a=r.on,s=t.Elements,c=t.Slides,l=t.Direction.resolve,u=[];function d(){a(be,h),a([Ie,Ee],p),(i=g())&&(function(t){var i=c.get().slice(),r=i.length;if(r){for(;i.length<t;)E(i,i);E(i.slice(-t),i.slice(0,t)).forEach((function(o,a){var l=a<t,d=function(t,i){var r=t.cloneNode(!0);return C(r,n.classes.clone),r.id=e.root.id+"-clone"+he(i+1),r}(o.slide,a);l?T(d,i[0].slide):k(s.list,d),E(u,d),c.register(d,a-t+(l?0:r),o.index)}))}}(i),t.Layout.resize(!0))}function h(){f(),d()}function f(){U(u),o(u),r.destroy()}function p(){var e=g();i!==e&&(i<e||!e)&&r.emit(be)}function g(){var i=n.clones;if(e.is(Nt)){if(m(i)){var r=n[l("fixedWidth")]&&t.Layout.slideSize(0);i=r&&oe(G(s.track)[l("width")]/r)||n[l("autoWidth")]&&e.length||2*n.perPage}}else i=0;return i}return{mount:d,destroy:f}},Move:function(e,t,n){var i,r=Le(e),o=r.on,a=r.emit,s=e.state.set,c=t.Layout,l=c.slideSize,u=c.getPadding,d=c.totalSize,h=c.listSize,f=c.sliderSize,p=t.Direction,g=p.resolve,v=p.orient,y=t.Elements,w=y.list,b=y.track;function I(){t.Controller.isBusy()||(t.Scroll.cancel(),E(e.index),t.Slides.update())}function E(e){S(P(e,!0))}function S(n,i){if(!e.is(Ot)){var r=i?n:function(n){if(e.is(Nt)){var i=T(n),r=i>t.Controller.getEnd();(i<0||r)&&(n=C(n,r))}return n}(n);R(w,"transform","translate"+g("X")+"("+r+"px)"),n!==r&&a("sh")}}function C(e,t){var n=e-_(t),i=f();return e-v(i*(oe(ae(n)/i)||1))*(t?1:-1)}function k(){S(A(),!0),i.cancel()}function T(e){for(var n=t.Slides.get(),i=0,r=1/0,o=0;o<n.length;o++){var a=n[o].index,s=ae(P(a,!0)-e);if(!(s<=r))break;r=s,i=a}return i}function P(t,i){var r=v(d(t-1)-function(e){var t=n.focus;return"center"===t?(h()-l(e,!0))/2:+t*l(e)||0}(t));return i?function(t){return n.trimSpace&&e.is(Lt)&&(t=le(t,0,v(f(!0)-h()))),t}(r):r}function A(){var e=g("left");return G(w)[e]-G(b)[e]+v(u(!1))}function _(e){return P(e?t.Controller.getEnd():0,!!n.trimSpace)}return{mount:function(){i=t.Transition,o([ge,Se,Ie,be],I)},move:function(e,t,n,r){var o,c;e!==t&&(o=e>n,c=v(C(A(),o)),o?c>=0:c<=w[g("scrollWidth")]-G(b)[g("width")])&&(k(),S(C(A(),e>n),!0)),s(4),a(ve,t,n,e),i.start(t,(function(){s(3),a(ye,t,n,e),r&&r()}))},jump:E,translate:S,shift:C,cancel:k,toIndex:T,toPosition:P,getPosition:A,getLimit:_,exceededLimit:function(e,t){t=m(t)?A():t;var n=!0!==e&&v(t)<v(_(!1)),i=!1!==e&&v(t)>v(_(!0));return n||i},reposition:I}},Controller:function(e,t,n){var i,r,o,a,c=Le(e),l=c.on,u=c.emit,d=t.Move,h=d.getPosition,f=d.getLimit,p=d.toPosition,v=t.Slides,y=v.isEnough,w=v.getLength,b=n.omitEnd,I=e.is(Nt),E=e.is(Lt),S=s(_,!1),C=s(_,!0),k=n.start||0,T=k;function P(){r=w(!0),o=n.perMove,a=n.perPage,i=L();var e=le(k,0,b?i:r-1);e!==k&&(k=e,d.reposition())}function A(){i!==L()&&u(xe)}function _(e,t){var n=o||(M()?1:a),r=D(k+n*(e?-1:1),k,!(o||M()));return-1===r&&E&&!se(h(),f(!e),1)?e?0:i:t?r:x(r)}function D(t,s,c){if(y()||M()){var l=function(t){if(E&&"move"===n.trimSpace&&t!==k)for(var i=h();i===p(t,!0)&&ce(t,0,e.length-1,!n.rewind);)t<k?--t:++t;return t}(t);l!==t&&(s=t,t=l,c=!1),t<0||t>i?t=o||!ce(0,t,s,!0)&&!ce(i,s,t,!0)?I?c?t<0?-(r%a||a):r:t:n.rewind?t<0?i:0:-1:N(O(t)):c&&t!==s&&(t=N(O(s)+(t<s?-1:1)))}else t=-1;return t}function x(e){return I?(e+r)%r||0:e}function L(){for(var e=r-(M()||I&&o?1:a);b&&e-- >0;)if(p(r-1,!0)!==p(e,!0)){e++;break}return le(e,0,r-1)}function N(e){return le(M()?e:a*e,0,i)}function O(e){return M()?ne(e,i):re((e>=i?r-1:e)/a)}function B(e){e!==k&&(T=k,k=e)}function M(){return!m(n.focus)||n.isNavigation}function F(){return e.state.is([4,5])&&!!n.waitForTransition}return{mount:function(){P(),l([Ie,be,xe],P),l(Se,A)},go:function(e,t,n){if(!F()){var r=function(e){var t=k;if(g(e)){var n=e.match(/([+\-<>])(\d+)?/)||[],r=n[1],o=n[2];"+"===r||"-"===r?t=D(k+ +(""+r+(+o||1)),k):">"===r?t=o?N(+o):S(!0):"<"===r&&(t=C(!0))}else t=I?e:le(e,0,i);return t}(e),o=x(r);o>-1&&(t||o!==k)&&(B(o),d.move(r,o,T,n))}},scroll:function(e,n,r,o){t.Scroll.scroll(e,n,r,(function(){var e=x(d.toIndex(h()));B(b?ne(e,i):e),o&&o()}))},getNext:S,getPrev:C,getAdjacent:_,getEnd:L,setIndex:B,getIndex:function(e){return e?T:k},toIndex:N,toPage:O,toDest:function(e){var t=d.toIndex(e);return E?le(t,0,i):t},hasFocus:M,isBusy:F}},Arrows:function(e,t,n){var i,r,o=Le(e),a=o.on,c=o.bind,l=o.emit,u=n.classes,d=n.i18n,h=t.Elements,f=t.Controller,p=h.arrows,g=h.track,m=p,v=h.prev,y=h.next,w={};function b(){var e;!(e=n.arrows)||v&&y||(m=p||j("div",u.arrows),v=P(!0),y=P(!1),i=!0,k(m,[v,y]),!p&&T(m,g)),v&&y&&(N(w,{prev:v,next:y}),z(m,e?"":"none"),C(m,r=ut+"--"+n.direction),e&&(a([ge,ye,be,ke,xe],A),c(y,"click",s(S,">")),c(v,"click",s(S,"<")),A(),F([v,y],Ge,g.id),l("arrows:mounted",v,y))),a(Ie,I)}function I(){E(),b()}function E(){o.destroy(),J(m,r),i?(U(p?[v,y]:m),v=y=null):M([v,y],tt)}function S(e){f.go(e,!0)}function P(e){return V('<button class="'+u.arrow+" "+(e?u.prev:u.next)+'" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="40" height="40" focusable="false"><path d="'+(n.arrowPath||"m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z")+'" />')}function A(){if(v&&y){var t=e.index,n=f.getPrev(),i=f.getNext(),r=n>-1&&t<n?d.last:d.prev,o=i>-1&&t>i?d.first:d.next;v.disabled=n<0,y.disabled=i<0,F(v,Xe,r),F(y,Xe,o),l("arrows:updated",v,y,n,i)}}return{arrows:w,mount:b,destroy:E,update:A}},Autoplay:function(e,t,n){var i,r,o=Le(e),a=o.on,s=o.bind,c=o.emit,l=Ne(n.interval,e.go.bind(e,">"),(function(e){var t=d.bar;t&&R(t,"width",100*e+"%"),c("autoplay:playing",e)})),u=l.isPaused,d=t.Elements,h=t.Elements,f=h.root,p=h.toggle,g=n.autoplay,m="pause"===g;function v(){u()&&t.Slides.isEnough()&&(l.start(!n.resetProgress),r=i=m=!1,b(),c(Ae))}function y(e){void 0===e&&(e=!0),m=!!e,b(),u()||(l.pause(),c(_e))}function w(){m||(i||r?y(!1):v())}function b(){p&&(S(p,bt,!m),F(p,Xe,n.i18n[m?"play":"pause"]))}function I(e){var i=t.Slides.getAt(e);l.set(i&&+W(i.slide,Bt)||n.interval)}return{mount:function(){g&&(n.pauseOnHover&&s(f,"mouseenter mouseleave",(function(e){i="mouseenter"===e.type,w()})),n.pauseOnFocus&&s(f,"focusin focusout",(function(e){r="focusin"===e.type,w()})),p&&s(p,"click",(function(){m?v():y(!0)})),a([ve,Ce,be],l.rewind),a(ve,I),p&&F(p,Ge,d.track.id),m||v(),b())},destroy:l.cancel,play:v,pause:y,isPaused:u}},Cover:function(e,t,n){var i=Le(e).on;function r(e){t.Slides.forEach((function(t){var n=D(t.container||t.slide,"img");n&&n.src&&o(e,n,t)}))}function o(e,t,n){n.style("background",e?'center/cover no-repeat url("'+t.src+'")':"",!0),z(t,e?"none":"")}return{mount:function(){n.cover&&(i(De,s(o,!0)),i([ge,Ie,be],s(r,!0)))},destroy:s(r,!1)}},Scroll:function(e,t,n){var i,r,o=Le(e),a=o.on,c=o.emit,l=e.state.set,u=t.Move,d=u.getPosition,h=u.getLimit,f=u.exceededLimit,p=u.translate,g=e.is(Lt),m=1;function v(e,n,o,a,h){var p=d();if(b(),o&&(!g||!f())){var v=t.Layout.sliderSize(),I=ue(e)*v*re(ae(e)/v)||0;e=u.toPosition(t.Controller.toDest(e%v))+I}var E=se(p,e,1);m=1,n=E?0:n||ie(ae(e-p)/1.5,800),r=a,i=Ne(n,y,s(w,p,e,h),1),l(5),c(Ce),i.start()}function y(){l(3),r&&r(),c(ke)}function w(e,t,i,o){var a=d(),s=e+(t-e)*function(e){var t=n.easingFunc;return t?t(e):1-Math.pow(1-e,4)}(o),c=(s-a)*m;p(a+c),g&&!i&&f()&&(m*=.6,ae(c)<10&&v(h(f(!0)),600,!1,r,!0))}function b(){i&&i.cancel()}function I(){i&&!i.isPaused()&&(b(),y())}return{mount:function(){a(ve,b),a([Ie,be],I)},destroy:b,scroll:v,cancel:I}},Drag:function(e,t,n){var i,r,o,a,s,c,u,d,f=Le(e),p=f.on,g=f.emit,m=f.bind,v=f.unbind,y=e.state,w=t.Move,b=t.Scroll,I=t.Controller,E=t.Elements.track,S=t.Media.reduce,C=t.Direction,k=C.resolve,T=C.orient,A=w.getPosition,_=w.exceededLimit,D=!1;function x(){var e=n.drag;W(!e),a="free"===e}function L(e){if(c=!1,!u){var t=$(e);i=e.target,r=n.noDrag,P(i,"."+gt+", ."+dt)||r&&P(i,r)||!t&&e.button||(I.isBusy()?X(e,!0):(d=t?E:window,s=y.is([4,5]),o=null,m(d,Dt,N,Mt),m(d,xt,O,Mt),w.cancel(),b.cancel(),M(e)))}var i,r}function N(t){if(y.is(6)||(y.set(6),g("drag")),t.cancelable)if(s){w.translate(i+F(t)/(D&&e.is(Lt)?5:1));var r=j(t)>200,o=D!==(D=_());(r||o)&&M(t),c=!0,g("dragging"),X(t)}else(function(e){return ae(F(e))>ae(F(e,!0))})(t)&&(s=function(e){var t=n.dragMinThreshold,i=h(t),r=i&&t.mouse||0,o=(i?t.touch:+t)||10;return ae(F(e))>($(e)?o:r)}(t),X(t))}function O(i){y.is(6)&&(y.set(3),g("dragged")),s&&(function(i){var r=function(t){if(e.is(Nt)||!D){var n=j(t);if(n&&n<200)return F(t)/n}return 0}(i),o=function(e){return A()+ue(e)*ne(ae(e)*(n.flickPower||600),a?1/0:t.Layout.listSize()*(n.flickMaxPages||1))}(r),s=n.rewind&&n.rewindByDrag;S(!1),a?I.scroll(o,0,n.snap):e.is(Ot)?I.go(T(ue(r))<0?s?"<":"-":s?">":"+"):e.is(Lt)&&D&&s?I.go(_(!0)?">":"<"):I.go(I.toDest(o),!0),S(!0)}(i),X(i)),v(d,Dt,N),v(d,xt,O),s=!1}function B(e){!u&&c&&X(e,!0)}function M(e){o=r,r=e,i=A()}function F(e,t){return z(e,t)-z(R(e),t)}function j(e){return K(e)-K(R(e))}function R(e){return r===e&&o||r}function z(e,t){return($(e)?e.changedTouches[0]:e)["page"+k(t?"Y":"X")]}function $(e){return"undefined"!=typeof TouchEvent&&e instanceof TouchEvent}function W(e){u=e}return{mount:function(){m(E,Dt,l,Mt),m(E,xt,l,Mt),m(E,_t,L,Mt),m(E,"click",B,{capture:!0}),m(E,"dragstart",X),p([ge,Ie],x)},disable:W,isDragging:function(){return s}}},Keyboard:function(e,t,n){var i,r,o=Le(e),a=o.on,s=o.bind,l=o.unbind,u=e.root,d=t.Direction.resolve;function h(){var e=n.keyboard;e&&(i="global"===e?window:u,s(i,Rt,g))}function f(){l(i,Rt)}function p(){var e=r;r=!0,c((function(){r=e}))}function g(t){if(!r){var n=jt(t);n===d(Be)?e.go("<"):n===d(Me)&&e.go(">")}}return{mount:function(){h(),a(Ie,f),a(Ie,h),a(ve,p)},destroy:f,disable:function(e){r=e}}},LazyLoad:function(e,t,n){var i=Le(e),r=i.on,a=i.off,c=i.bind,l=i.emit,u="sequential"===n.lazyLoad,d=[ye,ke],h=[];function f(){o(h),t.Slides.forEach((function(e){Y(e.slide,Wt).forEach((function(t){var i=W(t,zt),r=W(t,$t);if(i!==t.src||r!==t.srcset){var o=n.classes.spinner,a=t.parentElement,s=D(a,"."+o)||j("span",o,a);h.push([t,e,s]),t.src||z(t,"none")}}))})),u?v():(a(d),r(d,p),p())}function p(){(h=h.filter((function(t){var i=n.perPage*((n.preloadPages||1)+1)-1;return!t[1].isWithin(e.index,i)||g(t)}))).length||a(d)}function g(e){var t=e[0];C(e[1].slide,Ct),c(t,"load error",s(m,e)),F(t,"src",W(t,zt)),F(t,"srcset",W(t,$t)),M(t,zt),M(t,$t)}function m(e,t){var n=e[0],i=e[1];J(i.slide,Ct),"error"!==t.type&&(U(e[2]),z(n,""),l(De,n,i),l(Ee)),u&&v()}function v(){h.length&&g(h.shift())}return{mount:function(){n.lazyLoad&&(f(),r(be,f))},destroy:s(o,h),check:p}},Pagination:function(e,t,n){var i,r,c=Le(e),l=c.on,u=c.emit,d=c.bind,h=t.Slides,f=t.Elements,p=t.Controller,g=p.hasFocus,m=p.getIndex,v=p.go,y=t.Direction.resolve,w=f.pagination,b=[];function I(){i&&(U(w?a(i.children):i),J(i,r),o(b),i=null),c.destroy()}function E(e){v(">"+e,!0)}function S(e,t){var n=b.length,i=jt(t),r=k(),o=-1;i===y(Me,!1,r)?o=++e%n:i===y(Be,!1,r)?o=(--e+n)%n:"Home"===i?o=0:"End"===i&&(o=n-1);var a=b[o];a&&($(a.button),v(">"+o),X(t,!0))}function k(){return n.paginationDirection||n.direction}function T(e){return b[p.toPage(e)]}function P(){var e=T(m(!0)),t=T(m());if(e){var n=e.button;J(n,bt),M(n,Ve),F(n,We,-1)}if(t){var r=t.button;C(r,bt),F(r,Ve,!0),F(r,We,"")}u("pagination:updated",{list:i,items:b},e,t)}return{items:b,mount:function t(){I(),l([Ie,be,xe],t);var o=n.pagination;w&&z(w,o?"":"none"),o&&(l([ve,Ce,ke],P),function(){var t=e.length,o=n.classes,a=n.i18n,c=n.perPage,l=g()?p.getEnd()+1:oe(t/c);C(i=w||j("ul",o.pagination,f.track.parentElement),r=pt+"--"+k()),F(i,$e,"tablist"),F(i,Xe,a.select),F(i,Je,k()===Re?"vertical":"");for(var u=0;u<l;u++){var m=j("li",null,i),v=j("button",{class:o.page,type:"button"},m),y=h.getIn(u).map((function(e){return e.slide.id})),I=!g()&&c>1?a.pageX:a.slideX;d(v,"click",s(E,u)),n.paginationKeyboard&&d(v,"keydown",s(S,u)),F(m,$e,"presentation"),F(v,$e,"tab"),F(v,Ge,y.join(" ")),F(v,Xe,de(I,u+1)),F(v,We,-1),b.push({li:m,button:v,page:u})}}(),P(),u("pagination:mounted",{list:i,items:b},T(e.index)))},destroy:I,getAt:T,update:P}},Sync:function(e,t,n){var i=n.isNavigation,r=n.slideFocus,a=[];function c(){var t,n;e.splides.forEach((function(t){t.isParent||(u(e,t.splide),u(t.splide,e))})),i&&((n=(t=Le(e)).on)(we,h),n("sk",f),n([ge,Ie],d),a.push(t),t.emit(Pe,e.splides))}function l(){a.forEach((function(e){e.destroy()})),o(a)}function u(e,t){var n=Le(e);n.on(ve,(function(e,n,i){t.go(t.is(Nt)?i:e)})),a.push(n)}function d(){F(t.Elements.list,Je,n.direction===Re?"vertical":"")}function h(t){e.go(t.index)}function f(e,t){I(Ht,jt(t))&&(h(e),X(t))}return{setup:s(t.Media.set,{slideFocus:m(r)?i:r},!0),mount:c,destroy:l,remount:function(){l(),c()}}},Wheel:function(e,t,n){var i=Le(e).bind,r=0;function o(i){if(i.cancelable){var o=i.deltaY,a=o<0,s=K(i),c=n.wheelMinThreshold||0,l=n.wheelSleep||0;ae(o)>c&&s-r>l&&(e.go(a?"<":">"),r=s),function(i){return!n.releaseWheel||e.state.is(4)||-1!==t.Controller.getAdjacent(i)}(a)&&X(i)}}return{mount:function(){n.wheel&&i(t.Elements.track,"wheel",o,Mt)}}},Live:function(e,t,n){var i=Le(e).on,r=t.Elements.track,o=n.live&&!n.isNavigation,a=j("span",yt),c=Ne(90,s(l,!1));function l(e){F(r,Ze,e),e?(k(r,a),c.start()):(U(a),c.cancel())}function u(e){o&&F(r,Qe,e?"off":"polite")}return{mount:function(){o&&(u(!t.Autoplay.isPaused()),F(r,et,!0),a.textContent="â€¦",i(Ae,s(u,!0)),i(_e,s(u,!1)),i([ye,ke],s(l,!0)))},disable:u,destroy:function(){M(r,[Qe,et,Ze]),U(a)}}}}),Ut={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:At,i18n:{prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function Vt(e,t,n){var i=t.Slides;function r(){i.forEach((function(e){e.style("transform","translateX(-"+100*e.index+"%)")}))}return{mount:function(){Le(e).on([ge,be],r)},start:function(e,t){i.style("transition","opacity "+n.speed+"ms "+n.easing),c(t)},cancel:l}}function Xt(e,t,n){var i,r=t.Move,o=t.Controller,a=t.Scroll,c=t.Elements.list,l=s(R,c,"transition");function u(){l(""),a.cancel()}return{mount:function(){Le(e).bind(c,"transitionend",(function(e){e.target===c&&i&&(u(),i())}))},start:function(t,s){var c=r.toPosition(t,!0),u=r.getPosition(),d=function(t){var i=n.rewindSpeed;if(e.is(Lt)&&i){var r=o.getIndex(!0),a=o.getEnd();if(0===r&&t>=a||r>=a&&0===t)return i}return n.speed}(t);ae(c-u)>=1&&d>=1?n.useScroll?a.scroll(c,d,!1,s):(l("transform "+d+"ms "+n.easing),r.translate(c,!0),i=s):(r.jump(t),s())},cancel:u}}var qt=function(){function e(t,n){var i;this.event=Le(),this.Components={},this.state=(i=1,{set:function(e){i=e},is:function(e){return I(w(e),i)}}),this.splides=[],this._o={},this._E={};var r=g(t)?q(document,t):t;te(r,r+" is invalid."),this.root=r,n=O({label:W(r,Xe)||"",labelledby:W(r,qe)||""},Ut,e.defaults,n||{});try{O(n,JSON.parse(W(r,ee)))}catch(e){te(!1,"Invalid JSON")}this._o=Object.create(O({},n))}var t,n,r=e.prototype;return r.mount=function(e,t){var n=this,i=this.state,r=this.Components;return te(i.is([1,7]),"Already mounted!"),i.set(1),this._C=r,this._T=t||this._T||(this.is(Ot)?Vt:Xt),this._E=e||this._E,L(N({},Gt,this._E,{Transition:this._T}),(function(e,t){var i=e(n,r,n._o);r[t]=i,i.setup&&i.setup()})),L(r,(function(e){e.mount&&e.mount()})),this.emit(ge),C(this.root,wt),i.set(3),this.emit(me),this},r.sync=function(e){return this.splides.push({splide:e}),e.splides.push({splide:this,isParent:!0}),this.state.is(3)&&(this._C.Sync.remount(),e.Components.Sync.remount()),this},r.go=function(e){return this._C.Controller.go(e),this},r.on=function(e,t){return this.event.on(e,t),this},r.off=function(e){return this.event.off(e),this},r.emit=function(e){var t;return(t=this.event).emit.apply(t,[e].concat(a(arguments,1))),this},r.add=function(e,t){return this._C.Slides.add(e,t),this},r.remove=function(e){return this._C.Slides.remove(e),this},r.is=function(e){return this._o.type===e},r.refresh=function(){return this.emit(be),this},r.destroy=function(e){void 0===e&&(e=!0);var t=this.event,n=this.state;return n.is(1)?Le(this).on(me,this.destroy.bind(this,e)):(L(this._C,(function(t){t.destroy&&t.destroy(e)}),!0),t.emit(Te),t.destroy(),e&&o(this.splides),n.set(7)),this},t=e,(n=[{key:"options",get:function(){return this._o},set:function(e){this._C.Media.set(e,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Yt=qt;Yt.defaults={},Yt.STATES={CREATED:1,MOUNTED:2,IDLE:3,MOVING:4,SCROLLING:5,DRAGGING:6,DESTROYED:7};class Jt{constructor(e,t){this.emptyGlowImageTag="empty_glow_image",this.currentlyPlayingAudioElement=null,this.currentlyActiveGlowImages=[],this.currentlyActiveWord=null,this.imagesPath=e,this.audioPath=t,this.currentPage=0,this.splideHandle=new Yt(".splide",{fixedHeight:window.innerHeight-20}).mount(),this.splideHandle.on("move",((e,t,n)=>{this.currentPage!==e&&(console.log("Stopping audio for page from move: "+t),this.transitioningToPage=!0,this.stopPageAudio(this.book.pages[t]))})),this.splideHandle.on("moved",((e,t,n)=>{this.currentPage!==e&&(console.log("Playing audio for page from moved: "+e),this.currentPage=e,this.transitioningToPage=!1,this.playPageAudio(this.book.pages[e],e))})),this.splideHandle.on("drag",((e,t,n)=>{this.currentPage!==e&&(console.log("Stopping audio for page from drag: "+t),this.transitioningToPage=!0,this.stopPageAudio(this.book.pages[t]))})),this.splideHandle.on("dragged",((e,t,n)=>{this.currentPage!==e&&(console.log("Playing audio for page from dragged: "+e),this.currentPage=e,this.transitioningToPage=!1,this.playPageAudio(this.book.pages[e],e))})),this.addPageResizeListener(),this.addMinimzationListener()}addMinimzationListener(){document.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState?this.playPageAudio(this.book.pages[this.currentPage],this.currentPage):this.stopPageAudio(this.book.pages[this.currentPage])}))}stopPageAudio(e){for(let t=0;t<e.visualElements.length;t++){let n=e.visualElements[t];if("audio"===n.type){let e=n,t=document.getElementById(e.domID);t.pause(),t.currentTime=0,clearInterval(this.currentPageAutoPlayerInterval);for(let t=0;t<e.audioTimestamps.timestamps.length;t++){let n=document.getElementById(e.domID+"_word_"+t);n.classList.remove("cr-clickable-word-active"),n.style.color="white"}}}}playPageAudio(e,t){console.log("Attempting to play audio for page: "+t),console.log("Book has: "+this.book.pages.length+" pages"),console.log("The page has "+e.visualElements.length+" visual elements");for(let n=0;n<e.visualElements.length;n++){let i=e.visualElements[n];if("audio"===i.type){let e=i;console.log("Found the audio element in page's visual elements: "+e.audioSrc),console.log("Does the audio element have timestamps? "+(void 0!==e.audioTimestamps?"Yes":"No")),console.log("Audio element domID: "+e.domID);let n=document.getElementById(e.domID);console.log("Audio element dom is null or undefined? "+(null==n?"Yes":"No")),n.play(),this.currentlyPlayingAudioElement=n;let r=0,o=0;console.log("Starting the auto player interval for word highlighting with 60ms interval"),this.currentPageAutoPlayerInterval=setInterval((()=>{if(void 0!==e.audioTimestamps){let i=n.currentTime;for(let n=0;n<e.audioTimestamps.timestamps.length;n++){if(i>=e.audioTimestamps.timestamps[n].startTimestamp&&i<=e.audioTimestamps.timestamps[n].endTimestamp){o=n;let i=document.getElementById(e.domID+"_word_"+o);this.currentlyActiveWord=i,i.classList.add("cr-clickable-word-active"),i.style.color=e.glowColor,this.enableConnectedGraphicHighlighting(t,o)}if(r<o){let t=document.getElementById(e.domID+"_word_"+r);t.classList.remove("cr-clickable-word-active"),t.style.color="white",r=o}}if(i>=e.audioTimestamps.timestamps[e.audioTimestamps.timestamps.length-1].endTimestamp-.1){let t=document.getElementById(e.domID+"_word_"+o);t.classList.remove("cr-clickable-word-active"),t.style.color="white",this.currentlyPlayingAudioElement=null,clearInterval(this.currentPageAutoPlayerInterval)}}}),60)}}}addPageResizeListener(){window.addEventListener("resize",(()=>{this.splideHandle.options.fixedHeight=window.innerHeight-20,this.splideHandle.refresh()}))}initializeBook(t){this.book=t,this.currentBookType=t.bookType,this.numberOfPages=t.pages.length,this.currentBookType===e.CuriousReader?this.initializeCuriousReaderBook(t):this.currentBookType===e.GDL&&this.initializeGDLBook(t)}initializeCuriousReaderBook(e){this.numberOfPages=e.pages.length;for(let t=0;t<e.pages.length;t++){const n=document.createElement("li"),i=document.createElement("div");n.style.display="flex",n.style.justifyContent="center",n.style.alignItems="center",i.style.position="relative",i.style.width="90%",i.style.height="90%",i.style.top="-4%",n.appendChild(i),n.classList.add("splide__slide");let r=!1;for(let o=0;o<e.pages[t].visualElements.length;o++){let a=e.pages[t].visualElements[o];if("image"==a.type){let e=a,n=t;i.appendChild(this.createImageContainer(n,e,o))}else if("audio"==a.type){r=!0;let n=a,o=null;for(let n=0;n<e.pages[t].visualElements.length;n++){let i=e.pages[t].visualElements[n];if("text"==i.type){o=i;break}}let s=null;for(let n=0;n<e.pages[t].visualElements.length;n++){let i=e.pages[t].visualElements[n];if("image"==i.type){s=i;break}}if(o){let e=this.createAudioAndTextContainers(t,n,o,s);i.appendChild(e[0]),i.appendChild(e[1])}else i.appendChild(this.createAudioContainer(n))}this.splideHandle.add(n)}if(!r)for(let n=0;n<e.pages[t].visualElements.length;n++){let r=e.pages[t].visualElements[n];if("text"==r.type){let e=r;i.appendChild(this.createTextContainer(e))}}}}createTextContainer(e){let t=document.createElement("div");return t.id="cr-text",t.classList.add("cr-text"),t.style.position="absolute",t.style.webkitTextStroke="1px #303030",t.style.color="#FFFFFF",t.style.textShadow="0.1rem 0.15rem 0.1rem #303030",t.style.fontFamily="Quicksand",t.style.fontWeight="800",t.style.fontSize="inherit",this.book.bookName.includes("ComeCome")||this.book.bookName.includes("ILove")||this.book.bookName.includes("GuessWhatIAm")||this.book.bookName.includes("TheUmbrellas")||this.book.bookName.includes("IAmFlying")?(t.style.top=e.positionY+"%",t.style.left="0%",t.style.width="100%",t.style.height=e.height+"%",t.style.textAlign="center"):(t.style.top=e.positionY+"%",t.style.left=e.positionX+"%",t.style.width=e.width+"%",t.style.height=e.height+"%"),t.innerHTML=e.textContentAsHTML.replace(/font-size:[^;]+;/g,""),t}createImageContainer(e,t,n){let i=document.createElement("div");if(i.style.position="absolute",this.book.bookName.includes("ComeCome")||this.book.bookName.includes("ILove")||this.book.bookName.includes("GuessWhatIAm")||this.book.bookName.includes("TheUmbrellas")||this.book.bookName.includes("IAmFlying")?(t.imageSource===this.emptyGlowImageTag?(t.positionX<=42?i.style.left=t.positionX+10+"%":t.positionX>=70?i.style.left=t.positionX-10+"%":i.style.left=t.positionX+"%",i.style.width=.7*t.width+"%",i.style.height=.7*t.height+"%"):(i.style.left=t.positionX+10+"%",i.style.width=.8*t.width+"%",i.style.height=.8*t.height+"%"),i.style.top=t.positionY+"%"):(i.style.top=t.positionY+"%",i.style.left=t.positionX+"%",i.style.width=t.width+"%",i.style.height=t.height+"%"),t.imageSource===this.emptyGlowImageTag)if(i.classList.add("cr-image-empty-glow"),void 0===t.domID||null===t.domID||""===t.domID){const t="img"+e+"_"+n;i.id=t,i.addEventListener("click",(()=>{this.handleStandaloneGlowImageClick(e,t)}))}else i.classList.add(t.domID),i.addEventListener("click",(()=>{this.handleGlowImageClick(e,t.domID.split("_")[1])}));else{i.id=t.domID,i.classList.add("cr-image");let e=document.createElement("img");e.src=this.imagesPath+t.imageSource.replace("images/",""),e.style.width="100%",e.style.height="100%",i.appendChild(e)}return i}createAudioContainer(e){let t=document.createElement("div");t.classList.add("cr-audio"),t.style.position="absolute";let n=document.createElement("audio");if(n.id=e.domID,n.src=this.audioPath+e.audioSrc.replace("audios/",""),n.controls=!1,t.appendChild(n),void 0!==e.audioTimestamps)for(let n=0;n<e.audioTimestamps.timestamps.length;n++){let i=e.audioTimestamps.timestamps[n],r=document.createElement("audio");r.id=i.domID,r.src=this.audioPath+i.audioSrc.replace("audios/",""),r.controls=!1,t.appendChild(r)}return t}createAudioAndTextContainers(e,t,n,i){let r=Array(),o=document.createElement("div");o.classList.add("cr-audio"),o.style.position="absolute";let a=document.createElement("audio");a.id=t.domID,a.src=this.audioPath+t.audioSrc.replace("audios/",""),a.controls=!1,o.appendChild(a);let s=Array();if(void 0!==t.audioTimestamps)for(let e=0;e<t.audioTimestamps.timestamps.length;e++){let n=t.audioTimestamps.timestamps[e],i=document.createElement("audio");i.id=n.domID,i.src=this.audioPath+n.audioSrc.replace("audios/",""),i.controls=!1,s.push(n.word.trim()),o.appendChild(i)}r.push(o);let c=t.domID,l=document.createElement("div");l.id="cr-text",l.classList.add("cr-text"),l.style.position="absolute",l.style.display="flex",l.style.justifyContent="center",l.style.alignItems="center",l.style.webkitTextStroke="1px #303030",l.style.color="#FFFFFF",l.style.textShadow="0.1rem 0.15rem 0.1rem #303030",l.style.fontFamily="Quicksand",l.style.fontWeight="800",this.book.bookName.includes("ComeCome")||this.book.bookName.includes("ILove")||this.book.bookName.includes("GuessWhatIAm")||this.book.bookName.includes("TheUmbrellas")||this.book.bookName.includes("IAmFlying")?(n.width=100,n.positionX=0,n.positionY=81,l.style.top="81%"):(l.style.top=n.positionY+"%",l.style.height=n.height+"%"),i.positionX>28&&n.width<88&&n.positionY<65?(l.style.left=n.positionX+"%",l.style.width="42%"):i.positionX<=28&&n.width<88?(l.style.left=n.positionX+2+"%",l.style.width=n.width+"%"):l.style.width="100%";let u=document.createElement("p");void 0!==t.audioTimestamps&&t.audioTimestamps.timestamps.length>15?u.classList.add("cr-sentence-mini-s"):void 0!==t.audioTimestamps&&t.audioTimestamps.timestamps.length>10&&t.audioTimestamps.timestamps.length<=15&&u.classList.add("cr-sentence-mini"),u.style.textAlign="center",u.style.margin="0px";for(let t=0;t<s.length;t++){let n=document.createElement("div");n.id=c+"_word_"+t,n.classList.add("cr-clickable-word"),n.style.marginLeft="10px",n.style.marginRight="10px",n.innerText=s[t],n.addEventListener("click",(n=>{this.handleInteractiveWordClick(e,t)})),u.appendChild(n)}return l.appendChild(u),r.push(l),r}handleStandaloneGlowImageClick(e,t){if(null!==this.currentlyPlayingAudioElement&&(this.currentlyPlayingAudioElement.pause(),this.currentlyPlayingAudioElement.currentTime=0,clearInterval(this.currentPageAutoPlayerInterval),clearTimeout(this.currentWordPlayingTimeout),clearTimeout(this.currentGlowImageTimeout),this.currentlyActiveGlowImages.length>0))for(let e=0;e<this.currentlyActiveGlowImages.length;e++)this.currentlyActiveGlowImages[e].style.boxShadow="transparent 0px 0px 20px 20px";this.currentlyActiveGlowImages=Array();let n=document.getElementById(t);this.currentlyActiveGlowImages.push(n),n.style.boxShadow="orange 0px 0px 20px 20px",this.currentGlowImageTimeout=setTimeout((()=>{document.getElementById(t).style.boxShadow="transparent 0px 0px 20px 20px"}),600)}handleGlowImageClick(e,t){let n=parseInt(t);this.handleInteractiveWordClick(e,n)}enableConnectedGraphicHighlighting(e,t){this.handleInteractiveWordClick(e,t,!0)}handleInteractiveWordClick(e,t,n=!1){if(null!==this.currentlyPlayingAudioElement&&!n&&(this.currentlyPlayingAudioElement.pause(),this.currentlyPlayingAudioElement.currentTime=0,clearInterval(this.currentPageAutoPlayerInterval),clearTimeout(this.currentWordPlayingTimeout),clearTimeout(this.currentGlowImageTimeout),null!==this.currentlyActiveWord&&(this.currentlyActiveWord.classList.remove("cr-clickable-word-active"),this.currentlyActiveWord.style.color="white"),this.currentlyActiveGlowImages.length>0))for(let e=0;e<this.currentlyActiveGlowImages.length;e++)this.currentlyActiveGlowImages[e].style.boxShadow="transparent 0px 0px 20px 20px";this.currentlyActiveGlowImages=Array();let i=this.book.pages[e];for(let e=0;e<i.visualElements.length;e++){let r=i.visualElements[e];if("audio"===r.type){let e=r,i=document.getElementById(e.audioTimestamps.timestamps[t].domID);if(!n){let n=document.getElementById(e.domID+"_word_"+t);this.currentlyActiveWord=n,n.classList.add("cr-clickable-word-active"),n.style.color=e.glowColor,this.currentWordPlayingTimeout=setTimeout((()=>{n.classList.remove("cr-clickable-word-active"),n.style.color="white"}),600)}let o="img"+e.domID+"_"+t,a=document.getElementsByClassName(o);for(let t=0;t<a.length;t++){let n=a[t];this.currentlyActiveGlowImages.push(n),n.style.boxShadow=e.glowColor+" 0px 0px 20px 20px"}this.currentGlowImageTimeout=setTimeout((()=>{for(let e=0;e<a.length;e++)a[e].style.boxShadow="transparent 0px 0px 20px 20px"}),600),n||(this.currentlyPlayingAudioElement=i,i.play())}}}initializeGDLBook(e){for(let t=0;t<e.pages.length;t++){const n=document.createElement("li");n.classList.add("splide__slide");let i=document.createElement("div");i.classList.add("gdl-flex-container"),i.style.display="flex",i.style.flexDirection="column",i.style.justifyContent="center",i.style.alignItems="center",i.style.height="100%",i.style.width="100%",n.appendChild(i);for(let n=0;n<e.pages[t].visualElements.length;n++){let r=e.pages[t].visualElements[n];if("text"==r.type){let e=r,t=document.createElement("div");t.style.width="60%",t.classList.add("gdl-text"),t.style.webkitTextStroke="1px #303030",t.style.color="#FFFFFF",t.style.textShadow="0.1rem 0.15rem 0.1rem #303030",t.style.fontFamily="Quicksand",t.style.fontWeight="800",t.style.fontSize="1.7em",t.innerHTML=e.textContentAsHTML.replace("2.25em","28px"),i.appendChild(t)}else if("image"==r.type){let e=r,t=document.createElement("div");t.classList.add("gdl-image");let n=document.createElement("img");n.src=this.imagesPath+e.imageSource.replace("images/",""),n.style.width="100%",n.style.height="100%",t.appendChild(n),i.appendChild(t)}}this.splideHandle.add(n)}}goToNextPage(){this.transitioningToPage||(this.currentPage<this.numberOfPages&&this.currentPage++,this.transitionToPage(this.currentPage))}goToPreviousPage(){this.transitioningToPage||(this.currentPage>0&&this.currentPage--,this.transitionToPage(this.currentPage))}transitionToPage(e){this.transitioningToPage=!0}}try{self["workbox:window:6.5.3"]&&_()}catch(Kt){}function Kt(e,t){return new Promise((function(n){var i=new MessageChannel;i.port1.onmessage=function(e){n(e.data)},e.postMessage(t,[i.port2])}))}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Zt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.5.3"]&&_()}catch(Kt){}var en=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};function tn(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var nn=function(e,t){this.type=e,Object.assign(this,t)};function rn(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function on(){}var an={type:"SKIP_WAITING"};function sn(e,t){if(!t)return e&&e.then?e.then(on):Promise.resolve()}var cn=function(e){var t,n;function i(t,n){var i,r;return void 0===n&&(n={}),(i=e.call(this)||this).nn={},i.tn=0,i.rn=new en,i.en=new en,i.on=new en,i.un=0,i.an=new Set,i.cn=function(){var e=i.fn,t=e.installing;i.tn>0||!tn(t.scriptURL,i.sn.toString())||performance.now()>i.un+6e4?(i.vn=t,e.removeEventListener("updatefound",i.cn)):(i.hn=t,i.an.add(t),i.rn.resolve(t)),++i.tn,t.addEventListener("statechange",i.ln)},i.ln=function(e){var t=i.fn,n=e.target,r=n.state,o=n===i.vn,a={sw:n,isExternal:o,originalEvent:e};!o&&i.mn&&(a.isUpdate=!0),i.dispatchEvent(new nn(r,a)),"installed"===r?i.wn=self.setTimeout((function(){"installed"===r&&t.waiting===n&&i.dispatchEvent(new nn("waiting",a))}),200):"activating"===r&&(clearTimeout(i.wn),o||i.en.resolve(n))},i.dn=function(e){var t=i.hn,n=t!==navigator.serviceWorker.controller;i.dispatchEvent(new nn("controlling",{isExternal:n,originalEvent:e,sw:t,isUpdate:i.mn})),n||i.on.resolve(t)},i.gn=(r=function(e){var t=e.data,n=e.ports,r=e.source;return rn(i.getSW(),(function(){i.an.has(r)&&i.dispatchEvent(new nn("message",{data:t,originalEvent:e,ports:n,sw:r}))}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(r.apply(this,e))}catch(e){return Promise.reject(e)}}),i.sn=t,i.nn=n,navigator.serviceWorker.addEventListener("message",i.gn),i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,o=i.prototype;return o.register=function(e){var t=(void 0===e?{}:e).immediate,n=void 0!==t&&t;try{var i=this;return function(e,t){var n=e();return n&&n.then?n.then(t):t()}((function(){if(!n&&"complete"!==document.readyState)return sn(new Promise((function(e){return window.addEventListener("load",e)})))}),(function(){return i.mn=Boolean(navigator.serviceWorker.controller),i.yn=i.pn(),rn(i.bn(),(function(e){i.fn=e,i.yn&&(i.hn=i.yn,i.en.resolve(i.yn),i.on.resolve(i.yn),i.yn.addEventListener("statechange",i.ln,{once:!0}));var t=i.fn.waiting;return t&&tn(t.scriptURL,i.sn.toString())&&(i.hn=t,Promise.resolve().then((function(){i.dispatchEvent(new nn("waiting",{sw:t,wasWaitingBeforeRegister:!0}))})).then((function(){}))),i.hn&&(i.rn.resolve(i.hn),i.an.add(i.hn)),i.fn.addEventListener("updatefound",i.cn),navigator.serviceWorker.addEventListener("controllerchange",i.dn),i.fn}))}))}catch(e){return Promise.reject(e)}},o.update=function(){try{return this.fn?sn(this.fn.update()):void 0}catch(e){return Promise.reject(e)}},o.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},o.messageSW=function(e){try{return rn(this.getSW(),(function(t){return Kt(t,e)}))}catch(e){return Promise.reject(e)}},o.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&Kt(this.fn.waiting,an)},o.pn=function(){var e=navigator.serviceWorker.controller;return e&&tn(e.scriptURL,this.sn.toString())?e:void 0},o.bn=function(){try{var e=this;return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return rn(navigator.serviceWorker.register(e.sn,e.nn),(function(t){return e.un=performance.now(),t}))}),(function(e){throw e}))}catch(e){return Promise.reject(e)}},(r=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(i.prototype,r),i}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(e,t){this.Sn(e).add(t)},t.removeEventListener=function(e,t){this.Sn(e).delete(t)},t.dispatchEvent=function(e){e.target=this;for(var t,n=Zt(this.Sn(e.type));!(t=n()).done;)(0,t.value)(e)},t.Sn=function(e){return this.Pn.has(e)||this.Pn.set(e,new Set),this.Pn.get(e)},e}());const ln=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},un={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const r=e[t],o=t+1<e.length,a=o?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=r>>2,u=(3&r)<<4|a>>4;let d=(15&a)<<2|c>>6,h=63&c;s||(h=64,o||(d=64)),i.push(n[l],n[u],n[d],n[h])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ln(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&o)}else if(r>239&&r<365){const o=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(o>>10)),t[i++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const r=n[e.charAt(t++)],o=t<e.length?n[e.charAt(t)]:0;++t;const a=t<e.length?n[e.charAt(t)]:64;++t;const s=t<e.length?n[e.charAt(t)]:64;if(++t,null==r||null==o||null==a||null==s)throw new dn;const c=r<<2|o>>4;if(i.push(c),64!==a){const e=o<<4&240|a>>2;if(i.push(e),64!==s){const e=a<<6&192|s;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class dn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hn=function(e){return function(e){const t=ln(e);return un.encodeByteArray(t,!0)}(e).replace(/\./g,"")},fn=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t.g)return t.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&function(e){try{return un.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},pn=()=>{var e;return null===(e=fn())||void 0===e?void 0:e.config};class gn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function mn(){try{return"object"==typeof indexedDB}catch(e){return!1}}function vn(){return new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}class yn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wn.prototype.create)}}class wn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],o=r?function(e,t){return e.replace(bn,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new yn(i,a,n)}}const bn=/\{\$([^}]+)}/g;function In(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],o=t[r];if(En(n)&&En(o)){if(!In(n,o))return!1}else if(n!==o)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function En(e){return null!==e&&"object"==typeof e}function Sn(e,t=1e3,n=2){const i=t*Math.pow(n,e),r=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+r)}function Cn(e){return e&&e._delegate?e._delegate:e}class kn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Tn="[DEFAULT]";class Pn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new gn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Tn})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=Tn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=Tn){return this.instances.has(e)}getOptions(e=Tn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===Tn?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e=Tn){return this.component?this.component.multipleInstances?e:Tn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class An{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Pn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const _n=[];var Dn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Dn||(Dn={}));const xn={debug:Dn.DEBUG,verbose:Dn.VERBOSE,info:Dn.INFO,warn:Dn.WARN,error:Dn.ERROR,silent:Dn.SILENT},Ln=Dn.INFO,Nn={[Dn.DEBUG]:"log",[Dn.VERBOSE]:"log",[Dn.INFO]:"info",[Dn.WARN]:"warn",[Dn.ERROR]:"error"},On=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),r=Nn[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${i}]  ${e.name}:`,...n)};class Bn{constructor(e){this.name=e,this._logLevel=Ln,this._logHandler=On,this._userLogHandler=null,_n.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Dn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?xn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Dn.DEBUG,...e),this._logHandler(this,Dn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Dn.VERBOSE,...e),this._logHandler(this,Dn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Dn.INFO,...e),this._logHandler(this,Dn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Dn.WARN,...e),this._logHandler(this,Dn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Dn.ERROR,...e),this._logHandler(this,Dn.ERROR,...e)}}let Mn,Fn;const jn=new WeakMap,Rn=new WeakMap,zn=new WeakMap,$n=new WeakMap,Wn=new WeakMap;let Hn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Rn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||zn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Un(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Gn(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Fn||(Fn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Vn(this),e),Un(jn.get(this))}:function(...e){return Un(t.apply(Vn(this),e))}:function(e,...n){const i=t.call(Vn(this),e,...n);return zn.set(i,e.sort?e.sort():[e]),Un(i)}:(e instanceof IDBTransaction&&function(e){if(Rn.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{t(),i()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)}));Rn.set(e,t)}(e),n=e,(Mn||(Mn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>n instanceof e))?new Proxy(e,Hn):e);var t,n}function Un(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{t(Un(e.result)),i()},o=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&jn.set(t,e)})).catch((()=>{})),Wn.set(t,e),t}(e);if($n.has(e))return $n.get(e);const t=Gn(e);return t!==e&&($n.set(e,t),Wn.set(t,e)),t}const Vn=e=>Wn.get(e);function Xn(e,t,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(e,t),s=Un(a);return i&&a.addEventListener("upgradeneeded",(e=>{i(Un(a.result),e.oldVersion,e.newVersion,Un(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{o&&e.addEventListener("close",(()=>o())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}const qn=["get","getKey","getAll","getAllKeys","count"],Yn=["put","add","delete","clear"],Jn=new Map;function Kn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Jn.get(t))return Jn.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Yn.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!qn.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,r?"readwrite":"readonly");let a=o.store;return i&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),r&&o.done]))[0]};return Jn.set(t,o),o}var Qn;Qn=Hn,Hn={...Qn,get:(e,t,n)=>Kn(e,t)||Qn.get(e,t,n),has:(e,t)=>!!Kn(e,t)||Qn.has(e,t)};class Zn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const ei="@firebase/app",ti="0.9.27",ni=new Bn("@firebase/app"),ii="@firebase/app-compat",ri="@firebase/analytics-compat",oi="@firebase/analytics",ai="@firebase/app-check-compat",si="@firebase/app-check",ci="@firebase/auth",li="@firebase/auth-compat",ui="@firebase/database",di="@firebase/database-compat",hi="@firebase/functions",fi="@firebase/functions-compat",pi="@firebase/installations",gi="@firebase/installations-compat",mi="@firebase/messaging",vi="@firebase/messaging-compat",yi="@firebase/performance",wi="@firebase/performance-compat",bi="@firebase/remote-config",Ii="@firebase/remote-config-compat",Ei="@firebase/storage",Si="@firebase/storage-compat",Ci="@firebase/firestore",ki="@firebase/firestore-compat",Ti="firebase",Pi="[DEFAULT]",Ai={[ei]:"fire-core",[ii]:"fire-core-compat",[oi]:"fire-analytics",[ri]:"fire-analytics-compat",[si]:"fire-app-check",[ai]:"fire-app-check-compat",[ci]:"fire-auth",[li]:"fire-auth-compat",[ui]:"fire-rtdb",[di]:"fire-rtdb-compat",[hi]:"fire-fn",[fi]:"fire-fn-compat",[pi]:"fire-iid",[gi]:"fire-iid-compat",[mi]:"fire-fcm",[vi]:"fire-fcm-compat",[yi]:"fire-perf",[wi]:"fire-perf-compat",[bi]:"fire-rc",[Ii]:"fire-rc-compat",[Ei]:"fire-gcs",[Si]:"fire-gcs-compat",[Ci]:"fire-fst",[ki]:"fire-fst-compat","fire-js":"fire-js",[Ti]:"fire-js-all"},_i=new Map,Di=new Map;function xi(e,t){try{e.container.addComponent(t)}catch(n){ni.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Li(e){const t=e.name;if(Di.has(t))return ni.debug(`There were multiple attempts to register component ${t}.`),!1;Di.set(t,e);for(const t of _i.values())xi(t,e);return!0}function Ni(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Oi=new wn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Bi{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new kn("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oi.create("app-deleted",{appName:this._name})}}function Mi(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const i=Object.assign({name:Pi,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!=typeof r||!r)throw Oi.create("bad-app-name",{appName:String(r)});if(n||(n=pn()),!n)throw Oi.create("no-options");const o=_i.get(r);if(o){if(In(n,o.options)&&In(i,o.config))return o;throw Oi.create("duplicate-app",{appName:r})}const a=new An(r);for(const e of Di.values())a.addComponent(e);const s=new Bi(n,i,a);return _i.set(r,s),s}function Fi(e,t,n){var i;let r=null!==(i=Ai[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);const o=r.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${r}" with version "${t}":`];return o&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ni.warn(e.join(" "))}Li(new kn(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}const ji="firebase-heartbeat-store";let Ri=null;function zi(){return Ri||(Ri=Xn("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ji)}catch(e){console.warn(e)}}}).catch((e=>{throw Oi.create("idb-open",{originalErrorMessage:e.message})}))),Ri}async function $i(e,t){try{const n=(await zi()).transaction(ji,"readwrite"),i=n.objectStore(ji);await i.put(t,Wi(e)),await n.done}catch(e){if(e instanceof yn)ni.warn(e.message);else{const t=Oi.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});ni.warn(t.message)}}}function Wi(e){return`${e.name}!${e.options.appId}`}class Hi{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ui(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Gi();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((e=>e.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Gi(),{heartbeatsToSend:n,unsentEntries:i}=function(e,t=1024){const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),Vi(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Vi(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=hn(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Gi(){return(new Date).toISOString().substring(0,10)}class Ui{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!mn()&&vn().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await zi()).transaction(ji),n=await t.objectStore(ji).get(Wi(e));return await t.done,n}catch(e){if(e instanceof yn)ni.warn(e.message);else{const t=Oi.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});ni.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return $i(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return $i(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Vi(e){return hn(JSON.stringify({version:2,heartbeats:e})).length}Li(new kn("platform-logger",(e=>new Zn(e)),"PRIVATE")),Li(new kn("heartbeat",(e=>new Hi(e)),"PRIVATE")),Fi(ei,ti,""),Fi(ei,ti,"esm2017"),Fi("fire-js",""),Fi("firebase","10.8.0","app");const Xi="@firebase/installations",qi="0.6.5",Yi=`w:${qi}`,Ji="FIS_v2",Ki=new wn("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Qi(e){return e instanceof yn&&e.code.includes("request-failed")}function Zi({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function er(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function tr(e,t){const n=(await t.json()).error;return Ki.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function nr({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function ir(e){const t=await e();return t.status>=500&&t.status<600?e():t}function rr(e){return new Promise((t=>{setTimeout(t,e)}))}const or=/^[cdef][\w-]{21}$/;function ar(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){var t;return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22)}(e);return or.test(t)?t:""}catch(e){return""}}function sr(e){return`${e.appName}!${e.appId}`}const cr=new Map;function lr(e,t){const n=sr(e);ur(n,t),function(e,t){const n=(!dr&&"BroadcastChannel"in self&&(dr=new BroadcastChannel("[Firebase] FID Change"),dr.onmessage=e=>{ur(e.data.key,e.data.fid)}),dr);n&&n.postMessage({key:e,fid:t}),0===cr.size&&dr&&(dr.close(),dr=null)}(n,t)}function ur(e,t){const n=cr.get(e);if(n)for(const e of n)e(t)}let dr=null;const hr="firebase-installations-store";let fr=null;function pr(){return fr||(fr=Xn("firebase-installations-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(hr)}})),fr}async function gr(e,t){const n=sr(e),i=(await pr()).transaction(hr,"readwrite"),r=i.objectStore(hr),o=await r.get(n);return await r.put(t,n),await i.done,o&&o.fid===t.fid||lr(e,t.fid),t}async function mr(e){const t=sr(e),n=(await pr()).transaction(hr,"readwrite");await n.objectStore(hr).delete(t),await n.done}async function vr(e,t){const n=sr(e),i=(await pr()).transaction(hr,"readwrite"),r=i.objectStore(hr),o=await r.get(n),a=t(o);return void 0===a?await r.delete(n):await r.put(a,n),await i.done,!a||o&&o.fid===a.fid||lr(e,a.fid),a}async function yr(e){let t;const n=await vr(e.appConfig,(n=>{const i=function(e){return Ir(e||{fid:ar(),registrationStatus:0})}(n),r=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Ki.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=Zi(e),r=nr(e),o=t.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const a={fid:n,authVersion:Ji,appId:e.appId,sdkVersion:Yi},s={method:"POST",headers:r,body:JSON.stringify(a)},c=await ir((()=>fetch(i,s)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:er(e.authToken)}}throw await tr("Create Installation",c)}(e,t);return gr(e.appConfig,n)}catch(n){throw Qi(n)&&409===n.customData.serverCode?await mr(e.appConfig):await gr(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:wr(e)}:{installationEntry:t}}(e,i);return t=r.registrationPromise,r.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function wr(e){let t=await br(e.appConfig);for(;1===t.registrationStatus;)await rr(100),t=await br(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await yr(e);return n||t}return t}function br(e){return vr(e,(e=>{if(!e)throw Ki.create("installation-not-found");return Ir(e)}))}function Ir(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Er({appConfig:e,heartbeatServiceProvider:t},n){const i=function(e,{fid:t}){return`${Zi(e)}/${t}/authTokens:generate`}(e,n),r=function(e,{refreshToken:t}){const n=nr(e);return n.append("Authorization",function(e){return`${Ji} ${e}`}(t)),n}(e,n),o=t.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const a={installation:{sdkVersion:Yi,appId:e.appId}},s={method:"POST",headers:r,body:JSON.stringify(a)},c=await ir((()=>fetch(i,s)));if(c.ok)return er(await c.json());throw await tr("Generate Auth Token",c)}async function Sr(e,t=!1){let n;const i=await vr(e.appConfig,(i=>{if(!kr(i))throw Ki.create("not-registered");const r=i.authToken;if(!t&&(2===(o=r).requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(o)))return i;var o;if(1===r.requestStatus)return n=async function(e,t){let n=await Cr(e.appConfig);for(;1===n.authToken.requestStatus;)await rr(100),n=await Cr(e.appConfig);const i=n.authToken;return 0===i.requestStatus?Sr(e,t):i}(e,t),i;{if(!navigator.onLine)throw Ki.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(i);return n=async function(e,t){try{const n=await Er(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await gr(e.appConfig,i),n}catch(n){if(!Qi(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await gr(e.appConfig,n)}else await mr(e.appConfig);throw n}}(e,t),t}}));return n?await n:i.authToken}function Cr(e){return vr(e,(e=>{if(!kr(e))throw Ki.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t}))}function kr(e){return void 0!==e&&2===e.registrationStatus}function Tr(e){return Ki.create("missing-app-config-values",{valueName:e})}const Pr="installations";Li(new kn(Pr,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Tr("App Configuration");if(!e.name)throw Tr("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Tr(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Ni(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),Li(new kn("installations-internal",(e=>{const t=Ni(e.getProvider("app").getImmediate(),Pr).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:i}=await yr(t);return i?i.catch(console.error):Sr(t).catch(console.error),n.fid}(t),getToken:e=>async function(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await yr(e);t&&await t}(n),(await Sr(n,t)).token}(t,e)}}),"PRIVATE")),Fi(Xi,qi),Fi(Xi,qi,"esm2017");const Ar="analytics",_r="https://www.googletagmanager.com/gtag/js",Dr=new Bn("@firebase/analytics"),xr=new wn("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Lr(e){if(!e.startsWith(_r)){const t=xr.create("invalid-gtag-resource",{gtagURL:e});return Dr.warn(t.message),""}return e}function Nr(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}const Or=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Br(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Mr(e,t=Or,n){const{appId:i,apiKey:r,measurementId:o}=e.options;if(!i)throw xr.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:i};throw xr.create("no-api-key")}const a=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new jr;return setTimeout((async()=>{s.abort()}),void 0!==n?n:6e4),Fr({appId:i,apiKey:r,measurementId:o},a,s,t)}async function Fr(e,{throttleEndTimeMillis:t,backoffCount:n},i,r=Or){var o;const{appId:a,measurementId:s}=e;try{await function(e,t){return new Promise(((n,i)=>{const r=Math.max(t-Date.now(),0),o=setTimeout(n,r);e.addEventListener((()=>{clearTimeout(o),i(xr.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(i,t)}catch(e){if(s)return Dr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:a,measurementId:s};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:i}=e,r={method:"GET",headers:Br(i)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(o,r);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw xr.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return r.deleteThrottleMetadata(a),t}catch(t){const c=t;if(!function(e){if(!(e instanceof yn&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(c)){if(r.deleteThrottleMetadata(a),s)return Dr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:a,measurementId:s};throw t}const l=503===Number(null===(o=null==c?void 0:c.customData)||void 0===o?void 0:o.httpStatus)?Sn(n,r.intervalMillis,30):Sn(n,r.intervalMillis),u={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return r.setThrottleMetadata(a,u),Dr.debug(`Calling attemptFetch again in ${l} millis`),Fr(e,u,i,r)}}class jr{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Rr,zr;async function $r(e,t,n,i,r,o,a){var s;const c=Mr(e);c.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Dr.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>Dr.error(e))),t.push(c);const l=async function(){if(!mn())return Dr.warn(xr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await vn()}catch(e){return Dr.warn(xr.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?i.getId():void 0)),[u,d]=await Promise.all([c,l]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(_r)&&n.src.includes(e))return n;return null})(o)||function(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy("firebase-js-sdk-policy",t)),n}(0,{createScriptURL:Lr}),i=document.createElement("script"),r=`${_r}?l=${e}&id=${t}`;i.src=n?null==n?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}(o,u.measurementId),zr&&(r("consent","default",zr),zr=void 0),r("js",new Date);const h=null!==(s=null==a?void 0:a.config)&&void 0!==s?s:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),r("config",u.measurementId,h),Rr&&(r("set",Rr),Rr=void 0),u.measurementId}class Wr{constructor(e){this.app=e}_delete(){return delete Hr[this.app.options.appId],Promise.resolve()}}let Hr={},Gr=[];const Ur={};let Vr,Xr,qr="dataLayer",Yr=!1;function Jr(e,t,n){!function(){const e=[];if(function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=xr.create("invalid-analytics-context",{errorInfo:t});Dr.warn(n.message)}}();const i=e.options.appId;if(!i)throw xr.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw xr.create("no-api-key");Dr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Hr[i])throw xr.create("already-exists",{id:i});if(!Yr){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(qr);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,i,r){let o=function(...e){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(o=window[r]),window[r]=function(e,t,n,i){return async function(r,...o){try{if("event"===r){const[i,r]=o;await async function(e,t,n,i,r){try{let o=[];if(r&&r.send_to){let e=r.send_to;Array.isArray(e)||(e=[e]);const i=await Nr(n);for(const n of e){const e=i.find((e=>e.measurementId===n)),r=e&&t[e.appId];if(!r){o=[];break}o.push(r)}}0===o.length&&(o=Object.values(t)),await Promise.all(o),e("event",i,r||{})}catch(e){Dr.error(e)}}(e,t,n,i,r)}else if("config"===r){const[r,a]=o;await async function(e,t,n,i,r,o){const a=i[r];try{if(a)await t[a];else{const e=(await Nr(n)).find((e=>e.measurementId===r));e&&await t[e.appId]}}catch(e){Dr.error(e)}e("config",r,o)}(e,t,n,i,r,a)}else if("consent"===r){const[t]=o;e("consent","update",t)}else if("get"===r){const[t,n,i]=o;e("get",t,n,i)}else if("set"===r){const[t]=o;e("set",t)}else e(r,...o)}catch(e){Dr.error(e)}}}(o,e,t,n),{gtagCore:o,wrappedGtag:window[r]}}(Hr,Gr,Ur,qr,"gtag");Xr=e,Vr=t,Yr=!0}return Hr[i]=$r(e,Gr,Ur,t,Vr,qr,n),new Wr(e)}function Kr(e,t,n,i){e=Cn(e),async function(e,t,n,i,r){if(r&&r.global)e("event",n,i);else{const r=await t;e("event",n,Object.assign(Object.assign({},i),{send_to:r}))}}(Xr,Hr[e.app.options.appId],t,n,i).catch((e=>Dr.error(e)))}const Qr="@firebase/analytics",Zr="0.10.1";Li(new kn(Ar,((e,{options:t})=>Jr(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),Li(new kn("analytics-internal",(function(e){try{const t=e.getProvider(Ar).getImmediate();return{logEvent:(e,n,i)=>Kr(t,e,n,i)}}catch(e){throw xr.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),Fi(Qr,Zr),Fi(Qr,Zr,"esm2017");const eo={apiKey:"AIzaSyB8c2lBVi26u7YRL9sxOP97Uaq3yN8hTl4",authDomain:"ftm-b9d99.firebaseapp.com",databaseURL:"https://ftm-b9d99.firebaseio.com",projectId:"ftm-b9d99",storageBucket:"ftm-b9d99.appspot.com",messagingSenderId:"602402387941",appId:"1:602402387941:web:3bdd502b0e7ce6789de10c",measurementId:"G-XNE7Y2439V"};class to{constructor(){try{this.firebaseApp=Mi(eo),this.firebaseAnalytics=function(e=function(e=Pi){const t=_i.get(e);if(!t&&e===Pi&&pn())return Mi();if(!t)throw Oi.create("no-app",{appName:e});return t}()){const t=Ni(e=Cn(e),Ar);return t.isInitialized()?t.getImmediate():function(e,t={}){const n=Ni(e,Ar);if(n.isInitialized()){const e=n.getImmediate();if(In(t,n.getOptions()))return e;throw xr.create("already-initialized")}return n.initialize({options:t})}(e)}(this.firebaseApp)}catch(e){console.error("Error while initializing Firebase:",e)}}static getInstance(){return to.instance||(to.instance=new to),to.instance}logEventWithPayload(e,t){try{console.log(`Sending custom event ${e} with data:`,t),Kr(this.firebaseAnalytics,e,t)}catch(e){console.error("Error while logging custom event:",e)}}logSessionStartWithPayload(e){try{console.log("Logging session start with data:",e),Kr(this.firebaseAnalytics,"session_start",e)}catch(e){console.error("Error while logging session start:",e)}}logDownloadProgressWithPayload(e,t){try{console.log("Logging download progress for ",e," with data:",t),Kr(this.firebaseAnalytics,e,t)}catch(e){console.error("Error while logging download progress:",e)}}}const no=new URLSearchParams(window.location.search);var io=no.get("cr_user_id")||"unknown";no.get("source"),no.get("campaign_id");let ro,oo="v0.3.7",ao=document.getElementById("loadingScreen"),so=!1,co=!1,lo=!1,uo=!1,ho=to.getInstance();function fo(e,t){let n=(new Date).getTime()-ro.getTime();ho.logDownloadProgressWithPayload(e,{app:"CRWebPlayer",version:oo,book_name:t,cr_user_id:io,ms_since_session_start:n})}const po=window.location.search;let go=new URLSearchParams(po).get("book");null==go&&(go="LetsFlyLevel2En"),console.log("Book Name: "+go);let mo=new class{constructor(e,t,i,r){console.log("Curious Reader App "+oo+" initializing!"),this.bookName=e,this.contentFilePath=t,this.imagesPath=i,this.audioPath=r,ro=new Date,this.contentParser=new n(t),this.playBackEngine=new Jt(i,r),this.broadcastChannel=new BroadcastChannel("cr-message-channel")}async initialize(){try{const e=await this.contentParser.parseBook();e.bookName=this.bookName,console.log("App initialized with book:",e),this.enforceLandscapeMode(),await this.registerServiceWorker(e),this.playBackEngine.initializeBook(e),console.log("Initialization completed successfully!")}catch(e){console.error("Initialization error:",e)}}enforceLandscapeMode(){window.Android&&"function"==typeof window.Android.setContainerAppOrientation&&window.Android.setContainerAppOrientation("landscape")}async registerServiceWorker(e){if("serviceWorker"in navigator)try{let t=new cn("/sw.js",{});await t.register(),await navigator.serviceWorker.ready,null==localStorage.getItem(e.bookName)?(ao.style.display="flex",this.broadcastChannel.postMessage({command:"Cache",data:{lang:this.lang,bookData:e,contentFile:this.contentFilePath}})):ao.style.display="none",this.broadcastChannel.onmessage=t=>{console.log(t.data.command),"Activated"==t.data.command&&this.broadcastChannel.postMessage({command:"Cache",data:{lang:this.lang,bookData:e,contentFile:this.contentFilePath}}),"CachingProgress"==t.data.command?function(e,t){let n=document.getElementById("progressBar");t<100&&(n.style.width=t+"%"),t>=25&&!so&&(so=!0,fo("download_25",e.data.data.bookName)),t>=50&&!co&&(co=!0,fo("download_50",e.data.data.bookName)),t>=75&&!lo&&(lo=!0,fo("download_75",e.data.data.bookName)),t>=100&&(ao.style.display="none",uo||(uo=!0,fo("download_completed",e.data.data.bookName)),localStorage.setItem(e.data.data.bookName,"true"),function(e){if(window.Android){let t=null!==localStorage.getItem(e);window.Android.cachedStatus(t)}}(e.data.data.bookName))}(t,parseInt(t.data.data.progress)):"UpdateFound"==t.data.command&&function(){let e="Update Found.\nPlease accept the update by pressing Ok.";1==confirm(e)?window.location.reload():e="Update will happen on the next launch."}()}}catch(e){console.log("Error Registering Service Worker",e)}}}(go,`/BookContent/${go}/content/content.json`,`/BookContent/${go}/content/images/`,`/BookContent/${go}/content/audios/`);mo.initialize()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eEMsRUFBTWdCLEtBQUtBLEtBQUt2UCxXQUd0RWloRCxHQUFpQixLQUFPdkIsS0FDMUJBLElBQTBCLEVBQzFCRyxHQUF5QyxjQUFldHhDLEVBQU1nQixLQUFLQSxLQUFLdlAsV0FHdEVpaEQsR0FBaUIsTUFDbkIxQixHQUFldjFDLE1BQU1HLFFBQVUsT0FDMUJ3MUMsS0FDSEEsSUFBMkIsRUFDM0JFLEdBQXlDLHFCQUFzQnR4QyxFQUFNZ0IsS0FBS0EsS0FBS3ZQLFdBR2pGNGdELGFBQWFPLFFBQVE1eUMsRUFBTWdCLEtBQUtBLEtBQUt2UCxTQUFVLFFBcUJuRCxTQUFzREEsR0FFcEQsR0FBSWYsT0FBT3VoRCxRQUFTLENBQ2xCLElBQUlZLEVBQThELE9BQW5DUixhQUFhQyxRQUFRN2dELEdBRXBEZixPQUFPdWhELFFBQVFhLGFBQWFELEVBQzlCLENBQ0YsQ0EzQklFLENBQTZDL3lDLEVBQU1nQixLQUFLQSxLQUFLdlAsVUFFakUsQ0FoRFl1aEQsQ0FBcUJoekMsRUFERHluQixTQUFTem5CLEVBQU1nQixLQUFLQSxLQUFLaXlDLFdBRWQsZUFBdEJqekMsRUFBTWdCLEtBQUtpdEMsU0EwRWhDLFdBQ0UsSUFBSWx2QixFQUFPLDBEQUNVLEdBQWpCbTBCLFFBQVFuMEIsR0FDVnJ1QixPQUFPdTRCLFNBQVNrcUIsU0FFaEJwMEIsRUFBTyx3Q0FFWCxDQWhGWXEwQixFQUNGLENBRUosQ0FBRSxNQUFPcmhELEdBQ1BULFFBQVFDLElBQUksbUNBQW9DUSxFQUNsRCxDQUVKLEdBd0ZBTixHQUNBLGdCQUFnQkEsMEJBQ2hCLGdCQUFnQkEscUJBQ2hCLGdCQUFnQkEsc0JBR2xCbXNDLEdBQUlsSSIsInNvdXJjZXMiOlsid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vLi9zcmMvTW9kZWxzL0Jvb2sudHMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL1BhcnNlci9Db250ZW50UGFyc2VyLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9Ac3BsaWRlanMvc3BsaWRlL2Rpc3QvanMvc3BsaWRlLmVzbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvUGxheUJhY2tFbmdpbmUvUGxheUJhY2tFbmdpbmUudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dvcmtib3gtd2luZG93L2J1aWxkL3dvcmtib3gtd2luZG93LnByb2QuZXM1Lm1qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvY29tcG9uZW50L2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9sb2dnZXIvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvaWRiL2J1aWxkL3dyYXAtaWRiLXZhbHVlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hcHAvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvYXBwL2Rpc3QvZXNtL2luZGV4LmVzbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2luc3RhbGxhdGlvbnMvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2FuYWx5dGljcy9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovLy8uL3NyYy9BbmFseXRpY3MvRmlyZWJhc2UvY29uZmlnLnRzIiwid2VicGFjazovLy8uL3NyYy9BbmFseXRpY3MvRmlyZWJhc2UvRmlyZWJhc2VNYW5hZ2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZ2xvYmFsLXByb3BlcnRpZXMudHMiLCJ3ZWJwYWNrOi8vLy4vQXBwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBQYWdlIHR5cGUgdGhhdCBkZVxyXG5cclxuaW1wb3J0IHsgUGFnZSB9IGZyb20gXCIuL1BhZ2VcIjtcclxuXHJcbmV4cG9ydCBlbnVtIEJvb2tUeXBlIHtcclxuICAgIEN1cmlvdXNSZWFkZXIgPSBcIkN1cmlvdXNSZWFkZXJcIixcclxuICAgIEdETCA9IFwiR0RMXCIsXHJcbiAgICBVbmtub3duID0gXCJVbmtub3duXCIsXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEJvb2sgPSB7XHJcbiAgICBib29rTmFtZTogc3RyaW5nO1xyXG4gICAgcGFnZXM6IFBhZ2VbXTtcclxuICAgIGJvb2tUeXBlOiBCb29rVHlwZTtcclxufSIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiaW1wb3J0IHtcclxuICAgIEJvb2ssXHJcbiAgICBCb29rVHlwZSxcclxuICAgIFBhZ2UsXHJcbiAgICBUZXh0RWxlbWVudCxcclxuICAgIEltYWdlRWxlbWVudCxcclxuICAgIEF1ZGlvRWxlbWVudCxcclxuICAgIEF1ZGlvVGltZXN0YW1wcyxcclxuICAgIFdvcmRUaW1lc3RhbXBFbGVtZW50LFxyXG59IGZyb20gXCIuLi9Nb2RlbHMvTW9kZWxzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29udGVudFBhcnNlciB7XHJcbiAgICBpbWFnZXNQYXRoOiBzdHJpbmc7XHJcbiAgICBhdWRpb1BhdGg6IHN0cmluZztcclxuICAgIGNvbnRlbnRGaWxlUGF0aDogc3RyaW5nO1xyXG5cclxuICAgIGNvbnRlbnRKU09OOiBhbnk7XHJcblxyXG4gICAgZW1wdHlHbG93SW1hZ2VUYWc6IHN0cmluZyA9IFwiZW1wdHlfZ2xvd19pbWFnZVwiO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRlbnRGaWxlUGF0aDogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RmlsZVBhdGggPSBjb250ZW50RmlsZVBhdGg7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcGFyc2VCb29rKCk6IFByb21pc2U8Qm9vaz4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGFyc2VDb250ZW50SlNPTkZpbGUoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKGNvbnRlbnRKU09OKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50SlNPTiA9IGNvbnRlbnRKU09OO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29udGVudCBKU09OIGZpbGUgcGFyc2VkIVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmNvbnRlbnRKU09OKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJvb2s6IEJvb2sgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvb2tOYW1lOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlczogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvb2tUeXBlOiB0aGlzLmRldGVybWluZUJvb2tUeXBlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYm9vay5wYWdlcyA9IHRoaXMucGFyc2VQYWdlcyhib29rKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShib29rKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRldGVybWluZUJvb2tUeXBlKCk6IEJvb2tUeXBlIHtcclxuICAgICAgICBpZiAodGhpcy5jb250ZW50SlNPTltcInByZXNlbnRhdGlvblwiXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBCb29rVHlwZS5DdXJpb3VzUmVhZGVyO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb250ZW50SlNPTltcImNoYXB0ZXJzXCJdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEJvb2tUeXBlLkdETDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gQm9va1R5cGUuVW5rbm93bjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VQYWdlcyhib29rOiBCb29rKTogUGFnZVtdIHtcclxuICAgICAgICBsZXQgcGFnZXM6IFBhZ2VbXSA9IFtdO1xyXG5cclxuICAgICAgICBpZiAoYm9vay5ib29rVHlwZSA9PT0gQm9va1R5cGUuQ3VyaW91c1JlYWRlcikge1xyXG4gICAgICAgICAgICBsZXQgcGFnZXNKU09OID0gdGhpcy5jb250ZW50SlNPTltcInByZXNlbnRhdGlvblwiXVtcInNsaWRlc1wiXTtcclxuICAgICAgICAgICAgbGV0IGdsb2JhbEZpbGxDb2xvciA9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRKU09OW1wicHJlc2VudGF0aW9uXCJdW1wiZ2xvYmFsQmFja2dyb3VuZFNlbGVjdG9yXCJdW1xyXG4gICAgICAgICAgICAgICAgXCJmaWxsR2xvYmFsQmFja2dyb3VuZFwiXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZ2VzSlNPTi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhZ2VKU09OID0gcGFnZXNKU09OW2ldO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhZ2U6IFBhZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudHM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogZ2xvYmFsRmlsbENvbG9yLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHBhZ2UudmlzdWFsRWxlbWVudHMgPSB0aGlzLnBhcnNlUGFnZUNSKHBhZ2VKU09OKTtcclxuICAgICAgICAgICAgICAgIHBhZ2VzLnB1c2gocGFnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGJvb2suYm9va1R5cGUgPT09IEJvb2tUeXBlLkdETCkge1xyXG4gICAgICAgICAgICBsZXQgcGFnZXNKU09OID0gdGhpcy5jb250ZW50SlNPTltcImNoYXB0ZXJzXCJdO1xyXG4gICAgICAgICAgICBsZXQgZ2xvYmFsRmlsbENvbG9yID0gXCIjRkNGQ0YyXCI7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFnZXNKU09OLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFnZUpTT04gPSBwYWdlc0pTT05baV07XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFnZTogUGFnZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50czogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBnbG9iYWxGaWxsQ29sb3IsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcGFnZS52aXN1YWxFbGVtZW50cyA9IHRoaXMucGFyc2VQYWdlR0RMKHBhZ2VKU09OKTtcclxuICAgICAgICAgICAgICAgIHBhZ2VzLnB1c2gocGFnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVua25vd24gYm9vayB0eXBlIVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBwYWdlcztcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZVBhZ2VDUihwYWdlSlNPTjogYW55KTogYW55W10ge1xyXG4gICAgICAgIGxldCB2aXN1YWxFbGVtZW50czogYW55W10gPSBbXTtcclxuICAgICAgICBsZXQgZWxlbWVudHNKU09OID0gcGFnZUpTT05bXCJlbGVtZW50c1wiXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzSlNPTi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgbGlicmFyeVN0cmluZzogc3RyaW5nID0gZWxlbWVudHNKU09OW2ldW1wiYWN0aW9uXCJdW1wibGlicmFyeVwiXTtcclxuICAgICAgICAgICAgaWYgKGxpYnJhcnlTdHJpbmcuaW5jbHVkZXMoXCJBZHZhbmNlZFRleHRcIikpIHtcclxuICAgICAgICAgICAgICAgIGxldCB0ZXh0RWxlbWVudDogVGV4dEVsZW1lbnQgPSB0aGlzLnBhcnNlVGV4dEVsZW1lbnRDUihlbGVtZW50c0pTT05baV0pO1xyXG4gICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudHMucHVzaCh0ZXh0RWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGlicmFyeVN0cmluZy5pbmNsdWRlcyhcIkltYWdlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW1hZ2VFbGVtZW50OiBJbWFnZUVsZW1lbnQgPSB0aGlzLnBhcnNlSW1hZ2VFbGVtZW50Q1IoXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNKU09OW2ldXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudHMucHVzaChpbWFnZUVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpYnJhcnlTdHJpbmcuaW5jbHVkZXMoXCJBdWRpb1wiKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGF1ZGlvRWxlbWVudDogQXVkaW9FbGVtZW50ID0gdGhpcy5wYXJzZUF1ZGlvRWxlbWVudENSKFxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzSlNPTltpXVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnRzLnB1c2goYXVkaW9FbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZpc3VhbEVsZW1lbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlUGFnZUdETChwYWdlSlNPTjogYW55KTogYW55W10ge1xyXG4gICAgICAgIGxldCB2aXN1YWxFbGVtZW50czogYW55W10gPSBbXTtcclxuICAgICAgICBsZXQgZWxlbWVudHNKU09OQXJyYXkgPSBwYWdlSlNPTltcInBhcmFtc1wiXVtcImNvbnRlbnRcIl07XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudHNKU09OQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGxpYnJhcnlTdHJpbmc6IHN0cmluZyA9IGVsZW1lbnRzSlNPTkFycmF5W2ldW1wiY29udGVudFwiXVtcImxpYnJhcnlcIl07XHJcbiAgICAgICAgICAgIGlmIChsaWJyYXJ5U3RyaW5nLmluY2x1ZGVzKFwiQWR2YW5jZWRUZXh0XCIpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGV4dEVsZW1lbnQ6IFRleHRFbGVtZW50ID0gdGhpcy5wYXJzZVRleHRFbGVtZW50R0RMKFxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzSlNPTkFycmF5W2ldW1wiY29udGVudFwiXVtcInBhcmFtc1wiXVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnRzLnB1c2godGV4dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpYnJhcnlTdHJpbmcuaW5jbHVkZXMoXCJJbWFnZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGltYWdlRWxlbWVudDogSW1hZ2VFbGVtZW50ID0gdGhpcy5wYXJzZUltYWdlRWxlbWVudEdETChcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50c0pTT05BcnJheVtpXVtcImNvbnRlbnRcIl1bXCJwYXJhbXNcIl1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50cy5wdXNoKGltYWdlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB2aXN1YWxFbGVtZW50cztcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZVRleHRFbGVtZW50Q1IoZWxlbWVudEpTT046IGFueSk6IFRleHRFbGVtZW50IHtcclxuICAgICAgICBsZXQgdGV4dEVsZW1lbnQ6IFRleHRFbGVtZW50ID0ge1xyXG4gICAgICAgICAgICB0eXBlOiBcInRleHRcIixcclxuICAgICAgICAgICAgcG9zaXRpb25YOiBlbGVtZW50SlNPTltcInhcIl0sXHJcbiAgICAgICAgICAgIHBvc2l0aW9uWTogZWxlbWVudEpTT05bXCJ5XCJdLFxyXG4gICAgICAgICAgICB3aWR0aDogZWxlbWVudEpTT05bXCJ3aWR0aFwiXSxcclxuICAgICAgICAgICAgaGVpZ2h0OiBlbGVtZW50SlNPTltcImhlaWdodFwiXSxcclxuICAgICAgICAgICAgdGV4dENvbnRlbnRBc0hUTUw6IGVsZW1lbnRKU09OW1wiYWN0aW9uXCJdW1wicGFyYW1zXCJdW1widGV4dFwiXSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gdGV4dEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VUZXh0RWxlbWVudEdETChlbGVtZW50SlNPTjogYW55KTogVGV4dEVsZW1lbnQge1xyXG4gICAgICAgIGxldCB0ZXh0RWxlbWVudDogVGV4dEVsZW1lbnQgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICBwb3NpdGlvblg6IE5hTixcclxuICAgICAgICAgICAgcG9zaXRpb25ZOiBOYU4sXHJcbiAgICAgICAgICAgIHdpZHRoOiBOYU4sXHJcbiAgICAgICAgICAgIGhlaWdodDogTmFOLFxyXG4gICAgICAgICAgICB0ZXh0Q29udGVudEFzSFRNTDogZWxlbWVudEpTT05bXCJ0ZXh0XCJdLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRleHRFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlSW1hZ2VFbGVtZW50Q1IoZWxlbWVudEpTT046IGFueSk6IEltYWdlRWxlbWVudCB7XHJcbiAgICAgICAgbGV0IHBhdGg6IHN0cmluZyA9IFwiXCI7XHJcbiAgICAgICAgaWYgKGVsZW1lbnRKU09OW1wiYWN0aW9uXCJdW1wicGFyYW1zXCJdW1wiZmlsZVwiXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHBhdGggPSB0aGlzLmVtcHR5R2xvd0ltYWdlVGFnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBhdGggPSBlbGVtZW50SlNPTltcImFjdGlvblwiXVtcInBhcmFtc1wiXVtcImZpbGVcIl1bXCJwYXRoXCJdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgaW1hZ2VFbGVtZW50OiBJbWFnZUVsZW1lbnQgPSB7XHJcbiAgICAgICAgICAgIGRvbUlEOiBwYXRoID09PSB0aGlzLmVtcHR5R2xvd0ltYWdlVGFnXHJcbiAgICAgICAgICAgICAgICAgICAgPyBlbGVtZW50SlNPTltcImlkXCJdXHJcbiAgICAgICAgICAgICAgICAgICAgOiBlbGVtZW50SlNPTltcImFjdGlvblwiXVtcInN1YkNvbnRlbnRJZFwiXSxcclxuICAgICAgICAgICAgdHlwZTogXCJpbWFnZVwiLFxyXG4gICAgICAgICAgICBwb3NpdGlvblg6IGVsZW1lbnRKU09OW1wieFwiXSxcclxuICAgICAgICAgICAgcG9zaXRpb25ZOiBlbGVtZW50SlNPTltcInlcIl0sXHJcbiAgICAgICAgICAgIHdpZHRoOiBlbGVtZW50SlNPTltcIndpZHRoXCJdLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGVsZW1lbnRKU09OW1wiaGVpZ2h0XCJdLFxyXG4gICAgICAgICAgICBpbWFnZVNvdXJjZTogcGF0aCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gaW1hZ2VFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlSW1hZ2VFbGVtZW50R0RMKGVsZW1lbnRKU09OOiBhbnkpOiBJbWFnZUVsZW1lbnQge1xyXG4gICAgICAgIGxldCBpbWFnZUVsZW1lbnQ6IEltYWdlRWxlbWVudCA9IHtcclxuICAgICAgICAgICAgZG9tSUQ6IFwiXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiaW1hZ2VcIixcclxuICAgICAgICAgICAgcG9zaXRpb25YOiBOYU4sXHJcbiAgICAgICAgICAgIHBvc2l0aW9uWTogTmFOLFxyXG4gICAgICAgICAgICB3aWR0aDogZWxlbWVudEpTT05bXCJ3aWR0aFwiXSxcclxuICAgICAgICAgICAgaGVpZ2h0OiBlbGVtZW50SlNPTltcImhlaWdodFwiXSxcclxuICAgICAgICAgICAgaW1hZ2VTb3VyY2U6IGVsZW1lbnRKU09OW1wiZmlsZVwiXVtcInBhdGhcIl0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gaW1hZ2VFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlQXVkaW9FbGVtZW50Q1IoZWxlbWVudEpTT046IGFueSk6IEF1ZGlvRWxlbWVudCB7XHJcbiAgICAgICAgbGV0IGF1ZGlvVGltZXN0YW1wczogQXVkaW9UaW1lc3RhbXBzID0ge1xyXG4gICAgICAgICAgICB0aW1lc3RhbXBzOiBbXSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGxldCB0aW1lc3RhbXBzSlNPTkFycmF5ID1cclxuICAgICAgICAgICAgZWxlbWVudEpTT05bXCJhY3Rpb25cIl1bXCJwYXJhbXNcIl1bXCJ0aW1lU3RhbXBGb3JFYWNoVGV4dFwiXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRpbWVzdGFtcHNKU09OQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHRpbWVzdGFtcEluZGV4ID0gaTtcclxuICAgICAgICAgICAgbGV0IHRpbWVzdGFtcEpTT04gPSB0aW1lc3RhbXBzSlNPTkFycmF5W2ldO1xyXG4gICAgICAgICAgICBsZXQgdGltZXN0YW1wOiBXb3JkVGltZXN0YW1wRWxlbWVudCA9IHtcclxuICAgICAgICAgICAgICAgIGRvbUlEOlxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRKU09OW1wiYWN0aW9uXCJdW1wic3ViQ29udGVudElkXCJdICtcclxuICAgICAgICAgICAgICAgICAgICBcIl9cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wSW5kZXgudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHdvcmQ6IHRpbWVzdGFtcEpTT05bXCJ0ZXh0XCJdLnJlcGxhY2UoLyYjMDM5Oy9nLCBcIidcIiksXHJcbiAgICAgICAgICAgICAgICBzdGFydFRpbWVzdGFtcDogdGltZXN0YW1wSlNPTltcInN0YXJ0RHVyYXRpb25cIl0sXHJcbiAgICAgICAgICAgICAgICBlbmRUaW1lc3RhbXA6IHRpbWVzdGFtcEpTT05bXCJlbmREdXJhdGlvblwiXSxcclxuICAgICAgICAgICAgICAgIGF1ZGlvU3JjOiB0aW1lc3RhbXBKU09OW1wid29yZGZpbGVcIl1bMF1bXCJwYXRoXCJdLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBhdWRpb1RpbWVzdGFtcHMudGltZXN0YW1wcy5wdXNoKHRpbWVzdGFtcCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhdWRpb0VsZW1lbnQ6IEF1ZGlvRWxlbWVudCA9IHtcclxuICAgICAgICAgICAgZG9tSUQ6IGVsZW1lbnRKU09OW1wiYWN0aW9uXCJdW1wic3ViQ29udGVudElkXCJdLFxyXG4gICAgICAgICAgICB0eXBlOiBcImF1ZGlvXCIsXHJcbiAgICAgICAgICAgIHBvc2l0aW9uWDogZWxlbWVudEpTT05bXCJ4XCJdLFxyXG4gICAgICAgICAgICBwb3NpdGlvblk6IGVsZW1lbnRKU09OW1wieVwiXSxcclxuICAgICAgICAgICAgd2lkdGg6IGVsZW1lbnRKU09OW1wid2lkdGhcIl0sXHJcbiAgICAgICAgICAgIGhlaWdodDogZWxlbWVudEpTT05bXCJoZWlnaHRcIl0sXHJcbiAgICAgICAgICAgIGdsb3dDb2xvcjogZWxlbWVudEpTT05bXCJhY3Rpb25cIl1bXCJwYXJhbXNcIl1bXCJnbG93Q29sb3JcIl0sXHJcbiAgICAgICAgICAgIGF1ZGlvU3JjOiBlbGVtZW50SlNPTltcImFjdGlvblwiXVtcInBhcmFtc1wiXVtcImZpbGVzXCJdWzBdW1wicGF0aFwiXSxcclxuICAgICAgICAgICAgYXVkaW9UaW1lc3RhbXBzOiBhdWRpb1RpbWVzdGFtcHMsXHJcbiAgICAgICAgICAgIHN0eWxlczogXCJcIixcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gYXVkaW9FbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHBhcnNlQ29udGVudEpTT05GaWxlKCk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB4aHIub3BlbihcIkdFVFwiLCB0aGlzLmNvbnRlbnRGaWxlUGF0aCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSBcImpzb25cIjtcclxuICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdGF0dXMgPSB4aHIuc3RhdHVzO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0geGhyLnJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSByZXNwb25zZVtcImwxMG5cIl07XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJlc3BvbnNlW1wib3ZlcnJpZGVcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCh4aHIucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIuc2VuZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuLyohXG4gKiBTcGxpZGUuanNcbiAqIFZlcnNpb24gIDogNC4xLjRcbiAqIExpY2Vuc2UgIDogTUlUXG4gKiBDb3B5cmlnaHQ6IDIwMjIgTmFvdG9zaGkgRnVqaXRhXG4gKi9cbnZhciBNRURJQV9QUkVGRVJTX1JFRFVDRURfTU9USU9OID0gXCIocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjogcmVkdWNlKVwiO1xudmFyIENSRUFURUQgPSAxO1xudmFyIE1PVU5URUQgPSAyO1xudmFyIElETEUgPSAzO1xudmFyIE1PVklORyA9IDQ7XG52YXIgU0NST0xMSU5HID0gNTtcbnZhciBEUkFHR0lORyA9IDY7XG52YXIgREVTVFJPWUVEID0gNztcbnZhciBTVEFURVMgPSB7XG4gIENSRUFURUQ6IENSRUFURUQsXG4gIE1PVU5URUQ6IE1PVU5URUQsXG4gIElETEU6IElETEUsXG4gIE1PVklORzogTU9WSU5HLFxuICBTQ1JPTExJTkc6IFNDUk9MTElORyxcbiAgRFJBR0dJTkc6IERSQUdHSU5HLFxuICBERVNUUk9ZRUQ6IERFU1RST1lFRFxufTtcblxuZnVuY3Rpb24gZW1wdHkoYXJyYXkpIHtcbiAgYXJyYXkubGVuZ3RoID0gMDtcbn1cblxuZnVuY3Rpb24gc2xpY2UoYXJyYXlMaWtlLCBzdGFydCwgZW5kKSB7XG4gIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcnJheUxpa2UsIHN0YXJ0LCBlbmQpO1xufVxuXG5mdW5jdGlvbiBhcHBseShmdW5jKSB7XG4gIHJldHVybiBmdW5jLmJpbmQuYXBwbHkoZnVuYywgW251bGxdLmNvbmNhdChzbGljZShhcmd1bWVudHMsIDEpKSk7XG59XG5cbnZhciBuZXh0VGljayA9IHNldFRpbWVvdXQ7XG5cbnZhciBub29wID0gZnVuY3Rpb24gbm9vcCgpIHt9O1xuXG5mdW5jdGlvbiByYWYoZnVuYykge1xuICByZXR1cm4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmMpO1xufVxuXG5mdW5jdGlvbiB0eXBlT2YodHlwZSwgc3ViamVjdCkge1xuICByZXR1cm4gdHlwZW9mIHN1YmplY3QgPT09IHR5cGU7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KHN1YmplY3QpIHtcbiAgcmV0dXJuICFpc051bGwoc3ViamVjdCkgJiYgdHlwZU9mKFwib2JqZWN0XCIsIHN1YmplY3QpO1xufVxuXG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG52YXIgaXNGdW5jdGlvbiA9IGFwcGx5KHR5cGVPZiwgXCJmdW5jdGlvblwiKTtcbnZhciBpc1N0cmluZyA9IGFwcGx5KHR5cGVPZiwgXCJzdHJpbmdcIik7XG52YXIgaXNVbmRlZmluZWQgPSBhcHBseSh0eXBlT2YsIFwidW5kZWZpbmVkXCIpO1xuXG5mdW5jdGlvbiBpc051bGwoc3ViamVjdCkge1xuICByZXR1cm4gc3ViamVjdCA9PT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNIVE1MRWxlbWVudChzdWJqZWN0KSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHN1YmplY3QgaW5zdGFuY2VvZiAoc3ViamVjdC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3IHx8IHdpbmRvdykuSFRNTEVsZW1lbnQ7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gdG9BcnJheSh2YWx1ZSkge1xuICByZXR1cm4gaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV07XG59XG5cbmZ1bmN0aW9uIGZvckVhY2godmFsdWVzLCBpdGVyYXRlZSkge1xuICB0b0FycmF5KHZhbHVlcykuZm9yRWFjaChpdGVyYXRlZSk7XG59XG5cbmZ1bmN0aW9uIGluY2x1ZGVzKGFycmF5LCB2YWx1ZSkge1xuICByZXR1cm4gYXJyYXkuaW5kZXhPZih2YWx1ZSkgPiAtMTtcbn1cblxuZnVuY3Rpb24gcHVzaChhcnJheSwgaXRlbXMpIHtcbiAgYXJyYXkucHVzaC5hcHBseShhcnJheSwgdG9BcnJheShpdGVtcykpO1xuICByZXR1cm4gYXJyYXk7XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZUNsYXNzKGVsbSwgY2xhc3NlcywgYWRkKSB7XG4gIGlmIChlbG0pIHtcbiAgICBmb3JFYWNoKGNsYXNzZXMsIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICBpZiAobmFtZSkge1xuICAgICAgICBlbG0uY2xhc3NMaXN0W2FkZCA/IFwiYWRkXCIgOiBcInJlbW92ZVwiXShuYW1lKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhZGRDbGFzcyhlbG0sIGNsYXNzZXMpIHtcbiAgdG9nZ2xlQ2xhc3MoZWxtLCBpc1N0cmluZyhjbGFzc2VzKSA/IGNsYXNzZXMuc3BsaXQoXCIgXCIpIDogY2xhc3NlcywgdHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIGFwcGVuZChwYXJlbnQsIGNoaWxkcmVuKSB7XG4gIGZvckVhY2goY2hpbGRyZW4sIHBhcmVudC5hcHBlbmRDaGlsZC5iaW5kKHBhcmVudCkpO1xufVxuXG5mdW5jdGlvbiBiZWZvcmUobm9kZXMsIHJlZikge1xuICBmb3JFYWNoKG5vZGVzLCBmdW5jdGlvbiAobm9kZSkge1xuICAgIHZhciBwYXJlbnQgPSAocmVmIHx8IG5vZGUpLnBhcmVudE5vZGU7XG5cbiAgICBpZiAocGFyZW50KSB7XG4gICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKG5vZGUsIHJlZik7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hlcyhlbG0sIHNlbGVjdG9yKSB7XG4gIHJldHVybiBpc0hUTUxFbGVtZW50KGVsbSkgJiYgKGVsbVtcIm1zTWF0Y2hlc1NlbGVjdG9yXCJdIHx8IGVsbS5tYXRjaGVzKS5jYWxsKGVsbSwgc2VsZWN0b3IpO1xufVxuXG5mdW5jdGlvbiBjaGlsZHJlbihwYXJlbnQsIHNlbGVjdG9yKSB7XG4gIHZhciBjaGlsZHJlbjIgPSBwYXJlbnQgPyBzbGljZShwYXJlbnQuY2hpbGRyZW4pIDogW107XG4gIHJldHVybiBzZWxlY3RvciA/IGNoaWxkcmVuMi5maWx0ZXIoZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgcmV0dXJuIG1hdGNoZXMoY2hpbGQsIHNlbGVjdG9yKTtcbiAgfSkgOiBjaGlsZHJlbjI7XG59XG5cbmZ1bmN0aW9uIGNoaWxkKHBhcmVudCwgc2VsZWN0b3IpIHtcbiAgcmV0dXJuIHNlbGVjdG9yID8gY2hpbGRyZW4ocGFyZW50LCBzZWxlY3RvcilbMF0gOiBwYXJlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG59XG5cbnZhciBvd25LZXlzID0gT2JqZWN0LmtleXM7XG5cbmZ1bmN0aW9uIGZvck93bihvYmplY3QsIGl0ZXJhdGVlLCByaWdodCkge1xuICBpZiAob2JqZWN0KSB7XG4gICAgKHJpZ2h0ID8gb3duS2V5cyhvYmplY3QpLnJldmVyc2UoKSA6IG93bktleXMob2JqZWN0KSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBrZXkgIT09IFwiX19wcm90b19fXCIgJiYgaXRlcmF0ZWUob2JqZWN0W2tleV0sIGtleSk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gb2JqZWN0O1xufVxuXG5mdW5jdGlvbiBhc3NpZ24ob2JqZWN0KSB7XG4gIHNsaWNlKGFyZ3VtZW50cywgMSkuZm9yRWFjaChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgZm9yT3duKHNvdXJjZSwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgIG9iamVjdFtrZXldID0gc291cmNlW2tleV07XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gb2JqZWN0O1xufVxuXG5mdW5jdGlvbiBtZXJnZShvYmplY3QpIHtcbiAgc2xpY2UoYXJndW1lbnRzLCAxKS5mb3JFYWNoKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICBmb3JPd24oc291cmNlLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIG9iamVjdFtrZXldID0gdmFsdWUuc2xpY2UoKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIG9iamVjdFtrZXldID0gbWVyZ2Uoe30sIGlzT2JqZWN0KG9iamVjdFtrZXldKSA/IG9iamVjdFtrZXldIDoge30sIHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9iamVjdFtrZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gb2JqZWN0O1xufVxuXG5mdW5jdGlvbiBvbWl0KG9iamVjdCwga2V5cykge1xuICBmb3JFYWNoKGtleXMgfHwgb3duS2V5cyhvYmplY3QpLCBmdW5jdGlvbiAoa2V5KSB7XG4gICAgZGVsZXRlIG9iamVjdFtrZXldO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQXR0cmlidXRlKGVsbXMsIGF0dHJzKSB7XG4gIGZvckVhY2goZWxtcywgZnVuY3Rpb24gKGVsbSkge1xuICAgIGZvckVhY2goYXR0cnMsIGZ1bmN0aW9uIChhdHRyKSB7XG4gICAgICBlbG0gJiYgZWxtLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHNldEF0dHJpYnV0ZShlbG1zLCBhdHRycywgdmFsdWUpIHtcbiAgaWYgKGlzT2JqZWN0KGF0dHJzKSkge1xuICAgIGZvck93bihhdHRycywgZnVuY3Rpb24gKHZhbHVlMiwgbmFtZSkge1xuICAgICAgc2V0QXR0cmlidXRlKGVsbXMsIG5hbWUsIHZhbHVlMik7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgZm9yRWFjaChlbG1zLCBmdW5jdGlvbiAoZWxtKSB7XG4gICAgICBpc051bGwodmFsdWUpIHx8IHZhbHVlID09PSBcIlwiID8gcmVtb3ZlQXR0cmlidXRlKGVsbSwgYXR0cnMpIDogZWxtLnNldEF0dHJpYnV0ZShhdHRycywgU3RyaW5nKHZhbHVlKSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlKHRhZywgYXR0cnMsIHBhcmVudCkge1xuICB2YXIgZWxtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuXG4gIGlmIChhdHRycykge1xuICAgIGlzU3RyaW5nKGF0dHJzKSA/IGFkZENsYXNzKGVsbSwgYXR0cnMpIDogc2V0QXR0cmlidXRlKGVsbSwgYXR0cnMpO1xuICB9XG5cbiAgcGFyZW50ICYmIGFwcGVuZChwYXJlbnQsIGVsbSk7XG4gIHJldHVybiBlbG07XG59XG5cbmZ1bmN0aW9uIHN0eWxlKGVsbSwgcHJvcCwgdmFsdWUpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgIHJldHVybiBnZXRDb21wdXRlZFN0eWxlKGVsbSlbcHJvcF07XG4gIH1cblxuICBpZiAoIWlzTnVsbCh2YWx1ZSkpIHtcbiAgICBlbG0uc3R5bGVbcHJvcF0gPSBcIlwiICsgdmFsdWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGlzcGxheShlbG0sIGRpc3BsYXkyKSB7XG4gIHN0eWxlKGVsbSwgXCJkaXNwbGF5XCIsIGRpc3BsYXkyKTtcbn1cblxuZnVuY3Rpb24gZm9jdXMoZWxtKSB7XG4gIGVsbVtcInNldEFjdGl2ZVwiXSAmJiBlbG1bXCJzZXRBY3RpdmVcIl0oKSB8fCBlbG0uZm9jdXMoe1xuICAgIHByZXZlbnRTY3JvbGw6IHRydWVcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldEF0dHJpYnV0ZShlbG0sIGF0dHIpIHtcbiAgcmV0dXJuIGVsbS5nZXRBdHRyaWJ1dGUoYXR0cik7XG59XG5cbmZ1bmN0aW9uIGhhc0NsYXNzKGVsbSwgY2xhc3NOYW1lKSB7XG4gIHJldHVybiBlbG0gJiYgZWxtLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpO1xufVxuXG5mdW5jdGlvbiByZWN0KHRhcmdldCkge1xuICByZXR1cm4gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xufVxuXG5mdW5jdGlvbiByZW1vdmUobm9kZXMpIHtcbiAgZm9yRWFjaChub2RlcywgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICBpZiAobm9kZSAmJiBub2RlLnBhcmVudE5vZGUpIHtcbiAgICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBwYXJzZUh0bWwoaHRtbCkge1xuICByZXR1cm4gY2hpbGQobmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhodG1sLCBcInRleHQvaHRtbFwiKS5ib2R5KTtcbn1cblxuZnVuY3Rpb24gcHJldmVudChlLCBzdG9wUHJvcGFnYXRpb24pIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGlmIChzdG9wUHJvcGFnYXRpb24pIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcXVlcnkocGFyZW50LCBzZWxlY3Rvcikge1xuICByZXR1cm4gcGFyZW50ICYmIHBhcmVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbn1cblxuZnVuY3Rpb24gcXVlcnlBbGwocGFyZW50LCBzZWxlY3Rvcikge1xuICByZXR1cm4gc2VsZWN0b3IgPyBzbGljZShwYXJlbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpIDogW107XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsbSwgY2xhc3Nlcykge1xuICB0b2dnbGVDbGFzcyhlbG0sIGNsYXNzZXMsIGZhbHNlKTtcbn1cblxuZnVuY3Rpb24gdGltZU9mKGUpIHtcbiAgcmV0dXJuIGUudGltZVN0YW1wO1xufVxuXG5mdW5jdGlvbiB1bml0KHZhbHVlKSB7XG4gIHJldHVybiBpc1N0cmluZyh2YWx1ZSkgPyB2YWx1ZSA6IHZhbHVlID8gdmFsdWUgKyBcInB4XCIgOiBcIlwiO1xufVxuXG52YXIgUFJPSkVDVF9DT0RFID0gXCJzcGxpZGVcIjtcbnZhciBEQVRBX0FUVFJJQlVURSA9IFwiZGF0YS1cIiArIFBST0pFQ1RfQ09ERTtcblxuZnVuY3Rpb24gYXNzZXJ0KGNvbmRpdGlvbiwgbWVzc2FnZSkge1xuICBpZiAoIWNvbmRpdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIltcIiArIFBST0pFQ1RfQ09ERSArIFwiXSBcIiArIChtZXNzYWdlIHx8IFwiXCIpKTtcbiAgfVxufVxuXG52YXIgbWluID0gTWF0aC5taW4sXG4gICAgbWF4ID0gTWF0aC5tYXgsXG4gICAgZmxvb3IgPSBNYXRoLmZsb29yLFxuICAgIGNlaWwgPSBNYXRoLmNlaWwsXG4gICAgYWJzID0gTWF0aC5hYnM7XG5cbmZ1bmN0aW9uIGFwcHJveGltYXRlbHlFcXVhbCh4LCB5LCBlcHNpbG9uKSB7XG4gIHJldHVybiBhYnMoeCAtIHkpIDwgZXBzaWxvbjtcbn1cblxuZnVuY3Rpb24gYmV0d2VlbihudW1iZXIsIHgsIHksIGV4Y2x1c2l2ZSkge1xuICB2YXIgbWluaW11bSA9IG1pbih4LCB5KTtcbiAgdmFyIG1heGltdW0gPSBtYXgoeCwgeSk7XG4gIHJldHVybiBleGNsdXNpdmUgPyBtaW5pbXVtIDwgbnVtYmVyICYmIG51bWJlciA8IG1heGltdW0gOiBtaW5pbXVtIDw9IG51bWJlciAmJiBudW1iZXIgPD0gbWF4aW11bTtcbn1cblxuZnVuY3Rpb24gY2xhbXAobnVtYmVyLCB4LCB5KSB7XG4gIHZhciBtaW5pbXVtID0gbWluKHgsIHkpO1xuICB2YXIgbWF4aW11bSA9IG1heCh4LCB5KTtcbiAgcmV0dXJuIG1pbihtYXgobWluaW11bSwgbnVtYmVyKSwgbWF4aW11bSk7XG59XG5cbmZ1bmN0aW9uIHNpZ24oeCkge1xuICByZXR1cm4gKyh4ID4gMCkgLSArKHggPCAwKTtcbn1cblxuZnVuY3Rpb24gY2FtZWxUb0tlYmFiKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyhbYS16MC05XSkoW0EtWl0pL2csIFwiJDEtJDJcIikudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0KHN0cmluZywgcmVwbGFjZW1lbnRzKSB7XG4gIGZvckVhY2gocmVwbGFjZW1lbnRzLCBmdW5jdGlvbiAocmVwbGFjZW1lbnQpIHtcbiAgICBzdHJpbmcgPSBzdHJpbmcucmVwbGFjZShcIiVzXCIsIFwiXCIgKyByZXBsYWNlbWVudCk7XG4gIH0pO1xuICByZXR1cm4gc3RyaW5nO1xufVxuXG5mdW5jdGlvbiBwYWQobnVtYmVyKSB7XG4gIHJldHVybiBudW1iZXIgPCAxMCA/IFwiMFwiICsgbnVtYmVyIDogXCJcIiArIG51bWJlcjtcbn1cblxudmFyIGlkcyA9IHt9O1xuXG5mdW5jdGlvbiB1bmlxdWVJZChwcmVmaXgpIHtcbiAgcmV0dXJuIFwiXCIgKyBwcmVmaXggKyBwYWQoaWRzW3ByZWZpeF0gPSAoaWRzW3ByZWZpeF0gfHwgMCkgKyAxKTtcbn1cblxuZnVuY3Rpb24gRXZlbnRCaW5kZXIoKSB7XG4gIHZhciBsaXN0ZW5lcnMgPSBbXTtcblxuICBmdW5jdGlvbiBiaW5kKHRhcmdldHMsIGV2ZW50cywgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICBmb3JFYWNoRXZlbnQodGFyZ2V0cywgZXZlbnRzLCBmdW5jdGlvbiAodGFyZ2V0LCBldmVudCwgbmFtZXNwYWNlKSB7XG4gICAgICB2YXIgaXNFdmVudFRhcmdldCA9IChcImFkZEV2ZW50TGlzdGVuZXJcIiBpbiB0YXJnZXQpO1xuICAgICAgdmFyIHJlbW92ZXIgPSBpc0V2ZW50VGFyZ2V0ID8gdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIuYmluZCh0YXJnZXQsIGV2ZW50LCBjYWxsYmFjaywgb3B0aW9ucykgOiB0YXJnZXRbXCJyZW1vdmVMaXN0ZW5lclwiXS5iaW5kKHRhcmdldCwgY2FsbGJhY2spO1xuICAgICAgaXNFdmVudFRhcmdldCA/IHRhcmdldC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBjYWxsYmFjaywgb3B0aW9ucykgOiB0YXJnZXRbXCJhZGRMaXN0ZW5lclwiXShjYWxsYmFjayk7XG4gICAgICBsaXN0ZW5lcnMucHVzaChbdGFyZ2V0LCBldmVudCwgbmFtZXNwYWNlLCBjYWxsYmFjaywgcmVtb3Zlcl0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gdW5iaW5kKHRhcmdldHMsIGV2ZW50cywgY2FsbGJhY2spIHtcbiAgICBmb3JFYWNoRXZlbnQodGFyZ2V0cywgZXZlbnRzLCBmdW5jdGlvbiAodGFyZ2V0LCBldmVudCwgbmFtZXNwYWNlKSB7XG4gICAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuZmlsdGVyKGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgICBpZiAobGlzdGVuZXJbMF0gPT09IHRhcmdldCAmJiBsaXN0ZW5lclsxXSA9PT0gZXZlbnQgJiYgbGlzdGVuZXJbMl0gPT09IG5hbWVzcGFjZSAmJiAoIWNhbGxiYWNrIHx8IGxpc3RlbmVyWzNdID09PSBjYWxsYmFjaykpIHtcbiAgICAgICAgICBsaXN0ZW5lcls0XSgpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBkaXNwYXRjaCh0YXJnZXQsIHR5cGUsIGRldGFpbCkge1xuICAgIHZhciBlO1xuICAgIHZhciBidWJibGVzID0gdHJ1ZTtcblxuICAgIGlmICh0eXBlb2YgQ3VzdG9tRXZlbnQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgZSA9IG5ldyBDdXN0b21FdmVudCh0eXBlLCB7XG4gICAgICAgIGJ1YmJsZXM6IGJ1YmJsZXMsXG4gICAgICAgIGRldGFpbDogZGV0YWlsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiQ3VzdG9tRXZlbnRcIik7XG4gICAgICBlLmluaXRDdXN0b21FdmVudCh0eXBlLCBidWJibGVzLCBmYWxzZSwgZGV0YWlsKTtcbiAgICB9XG5cbiAgICB0YXJnZXQuZGlzcGF0Y2hFdmVudChlKTtcbiAgICByZXR1cm4gZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZvckVhY2hFdmVudCh0YXJnZXRzLCBldmVudHMsIGl0ZXJhdGVlKSB7XG4gICAgZm9yRWFjaCh0YXJnZXRzLCBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICB0YXJnZXQgJiYgZm9yRWFjaChldmVudHMsIGZ1bmN0aW9uIChldmVudHMyKSB7XG4gICAgICAgIGV2ZW50czIuc3BsaXQoXCIgXCIpLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50TlMpIHtcbiAgICAgICAgICB2YXIgZnJhZ21lbnQgPSBldmVudE5TLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgICBpdGVyYXRlZSh0YXJnZXQsIGZyYWdtZW50WzBdLCBmcmFnbWVudFsxXSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgIGxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBkYXRhWzRdKCk7XG4gICAgfSk7XG4gICAgZW1wdHkobGlzdGVuZXJzKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYmluZDogYmluZCxcbiAgICB1bmJpbmQ6IHVuYmluZCxcbiAgICBkaXNwYXRjaDogZGlzcGF0Y2gsXG4gICAgZGVzdHJveTogZGVzdHJveVxuICB9O1xufVxuXG52YXIgRVZFTlRfTU9VTlRFRCA9IFwibW91bnRlZFwiO1xudmFyIEVWRU5UX1JFQURZID0gXCJyZWFkeVwiO1xudmFyIEVWRU5UX01PVkUgPSBcIm1vdmVcIjtcbnZhciBFVkVOVF9NT1ZFRCA9IFwibW92ZWRcIjtcbnZhciBFVkVOVF9DTElDSyA9IFwiY2xpY2tcIjtcbnZhciBFVkVOVF9BQ1RJVkUgPSBcImFjdGl2ZVwiO1xudmFyIEVWRU5UX0lOQUNUSVZFID0gXCJpbmFjdGl2ZVwiO1xudmFyIEVWRU5UX1ZJU0lCTEUgPSBcInZpc2libGVcIjtcbnZhciBFVkVOVF9ISURERU4gPSBcImhpZGRlblwiO1xudmFyIEVWRU5UX1JFRlJFU0ggPSBcInJlZnJlc2hcIjtcbnZhciBFVkVOVF9VUERBVEVEID0gXCJ1cGRhdGVkXCI7XG52YXIgRVZFTlRfUkVTSVpFID0gXCJyZXNpemVcIjtcbnZhciBFVkVOVF9SRVNJWkVEID0gXCJyZXNpemVkXCI7XG52YXIgRVZFTlRfRFJBRyA9IFwiZHJhZ1wiO1xudmFyIEVWRU5UX0RSQUdHSU5HID0gXCJkcmFnZ2luZ1wiO1xudmFyIEVWRU5UX0RSQUdHRUQgPSBcImRyYWdnZWRcIjtcbnZhciBFVkVOVF9TQ1JPTEwgPSBcInNjcm9sbFwiO1xudmFyIEVWRU5UX1NDUk9MTEVEID0gXCJzY3JvbGxlZFwiO1xudmFyIEVWRU5UX09WRVJGTE9XID0gXCJvdmVyZmxvd1wiO1xudmFyIEVWRU5UX0RFU1RST1kgPSBcImRlc3Ryb3lcIjtcbnZhciBFVkVOVF9BUlJPV1NfTU9VTlRFRCA9IFwiYXJyb3dzOm1vdW50ZWRcIjtcbnZhciBFVkVOVF9BUlJPV1NfVVBEQVRFRCA9IFwiYXJyb3dzOnVwZGF0ZWRcIjtcbnZhciBFVkVOVF9QQUdJTkFUSU9OX01PVU5URUQgPSBcInBhZ2luYXRpb246bW91bnRlZFwiO1xudmFyIEVWRU5UX1BBR0lOQVRJT05fVVBEQVRFRCA9IFwicGFnaW5hdGlvbjp1cGRhdGVkXCI7XG52YXIgRVZFTlRfTkFWSUdBVElPTl9NT1VOVEVEID0gXCJuYXZpZ2F0aW9uOm1vdW50ZWRcIjtcbnZhciBFVkVOVF9BVVRPUExBWV9QTEFZID0gXCJhdXRvcGxheTpwbGF5XCI7XG52YXIgRVZFTlRfQVVUT1BMQVlfUExBWUlORyA9IFwiYXV0b3BsYXk6cGxheWluZ1wiO1xudmFyIEVWRU5UX0FVVE9QTEFZX1BBVVNFID0gXCJhdXRvcGxheTpwYXVzZVwiO1xudmFyIEVWRU5UX0xBWllMT0FEX0xPQURFRCA9IFwibGF6eWxvYWQ6bG9hZGVkXCI7XG52YXIgRVZFTlRfU0xJREVfS0VZRE9XTiA9IFwic2tcIjtcbnZhciBFVkVOVF9TSElGVEVEID0gXCJzaFwiO1xudmFyIEVWRU5UX0VORF9JTkRFWF9DSEFOR0VEID0gXCJlaVwiO1xuXG5mdW5jdGlvbiBFdmVudEludGVyZmFjZShTcGxpZGUyKSB7XG4gIHZhciBidXMgPSBTcGxpZGUyID8gU3BsaWRlMi5ldmVudC5idXMgOiBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIHZhciBiaW5kZXIgPSBFdmVudEJpbmRlcigpO1xuXG4gIGZ1bmN0aW9uIG9uKGV2ZW50cywgY2FsbGJhY2spIHtcbiAgICBiaW5kZXIuYmluZChidXMsIHRvQXJyYXkoZXZlbnRzKS5qb2luKFwiIFwiKSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGNhbGxiYWNrLmFwcGx5KGNhbGxiYWNrLCBpc0FycmF5KGUuZGV0YWlsKSA/IGUuZGV0YWlsIDogW10pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZW1pdChldmVudCkge1xuICAgIGJpbmRlci5kaXNwYXRjaChidXMsIGV2ZW50LCBzbGljZShhcmd1bWVudHMsIDEpKTtcbiAgfVxuXG4gIGlmIChTcGxpZGUyKSB7XG4gICAgU3BsaWRlMi5ldmVudC5vbihFVkVOVF9ERVNUUk9ZLCBiaW5kZXIuZGVzdHJveSk7XG4gIH1cblxuICByZXR1cm4gYXNzaWduKGJpbmRlciwge1xuICAgIGJ1czogYnVzLFxuICAgIG9uOiBvbixcbiAgICBvZmY6IGFwcGx5KGJpbmRlci51bmJpbmQsIGJ1cyksXG4gICAgZW1pdDogZW1pdFxuICB9KTtcbn1cblxuZnVuY3Rpb24gUmVxdWVzdEludGVydmFsKGludGVydmFsLCBvbkludGVydmFsLCBvblVwZGF0ZSwgbGltaXQpIHtcbiAgdmFyIG5vdyA9IERhdGUubm93O1xuICB2YXIgc3RhcnRUaW1lO1xuICB2YXIgcmF0ZSA9IDA7XG4gIHZhciBpZDtcbiAgdmFyIHBhdXNlZCA9IHRydWU7XG4gIHZhciBjb3VudCA9IDA7XG5cbiAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgIGlmICghcGF1c2VkKSB7XG4gICAgICByYXRlID0gaW50ZXJ2YWwgPyBtaW4oKG5vdygpIC0gc3RhcnRUaW1lKSAvIGludGVydmFsLCAxKSA6IDE7XG4gICAgICBvblVwZGF0ZSAmJiBvblVwZGF0ZShyYXRlKTtcblxuICAgICAgaWYgKHJhdGUgPj0gMSkge1xuICAgICAgICBvbkludGVydmFsKCk7XG4gICAgICAgIHN0YXJ0VGltZSA9IG5vdygpO1xuXG4gICAgICAgIGlmIChsaW1pdCAmJiArK2NvdW50ID49IGxpbWl0KSB7XG4gICAgICAgICAgcmV0dXJuIHBhdXNlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWQgPSByYWYodXBkYXRlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydChyZXN1bWUpIHtcbiAgICByZXN1bWUgfHwgY2FuY2VsKCk7XG4gICAgc3RhcnRUaW1lID0gbm93KCkgLSAocmVzdW1lID8gcmF0ZSAqIGludGVydmFsIDogMCk7XG4gICAgcGF1c2VkID0gZmFsc2U7XG4gICAgaWQgPSByYWYodXBkYXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdXNlKCkge1xuICAgIHBhdXNlZCA9IHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiByZXdpbmQoKSB7XG4gICAgc3RhcnRUaW1lID0gbm93KCk7XG4gICAgcmF0ZSA9IDA7XG5cbiAgICBpZiAob25VcGRhdGUpIHtcbiAgICAgIG9uVXBkYXRlKHJhdGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICBpZCAmJiBjYW5jZWxBbmltYXRpb25GcmFtZShpZCk7XG4gICAgcmF0ZSA9IDA7XG4gICAgaWQgPSAwO1xuICAgIHBhdXNlZCA9IHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiBzZXQodGltZSkge1xuICAgIGludGVydmFsID0gdGltZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzUGF1c2VkKCkge1xuICAgIHJldHVybiBwYXVzZWQ7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHN0YXJ0OiBzdGFydCxcbiAgICByZXdpbmQ6IHJld2luZCxcbiAgICBwYXVzZTogcGF1c2UsXG4gICAgY2FuY2VsOiBjYW5jZWwsXG4gICAgc2V0OiBzZXQsXG4gICAgaXNQYXVzZWQ6IGlzUGF1c2VkXG4gIH07XG59XG5cbmZ1bmN0aW9uIFN0YXRlKGluaXRpYWxTdGF0ZSkge1xuICB2YXIgc3RhdGUgPSBpbml0aWFsU3RhdGU7XG5cbiAgZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG4gICAgc3RhdGUgPSB2YWx1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzKHN0YXRlcykge1xuICAgIHJldHVybiBpbmNsdWRlcyh0b0FycmF5KHN0YXRlcyksIHN0YXRlKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc2V0OiBzZXQsXG4gICAgaXM6IGlzXG4gIH07XG59XG5cbmZ1bmN0aW9uIFRocm90dGxlKGZ1bmMsIGR1cmF0aW9uKSB7XG4gIHZhciBpbnRlcnZhbCA9IFJlcXVlc3RJbnRlcnZhbChkdXJhdGlvbiB8fCAwLCBmdW5jLCBudWxsLCAxKTtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpbnRlcnZhbC5pc1BhdXNlZCgpICYmIGludGVydmFsLnN0YXJ0KCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIE1lZGlhKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBzdGF0ZSA9IFNwbGlkZTIuc3RhdGU7XG4gIHZhciBicmVha3BvaW50cyA9IG9wdGlvbnMuYnJlYWtwb2ludHMgfHwge307XG4gIHZhciByZWR1Y2VkTW90aW9uID0gb3B0aW9ucy5yZWR1Y2VkTW90aW9uIHx8IHt9O1xuICB2YXIgYmluZGVyID0gRXZlbnRCaW5kZXIoKTtcbiAgdmFyIHF1ZXJpZXMgPSBbXTtcblxuICBmdW5jdGlvbiBzZXR1cCgpIHtcbiAgICB2YXIgaXNNaW4gPSBvcHRpb25zLm1lZGlhUXVlcnkgPT09IFwibWluXCI7XG4gICAgb3duS2V5cyhicmVha3BvaW50cykuc29ydChmdW5jdGlvbiAobiwgbSkge1xuICAgICAgcmV0dXJuIGlzTWluID8gK24gLSArbSA6ICttIC0gK247XG4gICAgfSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICByZWdpc3RlcihicmVha3BvaW50c1trZXldLCBcIihcIiArIChpc01pbiA/IFwibWluXCIgOiBcIm1heFwiKSArIFwiLXdpZHRoOlwiICsga2V5ICsgXCJweClcIik7XG4gICAgfSk7XG4gICAgcmVnaXN0ZXIocmVkdWNlZE1vdGlvbiwgTUVESUFfUFJFRkVSU19SRURVQ0VEX01PVElPTik7XG4gICAgdXBkYXRlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBkZXN0cm95KGNvbXBsZXRlbHkpIHtcbiAgICBpZiAoY29tcGxldGVseSkge1xuICAgICAgYmluZGVyLmRlc3Ryb3koKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWdpc3RlcihvcHRpb25zMiwgcXVlcnkpIHtcbiAgICB2YXIgcXVlcnlMaXN0ID0gbWF0Y2hNZWRpYShxdWVyeSk7XG4gICAgYmluZGVyLmJpbmQocXVlcnlMaXN0LCBcImNoYW5nZVwiLCB1cGRhdGUpO1xuICAgIHF1ZXJpZXMucHVzaChbb3B0aW9uczIsIHF1ZXJ5TGlzdF0pO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgIHZhciBkZXN0cm95ZWQgPSBzdGF0ZS5pcyhERVNUUk9ZRUQpO1xuICAgIHZhciBkaXJlY3Rpb24gPSBvcHRpb25zLmRpcmVjdGlvbjtcbiAgICB2YXIgbWVyZ2VkID0gcXVlcmllcy5yZWR1Y2UoZnVuY3Rpb24gKG1lcmdlZDIsIGVudHJ5KSB7XG4gICAgICByZXR1cm4gbWVyZ2UobWVyZ2VkMiwgZW50cnlbMV0ubWF0Y2hlcyA/IGVudHJ5WzBdIDoge30pO1xuICAgIH0sIHt9KTtcbiAgICBvbWl0KG9wdGlvbnMpO1xuICAgIHNldChtZXJnZWQpO1xuXG4gICAgaWYgKG9wdGlvbnMuZGVzdHJveSkge1xuICAgICAgU3BsaWRlMi5kZXN0cm95KG9wdGlvbnMuZGVzdHJveSA9PT0gXCJjb21wbGV0ZWx5XCIpO1xuICAgIH0gZWxzZSBpZiAoZGVzdHJveWVkKSB7XG4gICAgICBkZXN0cm95KHRydWUpO1xuICAgICAgU3BsaWRlMi5tb3VudCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaXJlY3Rpb24gIT09IG9wdGlvbnMuZGlyZWN0aW9uICYmIFNwbGlkZTIucmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlZHVjZShlbmFibGUpIHtcbiAgICBpZiAobWF0Y2hNZWRpYShNRURJQV9QUkVGRVJTX1JFRFVDRURfTU9USU9OKS5tYXRjaGVzKSB7XG4gICAgICBlbmFibGUgPyBtZXJnZShvcHRpb25zLCByZWR1Y2VkTW90aW9uKSA6IG9taXQob3B0aW9ucywgb3duS2V5cyhyZWR1Y2VkTW90aW9uKSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2V0KG9wdHMsIGJhc2UsIG5vdGlmeSkge1xuICAgIG1lcmdlKG9wdGlvbnMsIG9wdHMpO1xuICAgIGJhc2UgJiYgbWVyZ2UoT2JqZWN0LmdldFByb3RvdHlwZU9mKG9wdGlvbnMpLCBvcHRzKTtcblxuICAgIGlmIChub3RpZnkgfHwgIXN0YXRlLmlzKENSRUFURUQpKSB7XG4gICAgICBTcGxpZGUyLmVtaXQoRVZFTlRfVVBEQVRFRCwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzZXR1cDogc2V0dXAsXG4gICAgZGVzdHJveTogZGVzdHJveSxcbiAgICByZWR1Y2U6IHJlZHVjZSxcbiAgICBzZXQ6IHNldFxuICB9O1xufVxuXG52YXIgQVJST1cgPSBcIkFycm93XCI7XG52YXIgQVJST1dfTEVGVCA9IEFSUk9XICsgXCJMZWZ0XCI7XG52YXIgQVJST1dfUklHSFQgPSBBUlJPVyArIFwiUmlnaHRcIjtcbnZhciBBUlJPV19VUCA9IEFSUk9XICsgXCJVcFwiO1xudmFyIEFSUk9XX0RPV04gPSBBUlJPVyArIFwiRG93blwiO1xudmFyIExUUiA9IFwibHRyXCI7XG52YXIgUlRMID0gXCJydGxcIjtcbnZhciBUVEIgPSBcInR0YlwiO1xudmFyIE9SSUVOVEFUSU9OX01BUCA9IHtcbiAgd2lkdGg6IFtcImhlaWdodFwiXSxcbiAgbGVmdDogW1widG9wXCIsIFwicmlnaHRcIl0sXG4gIHJpZ2h0OiBbXCJib3R0b21cIiwgXCJsZWZ0XCJdLFxuICB4OiBbXCJ5XCJdLFxuICBYOiBbXCJZXCJdLFxuICBZOiBbXCJYXCJdLFxuICBBcnJvd0xlZnQ6IFtBUlJPV19VUCwgQVJST1dfUklHSFRdLFxuICBBcnJvd1JpZ2h0OiBbQVJST1dfRE9XTiwgQVJST1dfTEVGVF1cbn07XG5cbmZ1bmN0aW9uIERpcmVjdGlvbihTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICBmdW5jdGlvbiByZXNvbHZlKHByb3AsIGF4aXNPbmx5LCBkaXJlY3Rpb24pIHtcbiAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24gfHwgb3B0aW9ucy5kaXJlY3Rpb247XG4gICAgdmFyIGluZGV4ID0gZGlyZWN0aW9uID09PSBSVEwgJiYgIWF4aXNPbmx5ID8gMSA6IGRpcmVjdGlvbiA9PT0gVFRCID8gMCA6IC0xO1xuICAgIHJldHVybiBPUklFTlRBVElPTl9NQVBbcHJvcF0gJiYgT1JJRU5UQVRJT05fTUFQW3Byb3BdW2luZGV4XSB8fCBwcm9wLnJlcGxhY2UoL3dpZHRofGxlZnR8cmlnaHQvaSwgZnVuY3Rpb24gKG1hdGNoLCBvZmZzZXQpIHtcbiAgICAgIHZhciByZXBsYWNlbWVudCA9IE9SSUVOVEFUSU9OX01BUFttYXRjaC50b0xvd2VyQ2FzZSgpXVtpbmRleF0gfHwgbWF0Y2g7XG4gICAgICByZXR1cm4gb2Zmc2V0ID4gMCA/IHJlcGxhY2VtZW50LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcmVwbGFjZW1lbnQuc2xpY2UoMSkgOiByZXBsYWNlbWVudDtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9yaWVudCh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAqIChvcHRpb25zLmRpcmVjdGlvbiA9PT0gUlRMID8gMSA6IC0xKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcmVzb2x2ZTogcmVzb2x2ZSxcbiAgICBvcmllbnQ6IG9yaWVudFxuICB9O1xufVxuXG52YXIgUk9MRSA9IFwicm9sZVwiO1xudmFyIFRBQl9JTkRFWCA9IFwidGFiaW5kZXhcIjtcbnZhciBESVNBQkxFRCA9IFwiZGlzYWJsZWRcIjtcbnZhciBBUklBX1BSRUZJWCA9IFwiYXJpYS1cIjtcbnZhciBBUklBX0NPTlRST0xTID0gQVJJQV9QUkVGSVggKyBcImNvbnRyb2xzXCI7XG52YXIgQVJJQV9DVVJSRU5UID0gQVJJQV9QUkVGSVggKyBcImN1cnJlbnRcIjtcbnZhciBBUklBX1NFTEVDVEVEID0gQVJJQV9QUkVGSVggKyBcInNlbGVjdGVkXCI7XG52YXIgQVJJQV9MQUJFTCA9IEFSSUFfUFJFRklYICsgXCJsYWJlbFwiO1xudmFyIEFSSUFfTEFCRUxMRURCWSA9IEFSSUFfUFJFRklYICsgXCJsYWJlbGxlZGJ5XCI7XG52YXIgQVJJQV9ISURERU4gPSBBUklBX1BSRUZJWCArIFwiaGlkZGVuXCI7XG52YXIgQVJJQV9PUklFTlRBVElPTiA9IEFSSUFfUFJFRklYICsgXCJvcmllbnRhdGlvblwiO1xudmFyIEFSSUFfUk9MRURFU0NSSVBUSU9OID0gQVJJQV9QUkVGSVggKyBcInJvbGVkZXNjcmlwdGlvblwiO1xudmFyIEFSSUFfTElWRSA9IEFSSUFfUFJFRklYICsgXCJsaXZlXCI7XG52YXIgQVJJQV9CVVNZID0gQVJJQV9QUkVGSVggKyBcImJ1c3lcIjtcbnZhciBBUklBX0FUT01JQyA9IEFSSUFfUFJFRklYICsgXCJhdG9taWNcIjtcbnZhciBBTExfQVRUUklCVVRFUyA9IFtST0xFLCBUQUJfSU5ERVgsIERJU0FCTEVELCBBUklBX0NPTlRST0xTLCBBUklBX0NVUlJFTlQsIEFSSUFfTEFCRUwsIEFSSUFfTEFCRUxMRURCWSwgQVJJQV9ISURERU4sIEFSSUFfT1JJRU5UQVRJT04sIEFSSUFfUk9MRURFU0NSSVBUSU9OXTtcbnZhciBDTEFTU19QUkVGSVggPSBQUk9KRUNUX0NPREUgKyBcIl9fXCI7XG52YXIgU1RBVFVTX0NMQVNTX1BSRUZJWCA9IFwiaXMtXCI7XG52YXIgQ0xBU1NfUk9PVCA9IFBST0pFQ1RfQ09ERTtcbnZhciBDTEFTU19UUkFDSyA9IENMQVNTX1BSRUZJWCArIFwidHJhY2tcIjtcbnZhciBDTEFTU19MSVNUID0gQ0xBU1NfUFJFRklYICsgXCJsaXN0XCI7XG52YXIgQ0xBU1NfU0xJREUgPSBDTEFTU19QUkVGSVggKyBcInNsaWRlXCI7XG52YXIgQ0xBU1NfQ0xPTkUgPSBDTEFTU19TTElERSArIFwiLS1jbG9uZVwiO1xudmFyIENMQVNTX0NPTlRBSU5FUiA9IENMQVNTX1NMSURFICsgXCJfX2NvbnRhaW5lclwiO1xudmFyIENMQVNTX0FSUk9XUyA9IENMQVNTX1BSRUZJWCArIFwiYXJyb3dzXCI7XG52YXIgQ0xBU1NfQVJST1cgPSBDTEFTU19QUkVGSVggKyBcImFycm93XCI7XG52YXIgQ0xBU1NfQVJST1dfUFJFViA9IENMQVNTX0FSUk9XICsgXCItLXByZXZcIjtcbnZhciBDTEFTU19BUlJPV19ORVhUID0gQ0xBU1NfQVJST1cgKyBcIi0tbmV4dFwiO1xudmFyIENMQVNTX1BBR0lOQVRJT04gPSBDTEFTU19QUkVGSVggKyBcInBhZ2luYXRpb25cIjtcbnZhciBDTEFTU19QQUdJTkFUSU9OX1BBR0UgPSBDTEFTU19QQUdJTkFUSU9OICsgXCJfX3BhZ2VcIjtcbnZhciBDTEFTU19QUk9HUkVTUyA9IENMQVNTX1BSRUZJWCArIFwicHJvZ3Jlc3NcIjtcbnZhciBDTEFTU19QUk9HUkVTU19CQVIgPSBDTEFTU19QUk9HUkVTUyArIFwiX19iYXJcIjtcbnZhciBDTEFTU19UT0dHTEUgPSBDTEFTU19QUkVGSVggKyBcInRvZ2dsZVwiO1xudmFyIENMQVNTX1RPR0dMRV9QTEFZID0gQ0xBU1NfVE9HR0xFICsgXCJfX3BsYXlcIjtcbnZhciBDTEFTU19UT0dHTEVfUEFVU0UgPSBDTEFTU19UT0dHTEUgKyBcIl9fcGF1c2VcIjtcbnZhciBDTEFTU19TUElOTkVSID0gQ0xBU1NfUFJFRklYICsgXCJzcGlubmVyXCI7XG52YXIgQ0xBU1NfU1IgPSBDTEFTU19QUkVGSVggKyBcInNyXCI7XG52YXIgQ0xBU1NfSU5JVElBTElaRUQgPSBTVEFUVVNfQ0xBU1NfUFJFRklYICsgXCJpbml0aWFsaXplZFwiO1xudmFyIENMQVNTX0FDVElWRSA9IFNUQVRVU19DTEFTU19QUkVGSVggKyBcImFjdGl2ZVwiO1xudmFyIENMQVNTX1BSRVYgPSBTVEFUVVNfQ0xBU1NfUFJFRklYICsgXCJwcmV2XCI7XG52YXIgQ0xBU1NfTkVYVCA9IFNUQVRVU19DTEFTU19QUkVGSVggKyBcIm5leHRcIjtcbnZhciBDTEFTU19WSVNJQkxFID0gU1RBVFVTX0NMQVNTX1BSRUZJWCArIFwidmlzaWJsZVwiO1xudmFyIENMQVNTX0xPQURJTkcgPSBTVEFUVVNfQ0xBU1NfUFJFRklYICsgXCJsb2FkaW5nXCI7XG52YXIgQ0xBU1NfRk9DVVNfSU4gPSBTVEFUVVNfQ0xBU1NfUFJFRklYICsgXCJmb2N1cy1pblwiO1xudmFyIENMQVNTX09WRVJGTE9XID0gU1RBVFVTX0NMQVNTX1BSRUZJWCArIFwib3ZlcmZsb3dcIjtcbnZhciBTVEFUVVNfQ0xBU1NFUyA9IFtDTEFTU19BQ1RJVkUsIENMQVNTX1ZJU0lCTEUsIENMQVNTX1BSRVYsIENMQVNTX05FWFQsIENMQVNTX0xPQURJTkcsIENMQVNTX0ZPQ1VTX0lOLCBDTEFTU19PVkVSRkxPV107XG52YXIgQ0xBU1NFUyA9IHtcbiAgc2xpZGU6IENMQVNTX1NMSURFLFxuICBjbG9uZTogQ0xBU1NfQ0xPTkUsXG4gIGFycm93czogQ0xBU1NfQVJST1dTLFxuICBhcnJvdzogQ0xBU1NfQVJST1csXG4gIHByZXY6IENMQVNTX0FSUk9XX1BSRVYsXG4gIG5leHQ6IENMQVNTX0FSUk9XX05FWFQsXG4gIHBhZ2luYXRpb246IENMQVNTX1BBR0lOQVRJT04sXG4gIHBhZ2U6IENMQVNTX1BBR0lOQVRJT05fUEFHRSxcbiAgc3Bpbm5lcjogQ0xBU1NfU1BJTk5FUlxufTtcblxuZnVuY3Rpb24gY2xvc2VzdChmcm9tLCBzZWxlY3Rvcikge1xuICBpZiAoaXNGdW5jdGlvbihmcm9tLmNsb3Nlc3QpKSB7XG4gICAgcmV0dXJuIGZyb20uY2xvc2VzdChzZWxlY3Rvcik7XG4gIH1cblxuICB2YXIgZWxtID0gZnJvbTtcblxuICB3aGlsZSAoZWxtICYmIGVsbS5ub2RlVHlwZSA9PT0gMSkge1xuICAgIGlmIChtYXRjaGVzKGVsbSwgc2VsZWN0b3IpKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBlbG0gPSBlbG0ucGFyZW50RWxlbWVudDtcbiAgfVxuXG4gIHJldHVybiBlbG07XG59XG5cbnZhciBGUklDVElPTiA9IDU7XG52YXIgTE9HX0lOVEVSVkFMID0gMjAwO1xudmFyIFBPSU5URVJfRE9XTl9FVkVOVFMgPSBcInRvdWNoc3RhcnQgbW91c2Vkb3duXCI7XG52YXIgUE9JTlRFUl9NT1ZFX0VWRU5UUyA9IFwidG91Y2htb3ZlIG1vdXNlbW92ZVwiO1xudmFyIFBPSU5URVJfVVBfRVZFTlRTID0gXCJ0b3VjaGVuZCB0b3VjaGNhbmNlbCBtb3VzZXVwIGNsaWNrXCI7XG5cbmZ1bmN0aW9uIEVsZW1lbnRzKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBfRXZlbnRJbnRlcmZhY2UgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKSxcbiAgICAgIG9uID0gX0V2ZW50SW50ZXJmYWNlLm9uLFxuICAgICAgYmluZCA9IF9FdmVudEludGVyZmFjZS5iaW5kO1xuXG4gIHZhciByb290ID0gU3BsaWRlMi5yb290O1xuICB2YXIgaTE4biA9IG9wdGlvbnMuaTE4bjtcbiAgdmFyIGVsZW1lbnRzID0ge307XG4gIHZhciBzbGlkZXMgPSBbXTtcbiAgdmFyIHJvb3RDbGFzc2VzID0gW107XG4gIHZhciB0cmFja0NsYXNzZXMgPSBbXTtcbiAgdmFyIHRyYWNrO1xuICB2YXIgbGlzdDtcbiAgdmFyIGlzVXNpbmdLZXk7XG5cbiAgZnVuY3Rpb24gc2V0dXAoKSB7XG4gICAgY29sbGVjdCgpO1xuICAgIGluaXQoKTtcbiAgICB1cGRhdGUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIG9uKEVWRU5UX1JFRlJFU0gsIGRlc3Ryb3kpO1xuICAgIG9uKEVWRU5UX1JFRlJFU0gsIHNldHVwKTtcbiAgICBvbihFVkVOVF9VUERBVEVELCB1cGRhdGUpO1xuICAgIGJpbmQoZG9jdW1lbnQsIFBPSU5URVJfRE9XTl9FVkVOVFMgKyBcIiBrZXlkb3duXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpc1VzaW5nS2V5ID0gZS50eXBlID09PSBcImtleWRvd25cIjtcbiAgICB9LCB7XG4gICAgICBjYXB0dXJlOiB0cnVlXG4gICAgfSk7XG4gICAgYmluZChyb290LCBcImZvY3VzaW5cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdG9nZ2xlQ2xhc3Mocm9vdCwgQ0xBU1NfRk9DVVNfSU4sICEhaXNVc2luZ0tleSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZXN0cm95KGNvbXBsZXRlbHkpIHtcbiAgICB2YXIgYXR0cnMgPSBBTExfQVRUUklCVVRFUy5jb25jYXQoXCJzdHlsZVwiKTtcbiAgICBlbXB0eShzbGlkZXMpO1xuICAgIHJlbW92ZUNsYXNzKHJvb3QsIHJvb3RDbGFzc2VzKTtcbiAgICByZW1vdmVDbGFzcyh0cmFjaywgdHJhY2tDbGFzc2VzKTtcbiAgICByZW1vdmVBdHRyaWJ1dGUoW3RyYWNrLCBsaXN0XSwgYXR0cnMpO1xuICAgIHJlbW92ZUF0dHJpYnV0ZShyb290LCBjb21wbGV0ZWx5ID8gYXR0cnMgOiBbXCJzdHlsZVwiLCBBUklBX1JPTEVERVNDUklQVElPTl0pO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgIHJlbW92ZUNsYXNzKHJvb3QsIHJvb3RDbGFzc2VzKTtcbiAgICByZW1vdmVDbGFzcyh0cmFjaywgdHJhY2tDbGFzc2VzKTtcbiAgICByb290Q2xhc3NlcyA9IGdldENsYXNzZXMoQ0xBU1NfUk9PVCk7XG4gICAgdHJhY2tDbGFzc2VzID0gZ2V0Q2xhc3NlcyhDTEFTU19UUkFDSyk7XG4gICAgYWRkQ2xhc3Mocm9vdCwgcm9vdENsYXNzZXMpO1xuICAgIGFkZENsYXNzKHRyYWNrLCB0cmFja0NsYXNzZXMpO1xuICAgIHNldEF0dHJpYnV0ZShyb290LCBBUklBX0xBQkVMLCBvcHRpb25zLmxhYmVsKTtcbiAgICBzZXRBdHRyaWJ1dGUocm9vdCwgQVJJQV9MQUJFTExFREJZLCBvcHRpb25zLmxhYmVsbGVkYnkpO1xuICB9XG5cbiAgZnVuY3Rpb24gY29sbGVjdCgpIHtcbiAgICB0cmFjayA9IGZpbmQoXCIuXCIgKyBDTEFTU19UUkFDSyk7XG4gICAgbGlzdCA9IGNoaWxkKHRyYWNrLCBcIi5cIiArIENMQVNTX0xJU1QpO1xuICAgIGFzc2VydCh0cmFjayAmJiBsaXN0LCBcIkEgdHJhY2svbGlzdCBlbGVtZW50IGlzIG1pc3NpbmcuXCIpO1xuICAgIHB1c2goc2xpZGVzLCBjaGlsZHJlbihsaXN0LCBcIi5cIiArIENMQVNTX1NMSURFICsgXCI6bm90KC5cIiArIENMQVNTX0NMT05FICsgXCIpXCIpKTtcbiAgICBmb3JPd24oe1xuICAgICAgYXJyb3dzOiBDTEFTU19BUlJPV1MsXG4gICAgICBwYWdpbmF0aW9uOiBDTEFTU19QQUdJTkFUSU9OLFxuICAgICAgcHJldjogQ0xBU1NfQVJST1dfUFJFVixcbiAgICAgIG5leHQ6IENMQVNTX0FSUk9XX05FWFQsXG4gICAgICBiYXI6IENMQVNTX1BST0dSRVNTX0JBUixcbiAgICAgIHRvZ2dsZTogQ0xBU1NfVE9HR0xFXG4gICAgfSwgZnVuY3Rpb24gKGNsYXNzTmFtZSwga2V5KSB7XG4gICAgICBlbGVtZW50c1trZXldID0gZmluZChcIi5cIiArIGNsYXNzTmFtZSk7XG4gICAgfSk7XG4gICAgYXNzaWduKGVsZW1lbnRzLCB7XG4gICAgICByb290OiByb290LFxuICAgICAgdHJhY2s6IHRyYWNrLFxuICAgICAgbGlzdDogbGlzdCxcbiAgICAgIHNsaWRlczogc2xpZGVzXG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBpZCA9IHJvb3QuaWQgfHwgdW5pcXVlSWQoUFJPSkVDVF9DT0RFKTtcbiAgICB2YXIgcm9sZSA9IG9wdGlvbnMucm9sZTtcbiAgICByb290LmlkID0gaWQ7XG4gICAgdHJhY2suaWQgPSB0cmFjay5pZCB8fCBpZCArIFwiLXRyYWNrXCI7XG4gICAgbGlzdC5pZCA9IGxpc3QuaWQgfHwgaWQgKyBcIi1saXN0XCI7XG5cbiAgICBpZiAoIWdldEF0dHJpYnV0ZShyb290LCBST0xFKSAmJiByb290LnRhZ05hbWUgIT09IFwiU0VDVElPTlwiICYmIHJvbGUpIHtcbiAgICAgIHNldEF0dHJpYnV0ZShyb290LCBST0xFLCByb2xlKTtcbiAgICB9XG5cbiAgICBzZXRBdHRyaWJ1dGUocm9vdCwgQVJJQV9ST0xFREVTQ1JJUFRJT04sIGkxOG4uY2Fyb3VzZWwpO1xuICAgIHNldEF0dHJpYnV0ZShsaXN0LCBST0xFLCBcInByZXNlbnRhdGlvblwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmQoc2VsZWN0b3IpIHtcbiAgICB2YXIgZWxtID0gcXVlcnkocm9vdCwgc2VsZWN0b3IpO1xuICAgIHJldHVybiBlbG0gJiYgY2xvc2VzdChlbG0sIFwiLlwiICsgQ0xBU1NfUk9PVCkgPT09IHJvb3QgPyBlbG0gOiB2b2lkIDA7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRDbGFzc2VzKGJhc2UpIHtcbiAgICByZXR1cm4gW2Jhc2UgKyBcIi0tXCIgKyBvcHRpb25zLnR5cGUsIGJhc2UgKyBcIi0tXCIgKyBvcHRpb25zLmRpcmVjdGlvbiwgb3B0aW9ucy5kcmFnICYmIGJhc2UgKyBcIi0tZHJhZ2dhYmxlXCIsIG9wdGlvbnMuaXNOYXZpZ2F0aW9uICYmIGJhc2UgKyBcIi0tbmF2XCIsIGJhc2UgPT09IENMQVNTX1JPT1QgJiYgQ0xBU1NfQUNUSVZFXTtcbiAgfVxuXG4gIHJldHVybiBhc3NpZ24oZWxlbWVudHMsIHtcbiAgICBzZXR1cDogc2V0dXAsXG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3lcbiAgfSk7XG59XG5cbnZhciBTTElERSA9IFwic2xpZGVcIjtcbnZhciBMT09QID0gXCJsb29wXCI7XG52YXIgRkFERSA9IFwiZmFkZVwiO1xuXG5mdW5jdGlvbiBTbGlkZSQxKFNwbGlkZTIsIGluZGV4LCBzbGlkZUluZGV4LCBzbGlkZSkge1xuICB2YXIgZXZlbnQgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKTtcbiAgdmFyIG9uID0gZXZlbnQub24sXG4gICAgICBlbWl0ID0gZXZlbnQuZW1pdCxcbiAgICAgIGJpbmQgPSBldmVudC5iaW5kO1xuICB2YXIgQ29tcG9uZW50cyA9IFNwbGlkZTIuQ29tcG9uZW50cyxcbiAgICAgIHJvb3QgPSBTcGxpZGUyLnJvb3QsXG4gICAgICBvcHRpb25zID0gU3BsaWRlMi5vcHRpb25zO1xuICB2YXIgaXNOYXZpZ2F0aW9uID0gb3B0aW9ucy5pc05hdmlnYXRpb24sXG4gICAgICB1cGRhdGVPbk1vdmUgPSBvcHRpb25zLnVwZGF0ZU9uTW92ZSxcbiAgICAgIGkxOG4gPSBvcHRpb25zLmkxOG4sXG4gICAgICBwYWdpbmF0aW9uID0gb3B0aW9ucy5wYWdpbmF0aW9uLFxuICAgICAgc2xpZGVGb2N1cyA9IG9wdGlvbnMuc2xpZGVGb2N1cztcbiAgdmFyIHJlc29sdmUgPSBDb21wb25lbnRzLkRpcmVjdGlvbi5yZXNvbHZlO1xuICB2YXIgc3R5bGVzID0gZ2V0QXR0cmlidXRlKHNsaWRlLCBcInN0eWxlXCIpO1xuICB2YXIgbGFiZWwgPSBnZXRBdHRyaWJ1dGUoc2xpZGUsIEFSSUFfTEFCRUwpO1xuICB2YXIgaXNDbG9uZSA9IHNsaWRlSW5kZXggPiAtMTtcbiAgdmFyIGNvbnRhaW5lciA9IGNoaWxkKHNsaWRlLCBcIi5cIiArIENMQVNTX0NPTlRBSU5FUik7XG4gIHZhciBkZXN0cm95ZWQ7XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgaWYgKCFpc0Nsb25lKSB7XG4gICAgICBzbGlkZS5pZCA9IHJvb3QuaWQgKyBcIi1zbGlkZVwiICsgcGFkKGluZGV4ICsgMSk7XG4gICAgICBzZXRBdHRyaWJ1dGUoc2xpZGUsIFJPTEUsIHBhZ2luYXRpb24gPyBcInRhYnBhbmVsXCIgOiBcImdyb3VwXCIpO1xuICAgICAgc2V0QXR0cmlidXRlKHNsaWRlLCBBUklBX1JPTEVERVNDUklQVElPTiwgaTE4bi5zbGlkZSk7XG4gICAgICBzZXRBdHRyaWJ1dGUoc2xpZGUsIEFSSUFfTEFCRUwsIGxhYmVsIHx8IGZvcm1hdChpMThuLnNsaWRlTGFiZWwsIFtpbmRleCArIDEsIFNwbGlkZTIubGVuZ3RoXSkpO1xuICAgIH1cblxuICAgIGxpc3RlbigpO1xuICB9XG5cbiAgZnVuY3Rpb24gbGlzdGVuKCkge1xuICAgIGJpbmQoc2xpZGUsIFwiY2xpY2tcIiwgYXBwbHkoZW1pdCwgRVZFTlRfQ0xJQ0ssIHNlbGYpKTtcbiAgICBiaW5kKHNsaWRlLCBcImtleWRvd25cIiwgYXBwbHkoZW1pdCwgRVZFTlRfU0xJREVfS0VZRE9XTiwgc2VsZikpO1xuICAgIG9uKFtFVkVOVF9NT1ZFRCwgRVZFTlRfU0hJRlRFRCwgRVZFTlRfU0NST0xMRURdLCB1cGRhdGUpO1xuICAgIG9uKEVWRU5UX05BVklHQVRJT05fTU9VTlRFRCwgaW5pdE5hdmlnYXRpb24pO1xuXG4gICAgaWYgKHVwZGF0ZU9uTW92ZSkge1xuICAgICAgb24oRVZFTlRfTU9WRSwgb25Nb3ZlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgIGRlc3Ryb3llZCA9IHRydWU7XG4gICAgZXZlbnQuZGVzdHJveSgpO1xuICAgIHJlbW92ZUNsYXNzKHNsaWRlLCBTVEFUVVNfQ0xBU1NFUyk7XG4gICAgcmVtb3ZlQXR0cmlidXRlKHNsaWRlLCBBTExfQVRUUklCVVRFUyk7XG4gICAgc2V0QXR0cmlidXRlKHNsaWRlLCBcInN0eWxlXCIsIHN0eWxlcyk7XG4gICAgc2V0QXR0cmlidXRlKHNsaWRlLCBBUklBX0xBQkVMLCBsYWJlbCB8fCBcIlwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXROYXZpZ2F0aW9uKCkge1xuICAgIHZhciBjb250cm9scyA9IFNwbGlkZTIuc3BsaWRlcy5tYXAoZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgdmFyIFNsaWRlMiA9IHRhcmdldC5zcGxpZGUuQ29tcG9uZW50cy5TbGlkZXMuZ2V0QXQoaW5kZXgpO1xuICAgICAgcmV0dXJuIFNsaWRlMiA/IFNsaWRlMi5zbGlkZS5pZCA6IFwiXCI7XG4gICAgfSkuam9pbihcIiBcIik7XG4gICAgc2V0QXR0cmlidXRlKHNsaWRlLCBBUklBX0xBQkVMLCBmb3JtYXQoaTE4bi5zbGlkZVgsIChpc0Nsb25lID8gc2xpZGVJbmRleCA6IGluZGV4KSArIDEpKTtcbiAgICBzZXRBdHRyaWJ1dGUoc2xpZGUsIEFSSUFfQ09OVFJPTFMsIGNvbnRyb2xzKTtcbiAgICBzZXRBdHRyaWJ1dGUoc2xpZGUsIFJPTEUsIHNsaWRlRm9jdXMgPyBcImJ1dHRvblwiIDogXCJcIik7XG4gICAgc2xpZGVGb2N1cyAmJiByZW1vdmVBdHRyaWJ1dGUoc2xpZGUsIEFSSUFfUk9MRURFU0NSSVBUSU9OKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uTW92ZSgpIHtcbiAgICBpZiAoIWRlc3Ryb3llZCkge1xuICAgICAgdXBkYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgIGlmICghZGVzdHJveWVkKSB7XG4gICAgICB2YXIgY3VyciA9IFNwbGlkZTIuaW5kZXg7XG4gICAgICB1cGRhdGVBY3Rpdml0eSgpO1xuICAgICAgdXBkYXRlVmlzaWJpbGl0eSgpO1xuICAgICAgdG9nZ2xlQ2xhc3Moc2xpZGUsIENMQVNTX1BSRVYsIGluZGV4ID09PSBjdXJyIC0gMSk7XG4gICAgICB0b2dnbGVDbGFzcyhzbGlkZSwgQ0xBU1NfTkVYVCwgaW5kZXggPT09IGN1cnIgKyAxKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVBY3Rpdml0eSgpIHtcbiAgICB2YXIgYWN0aXZlID0gaXNBY3RpdmUoKTtcblxuICAgIGlmIChhY3RpdmUgIT09IGhhc0NsYXNzKHNsaWRlLCBDTEFTU19BQ1RJVkUpKSB7XG4gICAgICB0b2dnbGVDbGFzcyhzbGlkZSwgQ0xBU1NfQUNUSVZFLCBhY3RpdmUpO1xuICAgICAgc2V0QXR0cmlidXRlKHNsaWRlLCBBUklBX0NVUlJFTlQsIGlzTmF2aWdhdGlvbiAmJiBhY3RpdmUgfHwgXCJcIik7XG4gICAgICBlbWl0KGFjdGl2ZSA/IEVWRU5UX0FDVElWRSA6IEVWRU5UX0lOQUNUSVZFLCBzZWxmKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVWaXNpYmlsaXR5KCkge1xuICAgIHZhciB2aXNpYmxlID0gaXNWaXNpYmxlKCk7XG4gICAgdmFyIGhpZGRlbiA9ICF2aXNpYmxlICYmICghaXNBY3RpdmUoKSB8fCBpc0Nsb25lKTtcblxuICAgIGlmICghU3BsaWRlMi5zdGF0ZS5pcyhbTU9WSU5HLCBTQ1JPTExJTkddKSkge1xuICAgICAgc2V0QXR0cmlidXRlKHNsaWRlLCBBUklBX0hJRERFTiwgaGlkZGVuIHx8IFwiXCIpO1xuICAgIH1cblxuICAgIHNldEF0dHJpYnV0ZShxdWVyeUFsbChzbGlkZSwgb3B0aW9ucy5mb2N1c2FibGVOb2RlcyB8fCBcIlwiKSwgVEFCX0lOREVYLCBoaWRkZW4gPyAtMSA6IFwiXCIpO1xuXG4gICAgaWYgKHNsaWRlRm9jdXMpIHtcbiAgICAgIHNldEF0dHJpYnV0ZShzbGlkZSwgVEFCX0lOREVYLCBoaWRkZW4gPyAtMSA6IDApO1xuICAgIH1cblxuICAgIGlmICh2aXNpYmxlICE9PSBoYXNDbGFzcyhzbGlkZSwgQ0xBU1NfVklTSUJMRSkpIHtcbiAgICAgIHRvZ2dsZUNsYXNzKHNsaWRlLCBDTEFTU19WSVNJQkxFLCB2aXNpYmxlKTtcbiAgICAgIGVtaXQodmlzaWJsZSA/IEVWRU5UX1ZJU0lCTEUgOiBFVkVOVF9ISURERU4sIHNlbGYpO1xuICAgIH1cblxuICAgIGlmICghdmlzaWJsZSAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBzbGlkZSkge1xuICAgICAgdmFyIFNsaWRlMiA9IENvbXBvbmVudHMuU2xpZGVzLmdldEF0KFNwbGlkZTIuaW5kZXgpO1xuICAgICAgU2xpZGUyICYmIGZvY3VzKFNsaWRlMi5zbGlkZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3R5bGUkMShwcm9wLCB2YWx1ZSwgdXNlQ29udGFpbmVyKSB7XG4gICAgc3R5bGUodXNlQ29udGFpbmVyICYmIGNvbnRhaW5lciB8fCBzbGlkZSwgcHJvcCwgdmFsdWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNBY3RpdmUoKSB7XG4gICAgdmFyIGN1cnIgPSBTcGxpZGUyLmluZGV4O1xuICAgIHJldHVybiBjdXJyID09PSBpbmRleCB8fCBvcHRpb25zLmNsb25lU3RhdHVzICYmIGN1cnIgPT09IHNsaWRlSW5kZXg7XG4gIH1cblxuICBmdW5jdGlvbiBpc1Zpc2libGUoKSB7XG4gICAgaWYgKFNwbGlkZTIuaXMoRkFERSkpIHtcbiAgICAgIHJldHVybiBpc0FjdGl2ZSgpO1xuICAgIH1cblxuICAgIHZhciB0cmFja1JlY3QgPSByZWN0KENvbXBvbmVudHMuRWxlbWVudHMudHJhY2spO1xuICAgIHZhciBzbGlkZVJlY3QgPSByZWN0KHNsaWRlKTtcbiAgICB2YXIgbGVmdCA9IHJlc29sdmUoXCJsZWZ0XCIsIHRydWUpO1xuICAgIHZhciByaWdodCA9IHJlc29sdmUoXCJyaWdodFwiLCB0cnVlKTtcbiAgICByZXR1cm4gZmxvb3IodHJhY2tSZWN0W2xlZnRdKSA8PSBjZWlsKHNsaWRlUmVjdFtsZWZ0XSkgJiYgZmxvb3Ioc2xpZGVSZWN0W3JpZ2h0XSkgPD0gY2VpbCh0cmFja1JlY3RbcmlnaHRdKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzV2l0aGluKGZyb20sIGRpc3RhbmNlKSB7XG4gICAgdmFyIGRpZmYgPSBhYnMoZnJvbSAtIGluZGV4KTtcblxuICAgIGlmICghaXNDbG9uZSAmJiAob3B0aW9ucy5yZXdpbmQgfHwgU3BsaWRlMi5pcyhMT09QKSkpIHtcbiAgICAgIGRpZmYgPSBtaW4oZGlmZiwgU3BsaWRlMi5sZW5ndGggLSBkaWZmKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGlmZiA8PSBkaXN0YW5jZTtcbiAgfVxuXG4gIHZhciBzZWxmID0ge1xuICAgIGluZGV4OiBpbmRleCxcbiAgICBzbGlkZUluZGV4OiBzbGlkZUluZGV4LFxuICAgIHNsaWRlOiBzbGlkZSxcbiAgICBjb250YWluZXI6IGNvbnRhaW5lcixcbiAgICBpc0Nsb25lOiBpc0Nsb25lLFxuICAgIG1vdW50OiBtb3VudCxcbiAgICBkZXN0cm95OiBkZXN0cm95LFxuICAgIHVwZGF0ZTogdXBkYXRlLFxuICAgIHN0eWxlOiBzdHlsZSQxLFxuICAgIGlzV2l0aGluOiBpc1dpdGhpblxuICB9O1xuICByZXR1cm4gc2VsZjtcbn1cblxuZnVuY3Rpb24gU2xpZGVzKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBfRXZlbnRJbnRlcmZhY2UyID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMiksXG4gICAgICBvbiA9IF9FdmVudEludGVyZmFjZTIub24sXG4gICAgICBlbWl0ID0gX0V2ZW50SW50ZXJmYWNlMi5lbWl0LFxuICAgICAgYmluZCA9IF9FdmVudEludGVyZmFjZTIuYmluZDtcblxuICB2YXIgX0NvbXBvbmVudHMyJEVsZW1lbnRzID0gQ29tcG9uZW50czIuRWxlbWVudHMsXG4gICAgICBzbGlkZXMgPSBfQ29tcG9uZW50czIkRWxlbWVudHMuc2xpZGVzLFxuICAgICAgbGlzdCA9IF9Db21wb25lbnRzMiRFbGVtZW50cy5saXN0O1xuICB2YXIgU2xpZGVzMiA9IFtdO1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIGluaXQoKTtcbiAgICBvbihFVkVOVF9SRUZSRVNILCBkZXN0cm95KTtcbiAgICBvbihFVkVOVF9SRUZSRVNILCBpbml0KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgc2xpZGVzLmZvckVhY2goZnVuY3Rpb24gKHNsaWRlLCBpbmRleCkge1xuICAgICAgcmVnaXN0ZXIoc2xpZGUsIGluZGV4LCAtMSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgIGZvckVhY2gkMShmdW5jdGlvbiAoU2xpZGUyKSB7XG4gICAgICBTbGlkZTIuZGVzdHJveSgpO1xuICAgIH0pO1xuICAgIGVtcHR5KFNsaWRlczIpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgIGZvckVhY2gkMShmdW5jdGlvbiAoU2xpZGUyKSB7XG4gICAgICBTbGlkZTIudXBkYXRlKCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByZWdpc3RlcihzbGlkZSwgaW5kZXgsIHNsaWRlSW5kZXgpIHtcbiAgICB2YXIgb2JqZWN0ID0gU2xpZGUkMShTcGxpZGUyLCBpbmRleCwgc2xpZGVJbmRleCwgc2xpZGUpO1xuICAgIG9iamVjdC5tb3VudCgpO1xuICAgIFNsaWRlczIucHVzaChvYmplY3QpO1xuICAgIFNsaWRlczIuc29ydChmdW5jdGlvbiAoU2xpZGUxLCBTbGlkZTIpIHtcbiAgICAgIHJldHVybiBTbGlkZTEuaW5kZXggLSBTbGlkZTIuaW5kZXg7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXQoZXhjbHVkZUNsb25lcykge1xuICAgIHJldHVybiBleGNsdWRlQ2xvbmVzID8gZmlsdGVyKGZ1bmN0aW9uIChTbGlkZTIpIHtcbiAgICAgIHJldHVybiAhU2xpZGUyLmlzQ2xvbmU7XG4gICAgfSkgOiBTbGlkZXMyO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SW4ocGFnZSkge1xuICAgIHZhciBDb250cm9sbGVyID0gQ29tcG9uZW50czIuQ29udHJvbGxlcjtcbiAgICB2YXIgaW5kZXggPSBDb250cm9sbGVyLnRvSW5kZXgocGFnZSk7XG4gICAgdmFyIG1heCA9IENvbnRyb2xsZXIuaGFzRm9jdXMoKSA/IDEgOiBvcHRpb25zLnBlclBhZ2U7XG4gICAgcmV0dXJuIGZpbHRlcihmdW5jdGlvbiAoU2xpZGUyKSB7XG4gICAgICByZXR1cm4gYmV0d2VlbihTbGlkZTIuaW5kZXgsIGluZGV4LCBpbmRleCArIG1heCAtIDEpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0QXQoaW5kZXgpIHtcbiAgICByZXR1cm4gZmlsdGVyKGluZGV4KVswXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZChpdGVtcywgaW5kZXgpIHtcbiAgICBmb3JFYWNoKGl0ZW1zLCBmdW5jdGlvbiAoc2xpZGUpIHtcbiAgICAgIGlmIChpc1N0cmluZyhzbGlkZSkpIHtcbiAgICAgICAgc2xpZGUgPSBwYXJzZUh0bWwoc2xpZGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNIVE1MRWxlbWVudChzbGlkZSkpIHtcbiAgICAgICAgdmFyIHJlZiA9IHNsaWRlc1tpbmRleF07XG4gICAgICAgIHJlZiA/IGJlZm9yZShzbGlkZSwgcmVmKSA6IGFwcGVuZChsaXN0LCBzbGlkZSk7XG4gICAgICAgIGFkZENsYXNzKHNsaWRlLCBvcHRpb25zLmNsYXNzZXMuc2xpZGUpO1xuICAgICAgICBvYnNlcnZlSW1hZ2VzKHNsaWRlLCBhcHBseShlbWl0LCBFVkVOVF9SRVNJWkUpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBlbWl0KEVWRU5UX1JFRlJFU0gpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlJDEobWF0Y2hlcikge1xuICAgIHJlbW92ZShmaWx0ZXIobWF0Y2hlcikubWFwKGZ1bmN0aW9uIChTbGlkZTIpIHtcbiAgICAgIHJldHVybiBTbGlkZTIuc2xpZGU7XG4gICAgfSkpO1xuICAgIGVtaXQoRVZFTlRfUkVGUkVTSCk7XG4gIH1cblxuICBmdW5jdGlvbiBmb3JFYWNoJDEoaXRlcmF0ZWUsIGV4Y2x1ZGVDbG9uZXMpIHtcbiAgICBnZXQoZXhjbHVkZUNsb25lcykuZm9yRWFjaChpdGVyYXRlZSk7XG4gIH1cblxuICBmdW5jdGlvbiBmaWx0ZXIobWF0Y2hlcikge1xuICAgIHJldHVybiBTbGlkZXMyLmZpbHRlcihpc0Z1bmN0aW9uKG1hdGNoZXIpID8gbWF0Y2hlciA6IGZ1bmN0aW9uIChTbGlkZTIpIHtcbiAgICAgIHJldHVybiBpc1N0cmluZyhtYXRjaGVyKSA/IG1hdGNoZXMoU2xpZGUyLnNsaWRlLCBtYXRjaGVyKSA6IGluY2x1ZGVzKHRvQXJyYXkobWF0Y2hlciksIFNsaWRlMi5pbmRleCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBzdHlsZShwcm9wLCB2YWx1ZSwgdXNlQ29udGFpbmVyKSB7XG4gICAgZm9yRWFjaCQxKGZ1bmN0aW9uIChTbGlkZTIpIHtcbiAgICAgIFNsaWRlMi5zdHlsZShwcm9wLCB2YWx1ZSwgdXNlQ29udGFpbmVyKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9ic2VydmVJbWFnZXMoZWxtLCBjYWxsYmFjaykge1xuICAgIHZhciBpbWFnZXMgPSBxdWVyeUFsbChlbG0sIFwiaW1nXCIpO1xuICAgIHZhciBsZW5ndGggPSBpbWFnZXMubGVuZ3RoO1xuXG4gICAgaWYgKGxlbmd0aCkge1xuICAgICAgaW1hZ2VzLmZvckVhY2goZnVuY3Rpb24gKGltZykge1xuICAgICAgICBiaW5kKGltZywgXCJsb2FkIGVycm9yXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoISAtLWxlbmd0aCkge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0TGVuZ3RoKGV4Y2x1ZGVDbG9uZXMpIHtcbiAgICByZXR1cm4gZXhjbHVkZUNsb25lcyA/IHNsaWRlcy5sZW5ndGggOiBTbGlkZXMyLmxlbmd0aDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzRW5vdWdoKCkge1xuICAgIHJldHVybiBTbGlkZXMyLmxlbmd0aCA+IG9wdGlvbnMucGVyUGFnZTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3ksXG4gICAgdXBkYXRlOiB1cGRhdGUsXG4gICAgcmVnaXN0ZXI6IHJlZ2lzdGVyLFxuICAgIGdldDogZ2V0LFxuICAgIGdldEluOiBnZXRJbixcbiAgICBnZXRBdDogZ2V0QXQsXG4gICAgYWRkOiBhZGQsXG4gICAgcmVtb3ZlOiByZW1vdmUkMSxcbiAgICBmb3JFYWNoOiBmb3JFYWNoJDEsXG4gICAgZmlsdGVyOiBmaWx0ZXIsXG4gICAgc3R5bGU6IHN0eWxlLFxuICAgIGdldExlbmd0aDogZ2V0TGVuZ3RoLFxuICAgIGlzRW5vdWdoOiBpc0Vub3VnaFxuICB9O1xufVxuXG5mdW5jdGlvbiBMYXlvdXQoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIF9FdmVudEludGVyZmFjZTMgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKSxcbiAgICAgIG9uID0gX0V2ZW50SW50ZXJmYWNlMy5vbixcbiAgICAgIGJpbmQgPSBfRXZlbnRJbnRlcmZhY2UzLmJpbmQsXG4gICAgICBlbWl0ID0gX0V2ZW50SW50ZXJmYWNlMy5lbWl0O1xuXG4gIHZhciBTbGlkZXMgPSBDb21wb25lbnRzMi5TbGlkZXM7XG4gIHZhciByZXNvbHZlID0gQ29tcG9uZW50czIuRGlyZWN0aW9uLnJlc29sdmU7XG4gIHZhciBfQ29tcG9uZW50czIkRWxlbWVudHMyID0gQ29tcG9uZW50czIuRWxlbWVudHMsXG4gICAgICByb290ID0gX0NvbXBvbmVudHMyJEVsZW1lbnRzMi5yb290LFxuICAgICAgdHJhY2sgPSBfQ29tcG9uZW50czIkRWxlbWVudHMyLnRyYWNrLFxuICAgICAgbGlzdCA9IF9Db21wb25lbnRzMiRFbGVtZW50czIubGlzdDtcbiAgdmFyIGdldEF0ID0gU2xpZGVzLmdldEF0LFxuICAgICAgc3R5bGVTbGlkZXMgPSBTbGlkZXMuc3R5bGU7XG4gIHZhciB2ZXJ0aWNhbDtcbiAgdmFyIHJvb3RSZWN0O1xuICB2YXIgb3ZlcmZsb3c7XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgaW5pdCgpO1xuICAgIGJpbmQod2luZG93LCBcInJlc2l6ZSBsb2FkXCIsIFRocm90dGxlKGFwcGx5KGVtaXQsIEVWRU5UX1JFU0laRSkpKTtcbiAgICBvbihbRVZFTlRfVVBEQVRFRCwgRVZFTlRfUkVGUkVTSF0sIGluaXQpO1xuICAgIG9uKEVWRU5UX1JFU0laRSwgcmVzaXplKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmVydGljYWwgPSBvcHRpb25zLmRpcmVjdGlvbiA9PT0gVFRCO1xuICAgIHN0eWxlKHJvb3QsIFwibWF4V2lkdGhcIiwgdW5pdChvcHRpb25zLndpZHRoKSk7XG4gICAgc3R5bGUodHJhY2ssIHJlc29sdmUoXCJwYWRkaW5nTGVmdFwiKSwgY3NzUGFkZGluZyhmYWxzZSkpO1xuICAgIHN0eWxlKHRyYWNrLCByZXNvbHZlKFwicGFkZGluZ1JpZ2h0XCIpLCBjc3NQYWRkaW5nKHRydWUpKTtcbiAgICByZXNpemUodHJ1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXNpemUoZm9yY2UpIHtcbiAgICB2YXIgbmV3UmVjdCA9IHJlY3Qocm9vdCk7XG5cbiAgICBpZiAoZm9yY2UgfHwgcm9vdFJlY3Qud2lkdGggIT09IG5ld1JlY3Qud2lkdGggfHwgcm9vdFJlY3QuaGVpZ2h0ICE9PSBuZXdSZWN0LmhlaWdodCkge1xuICAgICAgc3R5bGUodHJhY2ssIFwiaGVpZ2h0XCIsIGNzc1RyYWNrSGVpZ2h0KCkpO1xuICAgICAgc3R5bGVTbGlkZXMocmVzb2x2ZShcIm1hcmdpblJpZ2h0XCIpLCB1bml0KG9wdGlvbnMuZ2FwKSk7XG4gICAgICBzdHlsZVNsaWRlcyhcIndpZHRoXCIsIGNzc1NsaWRlV2lkdGgoKSk7XG4gICAgICBzdHlsZVNsaWRlcyhcImhlaWdodFwiLCBjc3NTbGlkZUhlaWdodCgpLCB0cnVlKTtcbiAgICAgIHJvb3RSZWN0ID0gbmV3UmVjdDtcbiAgICAgIGVtaXQoRVZFTlRfUkVTSVpFRCk7XG5cbiAgICAgIGlmIChvdmVyZmxvdyAhPT0gKG92ZXJmbG93ID0gaXNPdmVyZmxvdygpKSkge1xuICAgICAgICB0b2dnbGVDbGFzcyhyb290LCBDTEFTU19PVkVSRkxPVywgb3ZlcmZsb3cpO1xuICAgICAgICBlbWl0KEVWRU5UX09WRVJGTE9XLCBvdmVyZmxvdyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY3NzUGFkZGluZyhyaWdodCkge1xuICAgIHZhciBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nO1xuICAgIHZhciBwcm9wID0gcmVzb2x2ZShyaWdodCA/IFwicmlnaHRcIiA6IFwibGVmdFwiKTtcbiAgICByZXR1cm4gcGFkZGluZyAmJiB1bml0KHBhZGRpbmdbcHJvcF0gfHwgKGlzT2JqZWN0KHBhZGRpbmcpID8gMCA6IHBhZGRpbmcpKSB8fCBcIjBweFwiO1xuICB9XG5cbiAgZnVuY3Rpb24gY3NzVHJhY2tIZWlnaHQoKSB7XG4gICAgdmFyIGhlaWdodCA9IFwiXCI7XG5cbiAgICBpZiAodmVydGljYWwpIHtcbiAgICAgIGhlaWdodCA9IGNzc0hlaWdodCgpO1xuICAgICAgYXNzZXJ0KGhlaWdodCwgXCJoZWlnaHQgb3IgaGVpZ2h0UmF0aW8gaXMgbWlzc2luZy5cIik7XG4gICAgICBoZWlnaHQgPSBcImNhbGMoXCIgKyBoZWlnaHQgKyBcIiAtIFwiICsgY3NzUGFkZGluZyhmYWxzZSkgKyBcIiAtIFwiICsgY3NzUGFkZGluZyh0cnVlKSArIFwiKVwiO1xuICAgIH1cblxuICAgIHJldHVybiBoZWlnaHQ7XG4gIH1cblxuICBmdW5jdGlvbiBjc3NIZWlnaHQoKSB7XG4gICAgcmV0dXJuIHVuaXQob3B0aW9ucy5oZWlnaHQgfHwgcmVjdChsaXN0KS53aWR0aCAqIG9wdGlvbnMuaGVpZ2h0UmF0aW8pO1xuICB9XG5cbiAgZnVuY3Rpb24gY3NzU2xpZGVXaWR0aCgpIHtcbiAgICByZXR1cm4gb3B0aW9ucy5hdXRvV2lkdGggPyBudWxsIDogdW5pdChvcHRpb25zLmZpeGVkV2lkdGgpIHx8ICh2ZXJ0aWNhbCA/IFwiXCIgOiBjc3NTbGlkZVNpemUoKSk7XG4gIH1cblxuICBmdW5jdGlvbiBjc3NTbGlkZUhlaWdodCgpIHtcbiAgICByZXR1cm4gdW5pdChvcHRpb25zLmZpeGVkSGVpZ2h0KSB8fCAodmVydGljYWwgPyBvcHRpb25zLmF1dG9IZWlnaHQgPyBudWxsIDogY3NzU2xpZGVTaXplKCkgOiBjc3NIZWlnaHQoKSk7XG4gIH1cblxuICBmdW5jdGlvbiBjc3NTbGlkZVNpemUoKSB7XG4gICAgdmFyIGdhcCA9IHVuaXQob3B0aW9ucy5nYXApO1xuICAgIHJldHVybiBcImNhbGMoKDEwMCVcIiArIChnYXAgJiYgXCIgKyBcIiArIGdhcCkgKyBcIikvXCIgKyAob3B0aW9ucy5wZXJQYWdlIHx8IDEpICsgKGdhcCAmJiBcIiAtIFwiICsgZ2FwKSArIFwiKVwiO1xuICB9XG5cbiAgZnVuY3Rpb24gbGlzdFNpemUoKSB7XG4gICAgcmV0dXJuIHJlY3QobGlzdClbcmVzb2x2ZShcIndpZHRoXCIpXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNsaWRlU2l6ZShpbmRleCwgd2l0aG91dEdhcCkge1xuICAgIHZhciBTbGlkZSA9IGdldEF0KGluZGV4IHx8IDApO1xuICAgIHJldHVybiBTbGlkZSA/IHJlY3QoU2xpZGUuc2xpZGUpW3Jlc29sdmUoXCJ3aWR0aFwiKV0gKyAod2l0aG91dEdhcCA/IDAgOiBnZXRHYXAoKSkgOiAwO1xuICB9XG5cbiAgZnVuY3Rpb24gdG90YWxTaXplKGluZGV4LCB3aXRob3V0R2FwKSB7XG4gICAgdmFyIFNsaWRlID0gZ2V0QXQoaW5kZXgpO1xuXG4gICAgaWYgKFNsaWRlKSB7XG4gICAgICB2YXIgcmlnaHQgPSByZWN0KFNsaWRlLnNsaWRlKVtyZXNvbHZlKFwicmlnaHRcIildO1xuICAgICAgdmFyIGxlZnQgPSByZWN0KGxpc3QpW3Jlc29sdmUoXCJsZWZ0XCIpXTtcbiAgICAgIHJldHVybiBhYnMocmlnaHQgLSBsZWZ0KSArICh3aXRob3V0R2FwID8gMCA6IGdldEdhcCgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNsaWRlclNpemUod2l0aG91dEdhcCkge1xuICAgIHJldHVybiB0b3RhbFNpemUoU3BsaWRlMi5sZW5ndGggLSAxKSAtIHRvdGFsU2l6ZSgwKSArIHNsaWRlU2l6ZSgwLCB3aXRob3V0R2FwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEdhcCgpIHtcbiAgICB2YXIgU2xpZGUgPSBnZXRBdCgwKTtcbiAgICByZXR1cm4gU2xpZGUgJiYgcGFyc2VGbG9hdChzdHlsZShTbGlkZS5zbGlkZSwgcmVzb2x2ZShcIm1hcmdpblJpZ2h0XCIpKSkgfHwgMDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFBhZGRpbmcocmlnaHQpIHtcbiAgICByZXR1cm4gcGFyc2VGbG9hdChzdHlsZSh0cmFjaywgcmVzb2x2ZShcInBhZGRpbmdcIiArIChyaWdodCA/IFwiUmlnaHRcIiA6IFwiTGVmdFwiKSkpKSB8fCAwO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNPdmVyZmxvdygpIHtcbiAgICByZXR1cm4gU3BsaWRlMi5pcyhGQURFKSB8fCBzbGlkZXJTaXplKHRydWUpID4gbGlzdFNpemUoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50LFxuICAgIHJlc2l6ZTogcmVzaXplLFxuICAgIGxpc3RTaXplOiBsaXN0U2l6ZSxcbiAgICBzbGlkZVNpemU6IHNsaWRlU2l6ZSxcbiAgICBzbGlkZXJTaXplOiBzbGlkZXJTaXplLFxuICAgIHRvdGFsU2l6ZTogdG90YWxTaXplLFxuICAgIGdldFBhZGRpbmc6IGdldFBhZGRpbmcsXG4gICAgaXNPdmVyZmxvdzogaXNPdmVyZmxvd1xuICB9O1xufVxuXG52YXIgTVVMVElQTElFUiA9IDI7XG5cbmZ1bmN0aW9uIENsb25lcyhTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgZXZlbnQgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKTtcbiAgdmFyIG9uID0gZXZlbnQub247XG4gIHZhciBFbGVtZW50cyA9IENvbXBvbmVudHMyLkVsZW1lbnRzLFxuICAgICAgU2xpZGVzID0gQ29tcG9uZW50czIuU2xpZGVzO1xuICB2YXIgcmVzb2x2ZSA9IENvbXBvbmVudHMyLkRpcmVjdGlvbi5yZXNvbHZlO1xuICB2YXIgY2xvbmVzID0gW107XG4gIHZhciBjbG9uZUNvdW50O1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIG9uKEVWRU5UX1JFRlJFU0gsIHJlbW91bnQpO1xuICAgIG9uKFtFVkVOVF9VUERBVEVELCBFVkVOVF9SRVNJWkVdLCBvYnNlcnZlKTtcblxuICAgIGlmIChjbG9uZUNvdW50ID0gY29tcHV0ZUNsb25lQ291bnQoKSkge1xuICAgICAgZ2VuZXJhdGUoY2xvbmVDb3VudCk7XG4gICAgICBDb21wb25lbnRzMi5MYXlvdXQucmVzaXplKHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW91bnQoKSB7XG4gICAgZGVzdHJveSgpO1xuICAgIG1vdW50KCk7XG4gIH1cblxuICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgIHJlbW92ZShjbG9uZXMpO1xuICAgIGVtcHR5KGNsb25lcyk7XG4gICAgZXZlbnQuZGVzdHJveSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gb2JzZXJ2ZSgpIHtcbiAgICB2YXIgY291bnQgPSBjb21wdXRlQ2xvbmVDb3VudCgpO1xuXG4gICAgaWYgKGNsb25lQ291bnQgIT09IGNvdW50KSB7XG4gICAgICBpZiAoY2xvbmVDb3VudCA8IGNvdW50IHx8ICFjb3VudCkge1xuICAgICAgICBldmVudC5lbWl0KEVWRU5UX1JFRlJFU0gpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdlbmVyYXRlKGNvdW50KSB7XG4gICAgdmFyIHNsaWRlcyA9IFNsaWRlcy5nZXQoKS5zbGljZSgpO1xuICAgIHZhciBsZW5ndGggPSBzbGlkZXMubGVuZ3RoO1xuXG4gICAgaWYgKGxlbmd0aCkge1xuICAgICAgd2hpbGUgKHNsaWRlcy5sZW5ndGggPCBjb3VudCkge1xuICAgICAgICBwdXNoKHNsaWRlcywgc2xpZGVzKTtcbiAgICAgIH1cblxuICAgICAgcHVzaChzbGlkZXMuc2xpY2UoLWNvdW50KSwgc2xpZGVzLnNsaWNlKDAsIGNvdW50KSkuZm9yRWFjaChmdW5jdGlvbiAoU2xpZGUsIGluZGV4KSB7XG4gICAgICAgIHZhciBpc0hlYWQgPSBpbmRleCA8IGNvdW50O1xuICAgICAgICB2YXIgY2xvbmUgPSBjbG9uZURlZXAoU2xpZGUuc2xpZGUsIGluZGV4KTtcbiAgICAgICAgaXNIZWFkID8gYmVmb3JlKGNsb25lLCBzbGlkZXNbMF0uc2xpZGUpIDogYXBwZW5kKEVsZW1lbnRzLmxpc3QsIGNsb25lKTtcbiAgICAgICAgcHVzaChjbG9uZXMsIGNsb25lKTtcbiAgICAgICAgU2xpZGVzLnJlZ2lzdGVyKGNsb25lLCBpbmRleCAtIGNvdW50ICsgKGlzSGVhZCA/IDAgOiBsZW5ndGgpLCBTbGlkZS5pbmRleCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjbG9uZURlZXAoZWxtLCBpbmRleCkge1xuICAgIHZhciBjbG9uZSA9IGVsbS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgYWRkQ2xhc3MoY2xvbmUsIG9wdGlvbnMuY2xhc3Nlcy5jbG9uZSk7XG4gICAgY2xvbmUuaWQgPSBTcGxpZGUyLnJvb3QuaWQgKyBcIi1jbG9uZVwiICsgcGFkKGluZGV4ICsgMSk7XG4gICAgcmV0dXJuIGNsb25lO1xuICB9XG5cbiAgZnVuY3Rpb24gY29tcHV0ZUNsb25lQ291bnQoKSB7XG4gICAgdmFyIGNsb25lczIgPSBvcHRpb25zLmNsb25lcztcblxuICAgIGlmICghU3BsaWRlMi5pcyhMT09QKSkge1xuICAgICAgY2xvbmVzMiA9IDA7XG4gICAgfSBlbHNlIGlmIChpc1VuZGVmaW5lZChjbG9uZXMyKSkge1xuICAgICAgdmFyIGZpeGVkU2l6ZSA9IG9wdGlvbnNbcmVzb2x2ZShcImZpeGVkV2lkdGhcIildICYmIENvbXBvbmVudHMyLkxheW91dC5zbGlkZVNpemUoMCk7XG4gICAgICB2YXIgZml4ZWRDb3VudCA9IGZpeGVkU2l6ZSAmJiBjZWlsKHJlY3QoRWxlbWVudHMudHJhY2spW3Jlc29sdmUoXCJ3aWR0aFwiKV0gLyBmaXhlZFNpemUpO1xuICAgICAgY2xvbmVzMiA9IGZpeGVkQ291bnQgfHwgb3B0aW9uc1tyZXNvbHZlKFwiYXV0b1dpZHRoXCIpXSAmJiBTcGxpZGUyLmxlbmd0aCB8fCBvcHRpb25zLnBlclBhZ2UgKiBNVUxUSVBMSUVSO1xuICAgIH1cblxuICAgIHJldHVybiBjbG9uZXMyO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb3VudDogbW91bnQsXG4gICAgZGVzdHJveTogZGVzdHJveVxuICB9O1xufVxuXG5mdW5jdGlvbiBNb3ZlKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBfRXZlbnRJbnRlcmZhY2U0ID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMiksXG4gICAgICBvbiA9IF9FdmVudEludGVyZmFjZTQub24sXG4gICAgICBlbWl0ID0gX0V2ZW50SW50ZXJmYWNlNC5lbWl0O1xuXG4gIHZhciBzZXQgPSBTcGxpZGUyLnN0YXRlLnNldDtcbiAgdmFyIF9Db21wb25lbnRzMiRMYXlvdXQgPSBDb21wb25lbnRzMi5MYXlvdXQsXG4gICAgICBzbGlkZVNpemUgPSBfQ29tcG9uZW50czIkTGF5b3V0LnNsaWRlU2l6ZSxcbiAgICAgIGdldFBhZGRpbmcgPSBfQ29tcG9uZW50czIkTGF5b3V0LmdldFBhZGRpbmcsXG4gICAgICB0b3RhbFNpemUgPSBfQ29tcG9uZW50czIkTGF5b3V0LnRvdGFsU2l6ZSxcbiAgICAgIGxpc3RTaXplID0gX0NvbXBvbmVudHMyJExheW91dC5saXN0U2l6ZSxcbiAgICAgIHNsaWRlclNpemUgPSBfQ29tcG9uZW50czIkTGF5b3V0LnNsaWRlclNpemU7XG4gIHZhciBfQ29tcG9uZW50czIkRGlyZWN0aW8gPSBDb21wb25lbnRzMi5EaXJlY3Rpb24sXG4gICAgICByZXNvbHZlID0gX0NvbXBvbmVudHMyJERpcmVjdGlvLnJlc29sdmUsXG4gICAgICBvcmllbnQgPSBfQ29tcG9uZW50czIkRGlyZWN0aW8ub3JpZW50O1xuICB2YXIgX0NvbXBvbmVudHMyJEVsZW1lbnRzMyA9IENvbXBvbmVudHMyLkVsZW1lbnRzLFxuICAgICAgbGlzdCA9IF9Db21wb25lbnRzMiRFbGVtZW50czMubGlzdCxcbiAgICAgIHRyYWNrID0gX0NvbXBvbmVudHMyJEVsZW1lbnRzMy50cmFjaztcbiAgdmFyIFRyYW5zaXRpb247XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgVHJhbnNpdGlvbiA9IENvbXBvbmVudHMyLlRyYW5zaXRpb247XG4gICAgb24oW0VWRU5UX01PVU5URUQsIEVWRU5UX1JFU0laRUQsIEVWRU5UX1VQREFURUQsIEVWRU5UX1JFRlJFU0hdLCByZXBvc2l0aW9uKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlcG9zaXRpb24oKSB7XG4gICAgaWYgKCFDb21wb25lbnRzMi5Db250cm9sbGVyLmlzQnVzeSgpKSB7XG4gICAgICBDb21wb25lbnRzMi5TY3JvbGwuY2FuY2VsKCk7XG4gICAgICBqdW1wKFNwbGlkZTIuaW5kZXgpO1xuICAgICAgQ29tcG9uZW50czIuU2xpZGVzLnVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmUoZGVzdCwgaW5kZXgsIHByZXYsIGNhbGxiYWNrKSB7XG4gICAgaWYgKGRlc3QgIT09IGluZGV4ICYmIGNhblNoaWZ0KGRlc3QgPiBwcmV2KSkge1xuICAgICAgY2FuY2VsKCk7XG4gICAgICB0cmFuc2xhdGUoc2hpZnQoZ2V0UG9zaXRpb24oKSwgZGVzdCA+IHByZXYpLCB0cnVlKTtcbiAgICB9XG5cbiAgICBzZXQoTU9WSU5HKTtcbiAgICBlbWl0KEVWRU5UX01PVkUsIGluZGV4LCBwcmV2LCBkZXN0KTtcbiAgICBUcmFuc2l0aW9uLnN0YXJ0KGluZGV4LCBmdW5jdGlvbiAoKSB7XG4gICAgICBzZXQoSURMRSk7XG4gICAgICBlbWl0KEVWRU5UX01PVkVELCBpbmRleCwgcHJldiwgZGVzdCk7XG4gICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24ganVtcChpbmRleCkge1xuICAgIHRyYW5zbGF0ZSh0b1Bvc2l0aW9uKGluZGV4LCB0cnVlKSk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFuc2xhdGUocG9zaXRpb24sIHByZXZlbnRMb29wKSB7XG4gICAgaWYgKCFTcGxpZGUyLmlzKEZBREUpKSB7XG4gICAgICB2YXIgZGVzdGluYXRpb24gPSBwcmV2ZW50TG9vcCA/IHBvc2l0aW9uIDogbG9vcChwb3NpdGlvbik7XG4gICAgICBzdHlsZShsaXN0LCBcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZVwiICsgcmVzb2x2ZShcIlhcIikgKyBcIihcIiArIGRlc3RpbmF0aW9uICsgXCJweClcIik7XG4gICAgICBwb3NpdGlvbiAhPT0gZGVzdGluYXRpb24gJiYgZW1pdChFVkVOVF9TSElGVEVEKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBsb29wKHBvc2l0aW9uKSB7XG4gICAgaWYgKFNwbGlkZTIuaXMoTE9PUCkpIHtcbiAgICAgIHZhciBpbmRleCA9IHRvSW5kZXgocG9zaXRpb24pO1xuICAgICAgdmFyIGV4Y2VlZGVkTWF4ID0gaW5kZXggPiBDb21wb25lbnRzMi5Db250cm9sbGVyLmdldEVuZCgpO1xuICAgICAgdmFyIGV4Y2VlZGVkTWluID0gaW5kZXggPCAwO1xuXG4gICAgICBpZiAoZXhjZWVkZWRNaW4gfHwgZXhjZWVkZWRNYXgpIHtcbiAgICAgICAgcG9zaXRpb24gPSBzaGlmdChwb3NpdGlvbiwgZXhjZWVkZWRNYXgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwb3NpdGlvbjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNoaWZ0KHBvc2l0aW9uLCBiYWNrd2FyZHMpIHtcbiAgICB2YXIgZXhjZXNzID0gcG9zaXRpb24gLSBnZXRMaW1pdChiYWNrd2FyZHMpO1xuICAgIHZhciBzaXplID0gc2xpZGVyU2l6ZSgpO1xuICAgIHBvc2l0aW9uIC09IG9yaWVudChzaXplICogKGNlaWwoYWJzKGV4Y2VzcykgLyBzaXplKSB8fCAxKSkgKiAoYmFja3dhcmRzID8gMSA6IC0xKTtcbiAgICByZXR1cm4gcG9zaXRpb247XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgdHJhbnNsYXRlKGdldFBvc2l0aW9uKCksIHRydWUpO1xuICAgIFRyYW5zaXRpb24uY2FuY2VsKCk7XG4gIH1cblxuICBmdW5jdGlvbiB0b0luZGV4KHBvc2l0aW9uKSB7XG4gICAgdmFyIFNsaWRlcyA9IENvbXBvbmVudHMyLlNsaWRlcy5nZXQoKTtcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHZhciBtaW5EaXN0YW5jZSA9IEluZmluaXR5O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBTbGlkZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzbGlkZUluZGV4ID0gU2xpZGVzW2ldLmluZGV4O1xuICAgICAgdmFyIGRpc3RhbmNlID0gYWJzKHRvUG9zaXRpb24oc2xpZGVJbmRleCwgdHJ1ZSkgLSBwb3NpdGlvbik7XG5cbiAgICAgIGlmIChkaXN0YW5jZSA8PSBtaW5EaXN0YW5jZSkge1xuICAgICAgICBtaW5EaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgICAgICBpbmRleCA9IHNsaWRlSW5kZXg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cblxuICBmdW5jdGlvbiB0b1Bvc2l0aW9uKGluZGV4LCB0cmltbWluZykge1xuICAgIHZhciBwb3NpdGlvbiA9IG9yaWVudCh0b3RhbFNpemUoaW5kZXggLSAxKSAtIG9mZnNldChpbmRleCkpO1xuICAgIHJldHVybiB0cmltbWluZyA/IHRyaW0ocG9zaXRpb24pIDogcG9zaXRpb247XG4gIH1cblxuICBmdW5jdGlvbiBnZXRQb3NpdGlvbigpIHtcbiAgICB2YXIgbGVmdCA9IHJlc29sdmUoXCJsZWZ0XCIpO1xuICAgIHJldHVybiByZWN0KGxpc3QpW2xlZnRdIC0gcmVjdCh0cmFjaylbbGVmdF0gKyBvcmllbnQoZ2V0UGFkZGluZyhmYWxzZSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJpbShwb3NpdGlvbikge1xuICAgIGlmIChvcHRpb25zLnRyaW1TcGFjZSAmJiBTcGxpZGUyLmlzKFNMSURFKSkge1xuICAgICAgcG9zaXRpb24gPSBjbGFtcChwb3NpdGlvbiwgMCwgb3JpZW50KHNsaWRlclNpemUodHJ1ZSkgLSBsaXN0U2l6ZSgpKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBvc2l0aW9uO1xuICB9XG5cbiAgZnVuY3Rpb24gb2Zmc2V0KGluZGV4KSB7XG4gICAgdmFyIGZvY3VzID0gb3B0aW9ucy5mb2N1cztcbiAgICByZXR1cm4gZm9jdXMgPT09IFwiY2VudGVyXCIgPyAobGlzdFNpemUoKSAtIHNsaWRlU2l6ZShpbmRleCwgdHJ1ZSkpIC8gMiA6ICtmb2N1cyAqIHNsaWRlU2l6ZShpbmRleCkgfHwgMDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldExpbWl0KG1heCkge1xuICAgIHJldHVybiB0b1Bvc2l0aW9uKG1heCA/IENvbXBvbmVudHMyLkNvbnRyb2xsZXIuZ2V0RW5kKCkgOiAwLCAhIW9wdGlvbnMudHJpbVNwYWNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhblNoaWZ0KGJhY2t3YXJkcykge1xuICAgIHZhciBzaGlmdGVkID0gb3JpZW50KHNoaWZ0KGdldFBvc2l0aW9uKCksIGJhY2t3YXJkcykpO1xuICAgIHJldHVybiBiYWNrd2FyZHMgPyBzaGlmdGVkID49IDAgOiBzaGlmdGVkIDw9IGxpc3RbcmVzb2x2ZShcInNjcm9sbFdpZHRoXCIpXSAtIHJlY3QodHJhY2spW3Jlc29sdmUoXCJ3aWR0aFwiKV07XG4gIH1cblxuICBmdW5jdGlvbiBleGNlZWRlZExpbWl0KG1heCwgcG9zaXRpb24pIHtcbiAgICBwb3NpdGlvbiA9IGlzVW5kZWZpbmVkKHBvc2l0aW9uKSA/IGdldFBvc2l0aW9uKCkgOiBwb3NpdGlvbjtcbiAgICB2YXIgZXhjZWVkZWRNaW4gPSBtYXggIT09IHRydWUgJiYgb3JpZW50KHBvc2l0aW9uKSA8IG9yaWVudChnZXRMaW1pdChmYWxzZSkpO1xuICAgIHZhciBleGNlZWRlZE1heCA9IG1heCAhPT0gZmFsc2UgJiYgb3JpZW50KHBvc2l0aW9uKSA+IG9yaWVudChnZXRMaW1pdCh0cnVlKSk7XG4gICAgcmV0dXJuIGV4Y2VlZGVkTWluIHx8IGV4Y2VlZGVkTWF4O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb3VudDogbW91bnQsXG4gICAgbW92ZTogbW92ZSxcbiAgICBqdW1wOiBqdW1wLFxuICAgIHRyYW5zbGF0ZTogdHJhbnNsYXRlLFxuICAgIHNoaWZ0OiBzaGlmdCxcbiAgICBjYW5jZWw6IGNhbmNlbCxcbiAgICB0b0luZGV4OiB0b0luZGV4LFxuICAgIHRvUG9zaXRpb246IHRvUG9zaXRpb24sXG4gICAgZ2V0UG9zaXRpb246IGdldFBvc2l0aW9uLFxuICAgIGdldExpbWl0OiBnZXRMaW1pdCxcbiAgICBleGNlZWRlZExpbWl0OiBleGNlZWRlZExpbWl0LFxuICAgIHJlcG9zaXRpb246IHJlcG9zaXRpb25cbiAgfTtcbn1cblxuZnVuY3Rpb24gQ29udHJvbGxlcihTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgX0V2ZW50SW50ZXJmYWNlNSA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpLFxuICAgICAgb24gPSBfRXZlbnRJbnRlcmZhY2U1Lm9uLFxuICAgICAgZW1pdCA9IF9FdmVudEludGVyZmFjZTUuZW1pdDtcblxuICB2YXIgTW92ZSA9IENvbXBvbmVudHMyLk1vdmU7XG4gIHZhciBnZXRQb3NpdGlvbiA9IE1vdmUuZ2V0UG9zaXRpb24sXG4gICAgICBnZXRMaW1pdCA9IE1vdmUuZ2V0TGltaXQsXG4gICAgICB0b1Bvc2l0aW9uID0gTW92ZS50b1Bvc2l0aW9uO1xuICB2YXIgX0NvbXBvbmVudHMyJFNsaWRlcyA9IENvbXBvbmVudHMyLlNsaWRlcyxcbiAgICAgIGlzRW5vdWdoID0gX0NvbXBvbmVudHMyJFNsaWRlcy5pc0Vub3VnaCxcbiAgICAgIGdldExlbmd0aCA9IF9Db21wb25lbnRzMiRTbGlkZXMuZ2V0TGVuZ3RoO1xuICB2YXIgb21pdEVuZCA9IG9wdGlvbnMub21pdEVuZDtcbiAgdmFyIGlzTG9vcCA9IFNwbGlkZTIuaXMoTE9PUCk7XG4gIHZhciBpc1NsaWRlID0gU3BsaWRlMi5pcyhTTElERSk7XG4gIHZhciBnZXROZXh0ID0gYXBwbHkoZ2V0QWRqYWNlbnQsIGZhbHNlKTtcbiAgdmFyIGdldFByZXYgPSBhcHBseShnZXRBZGphY2VudCwgdHJ1ZSk7XG4gIHZhciBjdXJySW5kZXggPSBvcHRpb25zLnN0YXJ0IHx8IDA7XG4gIHZhciBlbmRJbmRleDtcbiAgdmFyIHByZXZJbmRleCA9IGN1cnJJbmRleDtcbiAgdmFyIHNsaWRlQ291bnQ7XG4gIHZhciBwZXJNb3ZlO1xuICB2YXIgcGVyUGFnZTtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBpbml0KCk7XG4gICAgb24oW0VWRU5UX1VQREFURUQsIEVWRU5UX1JFRlJFU0gsIEVWRU5UX0VORF9JTkRFWF9DSEFOR0VEXSwgaW5pdCk7XG4gICAgb24oRVZFTlRfUkVTSVpFRCwgb25SZXNpemVkKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgc2xpZGVDb3VudCA9IGdldExlbmd0aCh0cnVlKTtcbiAgICBwZXJNb3ZlID0gb3B0aW9ucy5wZXJNb3ZlO1xuICAgIHBlclBhZ2UgPSBvcHRpb25zLnBlclBhZ2U7XG4gICAgZW5kSW5kZXggPSBnZXRFbmQoKTtcbiAgICB2YXIgaW5kZXggPSBjbGFtcChjdXJySW5kZXgsIDAsIG9taXRFbmQgPyBlbmRJbmRleCA6IHNsaWRlQ291bnQgLSAxKTtcblxuICAgIGlmIChpbmRleCAhPT0gY3VyckluZGV4KSB7XG4gICAgICBjdXJySW5kZXggPSBpbmRleDtcbiAgICAgIE1vdmUucmVwb3NpdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUmVzaXplZCgpIHtcbiAgICBpZiAoZW5kSW5kZXggIT09IGdldEVuZCgpKSB7XG4gICAgICBlbWl0KEVWRU5UX0VORF9JTkRFWF9DSEFOR0VEKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnbyhjb250cm9sLCBhbGxvd1NhbWVJbmRleCwgY2FsbGJhY2spIHtcbiAgICBpZiAoIWlzQnVzeSgpKSB7XG4gICAgICB2YXIgZGVzdCA9IHBhcnNlKGNvbnRyb2wpO1xuICAgICAgdmFyIGluZGV4ID0gbG9vcChkZXN0KTtcblxuICAgICAgaWYgKGluZGV4ID4gLTEgJiYgKGFsbG93U2FtZUluZGV4IHx8IGluZGV4ICE9PSBjdXJySW5kZXgpKSB7XG4gICAgICAgIHNldEluZGV4KGluZGV4KTtcbiAgICAgICAgTW92ZS5tb3ZlKGRlc3QsIGluZGV4LCBwcmV2SW5kZXgsIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzY3JvbGwoZGVzdGluYXRpb24sIGR1cmF0aW9uLCBzbmFwLCBjYWxsYmFjaykge1xuICAgIENvbXBvbmVudHMyLlNjcm9sbC5zY3JvbGwoZGVzdGluYXRpb24sIGR1cmF0aW9uLCBzbmFwLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgaW5kZXggPSBsb29wKE1vdmUudG9JbmRleChnZXRQb3NpdGlvbigpKSk7XG4gICAgICBzZXRJbmRleChvbWl0RW5kID8gbWluKGluZGV4LCBlbmRJbmRleCkgOiBpbmRleCk7XG4gICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2UoY29udHJvbCkge1xuICAgIHZhciBpbmRleCA9IGN1cnJJbmRleDtcblxuICAgIGlmIChpc1N0cmluZyhjb250cm9sKSkge1xuICAgICAgdmFyIF9yZWYgPSBjb250cm9sLm1hdGNoKC8oWytcXC08Pl0pKFxcZCspPy8pIHx8IFtdLFxuICAgICAgICAgIGluZGljYXRvciA9IF9yZWZbMV0sXG4gICAgICAgICAgbnVtYmVyID0gX3JlZlsyXTtcblxuICAgICAgaWYgKGluZGljYXRvciA9PT0gXCIrXCIgfHwgaW5kaWNhdG9yID09PSBcIi1cIikge1xuICAgICAgICBpbmRleCA9IGNvbXB1dGVEZXN0SW5kZXgoY3VyckluZGV4ICsgKyhcIlwiICsgaW5kaWNhdG9yICsgKCtudW1iZXIgfHwgMSkpLCBjdXJySW5kZXgpO1xuICAgICAgfSBlbHNlIGlmIChpbmRpY2F0b3IgPT09IFwiPlwiKSB7XG4gICAgICAgIGluZGV4ID0gbnVtYmVyID8gdG9JbmRleCgrbnVtYmVyKSA6IGdldE5leHQodHJ1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGluZGljYXRvciA9PT0gXCI8XCIpIHtcbiAgICAgICAgaW5kZXggPSBnZXRQcmV2KHRydWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpbmRleCA9IGlzTG9vcCA/IGNvbnRyb2wgOiBjbGFtcChjb250cm9sLCAwLCBlbmRJbmRleCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0QWRqYWNlbnQocHJldiwgZGVzdGluYXRpb24pIHtcbiAgICB2YXIgbnVtYmVyID0gcGVyTW92ZSB8fCAoaGFzRm9jdXMoKSA/IDEgOiBwZXJQYWdlKTtcbiAgICB2YXIgZGVzdCA9IGNvbXB1dGVEZXN0SW5kZXgoY3VyckluZGV4ICsgbnVtYmVyICogKHByZXYgPyAtMSA6IDEpLCBjdXJySW5kZXgsICEocGVyTW92ZSB8fCBoYXNGb2N1cygpKSk7XG5cbiAgICBpZiAoZGVzdCA9PT0gLTEgJiYgaXNTbGlkZSkge1xuICAgICAgaWYgKCFhcHByb3hpbWF0ZWx5RXF1YWwoZ2V0UG9zaXRpb24oKSwgZ2V0TGltaXQoIXByZXYpLCAxKSkge1xuICAgICAgICByZXR1cm4gcHJldiA/IDAgOiBlbmRJbmRleDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGVzdGluYXRpb24gPyBkZXN0IDogbG9vcChkZXN0KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbXB1dGVEZXN0SW5kZXgoZGVzdCwgZnJvbSwgc25hcFBhZ2UpIHtcbiAgICBpZiAoaXNFbm91Z2goKSB8fCBoYXNGb2N1cygpKSB7XG4gICAgICB2YXIgaW5kZXggPSBjb21wdXRlTW92YWJsZURlc3RJbmRleChkZXN0KTtcblxuICAgICAgaWYgKGluZGV4ICE9PSBkZXN0KSB7XG4gICAgICAgIGZyb20gPSBkZXN0O1xuICAgICAgICBkZXN0ID0gaW5kZXg7XG4gICAgICAgIHNuYXBQYWdlID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChkZXN0IDwgMCB8fCBkZXN0ID4gZW5kSW5kZXgpIHtcbiAgICAgICAgaWYgKCFwZXJNb3ZlICYmIChiZXR3ZWVuKDAsIGRlc3QsIGZyb20sIHRydWUpIHx8IGJldHdlZW4oZW5kSW5kZXgsIGZyb20sIGRlc3QsIHRydWUpKSkge1xuICAgICAgICAgIGRlc3QgPSB0b0luZGV4KHRvUGFnZShkZXN0KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGlzTG9vcCkge1xuICAgICAgICAgICAgZGVzdCA9IHNuYXBQYWdlID8gZGVzdCA8IDAgPyAtKHNsaWRlQ291bnQgJSBwZXJQYWdlIHx8IHBlclBhZ2UpIDogc2xpZGVDb3VudCA6IGRlc3Q7XG4gICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJld2luZCkge1xuICAgICAgICAgICAgZGVzdCA9IGRlc3QgPCAwID8gZW5kSW5kZXggOiAwO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkZXN0ID0gLTE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoc25hcFBhZ2UgJiYgZGVzdCAhPT0gZnJvbSkge1xuICAgICAgICAgIGRlc3QgPSB0b0luZGV4KHRvUGFnZShmcm9tKSArIChkZXN0IDwgZnJvbSA/IC0xIDogMSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlc3QgPSAtMTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGVzdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbXB1dGVNb3ZhYmxlRGVzdEluZGV4KGRlc3QpIHtcbiAgICBpZiAoaXNTbGlkZSAmJiBvcHRpb25zLnRyaW1TcGFjZSA9PT0gXCJtb3ZlXCIgJiYgZGVzdCAhPT0gY3VyckluZGV4KSB7XG4gICAgICB2YXIgcG9zaXRpb24gPSBnZXRQb3NpdGlvbigpO1xuXG4gICAgICB3aGlsZSAocG9zaXRpb24gPT09IHRvUG9zaXRpb24oZGVzdCwgdHJ1ZSkgJiYgYmV0d2VlbihkZXN0LCAwLCBTcGxpZGUyLmxlbmd0aCAtIDEsICFvcHRpb25zLnJld2luZCkpIHtcbiAgICAgICAgZGVzdCA8IGN1cnJJbmRleCA/IC0tZGVzdCA6ICsrZGVzdDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGVzdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvb3AoaW5kZXgpIHtcbiAgICByZXR1cm4gaXNMb29wID8gKGluZGV4ICsgc2xpZGVDb3VudCkgJSBzbGlkZUNvdW50IHx8IDAgOiBpbmRleDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEVuZCgpIHtcbiAgICB2YXIgZW5kID0gc2xpZGVDb3VudCAtIChoYXNGb2N1cygpIHx8IGlzTG9vcCAmJiBwZXJNb3ZlID8gMSA6IHBlclBhZ2UpO1xuXG4gICAgd2hpbGUgKG9taXRFbmQgJiYgZW5kLS0gPiAwKSB7XG4gICAgICBpZiAodG9Qb3NpdGlvbihzbGlkZUNvdW50IC0gMSwgdHJ1ZSkgIT09IHRvUG9zaXRpb24oZW5kLCB0cnVlKSkge1xuICAgICAgICBlbmQrKztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsYW1wKGVuZCwgMCwgc2xpZGVDb3VudCAtIDEpO1xuICB9XG5cbiAgZnVuY3Rpb24gdG9JbmRleChwYWdlKSB7XG4gICAgcmV0dXJuIGNsYW1wKGhhc0ZvY3VzKCkgPyBwYWdlIDogcGVyUGFnZSAqIHBhZ2UsIDAsIGVuZEluZGV4KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvUGFnZShpbmRleCkge1xuICAgIHJldHVybiBoYXNGb2N1cygpID8gbWluKGluZGV4LCBlbmRJbmRleCkgOiBmbG9vcigoaW5kZXggPj0gZW5kSW5kZXggPyBzbGlkZUNvdW50IC0gMSA6IGluZGV4KSAvIHBlclBhZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gdG9EZXN0KGRlc3RpbmF0aW9uKSB7XG4gICAgdmFyIGNsb3Nlc3QgPSBNb3ZlLnRvSW5kZXgoZGVzdGluYXRpb24pO1xuICAgIHJldHVybiBpc1NsaWRlID8gY2xhbXAoY2xvc2VzdCwgMCwgZW5kSW5kZXgpIDogY2xvc2VzdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEluZGV4KGluZGV4KSB7XG4gICAgaWYgKGluZGV4ICE9PSBjdXJySW5kZXgpIHtcbiAgICAgIHByZXZJbmRleCA9IGN1cnJJbmRleDtcbiAgICAgIGN1cnJJbmRleCA9IGluZGV4O1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEluZGV4KHByZXYpIHtcbiAgICByZXR1cm4gcHJldiA/IHByZXZJbmRleCA6IGN1cnJJbmRleDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhc0ZvY3VzKCkge1xuICAgIHJldHVybiAhaXNVbmRlZmluZWQob3B0aW9ucy5mb2N1cykgfHwgb3B0aW9ucy5pc05hdmlnYXRpb247XG4gIH1cblxuICBmdW5jdGlvbiBpc0J1c3koKSB7XG4gICAgcmV0dXJuIFNwbGlkZTIuc3RhdGUuaXMoW01PVklORywgU0NST0xMSU5HXSkgJiYgISFvcHRpb25zLndhaXRGb3JUcmFuc2l0aW9uO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb3VudDogbW91bnQsXG4gICAgZ286IGdvLFxuICAgIHNjcm9sbDogc2Nyb2xsLFxuICAgIGdldE5leHQ6IGdldE5leHQsXG4gICAgZ2V0UHJldjogZ2V0UHJldixcbiAgICBnZXRBZGphY2VudDogZ2V0QWRqYWNlbnQsXG4gICAgZ2V0RW5kOiBnZXRFbmQsXG4gICAgc2V0SW5kZXg6IHNldEluZGV4LFxuICAgIGdldEluZGV4OiBnZXRJbmRleCxcbiAgICB0b0luZGV4OiB0b0luZGV4LFxuICAgIHRvUGFnZTogdG9QYWdlLFxuICAgIHRvRGVzdDogdG9EZXN0LFxuICAgIGhhc0ZvY3VzOiBoYXNGb2N1cyxcbiAgICBpc0J1c3k6IGlzQnVzeVxuICB9O1xufVxuXG52YXIgWE1MX05BTUVfU1BBQ0UgPSBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI7XG52YXIgUEFUSCA9IFwibTE1LjUgMC45MzItNC4zIDQuMzggMTQuNSAxNC42LTE0LjUgMTQuNSA0LjMgNC40IDE0LjYtMTQuNiA0LjQtNC4zLTQuNC00LjQtMTQuNi0xNC42elwiO1xudmFyIFNJWkUgPSA0MDtcblxuZnVuY3Rpb24gQXJyb3dzKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBldmVudCA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpO1xuICB2YXIgb24gPSBldmVudC5vbixcbiAgICAgIGJpbmQgPSBldmVudC5iaW5kLFxuICAgICAgZW1pdCA9IGV2ZW50LmVtaXQ7XG4gIHZhciBjbGFzc2VzID0gb3B0aW9ucy5jbGFzc2VzLFxuICAgICAgaTE4biA9IG9wdGlvbnMuaTE4bjtcbiAgdmFyIEVsZW1lbnRzID0gQ29tcG9uZW50czIuRWxlbWVudHMsXG4gICAgICBDb250cm9sbGVyID0gQ29tcG9uZW50czIuQ29udHJvbGxlcjtcbiAgdmFyIHBsYWNlaG9sZGVyID0gRWxlbWVudHMuYXJyb3dzLFxuICAgICAgdHJhY2sgPSBFbGVtZW50cy50cmFjaztcbiAgdmFyIHdyYXBwZXIgPSBwbGFjZWhvbGRlcjtcbiAgdmFyIHByZXYgPSBFbGVtZW50cy5wcmV2O1xuICB2YXIgbmV4dCA9IEVsZW1lbnRzLm5leHQ7XG4gIHZhciBjcmVhdGVkO1xuICB2YXIgd3JhcHBlckNsYXNzZXM7XG4gIHZhciBhcnJvd3MgPSB7fTtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBpbml0KCk7XG4gICAgb24oRVZFTlRfVVBEQVRFRCwgcmVtb3VudCk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdW50KCkge1xuICAgIGRlc3Ryb3koKTtcbiAgICBtb3VudCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIgZW5hYmxlZCA9IG9wdGlvbnMuYXJyb3dzO1xuXG4gICAgaWYgKGVuYWJsZWQgJiYgIShwcmV2ICYmIG5leHQpKSB7XG4gICAgICBjcmVhdGVBcnJvd3MoKTtcbiAgICB9XG5cbiAgICBpZiAocHJldiAmJiBuZXh0KSB7XG4gICAgICBhc3NpZ24oYXJyb3dzLCB7XG4gICAgICAgIHByZXY6IHByZXYsXG4gICAgICAgIG5leHQ6IG5leHRcbiAgICAgIH0pO1xuICAgICAgZGlzcGxheSh3cmFwcGVyLCBlbmFibGVkID8gXCJcIiA6IFwibm9uZVwiKTtcbiAgICAgIGFkZENsYXNzKHdyYXBwZXIsIHdyYXBwZXJDbGFzc2VzID0gQ0xBU1NfQVJST1dTICsgXCItLVwiICsgb3B0aW9ucy5kaXJlY3Rpb24pO1xuXG4gICAgICBpZiAoZW5hYmxlZCkge1xuICAgICAgICBsaXN0ZW4oKTtcbiAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgIHNldEF0dHJpYnV0ZShbcHJldiwgbmV4dF0sIEFSSUFfQ09OVFJPTFMsIHRyYWNrLmlkKTtcbiAgICAgICAgZW1pdChFVkVOVF9BUlJPV1NfTU9VTlRFRCwgcHJldiwgbmV4dCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICBldmVudC5kZXN0cm95KCk7XG4gICAgcmVtb3ZlQ2xhc3Mod3JhcHBlciwgd3JhcHBlckNsYXNzZXMpO1xuXG4gICAgaWYgKGNyZWF0ZWQpIHtcbiAgICAgIHJlbW92ZShwbGFjZWhvbGRlciA/IFtwcmV2LCBuZXh0XSA6IHdyYXBwZXIpO1xuICAgICAgcHJldiA9IG5leHQgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmVBdHRyaWJ1dGUoW3ByZXYsIG5leHRdLCBBTExfQVRUUklCVVRFUyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbGlzdGVuKCkge1xuICAgIG9uKFtFVkVOVF9NT1VOVEVELCBFVkVOVF9NT1ZFRCwgRVZFTlRfUkVGUkVTSCwgRVZFTlRfU0NST0xMRUQsIEVWRU5UX0VORF9JTkRFWF9DSEFOR0VEXSwgdXBkYXRlKTtcbiAgICBiaW5kKG5leHQsIFwiY2xpY2tcIiwgYXBwbHkoZ28sIFwiPlwiKSk7XG4gICAgYmluZChwcmV2LCBcImNsaWNrXCIsIGFwcGx5KGdvLCBcIjxcIikpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ28oY29udHJvbCkge1xuICAgIENvbnRyb2xsZXIuZ28oY29udHJvbCwgdHJ1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVBcnJvd3MoKSB7XG4gICAgd3JhcHBlciA9IHBsYWNlaG9sZGVyIHx8IGNyZWF0ZShcImRpdlwiLCBjbGFzc2VzLmFycm93cyk7XG4gICAgcHJldiA9IGNyZWF0ZUFycm93KHRydWUpO1xuICAgIG5leHQgPSBjcmVhdGVBcnJvdyhmYWxzZSk7XG4gICAgY3JlYXRlZCA9IHRydWU7XG4gICAgYXBwZW5kKHdyYXBwZXIsIFtwcmV2LCBuZXh0XSk7XG4gICAgIXBsYWNlaG9sZGVyICYmIGJlZm9yZSh3cmFwcGVyLCB0cmFjayk7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVBcnJvdyhwcmV2Mikge1xuICAgIHZhciBhcnJvdyA9IFwiPGJ1dHRvbiBjbGFzcz1cXFwiXCIgKyBjbGFzc2VzLmFycm93ICsgXCIgXCIgKyAocHJldjIgPyBjbGFzc2VzLnByZXYgOiBjbGFzc2VzLm5leHQpICsgXCJcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCI+PHN2ZyB4bWxucz1cXFwiXCIgKyBYTUxfTkFNRV9TUEFDRSArIFwiXFxcIiB2aWV3Qm94PVxcXCIwIDAgXCIgKyBTSVpFICsgXCIgXCIgKyBTSVpFICsgXCJcXFwiIHdpZHRoPVxcXCJcIiArIFNJWkUgKyBcIlxcXCIgaGVpZ2h0PVxcXCJcIiArIFNJWkUgKyBcIlxcXCIgZm9jdXNhYmxlPVxcXCJmYWxzZVxcXCI+PHBhdGggZD1cXFwiXCIgKyAob3B0aW9ucy5hcnJvd1BhdGggfHwgUEFUSCkgKyBcIlxcXCIgLz5cIjtcbiAgICByZXR1cm4gcGFyc2VIdG1sKGFycm93KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICBpZiAocHJldiAmJiBuZXh0KSB7XG4gICAgICB2YXIgaW5kZXggPSBTcGxpZGUyLmluZGV4O1xuICAgICAgdmFyIHByZXZJbmRleCA9IENvbnRyb2xsZXIuZ2V0UHJldigpO1xuICAgICAgdmFyIG5leHRJbmRleCA9IENvbnRyb2xsZXIuZ2V0TmV4dCgpO1xuICAgICAgdmFyIHByZXZMYWJlbCA9IHByZXZJbmRleCA+IC0xICYmIGluZGV4IDwgcHJldkluZGV4ID8gaTE4bi5sYXN0IDogaTE4bi5wcmV2O1xuICAgICAgdmFyIG5leHRMYWJlbCA9IG5leHRJbmRleCA+IC0xICYmIGluZGV4ID4gbmV4dEluZGV4ID8gaTE4bi5maXJzdCA6IGkxOG4ubmV4dDtcbiAgICAgIHByZXYuZGlzYWJsZWQgPSBwcmV2SW5kZXggPCAwO1xuICAgICAgbmV4dC5kaXNhYmxlZCA9IG5leHRJbmRleCA8IDA7XG4gICAgICBzZXRBdHRyaWJ1dGUocHJldiwgQVJJQV9MQUJFTCwgcHJldkxhYmVsKTtcbiAgICAgIHNldEF0dHJpYnV0ZShuZXh0LCBBUklBX0xBQkVMLCBuZXh0TGFiZWwpO1xuICAgICAgZW1pdChFVkVOVF9BUlJPV1NfVVBEQVRFRCwgcHJldiwgbmV4dCwgcHJldkluZGV4LCBuZXh0SW5kZXgpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYXJyb3dzOiBhcnJvd3MsXG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3ksXG4gICAgdXBkYXRlOiB1cGRhdGVcbiAgfTtcbn1cblxudmFyIElOVEVSVkFMX0RBVEFfQVRUUklCVVRFID0gREFUQV9BVFRSSUJVVEUgKyBcIi1pbnRlcnZhbFwiO1xuXG5mdW5jdGlvbiBBdXRvcGxheShTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgX0V2ZW50SW50ZXJmYWNlNiA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpLFxuICAgICAgb24gPSBfRXZlbnRJbnRlcmZhY2U2Lm9uLFxuICAgICAgYmluZCA9IF9FdmVudEludGVyZmFjZTYuYmluZCxcbiAgICAgIGVtaXQgPSBfRXZlbnRJbnRlcmZhY2U2LmVtaXQ7XG5cbiAgdmFyIGludGVydmFsID0gUmVxdWVzdEludGVydmFsKG9wdGlvbnMuaW50ZXJ2YWwsIFNwbGlkZTIuZ28uYmluZChTcGxpZGUyLCBcIj5cIiksIG9uQW5pbWF0aW9uRnJhbWUpO1xuICB2YXIgaXNQYXVzZWQgPSBpbnRlcnZhbC5pc1BhdXNlZDtcbiAgdmFyIEVsZW1lbnRzID0gQ29tcG9uZW50czIuRWxlbWVudHMsXG4gICAgICBfQ29tcG9uZW50czIkRWxlbWVudHM0ID0gQ29tcG9uZW50czIuRWxlbWVudHMsXG4gICAgICByb290ID0gX0NvbXBvbmVudHMyJEVsZW1lbnRzNC5yb290LFxuICAgICAgdG9nZ2xlID0gX0NvbXBvbmVudHMyJEVsZW1lbnRzNC50b2dnbGU7XG4gIHZhciBhdXRvcGxheSA9IG9wdGlvbnMuYXV0b3BsYXk7XG4gIHZhciBob3ZlcmVkO1xuICB2YXIgZm9jdXNlZDtcbiAgdmFyIHN0b3BwZWQgPSBhdXRvcGxheSA9PT0gXCJwYXVzZVwiO1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIGlmIChhdXRvcGxheSkge1xuICAgICAgbGlzdGVuKCk7XG4gICAgICB0b2dnbGUgJiYgc2V0QXR0cmlidXRlKHRvZ2dsZSwgQVJJQV9DT05UUk9MUywgRWxlbWVudHMudHJhY2suaWQpO1xuICAgICAgc3RvcHBlZCB8fCBwbGF5KCk7XG4gICAgICB1cGRhdGUoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBsaXN0ZW4oKSB7XG4gICAgaWYgKG9wdGlvbnMucGF1c2VPbkhvdmVyKSB7XG4gICAgICBiaW5kKHJvb3QsIFwibW91c2VlbnRlciBtb3VzZWxlYXZlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGhvdmVyZWQgPSBlLnR5cGUgPT09IFwibW91c2VlbnRlclwiO1xuICAgICAgICBhdXRvVG9nZ2xlKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5wYXVzZU9uRm9jdXMpIHtcbiAgICAgIGJpbmQocm9vdCwgXCJmb2N1c2luIGZvY3Vzb3V0XCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGZvY3VzZWQgPSBlLnR5cGUgPT09IFwiZm9jdXNpblwiO1xuICAgICAgICBhdXRvVG9nZ2xlKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodG9nZ2xlKSB7XG4gICAgICBiaW5kKHRvZ2dsZSwgXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN0b3BwZWQgPyBwbGF5KCkgOiBwYXVzZSh0cnVlKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uKFtFVkVOVF9NT1ZFLCBFVkVOVF9TQ1JPTEwsIEVWRU5UX1JFRlJFU0hdLCBpbnRlcnZhbC5yZXdpbmQpO1xuICAgIG9uKEVWRU5UX01PVkUsIG9uTW92ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIGlmIChpc1BhdXNlZCgpICYmIENvbXBvbmVudHMyLlNsaWRlcy5pc0Vub3VnaCgpKSB7XG4gICAgICBpbnRlcnZhbC5zdGFydCghb3B0aW9ucy5yZXNldFByb2dyZXNzKTtcbiAgICAgIGZvY3VzZWQgPSBob3ZlcmVkID0gc3RvcHBlZCA9IGZhbHNlO1xuICAgICAgdXBkYXRlKCk7XG4gICAgICBlbWl0KEVWRU5UX0FVVE9QTEFZX1BMQVkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdXNlKHN0b3ApIHtcbiAgICBpZiAoc3RvcCA9PT0gdm9pZCAwKSB7XG4gICAgICBzdG9wID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBzdG9wcGVkID0gISFzdG9wO1xuICAgIHVwZGF0ZSgpO1xuXG4gICAgaWYgKCFpc1BhdXNlZCgpKSB7XG4gICAgICBpbnRlcnZhbC5wYXVzZSgpO1xuICAgICAgZW1pdChFVkVOVF9BVVRPUExBWV9QQVVTRSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gYXV0b1RvZ2dsZSgpIHtcbiAgICBpZiAoIXN0b3BwZWQpIHtcbiAgICAgIGhvdmVyZWQgfHwgZm9jdXNlZCA/IHBhdXNlKGZhbHNlKSA6IHBsYXkoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgaWYgKHRvZ2dsZSkge1xuICAgICAgdG9nZ2xlQ2xhc3ModG9nZ2xlLCBDTEFTU19BQ1RJVkUsICFzdG9wcGVkKTtcbiAgICAgIHNldEF0dHJpYnV0ZSh0b2dnbGUsIEFSSUFfTEFCRUwsIG9wdGlvbnMuaTE4bltzdG9wcGVkID8gXCJwbGF5XCIgOiBcInBhdXNlXCJdKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbkFuaW1hdGlvbkZyYW1lKHJhdGUpIHtcbiAgICB2YXIgYmFyID0gRWxlbWVudHMuYmFyO1xuICAgIGJhciAmJiBzdHlsZShiYXIsIFwid2lkdGhcIiwgcmF0ZSAqIDEwMCArIFwiJVwiKTtcbiAgICBlbWl0KEVWRU5UX0FVVE9QTEFZX1BMQVlJTkcsIHJhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Nb3ZlKGluZGV4KSB7XG4gICAgdmFyIFNsaWRlID0gQ29tcG9uZW50czIuU2xpZGVzLmdldEF0KGluZGV4KTtcbiAgICBpbnRlcnZhbC5zZXQoU2xpZGUgJiYgK2dldEF0dHJpYnV0ZShTbGlkZS5zbGlkZSwgSU5URVJWQUxfREFUQV9BVFRSSUJVVEUpIHx8IG9wdGlvbnMuaW50ZXJ2YWwpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb3VudDogbW91bnQsXG4gICAgZGVzdHJveTogaW50ZXJ2YWwuY2FuY2VsLFxuICAgIHBsYXk6IHBsYXksXG4gICAgcGF1c2U6IHBhdXNlLFxuICAgIGlzUGF1c2VkOiBpc1BhdXNlZFxuICB9O1xufVxuXG5mdW5jdGlvbiBDb3ZlcihTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgX0V2ZW50SW50ZXJmYWNlNyA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpLFxuICAgICAgb24gPSBfRXZlbnRJbnRlcmZhY2U3Lm9uO1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIGlmIChvcHRpb25zLmNvdmVyKSB7XG4gICAgICBvbihFVkVOVF9MQVpZTE9BRF9MT0FERUQsIGFwcGx5KHRvZ2dsZSwgdHJ1ZSkpO1xuICAgICAgb24oW0VWRU5UX01PVU5URUQsIEVWRU5UX1VQREFURUQsIEVWRU5UX1JFRlJFU0hdLCBhcHBseShjb3ZlciwgdHJ1ZSkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNvdmVyKGNvdmVyMikge1xuICAgIENvbXBvbmVudHMyLlNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChTbGlkZSkge1xuICAgICAgdmFyIGltZyA9IGNoaWxkKFNsaWRlLmNvbnRhaW5lciB8fCBTbGlkZS5zbGlkZSwgXCJpbWdcIik7XG5cbiAgICAgIGlmIChpbWcgJiYgaW1nLnNyYykge1xuICAgICAgICB0b2dnbGUoY292ZXIyLCBpbWcsIFNsaWRlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvZ2dsZShjb3ZlcjIsIGltZywgU2xpZGUpIHtcbiAgICBTbGlkZS5zdHlsZShcImJhY2tncm91bmRcIiwgY292ZXIyID8gXCJjZW50ZXIvY292ZXIgbm8tcmVwZWF0IHVybChcXFwiXCIgKyBpbWcuc3JjICsgXCJcXFwiKVwiIDogXCJcIiwgdHJ1ZSk7XG4gICAgZGlzcGxheShpbWcsIGNvdmVyMiA/IFwibm9uZVwiIDogXCJcIik7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1vdW50OiBtb3VudCxcbiAgICBkZXN0cm95OiBhcHBseShjb3ZlciwgZmFsc2UpXG4gIH07XG59XG5cbnZhciBCT1VOQ0VfRElGRl9USFJFU0hPTEQgPSAxMDtcbnZhciBCT1VOQ0VfRFVSQVRJT04gPSA2MDA7XG52YXIgRlJJQ1RJT05fRkFDVE9SID0gMC42O1xudmFyIEJBU0VfVkVMT0NJVFkgPSAxLjU7XG52YXIgTUlOX0RVUkFUSU9OID0gODAwO1xuXG5mdW5jdGlvbiBTY3JvbGwoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIF9FdmVudEludGVyZmFjZTggPSBFdmVudEludGVyZmFjZShTcGxpZGUyKSxcbiAgICAgIG9uID0gX0V2ZW50SW50ZXJmYWNlOC5vbixcbiAgICAgIGVtaXQgPSBfRXZlbnRJbnRlcmZhY2U4LmVtaXQ7XG5cbiAgdmFyIHNldCA9IFNwbGlkZTIuc3RhdGUuc2V0O1xuICB2YXIgTW92ZSA9IENvbXBvbmVudHMyLk1vdmU7XG4gIHZhciBnZXRQb3NpdGlvbiA9IE1vdmUuZ2V0UG9zaXRpb24sXG4gICAgICBnZXRMaW1pdCA9IE1vdmUuZ2V0TGltaXQsXG4gICAgICBleGNlZWRlZExpbWl0ID0gTW92ZS5leGNlZWRlZExpbWl0LFxuICAgICAgdHJhbnNsYXRlID0gTW92ZS50cmFuc2xhdGU7XG4gIHZhciBpc1NsaWRlID0gU3BsaWRlMi5pcyhTTElERSk7XG4gIHZhciBpbnRlcnZhbDtcbiAgdmFyIGNhbGxiYWNrO1xuICB2YXIgZnJpY3Rpb24gPSAxO1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIG9uKEVWRU5UX01PVkUsIGNsZWFyKTtcbiAgICBvbihbRVZFTlRfVVBEQVRFRCwgRVZFTlRfUkVGUkVTSF0sIGNhbmNlbCk7XG4gIH1cblxuICBmdW5jdGlvbiBzY3JvbGwoZGVzdGluYXRpb24sIGR1cmF0aW9uLCBzbmFwLCBvblNjcm9sbGVkLCBub0NvbnN0cmFpbikge1xuICAgIHZhciBmcm9tID0gZ2V0UG9zaXRpb24oKTtcbiAgICBjbGVhcigpO1xuXG4gICAgaWYgKHNuYXAgJiYgKCFpc1NsaWRlIHx8ICFleGNlZWRlZExpbWl0KCkpKSB7XG4gICAgICB2YXIgc2l6ZSA9IENvbXBvbmVudHMyLkxheW91dC5zbGlkZXJTaXplKCk7XG4gICAgICB2YXIgb2Zmc2V0ID0gc2lnbihkZXN0aW5hdGlvbikgKiBzaXplICogZmxvb3IoYWJzKGRlc3RpbmF0aW9uKSAvIHNpemUpIHx8IDA7XG4gICAgICBkZXN0aW5hdGlvbiA9IE1vdmUudG9Qb3NpdGlvbihDb21wb25lbnRzMi5Db250cm9sbGVyLnRvRGVzdChkZXN0aW5hdGlvbiAlIHNpemUpKSArIG9mZnNldDtcbiAgICB9XG5cbiAgICB2YXIgbm9EaXN0YW5jZSA9IGFwcHJveGltYXRlbHlFcXVhbChmcm9tLCBkZXN0aW5hdGlvbiwgMSk7XG4gICAgZnJpY3Rpb24gPSAxO1xuICAgIGR1cmF0aW9uID0gbm9EaXN0YW5jZSA/IDAgOiBkdXJhdGlvbiB8fCBtYXgoYWJzKGRlc3RpbmF0aW9uIC0gZnJvbSkgLyBCQVNFX1ZFTE9DSVRZLCBNSU5fRFVSQVRJT04pO1xuICAgIGNhbGxiYWNrID0gb25TY3JvbGxlZDtcbiAgICBpbnRlcnZhbCA9IFJlcXVlc3RJbnRlcnZhbChkdXJhdGlvbiwgb25FbmQsIGFwcGx5KHVwZGF0ZSwgZnJvbSwgZGVzdGluYXRpb24sIG5vQ29uc3RyYWluKSwgMSk7XG4gICAgc2V0KFNDUk9MTElORyk7XG4gICAgZW1pdChFVkVOVF9TQ1JPTEwpO1xuICAgIGludGVydmFsLnN0YXJ0KCk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkVuZCgpIHtcbiAgICBzZXQoSURMRSk7XG4gICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKTtcbiAgICBlbWl0KEVWRU5UX1NDUk9MTEVEKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZShmcm9tLCB0bywgbm9Db25zdHJhaW4sIHJhdGUpIHtcbiAgICB2YXIgcG9zaXRpb24gPSBnZXRQb3NpdGlvbigpO1xuICAgIHZhciB0YXJnZXQgPSBmcm9tICsgKHRvIC0gZnJvbSkgKiBlYXNpbmcocmF0ZSk7XG4gICAgdmFyIGRpZmYgPSAodGFyZ2V0IC0gcG9zaXRpb24pICogZnJpY3Rpb247XG4gICAgdHJhbnNsYXRlKHBvc2l0aW9uICsgZGlmZik7XG5cbiAgICBpZiAoaXNTbGlkZSAmJiAhbm9Db25zdHJhaW4gJiYgZXhjZWVkZWRMaW1pdCgpKSB7XG4gICAgICBmcmljdGlvbiAqPSBGUklDVElPTl9GQUNUT1I7XG5cbiAgICAgIGlmIChhYnMoZGlmZikgPCBCT1VOQ0VfRElGRl9USFJFU0hPTEQpIHtcbiAgICAgICAgc2Nyb2xsKGdldExpbWl0KGV4Y2VlZGVkTGltaXQodHJ1ZSkpLCBCT1VOQ0VfRFVSQVRJT04sIGZhbHNlLCBjYWxsYmFjaywgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgaWYgKGludGVydmFsKSB7XG4gICAgICBpbnRlcnZhbC5jYW5jZWwoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgaWYgKGludGVydmFsICYmICFpbnRlcnZhbC5pc1BhdXNlZCgpKSB7XG4gICAgICBjbGVhcigpO1xuICAgICAgb25FbmQoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBlYXNpbmcodCkge1xuICAgIHZhciBlYXNpbmdGdW5jID0gb3B0aW9ucy5lYXNpbmdGdW5jO1xuICAgIHJldHVybiBlYXNpbmdGdW5jID8gZWFzaW5nRnVuYyh0KSA6IDEgLSBNYXRoLnBvdygxIC0gdCwgNCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1vdW50OiBtb3VudCxcbiAgICBkZXN0cm95OiBjbGVhcixcbiAgICBzY3JvbGw6IHNjcm9sbCxcbiAgICBjYW5jZWw6IGNhbmNlbFxuICB9O1xufVxuXG52YXIgU0NST0xMX0xJU1RFTkVSX09QVElPTlMgPSB7XG4gIHBhc3NpdmU6IGZhbHNlLFxuICBjYXB0dXJlOiB0cnVlXG59O1xuXG5mdW5jdGlvbiBEcmFnKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBfRXZlbnRJbnRlcmZhY2U5ID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMiksXG4gICAgICBvbiA9IF9FdmVudEludGVyZmFjZTkub24sXG4gICAgICBlbWl0ID0gX0V2ZW50SW50ZXJmYWNlOS5lbWl0LFxuICAgICAgYmluZCA9IF9FdmVudEludGVyZmFjZTkuYmluZCxcbiAgICAgIHVuYmluZCA9IF9FdmVudEludGVyZmFjZTkudW5iaW5kO1xuXG4gIHZhciBzdGF0ZSA9IFNwbGlkZTIuc3RhdGU7XG4gIHZhciBNb3ZlID0gQ29tcG9uZW50czIuTW92ZSxcbiAgICAgIFNjcm9sbCA9IENvbXBvbmVudHMyLlNjcm9sbCxcbiAgICAgIENvbnRyb2xsZXIgPSBDb21wb25lbnRzMi5Db250cm9sbGVyLFxuICAgICAgdHJhY2sgPSBDb21wb25lbnRzMi5FbGVtZW50cy50cmFjayxcbiAgICAgIHJlZHVjZSA9IENvbXBvbmVudHMyLk1lZGlhLnJlZHVjZTtcbiAgdmFyIF9Db21wb25lbnRzMiREaXJlY3RpbzIgPSBDb21wb25lbnRzMi5EaXJlY3Rpb24sXG4gICAgICByZXNvbHZlID0gX0NvbXBvbmVudHMyJERpcmVjdGlvMi5yZXNvbHZlLFxuICAgICAgb3JpZW50ID0gX0NvbXBvbmVudHMyJERpcmVjdGlvMi5vcmllbnQ7XG4gIHZhciBnZXRQb3NpdGlvbiA9IE1vdmUuZ2V0UG9zaXRpb24sXG4gICAgICBleGNlZWRlZExpbWl0ID0gTW92ZS5leGNlZWRlZExpbWl0O1xuICB2YXIgYmFzZVBvc2l0aW9uO1xuICB2YXIgYmFzZUV2ZW50O1xuICB2YXIgcHJldkJhc2VFdmVudDtcbiAgdmFyIGlzRnJlZTtcbiAgdmFyIGRyYWdnaW5nO1xuICB2YXIgZXhjZWVkZWQgPSBmYWxzZTtcbiAgdmFyIGNsaWNrUHJldmVudGVkO1xuICB2YXIgZGlzYWJsZWQ7XG4gIHZhciB0YXJnZXQ7XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgYmluZCh0cmFjaywgUE9JTlRFUl9NT1ZFX0VWRU5UUywgbm9vcCwgU0NST0xMX0xJU1RFTkVSX09QVElPTlMpO1xuICAgIGJpbmQodHJhY2ssIFBPSU5URVJfVVBfRVZFTlRTLCBub29wLCBTQ1JPTExfTElTVEVORVJfT1BUSU9OUyk7XG4gICAgYmluZCh0cmFjaywgUE9JTlRFUl9ET1dOX0VWRU5UUywgb25Qb2ludGVyRG93biwgU0NST0xMX0xJU1RFTkVSX09QVElPTlMpO1xuICAgIGJpbmQodHJhY2ssIFwiY2xpY2tcIiwgb25DbGljaywge1xuICAgICAgY2FwdHVyZTogdHJ1ZVxuICAgIH0pO1xuICAgIGJpbmQodHJhY2ssIFwiZHJhZ3N0YXJ0XCIsIHByZXZlbnQpO1xuICAgIG9uKFtFVkVOVF9NT1VOVEVELCBFVkVOVF9VUERBVEVEXSwgaW5pdCk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBkcmFnID0gb3B0aW9ucy5kcmFnO1xuICAgIGRpc2FibGUoIWRyYWcpO1xuICAgIGlzRnJlZSA9IGRyYWcgPT09IFwiZnJlZVwiO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Qb2ludGVyRG93bihlKSB7XG4gICAgY2xpY2tQcmV2ZW50ZWQgPSBmYWxzZTtcblxuICAgIGlmICghZGlzYWJsZWQpIHtcbiAgICAgIHZhciBpc1RvdWNoID0gaXNUb3VjaEV2ZW50KGUpO1xuXG4gICAgICBpZiAoaXNEcmFnZ2FibGUoZS50YXJnZXQpICYmIChpc1RvdWNoIHx8ICFlLmJ1dHRvbikpIHtcbiAgICAgICAgaWYgKCFDb250cm9sbGVyLmlzQnVzeSgpKSB7XG4gICAgICAgICAgdGFyZ2V0ID0gaXNUb3VjaCA/IHRyYWNrIDogd2luZG93O1xuICAgICAgICAgIGRyYWdnaW5nID0gc3RhdGUuaXMoW01PVklORywgU0NST0xMSU5HXSk7XG4gICAgICAgICAgcHJldkJhc2VFdmVudCA9IG51bGw7XG4gICAgICAgICAgYmluZCh0YXJnZXQsIFBPSU5URVJfTU9WRV9FVkVOVFMsIG9uUG9pbnRlck1vdmUsIFNDUk9MTF9MSVNURU5FUl9PUFRJT05TKTtcbiAgICAgICAgICBiaW5kKHRhcmdldCwgUE9JTlRFUl9VUF9FVkVOVFMsIG9uUG9pbnRlclVwLCBTQ1JPTExfTElTVEVORVJfT1BUSU9OUyk7XG4gICAgICAgICAgTW92ZS5jYW5jZWwoKTtcbiAgICAgICAgICBTY3JvbGwuY2FuY2VsKCk7XG4gICAgICAgICAgc2F2ZShlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcmV2ZW50KGUsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25Qb2ludGVyTW92ZShlKSB7XG4gICAgaWYgKCFzdGF0ZS5pcyhEUkFHR0lORykpIHtcbiAgICAgIHN0YXRlLnNldChEUkFHR0lORyk7XG4gICAgICBlbWl0KEVWRU5UX0RSQUcpO1xuICAgIH1cblxuICAgIGlmIChlLmNhbmNlbGFibGUpIHtcbiAgICAgIGlmIChkcmFnZ2luZykge1xuICAgICAgICBNb3ZlLnRyYW5zbGF0ZShiYXNlUG9zaXRpb24gKyBjb25zdHJhaW4oZGlmZkNvb3JkKGUpKSk7XG4gICAgICAgIHZhciBleHBpcmVkID0gZGlmZlRpbWUoZSkgPiBMT0dfSU5URVJWQUw7XG4gICAgICAgIHZhciBoYXNFeGNlZWRlZCA9IGV4Y2VlZGVkICE9PSAoZXhjZWVkZWQgPSBleGNlZWRlZExpbWl0KCkpO1xuXG4gICAgICAgIGlmIChleHBpcmVkIHx8IGhhc0V4Y2VlZGVkKSB7XG4gICAgICAgICAgc2F2ZShlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsaWNrUHJldmVudGVkID0gdHJ1ZTtcbiAgICAgICAgZW1pdChFVkVOVF9EUkFHR0lORyk7XG4gICAgICAgIHByZXZlbnQoZSk7XG4gICAgICB9IGVsc2UgaWYgKGlzU2xpZGVyRGlyZWN0aW9uKGUpKSB7XG4gICAgICAgIGRyYWdnaW5nID0gc2hvdWxkU3RhcnQoZSk7XG4gICAgICAgIHByZXZlbnQoZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25Qb2ludGVyVXAoZSkge1xuICAgIGlmIChzdGF0ZS5pcyhEUkFHR0lORykpIHtcbiAgICAgIHN0YXRlLnNldChJRExFKTtcbiAgICAgIGVtaXQoRVZFTlRfRFJBR0dFRCk7XG4gICAgfVxuXG4gICAgaWYgKGRyYWdnaW5nKSB7XG4gICAgICBtb3ZlKGUpO1xuICAgICAgcHJldmVudChlKTtcbiAgICB9XG5cbiAgICB1bmJpbmQodGFyZ2V0LCBQT0lOVEVSX01PVkVfRVZFTlRTLCBvblBvaW50ZXJNb3ZlKTtcbiAgICB1bmJpbmQodGFyZ2V0LCBQT0lOVEVSX1VQX0VWRU5UUywgb25Qb2ludGVyVXApO1xuICAgIGRyYWdnaW5nID0gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICBpZiAoIWRpc2FibGVkICYmIGNsaWNrUHJldmVudGVkKSB7XG4gICAgICBwcmV2ZW50KGUsIHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNhdmUoZSkge1xuICAgIHByZXZCYXNlRXZlbnQgPSBiYXNlRXZlbnQ7XG4gICAgYmFzZUV2ZW50ID0gZTtcbiAgICBiYXNlUG9zaXRpb24gPSBnZXRQb3NpdGlvbigpO1xuICB9XG5cbiAgZnVuY3Rpb24gbW92ZShlKSB7XG4gICAgdmFyIHZlbG9jaXR5ID0gY29tcHV0ZVZlbG9jaXR5KGUpO1xuICAgIHZhciBkZXN0aW5hdGlvbiA9IGNvbXB1dGVEZXN0aW5hdGlvbih2ZWxvY2l0eSk7XG4gICAgdmFyIHJld2luZCA9IG9wdGlvbnMucmV3aW5kICYmIG9wdGlvbnMucmV3aW5kQnlEcmFnO1xuICAgIHJlZHVjZShmYWxzZSk7XG5cbiAgICBpZiAoaXNGcmVlKSB7XG4gICAgICBDb250cm9sbGVyLnNjcm9sbChkZXN0aW5hdGlvbiwgMCwgb3B0aW9ucy5zbmFwKTtcbiAgICB9IGVsc2UgaWYgKFNwbGlkZTIuaXMoRkFERSkpIHtcbiAgICAgIENvbnRyb2xsZXIuZ28ob3JpZW50KHNpZ24odmVsb2NpdHkpKSA8IDAgPyByZXdpbmQgPyBcIjxcIiA6IFwiLVwiIDogcmV3aW5kID8gXCI+XCIgOiBcIitcIik7XG4gICAgfSBlbHNlIGlmIChTcGxpZGUyLmlzKFNMSURFKSAmJiBleGNlZWRlZCAmJiByZXdpbmQpIHtcbiAgICAgIENvbnRyb2xsZXIuZ28oZXhjZWVkZWRMaW1pdCh0cnVlKSA/IFwiPlwiIDogXCI8XCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBDb250cm9sbGVyLmdvKENvbnRyb2xsZXIudG9EZXN0KGRlc3RpbmF0aW9uKSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcmVkdWNlKHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvdWxkU3RhcnQoZSkge1xuICAgIHZhciB0aHJlc2hvbGRzID0gb3B0aW9ucy5kcmFnTWluVGhyZXNob2xkO1xuICAgIHZhciBpc09iaiA9IGlzT2JqZWN0KHRocmVzaG9sZHMpO1xuICAgIHZhciBtb3VzZSA9IGlzT2JqICYmIHRocmVzaG9sZHMubW91c2UgfHwgMDtcbiAgICB2YXIgdG91Y2ggPSAoaXNPYmogPyB0aHJlc2hvbGRzLnRvdWNoIDogK3RocmVzaG9sZHMpIHx8IDEwO1xuICAgIHJldHVybiBhYnMoZGlmZkNvb3JkKGUpKSA+IChpc1RvdWNoRXZlbnQoZSkgPyB0b3VjaCA6IG1vdXNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzU2xpZGVyRGlyZWN0aW9uKGUpIHtcbiAgICByZXR1cm4gYWJzKGRpZmZDb29yZChlKSkgPiBhYnMoZGlmZkNvb3JkKGUsIHRydWUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbXB1dGVWZWxvY2l0eShlKSB7XG4gICAgaWYgKFNwbGlkZTIuaXMoTE9PUCkgfHwgIWV4Y2VlZGVkKSB7XG4gICAgICB2YXIgdGltZSA9IGRpZmZUaW1lKGUpO1xuXG4gICAgICBpZiAodGltZSAmJiB0aW1lIDwgTE9HX0lOVEVSVkFMKSB7XG4gICAgICAgIHJldHVybiBkaWZmQ29vcmQoZSkgLyB0aW1lO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgZnVuY3Rpb24gY29tcHV0ZURlc3RpbmF0aW9uKHZlbG9jaXR5KSB7XG4gICAgcmV0dXJuIGdldFBvc2l0aW9uKCkgKyBzaWduKHZlbG9jaXR5KSAqIG1pbihhYnModmVsb2NpdHkpICogKG9wdGlvbnMuZmxpY2tQb3dlciB8fCA2MDApLCBpc0ZyZWUgPyBJbmZpbml0eSA6IENvbXBvbmVudHMyLkxheW91dC5saXN0U2l6ZSgpICogKG9wdGlvbnMuZmxpY2tNYXhQYWdlcyB8fCAxKSk7XG4gIH1cblxuICBmdW5jdGlvbiBkaWZmQ29vcmQoZSwgb3J0aG9nb25hbCkge1xuICAgIHJldHVybiBjb29yZE9mKGUsIG9ydGhvZ29uYWwpIC0gY29vcmRPZihnZXRCYXNlRXZlbnQoZSksIG9ydGhvZ29uYWwpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlmZlRpbWUoZSkge1xuICAgIHJldHVybiB0aW1lT2YoZSkgLSB0aW1lT2YoZ2V0QmFzZUV2ZW50KGUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEJhc2VFdmVudChlKSB7XG4gICAgcmV0dXJuIGJhc2VFdmVudCA9PT0gZSAmJiBwcmV2QmFzZUV2ZW50IHx8IGJhc2VFdmVudDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvb3JkT2YoZSwgb3J0aG9nb25hbCkge1xuICAgIHJldHVybiAoaXNUb3VjaEV2ZW50KGUpID8gZS5jaGFuZ2VkVG91Y2hlc1swXSA6IGUpW1wicGFnZVwiICsgcmVzb2x2ZShvcnRob2dvbmFsID8gXCJZXCIgOiBcIlhcIildO1xuICB9XG5cbiAgZnVuY3Rpb24gY29uc3RyYWluKGRpZmYpIHtcbiAgICByZXR1cm4gZGlmZiAvIChleGNlZWRlZCAmJiBTcGxpZGUyLmlzKFNMSURFKSA/IEZSSUNUSU9OIDogMSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc0RyYWdnYWJsZSh0YXJnZXQyKSB7XG4gICAgdmFyIG5vRHJhZyA9IG9wdGlvbnMubm9EcmFnO1xuICAgIHJldHVybiAhbWF0Y2hlcyh0YXJnZXQyLCBcIi5cIiArIENMQVNTX1BBR0lOQVRJT05fUEFHRSArIFwiLCAuXCIgKyBDTEFTU19BUlJPVykgJiYgKCFub0RyYWcgfHwgIW1hdGNoZXModGFyZ2V0Miwgbm9EcmFnKSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc1RvdWNoRXZlbnQoZSkge1xuICAgIHJldHVybiB0eXBlb2YgVG91Y2hFdmVudCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBlIGluc3RhbmNlb2YgVG91Y2hFdmVudDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzRHJhZ2dpbmcoKSB7XG4gICAgcmV0dXJuIGRyYWdnaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlzYWJsZSh2YWx1ZSkge1xuICAgIGRpc2FibGVkID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1vdW50OiBtb3VudCxcbiAgICBkaXNhYmxlOiBkaXNhYmxlLFxuICAgIGlzRHJhZ2dpbmc6IGlzRHJhZ2dpbmdcbiAgfTtcbn1cblxudmFyIE5PUk1BTElaQVRJT05fTUFQID0ge1xuICBTcGFjZWJhcjogXCIgXCIsXG4gIFJpZ2h0OiBBUlJPV19SSUdIVCxcbiAgTGVmdDogQVJST1dfTEVGVCxcbiAgVXA6IEFSUk9XX1VQLFxuICBEb3duOiBBUlJPV19ET1dOXG59O1xuXG5mdW5jdGlvbiBub3JtYWxpemVLZXkoa2V5KSB7XG4gIGtleSA9IGlzU3RyaW5nKGtleSkgPyBrZXkgOiBrZXkua2V5O1xuICByZXR1cm4gTk9STUFMSVpBVElPTl9NQVBba2V5XSB8fCBrZXk7XG59XG5cbnZhciBLRVlCT0FSRF9FVkVOVCA9IFwia2V5ZG93blwiO1xuXG5mdW5jdGlvbiBLZXlib2FyZChTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgX0V2ZW50SW50ZXJmYWNlMTAgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKSxcbiAgICAgIG9uID0gX0V2ZW50SW50ZXJmYWNlMTAub24sXG4gICAgICBiaW5kID0gX0V2ZW50SW50ZXJmYWNlMTAuYmluZCxcbiAgICAgIHVuYmluZCA9IF9FdmVudEludGVyZmFjZTEwLnVuYmluZDtcblxuICB2YXIgcm9vdCA9IFNwbGlkZTIucm9vdDtcbiAgdmFyIHJlc29sdmUgPSBDb21wb25lbnRzMi5EaXJlY3Rpb24ucmVzb2x2ZTtcbiAgdmFyIHRhcmdldDtcbiAgdmFyIGRpc2FibGVkO1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIGluaXQoKTtcbiAgICBvbihFVkVOVF9VUERBVEVELCBkZXN0cm95KTtcbiAgICBvbihFVkVOVF9VUERBVEVELCBpbml0KTtcbiAgICBvbihFVkVOVF9NT1ZFLCBvbk1vdmUpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIga2V5Ym9hcmQgPSBvcHRpb25zLmtleWJvYXJkO1xuXG4gICAgaWYgKGtleWJvYXJkKSB7XG4gICAgICB0YXJnZXQgPSBrZXlib2FyZCA9PT0gXCJnbG9iYWxcIiA/IHdpbmRvdyA6IHJvb3Q7XG4gICAgICBiaW5kKHRhcmdldCwgS0VZQk9BUkRfRVZFTlQsIG9uS2V5ZG93bik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICB1bmJpbmQodGFyZ2V0LCBLRVlCT0FSRF9FVkVOVCk7XG4gIH1cblxuICBmdW5jdGlvbiBkaXNhYmxlKHZhbHVlKSB7XG4gICAgZGlzYWJsZWQgPSB2YWx1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uTW92ZSgpIHtcbiAgICB2YXIgX2Rpc2FibGVkID0gZGlzYWJsZWQ7XG4gICAgZGlzYWJsZWQgPSB0cnVlO1xuICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgIGRpc2FibGVkID0gX2Rpc2FibGVkO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb25LZXlkb3duKGUpIHtcbiAgICBpZiAoIWRpc2FibGVkKSB7XG4gICAgICB2YXIga2V5ID0gbm9ybWFsaXplS2V5KGUpO1xuXG4gICAgICBpZiAoa2V5ID09PSByZXNvbHZlKEFSUk9XX0xFRlQpKSB7XG4gICAgICAgIFNwbGlkZTIuZ28oXCI8XCIpO1xuICAgICAgfSBlbHNlIGlmIChrZXkgPT09IHJlc29sdmUoQVJST1dfUklHSFQpKSB7XG4gICAgICAgIFNwbGlkZTIuZ28oXCI+XCIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3ksXG4gICAgZGlzYWJsZTogZGlzYWJsZVxuICB9O1xufVxuXG52YXIgU1JDX0RBVEFfQVRUUklCVVRFID0gREFUQV9BVFRSSUJVVEUgKyBcIi1sYXp5XCI7XG52YXIgU1JDU0VUX0RBVEFfQVRUUklCVVRFID0gU1JDX0RBVEFfQVRUUklCVVRFICsgXCItc3Jjc2V0XCI7XG52YXIgSU1BR0VfU0VMRUNUT1IgPSBcIltcIiArIFNSQ19EQVRBX0FUVFJJQlVURSArIFwiXSwgW1wiICsgU1JDU0VUX0RBVEFfQVRUUklCVVRFICsgXCJdXCI7XG5cbmZ1bmN0aW9uIExhenlMb2FkKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBfRXZlbnRJbnRlcmZhY2UxMSA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpLFxuICAgICAgb24gPSBfRXZlbnRJbnRlcmZhY2UxMS5vbixcbiAgICAgIG9mZiA9IF9FdmVudEludGVyZmFjZTExLm9mZixcbiAgICAgIGJpbmQgPSBfRXZlbnRJbnRlcmZhY2UxMS5iaW5kLFxuICAgICAgZW1pdCA9IF9FdmVudEludGVyZmFjZTExLmVtaXQ7XG5cbiAgdmFyIGlzU2VxdWVudGlhbCA9IG9wdGlvbnMubGF6eUxvYWQgPT09IFwic2VxdWVudGlhbFwiO1xuICB2YXIgZXZlbnRzID0gW0VWRU5UX01PVkVELCBFVkVOVF9TQ1JPTExFRF07XG4gIHZhciBlbnRyaWVzID0gW107XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgaWYgKG9wdGlvbnMubGF6eUxvYWQpIHtcbiAgICAgIGluaXQoKTtcbiAgICAgIG9uKEVWRU5UX1JFRlJFU0gsIGluaXQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgZW1wdHkoZW50cmllcyk7XG4gICAgcmVnaXN0ZXIoKTtcblxuICAgIGlmIChpc1NlcXVlbnRpYWwpIHtcbiAgICAgIGxvYWROZXh0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9mZihldmVudHMpO1xuICAgICAgb24oZXZlbnRzLCBjaGVjayk7XG4gICAgICBjaGVjaygpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyKCkge1xuICAgIENvbXBvbmVudHMyLlNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChTbGlkZSkge1xuICAgICAgcXVlcnlBbGwoU2xpZGUuc2xpZGUsIElNQUdFX1NFTEVDVE9SKS5mb3JFYWNoKGZ1bmN0aW9uIChpbWcpIHtcbiAgICAgICAgdmFyIHNyYyA9IGdldEF0dHJpYnV0ZShpbWcsIFNSQ19EQVRBX0FUVFJJQlVURSk7XG4gICAgICAgIHZhciBzcmNzZXQgPSBnZXRBdHRyaWJ1dGUoaW1nLCBTUkNTRVRfREFUQV9BVFRSSUJVVEUpO1xuXG4gICAgICAgIGlmIChzcmMgIT09IGltZy5zcmMgfHwgc3Jjc2V0ICE9PSBpbWcuc3Jjc2V0KSB7XG4gICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IG9wdGlvbnMuY2xhc3Nlcy5zcGlubmVyO1xuICAgICAgICAgIHZhciBwYXJlbnQgPSBpbWcucGFyZW50RWxlbWVudDtcbiAgICAgICAgICB2YXIgc3Bpbm5lciA9IGNoaWxkKHBhcmVudCwgXCIuXCIgKyBjbGFzc05hbWUpIHx8IGNyZWF0ZShcInNwYW5cIiwgY2xhc3NOYW1lLCBwYXJlbnQpO1xuICAgICAgICAgIGVudHJpZXMucHVzaChbaW1nLCBTbGlkZSwgc3Bpbm5lcl0pO1xuICAgICAgICAgIGltZy5zcmMgfHwgZGlzcGxheShpbWcsIFwibm9uZVwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBjaGVjaygpIHtcbiAgICBlbnRyaWVzID0gZW50cmllcy5maWx0ZXIoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIHZhciBkaXN0YW5jZSA9IG9wdGlvbnMucGVyUGFnZSAqICgob3B0aW9ucy5wcmVsb2FkUGFnZXMgfHwgMSkgKyAxKSAtIDE7XG4gICAgICByZXR1cm4gZGF0YVsxXS5pc1dpdGhpbihTcGxpZGUyLmluZGV4LCBkaXN0YW5jZSkgPyBsb2FkKGRhdGEpIDogdHJ1ZTtcbiAgICB9KTtcbiAgICBlbnRyaWVzLmxlbmd0aCB8fCBvZmYoZXZlbnRzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvYWQoZGF0YSkge1xuICAgIHZhciBpbWcgPSBkYXRhWzBdO1xuICAgIGFkZENsYXNzKGRhdGFbMV0uc2xpZGUsIENMQVNTX0xPQURJTkcpO1xuICAgIGJpbmQoaW1nLCBcImxvYWQgZXJyb3JcIiwgYXBwbHkob25Mb2FkLCBkYXRhKSk7XG4gICAgc2V0QXR0cmlidXRlKGltZywgXCJzcmNcIiwgZ2V0QXR0cmlidXRlKGltZywgU1JDX0RBVEFfQVRUUklCVVRFKSk7XG4gICAgc2V0QXR0cmlidXRlKGltZywgXCJzcmNzZXRcIiwgZ2V0QXR0cmlidXRlKGltZywgU1JDU0VUX0RBVEFfQVRUUklCVVRFKSk7XG4gICAgcmVtb3ZlQXR0cmlidXRlKGltZywgU1JDX0RBVEFfQVRUUklCVVRFKTtcbiAgICByZW1vdmVBdHRyaWJ1dGUoaW1nLCBTUkNTRVRfREFUQV9BVFRSSUJVVEUpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Mb2FkKGRhdGEsIGUpIHtcbiAgICB2YXIgaW1nID0gZGF0YVswXSxcbiAgICAgICAgU2xpZGUgPSBkYXRhWzFdO1xuICAgIHJlbW92ZUNsYXNzKFNsaWRlLnNsaWRlLCBDTEFTU19MT0FESU5HKTtcblxuICAgIGlmIChlLnR5cGUgIT09IFwiZXJyb3JcIikge1xuICAgICAgcmVtb3ZlKGRhdGFbMl0pO1xuICAgICAgZGlzcGxheShpbWcsIFwiXCIpO1xuICAgICAgZW1pdChFVkVOVF9MQVpZTE9BRF9MT0FERUQsIGltZywgU2xpZGUpO1xuICAgICAgZW1pdChFVkVOVF9SRVNJWkUpO1xuICAgIH1cblxuICAgIGlzU2VxdWVudGlhbCAmJiBsb2FkTmV4dCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gbG9hZE5leHQoKSB7XG4gICAgZW50cmllcy5sZW5ndGggJiYgbG9hZChlbnRyaWVzLnNoaWZ0KCkpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb3VudDogbW91bnQsXG4gICAgZGVzdHJveTogYXBwbHkoZW1wdHksIGVudHJpZXMpLFxuICAgIGNoZWNrOiBjaGVja1xuICB9O1xufVxuXG5mdW5jdGlvbiBQYWdpbmF0aW9uKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBldmVudCA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpO1xuICB2YXIgb24gPSBldmVudC5vbixcbiAgICAgIGVtaXQgPSBldmVudC5lbWl0LFxuICAgICAgYmluZCA9IGV2ZW50LmJpbmQ7XG4gIHZhciBTbGlkZXMgPSBDb21wb25lbnRzMi5TbGlkZXMsXG4gICAgICBFbGVtZW50cyA9IENvbXBvbmVudHMyLkVsZW1lbnRzLFxuICAgICAgQ29udHJvbGxlciA9IENvbXBvbmVudHMyLkNvbnRyb2xsZXI7XG4gIHZhciBoYXNGb2N1cyA9IENvbnRyb2xsZXIuaGFzRm9jdXMsXG4gICAgICBnZXRJbmRleCA9IENvbnRyb2xsZXIuZ2V0SW5kZXgsXG4gICAgICBnbyA9IENvbnRyb2xsZXIuZ287XG4gIHZhciByZXNvbHZlID0gQ29tcG9uZW50czIuRGlyZWN0aW9uLnJlc29sdmU7XG4gIHZhciBwbGFjZWhvbGRlciA9IEVsZW1lbnRzLnBhZ2luYXRpb247XG4gIHZhciBpdGVtcyA9IFtdO1xuICB2YXIgbGlzdDtcbiAgdmFyIHBhZ2luYXRpb25DbGFzc2VzO1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIGRlc3Ryb3koKTtcbiAgICBvbihbRVZFTlRfVVBEQVRFRCwgRVZFTlRfUkVGUkVTSCwgRVZFTlRfRU5EX0lOREVYX0NIQU5HRURdLCBtb3VudCk7XG4gICAgdmFyIGVuYWJsZWQgPSBvcHRpb25zLnBhZ2luYXRpb247XG4gICAgcGxhY2Vob2xkZXIgJiYgZGlzcGxheShwbGFjZWhvbGRlciwgZW5hYmxlZCA/IFwiXCIgOiBcIm5vbmVcIik7XG5cbiAgICBpZiAoZW5hYmxlZCkge1xuICAgICAgb24oW0VWRU5UX01PVkUsIEVWRU5UX1NDUk9MTCwgRVZFTlRfU0NST0xMRURdLCB1cGRhdGUpO1xuICAgICAgY3JlYXRlUGFnaW5hdGlvbigpO1xuICAgICAgdXBkYXRlKCk7XG4gICAgICBlbWl0KEVWRU5UX1BBR0lOQVRJT05fTU9VTlRFRCwge1xuICAgICAgICBsaXN0OiBsaXN0LFxuICAgICAgICBpdGVtczogaXRlbXNcbiAgICAgIH0sIGdldEF0KFNwbGlkZTIuaW5kZXgpKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgIGlmIChsaXN0KSB7XG4gICAgICByZW1vdmUocGxhY2Vob2xkZXIgPyBzbGljZShsaXN0LmNoaWxkcmVuKSA6IGxpc3QpO1xuICAgICAgcmVtb3ZlQ2xhc3MobGlzdCwgcGFnaW5hdGlvbkNsYXNzZXMpO1xuICAgICAgZW1wdHkoaXRlbXMpO1xuICAgICAgbGlzdCA9IG51bGw7XG4gICAgfVxuXG4gICAgZXZlbnQuZGVzdHJveSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlUGFnaW5hdGlvbigpIHtcbiAgICB2YXIgbGVuZ3RoID0gU3BsaWRlMi5sZW5ndGg7XG4gICAgdmFyIGNsYXNzZXMgPSBvcHRpb25zLmNsYXNzZXMsXG4gICAgICAgIGkxOG4gPSBvcHRpb25zLmkxOG4sXG4gICAgICAgIHBlclBhZ2UgPSBvcHRpb25zLnBlclBhZ2U7XG4gICAgdmFyIG1heCA9IGhhc0ZvY3VzKCkgPyBDb250cm9sbGVyLmdldEVuZCgpICsgMSA6IGNlaWwobGVuZ3RoIC8gcGVyUGFnZSk7XG4gICAgbGlzdCA9IHBsYWNlaG9sZGVyIHx8IGNyZWF0ZShcInVsXCIsIGNsYXNzZXMucGFnaW5hdGlvbiwgRWxlbWVudHMudHJhY2sucGFyZW50RWxlbWVudCk7XG4gICAgYWRkQ2xhc3MobGlzdCwgcGFnaW5hdGlvbkNsYXNzZXMgPSBDTEFTU19QQUdJTkFUSU9OICsgXCItLVwiICsgZ2V0RGlyZWN0aW9uKCkpO1xuICAgIHNldEF0dHJpYnV0ZShsaXN0LCBST0xFLCBcInRhYmxpc3RcIik7XG4gICAgc2V0QXR0cmlidXRlKGxpc3QsIEFSSUFfTEFCRUwsIGkxOG4uc2VsZWN0KTtcbiAgICBzZXRBdHRyaWJ1dGUobGlzdCwgQVJJQV9PUklFTlRBVElPTiwgZ2V0RGlyZWN0aW9uKCkgPT09IFRUQiA/IFwidmVydGljYWxcIiA6IFwiXCIpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykge1xuICAgICAgdmFyIGxpID0gY3JlYXRlKFwibGlcIiwgbnVsbCwgbGlzdCk7XG4gICAgICB2YXIgYnV0dG9uID0gY3JlYXRlKFwiYnV0dG9uXCIsIHtcbiAgICAgICAgY2xhc3M6IGNsYXNzZXMucGFnZSxcbiAgICAgICAgdHlwZTogXCJidXR0b25cIlxuICAgICAgfSwgbGkpO1xuICAgICAgdmFyIGNvbnRyb2xzID0gU2xpZGVzLmdldEluKGkpLm1hcChmdW5jdGlvbiAoU2xpZGUpIHtcbiAgICAgICAgcmV0dXJuIFNsaWRlLnNsaWRlLmlkO1xuICAgICAgfSk7XG4gICAgICB2YXIgdGV4dCA9ICFoYXNGb2N1cygpICYmIHBlclBhZ2UgPiAxID8gaTE4bi5wYWdlWCA6IGkxOG4uc2xpZGVYO1xuICAgICAgYmluZChidXR0b24sIFwiY2xpY2tcIiwgYXBwbHkob25DbGljaywgaSkpO1xuXG4gICAgICBpZiAob3B0aW9ucy5wYWdpbmF0aW9uS2V5Ym9hcmQpIHtcbiAgICAgICAgYmluZChidXR0b24sIFwia2V5ZG93blwiLCBhcHBseShvbktleWRvd24sIGkpKTtcbiAgICAgIH1cblxuICAgICAgc2V0QXR0cmlidXRlKGxpLCBST0xFLCBcInByZXNlbnRhdGlvblwiKTtcbiAgICAgIHNldEF0dHJpYnV0ZShidXR0b24sIFJPTEUsIFwidGFiXCIpO1xuICAgICAgc2V0QXR0cmlidXRlKGJ1dHRvbiwgQVJJQV9DT05UUk9MUywgY29udHJvbHMuam9pbihcIiBcIikpO1xuICAgICAgc2V0QXR0cmlidXRlKGJ1dHRvbiwgQVJJQV9MQUJFTCwgZm9ybWF0KHRleHQsIGkgKyAxKSk7XG4gICAgICBzZXRBdHRyaWJ1dGUoYnV0dG9uLCBUQUJfSU5ERVgsIC0xKTtcbiAgICAgIGl0ZW1zLnB1c2goe1xuICAgICAgICBsaTogbGksXG4gICAgICAgIGJ1dHRvbjogYnV0dG9uLFxuICAgICAgICBwYWdlOiBpXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbkNsaWNrKHBhZ2UpIHtcbiAgICBnbyhcIj5cIiArIHBhZ2UsIHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25LZXlkb3duKHBhZ2UsIGUpIHtcbiAgICB2YXIgbGVuZ3RoID0gaXRlbXMubGVuZ3RoO1xuICAgIHZhciBrZXkgPSBub3JtYWxpemVLZXkoZSk7XG4gICAgdmFyIGRpciA9IGdldERpcmVjdGlvbigpO1xuICAgIHZhciBuZXh0UGFnZSA9IC0xO1xuXG4gICAgaWYgKGtleSA9PT0gcmVzb2x2ZShBUlJPV19SSUdIVCwgZmFsc2UsIGRpcikpIHtcbiAgICAgIG5leHRQYWdlID0gKytwYWdlICUgbGVuZ3RoO1xuICAgIH0gZWxzZSBpZiAoa2V5ID09PSByZXNvbHZlKEFSUk9XX0xFRlQsIGZhbHNlLCBkaXIpKSB7XG4gICAgICBuZXh0UGFnZSA9ICgtLXBhZ2UgKyBsZW5ndGgpICUgbGVuZ3RoO1xuICAgIH0gZWxzZSBpZiAoa2V5ID09PSBcIkhvbWVcIikge1xuICAgICAgbmV4dFBhZ2UgPSAwO1xuICAgIH0gZWxzZSBpZiAoa2V5ID09PSBcIkVuZFwiKSB7XG4gICAgICBuZXh0UGFnZSA9IGxlbmd0aCAtIDE7XG4gICAgfVxuXG4gICAgdmFyIGl0ZW0gPSBpdGVtc1tuZXh0UGFnZV07XG5cbiAgICBpZiAoaXRlbSkge1xuICAgICAgZm9jdXMoaXRlbS5idXR0b24pO1xuICAgICAgZ28oXCI+XCIgKyBuZXh0UGFnZSk7XG4gICAgICBwcmV2ZW50KGUsIHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldERpcmVjdGlvbigpIHtcbiAgICByZXR1cm4gb3B0aW9ucy5wYWdpbmF0aW9uRGlyZWN0aW9uIHx8IG9wdGlvbnMuZGlyZWN0aW9uO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0QXQoaW5kZXgpIHtcbiAgICByZXR1cm4gaXRlbXNbQ29udHJvbGxlci50b1BhZ2UoaW5kZXgpXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICB2YXIgcHJldiA9IGdldEF0KGdldEluZGV4KHRydWUpKTtcbiAgICB2YXIgY3VyciA9IGdldEF0KGdldEluZGV4KCkpO1xuXG4gICAgaWYgKHByZXYpIHtcbiAgICAgIHZhciBidXR0b24gPSBwcmV2LmJ1dHRvbjtcbiAgICAgIHJlbW92ZUNsYXNzKGJ1dHRvbiwgQ0xBU1NfQUNUSVZFKTtcbiAgICAgIHJlbW92ZUF0dHJpYnV0ZShidXR0b24sIEFSSUFfU0VMRUNURUQpO1xuICAgICAgc2V0QXR0cmlidXRlKGJ1dHRvbiwgVEFCX0lOREVYLCAtMSk7XG4gICAgfVxuXG4gICAgaWYgKGN1cnIpIHtcbiAgICAgIHZhciBfYnV0dG9uID0gY3Vyci5idXR0b247XG4gICAgICBhZGRDbGFzcyhfYnV0dG9uLCBDTEFTU19BQ1RJVkUpO1xuICAgICAgc2V0QXR0cmlidXRlKF9idXR0b24sIEFSSUFfU0VMRUNURUQsIHRydWUpO1xuICAgICAgc2V0QXR0cmlidXRlKF9idXR0b24sIFRBQl9JTkRFWCwgXCJcIik7XG4gICAgfVxuXG4gICAgZW1pdChFVkVOVF9QQUdJTkFUSU9OX1VQREFURUQsIHtcbiAgICAgIGxpc3Q6IGxpc3QsXG4gICAgICBpdGVtczogaXRlbXNcbiAgICB9LCBwcmV2LCBjdXJyKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaXRlbXM6IGl0ZW1zLFxuICAgIG1vdW50OiBtb3VudCxcbiAgICBkZXN0cm95OiBkZXN0cm95LFxuICAgIGdldEF0OiBnZXRBdCxcbiAgICB1cGRhdGU6IHVwZGF0ZVxuICB9O1xufVxuXG52YXIgVFJJR0dFUl9LRVlTID0gW1wiIFwiLCBcIkVudGVyXCJdO1xuXG5mdW5jdGlvbiBTeW5jKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBpc05hdmlnYXRpb24gPSBvcHRpb25zLmlzTmF2aWdhdGlvbixcbiAgICAgIHNsaWRlRm9jdXMgPSBvcHRpb25zLnNsaWRlRm9jdXM7XG4gIHZhciBldmVudHMgPSBbXTtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBTcGxpZGUyLnNwbGlkZXMuZm9yRWFjaChmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICBpZiAoIXRhcmdldC5pc1BhcmVudCkge1xuICAgICAgICBzeW5jKFNwbGlkZTIsIHRhcmdldC5zcGxpZGUpO1xuICAgICAgICBzeW5jKHRhcmdldC5zcGxpZGUsIFNwbGlkZTIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGlzTmF2aWdhdGlvbikge1xuICAgICAgbmF2aWdhdGUoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgIGV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQuZGVzdHJveSgpO1xuICAgIH0pO1xuICAgIGVtcHR5KGV2ZW50cyk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdW50KCkge1xuICAgIGRlc3Ryb3koKTtcbiAgICBtb3VudCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3luYyhzcGxpZGUsIHRhcmdldCkge1xuICAgIHZhciBldmVudCA9IEV2ZW50SW50ZXJmYWNlKHNwbGlkZSk7XG4gICAgZXZlbnQub24oRVZFTlRfTU9WRSwgZnVuY3Rpb24gKGluZGV4LCBwcmV2LCBkZXN0KSB7XG4gICAgICB0YXJnZXQuZ28odGFyZ2V0LmlzKExPT1ApID8gZGVzdCA6IGluZGV4KTtcbiAgICB9KTtcbiAgICBldmVudHMucHVzaChldmVudCk7XG4gIH1cblxuICBmdW5jdGlvbiBuYXZpZ2F0ZSgpIHtcbiAgICB2YXIgZXZlbnQgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKTtcbiAgICB2YXIgb24gPSBldmVudC5vbjtcbiAgICBvbihFVkVOVF9DTElDSywgb25DbGljayk7XG4gICAgb24oRVZFTlRfU0xJREVfS0VZRE9XTiwgb25LZXlkb3duKTtcbiAgICBvbihbRVZFTlRfTU9VTlRFRCwgRVZFTlRfVVBEQVRFRF0sIHVwZGF0ZSk7XG4gICAgZXZlbnRzLnB1c2goZXZlbnQpO1xuICAgIGV2ZW50LmVtaXQoRVZFTlRfTkFWSUdBVElPTl9NT1VOVEVELCBTcGxpZGUyLnNwbGlkZXMpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgIHNldEF0dHJpYnV0ZShDb21wb25lbnRzMi5FbGVtZW50cy5saXN0LCBBUklBX09SSUVOVEFUSU9OLCBvcHRpb25zLmRpcmVjdGlvbiA9PT0gVFRCID8gXCJ2ZXJ0aWNhbFwiIDogXCJcIik7XG4gIH1cblxuICBmdW5jdGlvbiBvbkNsaWNrKFNsaWRlKSB7XG4gICAgU3BsaWRlMi5nbyhTbGlkZS5pbmRleCk7XG4gIH1cblxuICBmdW5jdGlvbiBvbktleWRvd24oU2xpZGUsIGUpIHtcbiAgICBpZiAoaW5jbHVkZXMoVFJJR0dFUl9LRVlTLCBub3JtYWxpemVLZXkoZSkpKSB7XG4gICAgICBvbkNsaWNrKFNsaWRlKTtcbiAgICAgIHByZXZlbnQoZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzZXR1cDogYXBwbHkoQ29tcG9uZW50czIuTWVkaWEuc2V0LCB7XG4gICAgICBzbGlkZUZvY3VzOiBpc1VuZGVmaW5lZChzbGlkZUZvY3VzKSA/IGlzTmF2aWdhdGlvbiA6IHNsaWRlRm9jdXNcbiAgICB9LCB0cnVlKSxcbiAgICBtb3VudDogbW91bnQsXG4gICAgZGVzdHJveTogZGVzdHJveSxcbiAgICByZW1vdW50OiByZW1vdW50XG4gIH07XG59XG5cbmZ1bmN0aW9uIFdoZWVsKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBfRXZlbnRJbnRlcmZhY2UxMiA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpLFxuICAgICAgYmluZCA9IF9FdmVudEludGVyZmFjZTEyLmJpbmQ7XG5cbiAgdmFyIGxhc3RUaW1lID0gMDtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBpZiAob3B0aW9ucy53aGVlbCkge1xuICAgICAgYmluZChDb21wb25lbnRzMi5FbGVtZW50cy50cmFjaywgXCJ3aGVlbFwiLCBvbldoZWVsLCBTQ1JPTExfTElTVEVORVJfT1BUSU9OUyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25XaGVlbChlKSB7XG4gICAgaWYgKGUuY2FuY2VsYWJsZSkge1xuICAgICAgdmFyIGRlbHRhWSA9IGUuZGVsdGFZO1xuICAgICAgdmFyIGJhY2t3YXJkcyA9IGRlbHRhWSA8IDA7XG4gICAgICB2YXIgdGltZVN0YW1wID0gdGltZU9mKGUpO1xuXG4gICAgICB2YXIgX21pbiA9IG9wdGlvbnMud2hlZWxNaW5UaHJlc2hvbGQgfHwgMDtcblxuICAgICAgdmFyIHNsZWVwID0gb3B0aW9ucy53aGVlbFNsZWVwIHx8IDA7XG5cbiAgICAgIGlmIChhYnMoZGVsdGFZKSA+IF9taW4gJiYgdGltZVN0YW1wIC0gbGFzdFRpbWUgPiBzbGVlcCkge1xuICAgICAgICBTcGxpZGUyLmdvKGJhY2t3YXJkcyA/IFwiPFwiIDogXCI+XCIpO1xuICAgICAgICBsYXN0VGltZSA9IHRpbWVTdGFtcDtcbiAgICAgIH1cblxuICAgICAgc2hvdWxkUHJldmVudChiYWNrd2FyZHMpICYmIHByZXZlbnQoZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2hvdWxkUHJldmVudChiYWNrd2FyZHMpIHtcbiAgICByZXR1cm4gIW9wdGlvbnMucmVsZWFzZVdoZWVsIHx8IFNwbGlkZTIuc3RhdGUuaXMoTU9WSU5HKSB8fCBDb21wb25lbnRzMi5Db250cm9sbGVyLmdldEFkamFjZW50KGJhY2t3YXJkcykgIT09IC0xO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb3VudDogbW91bnRcbiAgfTtcbn1cblxudmFyIFNSX1JFTU9WQUxfREVMQVkgPSA5MDtcblxuZnVuY3Rpb24gTGl2ZShTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgX0V2ZW50SW50ZXJmYWNlMTMgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKSxcbiAgICAgIG9uID0gX0V2ZW50SW50ZXJmYWNlMTMub247XG5cbiAgdmFyIHRyYWNrID0gQ29tcG9uZW50czIuRWxlbWVudHMudHJhY2s7XG4gIHZhciBlbmFibGVkID0gb3B0aW9ucy5saXZlICYmICFvcHRpb25zLmlzTmF2aWdhdGlvbjtcbiAgdmFyIHNyID0gY3JlYXRlKFwic3BhblwiLCBDTEFTU19TUik7XG4gIHZhciBpbnRlcnZhbCA9IFJlcXVlc3RJbnRlcnZhbChTUl9SRU1PVkFMX0RFTEFZLCBhcHBseSh0b2dnbGUsIGZhbHNlKSk7XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgaWYgKGVuYWJsZWQpIHtcbiAgICAgIGRpc2FibGUoIUNvbXBvbmVudHMyLkF1dG9wbGF5LmlzUGF1c2VkKCkpO1xuICAgICAgc2V0QXR0cmlidXRlKHRyYWNrLCBBUklBX0FUT01JQywgdHJ1ZSk7XG4gICAgICBzci50ZXh0Q29udGVudCA9IFwiXFx1MjAyNlwiO1xuICAgICAgb24oRVZFTlRfQVVUT1BMQVlfUExBWSwgYXBwbHkoZGlzYWJsZSwgdHJ1ZSkpO1xuICAgICAgb24oRVZFTlRfQVVUT1BMQVlfUEFVU0UsIGFwcGx5KGRpc2FibGUsIGZhbHNlKSk7XG4gICAgICBvbihbRVZFTlRfTU9WRUQsIEVWRU5UX1NDUk9MTEVEXSwgYXBwbHkodG9nZ2xlLCB0cnVlKSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdG9nZ2xlKGFjdGl2ZSkge1xuICAgIHNldEF0dHJpYnV0ZSh0cmFjaywgQVJJQV9CVVNZLCBhY3RpdmUpO1xuXG4gICAgaWYgKGFjdGl2ZSkge1xuICAgICAgYXBwZW5kKHRyYWNrLCBzcik7XG4gICAgICBpbnRlcnZhbC5zdGFydCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmUoc3IpO1xuICAgICAgaW50ZXJ2YWwuY2FuY2VsKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICByZW1vdmVBdHRyaWJ1dGUodHJhY2ssIFtBUklBX0xJVkUsIEFSSUFfQVRPTUlDLCBBUklBX0JVU1ldKTtcbiAgICByZW1vdmUoc3IpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlzYWJsZShkaXNhYmxlZCkge1xuICAgIGlmIChlbmFibGVkKSB7XG4gICAgICBzZXRBdHRyaWJ1dGUodHJhY2ssIEFSSUFfTElWRSwgZGlzYWJsZWQgPyBcIm9mZlwiIDogXCJwb2xpdGVcIik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb3VudDogbW91bnQsXG4gICAgZGlzYWJsZTogZGlzYWJsZSxcbiAgICBkZXN0cm95OiBkZXN0cm95XG4gIH07XG59XG5cbnZhciBDb21wb25lbnRDb25zdHJ1Y3RvcnMgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgTWVkaWE6IE1lZGlhLFxuICBEaXJlY3Rpb246IERpcmVjdGlvbixcbiAgRWxlbWVudHM6IEVsZW1lbnRzLFxuICBTbGlkZXM6IFNsaWRlcyxcbiAgTGF5b3V0OiBMYXlvdXQsXG4gIENsb25lczogQ2xvbmVzLFxuICBNb3ZlOiBNb3ZlLFxuICBDb250cm9sbGVyOiBDb250cm9sbGVyLFxuICBBcnJvd3M6IEFycm93cyxcbiAgQXV0b3BsYXk6IEF1dG9wbGF5LFxuICBDb3ZlcjogQ292ZXIsXG4gIFNjcm9sbDogU2Nyb2xsLFxuICBEcmFnOiBEcmFnLFxuICBLZXlib2FyZDogS2V5Ym9hcmQsXG4gIExhenlMb2FkOiBMYXp5TG9hZCxcbiAgUGFnaW5hdGlvbjogUGFnaW5hdGlvbixcbiAgU3luYzogU3luYyxcbiAgV2hlZWw6IFdoZWVsLFxuICBMaXZlOiBMaXZlXG59KTtcbnZhciBJMThOID0ge1xuICBwcmV2OiBcIlByZXZpb3VzIHNsaWRlXCIsXG4gIG5leHQ6IFwiTmV4dCBzbGlkZVwiLFxuICBmaXJzdDogXCJHbyB0byBmaXJzdCBzbGlkZVwiLFxuICBsYXN0OiBcIkdvIHRvIGxhc3Qgc2xpZGVcIixcbiAgc2xpZGVYOiBcIkdvIHRvIHNsaWRlICVzXCIsXG4gIHBhZ2VYOiBcIkdvIHRvIHBhZ2UgJXNcIixcbiAgcGxheTogXCJTdGFydCBhdXRvcGxheVwiLFxuICBwYXVzZTogXCJQYXVzZSBhdXRvcGxheVwiLFxuICBjYXJvdXNlbDogXCJjYXJvdXNlbFwiLFxuICBzbGlkZTogXCJzbGlkZVwiLFxuICBzZWxlY3Q6IFwiU2VsZWN0IGEgc2xpZGUgdG8gc2hvd1wiLFxuICBzbGlkZUxhYmVsOiBcIiVzIG9mICVzXCJcbn07XG52YXIgREVGQVVMVFMgPSB7XG4gIHR5cGU6IFwic2xpZGVcIixcbiAgcm9sZTogXCJyZWdpb25cIixcbiAgc3BlZWQ6IDQwMCxcbiAgcGVyUGFnZTogMSxcbiAgY2xvbmVTdGF0dXM6IHRydWUsXG4gIGFycm93czogdHJ1ZSxcbiAgcGFnaW5hdGlvbjogdHJ1ZSxcbiAgcGFnaW5hdGlvbktleWJvYXJkOiB0cnVlLFxuICBpbnRlcnZhbDogNWUzLFxuICBwYXVzZU9uSG92ZXI6IHRydWUsXG4gIHBhdXNlT25Gb2N1czogdHJ1ZSxcbiAgcmVzZXRQcm9ncmVzczogdHJ1ZSxcbiAgZWFzaW5nOiBcImN1YmljLWJlemllcigwLjI1LCAxLCAwLjUsIDEpXCIsXG4gIGRyYWc6IHRydWUsXG4gIGRpcmVjdGlvbjogXCJsdHJcIixcbiAgdHJpbVNwYWNlOiB0cnVlLFxuICBmb2N1c2FibGVOb2RlczogXCJhLCBidXR0b24sIHRleHRhcmVhLCBpbnB1dCwgc2VsZWN0LCBpZnJhbWVcIixcbiAgbGl2ZTogdHJ1ZSxcbiAgY2xhc3NlczogQ0xBU1NFUyxcbiAgaTE4bjogSTE4TixcbiAgcmVkdWNlZE1vdGlvbjoge1xuICAgIHNwZWVkOiAwLFxuICAgIHJld2luZFNwZWVkOiAwLFxuICAgIGF1dG9wbGF5OiBcInBhdXNlXCJcbiAgfVxufTtcblxuZnVuY3Rpb24gRmFkZShTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgU2xpZGVzID0gQ29tcG9uZW50czIuU2xpZGVzO1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpLm9uKFtFVkVOVF9NT1VOVEVELCBFVkVOVF9SRUZSRVNIXSwgaW5pdCk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIFNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChTbGlkZSkge1xuICAgICAgU2xpZGUuc3R5bGUoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGVYKC1cIiArIDEwMCAqIFNsaWRlLmluZGV4ICsgXCIlKVwiKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0YXJ0KGluZGV4LCBkb25lKSB7XG4gICAgU2xpZGVzLnN0eWxlKFwidHJhbnNpdGlvblwiLCBcIm9wYWNpdHkgXCIgKyBvcHRpb25zLnNwZWVkICsgXCJtcyBcIiArIG9wdGlvbnMuZWFzaW5nKTtcbiAgICBuZXh0VGljayhkb25lKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50LFxuICAgIHN0YXJ0OiBzdGFydCxcbiAgICBjYW5jZWw6IG5vb3BcbiAgfTtcbn1cblxuZnVuY3Rpb24gU2xpZGUoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIE1vdmUgPSBDb21wb25lbnRzMi5Nb3ZlLFxuICAgICAgQ29udHJvbGxlciA9IENvbXBvbmVudHMyLkNvbnRyb2xsZXIsXG4gICAgICBTY3JvbGwgPSBDb21wb25lbnRzMi5TY3JvbGw7XG4gIHZhciBsaXN0ID0gQ29tcG9uZW50czIuRWxlbWVudHMubGlzdDtcbiAgdmFyIHRyYW5zaXRpb24gPSBhcHBseShzdHlsZSwgbGlzdCwgXCJ0cmFuc2l0aW9uXCIpO1xuICB2YXIgZW5kQ2FsbGJhY2s7XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgRXZlbnRJbnRlcmZhY2UoU3BsaWRlMikuYmluZChsaXN0LCBcInRyYW5zaXRpb25lbmRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmIChlLnRhcmdldCA9PT0gbGlzdCAmJiBlbmRDYWxsYmFjaykge1xuICAgICAgICBjYW5jZWwoKTtcbiAgICAgICAgZW5kQ2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0YXJ0KGluZGV4LCBkb25lKSB7XG4gICAgdmFyIGRlc3RpbmF0aW9uID0gTW92ZS50b1Bvc2l0aW9uKGluZGV4LCB0cnVlKTtcbiAgICB2YXIgcG9zaXRpb24gPSBNb3ZlLmdldFBvc2l0aW9uKCk7XG4gICAgdmFyIHNwZWVkID0gZ2V0U3BlZWQoaW5kZXgpO1xuXG4gICAgaWYgKGFicyhkZXN0aW5hdGlvbiAtIHBvc2l0aW9uKSA+PSAxICYmIHNwZWVkID49IDEpIHtcbiAgICAgIGlmIChvcHRpb25zLnVzZVNjcm9sbCkge1xuICAgICAgICBTY3JvbGwuc2Nyb2xsKGRlc3RpbmF0aW9uLCBzcGVlZCwgZmFsc2UsIGRvbmUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJhbnNpdGlvbihcInRyYW5zZm9ybSBcIiArIHNwZWVkICsgXCJtcyBcIiArIG9wdGlvbnMuZWFzaW5nKTtcbiAgICAgICAgTW92ZS50cmFuc2xhdGUoZGVzdGluYXRpb24sIHRydWUpO1xuICAgICAgICBlbmRDYWxsYmFjayA9IGRvbmU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIE1vdmUuanVtcChpbmRleCk7XG4gICAgICBkb25lKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgIHRyYW5zaXRpb24oXCJcIik7XG4gICAgU2Nyb2xsLmNhbmNlbCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0U3BlZWQoaW5kZXgpIHtcbiAgICB2YXIgcmV3aW5kU3BlZWQgPSBvcHRpb25zLnJld2luZFNwZWVkO1xuXG4gICAgaWYgKFNwbGlkZTIuaXMoU0xJREUpICYmIHJld2luZFNwZWVkKSB7XG4gICAgICB2YXIgcHJldiA9IENvbnRyb2xsZXIuZ2V0SW5kZXgodHJ1ZSk7XG4gICAgICB2YXIgZW5kID0gQ29udHJvbGxlci5nZXRFbmQoKTtcblxuICAgICAgaWYgKHByZXYgPT09IDAgJiYgaW5kZXggPj0gZW5kIHx8IHByZXYgPj0gZW5kICYmIGluZGV4ID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXdpbmRTcGVlZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3B0aW9ucy5zcGVlZDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50LFxuICAgIHN0YXJ0OiBzdGFydCxcbiAgICBjYW5jZWw6IGNhbmNlbFxuICB9O1xufVxuXG52YXIgX1NwbGlkZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIF9TcGxpZGUodGFyZ2V0LCBvcHRpb25zKSB7XG4gICAgdGhpcy5ldmVudCA9IEV2ZW50SW50ZXJmYWNlKCk7XG4gICAgdGhpcy5Db21wb25lbnRzID0ge307XG4gICAgdGhpcy5zdGF0ZSA9IFN0YXRlKENSRUFURUQpO1xuICAgIHRoaXMuc3BsaWRlcyA9IFtdO1xuICAgIHRoaXMuX28gPSB7fTtcbiAgICB0aGlzLl9FID0ge307XG4gICAgdmFyIHJvb3QgPSBpc1N0cmluZyh0YXJnZXQpID8gcXVlcnkoZG9jdW1lbnQsIHRhcmdldCkgOiB0YXJnZXQ7XG4gICAgYXNzZXJ0KHJvb3QsIHJvb3QgKyBcIiBpcyBpbnZhbGlkLlwiKTtcbiAgICB0aGlzLnJvb3QgPSByb290O1xuICAgIG9wdGlvbnMgPSBtZXJnZSh7XG4gICAgICBsYWJlbDogZ2V0QXR0cmlidXRlKHJvb3QsIEFSSUFfTEFCRUwpIHx8IFwiXCIsXG4gICAgICBsYWJlbGxlZGJ5OiBnZXRBdHRyaWJ1dGUocm9vdCwgQVJJQV9MQUJFTExFREJZKSB8fCBcIlwiXG4gICAgfSwgREVGQVVMVFMsIF9TcGxpZGUuZGVmYXVsdHMsIG9wdGlvbnMgfHwge30pO1xuXG4gICAgdHJ5IHtcbiAgICAgIG1lcmdlKG9wdGlvbnMsIEpTT04ucGFyc2UoZ2V0QXR0cmlidXRlKHJvb3QsIERBVEFfQVRUUklCVVRFKSkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGFzc2VydChmYWxzZSwgXCJJbnZhbGlkIEpTT05cIik7XG4gICAgfVxuXG4gICAgdGhpcy5fbyA9IE9iamVjdC5jcmVhdGUobWVyZ2Uoe30sIG9wdGlvbnMpKTtcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBfU3BsaWRlLnByb3RvdHlwZTtcblxuICBfcHJvdG8ubW91bnQgPSBmdW5jdGlvbiBtb3VudChFeHRlbnNpb25zLCBUcmFuc2l0aW9uKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGUsXG4gICAgICAgIENvbXBvbmVudHMyID0gdGhpcy5Db21wb25lbnRzO1xuICAgIGFzc2VydChzdGF0ZS5pcyhbQ1JFQVRFRCwgREVTVFJPWUVEXSksIFwiQWxyZWFkeSBtb3VudGVkIVwiKTtcbiAgICBzdGF0ZS5zZXQoQ1JFQVRFRCk7XG4gICAgdGhpcy5fQyA9IENvbXBvbmVudHMyO1xuICAgIHRoaXMuX1QgPSBUcmFuc2l0aW9uIHx8IHRoaXMuX1QgfHwgKHRoaXMuaXMoRkFERSkgPyBGYWRlIDogU2xpZGUpO1xuICAgIHRoaXMuX0UgPSBFeHRlbnNpb25zIHx8IHRoaXMuX0U7XG4gICAgdmFyIENvbnN0cnVjdG9ycyA9IGFzc2lnbih7fSwgQ29tcG9uZW50Q29uc3RydWN0b3JzLCB0aGlzLl9FLCB7XG4gICAgICBUcmFuc2l0aW9uOiB0aGlzLl9UXG4gICAgfSk7XG4gICAgZm9yT3duKENvbnN0cnVjdG9ycywgZnVuY3Rpb24gKENvbXBvbmVudCwga2V5KSB7XG4gICAgICB2YXIgY29tcG9uZW50ID0gQ29tcG9uZW50KF90aGlzLCBDb21wb25lbnRzMiwgX3RoaXMuX28pO1xuICAgICAgQ29tcG9uZW50czJba2V5XSA9IGNvbXBvbmVudDtcbiAgICAgIGNvbXBvbmVudC5zZXR1cCAmJiBjb21wb25lbnQuc2V0dXAoKTtcbiAgICB9KTtcbiAgICBmb3JPd24oQ29tcG9uZW50czIsIGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgIGNvbXBvbmVudC5tb3VudCAmJiBjb21wb25lbnQubW91bnQoKTtcbiAgICB9KTtcbiAgICB0aGlzLmVtaXQoRVZFTlRfTU9VTlRFRCk7XG4gICAgYWRkQ2xhc3ModGhpcy5yb290LCBDTEFTU19JTklUSUFMSVpFRCk7XG4gICAgc3RhdGUuc2V0KElETEUpO1xuICAgIHRoaXMuZW1pdChFVkVOVF9SRUFEWSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgX3Byb3RvLnN5bmMgPSBmdW5jdGlvbiBzeW5jKHNwbGlkZSkge1xuICAgIHRoaXMuc3BsaWRlcy5wdXNoKHtcbiAgICAgIHNwbGlkZTogc3BsaWRlXG4gICAgfSk7XG4gICAgc3BsaWRlLnNwbGlkZXMucHVzaCh7XG4gICAgICBzcGxpZGU6IHRoaXMsXG4gICAgICBpc1BhcmVudDogdHJ1ZVxuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuc3RhdGUuaXMoSURMRSkpIHtcbiAgICAgIHRoaXMuX0MuU3luYy5yZW1vdW50KCk7XG5cbiAgICAgIHNwbGlkZS5Db21wb25lbnRzLlN5bmMucmVtb3VudCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIF9wcm90by5nbyA9IGZ1bmN0aW9uIGdvKGNvbnRyb2wpIHtcbiAgICB0aGlzLl9DLkNvbnRyb2xsZXIuZ28oY29udHJvbCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBfcHJvdG8ub24gPSBmdW5jdGlvbiBvbihldmVudHMsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5ldmVudC5vbihldmVudHMsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBfcHJvdG8ub2ZmID0gZnVuY3Rpb24gb2ZmKGV2ZW50cykge1xuICAgIHRoaXMuZXZlbnQub2ZmKGV2ZW50cyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgX3Byb3RvLmVtaXQgPSBmdW5jdGlvbiBlbWl0KGV2ZW50KSB7XG4gICAgdmFyIF90aGlzJGV2ZW50O1xuXG4gICAgKF90aGlzJGV2ZW50ID0gdGhpcy5ldmVudCkuZW1pdC5hcHBseShfdGhpcyRldmVudCwgW2V2ZW50XS5jb25jYXQoc2xpY2UoYXJndW1lbnRzLCAxKSkpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgX3Byb3RvLmFkZCA9IGZ1bmN0aW9uIGFkZChzbGlkZXMsIGluZGV4KSB7XG4gICAgdGhpcy5fQy5TbGlkZXMuYWRkKHNsaWRlcywgaW5kZXgpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgX3Byb3RvLnJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZShtYXRjaGVyKSB7XG4gICAgdGhpcy5fQy5TbGlkZXMucmVtb3ZlKG1hdGNoZXIpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgX3Byb3RvLmlzID0gZnVuY3Rpb24gaXModHlwZSkge1xuICAgIHJldHVybiB0aGlzLl9vLnR5cGUgPT09IHR5cGU7XG4gIH07XG5cbiAgX3Byb3RvLnJlZnJlc2ggPSBmdW5jdGlvbiByZWZyZXNoKCkge1xuICAgIHRoaXMuZW1pdChFVkVOVF9SRUZSRVNIKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBfcHJvdG8uZGVzdHJveSA9IGZ1bmN0aW9uIGRlc3Ryb3koY29tcGxldGVseSkge1xuICAgIGlmIChjb21wbGV0ZWx5ID09PSB2b2lkIDApIHtcbiAgICAgIGNvbXBsZXRlbHkgPSB0cnVlO1xuICAgIH1cblxuICAgIHZhciBldmVudCA9IHRoaXMuZXZlbnQsXG4gICAgICAgIHN0YXRlID0gdGhpcy5zdGF0ZTtcblxuICAgIGlmIChzdGF0ZS5pcyhDUkVBVEVEKSkge1xuICAgICAgRXZlbnRJbnRlcmZhY2UodGhpcykub24oRVZFTlRfUkVBRFksIHRoaXMuZGVzdHJveS5iaW5kKHRoaXMsIGNvbXBsZXRlbHkpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yT3duKHRoaXMuX0MsIGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgICAgY29tcG9uZW50LmRlc3Ryb3kgJiYgY29tcG9uZW50LmRlc3Ryb3koY29tcGxldGVseSk7XG4gICAgICB9LCB0cnVlKTtcbiAgICAgIGV2ZW50LmVtaXQoRVZFTlRfREVTVFJPWSk7XG4gICAgICBldmVudC5kZXN0cm95KCk7XG4gICAgICBjb21wbGV0ZWx5ICYmIGVtcHR5KHRoaXMuc3BsaWRlcyk7XG4gICAgICBzdGF0ZS5zZXQoREVTVFJPWUVEKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBfY3JlYXRlQ2xhc3MoX1NwbGlkZSwgW3tcbiAgICBrZXk6IFwib3B0aW9uc1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX287XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldChvcHRpb25zKSB7XG4gICAgICB0aGlzLl9DLk1lZGlhLnNldChvcHRpb25zLCB0cnVlLCB0cnVlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibGVuZ3RoXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fQy5TbGlkZXMuZ2V0TGVuZ3RoKHRydWUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpbmRleFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX0MuQ29udHJvbGxlci5nZXRJbmRleCgpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBfU3BsaWRlO1xufSgpO1xuXG52YXIgU3BsaWRlID0gX1NwbGlkZTtcblNwbGlkZS5kZWZhdWx0cyA9IHt9O1xuU3BsaWRlLlNUQVRFUyA9IFNUQVRFUztcbnZhciBDTEFTU19SRU5ERVJFRCA9IFwiaXMtcmVuZGVyZWRcIjtcbnZhciBSRU5ERVJFUl9ERUZBVUxUX0NPTkZJRyA9IHtcbiAgbGlzdFRhZzogXCJ1bFwiLFxuICBzbGlkZVRhZzogXCJsaVwiXG59O1xuXG52YXIgU3R5bGUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTdHlsZShpZCwgb3B0aW9ucykge1xuICAgIHRoaXMuc3R5bGVzID0ge307XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICB2YXIgX3Byb3RvMiA9IFN0eWxlLnByb3RvdHlwZTtcblxuICBfcHJvdG8yLnJ1bGUgPSBmdW5jdGlvbiBydWxlKHNlbGVjdG9yLCBwcm9wLCB2YWx1ZSwgYnJlYWtwb2ludCkge1xuICAgIGJyZWFrcG9pbnQgPSBicmVha3BvaW50IHx8IFwiZGVmYXVsdFwiO1xuICAgIHZhciBzZWxlY3RvcnMgPSB0aGlzLnN0eWxlc1ticmVha3BvaW50XSA9IHRoaXMuc3R5bGVzW2JyZWFrcG9pbnRdIHx8IHt9O1xuICAgIHZhciBzdHlsZXMgPSBzZWxlY3RvcnNbc2VsZWN0b3JdID0gc2VsZWN0b3JzW3NlbGVjdG9yXSB8fCB7fTtcbiAgICBzdHlsZXNbcHJvcF0gPSB2YWx1ZTtcbiAgfTtcblxuICBfcHJvdG8yLmJ1aWxkID0gZnVuY3Rpb24gYnVpbGQoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB2YXIgY3NzID0gXCJcIjtcblxuICAgIGlmICh0aGlzLnN0eWxlcy5kZWZhdWx0KSB7XG4gICAgICBjc3MgKz0gdGhpcy5idWlsZFNlbGVjdG9ycyh0aGlzLnN0eWxlcy5kZWZhdWx0KTtcbiAgICB9XG5cbiAgICBPYmplY3Qua2V5cyh0aGlzLnN0eWxlcykuc29ydChmdW5jdGlvbiAobiwgbSkge1xuICAgICAgcmV0dXJuIF90aGlzMi5vcHRpb25zLm1lZGlhUXVlcnkgPT09IFwibWluXCIgPyArbiAtICttIDogK20gLSArbjtcbiAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChicmVha3BvaW50KSB7XG4gICAgICBpZiAoYnJlYWtwb2ludCAhPT0gXCJkZWZhdWx0XCIpIHtcbiAgICAgICAgY3NzICs9IFwiQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogXCIgKyBicmVha3BvaW50ICsgXCJweCkge1wiO1xuICAgICAgICBjc3MgKz0gX3RoaXMyLmJ1aWxkU2VsZWN0b3JzKF90aGlzMi5zdHlsZXNbYnJlYWtwb2ludF0pO1xuICAgICAgICBjc3MgKz0gXCJ9XCI7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGNzcztcbiAgfTtcblxuICBfcHJvdG8yLmJ1aWxkU2VsZWN0b3JzID0gZnVuY3Rpb24gYnVpbGRTZWxlY3RvcnMoc2VsZWN0b3JzKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICB2YXIgY3NzID0gXCJcIjtcbiAgICBmb3JPd24oc2VsZWN0b3JzLCBmdW5jdGlvbiAoc3R5bGVzLCBzZWxlY3Rvcikge1xuICAgICAgc2VsZWN0b3IgPSAoXCIjXCIgKyBfdGhpczMuaWQgKyBcIiBcIiArIHNlbGVjdG9yKS50cmltKCk7XG4gICAgICBjc3MgKz0gc2VsZWN0b3IgKyBcIiB7XCI7XG4gICAgICBmb3JPd24oc3R5bGVzLCBmdW5jdGlvbiAodmFsdWUsIHByb3ApIHtcbiAgICAgICAgaWYgKHZhbHVlIHx8IHZhbHVlID09PSAwKSB7XG4gICAgICAgICAgY3NzICs9IHByb3AgKyBcIjogXCIgKyB2YWx1ZSArIFwiO1wiO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGNzcyArPSBcIn1cIjtcbiAgICB9KTtcbiAgICByZXR1cm4gY3NzO1xuICB9O1xuXG4gIHJldHVybiBTdHlsZTtcbn0oKTtcblxudmFyIFNwbGlkZVJlbmRlcmVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU3BsaWRlUmVuZGVyZXIoY29udGVudHMsIG9wdGlvbnMsIGNvbmZpZywgZGVmYXVsdHMpIHtcbiAgICB0aGlzLnNsaWRlcyA9IFtdO1xuICAgIHRoaXMub3B0aW9ucyA9IHt9O1xuICAgIHRoaXMuYnJlYWtwb2ludHMgPSBbXTtcbiAgICBtZXJnZShERUZBVUxUUywgZGVmYXVsdHMgfHwge30pO1xuICAgIG1lcmdlKG1lcmdlKHRoaXMub3B0aW9ucywgREVGQVVMVFMpLCBvcHRpb25zIHx8IHt9KTtcbiAgICB0aGlzLmNvbnRlbnRzID0gY29udGVudHM7XG4gICAgdGhpcy5jb25maWcgPSBhc3NpZ24oe30sIFJFTkRFUkVSX0RFRkFVTFRfQ09ORklHLCBjb25maWcgfHwge30pO1xuICAgIHRoaXMuaWQgPSB0aGlzLmNvbmZpZy5pZCB8fCB1bmlxdWVJZChcInNwbGlkZVwiKTtcbiAgICB0aGlzLlN0eWxlID0gbmV3IFN0eWxlKHRoaXMuaWQsIHRoaXMub3B0aW9ucyk7XG4gICAgdGhpcy5EaXJlY3Rpb24gPSBEaXJlY3Rpb24obnVsbCwgbnVsbCwgdGhpcy5vcHRpb25zKTtcbiAgICBhc3NlcnQodGhpcy5jb250ZW50cy5sZW5ndGgsIFwiUHJvdmlkZSBhdCBsZWFzdCAxIGNvbnRlbnQuXCIpO1xuICAgIHRoaXMuaW5pdCgpO1xuICB9XG5cbiAgU3BsaWRlUmVuZGVyZXIuY2xlYW4gPSBmdW5jdGlvbiBjbGVhbihzcGxpZGUpIHtcbiAgICB2YXIgX0V2ZW50SW50ZXJmYWNlMTQgPSBFdmVudEludGVyZmFjZShzcGxpZGUpLFxuICAgICAgICBvbiA9IF9FdmVudEludGVyZmFjZTE0Lm9uO1xuXG4gICAgdmFyIHJvb3QgPSBzcGxpZGUucm9vdDtcbiAgICB2YXIgY2xvbmVzID0gcXVlcnlBbGwocm9vdCwgXCIuXCIgKyBDTEFTU19DTE9ORSk7XG4gICAgb24oRVZFTlRfTU9VTlRFRCwgZnVuY3Rpb24gKCkge1xuICAgICAgcmVtb3ZlKGNoaWxkKHJvb3QsIFwic3R5bGVcIikpO1xuICAgIH0pO1xuICAgIHJlbW92ZShjbG9uZXMpO1xuICB9O1xuXG4gIHZhciBfcHJvdG8zID0gU3BsaWRlUmVuZGVyZXIucHJvdG90eXBlO1xuXG4gIF9wcm90bzMuaW5pdCA9IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdGhpcy5wYXJzZUJyZWFrcG9pbnRzKCk7XG4gICAgdGhpcy5pbml0U2xpZGVzKCk7XG4gICAgdGhpcy5yZWdpc3RlclJvb3RTdHlsZXMoKTtcbiAgICB0aGlzLnJlZ2lzdGVyVHJhY2tTdHlsZXMoKTtcbiAgICB0aGlzLnJlZ2lzdGVyU2xpZGVTdHlsZXMoKTtcbiAgICB0aGlzLnJlZ2lzdGVyTGlzdFN0eWxlcygpO1xuICB9O1xuXG4gIF9wcm90bzMuaW5pdFNsaWRlcyA9IGZ1bmN0aW9uIGluaXRTbGlkZXMoKSB7XG4gICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICBwdXNoKHRoaXMuc2xpZGVzLCB0aGlzLmNvbnRlbnRzLm1hcChmdW5jdGlvbiAoY29udGVudCwgaW5kZXgpIHtcbiAgICAgIGNvbnRlbnQgPSBpc1N0cmluZyhjb250ZW50KSA/IHtcbiAgICAgICAgaHRtbDogY29udGVudFxuICAgICAgfSA6IGNvbnRlbnQ7XG4gICAgICBjb250ZW50LnN0eWxlcyA9IGNvbnRlbnQuc3R5bGVzIHx8IHt9O1xuICAgICAgY29udGVudC5hdHRycyA9IGNvbnRlbnQuYXR0cnMgfHwge307XG5cbiAgICAgIF90aGlzNC5jb3Zlcihjb250ZW50KTtcblxuICAgICAgdmFyIGNsYXNzZXMgPSBfdGhpczQub3B0aW9ucy5jbGFzc2VzLnNsaWRlICsgXCIgXCIgKyAoaW5kZXggPT09IDAgPyBDTEFTU19BQ1RJVkUgOiBcIlwiKTtcbiAgICAgIGFzc2lnbihjb250ZW50LmF0dHJzLCB7XG4gICAgICAgIGNsYXNzOiAoY2xhc3NlcyArIFwiIFwiICsgKGNvbnRlbnQuYXR0cnMuY2xhc3MgfHwgXCJcIikpLnRyaW0oKSxcbiAgICAgICAgc3R5bGU6IF90aGlzNC5idWlsZFN0eWxlcyhjb250ZW50LnN0eWxlcylcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkpO1xuXG4gICAgaWYgKHRoaXMuaXNMb29wKCkpIHtcbiAgICAgIHRoaXMuZ2VuZXJhdGVDbG9uZXModGhpcy5zbGlkZXMpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8zLnJlZ2lzdGVyUm9vdFN0eWxlcyA9IGZ1bmN0aW9uIHJlZ2lzdGVyUm9vdFN0eWxlcygpIHtcbiAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgIHRoaXMuYnJlYWtwb2ludHMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZjIpIHtcbiAgICAgIHZhciB3aWR0aCA9IF9yZWYyWzBdLFxuICAgICAgICAgIG9wdGlvbnMgPSBfcmVmMlsxXTtcblxuICAgICAgX3RoaXM1LlN0eWxlLnJ1bGUoXCIgXCIsIFwibWF4LXdpZHRoXCIsIHVuaXQob3B0aW9ucy53aWR0aCksIHdpZHRoKTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8zLnJlZ2lzdGVyVHJhY2tTdHlsZXMgPSBmdW5jdGlvbiByZWdpc3RlclRyYWNrU3R5bGVzKCkge1xuICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgdmFyIFN0eWxlMiA9IHRoaXMuU3R5bGU7XG4gICAgdmFyIHNlbGVjdG9yID0gXCIuXCIgKyBDTEFTU19UUkFDSztcbiAgICB0aGlzLmJyZWFrcG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKF9yZWYzKSB7XG4gICAgICB2YXIgd2lkdGggPSBfcmVmM1swXSxcbiAgICAgICAgICBvcHRpb25zID0gX3JlZjNbMV07XG4gICAgICBTdHlsZTIucnVsZShzZWxlY3RvciwgX3RoaXM2LnJlc29sdmUoXCJwYWRkaW5nTGVmdFwiKSwgX3RoaXM2LmNzc1BhZGRpbmcob3B0aW9ucywgZmFsc2UpLCB3aWR0aCk7XG4gICAgICBTdHlsZTIucnVsZShzZWxlY3RvciwgX3RoaXM2LnJlc29sdmUoXCJwYWRkaW5nUmlnaHRcIiksIF90aGlzNi5jc3NQYWRkaW5nKG9wdGlvbnMsIHRydWUpLCB3aWR0aCk7XG4gICAgICBTdHlsZTIucnVsZShzZWxlY3RvciwgXCJoZWlnaHRcIiwgX3RoaXM2LmNzc1RyYWNrSGVpZ2h0KG9wdGlvbnMpLCB3aWR0aCk7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvMy5yZWdpc3Rlckxpc3RTdHlsZXMgPSBmdW5jdGlvbiByZWdpc3Rlckxpc3RTdHlsZXMoKSB7XG4gICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICB2YXIgU3R5bGUyID0gdGhpcy5TdHlsZTtcbiAgICB2YXIgc2VsZWN0b3IgPSBcIi5cIiArIENMQVNTX0xJU1Q7XG4gICAgdGhpcy5icmVha3BvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmNCkge1xuICAgICAgdmFyIHdpZHRoID0gX3JlZjRbMF0sXG4gICAgICAgICAgb3B0aW9ucyA9IF9yZWY0WzFdO1xuICAgICAgU3R5bGUyLnJ1bGUoc2VsZWN0b3IsIFwidHJhbnNmb3JtXCIsIF90aGlzNy5idWlsZFRyYW5zbGF0ZShvcHRpb25zKSwgd2lkdGgpO1xuXG4gICAgICBpZiAoIV90aGlzNy5jc3NTbGlkZUhlaWdodChvcHRpb25zKSkge1xuICAgICAgICBTdHlsZTIucnVsZShzZWxlY3RvciwgXCJhc3BlY3QtcmF0aW9cIiwgX3RoaXM3LmNzc0FzcGVjdFJhdGlvKG9wdGlvbnMpLCB3aWR0aCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvMy5yZWdpc3RlclNsaWRlU3R5bGVzID0gZnVuY3Rpb24gcmVnaXN0ZXJTbGlkZVN0eWxlcygpIHtcbiAgICB2YXIgX3RoaXM4ID0gdGhpcztcblxuICAgIHZhciBTdHlsZTIgPSB0aGlzLlN0eWxlO1xuICAgIHZhciBzZWxlY3RvciA9IFwiLlwiICsgQ0xBU1NfU0xJREU7XG4gICAgdGhpcy5icmVha3BvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmNSkge1xuICAgICAgdmFyIHdpZHRoID0gX3JlZjVbMF0sXG4gICAgICAgICAgb3B0aW9ucyA9IF9yZWY1WzFdO1xuICAgICAgU3R5bGUyLnJ1bGUoc2VsZWN0b3IsIFwid2lkdGhcIiwgX3RoaXM4LmNzc1NsaWRlV2lkdGgob3B0aW9ucyksIHdpZHRoKTtcbiAgICAgIFN0eWxlMi5ydWxlKHNlbGVjdG9yLCBcImhlaWdodFwiLCBfdGhpczguY3NzU2xpZGVIZWlnaHQob3B0aW9ucykgfHwgXCIxMDAlXCIsIHdpZHRoKTtcbiAgICAgIFN0eWxlMi5ydWxlKHNlbGVjdG9yLCBfdGhpczgucmVzb2x2ZShcIm1hcmdpblJpZ2h0XCIpLCB1bml0KG9wdGlvbnMuZ2FwKSB8fCBcIjBweFwiLCB3aWR0aCk7XG4gICAgICBTdHlsZTIucnVsZShzZWxlY3RvciArIFwiID4gaW1nXCIsIFwiZGlzcGxheVwiLCBvcHRpb25zLmNvdmVyID8gXCJub25lXCIgOiBcImlubGluZVwiLCB3aWR0aCk7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvMy5idWlsZFRyYW5zbGF0ZSA9IGZ1bmN0aW9uIGJ1aWxkVHJhbnNsYXRlKG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXMkRGlyZWN0aW9uID0gdGhpcy5EaXJlY3Rpb24sXG4gICAgICAgIHJlc29sdmUgPSBfdGhpcyREaXJlY3Rpb24ucmVzb2x2ZSxcbiAgICAgICAgb3JpZW50ID0gX3RoaXMkRGlyZWN0aW9uLm9yaWVudDtcbiAgICB2YXIgdmFsdWVzID0gW107XG4gICAgdmFsdWVzLnB1c2godGhpcy5jc3NPZmZzZXRDbG9uZXMob3B0aW9ucykpO1xuICAgIHZhbHVlcy5wdXNoKHRoaXMuY3NzT2Zmc2V0R2FwcyhvcHRpb25zKSk7XG5cbiAgICBpZiAodGhpcy5pc0NlbnRlcihvcHRpb25zKSkge1xuICAgICAgdmFsdWVzLnB1c2godGhpcy5idWlsZENzc1ZhbHVlKG9yaWVudCgtNTApLCBcIiVcIikpO1xuICAgICAgdmFsdWVzLnB1c2guYXBwbHkodmFsdWVzLCB0aGlzLmNzc09mZnNldENlbnRlcihvcHRpb25zKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlcy5maWx0ZXIoQm9vbGVhbikubWFwKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIFwidHJhbnNsYXRlXCIgKyByZXNvbHZlKFwiWFwiKSArIFwiKFwiICsgdmFsdWUgKyBcIilcIjtcbiAgICB9KS5qb2luKFwiIFwiKTtcbiAgfTtcblxuICBfcHJvdG8zLmNzc09mZnNldENsb25lcyA9IGZ1bmN0aW9uIGNzc09mZnNldENsb25lcyhvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzJERpcmVjdGlvbjIgPSB0aGlzLkRpcmVjdGlvbixcbiAgICAgICAgcmVzb2x2ZSA9IF90aGlzJERpcmVjdGlvbjIucmVzb2x2ZSxcbiAgICAgICAgb3JpZW50ID0gX3RoaXMkRGlyZWN0aW9uMi5vcmllbnQ7XG4gICAgdmFyIGNsb25lQ291bnQgPSB0aGlzLmdldENsb25lQ291bnQoKTtcblxuICAgIGlmICh0aGlzLmlzRml4ZWRXaWR0aChvcHRpb25zKSkge1xuICAgICAgdmFyIF90aGlzJHBhcnNlQ3NzVmFsdWUgPSB0aGlzLnBhcnNlQ3NzVmFsdWUob3B0aW9uc1tyZXNvbHZlKFwiZml4ZWRXaWR0aFwiKV0pLFxuICAgICAgICAgIHZhbHVlID0gX3RoaXMkcGFyc2VDc3NWYWx1ZS52YWx1ZSxcbiAgICAgICAgICB1bml0MiA9IF90aGlzJHBhcnNlQ3NzVmFsdWUudW5pdDtcblxuICAgICAgcmV0dXJuIHRoaXMuYnVpbGRDc3NWYWx1ZShvcmllbnQodmFsdWUpICogY2xvbmVDb3VudCwgdW5pdDIpO1xuICAgIH1cblxuICAgIHZhciBwZXJjZW50ID0gMTAwICogY2xvbmVDb3VudCAvIG9wdGlvbnMucGVyUGFnZTtcbiAgICByZXR1cm4gb3JpZW50KHBlcmNlbnQpICsgXCIlXCI7XG4gIH07XG5cbiAgX3Byb3RvMy5jc3NPZmZzZXRDZW50ZXIgPSBmdW5jdGlvbiBjc3NPZmZzZXRDZW50ZXIob3B0aW9ucykge1xuICAgIHZhciBfdGhpcyREaXJlY3Rpb24zID0gdGhpcy5EaXJlY3Rpb24sXG4gICAgICAgIHJlc29sdmUgPSBfdGhpcyREaXJlY3Rpb24zLnJlc29sdmUsXG4gICAgICAgIG9yaWVudCA9IF90aGlzJERpcmVjdGlvbjMub3JpZW50O1xuXG4gICAgaWYgKHRoaXMuaXNGaXhlZFdpZHRoKG9wdGlvbnMpKSB7XG4gICAgICB2YXIgX3RoaXMkcGFyc2VDc3NWYWx1ZTIgPSB0aGlzLnBhcnNlQ3NzVmFsdWUob3B0aW9uc1tyZXNvbHZlKFwiZml4ZWRXaWR0aFwiKV0pLFxuICAgICAgICAgIHZhbHVlID0gX3RoaXMkcGFyc2VDc3NWYWx1ZTIudmFsdWUsXG4gICAgICAgICAgdW5pdDIgPSBfdGhpcyRwYXJzZUNzc1ZhbHVlMi51bml0O1xuXG4gICAgICByZXR1cm4gW3RoaXMuYnVpbGRDc3NWYWx1ZShvcmllbnQodmFsdWUgLyAyKSwgdW5pdDIpXTtcbiAgICB9XG5cbiAgICB2YXIgdmFsdWVzID0gW107XG4gICAgdmFyIHBlclBhZ2UgPSBvcHRpb25zLnBlclBhZ2UsXG4gICAgICAgIGdhcCA9IG9wdGlvbnMuZ2FwO1xuICAgIHZhbHVlcy5wdXNoKG9yaWVudCg1MCAvIHBlclBhZ2UpICsgXCIlXCIpO1xuXG4gICAgaWYgKGdhcCkge1xuICAgICAgdmFyIF90aGlzJHBhcnNlQ3NzVmFsdWUzID0gdGhpcy5wYXJzZUNzc1ZhbHVlKGdhcCksXG4gICAgICAgICAgX3ZhbHVlID0gX3RoaXMkcGFyc2VDc3NWYWx1ZTMudmFsdWUsXG4gICAgICAgICAgX3VuaXQgPSBfdGhpcyRwYXJzZUNzc1ZhbHVlMy51bml0O1xuXG4gICAgICB2YXIgZ2FwT2Zmc2V0ID0gKF92YWx1ZSAvIHBlclBhZ2UgLSBfdmFsdWUpIC8gMjtcbiAgICAgIHZhbHVlcy5wdXNoKHRoaXMuYnVpbGRDc3NWYWx1ZShvcmllbnQoZ2FwT2Zmc2V0KSwgX3VuaXQpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9O1xuXG4gIF9wcm90bzMuY3NzT2Zmc2V0R2FwcyA9IGZ1bmN0aW9uIGNzc09mZnNldEdhcHMob3B0aW9ucykge1xuICAgIHZhciBjbG9uZUNvdW50ID0gdGhpcy5nZXRDbG9uZUNvdW50KCk7XG5cbiAgICBpZiAoY2xvbmVDb3VudCAmJiBvcHRpb25zLmdhcCkge1xuICAgICAgdmFyIG9yaWVudCA9IHRoaXMuRGlyZWN0aW9uLm9yaWVudDtcblxuICAgICAgdmFyIF90aGlzJHBhcnNlQ3NzVmFsdWU0ID0gdGhpcy5wYXJzZUNzc1ZhbHVlKG9wdGlvbnMuZ2FwKSxcbiAgICAgICAgICB2YWx1ZSA9IF90aGlzJHBhcnNlQ3NzVmFsdWU0LnZhbHVlLFxuICAgICAgICAgIHVuaXQyID0gX3RoaXMkcGFyc2VDc3NWYWx1ZTQudW5pdDtcblxuICAgICAgaWYgKHRoaXMuaXNGaXhlZFdpZHRoKG9wdGlvbnMpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1aWxkQ3NzVmFsdWUob3JpZW50KHZhbHVlICogY2xvbmVDb3VudCksIHVuaXQyKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHBlclBhZ2UgPSBvcHRpb25zLnBlclBhZ2U7XG4gICAgICB2YXIgZ2FwcyA9IGNsb25lQ291bnQgLyBwZXJQYWdlO1xuICAgICAgcmV0dXJuIHRoaXMuYnVpbGRDc3NWYWx1ZShvcmllbnQoZ2FwcyAqIHZhbHVlKSwgdW5pdDIpO1xuICAgIH1cblxuICAgIHJldHVybiBcIlwiO1xuICB9O1xuXG4gIF9wcm90bzMucmVzb2x2ZSA9IGZ1bmN0aW9uIHJlc29sdmUocHJvcCkge1xuICAgIHJldHVybiBjYW1lbFRvS2ViYWIodGhpcy5EaXJlY3Rpb24ucmVzb2x2ZShwcm9wKSk7XG4gIH07XG5cbiAgX3Byb3RvMy5jc3NQYWRkaW5nID0gZnVuY3Rpb24gY3NzUGFkZGluZyhvcHRpb25zLCByaWdodCkge1xuICAgIHZhciBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nO1xuICAgIHZhciBwcm9wID0gdGhpcy5EaXJlY3Rpb24ucmVzb2x2ZShyaWdodCA/IFwicmlnaHRcIiA6IFwibGVmdFwiLCB0cnVlKTtcbiAgICByZXR1cm4gcGFkZGluZyAmJiB1bml0KHBhZGRpbmdbcHJvcF0gfHwgKGlzT2JqZWN0KHBhZGRpbmcpID8gMCA6IHBhZGRpbmcpKSB8fCBcIjBweFwiO1xuICB9O1xuXG4gIF9wcm90bzMuY3NzVHJhY2tIZWlnaHQgPSBmdW5jdGlvbiBjc3NUcmFja0hlaWdodChvcHRpb25zKSB7XG4gICAgdmFyIGhlaWdodCA9IFwiXCI7XG5cbiAgICBpZiAodGhpcy5pc1ZlcnRpY2FsKCkpIHtcbiAgICAgIGhlaWdodCA9IHRoaXMuY3NzSGVpZ2h0KG9wdGlvbnMpO1xuICAgICAgYXNzZXJ0KGhlaWdodCwgJ1wiaGVpZ2h0XCIgaXMgbWlzc2luZy4nKTtcbiAgICAgIGhlaWdodCA9IFwiY2FsYyhcIiArIGhlaWdodCArIFwiIC0gXCIgKyB0aGlzLmNzc1BhZGRpbmcob3B0aW9ucywgZmFsc2UpICsgXCIgLSBcIiArIHRoaXMuY3NzUGFkZGluZyhvcHRpb25zLCB0cnVlKSArIFwiKVwiO1xuICAgIH1cblxuICAgIHJldHVybiBoZWlnaHQ7XG4gIH07XG5cbiAgX3Byb3RvMy5jc3NIZWlnaHQgPSBmdW5jdGlvbiBjc3NIZWlnaHQob3B0aW9ucykge1xuICAgIHJldHVybiB1bml0KG9wdGlvbnMuaGVpZ2h0KTtcbiAgfTtcblxuICBfcHJvdG8zLmNzc1NsaWRlV2lkdGggPSBmdW5jdGlvbiBjc3NTbGlkZVdpZHRoKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gb3B0aW9ucy5hdXRvV2lkdGggPyBcIlwiIDogdW5pdChvcHRpb25zLmZpeGVkV2lkdGgpIHx8ICh0aGlzLmlzVmVydGljYWwoKSA/IFwiXCIgOiB0aGlzLmNzc1NsaWRlU2l6ZShvcHRpb25zKSk7XG4gIH07XG5cbiAgX3Byb3RvMy5jc3NTbGlkZUhlaWdodCA9IGZ1bmN0aW9uIGNzc1NsaWRlSGVpZ2h0KG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdW5pdChvcHRpb25zLmZpeGVkSGVpZ2h0KSB8fCAodGhpcy5pc1ZlcnRpY2FsKCkgPyBvcHRpb25zLmF1dG9IZWlnaHQgPyBcIlwiIDogdGhpcy5jc3NTbGlkZVNpemUob3B0aW9ucykgOiB0aGlzLmNzc0hlaWdodChvcHRpb25zKSk7XG4gIH07XG5cbiAgX3Byb3RvMy5jc3NTbGlkZVNpemUgPSBmdW5jdGlvbiBjc3NTbGlkZVNpemUob3B0aW9ucykge1xuICAgIHZhciBnYXAgPSB1bml0KG9wdGlvbnMuZ2FwKTtcbiAgICByZXR1cm4gXCJjYWxjKCgxMDAlXCIgKyAoZ2FwICYmIFwiICsgXCIgKyBnYXApICsgXCIpL1wiICsgKG9wdGlvbnMucGVyUGFnZSB8fCAxKSArIChnYXAgJiYgXCIgLSBcIiArIGdhcCkgKyBcIilcIjtcbiAgfTtcblxuICBfcHJvdG8zLmNzc0FzcGVjdFJhdGlvID0gZnVuY3Rpb24gY3NzQXNwZWN0UmF0aW8ob3B0aW9ucykge1xuICAgIHZhciBoZWlnaHRSYXRpbyA9IG9wdGlvbnMuaGVpZ2h0UmF0aW87XG4gICAgcmV0dXJuIGhlaWdodFJhdGlvID8gXCJcIiArIDEgLyBoZWlnaHRSYXRpbyA6IFwiXCI7XG4gIH07XG5cbiAgX3Byb3RvMy5idWlsZENzc1ZhbHVlID0gZnVuY3Rpb24gYnVpbGRDc3NWYWx1ZSh2YWx1ZSwgdW5pdDIpIHtcbiAgICByZXR1cm4gXCJcIiArIHZhbHVlICsgdW5pdDI7XG4gIH07XG5cbiAgX3Byb3RvMy5wYXJzZUNzc1ZhbHVlID0gZnVuY3Rpb24gcGFyc2VDc3NWYWx1ZSh2YWx1ZSkge1xuICAgIGlmIChpc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgIHZhciBudW1iZXIgPSBwYXJzZUZsb2F0KHZhbHVlKSB8fCAwO1xuICAgICAgdmFyIHVuaXQyID0gdmFsdWUucmVwbGFjZSgvXFxkKihcXC5cXGQqKT8vLCBcIlwiKSB8fCBcInB4XCI7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogbnVtYmVyLFxuICAgICAgICB1bml0OiB1bml0MlxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgdW5pdDogXCJweFwiXG4gICAgfTtcbiAgfTtcblxuICBfcHJvdG8zLnBhcnNlQnJlYWtwb2ludHMgPSBmdW5jdGlvbiBwYXJzZUJyZWFrcG9pbnRzKCkge1xuICAgIHZhciBfdGhpczkgPSB0aGlzO1xuXG4gICAgdmFyIGJyZWFrcG9pbnRzID0gdGhpcy5vcHRpb25zLmJyZWFrcG9pbnRzO1xuICAgIHRoaXMuYnJlYWtwb2ludHMucHVzaChbXCJkZWZhdWx0XCIsIHRoaXMub3B0aW9uc10pO1xuXG4gICAgaWYgKGJyZWFrcG9pbnRzKSB7XG4gICAgICBmb3JPd24oYnJlYWtwb2ludHMsIGZ1bmN0aW9uIChvcHRpb25zLCB3aWR0aCkge1xuICAgICAgICBfdGhpczkuYnJlYWtwb2ludHMucHVzaChbd2lkdGgsIG1lcmdlKG1lcmdlKHt9LCBfdGhpczkub3B0aW9ucyksIG9wdGlvbnMpXSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvMy5pc0ZpeGVkV2lkdGggPSBmdW5jdGlvbiBpc0ZpeGVkV2lkdGgob3B0aW9ucykge1xuICAgIHJldHVybiAhIW9wdGlvbnNbdGhpcy5EaXJlY3Rpb24ucmVzb2x2ZShcImZpeGVkV2lkdGhcIildO1xuICB9O1xuXG4gIF9wcm90bzMuaXNMb29wID0gZnVuY3Rpb24gaXNMb29wKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMudHlwZSA9PT0gTE9PUDtcbiAgfTtcblxuICBfcHJvdG8zLmlzQ2VudGVyID0gZnVuY3Rpb24gaXNDZW50ZXIob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLmZvY3VzID09PSBcImNlbnRlclwiKSB7XG4gICAgICBpZiAodGhpcy5pc0xvb3AoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy50eXBlID09PSBTTElERSkge1xuICAgICAgICByZXR1cm4gIXRoaXMub3B0aW9ucy50cmltU3BhY2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIF9wcm90bzMuaXNWZXJ0aWNhbCA9IGZ1bmN0aW9uIGlzVmVydGljYWwoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5kaXJlY3Rpb24gPT09IFRUQjtcbiAgfTtcblxuICBfcHJvdG8zLmJ1aWxkQ2xhc3NlcyA9IGZ1bmN0aW9uIGJ1aWxkQ2xhc3NlcygpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICByZXR1cm4gW0NMQVNTX1JPT1QsIENMQVNTX1JPT1QgKyBcIi0tXCIgKyBvcHRpb25zLnR5cGUsIENMQVNTX1JPT1QgKyBcIi0tXCIgKyBvcHRpb25zLmRpcmVjdGlvbiwgb3B0aW9ucy5kcmFnICYmIENMQVNTX1JPT1QgKyBcIi0tZHJhZ2dhYmxlXCIsIG9wdGlvbnMuaXNOYXZpZ2F0aW9uICYmIENMQVNTX1JPT1QgKyBcIi0tbmF2XCIsIENMQVNTX0FDVElWRSwgIXRoaXMuY29uZmlnLmhpZGRlbiAmJiBDTEFTU19SRU5ERVJFRF0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpO1xuICB9O1xuXG4gIF9wcm90bzMuYnVpbGRBdHRycyA9IGZ1bmN0aW9uIGJ1aWxkQXR0cnMoYXR0cnMpIHtcbiAgICB2YXIgYXR0ciA9IFwiXCI7XG4gICAgZm9yT3duKGF0dHJzLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgYXR0ciArPSB2YWx1ZSA/IFwiIFwiICsgY2FtZWxUb0tlYmFiKGtleSkgKyBcIj1cXFwiXCIgKyB2YWx1ZSArIFwiXFxcIlwiIDogXCJcIjtcbiAgICB9KTtcbiAgICByZXR1cm4gYXR0ci50cmltKCk7XG4gIH07XG5cbiAgX3Byb3RvMy5idWlsZFN0eWxlcyA9IGZ1bmN0aW9uIGJ1aWxkU3R5bGVzKHN0eWxlcykge1xuICAgIHZhciBzdHlsZSA9IFwiXCI7XG4gICAgZm9yT3duKHN0eWxlcywgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgIHN0eWxlICs9IFwiIFwiICsgY2FtZWxUb0tlYmFiKGtleSkgKyBcIjpcIiArIHZhbHVlICsgXCI7XCI7XG4gICAgfSk7XG4gICAgcmV0dXJuIHN0eWxlLnRyaW0oKTtcbiAgfTtcblxuICBfcHJvdG8zLnJlbmRlclNsaWRlcyA9IGZ1bmN0aW9uIHJlbmRlclNsaWRlcygpIHtcbiAgICB2YXIgX3RoaXMxMCA9IHRoaXM7XG5cbiAgICB2YXIgdGFnID0gdGhpcy5jb25maWcuc2xpZGVUYWc7XG4gICAgcmV0dXJuIHRoaXMuc2xpZGVzLm1hcChmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgcmV0dXJuIFwiPFwiICsgdGFnICsgXCIgXCIgKyBfdGhpczEwLmJ1aWxkQXR0cnMoY29udGVudC5hdHRycykgKyBcIj5cIiArIChjb250ZW50Lmh0bWwgfHwgXCJcIikgKyBcIjwvXCIgKyB0YWcgKyBcIj5cIjtcbiAgICB9KS5qb2luKFwiXCIpO1xuICB9O1xuXG4gIF9wcm90bzMuY292ZXIgPSBmdW5jdGlvbiBjb3Zlcihjb250ZW50KSB7XG4gICAgdmFyIHN0eWxlcyA9IGNvbnRlbnQuc3R5bGVzLFxuICAgICAgICBfY29udGVudCRodG1sID0gY29udGVudC5odG1sLFxuICAgICAgICBodG1sID0gX2NvbnRlbnQkaHRtbCA9PT0gdm9pZCAwID8gXCJcIiA6IF9jb250ZW50JGh0bWw7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmNvdmVyICYmICF0aGlzLm9wdGlvbnMubGF6eUxvYWQpIHtcbiAgICAgIHZhciBzcmMgPSBodG1sLm1hdGNoKC88aW1nLio/c3JjXFxzKj1cXHMqKFsnXCJdKSguKz8pXFwxLio/Pi8pO1xuXG4gICAgICBpZiAoc3JjICYmIHNyY1syXSkge1xuICAgICAgICBzdHlsZXMuYmFja2dyb3VuZCA9IFwiY2VudGVyL2NvdmVyIG5vLXJlcGVhdCB1cmwoJ1wiICsgc3JjWzJdICsgXCInKVwiO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBfcHJvdG8zLmdlbmVyYXRlQ2xvbmVzID0gZnVuY3Rpb24gZ2VuZXJhdGVDbG9uZXMoY29udGVudHMpIHtcbiAgICB2YXIgY2xhc3NlcyA9IHRoaXMub3B0aW9ucy5jbGFzc2VzO1xuICAgIHZhciBjb3VudCA9IHRoaXMuZ2V0Q2xvbmVDb3VudCgpO1xuICAgIHZhciBzbGlkZXMgPSBjb250ZW50cy5zbGljZSgpO1xuXG4gICAgd2hpbGUgKHNsaWRlcy5sZW5ndGggPCBjb3VudCkge1xuICAgICAgcHVzaChzbGlkZXMsIHNsaWRlcyk7XG4gICAgfVxuXG4gICAgcHVzaChzbGlkZXMuc2xpY2UoLWNvdW50KS5yZXZlcnNlKCksIHNsaWRlcy5zbGljZSgwLCBjb3VudCkpLmZvckVhY2goZnVuY3Rpb24gKGNvbnRlbnQsIGluZGV4KSB7XG4gICAgICB2YXIgYXR0cnMgPSBhc3NpZ24oe30sIGNvbnRlbnQuYXR0cnMsIHtcbiAgICAgICAgY2xhc3M6IGNvbnRlbnQuYXR0cnMuY2xhc3MgKyBcIiBcIiArIGNsYXNzZXMuY2xvbmVcbiAgICAgIH0pO1xuICAgICAgdmFyIGNsb25lID0gYXNzaWduKHt9LCBjb250ZW50LCB7XG4gICAgICAgIGF0dHJzOiBhdHRyc1xuICAgICAgfSk7XG4gICAgICBpbmRleCA8IGNvdW50ID8gY29udGVudHMudW5zaGlmdChjbG9uZSkgOiBjb250ZW50cy5wdXNoKGNsb25lKTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8zLmdldENsb25lQ291bnQgPSBmdW5jdGlvbiBnZXRDbG9uZUNvdW50KCkge1xuICAgIGlmICh0aGlzLmlzTG9vcCgpKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcblxuICAgICAgaWYgKG9wdGlvbnMuY2xvbmVzKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmNsb25lcztcbiAgICAgIH1cblxuICAgICAgdmFyIHBlclBhZ2UgPSBtYXguYXBwbHkodm9pZCAwLCB0aGlzLmJyZWFrcG9pbnRzLm1hcChmdW5jdGlvbiAoX3JlZjYpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMyID0gX3JlZjZbMV07XG4gICAgICAgIHJldHVybiBvcHRpb25zMi5wZXJQYWdlO1xuICAgICAgfSkpO1xuICAgICAgcmV0dXJuIHBlclBhZ2UgKiAoKG9wdGlvbnMuZmxpY2tNYXhQYWdlcyB8fCAxKSArIDEpO1xuICAgIH1cblxuICAgIHJldHVybiAwO1xuICB9O1xuXG4gIF9wcm90bzMucmVuZGVyQXJyb3dzID0gZnVuY3Rpb24gcmVuZGVyQXJyb3dzKCkge1xuICAgIHZhciBodG1sID0gXCJcIjtcbiAgICBodG1sICs9IFwiPGRpdiBjbGFzcz1cXFwiXCIgKyB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5hcnJvd3MgKyBcIlxcXCI+XCI7XG4gICAgaHRtbCArPSB0aGlzLnJlbmRlckFycm93KHRydWUpO1xuICAgIGh0bWwgKz0gdGhpcy5yZW5kZXJBcnJvdyhmYWxzZSk7XG4gICAgaHRtbCArPSBcIjwvZGl2PlwiO1xuICAgIHJldHVybiBodG1sO1xuICB9O1xuXG4gIF9wcm90bzMucmVuZGVyQXJyb3cgPSBmdW5jdGlvbiByZW5kZXJBcnJvdyhwcmV2KSB7XG4gICAgdmFyIF90aGlzJG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIGNsYXNzZXMgPSBfdGhpcyRvcHRpb25zLmNsYXNzZXMsXG4gICAgICAgIGkxOG4gPSBfdGhpcyRvcHRpb25zLmkxOG47XG4gICAgdmFyIGF0dHJzID0ge1xuICAgICAgY2xhc3M6IGNsYXNzZXMuYXJyb3cgKyBcIiBcIiArIChwcmV2ID8gY2xhc3Nlcy5wcmV2IDogY2xhc3Nlcy5uZXh0KSxcbiAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgICBhcmlhTGFiZWw6IHByZXYgPyBpMThuLnByZXYgOiBpMThuLm5leHRcbiAgICB9O1xuICAgIHJldHVybiBcIjxidXR0b24gXCIgKyB0aGlzLmJ1aWxkQXR0cnMoYXR0cnMpICsgXCI+PHN2ZyB4bWxucz1cXFwiXCIgKyBYTUxfTkFNRV9TUEFDRSArIFwiXFxcIiB2aWV3Qm94PVxcXCIwIDAgXCIgKyBTSVpFICsgXCIgXCIgKyBTSVpFICsgXCJcXFwiIHdpZHRoPVxcXCJcIiArIFNJWkUgKyBcIlxcXCIgaGVpZ2h0PVxcXCJcIiArIFNJWkUgKyBcIlxcXCI+PHBhdGggZD1cXFwiXCIgKyAodGhpcy5vcHRpb25zLmFycm93UGF0aCB8fCBQQVRIKSArIFwiXFxcIiAvPjwvc3ZnPjwvYnV0dG9uPlwiO1xuICB9O1xuXG4gIF9wcm90bzMuaHRtbCA9IGZ1bmN0aW9uIGh0bWwoKSB7XG4gICAgdmFyIF90aGlzJGNvbmZpZyA9IHRoaXMuY29uZmlnLFxuICAgICAgICByb290Q2xhc3MgPSBfdGhpcyRjb25maWcucm9vdENsYXNzLFxuICAgICAgICBsaXN0VGFnID0gX3RoaXMkY29uZmlnLmxpc3RUYWcsXG4gICAgICAgIGFycm93cyA9IF90aGlzJGNvbmZpZy5hcnJvd3MsXG4gICAgICAgIGJlZm9yZVRyYWNrID0gX3RoaXMkY29uZmlnLmJlZm9yZVRyYWNrLFxuICAgICAgICBhZnRlclRyYWNrID0gX3RoaXMkY29uZmlnLmFmdGVyVHJhY2ssXG4gICAgICAgIHNsaWRlciA9IF90aGlzJGNvbmZpZy5zbGlkZXIsXG4gICAgICAgIGJlZm9yZVNsaWRlciA9IF90aGlzJGNvbmZpZy5iZWZvcmVTbGlkZXIsXG4gICAgICAgIGFmdGVyU2xpZGVyID0gX3RoaXMkY29uZmlnLmFmdGVyU2xpZGVyO1xuICAgIHZhciBodG1sID0gXCJcIjtcbiAgICBodG1sICs9IFwiPGRpdiBpZD1cXFwiXCIgKyB0aGlzLmlkICsgXCJcXFwiIGNsYXNzPVxcXCJcIiArIHRoaXMuYnVpbGRDbGFzc2VzKCkgKyBcIiBcIiArIChyb290Q2xhc3MgfHwgXCJcIikgKyBcIlxcXCI+XCI7XG4gICAgaHRtbCArPSBcIjxzdHlsZT5cIiArIHRoaXMuU3R5bGUuYnVpbGQoKSArIFwiPC9zdHlsZT5cIjtcblxuICAgIGlmIChzbGlkZXIpIHtcbiAgICAgIGh0bWwgKz0gYmVmb3JlU2xpZGVyIHx8IFwiXCI7XG4gICAgICBodG1sICs9IFwiPGRpdiBjbGFzcz1cXFwic3BsaWRlX19zbGlkZXJcXFwiPlwiO1xuICAgIH1cblxuICAgIGh0bWwgKz0gYmVmb3JlVHJhY2sgfHwgXCJcIjtcblxuICAgIGlmIChhcnJvd3MpIHtcbiAgICAgIGh0bWwgKz0gdGhpcy5yZW5kZXJBcnJvd3MoKTtcbiAgICB9XG5cbiAgICBodG1sICs9IFwiPGRpdiBjbGFzcz1cXFwic3BsaWRlX190cmFja1xcXCI+XCI7XG4gICAgaHRtbCArPSBcIjxcIiArIGxpc3RUYWcgKyBcIiBjbGFzcz1cXFwic3BsaWRlX19saXN0XFxcIj5cIjtcbiAgICBodG1sICs9IHRoaXMucmVuZGVyU2xpZGVzKCk7XG4gICAgaHRtbCArPSBcIjwvXCIgKyBsaXN0VGFnICsgXCI+XCI7XG4gICAgaHRtbCArPSBcIjwvZGl2PlwiO1xuICAgIGh0bWwgKz0gYWZ0ZXJUcmFjayB8fCBcIlwiO1xuXG4gICAgaWYgKHNsaWRlcikge1xuICAgICAgaHRtbCArPSBcIjwvZGl2PlwiO1xuICAgICAgaHRtbCArPSBhZnRlclNsaWRlciB8fCBcIlwiO1xuICAgIH1cblxuICAgIGh0bWwgKz0gXCI8L2Rpdj5cIjtcbiAgICByZXR1cm4gaHRtbDtcbiAgfTtcblxuICByZXR1cm4gU3BsaWRlUmVuZGVyZXI7XG59KCk7XG5cbmV4cG9ydCB7IENMQVNTRVMsIENMQVNTX0FDVElWRSwgQ0xBU1NfQVJST1csIENMQVNTX0FSUk9XUywgQ0xBU1NfQVJST1dfTkVYVCwgQ0xBU1NfQVJST1dfUFJFViwgQ0xBU1NfQ0xPTkUsIENMQVNTX0NPTlRBSU5FUiwgQ0xBU1NfRk9DVVNfSU4sIENMQVNTX0lOSVRJQUxJWkVELCBDTEFTU19MSVNULCBDTEFTU19MT0FESU5HLCBDTEFTU19ORVhULCBDTEFTU19PVkVSRkxPVywgQ0xBU1NfUEFHSU5BVElPTiwgQ0xBU1NfUEFHSU5BVElPTl9QQUdFLCBDTEFTU19QUkVWLCBDTEFTU19QUk9HUkVTUywgQ0xBU1NfUFJPR1JFU1NfQkFSLCBDTEFTU19ST09ULCBDTEFTU19TTElERSwgQ0xBU1NfU1BJTk5FUiwgQ0xBU1NfU1IsIENMQVNTX1RPR0dMRSwgQ0xBU1NfVE9HR0xFX1BBVVNFLCBDTEFTU19UT0dHTEVfUExBWSwgQ0xBU1NfVFJBQ0ssIENMQVNTX1ZJU0lCTEUsIERFRkFVTFRTLCBFVkVOVF9BQ1RJVkUsIEVWRU5UX0FSUk9XU19NT1VOVEVELCBFVkVOVF9BUlJPV1NfVVBEQVRFRCwgRVZFTlRfQVVUT1BMQVlfUEFVU0UsIEVWRU5UX0FVVE9QTEFZX1BMQVksIEVWRU5UX0FVVE9QTEFZX1BMQVlJTkcsIEVWRU5UX0NMSUNLLCBFVkVOVF9ERVNUUk9ZLCBFVkVOVF9EUkFHLCBFVkVOVF9EUkFHR0VELCBFVkVOVF9EUkFHR0lORywgRVZFTlRfRU5EX0lOREVYX0NIQU5HRUQsIEVWRU5UX0hJRERFTiwgRVZFTlRfSU5BQ1RJVkUsIEVWRU5UX0xBWllMT0FEX0xPQURFRCwgRVZFTlRfTU9VTlRFRCwgRVZFTlRfTU9WRSwgRVZFTlRfTU9WRUQsIEVWRU5UX05BVklHQVRJT05fTU9VTlRFRCwgRVZFTlRfT1ZFUkZMT1csIEVWRU5UX1BBR0lOQVRJT05fTU9VTlRFRCwgRVZFTlRfUEFHSU5BVElPTl9VUERBVEVELCBFVkVOVF9SRUFEWSwgRVZFTlRfUkVGUkVTSCwgRVZFTlRfUkVTSVpFLCBFVkVOVF9SRVNJWkVELCBFVkVOVF9TQ1JPTEwsIEVWRU5UX1NDUk9MTEVELCBFVkVOVF9TSElGVEVELCBFVkVOVF9TTElERV9LRVlET1dOLCBFVkVOVF9VUERBVEVELCBFVkVOVF9WSVNJQkxFLCBFdmVudEJpbmRlciwgRXZlbnRJbnRlcmZhY2UsIEZBREUsIExPT1AsIExUUiwgUlRMLCBSZXF1ZXN0SW50ZXJ2YWwsIFNMSURFLCBTVEFUVVNfQ0xBU1NFUywgU3BsaWRlLCBTcGxpZGVSZW5kZXJlciwgU3RhdGUsIFRUQiwgVGhyb3R0bGUsIFNwbGlkZSBhcyBkZWZhdWx0IH07XG4iLCIvLyBDbGFzcyB0aGF0IGhhbmRsZXMgdGhlIHBsYXliYWNrIG9mIHRoZSB3aG9sZSBib29rXHJcbmltcG9ydCB7XHJcbiAgICBCb29rLFxyXG4gICAgQm9va1R5cGUsXHJcbiAgICBQYWdlLFxyXG4gICAgVGV4dEVsZW1lbnQsXHJcbiAgICBJbWFnZUVsZW1lbnQsXHJcbiAgICBBdWRpb0VsZW1lbnQsXHJcbiAgICBBdWRpb1RpbWVzdGFtcHMsXHJcbiAgICBXb3JkVGltZXN0YW1wRWxlbWVudCxcclxufSBmcm9tIFwiLi4vTW9kZWxzL01vZGVsc1wiO1xyXG5pbXBvcnQgeyBFVkVOVF9BQ1RJVkUsIFNwbGlkZSB9IGZyb20gXCJAc3BsaWRlanMvc3BsaWRlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUGxheUJhY2tFbmdpbmUge1xyXG4gICAgY3VycmVudFBhZ2U6IG51bWJlcjtcclxuICAgIG51bWJlck9mUGFnZXM6IG51bWJlcjtcclxuICAgIHRyYW5zaXRpb25pbmdUb1BhZ2U6IGJvb2xlYW47XHJcblxyXG4gICAgaW1hZ2VzUGF0aDogc3RyaW5nO1xyXG4gICAgYXVkaW9QYXRoOiBzdHJpbmc7XHJcblxyXG4gICAgZW1wdHlHbG93SW1hZ2VUYWc6IHN0cmluZyA9IFwiZW1wdHlfZ2xvd19pbWFnZVwiO1xyXG5cclxuICAgIHNwbGlkZUhhbmRsZTogU3BsaWRlO1xyXG5cclxuICAgIGN1cnJlbnRCb29rVHlwZTogQm9va1R5cGU7XHJcblxyXG4gICAgYm9vazogQm9vaztcclxuXHJcbiAgICBjdXJyZW50UGFnZUF1dG9QbGF5ZXJJbnRlcnZhbDogYW55O1xyXG5cclxuICAgIGN1cnJlbnRseVBsYXlpbmdBdWRpb0VsZW1lbnQ6IEhUTUxBdWRpb0VsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjdXJyZW50V29yZFBsYXlpbmdUaW1lb3V0OiBOb2RlSlMuVGltZW91dDtcclxuXHJcbiAgICBjdXJyZW50R2xvd0ltYWdlVGltZW91dDogTm9kZUpTLlRpbWVvdXQ7XHJcblxyXG4gICAgY3VycmVudGx5QWN0aXZlR2xvd0ltYWdlczogSFRNTERpdkVsZW1lbnRbXSA9IFtdO1xyXG5cclxuICAgIGN1cnJlbnRseUFjdGl2ZVdvcmQ6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IoaW1hZ2VzUGF0aDogc3RyaW5nLCBhdWRpb1BhdGg6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuaW1hZ2VzUGF0aCA9IGltYWdlc1BhdGg7XHJcbiAgICAgICAgdGhpcy5hdWRpb1BhdGggPSBhdWRpb1BhdGg7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDA7XHJcbiAgICAgICAgdGhpcy5zcGxpZGVIYW5kbGUgPSBuZXcgU3BsaWRlKFwiLnNwbGlkZVwiLCB7XHJcbiAgICAgICAgICAgIGZpeGVkSGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQgLSAyMCxcclxuICAgICAgICB9KS5tb3VudCgpO1xyXG5cclxuICAgICAgICB0aGlzLnNwbGlkZUhhbmRsZS5vbihcIm1vdmVcIiwgKG5ld0luZGV4LCBvbGRJbmRleCwgZGVzdEluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRQYWdlICE9PSBuZXdJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJTdG9wcGluZyBhdWRpbyBmb3IgcGFnZSBmcm9tIG1vdmU6IFwiICsgb2xkSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uaW5nVG9QYWdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RvcFBhZ2VBdWRpbyh0aGlzLmJvb2sucGFnZXNbb2xkSW5kZXhdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNwbGlkZUhhbmRsZS5vbihcIm1vdmVkXCIsIChjdXJyZW50SW5kZXgsIHByZXZJbmRleCwgZGVzdEluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRQYWdlICE9PSBjdXJyZW50SW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGxheWluZyBhdWRpbyBmb3IgcGFnZSBmcm9tIG1vdmVkOiBcIiArIGN1cnJlbnRJbmRleCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gY3VycmVudEluZGV4O1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uaW5nVG9QYWdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXlQYWdlQXVkaW8odGhpcy5ib29rLnBhZ2VzW2N1cnJlbnRJbmRleF0sIGN1cnJlbnRJbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zcGxpZGVIYW5kbGUub24oXCJkcmFnXCIsIChuZXdJbmRleCwgb2xkSW5kZXgsIGRlc3RJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50UGFnZSAhPT0gbmV3SW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU3RvcHBpbmcgYXVkaW8gZm9yIHBhZ2UgZnJvbSBkcmFnOiBcIiArIG9sZEluZGV4KTtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvbmluZ1RvUGFnZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3BQYWdlQXVkaW8odGhpcy5ib29rLnBhZ2VzW29sZEluZGV4XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zcGxpZGVIYW5kbGUub24oXCJkcmFnZ2VkXCIsIChjdXJyZW50SW5kZXgsIHByZXZJbmRleCwgZGVzdEluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRQYWdlICE9PSBjdXJyZW50SW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGxheWluZyBhdWRpbyBmb3IgcGFnZSBmcm9tIGRyYWdnZWQ6IFwiICsgY3VycmVudEluZGV4KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBjdXJyZW50SW5kZXg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25pbmdUb1BhZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheVBhZ2VBdWRpbyh0aGlzLmJvb2sucGFnZXNbY3VycmVudEluZGV4XSwgY3VycmVudEluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFkZFBhZ2VSZXNpemVMaXN0ZW5lcigpO1xyXG4gICAgICAgIHRoaXMuYWRkTWluaW16YXRpb25MaXN0ZW5lcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZE1pbmltemF0aW9uTGlzdGVuZXIoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSBcInZpc2libGVcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5UGFnZUF1ZGlvKHRoaXMuYm9vay5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlXSwgdGhpcy5jdXJyZW50UGFnZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3BQYWdlQXVkaW8odGhpcy5ib29rLnBhZ2VzW3RoaXMuY3VycmVudFBhZ2VdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHN0b3BQYWdlQXVkaW8ocGFnZTogUGFnZSkge1xyXG4gICAgICAgIC8vIGxvb3AgdGhyb3VnaCBwYWdlJ3MgdmlzdWFsIGVsZW1lbnRzLCBpZiB3ZSBmaW5kIGFuIGF1ZGlvIG9iamVjdCBnZXQgaXQgYnkgaWQgYW5kIHN0b3AgaXRcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZ2UudmlzdWFsRWxlbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHZpc3VhbEVsZW1lbnQgPSBwYWdlLnZpc3VhbEVsZW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBpZiAodmlzdWFsRWxlbWVudC50eXBlID09PSBcImF1ZGlvXCIpIHtcclxuICAgICAgICAgICAgICAgIGxldCBhdWRpb0VsZW1lbnQ6IEF1ZGlvRWxlbWVudCA9IHZpc3VhbEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgYXVkaW9FbGVtZW50RG9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYXVkaW9FbGVtZW50LmRvbUlEKSBhcyBIVE1MQXVkaW9FbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgYXVkaW9FbGVtZW50RG9tLnBhdXNlKCk7XHJcbiAgICAgICAgICAgICAgICBhdWRpb0VsZW1lbnREb20uY3VycmVudFRpbWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmN1cnJlbnRQYWdlQXV0b1BsYXllckludGVydmFsKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYXVkaW9FbGVtZW50LmF1ZGlvVGltZXN0YW1wcy50aW1lc3RhbXBzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHdvcmRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYXVkaW9FbGVtZW50LmRvbUlEICsgXCJfd29yZF9cIiArIGopIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIHdvcmRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJjci1jbGlja2FibGUtd29yZC1hY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZEVsZW1lbnQuc3R5bGUuY29sb3IgPSBcIndoaXRlXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcGxheVBhZ2VBdWRpbyhwYWdlOiBQYWdlLCBwYWdlSW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgIC8vIGxvb3AgdGhyb3VnaCBwYWdlJ3MgdmlzdWFsIGVsZW1lbnRzLCBpZiB3ZSBmaW5kIGFuIGF1ZGlvIG9iamVjdCBnZXQgaXQgYnkgaWQgYW5kIHBsYXkgaXRcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkF0dGVtcHRpbmcgdG8gcGxheSBhdWRpbyBmb3IgcGFnZTogXCIgKyBwYWdlSW5kZXgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQm9vayBoYXM6IFwiICsgdGhpcy5ib29rLnBhZ2VzLmxlbmd0aCArIFwiIHBhZ2VzXCIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiVGhlIHBhZ2UgaGFzIFwiICsgcGFnZS52aXN1YWxFbGVtZW50cy5sZW5ndGggKyBcIiB2aXN1YWwgZWxlbWVudHNcIik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlLnZpc3VhbEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB2aXN1YWxFbGVtZW50ID0gcGFnZS52aXN1YWxFbGVtZW50c1tpXTtcclxuICAgICAgICAgICAgaWYgKHZpc3VhbEVsZW1lbnQudHlwZSA9PT0gXCJhdWRpb1wiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYXVkaW9FbGVtZW50OiBBdWRpb0VsZW1lbnQgPSB2aXN1YWxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGb3VuZCB0aGUgYXVkaW8gZWxlbWVudCBpbiBwYWdlJ3MgdmlzdWFsIGVsZW1lbnRzOiBcIiArIGF1ZGlvRWxlbWVudC5hdWRpb1NyYyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRvZXMgdGhlIGF1ZGlvIGVsZW1lbnQgaGF2ZSB0aW1lc3RhbXBzPyBcIiArIChhdWRpb0VsZW1lbnQuYXVkaW9UaW1lc3RhbXBzICE9PSB1bmRlZmluZWQgPyBcIlllc1wiIDogXCJOb1wiKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkF1ZGlvIGVsZW1lbnQgZG9tSUQ6IFwiICsgYXVkaW9FbGVtZW50LmRvbUlEKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IGF1ZGlvRWxlbWVudERvbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGF1ZGlvRWxlbWVudC5kb21JRCkgYXMgSFRNTEF1ZGlvRWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXVkaW8gZWxlbWVudCBkb20gaXMgbnVsbCBvciB1bmRlZmluZWQ/IFwiICsgKGF1ZGlvRWxlbWVudERvbSA9PT0gbnVsbCB8fCBhdWRpb0VsZW1lbnREb20gPT09IHVuZGVmaW5lZCA/IFwiWWVzXCIgOiBcIk5vXCIpKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgYXVkaW9FbGVtZW50RG9tLnBsYXkoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudGx5UGxheWluZ0F1ZGlvRWxlbWVudCA9IGF1ZGlvRWxlbWVudERvbTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgbGFzdFdvcmRJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudEluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlN0YXJ0aW5nIHRoZSBhdXRvIHBsYXllciBpbnRlcnZhbCBmb3Igd29yZCBoaWdobGlnaHRpbmcgd2l0aCA2MG1zIGludGVydmFsXCIpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlQXV0b1BsYXllckludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXVkaW9FbGVtZW50LmF1ZGlvVGltZXN0YW1wcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50VGltZSA9IGF1ZGlvRWxlbWVudERvbS5jdXJyZW50VGltZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBhdWRpb0VsZW1lbnQuYXVkaW9UaW1lc3RhbXBzLnRpbWVzdGFtcHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VGltZSA+PSBhdWRpb0VsZW1lbnQuYXVkaW9UaW1lc3RhbXBzLnRpbWVzdGFtcHNbal0uc3RhcnRUaW1lc3RhbXAgJiYgY3VycmVudFRpbWUgPD0gYXVkaW9FbGVtZW50LmF1ZGlvVGltZXN0YW1wcy50aW1lc3RhbXBzW2pdLmVuZFRpbWVzdGFtcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJbmRleCA9IGo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdvcmRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYXVkaW9FbGVtZW50LmRvbUlEICsgXCJfd29yZF9cIiArIGN1cnJlbnRJbmRleCkgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlBY3RpdmVXb3JkID0gd29yZEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNyLWNsaWNrYWJsZS13b3JkLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JkRWxlbWVudC5zdHlsZS5jb2xvciA9IGF1ZGlvRWxlbWVudC5nbG93Q29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmFibGVDb25uZWN0ZWRHcmFwaGljSGlnaGxpZ2h0aW5nKHBhZ2VJbmRleCwgY3VycmVudEluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdFdvcmRJbmRleCA8IGN1cnJlbnRJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiQ3VycmVudCBpbmRleDogXCIgKyBjdXJyZW50SW5kZXggKyBcIiBsYXN0IGluZGV4OiBcIiArIGxhc3RXb3JkSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3b3JkRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGF1ZGlvRWxlbWVudC5kb21JRCArIFwiX3dvcmRfXCIgKyBsYXN0V29yZEluZGV4KSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiY3ItY2xpY2thYmxlLXdvcmQtYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmRFbGVtZW50LnN0eWxlLmNvbG9yID0gXCJ3aGl0ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RXb3JkSW5kZXggPSBjdXJyZW50SW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRUaW1lID49IGF1ZGlvRWxlbWVudC5hdWRpb1RpbWVzdGFtcHMudGltZXN0YW1wc1thdWRpb0VsZW1lbnQuYXVkaW9UaW1lc3RhbXBzLnRpbWVzdGFtcHMubGVuZ3RoIC0gMV0uZW5kVGltZXN0YW1wIC0gMC4xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkZpbmlzaGVkIEhpZ2hsaWdodGluZyEgQ3VycmVudCBpbmRleDogXCIgKyBjdXJyZW50SW5kZXggKyBcIiBsYXN0IGluZGV4OiBcIiArIGxhc3RXb3JkSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdvcmRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYXVkaW9FbGVtZW50LmRvbUlEICsgXCJfd29yZF9cIiArIGN1cnJlbnRJbmRleCkgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiY3ItY2xpY2thYmxlLXdvcmQtYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZEVsZW1lbnQuc3R5bGUuY29sb3IgPSBcIndoaXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseVBsYXlpbmdBdWRpb0VsZW1lbnQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmN1cnJlbnRQYWdlQXV0b1BsYXllckludGVydmFsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIDYwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhZGRQYWdlUmVzaXplTGlzdGVuZXIoKSB7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNwbGlkZUhhbmRsZS5vcHRpb25zLmZpeGVkSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IC0gMjA7XHJcbiAgICAgICAgICAgIHRoaXMuc3BsaWRlSGFuZGxlLnJlZnJlc2goKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplQm9vayhib29rOiBCb29rKSB7XHJcbiAgICAgICAgdGhpcy5ib29rID0gYm9vaztcclxuICAgICAgICB0aGlzLmN1cnJlbnRCb29rVHlwZSA9IGJvb2suYm9va1R5cGU7XHJcbiAgICAgICAgdGhpcy5udW1iZXJPZlBhZ2VzID0gYm9vay5wYWdlcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRCb29rVHlwZSA9PT0gQm9va1R5cGUuQ3VyaW91c1JlYWRlcikge1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVDdXJpb3VzUmVhZGVyQm9vayhib29rKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY3VycmVudEJvb2tUeXBlID09PSBCb29rVHlwZS5HREwpIHtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplR0RMQm9vayhib29rKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZUN1cmlvdXNSZWFkZXJCb29rKGJvb2s6IEJvb2spIHtcclxuICAgICAgICB0aGlzLm51bWJlck9mUGFnZXMgPSBib29rLnBhZ2VzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib29rLnBhZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNsaWRlTGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICAgICAgICAgIGNvbnN0IHNsaWRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgICAgIHNsaWRlTGkuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgICAgICBzbGlkZUxpLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgc2xpZGVMaS5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHNsaWRlLnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xyXG4gICAgICAgICAgICBzbGlkZS5zdHlsZS53aWR0aCA9IFwiOTAlXCI7XHJcbiAgICAgICAgICAgIHNsaWRlLnN0eWxlLmhlaWdodCA9IFwiOTAlXCI7XHJcbiAgICAgICAgICAgIHNsaWRlLnN0eWxlLnRvcCA9IFwiLTQlXCI7XHJcblxyXG4gICAgICAgICAgICBzbGlkZUxpLmFwcGVuZENoaWxkKHNsaWRlKTtcclxuXHJcbiAgICAgICAgICAgIHNsaWRlTGkuY2xhc3NMaXN0LmFkZChcInNwbGlkZV9fc2xpZGVcIik7XHJcblxyXG4gICAgICAgICAgICBsZXQgc2VudGVuY2VJbml0aWFsaXplZEJ5QXVkaW8gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIC8vIEZpcnN0IHdlIGFyZSBhZGRpbmcgdGhlIGltYWdlIGFuZCBhdWRpbyBlbGVtZW50cyBhbmQgdGhlIHRleHQgYWZ0ZXJcclxuICAgICAgICAgICAgLy8gdGhlIHJlYXNvbmluZyBiZWhpbmQgdGhpcyBpcyB0aGF0IGlmIHRoZSBwYWdlIGNvbnRhaW5zIGFuIGF1ZGlvXHJcbiAgICAgICAgICAgIC8vIGVsZW1lbnQgaW4gdGhhdCBjYXNlIHdlIHNob3VsZCBpbml0aWFsaXplIHRleHQgZnJvbSB0aGUgYXVkaW9cclxuICAgICAgICAgICAgLy8gdGltZXN0YW1wcyB0aGF0IHdlIGdldCBmcm9tIHRoZSBjb250ZW50IGZpbGVcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBib29rLnBhZ2VzW2ldLnZpc3VhbEVsZW1lbnRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmlzdWFsRWxlbWVudCA9IGJvb2sucGFnZXNbaV0udmlzdWFsRWxlbWVudHNbal07XHJcbiAgICAgICAgICAgICAgICBpZiAodmlzdWFsRWxlbWVudC50eXBlID09IFwiaW1hZ2VcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbWFnZUVsZW1lbnQ6IEltYWdlRWxlbWVudCA9IHZpc3VhbEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhZ2VJbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGUuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVJbWFnZUNvbnRhaW5lcihwYWdlSW5kZXgsIGltYWdlRWxlbWVudCwgaikpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2aXN1YWxFbGVtZW50LnR5cGUgPT0gXCJhdWRpb1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VudGVuY2VJbml0aWFsaXplZEJ5QXVkaW8gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhdWRpb0VsZW1lbnQ6IEF1ZGlvRWxlbWVudCA9IHZpc3VhbEVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0ZXh0RWxlbWVudDogVGV4dEVsZW1lbnQgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJvb2sucGFnZXNbaV0udmlzdWFsRWxlbWVudHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHZpc3VhbEVsZW1lbnQgPSBib29rLnBhZ2VzW2ldLnZpc3VhbEVsZW1lbnRzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmlzdWFsRWxlbWVudC50eXBlID09IFwidGV4dFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0RWxlbWVudCA9IHZpc3VhbEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdlRWxlbWVudDogSW1hZ2VFbGVtZW50ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBib29rLnBhZ2VzW2ldLnZpc3VhbEVsZW1lbnRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2aXN1YWxFbGVtZW50ID0gYm9vay5wYWdlc1tpXS52aXN1YWxFbGVtZW50c1tqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZpc3VhbEVsZW1lbnQudHlwZSA9PSBcImltYWdlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudCA9IHZpc3VhbEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRleHRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhdWRpb0FuZFRleHREaXZzID0gdGhpcy5jcmVhdGVBdWRpb0FuZFRleHRDb250YWluZXJzKGksIGF1ZGlvRWxlbWVudCwgdGV4dEVsZW1lbnQsIGltYWdlRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLmFwcGVuZENoaWxkKGF1ZGlvQW5kVGV4dERpdnNbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5hcHBlbmRDaGlsZChhdWRpb0FuZFRleHREaXZzWzFdKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUF1ZGlvQ29udGFpbmVyKGF1ZGlvRWxlbWVudCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwbGlkZUhhbmRsZS5hZGQoc2xpZGVMaSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBzZW50ZW5jZSB3YXNuJ3Qgbm90IGluaXRpYWxpemVkIGJ5IHRoZSBhdWRpbyBvYmplY3RcclxuICAgICAgICAgICAgLy8gdGhlbiB3ZSBhZGQgaXQgaGVyZVxyXG4gICAgICAgICAgICBpZiAoIXNlbnRlbmNlSW5pdGlhbGl6ZWRCeUF1ZGlvKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJvb2sucGFnZXNbaV0udmlzdWFsRWxlbWVudHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdmlzdWFsRWxlbWVudCA9IGJvb2sucGFnZXNbaV0udmlzdWFsRWxlbWVudHNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZpc3VhbEVsZW1lbnQudHlwZSA9PSBcInRleHRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGV4dEVsZW1lbnQ6IFRleHRFbGVtZW50ID0gdmlzdWFsRWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlVGV4dENvbnRhaW5lcih0ZXh0RWxlbWVudCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVUZXh0Q29udGFpbmVyKHRleHRFbGVtZW50OiBUZXh0RWxlbWVudCk6IEhUTUxEaXZFbGVtZW50IHtcclxuICAgICAgICBsZXQgdGV4dEVsZW1lbnREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5pZCA9IFwiY3ItdGV4dFwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LmNsYXNzTGlzdC5hZGQoXCJjci10ZXh0XCIpO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLndlYmtpdFRleHRTdHJva2UgPSBcIjFweCAjMzAzMDMwXCI7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUuY29sb3IgPSBcIiNGRkZGRkZcIjtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS50ZXh0U2hhZG93ID0gXCIwLjFyZW0gMC4xNXJlbSAwLjFyZW0gIzMwMzAzMFwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmZvbnRGYW1pbHkgPSBcIlF1aWNrc2FuZFwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmZvbnRXZWlnaHQgPSBcIjgwMFwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmZvbnRTaXplID0gXCJpbmhlcml0XCI7XHJcbiAgICAgICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgYWZ0ZXIgd2UgaGF2ZSBmaXhlcyBmcm9tIHRoZSBwYXJ0bmVyIHRlYW0gb24gdGhlc2UgYm9va3NcclxuICAgICAgICBpZiAodGhpcy5ib29rLmJvb2tOYW1lLmluY2x1ZGVzKFwiQ29tZUNvbWVcIikgfHxcclxuICAgICAgICB0aGlzLmJvb2suYm9va05hbWUuaW5jbHVkZXMoXCJJTG92ZVwiKSB8fFxyXG4gICAgICAgIHRoaXMuYm9vay5ib29rTmFtZS5pbmNsdWRlcyhcIkd1ZXNzV2hhdElBbVwiKSB8fFxyXG4gICAgICAgIHRoaXMuYm9vay5ib29rTmFtZS5pbmNsdWRlcyhcIlRoZVVtYnJlbGxhc1wiKSB8fFxyXG4gICAgICAgIHRoaXMuYm9vay5ib29rTmFtZS5pbmNsdWRlcyhcIklBbUZseWluZ1wiKSkge1xyXG4gICAgICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS50b3AgPSB0ZXh0RWxlbWVudC5wb3NpdGlvblkgKyBcIiVcIjtcclxuICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUubGVmdCA9IFwiMCVcIjtcclxuICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUuaGVpZ2h0ID0gdGV4dEVsZW1lbnQuaGVpZ2h0ICsgXCIlXCI7XHJcbiAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUudG9wID0gdGV4dEVsZW1lbnQucG9zaXRpb25ZICsgXCIlXCI7XHJcbiAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmxlZnQgPSB0ZXh0RWxlbWVudC5wb3NpdGlvblggKyBcIiVcIjtcclxuICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUud2lkdGggPSB0ZXh0RWxlbWVudC53aWR0aCArIFwiJVwiO1xyXG4gICAgICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5oZWlnaHQgPSB0ZXh0RWxlbWVudC5oZWlnaHQgKyBcIiVcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGV4dEVsZW1lbnREaXYuaW5uZXJIVE1MID0gdGV4dEVsZW1lbnQudGV4dENvbnRlbnRBc0hUTUwucmVwbGFjZShcIjIuMjVlbVwiLCBcIlwiKTtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5pbm5lckhUTUwgPSB0ZXh0RWxlbWVudC50ZXh0Q29udGVudEFzSFRNTC5yZXBsYWNlKC9mb250LXNpemU6W147XSs7L2csIFwiXCIpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGV4dEVsZW1lbnREaXY7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlSW1hZ2VDb250YWluZXIocGFnZUluZGV4OiBudW1iZXIsIGltYWdlRWxlbWVudDogSW1hZ2VFbGVtZW50LCBlbGVtZW50SW5kZXg6IG51bWJlcik6IEhUTUxEaXZFbGVtZW50IHtcclxuICAgICAgICBsZXQgaW1hZ2VFbGVtZW50RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgaW1hZ2VFbGVtZW50RGl2LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgICAgIC8vIFRPRE86IHJlbW92ZSB0aGVzZSBsb2dpYyBlZGl0cyB3aGVuIHRoZXNlIGJvb2tzIGFyZSBmaXhlZC5cclxuICAgICAgICBpZiAodGhpcy5ib29rLmJvb2tOYW1lLmluY2x1ZGVzKFwiQ29tZUNvbWVcIikgfHxcclxuICAgICAgICB0aGlzLmJvb2suYm9va05hbWUuaW5jbHVkZXMoXCJJTG92ZVwiKSB8fFxyXG4gICAgICAgIHRoaXMuYm9vay5ib29rTmFtZS5pbmNsdWRlcyhcIkd1ZXNzV2hhdElBbVwiKSB8fFxyXG4gICAgICAgIHRoaXMuYm9vay5ib29rTmFtZS5pbmNsdWRlcyhcIlRoZVVtYnJlbGxhc1wiKSB8fFxyXG4gICAgICAgIHRoaXMuYm9vay5ib29rTmFtZS5pbmNsdWRlcyhcIklBbUZseWluZ1wiKSkge1xyXG4gICAgICAgICAgICBpZiAoaW1hZ2VFbGVtZW50LmltYWdlU291cmNlID09PSB0aGlzLmVtcHR5R2xvd0ltYWdlVGFnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpbWFnZUVsZW1lbnREaXYuc3R5bGUubGVmdCA9IGltYWdlRWxlbWVudC5wb3NpdGlvblggKyAoaW1hZ2VFbGVtZW50LnBvc2l0aW9uWCA8PSA2MCA/IDEwIDogLTEwKSArIFwiJVwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKGltYWdlRWxlbWVudC5wb3NpdGlvblggPD0gNDIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnREaXYuc3R5bGUubGVmdCA9IGltYWdlRWxlbWVudC5wb3NpdGlvblggKyAxMCArIFwiJVwiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbWFnZUVsZW1lbnQucG9zaXRpb25YID49IDcwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50RGl2LnN0eWxlLmxlZnQgPSBpbWFnZUVsZW1lbnQucG9zaXRpb25YIC0gMTAgKyBcIiVcIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50RGl2LnN0eWxlLmxlZnQgPSBpbWFnZUVsZW1lbnQucG9zaXRpb25YICsgXCIlXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnREaXYuc3R5bGUud2lkdGggPSBpbWFnZUVsZW1lbnQud2lkdGggKiAwLjcgKyBcIiVcIjtcclxuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudERpdi5zdHlsZS5oZWlnaHQgPSBpbWFnZUVsZW1lbnQuaGVpZ2h0ICogMC43ICsgXCIlXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnREaXYuc3R5bGUubGVmdCA9IGltYWdlRWxlbWVudC5wb3NpdGlvblggKyAxMCArIFwiJVwiO1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50RGl2LnN0eWxlLndpZHRoID0gaW1hZ2VFbGVtZW50LndpZHRoICogMC44ICsgXCIlXCI7XHJcbiAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnREaXYuc3R5bGUuaGVpZ2h0ID0gaW1hZ2VFbGVtZW50LmhlaWdodCAqIDAuOCArIFwiJVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGltYWdlRWxlbWVudERpdi5zdHlsZS50b3AgPSBpbWFnZUVsZW1lbnQucG9zaXRpb25ZICsgXCIlXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW1hZ2VFbGVtZW50RGl2LnN0eWxlLnRvcCA9IGltYWdlRWxlbWVudC5wb3NpdGlvblkgKyBcIiVcIjtcclxuICAgICAgICAgICAgaW1hZ2VFbGVtZW50RGl2LnN0eWxlLmxlZnQgPSBpbWFnZUVsZW1lbnQucG9zaXRpb25YICsgXCIlXCI7XHJcbiAgICAgICAgICAgIGltYWdlRWxlbWVudERpdi5zdHlsZS53aWR0aCA9IGltYWdlRWxlbWVudC53aWR0aCArIFwiJVwiO1xyXG4gICAgICAgICAgICBpbWFnZUVsZW1lbnREaXYuc3R5bGUuaGVpZ2h0ID0gaW1hZ2VFbGVtZW50LmhlaWdodCArIFwiJVwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGltYWdlRWxlbWVudC5pbWFnZVNvdXJjZSA9PT0gdGhpcy5lbXB0eUdsb3dJbWFnZVRhZykge1xyXG4gICAgICAgICAgICBpbWFnZUVsZW1lbnREaXYuY2xhc3NMaXN0LmFkZChcImNyLWltYWdlLWVtcHR5LWdsb3dcIik7XHJcbiAgICAgICAgICAgIC8vIFVzaW5nIGNsYXNzZXMgaGVyZSBpbnN0ZWFkIG9mIGlkIGFzc2lnbm1lbnQsIGJlY2F1c2Ugd2UgY291bGQgaGF2ZSBtdWx0aXBsZSBnbG93aW5nIGRpdnNcclxuICAgICAgICAgICAgLy8gYXR0YWNoZWQgdG8gb25lIHdvcmQgaW4gdGhlIHNlbnRlbmNlIGFuZCBoYXZpbmcgbXVsdGlwbGUgZWxlbWVudHMgd2l0aCB0aGUgc2FtZSBpZCBpcyBub3RcclxuICAgICAgICAgICAgLy8gYWxsb3dlZCBpbiBIVE1MXHJcbiAgICAgICAgICAgIGlmIChpbWFnZUVsZW1lbnQuZG9tSUQgPT09IHVuZGVmaW5lZCB8fCBpbWFnZUVsZW1lbnQuZG9tSUQgPT09IG51bGwgfHwgaW1hZ2VFbGVtZW50LmRvbUlEID09PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IFwiaW1nXCIgKyBwYWdlSW5kZXggKyBcIl9cIiArIGVsZW1lbnRJbmRleDtcclxuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudERpdi5pZCA9IGlkO1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50RGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBtZWFucyB0aGF0IHRoZSBnbG93aW5nIG9iamVjdCBpc24ndCBjb25uZWN0ZWQgdG8gYW55IHdvcmQgaW4gdGhlIHNlbnRlbmNlLCBpdCBzaG91bGQgc3RpbGwgaGF2ZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgZ2xvdyBlZmZlY3QgdGhvdWdoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVTdGFuZGFsb25lR2xvd0ltYWdlQ2xpY2socGFnZUluZGV4LCBpZCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudERpdi5jbGFzc0xpc3QuYWRkKGltYWdlRWxlbWVudC5kb21JRCk7XHJcbiAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnREaXYuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUdsb3dJbWFnZUNsaWNrKHBhZ2VJbmRleCwgaW1hZ2VFbGVtZW50LmRvbUlELnNwbGl0KFwiX1wiKVsxXSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGltYWdlRWxlbWVudERpdi5pZCA9IGltYWdlRWxlbWVudC5kb21JRDtcclxuICAgICAgICAgICAgaW1hZ2VFbGVtZW50RGl2LmNsYXNzTGlzdC5hZGQoXCJjci1pbWFnZVwiKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBpbWFnZUVsZW1lbnRJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICAgICAgICBpbWFnZUVsZW1lbnRJbWcuc3JjID1cclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzUGF0aCArIGltYWdlRWxlbWVudC5pbWFnZVNvdXJjZS5yZXBsYWNlKFwiaW1hZ2VzL1wiLCBcIlwiKTtcclxuICAgICAgICAgICAgaW1hZ2VFbGVtZW50SW1nLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgIGltYWdlRWxlbWVudEltZy5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgaW1hZ2VFbGVtZW50RGl2LmFwcGVuZENoaWxkKGltYWdlRWxlbWVudEltZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaW1hZ2VFbGVtZW50RGl2O1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUF1ZGlvQ29udGFpbmVyKGF1ZGlvRWxlbWVudDogQXVkaW9FbGVtZW50KTogSFRNTERpdkVsZW1lbnQge1xyXG4gICAgICAgIGxldCBhdWRpb0VsZW1lbnREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgICAgICBhdWRpb0VsZW1lbnREaXYuY2xhc3NMaXN0LmFkZChcImNyLWF1ZGlvXCIpO1xyXG4gICAgICAgIGF1ZGlvRWxlbWVudERpdi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuXHJcbiAgICAgICAgbGV0IHBhZ2VBdWRpbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhdWRpb1wiKTtcclxuICAgICAgICBwYWdlQXVkaW8uaWQgPSBhdWRpb0VsZW1lbnQuZG9tSUQ7XHJcbiAgICAgICAgcGFnZUF1ZGlvLnNyYyA9IHRoaXMuYXVkaW9QYXRoICsgYXVkaW9FbGVtZW50LmF1ZGlvU3JjLnJlcGxhY2UoXCJhdWRpb3MvXCIsIFwiXCIpO1xyXG4gICAgICAgIHBhZ2VBdWRpby5jb250cm9scyA9IGZhbHNlO1xyXG4gICAgICAgIGF1ZGlvRWxlbWVudERpdi5hcHBlbmRDaGlsZChwYWdlQXVkaW8pO1xyXG5cclxuICAgICAgICBpZiAoYXVkaW9FbGVtZW50LmF1ZGlvVGltZXN0YW1wcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXVkaW9FbGVtZW50LmF1ZGlvVGltZXN0YW1wcy50aW1lc3RhbXBzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgd29yZFRpbWVzdGFtcEVsZW1lbnQ6IFdvcmRUaW1lc3RhbXBFbGVtZW50ID0gYXVkaW9FbGVtZW50LmF1ZGlvVGltZXN0YW1wcy50aW1lc3RhbXBzW2ldO1xyXG4gICAgICAgICAgICAgICAgbGV0IHdvcmRBdWRpb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIik7XHJcbiAgICAgICAgICAgICAgICB3b3JkQXVkaW9FbGVtZW50LmlkID0gd29yZFRpbWVzdGFtcEVsZW1lbnQuZG9tSUQ7XHJcbiAgICAgICAgICAgICAgICB3b3JkQXVkaW9FbGVtZW50LnNyYyA9IHRoaXMuYXVkaW9QYXRoICsgd29yZFRpbWVzdGFtcEVsZW1lbnQuYXVkaW9TcmMucmVwbGFjZShcImF1ZGlvcy9cIiwgXCJcIik7XHJcbiAgICAgICAgICAgICAgICB3b3JkQXVkaW9FbGVtZW50LmNvbnRyb2xzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBhdWRpb0VsZW1lbnREaXYuYXBwZW5kQ2hpbGQod29yZEF1ZGlvRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhdWRpb0VsZW1lbnREaXY7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQXVkaW9BbmRUZXh0Q29udGFpbmVycyhwYWdlSW5kZXg6IG51bWJlciwgYXVkaW9FbGVtZW50OiBBdWRpb0VsZW1lbnQsIHRleHRFbGVtZW50OiBUZXh0RWxlbWVudCwgaW1hZ2VFbGVtZW50OiBJbWFnZUVsZW1lbnQpOiBIVE1MRGl2RWxlbWVudFtdIHtcclxuICAgICAgICBsZXQgYXVkaW9BbmRUZXh0QXJyYXk6IEhUTUxEaXZFbGVtZW50W10gPSBBcnJheSgpO1xyXG5cclxuICAgICAgICBsZXQgYXVkaW9FbGVtZW50RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgYXVkaW9FbGVtZW50RGl2LmNsYXNzTGlzdC5hZGQoXCJjci1hdWRpb1wiKTtcclxuICAgICAgICBhdWRpb0VsZW1lbnREaXYuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcblxyXG4gICAgICAgIGxldCBwYWdlQXVkaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIik7XHJcbiAgICAgICAgcGFnZUF1ZGlvLmlkID0gYXVkaW9FbGVtZW50LmRvbUlEO1xyXG4gICAgICAgIHBhZ2VBdWRpby5zcmMgPSB0aGlzLmF1ZGlvUGF0aCArIGF1ZGlvRWxlbWVudC5hdWRpb1NyYy5yZXBsYWNlKFwiYXVkaW9zL1wiLCBcIlwiKTtcclxuICAgICAgICBwYWdlQXVkaW8uY29udHJvbHMgPSBmYWxzZTtcclxuICAgICAgICBhdWRpb0VsZW1lbnREaXYuYXBwZW5kQ2hpbGQocGFnZUF1ZGlvKTtcclxuXHJcbiAgICAgICAgbGV0IHNlbnRlbmNlQXJyYXlUcmltbWVkOiBzdHJpbmdbXSA9IEFycmF5KCk7XHJcblxyXG4gICAgICAgIGlmIChhdWRpb0VsZW1lbnQuYXVkaW9UaW1lc3RhbXBzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdWRpb0VsZW1lbnQuYXVkaW9UaW1lc3RhbXBzLnRpbWVzdGFtcHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCB3b3JkVGltZXN0YW1wRWxlbWVudDogV29yZFRpbWVzdGFtcEVsZW1lbnQgPSBhdWRpb0VsZW1lbnQuYXVkaW9UaW1lc3RhbXBzLnRpbWVzdGFtcHNbaV07XHJcbiAgICAgICAgICAgICAgICBsZXQgd29yZEF1ZGlvRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhdWRpb1wiKTtcclxuICAgICAgICAgICAgICAgIHdvcmRBdWRpb0VsZW1lbnQuaWQgPSB3b3JkVGltZXN0YW1wRWxlbWVudC5kb21JRDtcclxuICAgICAgICAgICAgICAgIHdvcmRBdWRpb0VsZW1lbnQuc3JjID0gdGhpcy5hdWRpb1BhdGggKyB3b3JkVGltZXN0YW1wRWxlbWVudC5hdWRpb1NyYy5yZXBsYWNlKFwiYXVkaW9zL1wiLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgIHdvcmRBdWRpb0VsZW1lbnQuY29udHJvbHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHNlbnRlbmNlQXJyYXlUcmltbWVkLnB1c2god29yZFRpbWVzdGFtcEVsZW1lbnQud29yZC50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgYXVkaW9FbGVtZW50RGl2LmFwcGVuZENoaWxkKHdvcmRBdWRpb0VsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhdWRpb0FuZFRleHRBcnJheS5wdXNoKGF1ZGlvRWxlbWVudERpdik7XHJcblxyXG4gICAgICAgIGxldCBhdWRpb0NvbnRlbnRET01JZCA9IGF1ZGlvRWxlbWVudC5kb21JRDtcclxuXHJcbiAgICAgICAgbGV0IHRleHRFbGVtZW50RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuaWQgPSBcImNyLXRleHRcIjtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5jbGFzc0xpc3QuYWRkKFwiY3ItdGV4dFwiKTtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImNlbnRlclwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLndlYmtpdFRleHRTdHJva2UgPSBcIjFweCAjMzAzMDMwXCI7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUuY29sb3IgPSBcIiNGRkZGRkZcIjtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS50ZXh0U2hhZG93ID0gXCIwLjFyZW0gMC4xNXJlbSAwLjFyZW0gIzMwMzAzMFwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmZvbnRGYW1pbHkgPSBcIlF1aWNrc2FuZFwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmZvbnRXZWlnaHQgPSBcIjgwMFwiO1xyXG4gICAgICAgIC8vIHRleHRFbGVtZW50RGl2LnN0eWxlLmZvbnRTaXplID0gXCIycmVtXCI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMuYm9vay5ib29rTmFtZS5pbmNsdWRlcyhcIkNvbWVDb21lXCIpIHx8XHJcbiAgICAgICAgdGhpcy5ib29rLmJvb2tOYW1lLmluY2x1ZGVzKFwiSUxvdmVcIikgfHxcclxuICAgICAgICB0aGlzLmJvb2suYm9va05hbWUuaW5jbHVkZXMoXCJHdWVzc1doYXRJQW1cIikgfHxcclxuICAgICAgICB0aGlzLmJvb2suYm9va05hbWUuaW5jbHVkZXMoXCJUaGVVbWJyZWxsYXNcIikgfHxcclxuICAgICAgICB0aGlzLmJvb2suYm9va05hbWUuaW5jbHVkZXMoXCJJQW1GbHlpbmdcIikpIHtcclxuICAgICAgICAgICAgdGV4dEVsZW1lbnQud2lkdGggPSAxMDA7XHJcbiAgICAgICAgICAgIHRleHRFbGVtZW50LnBvc2l0aW9uWCA9IDA7XHJcbiAgICAgICAgICAgIHRleHRFbGVtZW50LnBvc2l0aW9uWSA9IDgxO1xyXG4gICAgICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS50b3AgPSBcIjgxJVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLnRvcCA9IHRleHRFbGVtZW50LnBvc2l0aW9uWSArIFwiJVwiO1xyXG4gICAgICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5oZWlnaHQgPSB0ZXh0RWxlbWVudC5oZWlnaHQgKyBcIiVcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChpbWFnZUVsZW1lbnQucG9zaXRpb25YID4gMjggJiYgdGV4dEVsZW1lbnQud2lkdGggPCA4OCAmJiB0ZXh0RWxlbWVudC5wb3NpdGlvblkgPCA2NSkge1xyXG4gICAgICAgICAgICAvLyBMZWZ0IHNpZGUgb2YgdGhlIGltYWdlLCB0eXBpY2FsbHkgIHRoZSBsZWZ0IGFsaWduZWQgdGV4dCBzdGFydHMgd2F5IGFib3ZlIGNvbXBhcmVkIHRvIHRoZSBtaWRkbGUgdGV4dFxyXG4gICAgICAgICAgICAvLyB3aGljaCB3b3VsZCBoYXZlIHBvc2l0aW9uWSA+IDcwIGlmIGl0J3MgYXQgdGhlIGJvdHRvbSBvZiB0aGUgaW1hZ2VcclxuICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUubGVmdCA9IHRleHRFbGVtZW50LnBvc2l0aW9uWCArIFwiJVwiO1xyXG4gICAgICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS53aWR0aCA9IFwiNDIlXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbWFnZUVsZW1lbnQucG9zaXRpb25YIDw9IDI4ICYmIHRleHRFbGVtZW50LndpZHRoIDwgODgpIHtcclxuICAgICAgICAgICAgLy8gUmlnaHQgc2lkZSBvZiB0aGUgaW1hZ2VcclxuICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUubGVmdCA9IHRleHRFbGVtZW50LnBvc2l0aW9uWCArIDIgKyBcIiVcIjtcclxuICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUud2lkdGggPSB0ZXh0RWxlbWVudC53aWR0aCArIFwiJVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc2VudGVuY2VQYXJhZ3JhcGg6IEhUTUxQYXJhZ3JhcGhFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgICAgICAgaWYgKGF1ZGlvRWxlbWVudC5hdWRpb1RpbWVzdGFtcHMgIT09IHVuZGVmaW5lZCAmJiBhdWRpb0VsZW1lbnQuYXVkaW9UaW1lc3RhbXBzLnRpbWVzdGFtcHMubGVuZ3RoID4gMTUpIHtcclxuICAgICAgICAgICAgc2VudGVuY2VQYXJhZ3JhcGguY2xhc3NMaXN0LmFkZChcImNyLXNlbnRlbmNlLW1pbmktc1wiKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGF1ZGlvRWxlbWVudC5hdWRpb1RpbWVzdGFtcHMgIT09IHVuZGVmaW5lZCAmJiBhdWRpb0VsZW1lbnQuYXVkaW9UaW1lc3RhbXBzLnRpbWVzdGFtcHMubGVuZ3RoID4gMTAgJiZcclxuICAgICAgICAgICAgYXVkaW9FbGVtZW50LmF1ZGlvVGltZXN0YW1wcy50aW1lc3RhbXBzLmxlbmd0aCA8PSAxNSkge1xyXG4gICAgICAgICAgICBzZW50ZW5jZVBhcmFncmFwaC5jbGFzc0xpc3QuYWRkKFwiY3Itc2VudGVuY2UtbWluaVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VudGVuY2VQYXJhZ3JhcGguc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAvLyBzZW50ZW5jZVBhcmFncmFwaC5zdHlsZS5mb250U2l6ZSA9IFwiMnJlbVwiO1xyXG4gICAgXHJcbiAgICAgICAgc2VudGVuY2VQYXJhZ3JhcGguc3R5bGUubWFyZ2luID0gXCIwcHhcIjtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZW50ZW5jZUFycmF5VHJpbW1lZC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgY2xpY2thYmxlV29yZEVsZW1lbnQ6IEhUTUxTcGFuRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGNsaWNrYWJsZVdvcmRFbGVtZW50LmlkID0gYXVkaW9Db250ZW50RE9NSWQgKyBcIl93b3JkX1wiICsgaTtcclxuICAgICAgICAgICAgY2xpY2thYmxlV29yZEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNyLWNsaWNrYWJsZS13b3JkXCIpO1xyXG4gICAgICAgICAgICBjbGlja2FibGVXb3JkRWxlbWVudC5zdHlsZS5tYXJnaW5MZWZ0ID0gXCIxMHB4XCI7XHJcbiAgICAgICAgICAgIGNsaWNrYWJsZVdvcmRFbGVtZW50LnN0eWxlLm1hcmdpblJpZ2h0ID0gXCIxMHB4XCI7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjbGlja2FibGVXb3JkRWxlbWVudC5pbm5lclRleHQgPSBzZW50ZW5jZUFycmF5VHJpbW1lZFtpXTtcclxuICAgICAgICAgICAgY2xpY2thYmxlV29yZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVJbnRlcmFjdGl2ZVdvcmRDbGljayhwYWdlSW5kZXgsIGkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc2VudGVuY2VQYXJhZ3JhcGguYXBwZW5kQ2hpbGQoY2xpY2thYmxlV29yZEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuYXBwZW5kQ2hpbGQoc2VudGVuY2VQYXJhZ3JhcGgpO1xyXG5cclxuICAgICAgICBhdWRpb0FuZFRleHRBcnJheS5wdXNoKHRleHRFbGVtZW50RGl2KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGF1ZGlvQW5kVGV4dEFycmF5O1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVN0YW5kYWxvbmVHbG93SW1hZ2VDbGljayhwYWdlSW5kZXg6IG51bWJlciwgaWQ6IHN0cmluZykge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRseVBsYXlpbmdBdWRpb0VsZW1lbnQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlQbGF5aW5nQXVkaW9FbGVtZW50LnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudGx5UGxheWluZ0F1ZGlvRWxlbWVudC5jdXJyZW50VGltZSA9IDA7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5jdXJyZW50UGFnZUF1dG9QbGF5ZXJJbnRlcnZhbCk7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmN1cnJlbnRXb3JkUGxheWluZ1RpbWVvdXQpO1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jdXJyZW50R2xvd0ltYWdlVGltZW91dCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzW2ldLnN0eWxlLmJveFNoYWRvdyA9IFwidHJhbnNwYXJlbnQgMHB4IDBweCAyMHB4IDIwcHhcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzID0gQXJyYXkoKTtcclxuXHJcbiAgICAgICAgbGV0IGdsb3dEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkgYXMgSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHRoaXMuY3VycmVudGx5QWN0aXZlR2xvd0ltYWdlcy5wdXNoKGdsb3dEaXYpO1xyXG4gICAgICAgIGdsb3dEaXYuc3R5bGUuYm94U2hhZG93ID0gXCJvcmFuZ2UgMHB4IDBweCAyMHB4IDIwcHhcIjtcclxuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50R2xvd0ltYWdlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgZ2xvd0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgICAgICAgZ2xvd0Rpdi5zdHlsZS5ib3hTaGFkb3cgPSBcInRyYW5zcGFyZW50IDBweCAwcHggMjBweCAyMHB4XCI7XHJcbiAgICAgICAgfSwgNjAwKTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVHbG93SW1hZ2VDbGljayhwYWdlSW5kZXg6IG51bWJlciwgd29yZEluZGV4OiBzdHJpbmcpIHtcclxuICAgICAgICAvLyBQYXJzZSB0aGUgbnVtYmVyIGZyb20gdGhlIHdvcmRJbmRleFxyXG4gICAgICAgIGxldCB3b3JkSW5kZXhOdW1iZXIgPSBwYXJzZUludCh3b3JkSW5kZXgpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlSW50ZXJhY3RpdmVXb3JkQ2xpY2socGFnZUluZGV4LCB3b3JkSW5kZXhOdW1iZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZUNvbm5lY3RlZEdyYXBoaWNIaWdobGlnaHRpbmcocGFnZUluZGV4OiBudW1iZXIsIHdvcmRJbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVJbnRlcmFjdGl2ZVdvcmRDbGljayhwYWdlSW5kZXgsIHdvcmRJbmRleCwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlSW50ZXJhY3RpdmVXb3JkQ2xpY2socGFnZUluZGV4OiBudW1iZXIsIHdvcmRJbmRleDogbnVtYmVyLCBnbG93SW1hZ2VPbmx5OiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50bHlQbGF5aW5nQXVkaW9FbGVtZW50ICE9PSBudWxsICYmICFnbG93SW1hZ2VPbmx5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudGx5UGxheWluZ0F1ZGlvRWxlbWVudC5wYXVzZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRseVBsYXlpbmdBdWRpb0VsZW1lbnQuY3VycmVudFRpbWUgPSAwO1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuY3VycmVudFBhZ2VBdXRvUGxheWVySW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jdXJyZW50V29yZFBsYXlpbmdUaW1lb3V0KTtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY3VycmVudEdsb3dJbWFnZVRpbWVvdXQpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50bHlBY3RpdmVXb3JkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseUFjdGl2ZVdvcmQuY2xhc3NMaXN0LnJlbW92ZShcImNyLWNsaWNrYWJsZS13b3JkLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudGx5QWN0aXZlV29yZC5zdHlsZS5jb2xvciA9IFwid2hpdGVcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzW2ldLnN0eWxlLmJveFNoYWRvdyA9IFwidHJhbnNwYXJlbnQgMHB4IDBweCAyMHB4IDIwcHhcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmN1cnJlbnRseUFjdGl2ZUdsb3dJbWFnZXMgPSBBcnJheSgpO1xyXG4gICAgICAgIGxldCBwYWdlID0gdGhpcy5ib29rLnBhZ2VzW3BhZ2VJbmRleF07XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlLnZpc3VhbEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB2aXN1YWxFbGVtZW50ID0gcGFnZS52aXN1YWxFbGVtZW50c1tpXTtcclxuICAgICAgICAgICAgaWYgKHZpc3VhbEVsZW1lbnQudHlwZSA9PT0gXCJhdWRpb1wiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYXVkaW9FbGVtZW50OiBBdWRpb0VsZW1lbnQgPSB2aXN1YWxFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB3b3JkQXVkaW9FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYXVkaW9FbGVtZW50LmF1ZGlvVGltZXN0YW1wcy50aW1lc3RhbXBzW3dvcmRJbmRleF0uZG9tSUQpIGFzIEhUTUxBdWRpb0VsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFnbG93SW1hZ2VPbmx5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSGlnaGxpZ2h0IHRoZSB3b3JkXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHdvcmRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYXVkaW9FbGVtZW50LmRvbUlEICsgXCJfd29yZF9cIiArIHdvcmRJbmRleCkgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlBY3RpdmVXb3JkID0gd29yZEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNyLWNsaWNrYWJsZS13b3JkLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB3b3JkRWxlbWVudC5zdHlsZS5jb2xvciA9IGF1ZGlvRWxlbWVudC5nbG93Q29sb3I7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRXb3JkUGxheWluZ1RpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd29yZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImNyLWNsaWNrYWJsZS13b3JkLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd29yZEVsZW1lbnQuc3R5bGUuY29sb3IgPSBcIndoaXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgNjAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBIaWdobGlnaHQgdGhlIGNvbm5lY3RlZCBnbG93IGltYWdlc1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbm5lY3RlZEdsb3dJbWFnZUNsYXNzID0gXCJpbWdcIiArIGF1ZGlvRWxlbWVudC5kb21JRCArIFwiX1wiICsgd29yZEluZGV4O1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbm5lY3RlZEdsb3dJbWFnZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNvbm5lY3RlZEdsb3dJbWFnZUNsYXNzKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29ubmVjdGVkR2xvd0ltYWdlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBnbG93RGl2ID0gY29ubmVjdGVkR2xvd0ltYWdlc1tpXSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseUFjdGl2ZUdsb3dJbWFnZXMucHVzaChnbG93RGl2KTtcclxuICAgICAgICAgICAgICAgICAgICBnbG93RGl2LnN0eWxlLmJveFNoYWRvdyA9IGF1ZGlvRWxlbWVudC5nbG93Q29sb3IgKyBcIiAwcHggMHB4IDIwcHggMjBweFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEdsb3dJbWFnZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbm5lY3RlZEdsb3dJbWFnZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGdsb3dEaXYgPSBjb25uZWN0ZWRHbG93SW1hZ2VzW2ldIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnbG93RGl2LnN0eWxlLmJveFNoYWRvdyA9IFwidHJhbnNwYXJlbnQgMHB4IDBweCAyMHB4IDIwcHhcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCA2MDApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghZ2xvd0ltYWdlT25seSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudGx5UGxheWluZ0F1ZGlvRWxlbWVudCA9IHdvcmRBdWRpb0VsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZEF1ZGlvRWxlbWVudC5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZUdETEJvb2soYm9vazogQm9vaykge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9vay5wYWdlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzbGlkZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgICAgICAgc2xpZGUuY2xhc3NMaXN0LmFkZChcInNwbGlkZV9fc2xpZGVcIik7XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgYSBmbGV4Ym94IGNvbnRhaW5lciB0byB0aGUgc2xpZGUgd2l0aCBhIGNvbHVtbiBsYXlvdXRcclxuICAgICAgICAgICAgbGV0IGZsZXhDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBmbGV4Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJnZGwtZmxleC1jb250YWluZXJcIik7XHJcbiAgICAgICAgICAgIGZsZXhDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgICAgICBmbGV4Q29udGFpbmVyLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSBcImNvbHVtblwiO1xyXG4gICAgICAgICAgICBmbGV4Q29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgZmxleENvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgZmxleENvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgZmxleENvbnRhaW5lci5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgICAgICAgICBzbGlkZS5hcHBlbmRDaGlsZChmbGV4Q29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGZvcmVhY2ggdmlzdWFsZWxlbWVudCBpbiBwYWdlIGFkZCB0byBzbGlkZVxyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJvb2sucGFnZXNbaV0udmlzdWFsRWxlbWVudHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCB2aXN1YWxFbGVtZW50ID0gYm9vay5wYWdlc1tpXS52aXN1YWxFbGVtZW50c1tqXTtcclxuICAgICAgICAgICAgICAgIGlmICh2aXN1YWxFbGVtZW50LnR5cGUgPT0gXCJ0ZXh0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGV4dEVsZW1lbnQ6IFRleHRFbGVtZW50ID0gdmlzdWFsRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGV4dEVsZW1lbnREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLndpZHRoID0gXCI2MCVcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuY2xhc3NMaXN0LmFkZChcImdkbC10ZXh0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLndlYmtpdFRleHRTdHJva2UgPSBcIjFweCAjMzAzMDMwXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUuY29sb3IgPSBcIiNGRkZGRkZcIjtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS50ZXh0U2hhZG93ID0gXCIwLjFyZW0gMC4xNXJlbSAwLjFyZW0gIzMwMzAzMFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmZvbnRGYW1pbHkgPSBcIlF1aWNrc2FuZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmZvbnRXZWlnaHQgPSBcIjgwMFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmZvbnRTaXplID0gXCIxLjdlbVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LmlubmVySFRNTCA9IHRleHRFbGVtZW50LnRleHRDb250ZW50QXNIVE1MLnJlcGxhY2UoXCIyLjI1ZW1cIiwgXCIyOHB4XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZsZXhDb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dEVsZW1lbnREaXYpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2aXN1YWxFbGVtZW50LnR5cGUgPT0gXCJpbWFnZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdlRWxlbWVudDogSW1hZ2VFbGVtZW50ID0gdmlzdWFsRWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdlRWxlbWVudERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50RGl2LmNsYXNzTGlzdC5hZGQoXCJnZGwtaW1hZ2VcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbWFnZUVsZW1lbnRJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudEltZy5zcmMgPSB0aGlzLmltYWdlc1BhdGggKyBpbWFnZUVsZW1lbnQuaW1hZ2VTb3VyY2UucmVwbGFjZShcImltYWdlcy9cIiwgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50SW1nLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50SW1nLnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudERpdi5hcHBlbmRDaGlsZChpbWFnZUVsZW1lbnRJbWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZsZXhDb250YWluZXIuYXBwZW5kQ2hpbGQoaW1hZ2VFbGVtZW50RGl2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zcGxpZGVIYW5kbGUuYWRkKHNsaWRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ29Ub05leHRQYWdlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRyYW5zaXRpb25pbmdUb1BhZ2UpIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50UGFnZSA8IHRoaXMubnVtYmVyT2ZQYWdlcykge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudHJhbnNpdGlvblRvUGFnZSh0aGlzLmN1cnJlbnRQYWdlKTtcclxuICAgIH1cclxuXHJcbiAgICBnb1RvUHJldmlvdXNQYWdlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRyYW5zaXRpb25pbmdUb1BhZ2UpIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50UGFnZSA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZS0tO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRyYW5zaXRpb25Ub1BhZ2UodGhpcy5jdXJyZW50UGFnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJhbnNpdGlvblRvUGFnZShwYWdlTnVtYmVyOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnRyYW5zaXRpb25pbmdUb1BhZ2UgPSB0cnVlO1xyXG4gICAgfVxyXG59XHJcbiIsInRyeXtzZWxmW1wid29ya2JveDp3aW5kb3c6Ni41LjNcIl0mJl8oKX1jYXRjaChuKXt9ZnVuY3Rpb24gbihuLHQpe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24ocil7dmFyIGU9bmV3IE1lc3NhZ2VDaGFubmVsO2UucG9ydDEub25tZXNzYWdlPWZ1bmN0aW9uKG4pe3Iobi5kYXRhKX0sbi5wb3N0TWVzc2FnZSh0LFtlLnBvcnQyXSl9KSl9ZnVuY3Rpb24gdChuLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgZT10W3JdO2UuZW51bWVyYWJsZT1lLmVudW1lcmFibGV8fCExLGUuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGUmJihlLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobixlLmtleSxlKX19ZnVuY3Rpb24gcihuLHQpeyhudWxsPT10fHx0Pm4ubGVuZ3RoKSYmKHQ9bi5sZW5ndGgpO2Zvcih2YXIgcj0wLGU9bmV3IEFycmF5KHQpO3I8dDtyKyspZVtyXT1uW3JdO3JldHVybiBlfWZ1bmN0aW9uIGUobix0KXt2YXIgZTtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgU3ltYm9sfHxudWxsPT1uW1N5bWJvbC5pdGVyYXRvcl0pe2lmKEFycmF5LmlzQXJyYXkobil8fChlPWZ1bmN0aW9uKG4sdCl7aWYobil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIG4pcmV0dXJuIHIobix0KTt2YXIgZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobikuc2xpY2UoOCwtMSk7cmV0dXJuXCJPYmplY3RcIj09PWUmJm4uY29uc3RydWN0b3ImJihlPW4uY29uc3RydWN0b3IubmFtZSksXCJNYXBcIj09PWV8fFwiU2V0XCI9PT1lP0FycmF5LmZyb20obik6XCJBcmd1bWVudHNcIj09PWV8fC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KGUpP3Iobix0KTp2b2lkIDB9fShuKSl8fHQmJm4mJlwibnVtYmVyXCI9PXR5cGVvZiBuLmxlbmd0aCl7ZSYmKG49ZSk7dmFyIGk9MDtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gaT49bi5sZW5ndGg/e2RvbmU6ITB9Ontkb25lOiExLHZhbHVlOm5baSsrXX19fXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKX1yZXR1cm4oZT1uW1N5bWJvbC5pdGVyYXRvcl0oKSkubmV4dC5iaW5kKGUpfXRyeXtzZWxmW1wid29ya2JveDpjb3JlOjYuNS4zXCJdJiZfKCl9Y2F0Y2gobil7fXZhciBpPWZ1bmN0aW9uKCl7dmFyIG49dGhpczt0aGlzLnByb21pc2U9bmV3IFByb21pc2UoKGZ1bmN0aW9uKHQscil7bi5yZXNvbHZlPXQsbi5yZWplY3Q9cn0pKX07ZnVuY3Rpb24gbyhuLHQpe3ZhciByPWxvY2F0aW9uLmhyZWY7cmV0dXJuIG5ldyBVUkwobixyKS5ocmVmPT09bmV3IFVSTCh0LHIpLmhyZWZ9dmFyIHU9ZnVuY3Rpb24obix0KXt0aGlzLnR5cGU9bixPYmplY3QuYXNzaWduKHRoaXMsdCl9O2Z1bmN0aW9uIGEobix0LHIpe3JldHVybiByP3Q/dChuKTpuOihuJiZuLnRoZW58fChuPVByb21pc2UucmVzb2x2ZShuKSksdD9uLnRoZW4odCk6bil9ZnVuY3Rpb24gYygpe312YXIgZj17dHlwZTpcIlNLSVBfV0FJVElOR1wifTtmdW5jdGlvbiBzKG4sdCl7aWYoIXQpcmV0dXJuIG4mJm4udGhlbj9uLnRoZW4oYyk6UHJvbWlzZS5yZXNvbHZlKCl9dmFyIHY9ZnVuY3Rpb24ocil7dmFyIGUsYztmdW5jdGlvbiB2KG4sdCl7dmFyIGUsYztyZXR1cm4gdm9pZCAwPT09dCYmKHQ9e30pLChlPXIuY2FsbCh0aGlzKXx8dGhpcykubm49e30sZS50bj0wLGUucm49bmV3IGksZS5lbj1uZXcgaSxlLm9uPW5ldyBpLGUudW49MCxlLmFuPW5ldyBTZXQsZS5jbj1mdW5jdGlvbigpe3ZhciBuPWUuZm4sdD1uLmluc3RhbGxpbmc7ZS50bj4wfHwhbyh0LnNjcmlwdFVSTCxlLnNuLnRvU3RyaW5nKCkpfHxwZXJmb3JtYW5jZS5ub3coKT5lLnVuKzZlND8oZS52bj10LG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInVwZGF0ZWZvdW5kXCIsZS5jbikpOihlLmhuPXQsZS5hbi5hZGQodCksZS5ybi5yZXNvbHZlKHQpKSwrK2UudG4sdC5hZGRFdmVudExpc3RlbmVyKFwic3RhdGVjaGFuZ2VcIixlLmxuKX0sZS5sbj1mdW5jdGlvbihuKXt2YXIgdD1lLmZuLHI9bi50YXJnZXQsaT1yLnN0YXRlLG89cj09PWUudm4sYT17c3c6cixpc0V4dGVybmFsOm8sb3JpZ2luYWxFdmVudDpufTshbyYmZS5tbiYmKGEuaXNVcGRhdGU9ITApLGUuZGlzcGF0Y2hFdmVudChuZXcgdShpLGEpKSxcImluc3RhbGxlZFwiPT09aT9lLnduPXNlbGYuc2V0VGltZW91dCgoZnVuY3Rpb24oKXtcImluc3RhbGxlZFwiPT09aSYmdC53YWl0aW5nPT09ciYmZS5kaXNwYXRjaEV2ZW50KG5ldyB1KFwid2FpdGluZ1wiLGEpKX0pLDIwMCk6XCJhY3RpdmF0aW5nXCI9PT1pJiYoY2xlYXJUaW1lb3V0KGUud24pLG98fGUuZW4ucmVzb2x2ZShyKSl9LGUuZG49ZnVuY3Rpb24obil7dmFyIHQ9ZS5obixyPXQhPT1uYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyO2UuZGlzcGF0Y2hFdmVudChuZXcgdShcImNvbnRyb2xsaW5nXCIse2lzRXh0ZXJuYWw6cixvcmlnaW5hbEV2ZW50Om4sc3c6dCxpc1VwZGF0ZTplLm1ufSkpLHJ8fGUub24ucmVzb2x2ZSh0KX0sZS5nbj0oYz1mdW5jdGlvbihuKXt2YXIgdD1uLmRhdGEscj1uLnBvcnRzLGk9bi5zb3VyY2U7cmV0dXJuIGEoZS5nZXRTVygpLChmdW5jdGlvbigpe2UuYW4uaGFzKGkpJiZlLmRpc3BhdGNoRXZlbnQobmV3IHUoXCJtZXNzYWdlXCIse2RhdGE6dCxvcmlnaW5hbEV2ZW50Om4scG9ydHM6cixzdzppfSkpfSkpfSxmdW5jdGlvbigpe2Zvcih2YXIgbj1bXSx0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyluW3RdPWFyZ3VtZW50c1t0XTt0cnl7cmV0dXJuIFByb21pc2UucmVzb2x2ZShjLmFwcGx5KHRoaXMsbikpfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19KSxlLnNuPW4sZS5ubj10LG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsZS5nbiksZX1jPXIsKGU9dikucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5fX3Byb3RvX189Yzt2YXIgaCxsLG0sdz12LnByb3RvdHlwZTtyZXR1cm4gdy5yZWdpc3Rlcj1mdW5jdGlvbihuKXt2YXIgdD0odm9pZCAwPT09bj97fTpuKS5pbW1lZGlhdGUscj12b2lkIDAhPT10JiZ0O3RyeXt2YXIgZT10aGlzO3JldHVybiBmdW5jdGlvbihuLHQpe3ZhciByPW4oKTtpZihyJiZyLnRoZW4pcmV0dXJuIHIudGhlbih0KTtyZXR1cm4gdChyKX0oKGZ1bmN0aW9uKCl7aWYoIXImJlwiY29tcGxldGVcIiE9PWRvY3VtZW50LnJlYWR5U3RhdGUpcmV0dXJuIHMobmV3IFByb21pc2UoKGZ1bmN0aW9uKG4pe3JldHVybiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixuKX0pKSl9KSwoZnVuY3Rpb24oKXtyZXR1cm4gZS5tbj1Cb29sZWFuKG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXIpLGUueW49ZS5wbigpLGEoZS5ibigpLChmdW5jdGlvbihuKXtlLmZuPW4sZS55biYmKGUuaG49ZS55bixlLmVuLnJlc29sdmUoZS55biksZS5vbi5yZXNvbHZlKGUueW4pLGUueW4uYWRkRXZlbnRMaXN0ZW5lcihcInN0YXRlY2hhbmdlXCIsZS5sbix7b25jZTohMH0pKTt2YXIgdD1lLmZuLndhaXRpbmc7cmV0dXJuIHQmJm8odC5zY3JpcHRVUkwsZS5zbi50b1N0cmluZygpKSYmKGUuaG49dCxQcm9taXNlLnJlc29sdmUoKS50aGVuKChmdW5jdGlvbigpe2UuZGlzcGF0Y2hFdmVudChuZXcgdShcIndhaXRpbmdcIix7c3c6dCx3YXNXYWl0aW5nQmVmb3JlUmVnaXN0ZXI6ITB9KSl9KSkudGhlbigoZnVuY3Rpb24oKXt9KSkpLGUuaG4mJihlLnJuLnJlc29sdmUoZS5obiksZS5hbi5hZGQoZS5obikpLGUuZm4uYWRkRXZlbnRMaXN0ZW5lcihcInVwZGF0ZWZvdW5kXCIsZS5jbiksbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRyb2xsZXJjaGFuZ2VcIixlLmRuKSxlLmZufSkpfSkpfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19LHcudXBkYXRlPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmZuP3ModGhpcy5mbi51cGRhdGUoKSk6dm9pZCAwfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19LHcuZ2V0U1c9ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5obj9Qcm9taXNlLnJlc29sdmUodGhpcy5obik6dGhpcy5ybi5wcm9taXNlfSx3Lm1lc3NhZ2VTVz1mdW5jdGlvbih0KXt0cnl7cmV0dXJuIGEodGhpcy5nZXRTVygpLChmdW5jdGlvbihyKXtyZXR1cm4gbihyLHQpfSkpfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19LHcubWVzc2FnZVNraXBXYWl0aW5nPWZ1bmN0aW9uKCl7dGhpcy5mbiYmdGhpcy5mbi53YWl0aW5nJiZuKHRoaXMuZm4ud2FpdGluZyxmKX0sdy5wbj1mdW5jdGlvbigpe3ZhciBuPW5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXI7cmV0dXJuIG4mJm8obi5zY3JpcHRVUkwsdGhpcy5zbi50b1N0cmluZygpKT9uOnZvaWQgMH0sdy5ibj1mdW5jdGlvbigpe3RyeXt2YXIgbj10aGlzO3JldHVybiBmdW5jdGlvbihuLHQpe3RyeXt2YXIgcj1uKCl9Y2F0Y2gobil7cmV0dXJuIHQobil9aWYociYmci50aGVuKXJldHVybiByLnRoZW4odm9pZCAwLHQpO3JldHVybiByfSgoZnVuY3Rpb24oKXtyZXR1cm4gYShuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcihuLnNuLG4ubm4pLChmdW5jdGlvbih0KXtyZXR1cm4gbi51bj1wZXJmb3JtYW5jZS5ub3coKSx0fSkpfSksKGZ1bmN0aW9uKG4pe3Rocm93IG59KSl9Y2F0Y2gobil7cmV0dXJuIFByb21pc2UucmVqZWN0KG4pfX0saD12LChsPVt7a2V5OlwiYWN0aXZlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW4ucHJvbWlzZX19LHtrZXk6XCJjb250cm9sbGluZ1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9uLnByb21pc2V9fV0pJiZ0KGgucHJvdG90eXBlLGwpLG0mJnQoaCxtKSx2fShmdW5jdGlvbigpe2Z1bmN0aW9uIG4oKXt0aGlzLlBuPW5ldyBNYXB9dmFyIHQ9bi5wcm90b3R5cGU7cmV0dXJuIHQuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihuLHQpe3RoaXMuU24obikuYWRkKHQpfSx0LnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24obix0KXt0aGlzLlNuKG4pLmRlbGV0ZSh0KX0sdC5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKG4pe24udGFyZ2V0PXRoaXM7Zm9yKHZhciB0LHI9ZSh0aGlzLlNuKG4udHlwZSkpOyEodD1yKCkpLmRvbmU7KXsoMCx0LnZhbHVlKShuKX19LHQuU249ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuUG4uaGFzKG4pfHx0aGlzLlBuLnNldChuLG5ldyBTZXQpLHRoaXMuUG4uZ2V0KG4pfSxufSgpKTtleHBvcnR7diBhcyBXb3JrYm94LHUgYXMgV29ya2JveEV2ZW50LG4gYXMgbWVzc2FnZVNXfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdvcmtib3gtd2luZG93LnByb2QuZXM1Lm1qcy5tYXBcbiIsIi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IEZpcmViYXNlIGNvbnN0YW50cy4gIFNvbWUgb2YgdGhlc2UgKEBkZWZpbmVzKSBjYW4gYmUgb3ZlcnJpZGRlbiBhdCBjb21waWxlLXRpbWUuXHJcbiAqL1xyXG5jb25zdCBDT05TVEFOVFMgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgY2xpZW50IE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0NMSUVOVDogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgQWRtaW4gTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQURNSU46IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlYmFzZSBTREsgVmVyc2lvblxyXG4gICAgICovXHJcbiAgICBTREtfVkVSU0lPTjogJyR7SlNDT1JFX1ZFUlNJT059J1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBwcm92aWRlZCBhc3NlcnRpb24gaXMgZmFsc3lcclxuICovXHJcbmNvbnN0IGFzc2VydCA9IGZ1bmN0aW9uIChhc3NlcnRpb24sIG1lc3NhZ2UpIHtcclxuICAgIGlmICghYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgdGhyb3cgYXNzZXJ0aW9uRXJyb3IobWVzc2FnZSk7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIEVycm9yIG9iamVjdCBzdWl0YWJsZSBmb3IgdGhyb3dpbmcuXHJcbiAqL1xyXG5jb25zdCBhc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICByZXR1cm4gbmV3IEVycm9yKCdGaXJlYmFzZSBEYXRhYmFzZSAoJyArXHJcbiAgICAgICAgQ09OU1RBTlRTLlNES19WRVJTSU9OICtcclxuICAgICAgICAnKSBJTlRFUk5BTCBBU1NFUlQgRkFJTEVEOiAnICtcclxuICAgICAgICBtZXNzYWdlKTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkkMSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmXHJcbiAgICAgICAgICAgIGkgKyAxIDwgc3RyLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICAoc3RyLmNoYXJDb2RlQXQoaSArIDEpICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKChjICYgMHgwM2ZmKSA8PCAxMCkgKyAoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDB4MDNmZik7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBUdXJucyBhbiBhcnJheSBvZiBudW1iZXJzIGludG8gdGhlIHN0cmluZyBnaXZlbiBieSB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGVcclxuICogY2hhcmFjdGVycyB0byB3aGljaCB0aGUgbnVtYmVycyBjb3JyZXNwb25kLlxyXG4gKiBAcGFyYW0gYnl0ZXMgQXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgY2hhcmFjdGVycy5cclxuICogQHJldHVybiBTdHJpbmdpZmljYXRpb24gb2YgdGhlIGFycmF5LlxyXG4gKi9cclxuY29uc3QgYnl0ZUFycmF5VG9TdHJpbmcgPSBmdW5jdGlvbiAoYnl0ZXMpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwb3MgPSAwLCBjID0gMDtcclxuICAgIHdoaWxlIChwb3MgPCBieXRlcy5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBjMSA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICBpZiAoYzEgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAxOTEgJiYgYzEgPCAyMjQpIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMzEpIDw8IDYpIHwgKGMyICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAyMzkgJiYgYzEgPCAzNjUpIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjNCA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgdSA9ICgoKGMxICYgNykgPDwgMTgpIHwgKChjMiAmIDYzKSA8PCAxMikgfCAoKGMzICYgNjMpIDw8IDYpIHwgKGM0ICYgNjMpKSAtXHJcbiAgICAgICAgICAgICAgICAweDEwMDAwO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkODAwICsgKHUgPj4gMTApKTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZGMwMCArICh1ICYgMTAyMykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDE1KSA8PCAxMikgfCAoKGMyICYgNjMpIDw8IDYpIHwgKGMzICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0LmpvaW4oJycpO1xyXG59O1xyXG4vLyBXZSBkZWZpbmUgaXQgYXMgYW4gb2JqZWN0IGxpdGVyYWwgaW5zdGVhZCBvZiBhIGNsYXNzIGJlY2F1c2UgYSBjbGFzcyBjb21waWxlZCBkb3duIHRvIGVzNSBjYW4ndFxyXG4vLyBiZSB0cmVlc2hha2VkLiBodHRwczovL2dpdGh1Yi5jb20vcm9sbHVwL3JvbGx1cC9pc3N1ZXMvMTY5MVxyXG4vLyBTdGF0aWMgbG9va3VwIG1hcHMsIGxhemlseSBwb3B1bGF0ZWQgYnkgaW5pdF8oKVxyXG5jb25zdCBiYXNlNjQgPSB7XHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gY2hhcmFjdGVycy5cclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqL1xyXG4gICAgY2hhclRvQnl0ZU1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gd2Vic2FmZSBjaGFyYWN0ZXJzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcFdlYlNhZmVfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIHdlYnNhZmUgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQsIHNoYXJlZCBiZXR3ZWVuXHJcbiAgICAgKiBFTkNPREVEX1ZBTFMgYW5kIEVOQ09ERURfVkFMU19XRUJTQUZFXHJcbiAgICAgKi9cclxuICAgIEVOQ09ERURfVkFMU19CQVNFOiAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonICsgJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JyArICcwMTIzNDU2Nzg5JyxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQuIFZhbHVlIDY0ICg9KSBpcyBzcGVjaWFsOyBpdCBtZWFucyBcIm5vdGhpbmcuXCJcclxuICAgICAqL1xyXG4gICAgZ2V0IEVOQ09ERURfVkFMUygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICcrLz0nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIHdlYnNhZmUgYWxwaGFiZXQuXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFNfV0VCU0FGRSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICctXy4nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogV2hldGhlciB0aGlzIGJyb3dzZXIgc3VwcG9ydHMgdGhlIGF0b2IgYW5kIGJ0b2EgZnVuY3Rpb25zLiBUaGlzIGV4dGVuc2lvblxyXG4gICAgICogc3RhcnRlZCBhdCBNb3ppbGxhIGJ1dCBpcyBub3cgaW1wbGVtZW50ZWQgYnkgbWFueSBicm93c2Vycy4gV2UgdXNlIHRoZVxyXG4gICAgICogQVNTVU1FXyogdmFyaWFibGVzIHRvIGF2b2lkIHB1bGxpbmcgaW4gdGhlIGZ1bGwgdXNlcmFnZW50IGRldGVjdGlvbiBsaWJyYXJ5XHJcbiAgICAgKiBidXQgc3RpbGwgYWxsb3dpbmcgdGhlIHN0YW5kYXJkIHBlci1icm93c2VyIGNvbXBpbGF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIEhBU19OQVRJVkVfU1VQUE9SVDogdHlwZW9mIGF0b2IgPT09ICdmdW5jdGlvbicsXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYW4gYXJyYXkgb2YgYnl0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEFuIGFycmF5IG9mIGJ5dGVzIChudW1iZXJzIHdpdGhcclxuICAgICAqICAgICB2YWx1ZSBpbiBbMCwgMjU1XSkgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgQm9vbGVhbiBpbmRpY2F0aW5nIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZUJ5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2VuY29kZUJ5dGVBcnJheSB0YWtlcyBhbiBhcnJheSBhcyBhIHBhcmFtZXRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgY29uc3QgYnl0ZVRvQ2hhck1hcCA9IHdlYlNhZmVcclxuICAgICAgICAgICAgPyB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1xyXG4gICAgICAgICAgICA6IHRoaXMuYnl0ZVRvQ2hhck1hcF87XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkgKz0gMykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGlucHV0W2ldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpICsgMSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBpbnB1dFtpICsgMV0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTMgPSBpICsgMiA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBpbnB1dFtpICsgMl0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IGJ5dGUxID4+IDI7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUyID0gKChieXRlMSAmIDB4MDMpIDw8IDQpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTMgPSAoKGJ5dGUyICYgMHgwZikgPDwgMikgfCAoYnl0ZTMgPj4gNik7XHJcbiAgICAgICAgICAgIGxldCBvdXRCeXRlNCA9IGJ5dGUzICYgMHgzZjtcclxuICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTMpIHtcclxuICAgICAgICAgICAgICAgIG91dEJ5dGU0ID0gNjQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhhdmVCeXRlMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dEJ5dGUzID0gNjQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3V0cHV0LnB1c2goYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMV0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTJdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUzXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlNF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQSBzdHJpbmcgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgSWYgdHJ1ZSwgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBidG9hKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlQnl0ZUFycmF5KHN0cmluZ1RvQnl0ZUFycmF5JDEoaW5wdXQpLCB3ZWJTYWZlKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdG9iKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheVRvU3RyaW5nKHRoaXMuZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogSW4gYmFzZS02NCBkZWNvZGluZywgZ3JvdXBzIG9mIGZvdXIgY2hhcmFjdGVycyBhcmUgY29udmVydGVkIGludG8gdGhyZWVcclxuICAgICAqIGJ5dGVzLiAgSWYgdGhlIGVuY29kZXIgZGlkIG5vdCBhcHBseSBwYWRkaW5nLCB0aGUgaW5wdXQgbGVuZ3RoIG1heSBub3RcclxuICAgICAqIGJlIGEgbXVsdGlwbGUgb2YgNC5cclxuICAgICAqXHJcbiAgICAgKiBJbiB0aGlzIGNhc2UsIHRoZSBsYXN0IGdyb3VwIHdpbGwgaGF2ZSBmZXdlciB0aGFuIDQgY2hhcmFjdGVycywgYW5kXHJcbiAgICAgKiBwYWRkaW5nIHdpbGwgYmUgaW5mZXJyZWQuICBJZiB0aGUgZ3JvdXAgaGFzIG9uZSBvciB0d28gY2hhcmFjdGVycywgaXQgZGVjb2Rlc1xyXG4gICAgICogdG8gb25lIGJ5dGUuICBJZiB0aGUgZ3JvdXAgaGFzIHRocmVlIGNoYXJhY3RlcnMsIGl0IGRlY29kZXMgdG8gdHdvIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBJbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlIHdlYi1zYWZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBieXRlcyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIGNvbnN0IGNoYXJUb0J5dGVNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmNoYXJUb0J5dGVNYXBfO1xyXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkrKyldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMiA9IGhhdmVCeXRlMiA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDA7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTQgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlNCA9IGhhdmVCeXRlNCA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGlmIChieXRlMSA9PSBudWxsIHx8IGJ5dGUyID09IG51bGwgfHwgYnl0ZTMgPT0gbnVsbCB8fCBieXRlNCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IChieXRlMSA8PCAyKSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTEpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTMgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTIgPDwgNCkgJiAweGYwKSB8IChieXRlMyA+PiAyKTtcclxuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUyKTtcclxuICAgICAgICAgICAgICAgIGlmIChieXRlNCAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMyA9ICgoYnl0ZTMgPDwgNikgJiAweGMwKSB8IGJ5dGU0O1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogTGF6eSBzdGF0aWMgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uIENhbGxlZCBiZWZvcmVcclxuICAgICAqIGFjY2Vzc2luZyBhbnkgb2YgdGhlIHN0YXRpYyBtYXAgdmFyaWFibGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgaW5pdF8oKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJ5dGVUb0NoYXJNYXBfKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICAvLyBXZSB3YW50IHF1aWNrIG1hcHBpbmdzIGJhY2sgYW5kIGZvcnRoLCBzbyB3ZSBwcmVjb21wdXRlIHR3byBtYXBzLlxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuRU5DT0RFRF9WQUxTLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIC8vIEJlIGZvcmdpdmluZyB3aGVuIGRlY29kaW5nIGFuZCBjb3JyZWN0bHkgZGVjb2RlIGJvdGggZW5jb2RpbmdzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBBbiBlcnJvciBlbmNvdW50ZXJlZCB3aGlsZSBkZWNvZGluZyBiYXNlNjQgc3RyaW5nLlxyXG4gKi9cclxuY2xhc3MgRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIHRoaXMubmFtZSA9ICdEZWNvZGVCYXNlNjRTdHJpbmdFcnJvcic7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZ1xyXG4gKi9cclxuY29uc3QgYmFzZTY0RW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgY29uc3QgdXRmOEJ5dGVzID0gc3RyaW5nVG9CeXRlQXJyYXkkMShzdHIpO1xyXG4gICAgcmV0dXJuIGJhc2U2NC5lbmNvZGVCeXRlQXJyYXkodXRmOEJ5dGVzLCB0cnVlKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZyAod2l0aG91dCBcIi5cIiBwYWRkaW5nIGluIHRoZSBlbmQpLlxyXG4gKiBlLmcuIFVzZWQgaW4gSlNPTiBXZWIgVG9rZW4gKEpXVCkgcGFydHMuXHJcbiAqL1xyXG5jb25zdCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFVzZSBiYXNlNjR1cmwgZW5jb2RpbmcgYW5kIHJlbW92ZSBwYWRkaW5nIGluIHRoZSBlbmQgKGRvdCBjaGFyYWN0ZXJzKS5cclxuICAgIHJldHVybiBiYXNlNjRFbmNvZGUoc3RyKS5yZXBsYWNlKC9cXC4vZywgJycpO1xyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGRlY29kaW5nXHJcbiAqXHJcbiAqIE5PVEU6IERPIE5PVCB1c2UgdGhlIGdsb2JhbCBhdG9iKCkgZnVuY3Rpb24gLSBpdCBkb2VzIE5PVCBzdXBwb3J0IHRoZVxyXG4gKiBiYXNlNjRVcmwgdmFyaWFudCBlbmNvZGluZy5cclxuICpcclxuICogQHBhcmFtIHN0ciBUbyBiZSBkZWNvZGVkXHJcbiAqIEByZXR1cm4gRGVjb2RlZCByZXN1bHQsIGlmIHBvc3NpYmxlXHJcbiAqL1xyXG5jb25zdCBiYXNlNjREZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBiYXNlNjQuZGVjb2RlU3RyaW5nKHN0ciwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Jhc2U2NERlY29kZSBmYWlsZWQ6ICcsIGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEbyBhIGRlZXAtY29weSBvZiBiYXNpYyBKYXZhU2NyaXB0IE9iamVjdHMgb3IgQXJyYXlzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcENvcHkodmFsdWUpIHtcclxuICAgIHJldHVybiBkZWVwRXh0ZW5kKHVuZGVmaW5lZCwgdmFsdWUpO1xyXG59XHJcbi8qKlxyXG4gKiBDb3B5IHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgdG8gdGFyZ2V0IChyZWN1cnNpdmVseSBhbGxvd3MgZXh0ZW5zaW9uXHJcbiAqIG9mIE9iamVjdHMgYW5kIEFycmF5cykuICBTY2FsYXIgdmFsdWVzIGluIHRoZSB0YXJnZXQgYXJlIG92ZXItd3JpdHRlbi5cclxuICogSWYgdGFyZ2V0IGlzIHVuZGVmaW5lZCwgYW4gb2JqZWN0IG9mIHRoZSBhcHByb3ByaWF0ZSB0eXBlIHdpbGwgYmUgY3JlYXRlZFxyXG4gKiAoYW5kIHJldHVybmVkKS5cclxuICpcclxuICogV2UgcmVjdXJzaXZlbHkgY29weSBhbGwgY2hpbGQgcHJvcGVydGllcyBvZiBwbGFpbiBPYmplY3RzIGluIHRoZSBzb3VyY2UtIHNvXHJcbiAqIHRoYXQgbmFtZXNwYWNlLSBsaWtlIGRpY3Rpb25hcmllcyBhcmUgbWVyZ2VkLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgdGhlIHRhcmdldCBjYW4gYmUgYSBmdW5jdGlvbiwgaW4gd2hpY2ggY2FzZSB0aGUgcHJvcGVydGllcyBpblxyXG4gKiB0aGUgc291cmNlIE9iamVjdCBhcmUgY29waWVkIG9udG8gaXQgYXMgc3RhdGljIHByb3BlcnRpZXMgb2YgdGhlIEZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBOb3RlOiB3ZSBkb24ndCBtZXJnZSBfX3Byb3RvX18gdG8gcHJldmVudCBwcm90b3R5cGUgcG9sbHV0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XHJcbiAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBPYmplY3QpKSB7XHJcbiAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoc291cmNlLmNvbnN0cnVjdG9yKSB7XHJcbiAgICAgICAgY2FzZSBEYXRlOlxyXG4gICAgICAgICAgICAvLyBUcmVhdCBEYXRlcyBsaWtlIHNjYWxhcnM7IGlmIHRoZSB0YXJnZXQgZGF0ZSBvYmplY3QgaGFkIGFueSBjaGlsZFxyXG4gICAgICAgICAgICAvLyBwcm9wZXJ0aWVzIC0gdGhleSB3aWxsIGJlIGxvc3QhXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVWYWx1ZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVWYWx1ZS5nZXRUaW1lKCkpO1xyXG4gICAgICAgIGNhc2UgT2JqZWN0OlxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQXJyYXk6XHJcbiAgICAgICAgICAgIC8vIEFsd2F5cyBjb3B5IHRoZSBhcnJheSBzb3VyY2UgYW5kIG92ZXJ3cml0ZSB0aGUgdGFyZ2V0LlxyXG4gICAgICAgICAgICB0YXJnZXQgPSBbXTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgLy8gTm90IGEgcGxhaW4gT2JqZWN0IC0gdHJlYXQgaXQgYXMgYSBzY2FsYXIuXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IHByb3AgaW4gc291cmNlKSB7XHJcbiAgICAgICAgLy8gdXNlIGlzVmFsaWRLZXkgdG8gZ3VhcmQgYWdhaW5zdCBwcm90b3R5cGUgcG9sbHV0aW9uLiBTZWUgaHR0cHM6Ly9zbnlrLmlvL3Z1bG4vU05ZSy1KUy1MT0RBU0gtNDUwMjAyXHJcbiAgICAgICAgaWYgKCFzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgIWlzVmFsaWRLZXkocHJvcCkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhcmdldFtwcm9wXSA9IGRlZXBFeHRlbmQodGFyZ2V0W3Byb3BdLCBzb3VyY2VbcHJvcF0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhcmdldDtcclxufVxyXG5mdW5jdGlvbiBpc1ZhbGlkS2V5KGtleSkge1xyXG4gICAgcmV0dXJuIGtleSAhPT0gJ19fcHJvdG9fXyc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFBvbHlmaWxsIGZvciBgZ2xvYmFsVGhpc2Agb2JqZWN0LlxyXG4gKiBAcmV0dXJucyB0aGUgYGdsb2JhbFRoaXNgIG9iamVjdCBmb3IgdGhlIGdpdmVuIGVudmlyb25tZW50LlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRHbG9iYWwoKSB7XHJcbiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGY7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93O1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIGdsb2JhbDtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGxvY2F0ZSBnbG9iYWwgb2JqZWN0LicpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUdsb2JhbCA9ICgpID0+IGdldEdsb2JhbCgpLl9fRklSRUJBU0VfREVGQVVMVFNfXztcclxuLyoqXHJcbiAqIEF0dGVtcHQgdG8gcmVhZCBkZWZhdWx0cyBmcm9tIGEgSlNPTiBzdHJpbmcgcHJvdmlkZWQgdG9cclxuICogcHJvY2VzcyguKWVudiguKV9fRklSRUJBU0VfREVGQVVMVFNfXyBvciBhIEpTT04gZmlsZSB3aG9zZSBwYXRoIGlzIGluXHJcbiAqIHByb2Nlc3MoLillbnYoLilfX0ZJUkVCQVNFX0RFRkFVTFRTX1BBVEhfX1xyXG4gKiBUaGUgZG90cyBhcmUgaW4gcGFyZW5zIGJlY2F1c2UgY2VydGFpbiBjb21waWxlcnMgKFZpdGU/KSBjYW5ub3RcclxuICogaGFuZGxlIHNlZWluZyB0aGF0IHZhcmlhYmxlIGluIGNvbW1lbnRzLlxyXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvNjgzOFxyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUgPSAoKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHByb2Nlc3MgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBwcm9jZXNzLmVudiA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWZhdWx0c0pzb25TdHJpbmcgPSBwcm9jZXNzLmVudi5fX0ZJUkVCQVNFX0RFRkFVTFRTX187XHJcbiAgICBpZiAoZGVmYXVsdHNKc29uU3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGVmYXVsdHNKc29uU3RyaW5nKTtcclxuICAgIH1cclxufTtcclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tQ29va2llID0gKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgbWF0Y2g7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKC9fX0ZJUkVCQVNFX0RFRkFVTFRTX189KFteO10rKS8pO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBTb21lIGVudmlyb25tZW50cyBzdWNoIGFzIEFuZ3VsYXIgVW5pdmVyc2FsIFNTUiBoYXZlIGFcclxuICAgICAgICAvLyBgZG9jdW1lbnRgIG9iamVjdCBidXQgZXJyb3Igb24gYWNjZXNzaW5nIGBkb2N1bWVudC5jb29raWVgLlxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGRlY29kZWQgPSBtYXRjaCAmJiBiYXNlNjREZWNvZGUobWF0Y2hbMV0pO1xyXG4gICAgcmV0dXJuIGRlY29kZWQgJiYgSlNPTi5wYXJzZShkZWNvZGVkKTtcclxufTtcclxuLyoqXHJcbiAqIEdldCB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdC4gSXQgY2hlY2tzIGluIG9yZGVyOlxyXG4gKiAoMSkgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGFzIGEgcHJvcGVydHkgb2YgYGdsb2JhbFRoaXNgXHJcbiAqICgyKSBpZiBzdWNoIGFuIG9iamVjdCB3YXMgcHJvdmlkZWQgb24gYSBzaGVsbCBlbnZpcm9ubWVudCB2YXJpYWJsZVxyXG4gKiAoMykgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGluIGEgY29va2llXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzID0gKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKGdldERlZmF1bHRzRnJvbUdsb2JhbCgpIHx8XHJcbiAgICAgICAgICAgIGdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlKCkgfHxcclxuICAgICAgICAgICAgZ2V0RGVmYXVsdHNGcm9tQ29va2llKCkpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXRjaC1hbGwgZm9yIGJlaW5nIHVuYWJsZSB0byBnZXQgX19GSVJFQkFTRV9ERUZBVUxUU19fIGR1ZVxyXG4gICAgICAgICAqIHRvIGFueSBlbnZpcm9ubWVudCBjYXNlIHdlIGhhdmUgbm90IGFjY291bnRlZCBmb3IuIExvZyB0b1xyXG4gICAgICAgICAqIGluZm8gaW5zdGVhZCBvZiBzd2FsbG93aW5nIHNvIHdlIGNhbiBmaW5kIHRoZXNlIHVua25vd24gY2FzZXNcclxuICAgICAgICAgKiBhbmQgYWRkIHBhdGhzIGZvciB0aGVtIGlmIG5lZWRlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zb2xlLmluZm8oYFVuYWJsZSB0byBnZXQgX19GSVJFQkFTRV9ERUZBVUxUU19fIGR1ZSB0bzogJHtlfWApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgZW11bGF0b3IgaG9zdCBzdG9yZWQgaW4gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3RcclxuICogZm9yIHRoZSBnaXZlbiBwcm9kdWN0LlxyXG4gKiBAcmV0dXJucyBhIFVSTCBob3N0IGZvcm1hdHRlZCBsaWtlIGAxMjcuMC4wLjE6OTk5OWAgb3IgYFs6OjFdOjQwMDBgIGlmIGF2YWlsYWJsZVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0RW11bGF0b3JIb3N0ID0gKHByb2R1Y3ROYW1lKSA9PiB7IHZhciBfYSwgX2I7IHJldHVybiAoX2IgPSAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZW11bGF0b3JIb3N0cykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iW3Byb2R1Y3ROYW1lXTsgfTtcclxuLyoqXHJcbiAqIFJldHVybnMgZW11bGF0b3IgaG9zdG5hbWUgYW5kIHBvcnQgc3RvcmVkIGluIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0XHJcbiAqIGZvciB0aGUgZ2l2ZW4gcHJvZHVjdC5cclxuICogQHJldHVybnMgYSBwYWlyIG9mIGhvc3RuYW1lIGFuZCBwb3J0IGxpa2UgYFtcIjo6MVwiLCA0MDAwXWAgaWYgYXZhaWxhYmxlXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCA9IChwcm9kdWN0TmFtZSkgPT4ge1xyXG4gICAgY29uc3QgaG9zdCA9IGdldERlZmF1bHRFbXVsYXRvckhvc3QocHJvZHVjdE5hbWUpO1xyXG4gICAgaWYgKCFob3N0KSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGNvbnN0IHNlcGFyYXRvckluZGV4ID0gaG9zdC5sYXN0SW5kZXhPZignOicpOyAvLyBGaW5kaW5nIHRoZSBsYXN0IHNpbmNlIElQdjYgYWRkciBhbHNvIGhhcyBjb2xvbnMuXHJcbiAgICBpZiAoc2VwYXJhdG9ySW5kZXggPD0gMCB8fCBzZXBhcmF0b3JJbmRleCArIDEgPT09IGhvc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGhvc3QgJHtob3N0fSB3aXRoIG5vIHNlcGFyYXRlIGhvc3RuYW1lIGFuZCBwb3J0IWApO1xyXG4gICAgfVxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xyXG4gICAgY29uc3QgcG9ydCA9IHBhcnNlSW50KGhvc3Quc3Vic3RyaW5nKHNlcGFyYXRvckluZGV4ICsgMSksIDEwKTtcclxuICAgIGlmIChob3N0WzBdID09PSAnWycpIHtcclxuICAgICAgICAvLyBCcmFja2V0LXF1b3RlZCBgW2lwdjZhZGRyXTpwb3J0YCA9PiByZXR1cm4gXCJpcHY2YWRkclwiICh3aXRob3V0IGJyYWNrZXRzKS5cclxuICAgICAgICByZXR1cm4gW2hvc3Quc3Vic3RyaW5nKDEsIHNlcGFyYXRvckluZGV4IC0gMSksIHBvcnRdO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFtob3N0LnN1YnN0cmluZygwLCBzZXBhcmF0b3JJbmRleCksIHBvcnRdO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBGaXJlYmFzZSBhcHAgY29uZmlnIHN0b3JlZCBpbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdC5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdEFwcENvbmZpZyA9ICgpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbmZpZzsgfTtcclxuLyoqXHJcbiAqIFJldHVybnMgYW4gZXhwZXJpbWVudGFsIHNldHRpbmcgb24gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QgKHByb3BlcnRpZXNcclxuICogcHJlZml4ZWQgYnkgXCJfXCIpXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldEV4cGVyaW1lbnRhbFNldHRpbmcgPSAobmFtZSkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbYF8ke25hbWV9YF07IH07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIERlZmVycmVkIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucmVqZWN0ID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZSA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgQVBJIGludGVybmFscyBhcmUgbm90IHByb21pc2VpZmllZCBhbmQgY2Fubm90IGJlY2F1c2Ugb3VyIGNhbGxiYWNrIEFQSXMgaGF2ZSBzdWJ0bGUgZXhwZWN0YXRpb25zIGFyb3VuZFxyXG4gICAgICogaW52b2tpbmcgcHJvbWlzZXMgaW5saW5lLCB3aGljaCBQcm9taXNlcyBhcmUgZm9yYmlkZGVuIHRvIGRvLiBUaGlzIG1ldGhvZCBhY2NlcHRzIGFuIG9wdGlvbmFsIG5vZGUtc3R5bGUgY2FsbGJhY2tcclxuICAgICAqIGFuZCByZXR1cm5zIGEgbm9kZS1zdHlsZSBjYWxsYmFjayB3aGljaCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0IHRoZSBEZWZlcnJlZCdzIHByb21pc2UuXHJcbiAgICAgKi9cclxuICAgIHdyYXBDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybiAoZXJyb3IsIHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2hpbmcgbm9vcCBoYW5kbGVyIGp1c3QgaW4gY2FzZSBkZXZlbG9wZXIgd2Fzbid0IGV4cGVjdGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gcHJvbWlzZXNcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvbWlzZS5jYXRjaCgoKSA9PiB7IH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gU29tZSBvZiBvdXIgY2FsbGJhY2tzIGRvbid0IGV4cGVjdCBhIHZhbHVlIGFuZCBvdXIgb3duIHRlc3RzXHJcbiAgICAgICAgICAgICAgICAvLyBhc3NlcnQgdGhhdCB0aGUgcGFyYW1ldGVyIGxlbmd0aCBpcyAxXHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2subGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlTW9ja1VzZXJUb2tlbih0b2tlbiwgcHJvamVjdElkKSB7XHJcbiAgICBpZiAodG9rZW4udWlkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgXCJ1aWRcIiBmaWVsZCBpcyBubyBsb25nZXIgc3VwcG9ydGVkIGJ5IG1vY2tVc2VyVG9rZW4uIFBsZWFzZSB1c2UgXCJzdWJcIiBpbnN0ZWFkIGZvciBGaXJlYmFzZSBBdXRoIFVzZXIgSUQuJyk7XHJcbiAgICB9XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgXCJub25lXCIgYXMgdGhlIGFsZ29yaXRobS5cclxuICAgIGNvbnN0IGhlYWRlciA9IHtcclxuICAgICAgICBhbGc6ICdub25lJyxcclxuICAgICAgICB0eXBlOiAnSldUJ1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHByb2plY3QgPSBwcm9qZWN0SWQgfHwgJ2RlbW8tcHJvamVjdCc7XHJcbiAgICBjb25zdCBpYXQgPSB0b2tlbi5pYXQgfHwgMDtcclxuICAgIGNvbnN0IHN1YiA9IHRva2VuLnN1YiB8fCB0b2tlbi51c2VyX2lkO1xyXG4gICAgaWYgKCFzdWIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oeyBcclxuICAgICAgICAvLyBTZXQgYWxsIHJlcXVpcmVkIGZpZWxkcyB0byBkZWNlbnQgZGVmYXVsdHNcclxuICAgICAgICBpc3M6IGBodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vJHtwcm9qZWN0fWAsIGF1ZDogcHJvamVjdCwgaWF0LCBleHA6IGlhdCArIDM2MDAsIGF1dGhfdGltZTogaWF0LCBzdWIsIHVzZXJfaWQ6IHN1YiwgZmlyZWJhc2U6IHtcclxuICAgICAgICAgICAgc2lnbl9pbl9wcm92aWRlcjogJ2N1c3RvbScsXHJcbiAgICAgICAgICAgIGlkZW50aXRpZXM6IHt9XHJcbiAgICAgICAgfSB9LCB0b2tlbik7XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgdGhlIGVtcHR5IHN0cmluZyBhcyBhIHNpZ25hdHVyZS5cclxuICAgIGNvbnN0IHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShoZWFkZXIpKSxcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShwYXlsb2FkKSksXHJcbiAgICAgICAgc2lnbmF0dXJlXHJcbiAgICBdLmpvaW4oJy4nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBuYXZpZ2F0b3IudXNlckFnZW50IHN0cmluZyBvciAnJyBpZiBpdCdzIG5vdCBkZWZpbmVkLlxyXG4gKiBAcmV0dXJuIHVzZXIgYWdlbnQgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRVQSgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQ29yZG92YSAvIFBob25lR2FwIC8gSW9uaWMgZnJhbWV3b3JrcyBvbiBhIG1vYmlsZSBkZXZpY2UuXHJcbiAqXHJcbiAqIERlbGliZXJhdGVseSBkb2VzIG5vdCByZWx5IG9uIGNoZWNraW5nIGBmaWxlOi8vYCBVUkxzIChhcyB0aGlzIGZhaWxzIFBob25lR2FwXHJcbiAqIGluIHRoZSBSaXBwbGUgZW11bGF0b3IpIG5vciBDb3Jkb3ZhIGBvbkRldmljZVJlYWR5YCwgd2hpY2ggd291bGQgbm9ybWFsbHlcclxuICogd2FpdCBmb3IgYSBjYWxsYmFjay5cclxuICovXHJcbmZ1bmN0aW9uIGlzTW9iaWxlQ29yZG92YSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFNldHRpbmcgdXAgYW4gYnJvYWRseSBhcHBsaWNhYmxlIGluZGV4IHNpZ25hdHVyZSBmb3IgV2luZG93XHJcbiAgICAgICAgLy8ganVzdCB0byBkZWFsIHdpdGggdGhpcyBjYXNlIHdvdWxkIHByb2JhYmx5IGJlIGEgYmFkIGlkZWEuXHJcbiAgICAgICAgISEod2luZG93Wydjb3Jkb3ZhJ10gfHwgd2luZG93WydwaG9uZWdhcCddIHx8IHdpbmRvd1snUGhvbmVHYXAnXSkgJiZcclxuICAgICAgICAvaW9zfGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZHxibGFja2JlcnJ5fGllbW9iaWxlL2kudGVzdChnZXRVQSgpKSk7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBOb2RlLmpzLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgTm9kZS5qcyBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZCBvciBzcGVjaWZpZWQuXHJcbiAqL1xyXG4vLyBOb2RlIGRldGVjdGlvbiBsb2dpYyBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vaWxpYWthbi9kZXRlY3Qtbm9kZS9cclxuZnVuY3Rpb24gaXNOb2RlKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgZm9yY2VFbnZpcm9ubWVudCA9IChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb3JjZUVudmlyb25tZW50O1xyXG4gICAgaWYgKGZvcmNlRW52aXJvbm1lbnQgPT09ICdub2RlJykge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZm9yY2VFbnZpcm9ubWVudCA9PT0gJ2Jyb3dzZXInKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IEJyb3dzZXIgRW52aXJvbm1lbnRcclxuICovXHJcbmZ1bmN0aW9uIGlzQnJvd3NlcigpIHtcclxuICAgIHJldHVybiB0eXBlb2Ygc2VsZiA9PT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmO1xyXG59XHJcbmZ1bmN0aW9uIGlzQnJvd3NlckV4dGVuc2lvbigpIHtcclxuICAgIGNvbnN0IHJ1bnRpbWUgPSB0eXBlb2YgY2hyb21lID09PSAnb2JqZWN0J1xyXG4gICAgICAgID8gY2hyb21lLnJ1bnRpbWVcclxuICAgICAgICA6IHR5cGVvZiBicm93c2VyID09PSAnb2JqZWN0J1xyXG4gICAgICAgICAgICA/IGJyb3dzZXIucnVudGltZVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgIHJldHVybiB0eXBlb2YgcnVudGltZSA9PT0gJ29iamVjdCcgJiYgcnVudGltZS5pZCAhPT0gdW5kZWZpbmVkO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgUmVhY3QgTmF0aXZlLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgUmVhY3ROYXRpdmUgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1JlYWN0TmF0aXZlKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyAmJiBuYXZpZ2F0b3JbJ3Byb2R1Y3QnXSA9PT0gJ1JlYWN0TmF0aXZlJyk7XHJcbn1cclxuLyoqIERldGVjdHMgRWxlY3Ryb24gYXBwcy4gKi9cclxuZnVuY3Rpb24gaXNFbGVjdHJvbigpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ0VsZWN0cm9uLycpID49IDA7XHJcbn1cclxuLyoqIERldGVjdHMgSW50ZXJuZXQgRXhwbG9yZXIuICovXHJcbmZ1bmN0aW9uIGlzSUUoKSB7XHJcbiAgICBjb25zdCB1YSA9IGdldFVBKCk7XHJcbiAgICByZXR1cm4gdWEuaW5kZXhPZignTVNJRSAnKSA+PSAwIHx8IHVhLmluZGV4T2YoJ1RyaWRlbnQvJykgPj0gMDtcclxufVxyXG4vKiogRGV0ZWN0cyBVbml2ZXJzYWwgV2luZG93cyBQbGF0Zm9ybSBhcHBzLiAqL1xyXG5mdW5jdGlvbiBpc1VXUCgpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ01TQXBwSG9zdC8nKSA+PSAwO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3Qgd2hldGhlciB0aGUgY3VycmVudCBTREsgYnVpbGQgaXMgdGhlIE5vZGUgdmVyc2lvbi5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIGl0J3MgdGhlIE5vZGUgU0RLIGJ1aWxkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNOb2RlU2RrKCkge1xyXG4gICAgcmV0dXJuIENPTlNUQU5UUy5OT0RFX0NMSUVOVCA9PT0gdHJ1ZSB8fCBDT05TVEFOVFMuTk9ERV9BRE1JTiA9PT0gdHJ1ZTtcclxufVxyXG4vKiogUmV0dXJucyB0cnVlIGlmIHdlIGFyZSBydW5uaW5nIGluIFNhZmFyaS4gKi9cclxuZnVuY3Rpb24gaXNTYWZhcmkoKSB7XHJcbiAgICByZXR1cm4gKCFpc05vZGUoKSAmJlxyXG4gICAgICAgICEhbmF2aWdhdG9yLnVzZXJBZ2VudCAmJlxyXG4gICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ1NhZmFyaScpICYmXHJcbiAgICAgICAgIW5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ0Nocm9tZScpKTtcclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICogQHJldHVybiB0cnVlIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICovXHJcbmZ1bmN0aW9uIGlzSW5kZXhlZERCQXZhaWxhYmxlKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIGluZGV4ZWREQiA9PT0gJ29iamVjdCc7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgdmFsaWRhdGVzIGJyb3dzZXIvc3cgY29udGV4dCBmb3IgaW5kZXhlZERCIGJ5IG9wZW5pbmcgYSBkdW1teSBpbmRleGVkREIgZGF0YWJhc2UgYW5kIHJlamVjdFxyXG4gKiBpZiBlcnJvcnMgb2NjdXIgZHVyaW5nIHRoZSBkYXRhYmFzZSBvcGVuIG9wZXJhdGlvbi5cclxuICpcclxuICogQHRocm93cyBleGNlcHRpb24gaWYgY3VycmVudCBicm93c2VyL3N3IGNvbnRleHQgY2FuJ3QgcnVuIGlkYi5vcGVuIChleDogU2FmYXJpIGlmcmFtZSwgRmlyZWZveFxyXG4gKiBwcml2YXRlIGJyb3dzaW5nKVxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IHByZUV4aXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc3QgREJfQ0hFQ0tfTkFNRSA9ICd2YWxpZGF0ZS1icm93c2VyLWNvbnRleHQtZm9yLWluZGV4ZWRkYi1hbmFseXRpY3MtbW9kdWxlJztcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHNlbGYuaW5kZXhlZERCLm9wZW4oREJfQ0hFQ0tfTkFNRSk7XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5yZXN1bHQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBkYXRhYmFzZSBvbmx5IHdoZW4gaXQgZG9lc24ndCBwcmUtZXhpc3RcclxuICAgICAgICAgICAgICAgIGlmICghcHJlRXhpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShEQl9DSEVDS19OQU1FKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcHJlRXhpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KCgoX2EgPSByZXF1ZXN0LmVycm9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWVzc2FnZSkgfHwgJycpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICpcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIHdoZXRoZXIgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxyXG4gKiBAcmV0dXJuIHRydWUgaWYgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxyXG4gKi9cclxuZnVuY3Rpb24gYXJlQ29va2llc0VuYWJsZWQoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcgfHwgIW5hdmlnYXRvci5jb29raWVFbmFibGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU3RhbmRhcmRpemVkIEZpcmViYXNlIEVycm9yLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICpcclxuICogICAvLyBUeXBlc2NyaXB0IHN0cmluZyBsaXRlcmFscyBmb3IgdHlwZS1zYWZlIGNvZGVzXHJcbiAqICAgdHlwZSBFcnIgPVxyXG4gKiAgICAgJ3Vua25vd24nIHxcclxuICogICAgICdvYmplY3Qtbm90LWZvdW5kJ1xyXG4gKiAgICAgO1xyXG4gKlxyXG4gKiAgIC8vIENsb3N1cmUgZW51bSBmb3IgdHlwZS1zYWZlIGVycm9yIGNvZGVzXHJcbiAqICAgLy8gYXQtZW51bSB7c3RyaW5nfVxyXG4gKiAgIHZhciBFcnIgPSB7XHJcbiAqICAgICBVTktOT1dOOiAndW5rbm93bicsXHJcbiAqICAgICBPQkpFQ1RfTk9UX0ZPVU5EOiAnb2JqZWN0LW5vdC1mb3VuZCcsXHJcbiAqICAgfVxyXG4gKlxyXG4gKiAgIGxldCBlcnJvcnM6IE1hcDxFcnIsIHN0cmluZz4gPSB7XHJcbiAqICAgICAnZ2VuZXJpYy1lcnJvcic6IFwiVW5rbm93biBlcnJvclwiLFxyXG4gKiAgICAgJ2ZpbGUtbm90LWZvdW5kJzogXCJDb3VsZCBub3QgZmluZCBmaWxlOiB7JGZpbGV9XCIsXHJcbiAqICAgfTtcclxuICpcclxuICogICAvLyBUeXBlLXNhZmUgZnVuY3Rpb24gLSBtdXN0IHBhc3MgYSB2YWxpZCBlcnJvciBjb2RlIGFzIHBhcmFtLlxyXG4gKiAgIGxldCBlcnJvciA9IG5ldyBFcnJvckZhY3Rvcnk8RXJyPignc2VydmljZScsICdTZXJ2aWNlJywgZXJyb3JzKTtcclxuICpcclxuICogICAuLi5cclxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkdFTkVSSUMpO1xyXG4gKiAgIC4uLlxyXG4gKiAgIHRocm93IGVycm9yLmNyZWF0ZShFcnIuRklMRV9OT1RfRk9VTkQsIHsnZmlsZSc6IGZpbGVOYW1lfSk7XHJcbiAqICAgLi4uXHJcbiAqICAgLy8gU2VydmljZTogQ291bGQgbm90IGZpbGUgZmlsZTogZm9vLnR4dCAoc2VydmljZS9maWxlLW5vdC1mb3VuZCkuXHJcbiAqXHJcbiAqICAgY2F0Y2ggKGUpIHtcclxuICogICAgIGFzc2VydChlLm1lc3NhZ2UgPT09IFwiQ291bGQgbm90IGZpbmQgZmlsZTogZm9vLnR4dC5cIik7XHJcbiAqICAgICBpZiAoKGUgYXMgRmlyZWJhc2VFcnJvcik/LmNvZGUgPT09ICdzZXJ2aWNlL2ZpbGUtbm90LWZvdW5kJykge1xyXG4gKiAgICAgICBjb25zb2xlLmxvZyhcIkNvdWxkIG5vdCByZWFkIGZpbGU6IFwiICsgZVsnZmlsZSddKTtcclxuICogICAgIH1cclxuICogICB9XHJcbiAqL1xyXG5jb25zdCBFUlJPUl9OQU1FID0gJ0ZpcmViYXNlRXJyb3InO1xyXG4vLyBCYXNlZCBvbiBjb2RlIGZyb206XHJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yI0N1c3RvbV9FcnJvcl9UeXBlc1xyXG5jbGFzcyBGaXJlYmFzZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAvKiogVGhlIGVycm9yIGNvZGUgZm9yIHRoaXMgZXJyb3IuICovXHJcbiAgICBjb2RlLCBtZXNzYWdlLCBcclxuICAgIC8qKiBDdXN0b20gZGF0YSBmb3IgdGhpcyBlcnJvci4gKi9cclxuICAgIGN1c3RvbURhdGEpIHtcclxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tRGF0YSA9IGN1c3RvbURhdGE7XHJcbiAgICAgICAgLyoqIFRoZSBjdXN0b20gbmFtZSBmb3IgYWxsIEZpcmViYXNlRXJyb3JzLiAqL1xyXG4gICAgICAgIHRoaXMubmFtZSA9IEVSUk9SX05BTUU7XHJcbiAgICAgICAgLy8gRml4IEZvciBFUzVcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQtd2lraS9ibG9iL21hc3Rlci9CcmVha2luZy1DaGFuZ2VzLm1kI2V4dGVuZGluZy1idWlsdC1pbnMtbGlrZS1lcnJvci1hcnJheS1hbmQtbWFwLW1heS1uby1sb25nZXItd29ya1xyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBGaXJlYmFzZUVycm9yLnByb3RvdHlwZSk7XHJcbiAgICAgICAgLy8gTWFpbnRhaW5zIHByb3BlciBzdGFjayB0cmFjZSBmb3Igd2hlcmUgb3VyIGVycm9yIHdhcyB0aHJvd24uXHJcbiAgICAgICAgLy8gT25seSBhdmFpbGFibGUgb24gVjguXHJcbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XHJcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIEVycm9yRmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgRXJyb3JGYWN0b3J5IHtcclxuICAgIGNvbnN0cnVjdG9yKHNlcnZpY2UsIHNlcnZpY2VOYW1lLCBlcnJvcnMpIHtcclxuICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMuc2VydmljZU5hbWUgPSBzZXJ2aWNlTmFtZTtcclxuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcclxuICAgIH1cclxuICAgIGNyZWF0ZShjb2RlLCAuLi5kYXRhKSB7XHJcbiAgICAgICAgY29uc3QgY3VzdG9tRGF0YSA9IGRhdGFbMF0gfHwge307XHJcbiAgICAgICAgY29uc3QgZnVsbENvZGUgPSBgJHt0aGlzLnNlcnZpY2V9LyR7Y29kZX1gO1xyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy5lcnJvcnNbY29kZV07XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRlbXBsYXRlID8gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBjdXN0b21EYXRhKSA6ICdFcnJvcic7XHJcbiAgICAgICAgLy8gU2VydmljZSBOYW1lOiBFcnJvciBtZXNzYWdlIChzZXJ2aWNlL2NvZGUpLlxyXG4gICAgICAgIGNvbnN0IGZ1bGxNZXNzYWdlID0gYCR7dGhpcy5zZXJ2aWNlTmFtZX06ICR7bWVzc2FnZX0gKCR7ZnVsbENvZGV9KS5gO1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEZpcmViYXNlRXJyb3IoZnVsbENvZGUsIGZ1bGxNZXNzYWdlLCBjdXN0b21EYXRhKTtcclxuICAgICAgICByZXR1cm4gZXJyb3I7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBkYXRhKSB7XHJcbiAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZShQQVRURVJOLCAoXywga2V5KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBkYXRhW2tleV07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGwgPyBTdHJpbmcodmFsdWUpIDogYDwke2tleX0/PmA7XHJcbiAgICB9KTtcclxufVxyXG5jb25zdCBQQVRURVJOID0gL1xce1xcJChbXn1dKyl9L2c7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBFdmFsdWF0ZXMgYSBKU09OIHN0cmluZyBpbnRvIGEgamF2YXNjcmlwdCBvYmplY3QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgQSBzdHJpbmcgY29udGFpbmluZyBKU09OLlxyXG4gKiBAcmV0dXJuIHsqfSBUaGUgamF2YXNjcmlwdCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzcGVjaWZpZWQgSlNPTi5cclxuICovXHJcbmZ1bmN0aW9uIGpzb25FdmFsKHN0cikge1xyXG4gICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBKU09OIHJlcHJlc2VudGluZyBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKiBAcGFyYW0geyp9IGRhdGEgSmF2YXNjcmlwdCBvYmplY3QgdG8gYmUgc3RyaW5naWZpZWQuXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIEpTT04gY29udGVudHMgb2YgdGhlIG9iamVjdC5cclxuICovXHJcbmZ1bmN0aW9uIHN0cmluZ2lmeShkYXRhKSB7XHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBpbnRvIGNvbnN0aXR1ZW50IHBhcnRzLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIHdpdGggaW52YWxpZCAvIGluY29tcGxldGUgY2xhaW1zIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgZGVjb2RlID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBsZXQgaGVhZGVyID0ge30sIGNsYWltcyA9IHt9LCBkYXRhID0ge30sIHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IHRva2VuLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgaGVhZGVyID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzBdKSB8fCAnJyk7XHJcbiAgICAgICAgY2xhaW1zID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzFdKSB8fCAnJyk7XHJcbiAgICAgICAgc2lnbmF0dXJlID0gcGFydHNbMl07XHJcbiAgICAgICAgZGF0YSA9IGNsYWltc1snZCddIHx8IHt9O1xyXG4gICAgICAgIGRlbGV0ZSBjbGFpbXNbJ2QnXTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhZGVyLFxyXG4gICAgICAgIGNsYWltcyxcclxuICAgICAgICBkYXRhLFxyXG4gICAgICAgIHNpZ25hdHVyZVxyXG4gICAgfTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgdGltZS1iYXNlZCBjbGFpbXMuIFdpbGwgcmV0dXJuIHRydWUgaWYgdGhlXHJcbiAqIHRva2VuIGlzIHdpdGhpbiB0aGUgdGltZSB3aW5kb3cgYXV0aG9yaXplZCBieSB0aGUgJ25iZicgKG5vdC1iZWZvcmUpIGFuZCAnaWF0JyAoaXNzdWVkLWF0KSBjbGFpbXMuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzVmFsaWRUaW1lc3RhbXAgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgY29uc3Qgbm93ID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApO1xyXG4gICAgbGV0IHZhbGlkU2luY2UgPSAwLCB2YWxpZFVudGlsID0gMDtcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ25iZicpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ25iZiddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ2lhdCddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdleHAnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gY2xhaW1zWydleHAnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHRva2VuIHdpbGwgZXhwaXJlIGFmdGVyIDI0aCBieSBkZWZhdWx0XHJcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSB2YWxpZFNpbmNlICsgODY0MDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuICghIW5vdyAmJlxyXG4gICAgICAgICEhdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgICEhdmFsaWRVbnRpbCAmJlxyXG4gICAgICAgIG5vdyA+PSB2YWxpZFNpbmNlICYmXHJcbiAgICAgICAgbm93IDw9IHZhbGlkVW50aWwpO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCByZXR1cm5zIGl0cyBpc3N1ZWQgYXQgdGltZSBpZiB2YWxpZCwgbnVsbCBvdGhlcndpc2UuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gbnVsbCBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzc3VlZEF0VGltZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgIHJldHVybiBjbGFpbXNbJ2lhdCddO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIGZvcm1hdC4gRXhwZWN0cyBhIHZhbGlkIGlzc3VlZC1hdCB0aW1lLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc1ZhbGlkRm9ybWF0ID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBkZWNvZGVkID0gZGVjb2RlKHRva2VuKSwgY2xhaW1zID0gZGVjb2RlZC5jbGFpbXM7XHJcbiAgICByZXR1cm4gISFjbGFpbXMgJiYgdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKTtcclxufTtcclxuLyoqXHJcbiAqIEF0dGVtcHRzIHRvIHBlZXIgaW50byBhbiBhdXRoIHRva2VuIGFuZCBkZXRlcm1pbmUgaWYgaXQncyBhbiBhZG1pbiBhdXRoIHRva2VuIGJ5IGxvb2tpbmcgYXQgdGhlIGNsYWltcyBwb3J0aW9uLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc0FkbWluID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIHJldHVybiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXNbJ2FkbWluJ10gPT09IHRydWU7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNvbnRhaW5zKG9iaiwga2V5KSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcclxufVxyXG5mdW5jdGlvbiBzYWZlR2V0KG9iaiwga2V5KSB7XHJcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgIHJldHVybiBvYmpba2V5XTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNFbXB0eShvYmopIHtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBtYXAob2JqLCBmbiwgY29udGV4dE9iaikge1xyXG4gICAgY29uc3QgcmVzID0ge307XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXNba2V5XSA9IGZuLmNhbGwoY29udGV4dE9iaiwgb2JqW2tleV0sIGtleSwgb2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59XHJcbi8qKlxyXG4gKiBEZWVwIGVxdWFsIHR3byBvYmplY3RzLiBTdXBwb3J0IEFycmF5cyBhbmQgT2JqZWN0cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBFcXVhbChhLCBiKSB7XHJcbiAgICBpZiAoYSA9PT0gYikge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYUtleXMgPSBPYmplY3Qua2V5cyhhKTtcclxuICAgIGNvbnN0IGJLZXlzID0gT2JqZWN0LmtleXMoYik7XHJcbiAgICBmb3IgKGNvbnN0IGsgb2YgYUtleXMpIHtcclxuICAgICAgICBpZiAoIWJLZXlzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYVByb3AgPSBhW2tdO1xyXG4gICAgICAgIGNvbnN0IGJQcm9wID0gYltrXTtcclxuICAgICAgICBpZiAoaXNPYmplY3QoYVByb3ApICYmIGlzT2JqZWN0KGJQcm9wKSkge1xyXG4gICAgICAgICAgICBpZiAoIWRlZXBFcXVhbChhUHJvcCwgYlByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYVByb3AgIT09IGJQcm9wKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGsgb2YgYktleXMpIHtcclxuICAgICAgICBpZiAoIWFLZXlzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBpc09iamVjdCh0aGluZykge1xyXG4gICAgcmV0dXJuIHRoaW5nICE9PSBudWxsICYmIHR5cGVvZiB0aGluZyA9PT0gJ29iamVjdCc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJlamVjdHMgaWYgdGhlIGdpdmVuIHByb21pc2UgZG9lc24ndCByZXNvbHZlIGluIHRpbWVJbk1TIG1pbGxpc2Vjb25kcy5cclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBwcm9taXNlV2l0aFRpbWVvdXQocHJvbWlzZSwgdGltZUluTVMgPSAyMDAwKSB7XHJcbiAgICBjb25zdCBkZWZlcnJlZFByb21pc2UgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4gZGVmZXJyZWRQcm9taXNlLnJlamVjdCgndGltZW91dCEnKSwgdGltZUluTVMpO1xyXG4gICAgcHJvbWlzZS50aGVuKGRlZmVycmVkUHJvbWlzZS5yZXNvbHZlLCBkZWZlcnJlZFByb21pc2UucmVqZWN0KTtcclxuICAgIHJldHVybiBkZWZlcnJlZFByb21pc2UucHJvbWlzZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhIHF1ZXJ5c3RyaW5nLWZvcm1hdHRlZCBzdHJpbmcgKGUuZy4gJmFyZz12YWwmYXJnMj12YWwyKSBmcm9tIGFcclxuICogcGFyYW1zIG9iamVjdCAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICogTm90ZTogWW91IG11c3QgcHJlcGVuZCBpdCB3aXRoID8gd2hlbiBhZGRpbmcgaXQgdG8gYSBVUkwuXHJcbiAqL1xyXG5mdW5jdGlvbiBxdWVyeXN0cmluZyhxdWVyeXN0cmluZ1BhcmFtcykge1xyXG4gICAgY29uc3QgcGFyYW1zID0gW107XHJcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhxdWVyeXN0cmluZ1BhcmFtcykpIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdmFsdWUuZm9yRWFjaChhcnJheVZhbCA9PiB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChhcnJheVZhbCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcmFtcy5sZW5ndGggPyAnJicgKyBwYXJhbXMuam9pbignJicpIDogJyc7XHJcbn1cclxuLyoqXHJcbiAqIERlY29kZXMgYSBxdWVyeXN0cmluZyAoZS5nLiA/YXJnPXZhbCZhcmcyPXZhbDIpIGludG8gYSBwYXJhbXMgb2JqZWN0XHJcbiAqIChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmdEZWNvZGUocXVlcnlzdHJpbmcpIHtcclxuICAgIGNvbnN0IG9iaiA9IHt9O1xyXG4gICAgY29uc3QgdG9rZW5zID0gcXVlcnlzdHJpbmcucmVwbGFjZSgvXlxcPy8sICcnKS5zcGxpdCgnJicpO1xyXG4gICAgdG9rZW5zLmZvckVhY2godG9rZW4gPT4ge1xyXG4gICAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSB0b2tlbi5zcGxpdCgnPScpO1xyXG4gICAgICAgICAgICBvYmpbZGVjb2RlVVJJQ29tcG9uZW50KGtleSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBvYmo7XHJcbn1cclxuLyoqXHJcbiAqIEV4dHJhY3QgdGhlIHF1ZXJ5IHN0cmluZyBwYXJ0IG9mIGEgVVJMLCBpbmNsdWRpbmcgdGhlIGxlYWRpbmcgcXVlc3Rpb24gbWFyayAoaWYgcHJlc2VudCkuXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRyYWN0UXVlcnlzdHJpbmcodXJsKSB7XHJcbiAgICBjb25zdCBxdWVyeVN0YXJ0ID0gdXJsLmluZGV4T2YoJz8nKTtcclxuICAgIGlmICghcXVlcnlTdGFydCkge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuICAgIGNvbnN0IGZyYWdtZW50U3RhcnQgPSB1cmwuaW5kZXhPZignIycsIHF1ZXJ5U3RhcnQpO1xyXG4gICAgcmV0dXJuIHVybC5zdWJzdHJpbmcocXVlcnlTdGFydCwgZnJhZ21lbnRTdGFydCA+IDAgPyBmcmFnbWVudFN0YXJ0IDogdW5kZWZpbmVkKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2guXHJcbiAqIFZhcmlhYmxlIG5hbWVzIGZvbGxvdyB0aGUgbm90YXRpb24gaW4gRklQUyBQVUIgMTgwLTM6XHJcbiAqIGh0dHA6Ly9jc3JjLm5pc3QuZ292L3B1YmxpY2F0aW9ucy9maXBzL2ZpcHMxODAtMy9maXBzMTgwLTNfZmluYWwucGRmLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICogICB2YXIgc2hhMSA9IG5ldyBzaGExKCk7XHJcbiAqICAgc2hhMS51cGRhdGUoYnl0ZXMpO1xyXG4gKiAgIHZhciBoYXNoID0gc2hhMS5kaWdlc3QoKTtcclxuICpcclxuICogUGVyZm9ybWFuY2U6XHJcbiAqICAgQ2hyb21lIDIzOiAgIH40MDAgTWJpdC9zXHJcbiAqICAgRmlyZWZveCAxNjogIH4yNTAgTWJpdC9zXHJcbiAqXHJcbiAqL1xyXG4vKipcclxuICogU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoIGNvbnN0cnVjdG9yLlxyXG4gKlxyXG4gKiBUaGUgcHJvcGVydGllcyBkZWNsYXJlZCBoZXJlIGFyZSBkaXNjdXNzZWQgaW4gdGhlIGFib3ZlIGFsZ29yaXRobSBkb2N1bWVudC5cclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBmaW5hbFxyXG4gKiBAc3RydWN0XHJcbiAqL1xyXG5jbGFzcyBTaGExIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhvbGRzIHRoZSBwcmV2aW91cyB2YWx1ZXMgb2YgYWNjdW11bGF0ZWQgdmFyaWFibGVzIGEtZSBpbiB0aGUgY29tcHJlc3NfXHJcbiAgICAgICAgICogZnVuY3Rpb24uXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNoYWluXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgYnVmZmVyIGhvbGRpbmcgdGhlIHBhcnRpYWxseSBjb21wdXRlZCBoYXNoIHJlc3VsdC5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuYnVmXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIGFycmF5IG9mIDgwIGJ5dGVzLCBlYWNoIGEgcGFydCBvZiB0aGUgbWVzc2FnZSB0byBiZSBoYXNoZWQuICBSZWZlcnJlZCB0b1xyXG4gICAgICAgICAqIGFzIHRoZSBtZXNzYWdlIHNjaGVkdWxlIGluIHRoZSBkb2NzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5XXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnRhaW5zIGRhdGEgbmVlZGVkIHRvIHBhZCBtZXNzYWdlcyBsZXNzIHRoYW4gNjQgYnl0ZXMuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBhZF8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgICAgICB0aGlzLmJsb2NrU2l6ZSA9IDUxMiAvIDg7XHJcbiAgICAgICAgdGhpcy5wYWRfWzBdID0gMTI4O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5ibG9ja1NpemU7ICsraSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZF9baV0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9IDB4Njc0NTIzMDE7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAweGVmY2RhYjg5O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gMHg5OGJhZGNmZTtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9IDB4MTAzMjU0NzY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAweGMzZDJlMWYwO1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEludGVybmFsIGNvbXByZXNzIGhlbHBlciBmdW5jdGlvbi5cclxuICAgICAqIEBwYXJhbSBidWYgQmxvY2sgdG8gY29tcHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IE9mZnNldCBvZiB0aGUgYmxvY2sgaW4gdGhlIGJ1ZmZlci5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNvbXByZXNzXyhidWYsIG9mZnNldCkge1xyXG4gICAgICAgIGlmICghb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IFcgPSB0aGlzLldfO1xyXG4gICAgICAgIC8vIGdldCAxNiBiaWcgZW5kaWFuIHdvcmRzXHJcbiAgICAgICAgaWYgKHR5cGVvZiBidWYgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyh1c2VyKTogW2J1ZyA4MTQwMTIyXSBSZWNlbnQgdmVyc2lvbnMgb2YgU2FmYXJpIGZvciBNYWMgT1MgYW5kIGlPU1xyXG4gICAgICAgICAgICAgICAgLy8gaGF2ZSBhIGJ1ZyB0aGF0IHR1cm5zIHRoZSBwb3N0LWluY3JlbWVudCArKyBvcGVyYXRvciBpbnRvIHByZS1pbmNyZW1lbnRcclxuICAgICAgICAgICAgICAgIC8vIGR1cmluZyBKSVQgY29tcGlsYXRpb24uICBXZSBoYXZlIGNvZGUgdGhhdCBkZXBlbmRzIGhlYXZpbHkgb24gU0hBLTEgZm9yXHJcbiAgICAgICAgICAgICAgICAvLyBjb3JyZWN0bmVzcyBhbmQgd2hpY2ggaXMgYWZmZWN0ZWQgYnkgdGhpcyBidWcsIHNvIEkndmUgcmVtb3ZlZCBhbGwgdXNlc1xyXG4gICAgICAgICAgICAgICAgLy8gb2YgcG9zdC1pbmNyZW1lbnQgKysgaW4gd2hpY2ggdGhlIHJlc3VsdCB2YWx1ZSBpcyB1c2VkLiAgV2UgY2FuIHJldmVydFxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBjaGFuZ2Ugb25jZSB0aGUgU2FmYXJpIGJ1Z1xyXG4gICAgICAgICAgICAgICAgLy8gKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMDkwMzYpIGhhcyBiZWVuIGZpeGVkIGFuZFxyXG4gICAgICAgICAgICAgICAgLy8gbW9zdCBjbGllbnRzIGhhdmUgYmVlbiB1cGRhdGVkLlxyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCkgPDwgMjQpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDEpIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAyKSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDMpO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXRdIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAyXSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZltvZmZzZXQgKyAzXTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGV4cGFuZCB0byA4MCB3b3Jkc1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxNjsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgdCA9IFdbaSAtIDNdIF4gV1tpIC0gOF0gXiBXW2kgLSAxNF0gXiBXW2kgLSAxNl07XHJcbiAgICAgICAgICAgIFdbaV0gPSAoKHQgPDwgMSkgfCAodCA+Pj4gMzEpKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhID0gdGhpcy5jaGFpbl9bMF07XHJcbiAgICAgICAgbGV0IGIgPSB0aGlzLmNoYWluX1sxXTtcclxuICAgICAgICBsZXQgYyA9IHRoaXMuY2hhaW5fWzJdO1xyXG4gICAgICAgIGxldCBkID0gdGhpcy5jaGFpbl9bM107XHJcbiAgICAgICAgbGV0IGUgPSB0aGlzLmNoYWluX1s0XTtcclxuICAgICAgICBsZXQgZiwgaztcclxuICAgICAgICAvLyBUT0RPKHVzZXIpOiBUcnkgdG8gdW5yb2xsIHRoaXMgbG9vcCB0byBzcGVlZCB1cCB0aGUgY29tcHV0YXRpb24uXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChpIDwgNDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgMjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gZCBeIChiICYgKGMgXiBkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NWE4Mjc5OTk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDZlZDllYmExO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCA2MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSAoYiAmIGMpIHwgKGQgJiAoYiB8IGMpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg4ZjFiYmNkYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4Y2E2MmMxZDY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgdCA9ICgoKGEgPDwgNSkgfCAoYSA+Pj4gMjcpKSArIGYgKyBlICsgayArIFdbaV0pICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgZSA9IGQ7XHJcbiAgICAgICAgICAgIGQgPSBjO1xyXG4gICAgICAgICAgICBjID0gKChiIDw8IDMwKSB8IChiID4+PiAyKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBiID0gYTtcclxuICAgICAgICAgICAgYSA9IHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gKHRoaXMuY2hhaW5fWzBdICsgYSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gKHRoaXMuY2hhaW5fWzFdICsgYikgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gKHRoaXMuY2hhaW5fWzJdICsgYykgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gKHRoaXMuY2hhaW5fWzNdICsgZCkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gKHRoaXMuY2hhaW5fWzRdICsgZSkgJiAweGZmZmZmZmZmO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlKGJ5dGVzLCBsZW5ndGgpIHtcclxuICAgICAgICAvLyBUT0RPKGpvaG5sZW56KTogdGlnaHRlbiB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlIGFuZCByZW1vdmUgdGhpcyBjaGVja1xyXG4gICAgICAgIGlmIChieXRlcyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbGVuZ3RoTWludXNCbG9jayA9IGxlbmd0aCAtIHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICAvLyBVc2luZyBsb2NhbCBpbnN0ZWFkIG9mIG1lbWJlciB2YXJpYWJsZXMgZ2l2ZXMgfjUlIHNwZWVkdXAgb24gRmlyZWZveCAxNi5cclxuICAgICAgICBjb25zdCBidWYgPSB0aGlzLmJ1Zl87XHJcbiAgICAgICAgbGV0IGluYnVmID0gdGhpcy5pbmJ1Zl87XHJcbiAgICAgICAgLy8gVGhlIG91dGVyIHdoaWxlIGxvb3Agc2hvdWxkIGV4ZWN1dGUgYXQgbW9zdCB0d2ljZS5cclxuICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBXaGVuIHdlIGhhdmUgbm8gZGF0YSBpbiB0aGUgYmxvY2sgdG8gdG9wIHVwLCB3ZSBjYW4gZGlyZWN0bHkgcHJvY2VzcyB0aGVcclxuICAgICAgICAgICAgLy8gaW5wdXQgYnVmZmVyIChhc3N1bWluZyBpdCBjb250YWlucyBzdWZmaWNpZW50IGRhdGEpLiBUaGlzIGdpdmVzIH4yNSVcclxuICAgICAgICAgICAgLy8gc3BlZWR1cCBvbiBDaHJvbWUgMjMgYW5kIH4xNSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LCBidXQgcmVxdWlyZXMgdGhhdFxyXG4gICAgICAgICAgICAvLyB0aGUgZGF0YSBpcyBwcm92aWRlZCBpbiBsYXJnZSBjaHVua3MgKG9yIGluIG11bHRpcGxlcyBvZiA2NCBieXRlcykuXHJcbiAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPD0gbGVuZ3RoTWludXNCbG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ5dGVzLCBuKTtcclxuICAgICAgICAgICAgICAgICAgICBuICs9IHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlcy5jaGFyQ29kZUF0KG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzW25dO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluYnVmXyA9IGluYnVmO1xyXG4gICAgICAgIHRoaXMudG90YWxfICs9IGxlbmd0aDtcclxuICAgIH1cclxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cclxuICAgIGRpZ2VzdCgpIHtcclxuICAgICAgICBjb25zdCBkaWdlc3QgPSBbXTtcclxuICAgICAgICBsZXQgdG90YWxCaXRzID0gdGhpcy50b3RhbF8gKiA4O1xyXG4gICAgICAgIC8vIEFkZCBwYWQgMHg4MCAweDAwKi5cclxuICAgICAgICBpZiAodGhpcy5pbmJ1Zl8gPCA1Nikge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIDU2IC0gdGhpcy5pbmJ1Zl8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCB0aGlzLmJsb2NrU2l6ZSAtICh0aGlzLmluYnVmXyAtIDU2KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFkZCAjIGJpdHMuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuYmxvY2tTaXplIC0gMTsgaSA+PSA1NjsgaS0tKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVmX1tpXSA9IHRvdGFsQml0cyAmIDI1NTtcclxuICAgICAgICAgICAgdG90YWxCaXRzIC89IDI1NjsgLy8gRG9uJ3QgdXNlIGJpdC1zaGlmdGluZyBoZXJlIVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXByZXNzXyh0aGlzLmJ1Zl8pO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMjQ7IGogPj0gMDsgaiAtPSA4KSB7XHJcbiAgICAgICAgICAgICAgICBkaWdlc3Rbbl0gPSAodGhpcy5jaGFpbl9baV0gPj4gaikgJiAyNTU7XHJcbiAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRpZ2VzdDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogSGVscGVyIHRvIG1ha2UgYSBTdWJzY3JpYmUgZnVuY3Rpb24gKGp1c3QgbGlrZSBQcm9taXNlIGhlbHBzIG1ha2UgYVxyXG4gKiBUaGVuYWJsZSkuXHJcbiAqXHJcbiAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gKiAgICAgYXMgYSBwcm94eS5cclxuICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlU3Vic2NyaWJlKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICBjb25zdCBwcm94eSA9IG5ldyBPYnNlcnZlclByb3h5KGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKTtcclxuICAgIHJldHVybiBwcm94eS5zdWJzY3JpYmUuYmluZChwcm94eSk7XHJcbn1cclxuLyoqXHJcbiAqIEltcGxlbWVudCBmYW4tb3V0IGZvciBhbnkgbnVtYmVyIG9mIE9ic2VydmVycyBhdHRhY2hlZCB2aWEgYSBzdWJzY3JpYmVcclxuICogZnVuY3Rpb24uXHJcbiAqL1xyXG5jbGFzcyBPYnNlcnZlclByb3h5IHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXHJcbiAgICAgKiAgICAgYXMgYSBwcm94eS5cclxuICAgICAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVzID0gW107XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50ID0gMDtcclxuICAgICAgICAvLyBNaWNyby10YXNrIHNjaGVkdWxpbmcgYnkgY2FsbGluZyB0YXNrLnRoZW4oKS5cclxuICAgICAgICB0aGlzLnRhc2sgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMub25Ob09ic2VydmVycyA9IG9uTm9PYnNlcnZlcnM7XHJcbiAgICAgICAgLy8gQ2FsbCB0aGUgZXhlY3V0b3IgYXN5bmNocm9ub3VzbHkgc28gc3Vic2NyaWJlcnMgdGhhdCBhcmUgY2FsbGVkXHJcbiAgICAgICAgLy8gc3luY2hyb25vdXNseSBhZnRlciB0aGUgY3JlYXRpb24gb2YgdGhlIHN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICAgIC8vIGNhbiBzdGlsbCByZWNlaXZlIHRoZSB2ZXJ5IGZpcnN0IHZhbHVlIGdlbmVyYXRlZCBpbiB0aGUgZXhlY3V0b3IuXHJcbiAgICAgICAgdGhpcy50YXNrXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZXhlY3V0b3IodGhpcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgbmV4dCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKGVycm9yKTtcclxuICAgIH1cclxuICAgIGNvbXBsZXRlKCkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIGFuIE9ic2VydmVyIHRvIHRoZSBmYW4tb3V0IGxpc3QuXHJcbiAgICAgKlxyXG4gICAgICogLSBXZSByZXF1aXJlIHRoYXQgbm8gZXZlbnQgaXMgc2VudCB0byBhIHN1YnNjcmliZXIgc3ljaHJvbm91c2x5IHRvIHRoZWlyXHJcbiAgICAgKiAgIGNhbGwgdG8gc3Vic2NyaWJlKCkuXHJcbiAgICAgKi9cclxuICAgIHN1YnNjcmliZShuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XHJcbiAgICAgICAgbGV0IG9ic2VydmVyO1xyXG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGVycm9yID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgT2JzZXJ2ZXIuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFzc2VtYmxlIGFuIE9ic2VydmVyIG9iamVjdCB3aGVuIHBhc3NlZCBhcyBjYWxsYmFjayBmdW5jdGlvbnMuXHJcbiAgICAgICAgaWYgKGltcGxlbWVudHNBbnlNZXRob2RzKG5leHRPck9ic2VydmVyLCBbXHJcbiAgICAgICAgICAgICduZXh0JyxcclxuICAgICAgICAgICAgJ2Vycm9yJyxcclxuICAgICAgICAgICAgJ2NvbXBsZXRlJ1xyXG4gICAgICAgIF0pKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0gbmV4dE9yT2JzZXJ2ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgICAgIG5leHQ6IG5leHRPck9ic2VydmVyLFxyXG4gICAgICAgICAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuZXJyb3IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvciA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5jb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdW5zdWIgPSB0aGlzLnVuc3Vic2NyaWJlT25lLmJpbmQodGhpcywgdGhpcy5vYnNlcnZlcnMubGVuZ3RoKTtcclxuICAgICAgICAvLyBBdHRlbXB0IHRvIHN1YnNjcmliZSB0byBhIHRlcm1pbmF0ZWQgT2JzZXJ2YWJsZSAtIHdlXHJcbiAgICAgICAgLy8ganVzdCByZXNwb25kIHRvIHRoZSBPYnNlcnZlciB3aXRoIHRoZSBmaW5hbCBlcnJvciBvciBjb21wbGV0ZVxyXG4gICAgICAgIC8vIGV2ZW50LlxyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluYWxFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcih0aGlzLmZpbmFsRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdGhpbmdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xyXG4gICAgICAgIHJldHVybiB1bnN1YjtcclxuICAgIH1cclxuICAgIC8vIFVuc3Vic2NyaWJlIGlzIHN5bmNocm9ub3VzIC0gd2UgZ3VhcmFudGVlIHRoYXQgbm8gZXZlbnRzIGFyZSBzZW50IHRvXHJcbiAgICAvLyBhbnkgdW5zdWJzY3JpYmVkIE9ic2VydmVyLlxyXG4gICAgdW5zdWJzY3JpYmVPbmUoaSkge1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVycyA9PT0gdW5kZWZpbmVkIHx8IHRoaXMub2JzZXJ2ZXJzW2ldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgdGhpcy5vYnNlcnZlcnNbaV07XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50IC09IDE7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJDb3VudCA9PT0gMCAmJiB0aGlzLm9uTm9PYnNlcnZlcnMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnModGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yRWFjaE9ic2VydmVyKGZuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIEFscmVhZHkgY2xvc2VkIGJ5IHByZXZpb3VzIGV2ZW50Li4uLmp1c3QgZWF0IHRoZSBhZGRpdGlvbmFsIHZhbHVlcy5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTaW5jZSBzZW5kT25lIGNhbGxzIGFzeW5jaHJvbm91c2x5IC0gdGhlcmUgaXMgbm8gY2hhbmNlIHRoYXRcclxuICAgICAgICAvLyB0aGlzLm9ic2VydmVycyB3aWxsIGJlY29tZSB1bmRlZmluZWQuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9ic2VydmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRPbmUoaSwgZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIENhbGwgdGhlIE9ic2VydmVyIHZpYSBvbmUgb2YgaXQncyBjYWxsYmFjayBmdW5jdGlvbi4gV2UgYXJlIGNhcmVmdWwgdG9cclxuICAgIC8vIGNvbmZpcm0gdGhhdCB0aGUgb2JzZXJ2ZSBoYXMgbm90IGJlZW4gdW5zdWJzY3JpYmVkIHNpbmNlIHRoaXMgYXN5bmNocm9ub3VzXHJcbiAgICAvLyBmdW5jdGlvbiBoYWQgYmVlbiBxdWV1ZWQuXHJcbiAgICBzZW5kT25lKGksIGZuKSB7XHJcbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgY2FsbGJhY2sgYXN5bmNocm9ub3VzbHlcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm9ic2VydmVyc1tpXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZuKHRoaXMub2JzZXJ2ZXJzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGV4Y2VwdGlvbnMgcmFpc2VkIGluIE9ic2VydmVycyBvciBtaXNzaW5nIG1ldGhvZHMgb2YgYW5cclxuICAgICAgICAgICAgICAgICAgICAvLyBPYnNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBMb2cgZXJyb3IgdG8gY29uc29sZS4gYi8zMTQwNDgwNlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoZXJyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmFsRXJyb3IgPSBlcnI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFByb3h5IGlzIG5vIGxvbmdlciBuZWVkZWQgLSBnYXJiYWdlIGNvbGxlY3QgcmVmZXJlbmNlc1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqIFR1cm4gc3luY2hyb25vdXMgZnVuY3Rpb24gaW50byBvbmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5LiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xyXG5mdW5jdGlvbiBhc3luYyhmbiwgb25FcnJvcikge1xyXG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZm4oLi4uYXJncyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAob25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybiB0cnVlIGlmIHRoZSBvYmplY3QgcGFzc2VkIGluIGltcGxlbWVudHMgYW55IG9mIHRoZSBuYW1lZCBtZXRob2RzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW1wbGVtZW50c0FueU1ldGhvZHMob2JqLCBtZXRob2RzKSB7XHJcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xyXG4gICAgICAgIGlmIChtZXRob2QgaW4gb2JqICYmIHR5cGVvZiBvYmpbbWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gbm9vcCgpIHtcclxuICAgIC8vIGRvIG5vdGhpbmdcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ2hlY2sgdG8gbWFrZSBzdXJlIHRoZSBhcHByb3ByaWF0ZSBudW1iZXIgb2YgYXJndW1lbnRzIGFyZSBwcm92aWRlZCBmb3IgYSBwdWJsaWMgZnVuY3Rpb24uXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiBpdCBmYWlscy5cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gbWluQ291bnQgVGhlIG1pbmltdW0gbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIG1heENvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBhcmd1bWVudCB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIGFyZ0NvdW50IFRoZSBhY3R1YWwgbnVtYmVyIG9mIGFyZ3VtZW50cyBwcm92aWRlZC5cclxuICovXHJcbmNvbnN0IHZhbGlkYXRlQXJnQ291bnQgPSBmdW5jdGlvbiAoZm5OYW1lLCBtaW5Db3VudCwgbWF4Q291bnQsIGFyZ0NvdW50KSB7XHJcbiAgICBsZXQgYXJnRXJyb3I7XHJcbiAgICBpZiAoYXJnQ291bnQgPCBtaW5Db3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gJ2F0IGxlYXN0ICcgKyBtaW5Db3VudDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFyZ0NvdW50ID4gbWF4Q291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9IG1heENvdW50ID09PSAwID8gJ25vbmUnIDogJ25vIG1vcmUgdGhhbiAnICsgbWF4Q291bnQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYXJnRXJyb3IpIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IGZuTmFtZSArXHJcbiAgICAgICAgICAgICcgZmFpbGVkOiBXYXMgY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgIGFyZ0NvdW50ICtcclxuICAgICAgICAgICAgKGFyZ0NvdW50ID09PSAxID8gJyBhcmd1bWVudC4nIDogJyBhcmd1bWVudHMuJykgK1xyXG4gICAgICAgICAgICAnIEV4cGVjdHMgJyArXHJcbiAgICAgICAgICAgIGFyZ0Vycm9yICtcclxuICAgICAgICAgICAgJy4nO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdG8gcHJlZml4IGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgZmFpbGVkIGFyZ3VtZW50IHZhbGlkYXRpb25cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gYXJnTmFtZSBUaGUgbmFtZSBvZiB0aGUgYXJndW1lbnRcclxuICogQHJldHVybiBUaGUgcHJlZml4IHRvIGFkZCB0byB0aGUgZXJyb3IgdGhyb3duIGZvciB2YWxpZGF0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmdOYW1lKSB7XHJcbiAgICByZXR1cm4gYCR7Zm5OYW1lfSBmYWlsZWQ6ICR7YXJnTmFtZX0gYXJndW1lbnQgYDtcclxufVxyXG4vKipcclxuICogQHBhcmFtIGZuTmFtZVxyXG4gKiBAcGFyYW0gYXJndW1lbnROdW1iZXJcclxuICogQHBhcmFtIG5hbWVzcGFjZVxyXG4gKiBAcGFyYW0gb3B0aW9uYWxcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZXNwYWNlKGZuTmFtZSwgbmFtZXNwYWNlLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFuYW1lc3BhY2UpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAvL1RPRE86IEkgc2hvdWxkIGRvIG1vcmUgdmFsaWRhdGlvbiBoZXJlLiBXZSBvbmx5IGFsbG93IGNlcnRhaW4gY2hhcnMgaW4gbmFtZXNwYWNlcy5cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCAnbmFtZXNwYWNlJykgKyAnbXVzdCBiZSBhIHZhbGlkIGZpcmViYXNlIG5hbWVzcGFjZS4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNhbGxiYWNrKGZuTmFtZSwgYXJndW1lbnROYW1lLCBcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuY2FsbGJhY2ssIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGZ1bmN0aW9uLicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ29udGV4dE9iamVjdChmbk5hbWUsIGFyZ3VtZW50TmFtZSwgY29udGV4dCwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY29udGV4dCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY29udGV4dCAhPT0gJ29iamVjdCcgfHwgY29udGV4dCA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGNvbnRleHQgb2JqZWN0LicpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIENvZGUgb3JpZ2luYWxseSBjYW1lIGZyb20gZ29vZy5jcnlwdC5zdHJpbmdUb1V0ZjhCeXRlQXJyYXksIGJ1dCBmb3Igc29tZSByZWFzb24gdGhleVxyXG4vLyBhdXRvbWF0aWNhbGx5IHJlcGxhY2VkICdcXHJcXG4nIHdpdGggJ1xcbicsIGFuZCB0aGV5IGRpZG4ndCBoYW5kbGUgc3Vycm9nYXRlIHBhaXJzLFxyXG4vLyBzbyBpdCdzIGJlZW4gbW9kaWZpZWQuXHJcbi8vIE5vdGUgdGhhdCBub3QgYWxsIFVuaWNvZGUgY2hhcmFjdGVycyBhcHBlYXIgYXMgc2luZ2xlIGNoYXJhY3RlcnMgaW4gSmF2YVNjcmlwdCBzdHJpbmdzLlxyXG4vLyBmcm9tQ2hhckNvZGUgcmV0dXJucyB0aGUgVVRGLTE2IGVuY29kaW5nIG9mIGEgY2hhcmFjdGVyIC0gc28gc29tZSBVbmljb2RlIGNoYXJhY3RlcnNcclxuLy8gdXNlIDIgY2hhcmFjdGVycyBpbiBKYXZhc2NyaXB0LiAgQWxsIDQtYnl0ZSBVVEYtOCBjaGFyYWN0ZXJzIGJlZ2luIHdpdGggYSBmaXJzdFxyXG4vLyBjaGFyYWN0ZXIgaW4gdGhlIHJhbmdlIDB4RDgwMCAtIDB4REJGRiAodGhlIGZpcnN0IGNoYXJhY3RlciBvZiBhIHNvLWNhbGxlZCBzdXJyb2dhdGVcclxuLy8gcGFpcikuXHJcbi8vIFNlZSBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNS4xLyNzZWMtMTUuMS4zXHJcbi8qKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge0FycmF5fVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAvLyBJcyB0aGlzIHRoZSBsZWFkIHN1cnJvZ2F0ZSBpbiBhIHN1cnJvZ2F0ZSBwYWlyP1xyXG4gICAgICAgIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICBjb25zdCBoaWdoID0gYyAtIDB4ZDgwMDsgLy8gdGhlIGhpZ2ggMTAgYml0cy5cclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICBhc3NlcnQoaSA8IHN0ci5sZW5ndGgsICdTdXJyb2dhdGUgcGFpciBtaXNzaW5nIHRyYWlsIHN1cnJvZ2F0ZS4nKTtcclxuICAgICAgICAgICAgY29uc3QgbG93ID0gc3RyLmNoYXJDb2RlQXQoaSkgLSAweGRjMDA7IC8vIHRoZSBsb3cgMTAgYml0cy5cclxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoaGlnaCA8PCAxMCkgKyBsb3c7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDY1NTM2KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgbGVuZ3RoIHdpdGhvdXQgYWN0dWFsbHkgY29udmVydGluZzsgdXNlZnVsIGZvciBkb2luZyBjaGVhcGVyIHZhbGlkYXRpb24uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICogQHJldHVybiB7bnVtYmVyfVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nTGVuZ3RoID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgcCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBwICs9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIC8vIExlYWQgc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXIuICBUaGUgcGFpciB0b2dldGhlciB3aWxsIHRha2UgNCBieXRlcyB0byByZXByZXNlbnQuXHJcbiAgICAgICAgICAgIHAgKz0gNDtcclxuICAgICAgICAgICAgaSsrOyAvLyBza2lwIHRyYWlsIHN1cnJvZ2F0ZS5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHAgKz0gMztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcDtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvcGllZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMTE3NTIzXHJcbiAqIEdlbmVyYXRlcyBhIG5ldyB1dWlkLlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCB1dWlkdjQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBjID0+IHtcclxuICAgICAgICBjb25zdCByID0gKE1hdGgucmFuZG9tKCkgKiAxNikgfCAwLCB2ID0gYyA9PT0gJ3gnID8gciA6IChyICYgMHgzKSB8IDB4ODtcclxuICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XHJcbiAgICB9KTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBhbW91bnQgb2YgbWlsbGlzZWNvbmRzIHRvIGV4cG9uZW50aWFsbHkgaW5jcmVhc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0lOVEVSVkFMX01JTExJUyA9IDEwMDA7XHJcbi8qKlxyXG4gKiBUaGUgZmFjdG9yIHRvIGJhY2tvZmYgYnkuXHJcbiAqIFNob3VsZCBiZSBhIG51bWJlciBncmVhdGVyIHRoYW4gMS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfQkFDS09GRl9GQUNUT1IgPSAyO1xyXG4vKipcclxuICogVGhlIG1heGltdW0gbWlsbGlzZWNvbmRzIHRvIGluY3JlYXNlIHRvLlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAqL1xyXG5jb25zdCBNQVhfVkFMVUVfTUlMTElTID0gNCAqIDYwICogNjAgKiAxMDAwOyAvLyBGb3VyIGhvdXJzLCBsaWtlIGlPUyBhbmQgQW5kcm9pZC5cclxuLyoqXHJcbiAqIFRoZSBwZXJjZW50YWdlIG9mIGJhY2tvZmYgdGltZSB0byByYW5kb21pemUgYnkuXHJcbiAqIFNlZVxyXG4gKiBodHRwOi8vZ28vc2FmZS1jbGllbnQtYmVoYXZpb3Ijc3RlcC0xLWRldGVybWluZS10aGUtYXBwcm9wcmlhdGUtcmV0cnktaW50ZXJ2YWwtdG8taGFuZGxlLXNwaWtlLXRyYWZmaWNcclxuICogZm9yIGNvbnRleHQuXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbmNvbnN0IFJBTkRPTV9GQUNUT1IgPSAwLjU7XHJcbi8qKlxyXG4gKiBCYXNlZCBvbiB0aGUgYmFja29mZiBtZXRob2QgZnJvbVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtbGlicmFyeS9ibG9iL21hc3Rlci9jbG9zdXJlL2dvb2cvbWF0aC9leHBvbmVudGlhbGJhY2tvZmYuanMuXHJcbiAqIEV4dHJhY3RlZCBoZXJlIHNvIHdlIGRvbid0IG5lZWQgdG8gcGFzcyBtZXRhZGF0YSBhbmQgYSBzdGF0ZWZ1bCBFeHBvbmVudGlhbEJhY2tvZmYgb2JqZWN0IGFyb3VuZC5cclxuICovXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMoYmFja29mZkNvdW50LCBpbnRlcnZhbE1pbGxpcyA9IERFRkFVTFRfSU5URVJWQUxfTUlMTElTLCBiYWNrb2ZmRmFjdG9yID0gREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUikge1xyXG4gICAgLy8gQ2FsY3VsYXRlcyBhbiBleHBvbmVudGlhbGx5IGluY3JlYXNpbmcgdmFsdWUuXHJcbiAgICAvLyBEZXZpYXRpb246IGNhbGN1bGF0ZXMgdmFsdWUgZnJvbSBjb3VudCBhbmQgYSBjb25zdGFudCBpbnRlcnZhbCwgc28gd2Ugb25seSBuZWVkIHRvIHNhdmUgdmFsdWVcclxuICAgIC8vIGFuZCBjb3VudCB0byByZXN0b3JlIHN0YXRlLlxyXG4gICAgY29uc3QgY3VyckJhc2VWYWx1ZSA9IGludGVydmFsTWlsbGlzICogTWF0aC5wb3coYmFja29mZkZhY3RvciwgYmFja29mZkNvdW50KTtcclxuICAgIC8vIEEgcmFuZG9tIFwiZnV6elwiIHRvIGF2b2lkIHdhdmVzIG9mIHJldHJpZXMuXHJcbiAgICAvLyBEZXZpYXRpb246IHJhbmRvbUZhY3RvciBpcyByZXF1aXJlZC5cclxuICAgIGNvbnN0IHJhbmRvbVdhaXQgPSBNYXRoLnJvdW5kKFxyXG4gICAgLy8gQSBmcmFjdGlvbiBvZiB0aGUgYmFja29mZiB2YWx1ZSB0byBhZGQvc3VidHJhY3QuXHJcbiAgICAvLyBEZXZpYXRpb246IGNoYW5nZXMgbXVsdGlwbGljYXRpb24gb3JkZXIgdG8gaW1wcm92ZSByZWFkYWJpbGl0eS5cclxuICAgIFJBTkRPTV9GQUNUT1IgKlxyXG4gICAgICAgIGN1cnJCYXNlVmFsdWUgKlxyXG4gICAgICAgIC8vIEEgcmFuZG9tIGZsb2F0IChyb3VuZGVkIHRvIGludCBieSBNYXRoLnJvdW5kIGFib3ZlKSBpbiB0aGUgcmFuZ2UgWy0xLCAxXS4gRGV0ZXJtaW5lc1xyXG4gICAgICAgIC8vIGlmIHdlIGFkZCBvciBzdWJ0cmFjdC5cclxuICAgICAgICAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKlxyXG4gICAgICAgIDIpO1xyXG4gICAgLy8gTGltaXRzIGJhY2tvZmYgdG8gbWF4IHRvIGF2b2lkIGVmZmVjdGl2ZWx5IHBlcm1hbmVudCBiYWNrb2ZmLlxyXG4gICAgcmV0dXJuIE1hdGgubWluKE1BWF9WQUxVRV9NSUxMSVMsIGN1cnJCYXNlVmFsdWUgKyByYW5kb21XYWl0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZSBFbmdsaXNoIG9yZGluYWwgbGV0dGVycyBhZnRlciBhIG51bWJlclxyXG4gKi9cclxuZnVuY3Rpb24gb3JkaW5hbChpKSB7XHJcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShpKSkge1xyXG4gICAgICAgIHJldHVybiBgJHtpfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaSArIGluZGljYXRvcihpKTtcclxufVxyXG5mdW5jdGlvbiBpbmRpY2F0b3IoaSkge1xyXG4gICAgaSA9IE1hdGguYWJzKGkpO1xyXG4gICAgY29uc3QgY2VudCA9IGkgJSAxMDA7XHJcbiAgICBpZiAoY2VudCA+PSAxMCAmJiBjZW50IDw9IDIwKSB7XHJcbiAgICAgICAgcmV0dXJuICd0aCc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWMgPSBpICUgMTA7XHJcbiAgICBpZiAoZGVjID09PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuICdzdCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAyKSB7XHJcbiAgICAgICAgcmV0dXJuICduZCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAzKSB7XHJcbiAgICAgICAgcmV0dXJuICdyZCc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJ3RoJztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRNb2R1bGFySW5zdGFuY2Uoc2VydmljZSkge1xyXG4gICAgaWYgKHNlcnZpY2UgJiYgc2VydmljZS5fZGVsZWdhdGUpIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZS5fZGVsZWdhdGU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDT05TVEFOVFMsIERlY29kZUJhc2U2NFN0cmluZ0Vycm9yLCBEZWZlcnJlZCwgRXJyb3JGYWN0b3J5LCBGaXJlYmFzZUVycm9yLCBNQVhfVkFMVUVfTUlMTElTLCBSQU5ET01fRkFDVE9SLCBTaGExLCBhcmVDb29raWVzRW5hYmxlZCwgYXNzZXJ0LCBhc3NlcnRpb25FcnJvciwgYXN5bmMsIGJhc2U2NCwgYmFzZTY0RGVjb2RlLCBiYXNlNjRFbmNvZGUsIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nLCBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzLCBjb250YWlucywgY3JlYXRlTW9ja1VzZXJUb2tlbiwgY3JlYXRlU3Vic2NyaWJlLCBkZWNvZGUsIGRlZXBDb3B5LCBkZWVwRXF1YWwsIGRlZXBFeHRlbmQsIGVycm9yUHJlZml4LCBleHRyYWN0UXVlcnlzdHJpbmcsIGdldERlZmF1bHRBcHBDb25maWcsIGdldERlZmF1bHRFbXVsYXRvckhvc3QsIGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCwgZ2V0RGVmYXVsdHMsIGdldEV4cGVyaW1lbnRhbFNldHRpbmcsIGdldEdsb2JhbCwgZ2V0TW9kdWxhckluc3RhbmNlLCBnZXRVQSwgaXNBZG1pbiwgaXNCcm93c2VyLCBpc0Jyb3dzZXJFeHRlbnNpb24sIGlzRWxlY3Ryb24sIGlzRW1wdHksIGlzSUUsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCBpc01vYmlsZUNvcmRvdmEsIGlzTm9kZSwgaXNOb2RlU2RrLCBpc1JlYWN0TmF0aXZlLCBpc1NhZmFyaSwgaXNVV1AsIGlzVmFsaWRGb3JtYXQsIGlzVmFsaWRUaW1lc3RhbXAsIGlzc3VlZEF0VGltZSwganNvbkV2YWwsIG1hcCwgb3JkaW5hbCwgcHJvbWlzZVdpdGhUaW1lb3V0LCBxdWVyeXN0cmluZywgcXVlcnlzdHJpbmdEZWNvZGUsIHNhZmVHZXQsIHN0cmluZ0xlbmd0aCwgc3RyaW5nVG9CeXRlQXJyYXksIHN0cmluZ2lmeSwgdXVpZHY0LCB2YWxpZGF0ZUFyZ0NvdW50LCB2YWxpZGF0ZUNhbGxiYWNrLCB2YWxpZGF0ZUNvbnRleHRPYmplY3QsIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUsIHZhbGlkYXRlTmFtZXNwYWNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgRGVmZXJyZWQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8qKlxyXG4gKiBDb21wb25lbnQgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG5jbGFzcyBDb21wb25lbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIHB1YmxpYyBzZXJ2aWNlIG5hbWUsIGUuZy4gYXBwLCBhdXRoLCBmaXJlc3RvcmUsIGRhdGFiYXNlXHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2VGYWN0b3J5IFNlcnZpY2UgZmFjdG9yeSByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIHB1YmxpYyBpbnRlcmZhY2VcclxuICAgICAqIEBwYXJhbSB0eXBlIHdoZXRoZXIgdGhlIHNlcnZpY2UgcHJvdmlkZWQgYnkgdGhlIGNvbXBvbmVudCBpcyBwdWJsaWMgb3IgcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBpbnN0YW5jZUZhY3RvcnksIHR5cGUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VGYWN0b3J5ID0gaW5zdGFuY2VGYWN0b3J5O1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFByb3BlcnRpZXMgdG8gYmUgYWRkZWQgdG8gdGhlIHNlcnZpY2UgbmFtZXNwYWNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSB7fTtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gXCJMQVpZXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuTEFaWSAqLztcclxuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gbnVsbDtcclxuICAgIH1cclxuICAgIHNldEluc3RhbnRpYXRpb25Nb2RlKG1vZGUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gbW9kZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldE11bHRpcGxlSW5zdGFuY2VzKG11bHRpcGxlSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IG11bHRpcGxlSW5zdGFuY2VzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0U2VydmljZVByb3BzKHByb3BzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSBwcm9wcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGluc3RhbmNlIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiAnYXV0aCcsICdhdXRoLWludGVybmFsJ1xyXG4gKiBOYW1lU2VydmljZU1hcHBpbmdbVF0gaXMgYW4gYWxpYXMgZm9yIHRoZSB0eXBlIG9mIHRoZSBpbnN0YW5jZVxyXG4gKi9cclxuY2xhc3MgUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZCA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3MgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEEgcHJvdmlkZXIgY2FuIHByb3ZpZGUgbXVsaXRwbGUgaW5zdGFuY2VzIG9mIGEgc2VydmljZVxyXG4gICAgICogaWYgdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgaXMgdHJ1ZS5cclxuICAgICAqL1xyXG4gICAgZ2V0KGlkZW50aWZpZXIpIHtcclxuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlc0RlZmVycmVkLmhhcyhub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGRlZmVycmVkKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgc2VydmljZSBpZiBpdCBjYW4gYmUgYXV0by1pbml0aWFsaXplZFxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIGdldCgpLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCByZXR1cm4gdGhlIHVucmVzb2x2ZWQgcHJvbWlzZSBpbiB0aGlzIGNhc2UuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKS5wcm9taXNlO1xyXG4gICAgfVxyXG4gICAgZ2V0SW1tZWRpYXRlKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pZGVudGlmaWVyKTtcclxuICAgICAgICBjb25zdCBvcHRpb25hbCA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5vcHRpb25hbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBJbiBjYXNlIGEgY29tcG9uZW50IGlzIG5vdCBpbml0aWFsaXplZCBhbmQgc2hvdWxkL2NhbiBub3QgYmUgYXV0by1pbml0aWFsaXplZCBhdCB0aGUgbW9tZW50LCByZXR1cm4gbnVsbCBpZiB0aGUgb3B0aW9uYWwgZmxhZyBpcyBzZXQsIG9yIHRocm93XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihgU2VydmljZSAke3RoaXMubmFtZX0gaXMgbm90IGF2YWlsYWJsZWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0Q29tcG9uZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudDtcclxuICAgIH1cclxuICAgIHNldENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBpZiAoY29tcG9uZW50Lm5hbWUgIT09IHRoaXMubmFtZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgTWlzbWF0Y2hpbmcgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGZvciBQcm92aWRlciAke3RoaXMubmFtZX0uYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50IGZvciAke3RoaXMubmFtZX0gaGFzIGFscmVhZHkgYmVlbiBwcm92aWRlZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcclxuICAgICAgICAvLyByZXR1cm4gZWFybHkgd2l0aG91dCBhdHRlbXB0aW5nIHRvIGluaXRpYWxpemUgdGhlIGNvbXBvbmVudCBpZiB0aGUgY29tcG9uZW50IHJlcXVpcmVzIGV4cGxpY2l0IGluaXRpYWxpemF0aW9uIChjYWxsaW5nIGBQcm92aWRlci5pbml0aWFsaXplKClgKVxyXG4gICAgICAgIGlmICghdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgdGhlIHNlcnZpY2UgaXMgZWFnZXIsIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgaW5zdGFuY2VcclxuICAgICAgICBpZiAoaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoeyBpbnN0YW5jZUlkZW50aWZpZXI6IERFRkFVTFRfRU5UUllfTkFNRSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSBmb3IgYW4gZWFnZXIgQ29tcG9uZW50IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIHRoZSBlYWdlclxyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6YXRpb24sIGl0IHNob3VsZCBub3QgY2F1c2UgYSBmYXRhbCBlcnJvci5cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IEludmVzdGlnYXRlIGlmIHdlIG5lZWQgdG8gbWFrZSBpdCBjb25maWd1cmFibGUsIGJlY2F1c2Ugc29tZSBjb21wb25lbnQgbWF5IHdhbnQgdG8gY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IgaW4gdGhpcyBjYXNlP1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENyZWF0ZSBzZXJ2aWNlIGluc3RhbmNlcyBmb3IgdGhlIHBlbmRpbmcgcHJvbWlzZXMgYW5kIHJlc29sdmUgdGhlbVxyXG4gICAgICAgIC8vIE5PVEU6IGlmIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgaXMgZmFsc2UsIG9ubHkgdGhlIGRlZmF1bHQgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkXHJcbiAgICAgICAgLy8gYW5kIGFsbCBwcm9taXNlcyB3aXRoIHJlc29sdmUgd2l0aCBpdCByZWdhcmRsZXNzIG9mIHRoZSBpZGVudGlmaWVyLlxyXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gYGdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoKWAgc2hvdWxkIGFsd2F5cyByZXR1cm4gYSB2YWxpZCBpbnN0YW5jZSBzaW5jZSBhIGNvbXBvbmVudCBpcyBndWFyYW50ZWVkLiB1c2UgISB0byBtYWtlIHR5cGVzY3JpcHQgaGFwcHkuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24sIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgbGVhdmUgdGhlIHByb21pc2UgdW5yZXNvbHZlZC5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNsZWFySW5zdGFuY2UoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgfVxyXG4gICAgLy8gYXBwLmRlbGV0ZSgpIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBvbiBldmVyeSBwcm92aWRlciB0byBkZWxldGUgdGhlIHNlcnZpY2VzXHJcbiAgICAvLyBUT0RPOiBzaG91bGQgd2UgbWFyayB0aGUgcHJvdmlkZXIgYXMgZGVsZXRlZD9cclxuICAgIGFzeW5jIGRlbGV0ZSgpIHtcclxuICAgICAgICBjb25zdCBzZXJ2aWNlcyA9IEFycmF5LmZyb20odGhpcy5pbnN0YW5jZXMudmFsdWVzKCkpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnSU5URVJOQUwnIGluIHNlcnZpY2UpIC8vIGxlZ2FjeSBzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIC5tYXAoc2VydmljZSA9PiBzZXJ2aWNlLklOVEVSTkFMLmRlbGV0ZSgpKSxcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnX2RlbGV0ZScgaW4gc2VydmljZSkgLy8gbW9kdWxhcml6ZWQgc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5fZGVsZXRlKCkpXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbiAgICBpc0NvbXBvbmVudFNldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQgIT0gbnVsbDtcclxuICAgIH1cclxuICAgIGlzSW5pdGlhbGl6ZWQoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlcy5oYXMoaWRlbnRpZmllcik7XHJcbiAgICB9XHJcbiAgICBnZXRPcHRpb25zKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXNPcHRpb25zLmdldChpZGVudGlmaWVyKSB8fCB7fTtcclxuICAgIH1cclxuICAgIGluaXRpYWxpemUob3B0cyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgeyBvcHRpb25zID0ge30gfSA9IG9wdHM7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRzLmluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYCR7dGhpcy5uYW1lfSgke25vcm1hbGl6ZWRJZGVudGlmaWVyfSkgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50ICR7dGhpcy5uYW1lfSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZCB5ZXRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyLFxyXG4gICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gcmVzb2x2ZSBhbnkgcGVuZGluZyBwcm9taXNlIHdhaXRpbmcgZm9yIHRoZSBzZXJ2aWNlIGluc3RhbmNlXHJcbiAgICAgICAgZm9yIChjb25zdCBbaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZURlZmVycmVkXSBvZiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRJZGVudGlmaWVyID09PSBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGludm9rZWQgIGFmdGVyIHRoZSBwcm92aWRlciBoYXMgYmVlbiBpbml0aWFsaXplZCBieSBjYWxsaW5nIHByb3ZpZGVyLmluaXRpYWxpemUoKS5cclxuICAgICAqIFRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIFNZTkNIUk9OT1VTTFksIHNvIGl0IHNob3VsZCBub3QgZXhlY3V0ZSBhbnkgbG9uZ3J1bm5pbmcgdGFza3MgaW4gb3JkZXIgdG8gbm90IGJsb2NrIHRoZSBwcm9ncmFtLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEFuIG9wdGlvbmFsIGluc3RhbmNlIGlkZW50aWZpZXJcclxuICAgICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gdG8gdW5yZWdpc3RlciB0aGUgY2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgb25Jbml0KGNhbGxiYWNrLCBpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdDYWxsYmFja3MgPSAoX2EgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBuZXcgU2V0KCk7XHJcbiAgICAgICAgZXhpc3RpbmdDYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcy5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGV4aXN0aW5nQ2FsbGJhY2tzKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0luc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBjYWxsYmFjayhleGlzdGluZ0luc3RhbmNlLCBub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjayk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW52b2tlIG9uSW5pdCBjYWxsYmFja3Mgc3luY2hyb25vdXNseVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlIHRoZSBzZXJ2aWNlIGluc3RhbmNlYFxyXG4gICAgICovXHJcbiAgICBpbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGlkZW50aWZpZXIpIHtcclxuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCFjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soaW5zdGFuY2UsIGlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25Jbml0IGNhbGxiYWNrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zID0ge30gfSkge1xyXG4gICAgICAgIGxldCBpbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghaW5zdGFuY2UgJiYgdGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UgPSB0aGlzLmNvbXBvbmVudC5pbnN0YW5jZUZhY3RvcnkodGhpcy5jb250YWluZXIsIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplSWRlbnRpZmllckZvckZhY3RvcnkoaW5zdGFuY2VJZGVudGlmaWVyKSxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogSW52b2tlIG9uSW5pdCBsaXN0ZW5lcnMuXHJcbiAgICAgICAgICAgICAqIE5vdGUgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQgaXMgZGlmZmVyZW50LCB3aGljaCBpcyB1c2VkIGJ5IHRoZSBjb21wb25lbnQgY3JlYXRvcixcclxuICAgICAgICAgICAgICogd2hpbGUgb25Jbml0IGxpc3RlbmVycyBhcmUgcmVnaXN0ZXJlZCBieSBjb25zdW1lcnMgb2YgdGhlIHByb3ZpZGVyLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5pbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBPcmRlciBpcyBpbXBvcnRhbnRcclxuICAgICAgICAgICAgICogb25JbnN0YW5jZUNyZWF0ZWQoKSBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTsgd2hpY2hcclxuICAgICAgICAgICAgICogbWFrZXMgYGlzSW5pdGlhbGl6ZWQoKWAgcmV0dXJuIHRydWUuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQodGhpcy5jb250YWluZXIsIGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25JbnN0YW5jZUNyZWF0ZWRDYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgbm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzID8gaWRlbnRpZmllciA6IERFRkFVTFRfRU5UUllfTkFNRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZGVudGlmaWVyOyAvLyBhc3N1bWUgbXVsdGlwbGUgaW5zdGFuY2VzIGFyZSBzdXBwb3J0ZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgcHJvdmlkZWQuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2hvdWxkQXV0b0luaXRpYWxpemUoKSB7XHJcbiAgICAgICAgcmV0dXJuICghIXRoaXMuY29tcG9uZW50ICYmXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlICE9PSBcIkVYUExJQ0lUXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuRVhQTElDSVQgKi8pO1xyXG4gICAgfVxyXG59XHJcbi8vIHVuZGVmaW5lZCBzaG91bGQgYmUgcGFzc2VkIHRvIHRoZSBzZXJ2aWNlIGZhY3RvcnkgZm9yIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGlkZW50aWZpZXIpIHtcclxuICAgIHJldHVybiBpZGVudGlmaWVyID09PSBERUZBVUxUX0VOVFJZX05BTUUgPyB1bmRlZmluZWQgOiBpZGVudGlmaWVyO1xyXG59XHJcbmZ1bmN0aW9uIGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSB7XHJcbiAgICByZXR1cm4gY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlID09PSBcIkVBR0VSXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuRUFHRVIgKi87XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvbXBvbmVudENvbnRhaW5lciB0aGF0IHByb3ZpZGVzIFByb3ZpZGVycyBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcclxuICovXHJcbmNsYXNzIENvbXBvbmVudENvbnRhaW5lciB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgQ29tcG9uZW50IGJlaW5nIGFkZGVkXHJcbiAgICAgKiBAcGFyYW0gb3ZlcndyaXRlIFdoZW4gYSBjb21wb25lbnQgd2l0aCB0aGUgc2FtZSBuYW1lIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCxcclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyB0cnVlOiBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIGNvbXBvbmVudCB3aXRoIHRoZSBuZXcgY29tcG9uZW50IGFuZCBjcmVhdGUgYSBuZXdcclxuICAgICAqIHByb3ZpZGVyIHdpdGggdGhlIG5ldyBjb21wb25lbnQuIEl0IGNhbiBiZSB1c2VmdWwgaW4gdGVzdHMgd2hlcmUgeW91IHdhbnQgdG8gdXNlIGRpZmZlcmVudCBtb2Nrc1xyXG4gICAgICogZm9yIGRpZmZlcmVudCB0ZXN0cy5cclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyBmYWxzZTogdGhyb3cgYW4gZXhjZXB0aW9uXHJcbiAgICAgKi9cclxuICAgIGFkZENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCB3aXRoICR7dGhpcy5uYW1lfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm92aWRlci5zZXRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSBleGlzdGluZyBwcm92aWRlciBmcm9tIHRoZSBjb250YWluZXIsIHNvIHdlIGNhbiByZWdpc3RlciB0aGUgbmV3IGNvbXBvbmVudFxyXG4gICAgICAgICAgICB0aGlzLnByb3ZpZGVycy5kZWxldGUoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBnZXRQcm92aWRlciBwcm92aWRlcyBhIHR5cGUgc2FmZSBpbnRlcmZhY2Ugd2hlcmUgaXQgY2FuIG9ubHkgYmUgY2FsbGVkIHdpdGggYSBmaWVsZCBuYW1lXHJcbiAgICAgKiBwcmVzZW50IGluIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UuXHJcbiAgICAgKlxyXG4gICAgICogRmlyZWJhc2UgU0RLcyBwcm92aWRpbmcgc2VydmljZXMgc2hvdWxkIGV4dGVuZCBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlIHRvIHJlZ2lzdGVyXHJcbiAgICAgKiB0aGVtc2VsdmVzLlxyXG4gICAgICovXHJcbiAgICBnZXRQcm92aWRlcihuYW1lKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvdmlkZXJzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjcmVhdGUgYSBQcm92aWRlciBmb3IgYSBzZXJ2aWNlIHRoYXQgaGFzbid0IHJlZ2lzdGVyZWQgd2l0aCBGaXJlYmFzZVxyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IFByb3ZpZGVyKG5hbWUsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJzLnNldChuYW1lLCBwcm92aWRlcik7XHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyO1xyXG4gICAgfVxyXG4gICAgZ2V0UHJvdmlkZXJzKCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucHJvdmlkZXJzLnZhbHVlcygpKTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbnRhaW5lciwgUHJvdmlkZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCIvKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBjb250YWluZXIgZm9yIGFsbCBvZiB0aGUgTG9nZ2VyIGluc3RhbmNlc1xyXG4gKi9cclxuY29uc3QgaW5zdGFuY2VzID0gW107XHJcbi8qKlxyXG4gKiBUaGUgSlMgU0RLIHN1cHBvcnRzIDUgbG9nIGxldmVscyBhbmQgYWxzbyBhbGxvd3MgYSB1c2VyIHRoZSBhYmlsaXR5IHRvXHJcbiAqIHNpbGVuY2UgdGhlIGxvZ3MgYWx0b2dldGhlci5cclxuICpcclxuICogVGhlIG9yZGVyIGlzIGEgZm9sbG93czpcclxuICogREVCVUcgPCBWRVJCT1NFIDwgSU5GTyA8IFdBUk4gPCBFUlJPUlxyXG4gKlxyXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgd2lsbCBiZSBjYXB0dXJlZCAoaS5lLiBpZlxyXG4gKiB5b3Ugc2V0IHRoZSBsb2cgbGV2ZWwgdG8gYElORk9gLCBlcnJvcnMgd2lsbCBzdGlsbCBiZSBsb2dnZWQsIGJ1dCBgREVCVUdgIGFuZFxyXG4gKiBgVkVSQk9TRWAgbG9ncyB3aWxsIG5vdClcclxuICovXHJcbnZhciBMb2dMZXZlbDtcclxuKGZ1bmN0aW9uIChMb2dMZXZlbCkge1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJERUJVR1wiXSA9IDBdID0gXCJERUJVR1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJWRVJCT1NFXCJdID0gMV0gPSBcIlZFUkJPU0VcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiSU5GT1wiXSA9IDJdID0gXCJJTkZPXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIldBUk5cIl0gPSAzXSA9IFwiV0FSTlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJFUlJPUlwiXSA9IDRdID0gXCJFUlJPUlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJTSUxFTlRcIl0gPSA1XSA9IFwiU0lMRU5UXCI7XHJcbn0pKExvZ0xldmVsIHx8IChMb2dMZXZlbCA9IHt9KSk7XHJcbmNvbnN0IGxldmVsU3RyaW5nVG9FbnVtID0ge1xyXG4gICAgJ2RlYnVnJzogTG9nTGV2ZWwuREVCVUcsXHJcbiAgICAndmVyYm9zZSc6IExvZ0xldmVsLlZFUkJPU0UsXHJcbiAgICAnaW5mbyc6IExvZ0xldmVsLklORk8sXHJcbiAgICAnd2Fybic6IExvZ0xldmVsLldBUk4sXHJcbiAgICAnZXJyb3InOiBMb2dMZXZlbC5FUlJPUixcclxuICAgICdzaWxlbnQnOiBMb2dMZXZlbC5TSUxFTlRcclxufTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBsZXZlbFxyXG4gKi9cclxuY29uc3QgZGVmYXVsdExvZ0xldmVsID0gTG9nTGV2ZWwuSU5GTztcclxuLyoqXHJcbiAqIEJ5IGRlZmF1bHQsIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgZGlzcGxheWVkIGluIHRoZSBkZXZlbG9wZXIgY29uc29sZSAoaW5cclxuICogY2hyb21lKS4gVG8gYXZvaWQgZm9yY2luZyB1c2VycyB0byBoYXZlIHRvIG9wdC1pbiB0byB0aGVzZSBsb2dzIHR3aWNlXHJcbiAqIChpLmUuIG9uY2UgZm9yIGZpcmViYXNlLCBhbmQgb25jZSBpbiB0aGUgY29uc29sZSksIHdlIGFyZSBzZW5kaW5nIGBERUJVR2BcclxuICogbG9ncyB0byB0aGUgYGNvbnNvbGUubG9nYCBmdW5jdGlvbi5cclxuICovXHJcbmNvbnN0IENvbnNvbGVNZXRob2QgPSB7XHJcbiAgICBbTG9nTGV2ZWwuREVCVUddOiAnbG9nJyxcclxuICAgIFtMb2dMZXZlbC5WRVJCT1NFXTogJ2xvZycsXHJcbiAgICBbTG9nTGV2ZWwuSU5GT106ICdpbmZvJyxcclxuICAgIFtMb2dMZXZlbC5XQVJOXTogJ3dhcm4nLFxyXG4gICAgW0xvZ0xldmVsLkVSUk9SXTogJ2Vycm9yJ1xyXG59O1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgbG9nIGhhbmRsZXIgd2lsbCBmb3J3YXJkIERFQlVHLCBWRVJCT1NFLCBJTkZPLCBXQVJOLCBhbmQgRVJST1JcclxuICogbWVzc2FnZXMgb24gdG8gdGhlaXIgY29ycmVzcG9uZGluZyBjb25zb2xlIGNvdW50ZXJwYXJ0cyAoaWYgdGhlIGxvZyBtZXRob2RcclxuICogaXMgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IGxvZyBsZXZlbClcclxuICovXHJcbmNvbnN0IGRlZmF1bHRMb2dIYW5kbGVyID0gKGluc3RhbmNlLCBsb2dUeXBlLCAuLi5hcmdzKSA9PiB7XHJcbiAgICBpZiAobG9nVHlwZSA8IGluc3RhbmNlLmxvZ0xldmVsKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgY29uc3QgbWV0aG9kID0gQ29uc29sZU1ldGhvZFtsb2dUeXBlXTtcclxuICAgIGlmIChtZXRob2QpIHtcclxuICAgICAgICBjb25zb2xlW21ldGhvZF0oYFske25vd31dICAke2luc3RhbmNlLm5hbWV9OmAsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gbG9nIGEgbWVzc2FnZSB3aXRoIGFuIGludmFsaWQgbG9nVHlwZSAodmFsdWU6ICR7bG9nVHlwZX0pYCk7XHJcbiAgICB9XHJcbn07XHJcbmNsYXNzIExvZ2dlciB7XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVzIHlvdSBhbiBpbnN0YW5jZSBvZiBhIExvZ2dlciB0byBjYXB0dXJlIG1lc3NhZ2VzIGFjY29yZGluZyB0b1xyXG4gICAgICogRmlyZWJhc2UncyBsb2dnaW5nIHNjaGVtZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0aGF0IHRoZSBsb2dzIHdpbGwgYmUgYXNzb2NpYXRlZCB3aXRoXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBsb2cgbGV2ZWwgb2YgdGhlIGdpdmVuIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IGRlZmF1bHRMb2dMZXZlbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbWFpbiAoaW50ZXJuYWwpIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqIENhbiBiZSBzZXQgdG8gYSBuZXcgZnVuY3Rpb24gaW4gaW50ZXJuYWwgcGFja2FnZSBjb2RlIGJ1dCBub3QgYnkgdXNlci5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gZGVmYXVsdExvZ0hhbmRsZXI7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG9wdGlvbmFsLCBhZGRpdGlvbmFsLCB1c2VyLWRlZmluZWQgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhcHR1cmUgdGhlIGN1cnJlbnQgaW5zdGFuY2UgZm9yIGxhdGVyIHVzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGluc3RhbmNlcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGxvZ0xldmVsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dMZXZlbDtcclxuICAgIH1cclxuICAgIHNldCBsb2dMZXZlbCh2YWwpIHtcclxuICAgICAgICBpZiAoISh2YWwgaW4gTG9nTGV2ZWwpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgdmFsdWUgXCIke3ZhbH1cIiBhc3NpZ25lZCB0byBcXGBsb2dMZXZlbFxcYGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHZhbDtcclxuICAgIH1cclxuICAgIC8vIFdvcmthcm91bmQgZm9yIHNldHRlci9nZXR0ZXIgaGF2aW5nIHRvIGJlIHRoZSBzYW1lIHR5cGUuXHJcbiAgICBzZXRMb2dMZXZlbCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnID8gbGV2ZWxTdHJpbmdUb0VudW1bdmFsXSA6IHZhbDtcclxuICAgIH1cclxuICAgIGdldCBsb2dIYW5kbGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dIYW5kbGVyO1xyXG4gICAgfVxyXG4gICAgc2V0IGxvZ0hhbmRsZXIodmFsKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgYXNzaWduZWQgdG8gYGxvZ0hhbmRsZXJgIG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IHVzZXJMb2dIYW5kbGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyTG9nSGFuZGxlcjtcclxuICAgIH1cclxuICAgIHNldCB1c2VyTG9nSGFuZGxlcih2YWwpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciA9IHZhbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZ1bmN0aW9ucyBiZWxvdyBhcmUgYWxsIGJhc2VkIG9uIHRoZSBgY29uc29sZWAgaW50ZXJmYWNlXHJcbiAgICAgKi9cclxuICAgIGRlYnVnKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5ERUJVRywgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5ERUJVRywgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBsb2coLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmXHJcbiAgICAgICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuVkVSQk9TRSwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBpbmZvKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5JTkZPLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLklORk8sIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgd2FybiguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5XQVJOLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGVycm9yKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5FUlJPUiwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5FUlJPUiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobGV2ZWwpIHtcclxuICAgIGluc3RhbmNlcy5mb3JFYWNoKGluc3QgPT4ge1xyXG4gICAgICAgIGluc3Quc2V0TG9nTGV2ZWwobGV2ZWwpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGZvciAoY29uc3QgaW5zdGFuY2Ugb2YgaW5zdGFuY2VzKSB7XHJcbiAgICAgICAgbGV0IGN1c3RvbUxvZ0xldmVsID0gbnVsbDtcclxuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxldmVsKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUxvZ0xldmVsID0gbGV2ZWxTdHJpbmdUb0VudW1bb3B0aW9ucy5sZXZlbF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsb2dDYWxsYmFjayA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS51c2VyTG9nSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS51c2VyTG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbGV2ZWwsIC4uLmFyZ3MpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhcmdzXHJcbiAgICAgICAgICAgICAgICAgICAgLm1hcChhcmcgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmcgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChpZ25vcmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihhcmcgPT4gYXJnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCcgJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPj0gKGN1c3RvbUxvZ0xldmVsICE9PSBudWxsICYmIGN1c3RvbUxvZ0xldmVsICE9PSB2b2lkIDAgPyBjdXN0b21Mb2dMZXZlbCA6IGluc3RhbmNlLmxvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ0NhbGxiYWNrKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IExvZ0xldmVsW2xldmVsXS50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBpbnN0YW5jZS5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IExvZ0xldmVsLCBMb2dnZXIsIHNldExvZ0xldmVsLCBzZXRVc2VyTG9nSGFuZGxlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImNvbnN0IGluc3RhbmNlT2ZBbnkgPSAob2JqZWN0LCBjb25zdHJ1Y3RvcnMpID0+IGNvbnN0cnVjdG9ycy5zb21lKChjKSA9PiBvYmplY3QgaW5zdGFuY2VvZiBjKTtcblxubGV0IGlkYlByb3h5YWJsZVR5cGVzO1xubGV0IGN1cnNvckFkdmFuY2VNZXRob2RzO1xuLy8gVGhpcyBpcyBhIGZ1bmN0aW9uIHRvIHByZXZlbnQgaXQgdGhyb3dpbmcgdXAgaW4gbm9kZSBlbnZpcm9ubWVudHMuXG5mdW5jdGlvbiBnZXRJZGJQcm94eWFibGVUeXBlcygpIHtcbiAgICByZXR1cm4gKGlkYlByb3h5YWJsZVR5cGVzIHx8XG4gICAgICAgIChpZGJQcm94eWFibGVUeXBlcyA9IFtcbiAgICAgICAgICAgIElEQkRhdGFiYXNlLFxuICAgICAgICAgICAgSURCT2JqZWN0U3RvcmUsXG4gICAgICAgICAgICBJREJJbmRleCxcbiAgICAgICAgICAgIElEQkN1cnNvcixcbiAgICAgICAgICAgIElEQlRyYW5zYWN0aW9uLFxuICAgICAgICBdKSk7XG59XG4vLyBUaGlzIGlzIGEgZnVuY3Rpb24gdG8gcHJldmVudCBpdCB0aHJvd2luZyB1cCBpbiBub2RlIGVudmlyb25tZW50cy5cbmZ1bmN0aW9uIGdldEN1cnNvckFkdmFuY2VNZXRob2RzKCkge1xuICAgIHJldHVybiAoY3Vyc29yQWR2YW5jZU1ldGhvZHMgfHxcbiAgICAgICAgKGN1cnNvckFkdmFuY2VNZXRob2RzID0gW1xuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5hZHZhbmNlLFxuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5jb250aW51ZSxcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuY29udGludWVQcmltYXJ5S2V5LFxuICAgICAgICBdKSk7XG59XG5jb25zdCBjdXJzb3JSZXF1ZXN0TWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zYWN0aW9uRG9uZU1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNmb3JtQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCkge1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHVubGlzdGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgc3VjY2Vzcyk7XG4gICAgICAgICAgICByZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSh3cmFwKHJlcXVlc3QucmVzdWx0KSk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlamVjdChyZXF1ZXN0LmVycm9yKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIHN1Y2Nlc3MpO1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgIH0pO1xuICAgIHByb21pc2VcbiAgICAgICAgLnRoZW4oKHZhbHVlKSA9PiB7XG4gICAgICAgIC8vIFNpbmNlIGN1cnNvcmluZyByZXVzZXMgdGhlIElEQlJlcXVlc3QgKCpzaWdoKiksIHdlIGNhY2hlIGl0IGZvciBsYXRlciByZXRyaWV2YWxcbiAgICAgICAgLy8gKHNlZSB3cmFwRnVuY3Rpb24pLlxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJDdXJzb3IpIHtcbiAgICAgICAgICAgIGN1cnNvclJlcXVlc3RNYXAuc2V0KHZhbHVlLCByZXF1ZXN0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDYXRjaGluZyB0byBhdm9pZCBcIlVuY2F1Z2h0IFByb21pc2UgZXhjZXB0aW9uc1wiXG4gICAgfSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgLy8gVGhpcyBtYXBwaW5nIGV4aXN0cyBpbiByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgYnV0IGRvZXNuJ3QgZG9lc24ndCBleGlzdCBpbiB0cmFuc2Zvcm1DYWNoZS4gVGhpc1xuICAgIC8vIGlzIGJlY2F1c2Ugd2UgY3JlYXRlIG1hbnkgcHJvbWlzZXMgZnJvbSBhIHNpbmdsZSBJREJSZXF1ZXN0LlxuICAgIHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5zZXQocHJvbWlzZSwgcmVxdWVzdCk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5mdW5jdGlvbiBjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24odHgpIHtcbiAgICAvLyBFYXJseSBiYWlsIGlmIHdlJ3ZlIGFscmVhZHkgY3JlYXRlZCBhIGRvbmUgcHJvbWlzZSBmb3IgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICBpZiAodHJhbnNhY3Rpb25Eb25lTWFwLmhhcyh0eCkpXG4gICAgICAgIHJldHVybjtcbiAgICBjb25zdCBkb25lID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCB1bmxpc3RlbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgY29tcGxldGUpO1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIGVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlamVjdCh0eC5lcnJvciB8fCBuZXcgRE9NRXhjZXB0aW9uKCdBYm9ydEVycm9yJywgJ0Fib3J0RXJyb3InKSk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGNvbXBsZXRlKTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZXJyb3IpO1xuICAgIH0pO1xuICAgIC8vIENhY2hlIGl0IGZvciBsYXRlciByZXRyaWV2YWwuXG4gICAgdHJhbnNhY3Rpb25Eb25lTWFwLnNldCh0eCwgZG9uZSk7XG59XG5sZXQgaWRiUHJveHlUcmFwcyA9IHtcbiAgICBnZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikge1xuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIHRyYW5zYWN0aW9uLmRvbmUuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ2RvbmUnKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbkRvbmVNYXAuZ2V0KHRhcmdldCk7XG4gICAgICAgICAgICAvLyBQb2x5ZmlsbCBmb3Igb2JqZWN0U3RvcmVOYW1lcyBiZWNhdXNlIG9mIEVkZ2UuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ29iamVjdFN0b3JlTmFtZXMnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5vYmplY3RTdG9yZU5hbWVzIHx8IHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcC5nZXQodGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE1ha2UgdHguc3RvcmUgcmV0dXJuIHRoZSBvbmx5IHN0b3JlIGluIHRoZSB0cmFuc2FjdGlvbiwgb3IgdW5kZWZpbmVkIGlmIHRoZXJlIGFyZSBtYW55LlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdzdG9yZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjZWl2ZXIub2JqZWN0U3RvcmVOYW1lc1sxXVxuICAgICAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA6IHJlY2VpdmVyLm9iamVjdFN0b3JlKHJlY2VpdmVyLm9iamVjdFN0b3JlTmFtZXNbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEVsc2UgdHJhbnNmb3JtIHdoYXRldmVyIHdlIGdldCBiYWNrLlxuICAgICAgICByZXR1cm4gd3JhcCh0YXJnZXRbcHJvcF0pO1xuICAgIH0sXG4gICAgc2V0KHRhcmdldCwgcHJvcCwgdmFsdWUpIHtcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgaGFzKHRhcmdldCwgcHJvcCkge1xuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24gJiZcbiAgICAgICAgICAgIChwcm9wID09PSAnZG9uZScgfHwgcHJvcCA9PT0gJ3N0b3JlJykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm9wIGluIHRhcmdldDtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIHJlcGxhY2VUcmFwcyhjYWxsYmFjaykge1xuICAgIGlkYlByb3h5VHJhcHMgPSBjYWxsYmFjayhpZGJQcm94eVRyYXBzKTtcbn1cbmZ1bmN0aW9uIHdyYXBGdW5jdGlvbihmdW5jKSB7XG4gICAgLy8gRHVlIHRvIGV4cGVjdGVkIG9iamVjdCBlcXVhbGl0eSAod2hpY2ggaXMgZW5mb3JjZWQgYnkgdGhlIGNhY2hpbmcgaW4gYHdyYXBgKSwgd2VcbiAgICAvLyBvbmx5IGNyZWF0ZSBvbmUgbmV3IGZ1bmMgcGVyIGZ1bmMuXG4gICAgLy8gRWRnZSBkb2Vzbid0IHN1cHBvcnQgb2JqZWN0U3RvcmVOYW1lcyAoYm9vbyksIHNvIHdlIHBvbHlmaWxsIGl0IGhlcmUuXG4gICAgaWYgKGZ1bmMgPT09IElEQkRhdGFiYXNlLnByb3RvdHlwZS50cmFuc2FjdGlvbiAmJlxuICAgICAgICAhKCdvYmplY3RTdG9yZU5hbWVzJyBpbiBJREJUcmFuc2FjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoc3RvcmVOYW1lcywgLi4uYXJncykge1xuICAgICAgICAgICAgY29uc3QgdHggPSBmdW5jLmNhbGwodW53cmFwKHRoaXMpLCBzdG9yZU5hbWVzLCAuLi5hcmdzKTtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcC5zZXQodHgsIHN0b3JlTmFtZXMuc29ydCA/IHN0b3JlTmFtZXMuc29ydCgpIDogW3N0b3JlTmFtZXNdKTtcbiAgICAgICAgICAgIHJldHVybiB3cmFwKHR4KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gQ3Vyc29yIG1ldGhvZHMgYXJlIHNwZWNpYWwsIGFzIHRoZSBiZWhhdmlvdXIgaXMgYSBsaXR0bGUgbW9yZSBkaWZmZXJlbnQgdG8gc3RhbmRhcmQgSURCLiBJblxuICAgIC8vIElEQiwgeW91IGFkdmFuY2UgdGhlIGN1cnNvciBhbmQgd2FpdCBmb3IgYSBuZXcgJ3N1Y2Nlc3MnIG9uIHRoZSBJREJSZXF1ZXN0IHRoYXQgZ2F2ZSB5b3UgdGhlXG4gICAgLy8gY3Vyc29yLiBJdCdzIGtpbmRhIGxpa2UgYSBwcm9taXNlIHRoYXQgY2FuIHJlc29sdmUgd2l0aCBtYW55IHZhbHVlcy4gVGhhdCBkb2Vzbid0IG1ha2Ugc2Vuc2VcbiAgICAvLyB3aXRoIHJlYWwgcHJvbWlzZXMsIHNvIGVhY2ggYWR2YW5jZSBtZXRob2RzIHJldHVybnMgYSBuZXcgcHJvbWlzZSBmb3IgdGhlIGN1cnNvciBvYmplY3QsIG9yXG4gICAgLy8gdW5kZWZpbmVkIGlmIHRoZSBlbmQgb2YgdGhlIGN1cnNvciBoYXMgYmVlbiByZWFjaGVkLlxuICAgIGlmIChnZXRDdXJzb3JBZHZhbmNlTWV0aG9kcygpLmluY2x1ZGVzKGZ1bmMpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgLy8gQ2FsbGluZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJveHkgYXMgJ3RoaXMnIGNhdXNlcyBJTExFR0FMIElOVk9DQVRJT04sIHNvIHdlIHVzZVxuICAgICAgICAgICAgLy8gdGhlIG9yaWdpbmFsIG9iamVjdC5cbiAgICAgICAgICAgIGZ1bmMuYXBwbHkodW53cmFwKHRoaXMpLCBhcmdzKTtcbiAgICAgICAgICAgIHJldHVybiB3cmFwKGN1cnNvclJlcXVlc3RNYXAuZ2V0KHRoaXMpKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgIC8vIENhbGxpbmcgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHdpdGggdGhlIHByb3h5IGFzICd0aGlzJyBjYXVzZXMgSUxMRUdBTCBJTlZPQ0FUSU9OLCBzbyB3ZSB1c2VcbiAgICAgICAgLy8gdGhlIG9yaWdpbmFsIG9iamVjdC5cbiAgICAgICAgcmV0dXJuIHdyYXAoZnVuYy5hcHBseSh1bndyYXAodGhpcyksIGFyZ3MpKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gdHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpXG4gICAgICAgIHJldHVybiB3cmFwRnVuY3Rpb24odmFsdWUpO1xuICAgIC8vIFRoaXMgZG9lc24ndCByZXR1cm4sIGl0IGp1c3QgY3JlYXRlcyBhICdkb25lJyBwcm9taXNlIGZvciB0aGUgdHJhbnNhY3Rpb24sXG4gICAgLy8gd2hpY2ggaXMgbGF0ZXIgcmV0dXJuZWQgZm9yIHRyYW5zYWN0aW9uLmRvbmUgKHNlZSBpZGJPYmplY3RIYW5kbGVyKS5cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbilcbiAgICAgICAgY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uKHZhbHVlKTtcbiAgICBpZiAoaW5zdGFuY2VPZkFueSh2YWx1ZSwgZ2V0SWRiUHJveHlhYmxlVHlwZXMoKSkpXG4gICAgICAgIHJldHVybiBuZXcgUHJveHkodmFsdWUsIGlkYlByb3h5VHJhcHMpO1xuICAgIC8vIFJldHVybiB0aGUgc2FtZSB2YWx1ZSBiYWNrIGlmIHdlJ3JlIG5vdCBnb2luZyB0byB0cmFuc2Zvcm0gaXQuXG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gd3JhcCh2YWx1ZSkge1xuICAgIC8vIFdlIHNvbWV0aW1lcyBnZW5lcmF0ZSBtdWx0aXBsZSBwcm9taXNlcyBmcm9tIGEgc2luZ2xlIElEQlJlcXVlc3QgKGVnIHdoZW4gY3Vyc29yaW5nKSwgYmVjYXVzZVxuICAgIC8vIElEQiBpcyB3ZWlyZCBhbmQgYSBzaW5nbGUgSURCUmVxdWVzdCBjYW4geWllbGQgbWFueSByZXNwb25zZXMsIHNvIHRoZXNlIGNhbid0IGJlIGNhY2hlZC5cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJSZXF1ZXN0KVxuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdCh2YWx1ZSk7XG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSB0cmFuc2Zvcm1lZCB0aGlzIHZhbHVlIGJlZm9yZSwgcmV1c2UgdGhlIHRyYW5zZm9ybWVkIHZhbHVlLlxuICAgIC8vIFRoaXMgaXMgZmFzdGVyLCBidXQgaXQgYWxzbyBwcm92aWRlcyBvYmplY3QgZXF1YWxpdHkuXG4gICAgaWYgKHRyYW5zZm9ybUNhY2hlLmhhcyh2YWx1ZSkpXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1DYWNoZS5nZXQodmFsdWUpO1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gdHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSh2YWx1ZSk7XG4gICAgLy8gTm90IGFsbCB0eXBlcyBhcmUgdHJhbnNmb3JtZWQuXG4gICAgLy8gVGhlc2UgbWF5IGJlIHByaW1pdGl2ZSB0eXBlcywgc28gdGhleSBjYW4ndCBiZSBXZWFrTWFwIGtleXMuXG4gICAgaWYgKG5ld1ZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICB0cmFuc2Zvcm1DYWNoZS5zZXQodmFsdWUsIG5ld1ZhbHVlKTtcbiAgICAgICAgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLnNldChuZXdWYWx1ZSwgdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3VmFsdWU7XG59XG5jb25zdCB1bndyYXAgPSAodmFsdWUpID0+IHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5nZXQodmFsdWUpO1xuXG5leHBvcnQgeyByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgYXMgYSwgaW5zdGFuY2VPZkFueSBhcyBpLCByZXBsYWNlVHJhcHMgYXMgciwgdW53cmFwIGFzIHUsIHdyYXAgYXMgdyB9O1xuIiwiaW1wb3J0IHsgdyBhcyB3cmFwLCByIGFzIHJlcGxhY2VUcmFwcyB9IGZyb20gJy4vd3JhcC1pZGItdmFsdWUuanMnO1xuZXhwb3J0IHsgdSBhcyB1bndyYXAsIHcgYXMgd3JhcCB9IGZyb20gJy4vd3JhcC1pZGItdmFsdWUuanMnO1xuXG4vKipcbiAqIE9wZW4gYSBkYXRhYmFzZS5cbiAqXG4gKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBkYXRhYmFzZS5cbiAqIEBwYXJhbSB2ZXJzaW9uIFNjaGVtYSB2ZXJzaW9uLlxuICogQHBhcmFtIGNhbGxiYWNrcyBBZGRpdGlvbmFsIGNhbGxiYWNrcy5cbiAqL1xuZnVuY3Rpb24gb3BlbkRCKG5hbWUsIHZlcnNpb24sIHsgYmxvY2tlZCwgdXBncmFkZSwgYmxvY2tpbmcsIHRlcm1pbmF0ZWQgfSA9IHt9KSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKG5hbWUsIHZlcnNpb24pO1xuICAgIGNvbnN0IG9wZW5Qcm9taXNlID0gd3JhcChyZXF1ZXN0KTtcbiAgICBpZiAodXBncmFkZSkge1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3VwZ3JhZGVuZWVkZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHVwZ3JhZGUod3JhcChyZXF1ZXN0LnJlc3VsdCksIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50Lm5ld1ZlcnNpb24sIHdyYXAocmVxdWVzdC50cmFuc2FjdGlvbiksIGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChibG9ja2VkKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignYmxvY2tlZCcsIChldmVudCkgPT4gYmxvY2tlZChcbiAgICAgICAgLy8gQ2FzdGluZyBkdWUgdG8gaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0LURPTS1saWItZ2VuZXJhdG9yL3B1bGwvMTQwNVxuICAgICAgICBldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCBldmVudCkpO1xuICAgIH1cbiAgICBvcGVuUHJvbWlzZVxuICAgICAgICAudGhlbigoZGIpID0+IHtcbiAgICAgICAgaWYgKHRlcm1pbmF0ZWQpXG4gICAgICAgICAgICBkYi5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsICgpID0+IHRlcm1pbmF0ZWQoKSk7XG4gICAgICAgIGlmIChibG9ja2luZykge1xuICAgICAgICAgICAgZGIuYWRkRXZlbnRMaXN0ZW5lcigndmVyc2lvbmNoYW5nZScsIChldmVudCkgPT4gYmxvY2tpbmcoZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQubmV3VmVyc2lvbiwgZXZlbnQpKTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIHJldHVybiBvcGVuUHJvbWlzZTtcbn1cbi8qKlxuICogRGVsZXRlIGEgZGF0YWJhc2UuXG4gKlxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgZGF0YWJhc2UuXG4gKi9cbmZ1bmN0aW9uIGRlbGV0ZURCKG5hbWUsIHsgYmxvY2tlZCB9ID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKG5hbWUpO1xuICAgIGlmIChibG9ja2VkKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignYmxvY2tlZCcsIChldmVudCkgPT4gYmxvY2tlZChcbiAgICAgICAgLy8gQ2FzdGluZyBkdWUgdG8gaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0LURPTS1saWItZ2VuZXJhdG9yL3B1bGwvMTQwNVxuICAgICAgICBldmVudC5vbGRWZXJzaW9uLCBldmVudCkpO1xuICAgIH1cbiAgICByZXR1cm4gd3JhcChyZXF1ZXN0KS50aGVuKCgpID0+IHVuZGVmaW5lZCk7XG59XG5cbmNvbnN0IHJlYWRNZXRob2RzID0gWydnZXQnLCAnZ2V0S2V5JywgJ2dldEFsbCcsICdnZXRBbGxLZXlzJywgJ2NvdW50J107XG5jb25zdCB3cml0ZU1ldGhvZHMgPSBbJ3B1dCcsICdhZGQnLCAnZGVsZXRlJywgJ2NsZWFyJ107XG5jb25zdCBjYWNoZWRNZXRob2RzID0gbmV3IE1hcCgpO1xuZnVuY3Rpb24gZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkge1xuICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIElEQkRhdGFiYXNlICYmXG4gICAgICAgICEocHJvcCBpbiB0YXJnZXQpICYmXG4gICAgICAgIHR5cGVvZiBwcm9wID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2FjaGVkTWV0aG9kcy5nZXQocHJvcCkpXG4gICAgICAgIHJldHVybiBjYWNoZWRNZXRob2RzLmdldChwcm9wKTtcbiAgICBjb25zdCB0YXJnZXRGdW5jTmFtZSA9IHByb3AucmVwbGFjZSgvRnJvbUluZGV4JC8sICcnKTtcbiAgICBjb25zdCB1c2VJbmRleCA9IHByb3AgIT09IHRhcmdldEZ1bmNOYW1lO1xuICAgIGNvbnN0IGlzV3JpdGUgPSB3cml0ZU1ldGhvZHMuaW5jbHVkZXModGFyZ2V0RnVuY05hbWUpO1xuICAgIGlmIChcbiAgICAvLyBCYWlsIGlmIHRoZSB0YXJnZXQgZG9lc24ndCBleGlzdCBvbiB0aGUgdGFyZ2V0LiBFZywgZ2V0QWxsIGlzbid0IGluIEVkZ2UuXG4gICAgISh0YXJnZXRGdW5jTmFtZSBpbiAodXNlSW5kZXggPyBJREJJbmRleCA6IElEQk9iamVjdFN0b3JlKS5wcm90b3R5cGUpIHx8XG4gICAgICAgICEoaXNXcml0ZSB8fCByZWFkTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbWV0aG9kID0gYXN5bmMgZnVuY3Rpb24gKHN0b3JlTmFtZSwgLi4uYXJncykge1xuICAgICAgICAvLyBpc1dyaXRlID8gJ3JlYWR3cml0ZScgOiB1bmRlZmluZWQgZ3ppcHBzIGJldHRlciwgYnV0IGZhaWxzIGluIEVkZ2UgOihcbiAgICAgICAgY29uc3QgdHggPSB0aGlzLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgaXNXcml0ZSA/ICdyZWFkd3JpdGUnIDogJ3JlYWRvbmx5Jyk7XG4gICAgICAgIGxldCB0YXJnZXQgPSB0eC5zdG9yZTtcbiAgICAgICAgaWYgKHVzZUluZGV4KVxuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LmluZGV4KGFyZ3Muc2hpZnQoKSk7XG4gICAgICAgIC8vIE11c3QgcmVqZWN0IGlmIG9wIHJlamVjdHMuXG4gICAgICAgIC8vIElmIGl0J3MgYSB3cml0ZSBvcGVyYXRpb24sIG11c3QgcmVqZWN0IGlmIHR4LmRvbmUgcmVqZWN0cy5cbiAgICAgICAgLy8gTXVzdCByZWplY3Qgd2l0aCBvcCByZWplY3Rpb24gZmlyc3QuXG4gICAgICAgIC8vIE11c3QgcmVzb2x2ZSB3aXRoIG9wIHZhbHVlLlxuICAgICAgICAvLyBNdXN0IGhhbmRsZSBib3RoIHByb21pc2VzIChubyB1bmhhbmRsZWQgcmVqZWN0aW9ucylcbiAgICAgICAgcmV0dXJuIChhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICB0YXJnZXRbdGFyZ2V0RnVuY05hbWVdKC4uLmFyZ3MpLFxuICAgICAgICAgICAgaXNXcml0ZSAmJiB0eC5kb25lLFxuICAgICAgICBdKSlbMF07XG4gICAgfTtcbiAgICBjYWNoZWRNZXRob2RzLnNldChwcm9wLCBtZXRob2QpO1xuICAgIHJldHVybiBtZXRob2Q7XG59XG5yZXBsYWNlVHJhcHMoKG9sZFRyYXBzKSA9PiAoe1xuICAgIC4uLm9sZFRyYXBzLFxuICAgIGdldDogKHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpID0+IGdldE1ldGhvZCh0YXJnZXQsIHByb3ApIHx8IG9sZFRyYXBzLmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSxcbiAgICBoYXM6ICh0YXJnZXQsIHByb3ApID0+ICEhZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuaGFzKHRhcmdldCwgcHJvcCksXG59KSk7XG5cbmV4cG9ydCB7IGRlbGV0ZURCLCBvcGVuREIgfTtcbiIsImltcG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyIH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBMb2dnZXIsIHNldFVzZXJMb2dIYW5kbGVyLCBzZXRMb2dMZXZlbCBhcyBzZXRMb2dMZXZlbCQxIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIGdldERlZmF1bHRBcHBDb25maWcsIGRlZXBFcXVhbCwgRmlyZWJhc2VFcnJvciwgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuZXhwb3J0IHsgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IG9wZW5EQiB9IGZyb20gJ2lkYic7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB9XHJcbiAgICAvLyBJbiBpbml0aWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdpbGwgYmUgY2FsbGVkIGJ5IGluc3RhbGxhdGlvbnMgb25cclxuICAgIC8vIGF1dGggdG9rZW4gcmVmcmVzaCwgYW5kIGluc3RhbGxhdGlvbnMgd2lsbCBzZW5kIHRoaXMgc3RyaW5nLlxyXG4gICAgZ2V0UGxhdGZvcm1JbmZvU3RyaW5nKCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVycyA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVycygpO1xyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBwcm92aWRlcnMgYW5kIGdldCBsaWJyYXJ5L3ZlcnNpb24gcGFpcnMgZnJvbSBhbnkgdGhhdCBhcmVcclxuICAgICAgICAvLyB2ZXJzaW9uIGNvbXBvbmVudHMuXHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyc1xyXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHtcclxuICAgICAgICAgICAgaWYgKGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBgJHtzZXJ2aWNlLmxpYnJhcnl9LyR7c2VydmljZS52ZXJzaW9ufWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIobG9nU3RyaW5nID0+IGxvZ1N0cmluZylcclxuICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIHByb3ZpZGVyIGNoZWNrIGlmIHRoaXMgcHJvdmlkZXIgcHJvdmlkZXMgYSBWZXJzaW9uU2VydmljZVxyXG4gKlxyXG4gKiBOT1RFOiBVc2luZyBQcm92aWRlcjwnYXBwLXZlcnNpb24nPiBpcyBhIGhhY2sgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcHJvdmlkZXJcclxuICogcHJvdmlkZXMgVmVyc2lvblNlcnZpY2UuIFRoZSBwcm92aWRlciBpcyBub3QgbmVjZXNzYXJpbHkgYSAnYXBwLXZlcnNpb24nXHJcbiAqIHByb3ZpZGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSB7XHJcbiAgICBjb25zdCBjb21wb25lbnQgPSBwcm92aWRlci5nZXRDb21wb25lbnQoKTtcclxuICAgIHJldHVybiAoY29tcG9uZW50ID09PSBudWxsIHx8IGNvbXBvbmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29tcG9uZW50LnR5cGUpID09PSBcIlZFUlNJT05cIiAvKiBDb21wb25lbnRUeXBlLlZFUlNJT04gKi87XHJcbn1cblxuY29uc3QgbmFtZSRvID0gXCJAZmlyZWJhc2UvYXBwXCI7XG5jb25zdCB2ZXJzaW9uJDEgPSBcIjAuOS4yN1wiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYXBwJyk7XG5cbmNvbnN0IG5hbWUkbiA9IFwiQGZpcmViYXNlL2FwcC1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRtID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGwgPSBcIkBmaXJlYmFzZS9hbmFseXRpY3NcIjtcblxuY29uc3QgbmFtZSRrID0gXCJAZmlyZWJhc2UvYXBwLWNoZWNrLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGogPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2tcIjtcblxuY29uc3QgbmFtZSRpID0gXCJAZmlyZWJhc2UvYXV0aFwiO1xuXG5jb25zdCBuYW1lJGggPSBcIkBmaXJlYmFzZS9hdXRoLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGcgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZVwiO1xuXG5jb25zdCBuYW1lJGYgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRlID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zXCI7XG5cbmNvbnN0IG5hbWUkZCA9IFwiQGZpcmViYXNlL2Z1bmN0aW9ucy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRjID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9uc1wiO1xuXG5jb25zdCBuYW1lJGIgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGEgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmdcIjtcblxuY29uc3QgbmFtZSQ5ID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDggPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZVwiO1xuXG5jb25zdCBuYW1lJDcgPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ2ID0gXCJAZmlyZWJhc2UvcmVtb3RlLWNvbmZpZ1wiO1xuXG5jb25zdCBuYW1lJDUgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDQgPSBcIkBmaXJlYmFzZS9zdG9yYWdlXCI7XG5cbmNvbnN0IG5hbWUkMyA9IFwiQGZpcmViYXNlL3N0b3JhZ2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkMiA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5jb25zdCBuYW1lJDEgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmUtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUgPSBcImZpcmViYXNlXCI7XG5jb25zdCB2ZXJzaW9uID0gXCIxMC44LjBcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGFwcCBuYW1lXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XHJcbmNvbnN0IFBMQVRGT1JNX0xPR19TVFJJTkcgPSB7XHJcbiAgICBbbmFtZSRvXTogJ2ZpcmUtY29yZScsXHJcbiAgICBbbmFtZSRuXTogJ2ZpcmUtY29yZS1jb21wYXQnLFxyXG4gICAgW25hbWUkbF06ICdmaXJlLWFuYWx5dGljcycsXHJcbiAgICBbbmFtZSRtXTogJ2ZpcmUtYW5hbHl0aWNzLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRqXTogJ2ZpcmUtYXBwLWNoZWNrJyxcclxuICAgIFtuYW1lJGtdOiAnZmlyZS1hcHAtY2hlY2stY29tcGF0JyxcclxuICAgIFtuYW1lJGldOiAnZmlyZS1hdXRoJyxcclxuICAgIFtuYW1lJGhdOiAnZmlyZS1hdXRoLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRnXTogJ2ZpcmUtcnRkYicsXHJcbiAgICBbbmFtZSRmXTogJ2ZpcmUtcnRkYi1jb21wYXQnLFxyXG4gICAgW25hbWUkZV06ICdmaXJlLWZuJyxcclxuICAgIFtuYW1lJGRdOiAnZmlyZS1mbi1jb21wYXQnLFxyXG4gICAgW25hbWUkY106ICdmaXJlLWlpZCcsXHJcbiAgICBbbmFtZSRiXTogJ2ZpcmUtaWlkLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRhXTogJ2ZpcmUtZmNtJyxcclxuICAgIFtuYW1lJDldOiAnZmlyZS1mY20tY29tcGF0JyxcclxuICAgIFtuYW1lJDhdOiAnZmlyZS1wZXJmJyxcclxuICAgIFtuYW1lJDddOiAnZmlyZS1wZXJmLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ2XTogJ2ZpcmUtcmMnLFxyXG4gICAgW25hbWUkNV06ICdmaXJlLXJjLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ0XTogJ2ZpcmUtZ2NzJyxcclxuICAgIFtuYW1lJDNdOiAnZmlyZS1nY3MtY29tcGF0JyxcclxuICAgIFtuYW1lJDJdOiAnZmlyZS1mc3QnLFxyXG4gICAgW25hbWUkMV06ICdmaXJlLWZzdC1jb21wYXQnLFxyXG4gICAgJ2ZpcmUtanMnOiAnZmlyZS1qcycsXHJcbiAgICBbbmFtZV06ICdmaXJlLWpzLWFsbCdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgX2FwcHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBSZWdpc3RlcmVkIGNvbXBvbmVudHMuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuY29uc3QgX2NvbXBvbmVudHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCBiZWluZyBhZGRlZCB0byB0aGlzIGFwcCdzIGNvbnRhaW5lclxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXBwLmNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gZmFpbGVkIHRvIHJlZ2lzdGVyIHdpdGggRmlyZWJhc2VBcHAgJHthcHAubmFtZX1gLCBlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIGFwcC5jb250YWluZXIuYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoY29tcG9uZW50KTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNvbXBvbmVudCAtIHRoZSBjb21wb25lbnQgdG8gcmVnaXN0ZXJcclxuICogQHJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGNvbXBvbmVudCBpcyByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9yZWdpc3RlckNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQubmFtZTtcclxuICAgIGlmIChfY29tcG9uZW50cy5oYXMoY29tcG9uZW50TmFtZSkpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYFRoZXJlIHdlcmUgbXVsdGlwbGUgYXR0ZW1wdHMgdG8gcmVnaXN0ZXIgY29tcG9uZW50ICR7Y29tcG9uZW50TmFtZX0uYCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgX2NvbXBvbmVudHMuc2V0KGNvbXBvbmVudE5hbWUsIGNvbXBvbmVudCk7XHJcbiAgICAvLyBhZGQgdGhlIGNvbXBvbmVudCB0byBleGlzdGluZyBhcHAgaW5zdGFuY2VzXHJcbiAgICBmb3IgKGNvbnN0IGFwcCBvZiBfYXBwcy52YWx1ZXMoKSkge1xyXG4gICAgICAgIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBGaXJlYmFzZUFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gbmFtZSAtIHNlcnZpY2UgbmFtZVxyXG4gKlxyXG4gKiBAcmV0dXJucyB0aGUgcHJvdmlkZXIgZm9yIHRoZSBzZXJ2aWNlIHdpdGggdGhlIG1hdGNoaW5nIG5hbWVcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKSB7XHJcbiAgICBjb25zdCBoZWFydGJlYXRDb250cm9sbGVyID0gYXBwLmNvbnRhaW5lclxyXG4gICAgICAgIC5nZXRQcm92aWRlcignaGVhcnRiZWF0JylcclxuICAgICAgICAuZ2V0SW1tZWRpYXRlKHsgb3B0aW9uYWw6IHRydWUgfSk7XHJcbiAgICBpZiAoaGVhcnRiZWF0Q29udHJvbGxlcikge1xyXG4gICAgICAgIHZvaWQgaGVhcnRiZWF0Q29udHJvbGxlci50cmlnZ2VySGVhcnRiZWF0KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXBwLmNvbnRhaW5lci5nZXRQcm92aWRlcihuYW1lKTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXHJcbiAqIEBwYXJhbSBpbnN0YW5jZUlkZW50aWZpZXIgLSBzZXJ2aWNlIGluc3RhbmNlIGlkZW50aWZpZXIgaW4gY2FzZSB0aGUgc2VydmljZSBzdXBwb3J0cyBtdWx0aXBsZSBpbnN0YW5jZXNcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfcmVtb3ZlU2VydmljZUluc3RhbmNlKGFwcCwgbmFtZSwgaW5zdGFuY2VJZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKS5jbGVhckluc3RhbmNlKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbn1cclxuLyoqXHJcbiAqIFRlc3Qgb25seVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9jbGVhckNvbXBvbmVudHMoKSB7XHJcbiAgICBfY29tcG9uZW50cy5jbGVhcigpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEVSUk9SUyA9IHtcclxuICAgIFtcIm5vLWFwcFwiIC8qIEFwcEVycm9yLk5PX0FQUCAqL106IFwiTm8gRmlyZWJhc2UgQXBwICd7JGFwcE5hbWV9JyBoYXMgYmVlbiBjcmVhdGVkIC0gXCIgK1xyXG4gICAgICAgICdjYWxsIGluaXRpYWxpemVBcHAoKSBmaXJzdCcsXHJcbiAgICBbXCJiYWQtYXBwLW5hbWVcIiAvKiBBcHBFcnJvci5CQURfQVBQX05BTUUgKi9dOiBcIklsbGVnYWwgQXBwIG5hbWU6ICd7JGFwcE5hbWV9XCIsXHJcbiAgICBbXCJkdXBsaWNhdGUtYXBwXCIgLyogQXBwRXJyb3IuRFVQTElDQVRFX0FQUCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGV4aXN0cyB3aXRoIGRpZmZlcmVudCBvcHRpb25zIG9yIGNvbmZpZ1wiLFxyXG4gICAgW1wiYXBwLWRlbGV0ZWRcIiAvKiBBcHBFcnJvci5BUFBfREVMRVRFRCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGRlbGV0ZWRcIixcclxuICAgIFtcIm5vLW9wdGlvbnNcIiAvKiBBcHBFcnJvci5OT19PUFRJT05TICovXTogJ05lZWQgdG8gcHJvdmlkZSBvcHRpb25zLCB3aGVuIG5vdCBiZWluZyBkZXBsb3llZCB0byBob3N0aW5nIHZpYSBzb3VyY2UuJyxcclxuICAgIFtcImludmFsaWQtYXBwLWFyZ3VtZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9BUFBfQVJHVU1FTlQgKi9dOiAnZmlyZWJhc2UueyRhcHBOYW1lfSgpIHRha2VzIGVpdGhlciBubyBhcmd1bWVudCBvciBhICcgK1xyXG4gICAgICAgICdGaXJlYmFzZSBBcHAgaW5zdGFuY2UuJyxcclxuICAgIFtcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi9dOiAnRmlyc3QgYXJndW1lbnQgdG8gYG9uTG9nYCBtdXN0IGJlIG51bGwgb3IgYSBmdW5jdGlvbi4nLFxyXG4gICAgW1wiaWRiLW9wZW5cIiAvKiBBcHBFcnJvci5JREJfT1BFTiAqL106ICdFcnJvciB0aHJvd24gd2hlbiBvcGVuaW5nIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXHJcbiAgICBbXCJpZGItZ2V0XCIgLyogQXBwRXJyb3IuSURCX0dFVCAqL106ICdFcnJvciB0aHJvd24gd2hlbiByZWFkaW5nIGZyb20gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcclxuICAgIFtcImlkYi1zZXRcIiAvKiBBcHBFcnJvci5JREJfV1JJVEUgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gd3JpdGluZyB0byBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxyXG4gICAgW1wiaWRiLWRlbGV0ZVwiIC8qIEFwcEVycm9yLklEQl9ERUxFVEUgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gZGVsZXRpbmcgZnJvbSBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nXHJcbn07XHJcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhcHAnLCAnRmlyZWJhc2UnLCBFUlJPUlMpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBGaXJlYmFzZUFwcEltcGwge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5fY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnKTtcclxuICAgICAgICB0aGlzLl9uYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID1cclxuICAgICAgICAgICAgY29uZmlnLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2FwcCcsICgpID0+IHRoaXMsIFwiUFVCTElDXCIgLyogQ29tcG9uZW50VHlwZS5QVUJMSUMgKi8pKTtcclxuICAgIH1cclxuICAgIGdldCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ7XHJcbiAgICB9XHJcbiAgICBzZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKHZhbCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPSB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbmFtZSgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XHJcbiAgICB9XHJcbiAgICBnZXQgb3B0aW9ucygpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XHJcbiAgICB9XHJcbiAgICBnZXQgY29uZmlnKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbnRhaW5lcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgZ2V0IGlzRGVsZXRlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNEZWxldGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGlzRGVsZXRlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgZnVuY3Rpb24gd2lsbCB0aHJvdyBhbiBFcnJvciBpZiB0aGUgQXBwIGhhcyBhbHJlYWR5IGJlZW4gZGVsZXRlZCAtXHJcbiAgICAgKiB1c2UgYmVmb3JlIHBlcmZvcm1pbmcgQVBJIGFjdGlvbnMgb24gdGhlIEFwcC5cclxuICAgICAqL1xyXG4gICAgY2hlY2tEZXN0cm95ZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLWRlbGV0ZWRcIiAvKiBBcHBFcnJvci5BUFBfREVMRVRFRCAqLywgeyBhcHBOYW1lOiB0aGlzLl9uYW1lIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGN1cnJlbnQgU0RLIHZlcnNpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IFNES19WRVJTSU9OID0gdmVyc2lvbjtcclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUFwcChfb3B0aW9ucywgcmF3Q29uZmlnID0ge30pIHtcclxuICAgIGxldCBvcHRpb25zID0gX29wdGlvbnM7XHJcbiAgICBpZiAodHlwZW9mIHJhd0NvbmZpZyAhPT0gJ29iamVjdCcpIHtcclxuICAgICAgICBjb25zdCBuYW1lID0gcmF3Q29uZmlnO1xyXG4gICAgICAgIHJhd0NvbmZpZyA9IHsgbmFtZSB9O1xyXG4gICAgfVxyXG4gICAgY29uc3QgY29uZmlnID0gT2JqZWN0LmFzc2lnbih7IG5hbWU6IERFRkFVTFRfRU5UUllfTkFNRSwgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkOiBmYWxzZSB9LCByYXdDb25maWcpO1xyXG4gICAgY29uc3QgbmFtZSA9IGNvbmZpZy5uYW1lO1xyXG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJyB8fCAhbmFtZSkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYmFkLWFwcC1uYW1lXCIgLyogQXBwRXJyb3IuQkFEX0FQUF9OQU1FICovLCB7XHJcbiAgICAgICAgICAgIGFwcE5hbWU6IFN0cmluZyhuYW1lKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IGdldERlZmF1bHRBcHBDb25maWcoKSk7XHJcbiAgICBpZiAoIW9wdGlvbnMpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLW9wdGlvbnNcIiAvKiBBcHBFcnJvci5OT19PUFRJT05TICovKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGV4aXN0aW5nQXBwID0gX2FwcHMuZ2V0KG5hbWUpO1xyXG4gICAgaWYgKGV4aXN0aW5nQXBwKSB7XHJcbiAgICAgICAgLy8gcmV0dXJuIHRoZSBleGlzdGluZyBhcHAgaWYgb3B0aW9ucyBhbmQgY29uZmlnIGRlZXAgZXF1YWwgdGhlIG9uZXMgaW4gdGhlIGV4aXN0aW5nIGFwcC5cclxuICAgICAgICBpZiAoZGVlcEVxdWFsKG9wdGlvbnMsIGV4aXN0aW5nQXBwLm9wdGlvbnMpICYmXHJcbiAgICAgICAgICAgIGRlZXBFcXVhbChjb25maWcsIGV4aXN0aW5nQXBwLmNvbmZpZykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nQXBwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJkdXBsaWNhdGUtYXBwXCIgLyogQXBwRXJyb3IuRFVQTElDQVRFX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IG5ldyBDb21wb25lbnRDb250YWluZXIobmFtZSk7XHJcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBfY29tcG9uZW50cy52YWx1ZXMoKSkge1xyXG4gICAgICAgIGNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGNvbnN0IG5ld0FwcCA9IG5ldyBGaXJlYmFzZUFwcEltcGwob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpO1xyXG4gICAgX2FwcHMuc2V0KG5hbWUsIG5ld0FwcCk7XHJcbiAgICByZXR1cm4gbmV3QXBwO1xyXG59XHJcbi8qKlxyXG4gKiBSZXRyaWV2ZXMgYSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIFdoZW4gY2FsbGVkIHdpdGggbm8gYXJndW1lbnRzLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuIFdoZW4gYW4gYXBwIG5hbWVcclxuICogaXMgcHJvdmlkZWQsIHRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGF0IG5hbWUgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gaWYgdGhlIGFwcCBiZWluZyByZXRyaWV2ZWQgaGFzIG5vdCB5ZXQgYmVlblxyXG4gKiBpbml0aWFsaXplZC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBSZXR1cm4gdGhlIGRlZmF1bHQgYXBwXHJcbiAqIGNvbnN0IGFwcCA9IGdldEFwcCgpO1xyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBSZXR1cm4gYSBuYW1lZCBhcHBcclxuICogY29uc3Qgb3RoZXJBcHAgPSBnZXRBcHAoXCJvdGhlckFwcFwiKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBuYW1lIC0gT3B0aW9uYWwgbmFtZSBvZiB0aGUgYXBwIHRvIHJldHVybi4gSWYgbm8gbmFtZSBpc1xyXG4gKiAgIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBpcyBgXCJbREVGQVVMVF1cImAuXHJcbiAqXHJcbiAqIEByZXR1cm5zIFRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGUgcHJvdmlkZWQgYXBwIG5hbWUuXHJcbiAqICAgSWYgbm8gYXBwIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBkZWZhdWx0IGFwcCBpcyByZXR1cm5lZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXBwKG5hbWUgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgIGNvbnN0IGFwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmICghYXBwICYmIG5hbWUgPT09IERFRkFVTFRfRU5UUllfTkFNRSAmJiBnZXREZWZhdWx0QXBwQ29uZmlnKCkpIHtcclxuICAgICAgICByZXR1cm4gaW5pdGlhbGl6ZUFwcCgpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcHApIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwcFwiIC8qIEFwcEVycm9yLk5PX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFwcDtcclxufVxyXG4vKipcclxuICogQSAocmVhZC1vbmx5KSBhcnJheSBvZiBhbGwgaW5pdGlhbGl6ZWQgYXBwcy5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXBwcygpIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKF9hcHBzLnZhbHVlcygpKTtcclxufVxyXG4vKipcclxuICogUmVuZGVycyB0aGlzIGFwcCB1bnVzYWJsZSBhbmQgZnJlZXMgdGhlIHJlc291cmNlcyBvZiBhbGwgYXNzb2NpYXRlZFxyXG4gKiBzZXJ2aWNlcy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBkZWxldGVBcHAoYXBwKVxyXG4gKiAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgY29uc29sZS5sb2coXCJBcHAgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIik7XHJcbiAqICAgfSlcclxuICogICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcclxuICogICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgZGVsZXRpbmcgYXBwOlwiLCBlcnJvcik7XHJcbiAqICAgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVBcHAoYXBwKSB7XHJcbiAgICBjb25zdCBuYW1lID0gYXBwLm5hbWU7XHJcbiAgICBpZiAoX2FwcHMuaGFzKG5hbWUpKSB7XHJcbiAgICAgICAgX2FwcHMuZGVsZXRlKG5hbWUpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGFwcC5jb250YWluZXJcclxuICAgICAgICAgICAgLmdldFByb3ZpZGVycygpXHJcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4gcHJvdmlkZXIuZGVsZXRlKCkpKTtcclxuICAgICAgICBhcHAuaXNEZWxldGVkID0gdHJ1ZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUmVnaXN0ZXJzIGEgbGlicmFyeSdzIG5hbWUgYW5kIHZlcnNpb24gZm9yIHBsYXRmb3JtIGxvZ2dpbmcgcHVycG9zZXMuXHJcbiAqIEBwYXJhbSBsaWJyYXJ5IC0gTmFtZSBvZiAxcCBvciAzcCBsaWJyYXJ5IChlLmcuIGZpcmVzdG9yZSwgYW5ndWxhcmZpcmUpXHJcbiAqIEBwYXJhbSB2ZXJzaW9uIC0gQ3VycmVudCB2ZXJzaW9uIG9mIHRoYXQgbGlicmFyeS5cclxuICogQHBhcmFtIHZhcmlhbnQgLSBCdW5kbGUgdmFyaWFudCwgZS5nLiwgbm9kZSwgcm4sIGV0Yy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJWZXJzaW9uKGxpYnJhcnlLZXlPck5hbWUsIHZlcnNpb24sIHZhcmlhbnQpIHtcclxuICAgIHZhciBfYTtcclxuICAgIC8vIFRPRE86IFdlIGNhbiB1c2UgdGhpcyBjaGVjayB0byB3aGl0ZWxpc3Qgc3RyaW5ncyB3aGVuL2lmIHdlIHNldCB1cFxyXG4gICAgLy8gYSBnb29kIHdoaXRlbGlzdCBzeXN0ZW0uXHJcbiAgICBsZXQgbGlicmFyeSA9IChfYSA9IFBMQVRGT1JNX0xPR19TVFJJTkdbbGlicmFyeUtleU9yTmFtZV0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGxpYnJhcnlLZXlPck5hbWU7XHJcbiAgICBpZiAodmFyaWFudCkge1xyXG4gICAgICAgIGxpYnJhcnkgKz0gYC0ke3ZhcmlhbnR9YDtcclxuICAgIH1cclxuICAgIGNvbnN0IGxpYnJhcnlNaXNtYXRjaCA9IGxpYnJhcnkubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGNvbnN0IHZlcnNpb25NaXNtYXRjaCA9IHZlcnNpb24ubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggfHwgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgY29uc3Qgd2FybmluZyA9IFtcclxuICAgICAgICAgICAgYFVuYWJsZSB0byByZWdpc3RlciBsaWJyYXJ5IFwiJHtsaWJyYXJ5fVwiIHdpdGggdmVyc2lvbiBcIiR7dmVyc2lvbn1cIjpgXHJcbiAgICAgICAgXTtcclxuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaChgbGlicmFyeSBuYW1lIFwiJHtsaWJyYXJ5fVwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcIi9cIilgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCAmJiB2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKCdhbmQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYHZlcnNpb24gbmFtZSBcIiR7dmVyc2lvbn1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxvZ2dlci53YXJuKHdhcm5pbmcuam9pbignICcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChgJHtsaWJyYXJ5fS12ZXJzaW9uYCwgKCkgPT4gKHsgbGlicmFyeSwgdmVyc2lvbiB9KSwgXCJWRVJTSU9OXCIgLyogQ29tcG9uZW50VHlwZS5WRVJTSU9OICovKSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgbG9nIGhhbmRsZXIgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxyXG4gKiBAcGFyYW0gbG9nQ2FsbGJhY2sgLSBBbiBvcHRpb25hbCBjdXN0b20gbG9nIGhhbmRsZXIgdGhhdCBleGVjdXRlcyB1c2VyIGNvZGUgd2hlbmV2ZXJcclxuICogdGhlIEZpcmViYXNlIFNESyBtYWtlcyBhIGxvZ2dpbmcgY2FsbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gb25Mb2cobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGlmIChsb2dDYWxsYmFjayAhPT0gbnVsbCAmJiB0eXBlb2YgbG9nQ2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi8pO1xyXG4gICAgfVxyXG4gICAgc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIGxvZyBsZXZlbCBmb3IgYWxsIEZpcmViYXNlIFNES3MuXHJcbiAqXHJcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCBhcmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBpbmZvYCwgZXJyb3JzIGFyZSBsb2dnZWQsIGJ1dCBgZGVidWdgIGFuZFxyXG4gKiBgdmVyYm9zZWAgbG9ncyBhcmUgbm90KS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobG9nTGV2ZWwpIHtcclxuICAgIHNldExvZ0xldmVsJDEobG9nTGV2ZWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERCX05BTUUgPSAnZmlyZWJhc2UtaGVhcnRiZWF0LWRhdGFiYXNlJztcclxuY29uc3QgREJfVkVSU0lPTiA9IDE7XHJcbmNvbnN0IFNUT1JFX05BTUUgPSAnZmlyZWJhc2UtaGVhcnRiZWF0LXN0b3JlJztcclxubGV0IGRiUHJvbWlzZSA9IG51bGw7XHJcbmZ1bmN0aW9uIGdldERiUHJvbWlzZSgpIHtcclxuICAgIGlmICghZGJQcm9taXNlKSB7XHJcbiAgICAgICAgZGJQcm9taXNlID0gb3BlbkRCKERCX05BTUUsIERCX1ZFUlNJT04sIHtcclxuICAgICAgICAgICAgdXBncmFkZTogKGRiLCBvbGRWZXJzaW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCB1c2UgJ2JyZWFrJyBpbiB0aGlzIHN3aXRjaCBzdGF0ZW1lbnQsIHRoZSBmYWxsLXRocm91Z2hcclxuICAgICAgICAgICAgICAgIC8vIGJlaGF2aW9yIGlzIHdoYXQgd2Ugd2FudCwgYmVjYXVzZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgdmVyc2lvbnMgYmV0d2VlblxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIG9sZCB2ZXJzaW9uIGFuZCB0aGUgY3VycmVudCB2ZXJzaW9uLCB3ZSB3YW50IEFMTCB0aGUgbWlncmF0aW9uc1xyXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBjb3JyZXNwb25kIHRvIHRob3NlIHZlcnNpb25zIHRvIHJ1biwgbm90IG9ubHkgdGhlIGxhc3Qgb25lLlxyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlZmF1bHQtY2FzZVxyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChvbGRWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNhZmFyaS9pT1MgYnJvd3NlcnMgdGhyb3cgb2NjYXNpb25hbCBleGNlcHRpb25zIG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkYi5jcmVhdGVPYmplY3RTdG9yZSgpIHRoYXQgbWF5IGJlIGEgYnVnLiBBdm9pZCBibG9ja2luZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHJlc3Qgb2YgdGhlIGFwcCBmdW5jdGlvbmFsaXR5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItb3BlblwiIC8qIEFwcEVycm9yLklEQl9PUEVOICovLCB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yTWVzc2FnZTogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRiUHJvbWlzZTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiByZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIoYXBwKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICAgICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihTVE9SRV9OQU1FKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0eC5vYmplY3RTdG9yZShTVE9SRV9OQU1FKS5nZXQoY29tcHV0ZUtleShhcHApKTtcclxuICAgICAgICAvLyBXZSBhbHJlYWR5IGhhdmUgdGhlIHZhbHVlIGJ1dCB0eC5kb25lIGNhbiB0aHJvdyxcclxuICAgICAgICAvLyBzbyB3ZSBuZWVkIHRvIGF3YWl0IGl0IGhlcmUgdG8gY2F0Y2ggZXJyb3JzXHJcbiAgICAgICAgYXdhaXQgdHguZG9uZTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oZS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkYkdldEVycm9yID0gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItZ2V0XCIgLyogQXBwRXJyb3IuSURCX0dFVCAqLywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihpZGJHZXRFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gd3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIoYXBwLCBoZWFydGJlYXRPYmplY3QpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcclxuICAgICAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHR4Lm9iamVjdFN0b3JlKFNUT1JFX05BTUUpO1xyXG4gICAgICAgIGF3YWl0IG9iamVjdFN0b3JlLnB1dChoZWFydGJlYXRPYmplY3QsIGNvbXB1dGVLZXkoYXBwKSk7XHJcbiAgICAgICAgYXdhaXQgdHguZG9uZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGUubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpZGJHZXRFcnJvciA9IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaWRiLXNldFwiIC8qIEFwcEVycm9yLklEQl9XUklURSAqLywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihpZGJHZXRFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY29tcHV0ZUtleShhcHApIHtcclxuICAgIHJldHVybiBgJHthcHAubmFtZX0hJHthcHAub3B0aW9ucy5hcHBJZH1gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IE1BWF9IRUFERVJfQllURVMgPSAxMDI0O1xyXG4vLyAzMCBkYXlzXHJcbmNvbnN0IFNUT1JFRF9IRUFSVEJFQVRfUkVURU5USU9OX01BWF9NSUxMSVMgPSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XHJcbmNsYXNzIEhlYXJ0YmVhdFNlcnZpY2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEluLW1lbW9yeSBjYWNoZSBmb3IgaGVhcnRiZWF0cywgdXNlZCBieSBnZXRIZWFydGJlYXRzSGVhZGVyKCkgdG8gZ2VuZXJhdGVcclxuICAgICAgICAgKiB0aGUgaGVhZGVyIHN0cmluZy5cclxuICAgICAgICAgKiBTdG9yZXMgb25lIHJlY29yZCBwZXIgZGF0ZS4gVGhpcyB3aWxsIGJlIGNvbnNvbGlkYXRlZCBpbnRvIHRoZSBzdGFuZGFyZFxyXG4gICAgICAgICAqIGZvcm1hdCBvZiBvbmUgcmVjb3JkIHBlciB1c2VyIGFnZW50IHN0cmluZyBiZWZvcmUgYmVpbmcgc2VudCBhcyBhIGhlYWRlci5cclxuICAgICAgICAgKiBQb3B1bGF0ZWQgZnJvbSBpbmRleGVkREIgd2hlbiB0aGUgY29udHJvbGxlciBpcyBpbnN0YW50aWF0ZWQgYW5kIHNob3VsZFxyXG4gICAgICAgICAqIGJlIGtlcHQgaW4gc3luYyB3aXRoIGluZGV4ZWREQi5cclxuICAgICAgICAgKiBMZWF2ZSBwdWJsaWMgZm9yIGVhc2llciB0ZXN0aW5nLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9IG51bGw7XHJcbiAgICAgICAgY29uc3QgYXBwID0gdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX3N0b3JhZ2UgPSBuZXcgSGVhcnRiZWF0U3RvcmFnZUltcGwoYXBwKTtcclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlID0gdGhpcy5fc3RvcmFnZS5yZWFkKCkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENhbGxlZCB0byByZXBvcnQgYSBoZWFydGJlYXQuIFRoZSBmdW5jdGlvbiB3aWxsIGdlbmVyYXRlXHJcbiAgICAgKiBhIEhlYXJ0YmVhdHNCeVVzZXJBZ2VudCBvYmplY3QsIHVwZGF0ZSBoZWFydGJlYXRzQ2FjaGUsIGFuZCBwZXJzaXN0IGl0XHJcbiAgICAgKiB0byBJbmRleGVkREIuXHJcbiAgICAgKiBOb3RlIHRoYXQgd2Ugb25seSBzdG9yZSBvbmUgaGVhcnRiZWF0IHBlciBkYXkuIFNvIGlmIGEgaGVhcnRiZWF0IGZvciB0b2RheSBpc1xyXG4gICAgICogYWxyZWFkeSBsb2dnZWQsIHN1YnNlcXVlbnQgY2FsbHMgdG8gdGhpcyBmdW5jdGlvbiBpbiB0aGUgc2FtZSBkYXkgd2lsbCBiZSBpZ25vcmVkLlxyXG4gICAgICovXHJcbiAgICBhc3luYyB0cmlnZ2VySGVhcnRiZWF0KCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgY29uc3QgcGxhdGZvcm1Mb2dnZXIgPSB0aGlzLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXIoJ3BsYXRmb3JtLWxvZ2dlcicpXHJcbiAgICAgICAgICAgIC5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBcIkZpcmViYXNlIHVzZXIgYWdlbnRcIiBzdHJpbmcgZnJvbSB0aGUgcGxhdGZvcm0gbG9nZ2VyXHJcbiAgICAgICAgLy8gc2VydmljZSwgbm90IHRoZSBicm93c2VyIHVzZXIgYWdlbnQuXHJcbiAgICAgICAgY29uc3QgYWdlbnQgPSBwbGF0Zm9ybUxvZ2dlci5nZXRQbGF0Zm9ybUluZm9TdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBkYXRlID0gZ2V0VVRDRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIGlmICgoKF9hID0gdGhpcy5faGVhcnRiZWF0c0NhY2hlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaGVhcnRiZWF0cykgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgICAgICAvLyBJZiB3ZSBmYWlsZWQgdG8gY29uc3RydWN0IGEgaGVhcnRiZWF0cyBjYWNoZSwgdGhlbiByZXR1cm4gaW1tZWRpYXRlbHkuXHJcbiAgICAgICAgICAgIGlmICgoKF9iID0gdGhpcy5faGVhcnRiZWF0c0NhY2hlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaGVhcnRiZWF0cykgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERvIG5vdCBzdG9yZSBhIGhlYXJ0YmVhdCBpZiBvbmUgaXMgYWxyZWFkeSBzdG9yZWQgZm9yIHRoaXMgZGF5XHJcbiAgICAgICAgLy8gb3IgaWYgYSBoZWFkZXIgaGFzIGFscmVhZHkgYmVlbiBzZW50IHRvZGF5LlxyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUubGFzdFNlbnRIZWFydGJlYXREYXRlID09PSBkYXRlIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLnNvbWUoc2luZ2xlRGF0ZUhlYXJ0YmVhdCA9PiBzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGUgPT09IGRhdGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRoZXJlIGlzIG5vIGVudHJ5IGZvciB0aGlzIGRhdGUuIENyZWF0ZSBvbmUuXHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLnB1c2goeyBkYXRlLCBhZ2VudCB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUmVtb3ZlIGVudHJpZXMgb2xkZXIgdGhhbiAzMCBkYXlzLlxyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzID0gdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMuZmlsdGVyKHNpbmdsZURhdGVIZWFydGJlYXQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBoYlRpbWVzdGFtcCA9IG5ldyBEYXRlKHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSkudmFsdWVPZigpO1xyXG4gICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICByZXR1cm4gbm93IC0gaGJUaW1lc3RhbXAgPD0gU1RPUkVEX0hFQVJUQkVBVF9SRVRFTlRJT05fTUFYX01JTExJUztcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3RvcmFnZS5vdmVyd3JpdGUodGhpcy5faGVhcnRiZWF0c0NhY2hlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIGJhc2U2NCBlbmNvZGVkIHN0cmluZyB3aGljaCBjYW4gYmUgYXR0YWNoZWQgdG8gdGhlIGhlYXJ0YmVhdC1zcGVjaWZpYyBoZWFkZXIgZGlyZWN0bHkuXHJcbiAgICAgKiBJdCBhbHNvIGNsZWFycyBhbGwgaGVhcnRiZWF0cyBmcm9tIG1lbW9yeSBhcyB3ZWxsIGFzIGluIEluZGV4ZWREQi5cclxuICAgICAqXHJcbiAgICAgKiBOT1RFOiBDb25zdW1pbmcgcHJvZHVjdCBTREtzIHNob3VsZCBub3Qgc2VuZCB0aGUgaGVhZGVyIGlmIHRoaXMgbWV0aG9kXHJcbiAgICAgKiByZXR1cm5zIGFuIGVtcHR5IHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0SGVhcnRiZWF0c0hlYWRlcigpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiBpdCdzIHN0aWxsIG51bGwgb3IgdGhlIGFycmF5IGlzIGVtcHR5LCB0aGVyZSBpcyBubyBkYXRhIHRvIHNlbmQuXHJcbiAgICAgICAgaWYgKCgoX2EgPSB0aGlzLl9oZWFydGJlYXRzQ2FjaGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5oZWFydGJlYXRzKSA9PSBudWxsIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBnZXRVVENEYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgLy8gRXh0cmFjdCBhcyBtYW55IGhlYXJ0YmVhdHMgZnJvbSB0aGUgY2FjaGUgYXMgd2lsbCBmaXQgdW5kZXIgdGhlIHNpemUgbGltaXQuXHJcbiAgICAgICAgY29uc3QgeyBoZWFydGJlYXRzVG9TZW5kLCB1bnNlbnRFbnRyaWVzIH0gPSBleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlcih0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyU3RyaW5nID0gYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzVG9TZW5kIH0pKTtcclxuICAgICAgICAvLyBTdG9yZSBsYXN0IHNlbnQgZGF0ZSB0byBwcmV2ZW50IGFub3RoZXIgYmVpbmcgbG9nZ2VkL3NlbnQgZm9yIHRoZSBzYW1lIGRheS5cclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUubGFzdFNlbnRIZWFydGJlYXREYXRlID0gZGF0ZTtcclxuICAgICAgICBpZiAodW5zZW50RW50cmllcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN0b3JlIGFueSB1bnNlbnQgZW50cmllcyBpZiB0aGV5IGV4aXN0LlxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IHVuc2VudEVudHJpZXM7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgc2VlbXMgbW9yZSBsaWtlbHkgdGhhbiBlbXB0eWluZyB0aGUgYXJyYXkgKGJlbG93KSB0byBsZWFkIHRvIHNvbWUgb2RkIHN0YXRlXHJcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZSBjYWNoZSBpc24ndCBlbXB0eSBhbmQgdGhpcyB3aWxsIGJlIGNhbGxlZCBhZ2FpbiBvbiB0aGUgbmV4dCByZXF1ZXN0LFxyXG4gICAgICAgICAgICAvLyBhbmQgaXMgcHJvYmFibHkgc2FmZXN0IGlmIHdlIGF3YWl0IGl0LlxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMgPSBbXTtcclxuICAgICAgICAgICAgLy8gRG8gbm90IHdhaXQgZm9yIHRoaXMsIHRvIHJlZHVjZSBsYXRlbmN5LlxyXG4gICAgICAgICAgICB2b2lkIHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoZWFkZXJTdHJpbmc7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0VVRDRGF0ZVN0cmluZygpIHtcclxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICAgIC8vIFJldHVybnMgZGF0ZSBmb3JtYXQgJ1lZWVktTU0tREQnXHJcbiAgICByZXR1cm4gdG9kYXkudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwgMTApO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyKGhlYXJ0YmVhdHNDYWNoZSwgbWF4U2l6ZSA9IE1BWF9IRUFERVJfQllURVMpIHtcclxuICAgIC8vIEhlYXJ0YmVhdHMgZ3JvdXBlZCBieSB1c2VyIGFnZW50IGluIHRoZSBzdGFuZGFyZCBmb3JtYXQgdG8gYmUgc2VudCBpblxyXG4gICAgLy8gdGhlIGhlYWRlci5cclxuICAgIGNvbnN0IGhlYXJ0YmVhdHNUb1NlbmQgPSBbXTtcclxuICAgIC8vIFNpbmdsZSBkYXRlIGZvcm1hdCBoZWFydGJlYXRzIHRoYXQgYXJlIG5vdCBzZW50LlxyXG4gICAgbGV0IHVuc2VudEVudHJpZXMgPSBoZWFydGJlYXRzQ2FjaGUuc2xpY2UoKTtcclxuICAgIGZvciAoY29uc3Qgc2luZ2xlRGF0ZUhlYXJ0YmVhdCBvZiBoZWFydGJlYXRzQ2FjaGUpIHtcclxuICAgICAgICAvLyBMb29rIGZvciBhbiBleGlzdGluZyBlbnRyeSB3aXRoIHRoZSBzYW1lIHVzZXIgYWdlbnQuXHJcbiAgICAgICAgY29uc3QgaGVhcnRiZWF0RW50cnkgPSBoZWFydGJlYXRzVG9TZW5kLmZpbmQoaGIgPT4gaGIuYWdlbnQgPT09IHNpbmdsZURhdGVIZWFydGJlYXQuYWdlbnQpO1xyXG4gICAgICAgIGlmICghaGVhcnRiZWF0RW50cnkpIHtcclxuICAgICAgICAgICAgLy8gSWYgbm8gZW50cnkgZm9yIHRoaXMgdXNlciBhZ2VudCBleGlzdHMsIGNyZWF0ZSBvbmUuXHJcbiAgICAgICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBhZ2VudDogc2luZ2xlRGF0ZUhlYXJ0YmVhdC5hZ2VudCxcclxuICAgICAgICAgICAgICAgIGRhdGVzOiBbc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGNvdW50Qnl0ZXMoaGVhcnRiZWF0c1RvU2VuZCkgPiBtYXhTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgaGVhZGVyIHdvdWxkIGV4Y2VlZCBtYXggc2l6ZSwgcmVtb3ZlIHRoZSBhZGRlZCBoZWFydGJlYXRcclxuICAgICAgICAgICAgICAgIC8vIGVudHJ5IGFuZCBzdG9wIGFkZGluZyB0byB0aGUgaGVhZGVyLlxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0c1RvU2VuZC5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBoZWFydGJlYXRFbnRyeS5kYXRlcy5wdXNoKHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSk7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBoZWFkZXIgd291bGQgZXhjZWVkIG1heCBzaXplLCByZW1vdmUgdGhlIGFkZGVkIGRhdGVcclxuICAgICAgICAgICAgLy8gYW5kIHN0b3AgYWRkaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICAgICAgICAgIGlmIChjb3VudEJ5dGVzKGhlYXJ0YmVhdHNUb1NlbmQpID4gbWF4U2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0RW50cnkuZGF0ZXMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQb3AgdW5zZW50IGVudHJ5IGZyb20gcXVldWUuIChTa2lwcGVkIGlmIGFkZGluZyB0aGUgZW50cnkgZXhjZWVkZWRcclxuICAgICAgICAvLyBxdW90YSBhbmQgdGhlIGxvb3AgYnJlYWtzIGVhcmx5LilcclxuICAgICAgICB1bnNlbnRFbnRyaWVzID0gdW5zZW50RW50cmllcy5zbGljZSgxKTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhcnRiZWF0c1RvU2VuZCxcclxuICAgICAgICB1bnNlbnRFbnRyaWVzXHJcbiAgICB9O1xyXG59XHJcbmNsYXNzIEhlYXJ0YmVhdFN0b3JhZ2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2UgPSB0aGlzLnJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2soKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2soKSB7XHJcbiAgICAgICAgaWYgKCFpc0luZGV4ZWREQkF2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKClcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRydWUpXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4gZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmVhZCBhbGwgaGVhcnRiZWF0cy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmVhZCgpIHtcclxuICAgICAgICBjb25zdCBjYW5Vc2VJbmRleGVkREIgPSBhd2FpdCB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlO1xyXG4gICAgICAgIGlmICghY2FuVXNlSW5kZXhlZERCKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGhlYXJ0YmVhdHM6IFtdIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpZGJIZWFydGJlYXRPYmplY3QgPSBhd2FpdCByZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIodGhpcy5hcHApO1xyXG4gICAgICAgICAgICBpZiAoaWRiSGVhcnRiZWF0T2JqZWN0ID09PSBudWxsIHx8IGlkYkhlYXJ0YmVhdE9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogaWRiSGVhcnRiZWF0T2JqZWN0LmhlYXJ0YmVhdHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpZGJIZWFydGJlYXRPYmplY3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBoZWFydGJlYXRzOiBbXSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gb3ZlcndyaXRlIHRoZSBzdG9yYWdlIHdpdGggdGhlIHByb3ZpZGVkIGhlYXJ0YmVhdHNcclxuICAgIGFzeW5jIG92ZXJ3cml0ZShoZWFydGJlYXRzT2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0ID0gYXdhaXQgdGhpcy5yZWFkKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQih0aGlzLmFwcCwge1xyXG4gICAgICAgICAgICAgICAgbGFzdFNlbnRIZWFydGJlYXREYXRlOiAoX2EgPSBoZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSxcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBhZGQgaGVhcnRiZWF0c1xyXG4gICAgYXN5bmMgYWRkKGhlYXJ0YmVhdHNPYmplY3QpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcclxuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QgPSBhd2FpdCB0aGlzLnJlYWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKHRoaXMuYXBwLCB7XHJcbiAgICAgICAgICAgICAgICBsYXN0U2VudEhlYXJ0YmVhdERhdGU6IChfYSA9IGhlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlLFxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0czogW1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nSGVhcnRiZWF0c09iamVjdC5oZWFydGJlYXRzLFxyXG4gICAgICAgICAgICAgICAgICAgIC4uLmhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBieXRlcyBvZiBhIEhlYXJ0YmVhdHNCeVVzZXJBZ2VudCBhcnJheSBhZnRlciBiZWluZyB3cmFwcGVkXHJcbiAqIGluIGEgcGxhdGZvcm0gbG9nZ2luZyBoZWFkZXIgSlNPTiBvYmplY3QsIHN0cmluZ2lmaWVkLCBhbmQgY29udmVydGVkXHJcbiAqIHRvIGJhc2UgNjQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb3VudEJ5dGVzKGhlYXJ0YmVhdHNDYWNoZSkge1xyXG4gICAgLy8gYmFzZTY0IGhhcyBhIHJlc3RyaWN0ZWQgc2V0IG9mIGNoYXJhY3RlcnMsIGFsbCBvZiB3aGljaCBzaG91bGQgYmUgMSBieXRlLlxyXG4gICAgcmV0dXJuIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKFxyXG4gICAgLy8gaGVhcnRiZWF0c0NhY2hlIHdyYXBwZXIgcHJvcGVydGllc1xyXG4gICAgSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzQ2FjaGUgfSkpLmxlbmd0aDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckNvcmVDb21wb25lbnRzKHZhcmlhbnQpIHtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdwbGF0Zm9ybS1sb2dnZXInLCBjb250YWluZXIgPT4gbmV3IFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwoY29udGFpbmVyKSwgXCJQUklWQVRFXCIgLyogQ29tcG9uZW50VHlwZS5QUklWQVRFICovKSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgnaGVhcnRiZWF0JywgY29udGFpbmVyID0+IG5ldyBIZWFydGJlYXRTZXJ2aWNlSW1wbChjb250YWluZXIpLCBcIlBSSVZBVEVcIiAvKiBDb21wb25lbnRUeXBlLlBSSVZBVEUgKi8pKTtcclxuICAgIC8vIFJlZ2lzdGVyIGBhcHBgIHBhY2thZ2UuXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRvLCB2ZXJzaW9uJDEsIHZhcmlhbnQpO1xyXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJG8sIHZlcnNpb24kMSwgJ2VzbTIwMTcnKTtcclxuICAgIC8vIFJlZ2lzdGVyIHBsYXRmb3JtIFNESyBpZGVudGlmaWVyIChubyB2ZXJzaW9uKS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbignZmlyZS1qcycsICcnKTtcclxufVxuXG4vKipcclxuICogRmlyZWJhc2UgQXBwXHJcbiAqXHJcbiAqIEByZW1hcmtzIFRoaXMgcGFja2FnZSBjb29yZGluYXRlcyB0aGUgY29tbXVuaWNhdGlvbiBiZXR3ZWVuIHRoZSBkaWZmZXJlbnQgRmlyZWJhc2UgY29tcG9uZW50c1xyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbnJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoJycpO1xuXG5leHBvcnQgeyBTREtfVkVSU0lPTiwgREVGQVVMVF9FTlRSWV9OQU1FIGFzIF9ERUZBVUxUX0VOVFJZX05BTUUsIF9hZGRDb21wb25lbnQsIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCwgX2FwcHMsIF9jbGVhckNvbXBvbmVudHMsIF9jb21wb25lbnRzLCBfZ2V0UHJvdmlkZXIsIF9yZWdpc3RlckNvbXBvbmVudCwgX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSwgZGVsZXRlQXBwLCBnZXRBcHAsIGdldEFwcHMsIGluaXRpYWxpemVBcHAsIG9uTG9nLCByZWdpc3RlclZlcnNpb24sIHNldExvZ0xldmVsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgcmVnaXN0ZXJWZXJzaW9uIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5leHBvcnQgKiBmcm9tICdAZmlyZWJhc2UvYXBwJztcblxudmFyIG5hbWUgPSBcImZpcmViYXNlXCI7XG52YXIgdmVyc2lvbiA9IFwiMTAuOC4wXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnYXBwJyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJpbXBvcnQgeyBfZ2V0UHJvdmlkZXIsIGdldEFwcCwgX3JlZ2lzdGVyQ29tcG9uZW50LCByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgb3BlbkRCIH0gZnJvbSAnaWRiJztcblxuY29uc3QgbmFtZSA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnNcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjAuNi41XCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFBFTkRJTkdfVElNRU9VVF9NUyA9IDEwMDAwO1xyXG5jb25zdCBQQUNLQUdFX1ZFUlNJT04gPSBgdzoke3ZlcnNpb259YDtcclxuY29uc3QgSU5URVJOQUxfQVVUSF9WRVJTSU9OID0gJ0ZJU192Mic7XHJcbmNvbnN0IElOU1RBTExBVElPTlNfQVBJX1VSTCA9ICdodHRwczovL2ZpcmViYXNlaW5zdGFsbGF0aW9ucy5nb29nbGVhcGlzLmNvbS92MSc7XHJcbmNvbnN0IFRPS0VOX0VYUElSQVRJT05fQlVGRkVSID0gNjAgKiA2MCAqIDEwMDA7IC8vIE9uZSBob3VyXHJcbmNvbnN0IFNFUlZJQ0UgPSAnaW5zdGFsbGF0aW9ucyc7XHJcbmNvbnN0IFNFUlZJQ0VfTkFNRSA9ICdJbnN0YWxsYXRpb25zJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgRVJST1JfREVTQ1JJUFRJT05fTUFQID0ge1xyXG4gICAgW1wibWlzc2luZy1hcHAtY29uZmlnLXZhbHVlc1wiIC8qIEVycm9yQ29kZS5NSVNTSU5HX0FQUF9DT05GSUdfVkFMVUVTICovXTogJ01pc3NpbmcgQXBwIGNvbmZpZ3VyYXRpb24gdmFsdWU6IFwieyR2YWx1ZU5hbWV9XCInLFxyXG4gICAgW1wibm90LXJlZ2lzdGVyZWRcIiAvKiBFcnJvckNvZGUuTk9UX1JFR0lTVEVSRUQgKi9dOiAnRmlyZWJhc2UgSW5zdGFsbGF0aW9uIGlzIG5vdCByZWdpc3RlcmVkLicsXHJcbiAgICBbXCJpbnN0YWxsYXRpb24tbm90LWZvdW5kXCIgLyogRXJyb3JDb2RlLklOU1RBTExBVElPTl9OT1RfRk9VTkQgKi9dOiAnRmlyZWJhc2UgSW5zdGFsbGF0aW9uIG5vdCBmb3VuZC4nLFxyXG4gICAgW1wicmVxdWVzdC1mYWlsZWRcIiAvKiBFcnJvckNvZGUuUkVRVUVTVF9GQUlMRUQgKi9dOiAneyRyZXF1ZXN0TmFtZX0gcmVxdWVzdCBmYWlsZWQgd2l0aCBlcnJvciBcInskc2VydmVyQ29kZX0geyRzZXJ2ZXJTdGF0dXN9OiB7JHNlcnZlck1lc3NhZ2V9XCInLFxyXG4gICAgW1wiYXBwLW9mZmxpbmVcIiAvKiBFcnJvckNvZGUuQVBQX09GRkxJTkUgKi9dOiAnQ291bGQgbm90IHByb2Nlc3MgcmVxdWVzdC4gQXBwbGljYXRpb24gb2ZmbGluZS4nLFxyXG4gICAgW1wiZGVsZXRlLXBlbmRpbmctcmVnaXN0cmF0aW9uXCIgLyogRXJyb3JDb2RlLkRFTEVURV9QRU5ESU5HX1JFR0lTVFJBVElPTiAqL106IFwiQ2FuJ3QgZGVsZXRlIGluc3RhbGxhdGlvbiB3aGlsZSB0aGVyZSBpcyBhIHBlbmRpbmcgcmVnaXN0cmF0aW9uIHJlcXVlc3QuXCJcclxufTtcclxuY29uc3QgRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3RvcnkoU0VSVklDRSwgU0VSVklDRV9OQU1FLCBFUlJPUl9ERVNDUklQVElPTl9NQVApO1xyXG4vKiogUmV0dXJucyB0cnVlIGlmIGVycm9yIGlzIGEgRmlyZWJhc2VFcnJvciB0aGF0IGlzIGJhc2VkIG9uIGFuIGVycm9yIGZyb20gdGhlIHNlcnZlci4gKi9cclxuZnVuY3Rpb24gaXNTZXJ2ZXJFcnJvcihlcnJvcikge1xyXG4gICAgcmV0dXJuIChlcnJvciBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IgJiZcclxuICAgICAgICBlcnJvci5jb2RlLmluY2x1ZGVzKFwicmVxdWVzdC1mYWlsZWRcIiAvKiBFcnJvckNvZGUuUkVRVUVTVF9GQUlMRUQgKi8pKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQoeyBwcm9qZWN0SWQgfSkge1xyXG4gICAgcmV0dXJuIGAke0lOU1RBTExBVElPTlNfQVBJX1VSTH0vcHJvamVjdHMvJHtwcm9qZWN0SWR9L2luc3RhbGxhdGlvbnNgO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RBdXRoVG9rZW5JbmZvRnJvbVJlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRva2VuOiByZXNwb25zZS50b2tlbixcclxuICAgICAgICByZXF1ZXN0U3RhdHVzOiAyIC8qIFJlcXVlc3RTdGF0dXMuQ09NUExFVEVEICovLFxyXG4gICAgICAgIGV4cGlyZXNJbjogZ2V0RXhwaXJlc0luRnJvbVJlc3BvbnNlRXhwaXJlc0luKHJlc3BvbnNlLmV4cGlyZXNJbiksXHJcbiAgICAgICAgY3JlYXRpb25UaW1lOiBEYXRlLm5vdygpXHJcbiAgICB9O1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGdldEVycm9yRnJvbVJlc3BvbnNlKHJlcXVlc3ROYW1lLCByZXNwb25zZSkge1xyXG4gICAgY29uc3QgcmVzcG9uc2VKc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgY29uc3QgZXJyb3JEYXRhID0gcmVzcG9uc2VKc29uLmVycm9yO1xyXG4gICAgcmV0dXJuIEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwicmVxdWVzdC1mYWlsZWRcIiAvKiBFcnJvckNvZGUuUkVRVUVTVF9GQUlMRUQgKi8sIHtcclxuICAgICAgICByZXF1ZXN0TmFtZSxcclxuICAgICAgICBzZXJ2ZXJDb2RlOiBlcnJvckRhdGEuY29kZSxcclxuICAgICAgICBzZXJ2ZXJNZXNzYWdlOiBlcnJvckRhdGEubWVzc2FnZSxcclxuICAgICAgICBzZXJ2ZXJTdGF0dXM6IGVycm9yRGF0YS5zdGF0dXNcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEhlYWRlcnMoeyBhcGlLZXkgfSkge1xyXG4gICAgcmV0dXJuIG5ldyBIZWFkZXJzKHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICd4LWdvb2ctYXBpLWtleSc6IGFwaUtleVxyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0SGVhZGVyc1dpdGhBdXRoKGFwcENvbmZpZywgeyByZWZyZXNoVG9rZW4gfSkge1xyXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnMoYXBwQ29uZmlnKTtcclxuICAgIGhlYWRlcnMuYXBwZW5kKCdBdXRob3JpemF0aW9uJywgZ2V0QXV0aG9yaXphdGlvbkhlYWRlcihyZWZyZXNoVG9rZW4pKTtcclxuICAgIHJldHVybiBoZWFkZXJzO1xyXG59XHJcbi8qKlxyXG4gKiBDYWxscyB0aGUgcGFzc2VkIGluIGZldGNoIHdyYXBwZXIgYW5kIHJldHVybnMgdGhlIHJlc3BvbnNlLlxyXG4gKiBJZiB0aGUgcmV0dXJuZWQgcmVzcG9uc2UgaGFzIGEgc3RhdHVzIG9mIDV4eCwgcmUtcnVucyB0aGUgZnVuY3Rpb24gb25jZSBhbmRcclxuICogcmV0dXJucyB0aGUgcmVzcG9uc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZXRyeUlmU2VydmVyRXJyb3IoZm4pIHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuKCk7XHJcbiAgICBpZiAocmVzdWx0LnN0YXR1cyA+PSA1MDAgJiYgcmVzdWx0LnN0YXR1cyA8IDYwMCkge1xyXG4gICAgICAgIC8vIEludGVybmFsIFNlcnZlciBFcnJvci4gUmV0cnkgcmVxdWVzdC5cclxuICAgICAgICByZXR1cm4gZm4oKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuZnVuY3Rpb24gZ2V0RXhwaXJlc0luRnJvbVJlc3BvbnNlRXhwaXJlc0luKHJlc3BvbnNlRXhwaXJlc0luKSB7XHJcbiAgICAvLyBUaGlzIHdvcmtzIGJlY2F1c2UgdGhlIHNlcnZlciB3aWxsIG5ldmVyIHJlc3BvbmQgd2l0aCBmcmFjdGlvbnMgb2YgYSBzZWNvbmQuXHJcbiAgICByZXR1cm4gTnVtYmVyKHJlc3BvbnNlRXhwaXJlc0luLnJlcGxhY2UoJ3MnLCAnMDAwJykpO1xyXG59XHJcbmZ1bmN0aW9uIGdldEF1dGhvcml6YXRpb25IZWFkZXIocmVmcmVzaFRva2VuKSB7XHJcbiAgICByZXR1cm4gYCR7SU5URVJOQUxfQVVUSF9WRVJTSU9OfSAke3JlZnJlc2hUb2tlbn1gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUluc3RhbGxhdGlvblJlcXVlc3QoeyBhcHBDb25maWcsIGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciB9LCB7IGZpZCB9KSB7XHJcbiAgICBjb25zdCBlbmRwb2ludCA9IGdldEluc3RhbGxhdGlvbnNFbmRwb2ludChhcHBDb25maWcpO1xyXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnMoYXBwQ29uZmlnKTtcclxuICAgIC8vIElmIGhlYXJ0YmVhdCBzZXJ2aWNlIGV4aXN0cywgYWRkIHRoZSBoZWFydGJlYXQgc3RyaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICBjb25zdCBoZWFydGJlYXRTZXJ2aWNlID0gaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyLmdldEltbWVkaWF0ZSh7XHJcbiAgICAgICAgb3B0aW9uYWw6IHRydWVcclxuICAgIH0pO1xyXG4gICAgaWYgKGhlYXJ0YmVhdFNlcnZpY2UpIHtcclxuICAgICAgICBjb25zdCBoZWFydGJlYXRzSGVhZGVyID0gYXdhaXQgaGVhcnRiZWF0U2VydmljZS5nZXRIZWFydGJlYXRzSGVhZGVyKCk7XHJcbiAgICAgICAgaWYgKGhlYXJ0YmVhdHNIZWFkZXIpIHtcclxuICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoJ3gtZmlyZWJhc2UtY2xpZW50JywgaGVhcnRiZWF0c0hlYWRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICBmaWQsXHJcbiAgICAgICAgYXV0aFZlcnNpb246IElOVEVSTkFMX0FVVEhfVkVSU0lPTixcclxuICAgICAgICBhcHBJZDogYXBwQ29uZmlnLmFwcElkLFxyXG4gICAgICAgIHNka1ZlcnNpb246IFBBQ0tBR0VfVkVSU0lPTlxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlJZlNlcnZlckVycm9yKCgpID0+IGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KSk7XHJcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCByZXNwb25zZVZhbHVlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIGNvbnN0IHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSA9IHtcclxuICAgICAgICAgICAgZmlkOiByZXNwb25zZVZhbHVlLmZpZCB8fCBmaWQsXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogMiAvKiBSZXF1ZXN0U3RhdHVzLkNPTVBMRVRFRCAqLyxcclxuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiByZXNwb25zZVZhbHVlLnJlZnJlc2hUb2tlbixcclxuICAgICAgICAgICAgYXV0aFRva2VuOiBleHRyYWN0QXV0aFRva2VuSW5mb0Zyb21SZXNwb25zZShyZXNwb25zZVZhbHVlLmF1dGhUb2tlbilcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aHJvdyBhd2FpdCBnZXRFcnJvckZyb21SZXNwb25zZSgnQ3JlYXRlIEluc3RhbGxhdGlvbicsIHJlc3BvbnNlKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKiogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciBnaXZlbiB0aW1lIHBhc3Nlcy4gKi9cclxuZnVuY3Rpb24gc2xlZXAobXMpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGJ1ZmZlclRvQmFzZTY0VXJsU2FmZShhcnJheSkge1xyXG4gICAgY29uc3QgYjY0ID0gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLmFycmF5KSk7XHJcbiAgICByZXR1cm4gYjY0LnJlcGxhY2UoL1xcKy9nLCAnLScpLnJlcGxhY2UoL1xcLy9nLCAnXycpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFZBTElEX0ZJRF9QQVRURVJOID0gL15bY2RlZl1bXFx3LV17MjF9JC87XHJcbmNvbnN0IElOVkFMSURfRklEID0gJyc7XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBuZXcgRklEIHVzaW5nIHJhbmRvbSB2YWx1ZXMgZnJvbSBXZWIgQ3J5cHRvIEFQSS5cclxuICogUmV0dXJucyBhbiBlbXB0eSBzdHJpbmcgaWYgRklEIGdlbmVyYXRpb24gZmFpbHMgZm9yIGFueSByZWFzb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBnZW5lcmF0ZUZpZCgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gQSB2YWxpZCBGSUQgaGFzIGV4YWN0bHkgMjIgYmFzZTY0IGNoYXJhY3RlcnMsIHdoaWNoIGlzIDEzMiBiaXRzLCBvciAxNi41XHJcbiAgICAgICAgLy8gYnl0ZXMuIG91ciBpbXBsZW1lbnRhdGlvbiBnZW5lcmF0ZXMgYSAxNyBieXRlIGFycmF5IGluc3RlYWQuXHJcbiAgICAgICAgY29uc3QgZmlkQnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoMTcpO1xyXG4gICAgICAgIGNvbnN0IGNyeXB0byA9IHNlbGYuY3J5cHRvIHx8IHNlbGYubXNDcnlwdG87XHJcbiAgICAgICAgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhmaWRCeXRlQXJyYXkpO1xyXG4gICAgICAgIC8vIFJlcGxhY2UgdGhlIGZpcnN0IDQgcmFuZG9tIGJpdHMgd2l0aCB0aGUgY29uc3RhbnQgRklEIGhlYWRlciBvZiAwYjAxMTEuXHJcbiAgICAgICAgZmlkQnl0ZUFycmF5WzBdID0gMGIwMTExMDAwMCArIChmaWRCeXRlQXJyYXlbMF0gJSAwYjAwMDEwMDAwKTtcclxuICAgICAgICBjb25zdCBmaWQgPSBlbmNvZGUoZmlkQnl0ZUFycmF5KTtcclxuICAgICAgICByZXR1cm4gVkFMSURfRklEX1BBVFRFUk4udGVzdChmaWQpID8gZmlkIDogSU5WQUxJRF9GSUQ7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAvLyBGSUQgZ2VuZXJhdGlvbiBlcnJvcmVkXHJcbiAgICAgICAgcmV0dXJuIElOVkFMSURfRklEO1xyXG4gICAgfVxyXG59XHJcbi8qKiBDb252ZXJ0cyBhIEZJRCBVaW50OEFycmF5IHRvIGEgYmFzZTY0IHN0cmluZyByZXByZXNlbnRhdGlvbi4gKi9cclxuZnVuY3Rpb24gZW5jb2RlKGZpZEJ5dGVBcnJheSkge1xyXG4gICAgY29uc3QgYjY0U3RyaW5nID0gYnVmZmVyVG9CYXNlNjRVcmxTYWZlKGZpZEJ5dGVBcnJheSk7XHJcbiAgICAvLyBSZW1vdmUgdGhlIDIzcmQgY2hhcmFjdGVyIHRoYXQgd2FzIGFkZGVkIGJlY2F1c2Ugb2YgdGhlIGV4dHJhIDQgYml0cyBhdCB0aGVcclxuICAgIC8vIGVuZCBvZiBvdXIgMTcgYnl0ZSBhcnJheSwgYW5kIHRoZSAnPScgcGFkZGluZy5cclxuICAgIHJldHVybiBiNjRTdHJpbmcuc3Vic3RyKDAsIDIyKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKiogUmV0dXJucyBhIHN0cmluZyBrZXkgdGhhdCBjYW4gYmUgdXNlZCB0byBpZGVudGlmeSB0aGUgYXBwLiAqL1xyXG5mdW5jdGlvbiBnZXRLZXkoYXBwQ29uZmlnKSB7XHJcbiAgICByZXR1cm4gYCR7YXBwQ29uZmlnLmFwcE5hbWV9ISR7YXBwQ29uZmlnLmFwcElkfWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgZmlkQ2hhbmdlQ2FsbGJhY2tzID0gbmV3IE1hcCgpO1xyXG4vKipcclxuICogQ2FsbHMgdGhlIG9uSWRDaGFuZ2UgY2FsbGJhY2tzIHdpdGggdGhlIG5ldyBGSUQgdmFsdWUsIGFuZCBicm9hZGNhc3RzIHRoZVxyXG4gKiBjaGFuZ2UgdG8gb3RoZXIgdGFicy5cclxuICovXHJcbmZ1bmN0aW9uIGZpZENoYW5nZWQoYXBwQ29uZmlnLCBmaWQpIHtcclxuICAgIGNvbnN0IGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgY2FsbEZpZENoYW5nZUNhbGxiYWNrcyhrZXksIGZpZCk7XHJcbiAgICBicm9hZGNhc3RGaWRDaGFuZ2Uoa2V5LCBmaWQpO1xyXG59XHJcbmZ1bmN0aW9uIGFkZENhbGxiYWNrKGFwcENvbmZpZywgY2FsbGJhY2spIHtcclxuICAgIC8vIE9wZW4gdGhlIGJyb2FkY2FzdCBjaGFubmVsIGlmIGl0J3Mgbm90IGFscmVhZHkgb3BlbixcclxuICAgIC8vIHRvIGJlIGFibGUgdG8gbGlzdGVuIHRvIGNoYW5nZSBldmVudHMgZnJvbSBvdGhlciB0YWJzLlxyXG4gICAgZ2V0QnJvYWRjYXN0Q2hhbm5lbCgpO1xyXG4gICAgY29uc3Qga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICBsZXQgY2FsbGJhY2tTZXQgPSBmaWRDaGFuZ2VDYWxsYmFja3MuZ2V0KGtleSk7XHJcbiAgICBpZiAoIWNhbGxiYWNrU2V0KSB7XHJcbiAgICAgICAgY2FsbGJhY2tTZXQgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgZmlkQ2hhbmdlQ2FsbGJhY2tzLnNldChrZXksIGNhbGxiYWNrU2V0KTtcclxuICAgIH1cclxuICAgIGNhbGxiYWNrU2V0LmFkZChjYWxsYmFjayk7XHJcbn1cclxuZnVuY3Rpb24gcmVtb3ZlQ2FsbGJhY2soYXBwQ29uZmlnLCBjYWxsYmFjaykge1xyXG4gICAgY29uc3Qga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICBjb25zdCBjYWxsYmFja1NldCA9IGZpZENoYW5nZUNhbGxiYWNrcy5nZXQoa2V5KTtcclxuICAgIGlmICghY2FsbGJhY2tTZXQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjYWxsYmFja1NldC5kZWxldGUoY2FsbGJhY2spO1xyXG4gICAgaWYgKGNhbGxiYWNrU2V0LnNpemUgPT09IDApIHtcclxuICAgICAgICBmaWRDaGFuZ2VDYWxsYmFja3MuZGVsZXRlKGtleSk7XHJcbiAgICB9XHJcbiAgICAvLyBDbG9zZSBicm9hZGNhc3QgY2hhbm5lbCBpZiB0aGVyZSBhcmUgbm8gbW9yZSBjYWxsYmFja3MuXHJcbiAgICBjbG9zZUJyb2FkY2FzdENoYW5uZWwoKTtcclxufVxyXG5mdW5jdGlvbiBjYWxsRmlkQ2hhbmdlQ2FsbGJhY2tzKGtleSwgZmlkKSB7XHJcbiAgICBjb25zdCBjYWxsYmFja3MgPSBmaWRDaGFuZ2VDYWxsYmFja3MuZ2V0KGtleSk7XHJcbiAgICBpZiAoIWNhbGxiYWNrcykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgY2FsbGJhY2soZmlkKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBicm9hZGNhc3RGaWRDaGFuZ2Uoa2V5LCBmaWQpIHtcclxuICAgIGNvbnN0IGNoYW5uZWwgPSBnZXRCcm9hZGNhc3RDaGFubmVsKCk7XHJcbiAgICBpZiAoY2hhbm5lbCkge1xyXG4gICAgICAgIGNoYW5uZWwucG9zdE1lc3NhZ2UoeyBrZXksIGZpZCB9KTtcclxuICAgIH1cclxuICAgIGNsb3NlQnJvYWRjYXN0Q2hhbm5lbCgpO1xyXG59XHJcbmxldCBicm9hZGNhc3RDaGFubmVsID0gbnVsbDtcclxuLyoqIE9wZW5zIGFuZCByZXR1cm5zIGEgQnJvYWRjYXN0Q2hhbm5lbCBpZiBpdCBpcyBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIuICovXHJcbmZ1bmN0aW9uIGdldEJyb2FkY2FzdENoYW5uZWwoKSB7XHJcbiAgICBpZiAoIWJyb2FkY2FzdENoYW5uZWwgJiYgJ0Jyb2FkY2FzdENoYW5uZWwnIGluIHNlbGYpIHtcclxuICAgICAgICBicm9hZGNhc3RDaGFubmVsID0gbmV3IEJyb2FkY2FzdENoYW5uZWwoJ1tGaXJlYmFzZV0gRklEIENoYW5nZScpO1xyXG4gICAgICAgIGJyb2FkY2FzdENoYW5uZWwub25tZXNzYWdlID0gZSA9PiB7XHJcbiAgICAgICAgICAgIGNhbGxGaWRDaGFuZ2VDYWxsYmFja3MoZS5kYXRhLmtleSwgZS5kYXRhLmZpZCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBicm9hZGNhc3RDaGFubmVsO1xyXG59XHJcbmZ1bmN0aW9uIGNsb3NlQnJvYWRjYXN0Q2hhbm5lbCgpIHtcclxuICAgIGlmIChmaWRDaGFuZ2VDYWxsYmFja3Muc2l6ZSA9PT0gMCAmJiBicm9hZGNhc3RDaGFubmVsKSB7XHJcbiAgICAgICAgYnJvYWRjYXN0Q2hhbm5lbC5jbG9zZSgpO1xyXG4gICAgICAgIGJyb2FkY2FzdENoYW5uZWwgPSBudWxsO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERBVEFCQVNFX05BTUUgPSAnZmlyZWJhc2UtaW5zdGFsbGF0aW9ucy1kYXRhYmFzZSc7XHJcbmNvbnN0IERBVEFCQVNFX1ZFUlNJT04gPSAxO1xyXG5jb25zdCBPQkpFQ1RfU1RPUkVfTkFNRSA9ICdmaXJlYmFzZS1pbnN0YWxsYXRpb25zLXN0b3JlJztcclxubGV0IGRiUHJvbWlzZSA9IG51bGw7XHJcbmZ1bmN0aW9uIGdldERiUHJvbWlzZSgpIHtcclxuICAgIGlmICghZGJQcm9taXNlKSB7XHJcbiAgICAgICAgZGJQcm9taXNlID0gb3BlbkRCKERBVEFCQVNFX05BTUUsIERBVEFCQVNFX1ZFUlNJT04sIHtcclxuICAgICAgICAgICAgdXBncmFkZTogKGRiLCBvbGRWZXJzaW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCB1c2UgJ2JyZWFrJyBpbiB0aGlzIHN3aXRjaCBzdGF0ZW1lbnQsIHRoZSBmYWxsLXRocm91Z2hcclxuICAgICAgICAgICAgICAgIC8vIGJlaGF2aW9yIGlzIHdoYXQgd2Ugd2FudCwgYmVjYXVzZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgdmVyc2lvbnMgYmV0d2VlblxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIG9sZCB2ZXJzaW9uIGFuZCB0aGUgY3VycmVudCB2ZXJzaW9uLCB3ZSB3YW50IEFMTCB0aGUgbWlncmF0aW9uc1xyXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBjb3JyZXNwb25kIHRvIHRob3NlIHZlcnNpb25zIHRvIHJ1biwgbm90IG9ubHkgdGhlIGxhc3Qgb25lLlxyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlZmF1bHQtY2FzZVxyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChvbGRWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBkYlByb21pc2U7XHJcbn1cclxuLyoqIEFzc2lnbnMgb3Igb3ZlcndyaXRlcyB0aGUgcmVjb3JkIGZvciB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlIGdpdmVuIHZhbHVlLiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZXQoYXBwQ29uZmlnLCB2YWx1ZSkge1xyXG4gICAgY29uc3Qga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xyXG4gICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihPQkpFQ1RfU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0eC5vYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSk7XHJcbiAgICBjb25zdCBvbGRWYWx1ZSA9IChhd2FpdCBvYmplY3RTdG9yZS5nZXQoa2V5KSk7XHJcbiAgICBhd2FpdCBvYmplY3RTdG9yZS5wdXQodmFsdWUsIGtleSk7XHJcbiAgICBhd2FpdCB0eC5kb25lO1xyXG4gICAgaWYgKCFvbGRWYWx1ZSB8fCBvbGRWYWx1ZS5maWQgIT09IHZhbHVlLmZpZCkge1xyXG4gICAgICAgIGZpZENoYW5nZWQoYXBwQ29uZmlnLCB2YWx1ZS5maWQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcbi8qKiBSZW1vdmVzIHJlY29yZChzKSBmcm9tIHRoZSBvYmplY3RTdG9yZSB0aGF0IG1hdGNoIHRoZSBnaXZlbiBrZXkuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlbW92ZShhcHBDb25maWcpIHtcclxuICAgIGNvbnN0IGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcclxuICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgIGF3YWl0IHR4Lm9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKS5kZWxldGUoa2V5KTtcclxuICAgIGF3YWl0IHR4LmRvbmU7XHJcbn1cclxuLyoqXHJcbiAqIEF0b21pY2FsbHkgdXBkYXRlcyBhIHJlY29yZCB3aXRoIHRoZSByZXN1bHQgb2YgdXBkYXRlRm4sIHdoaWNoIGdldHNcclxuICogY2FsbGVkIHdpdGggdGhlIGN1cnJlbnQgdmFsdWUuIElmIG5ld1ZhbHVlIGlzIHVuZGVmaW5lZCwgdGhlIHJlY29yZCBpc1xyXG4gKiBkZWxldGVkIGluc3RlYWQuXHJcbiAqIEByZXR1cm4gVXBkYXRlZCB2YWx1ZVxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlKGFwcENvbmZpZywgdXBkYXRlRm4pIHtcclxuICAgIGNvbnN0IGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcclxuICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgIGNvbnN0IHN0b3JlID0gdHgub2JqZWN0U3RvcmUoT0JKRUNUX1NUT1JFX05BTUUpO1xyXG4gICAgY29uc3Qgb2xkVmFsdWUgPSAoYXdhaXQgc3RvcmUuZ2V0KGtleSkpO1xyXG4gICAgY29uc3QgbmV3VmFsdWUgPSB1cGRhdGVGbihvbGRWYWx1ZSk7XHJcbiAgICBpZiAobmV3VmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGF3YWl0IHN0b3JlLmRlbGV0ZShrZXkpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgYXdhaXQgc3RvcmUucHV0KG5ld1ZhbHVlLCBrZXkpO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgdHguZG9uZTtcclxuICAgIGlmIChuZXdWYWx1ZSAmJiAoIW9sZFZhbHVlIHx8IG9sZFZhbHVlLmZpZCAhPT0gbmV3VmFsdWUuZmlkKSkge1xyXG4gICAgICAgIGZpZENoYW5nZWQoYXBwQ29uZmlnLCBuZXdWYWx1ZS5maWQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ld1ZhbHVlO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBVcGRhdGVzIGFuZCByZXR1cm5zIHRoZSBJbnN0YWxsYXRpb25FbnRyeSBmcm9tIHRoZSBkYXRhYmFzZS5cclxuICogQWxzbyB0cmlnZ2VycyBhIHJlZ2lzdHJhdGlvbiByZXF1ZXN0IGlmIGl0IGlzIG5lY2Vzc2FyeSBhbmQgcG9zc2libGUuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRJbnN0YWxsYXRpb25FbnRyeShpbnN0YWxsYXRpb25zKSB7XHJcbiAgICBsZXQgcmVnaXN0cmF0aW9uUHJvbWlzZTtcclxuICAgIGNvbnN0IGluc3RhbGxhdGlvbkVudHJ5ID0gYXdhaXQgdXBkYXRlKGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnLCBvbGRFbnRyeSA9PiB7XHJcbiAgICAgICAgY29uc3QgaW5zdGFsbGF0aW9uRW50cnkgPSB1cGRhdGVPckNyZWF0ZUluc3RhbGxhdGlvbkVudHJ5KG9sZEVudHJ5KTtcclxuICAgICAgICBjb25zdCBlbnRyeVdpdGhQcm9taXNlID0gdHJpZ2dlclJlZ2lzdHJhdGlvbklmTmVjZXNzYXJ5KGluc3RhbGxhdGlvbnMsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlID0gZW50cnlXaXRoUHJvbWlzZS5yZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgICAgIHJldHVybiBlbnRyeVdpdGhQcm9taXNlLmluc3RhbGxhdGlvbkVudHJ5O1xyXG4gICAgfSk7XHJcbiAgICBpZiAoaW5zdGFsbGF0aW9uRW50cnkuZmlkID09PSBJTlZBTElEX0ZJRCkge1xyXG4gICAgICAgIC8vIEZJRCBnZW5lcmF0aW9uIGZhaWxlZC4gV2FpdGluZyBmb3IgdGhlIEZJRCBmcm9tIHRoZSBzZXJ2ZXIuXHJcbiAgICAgICAgcmV0dXJuIHsgaW5zdGFsbGF0aW9uRW50cnk6IGF3YWl0IHJlZ2lzdHJhdGlvblByb21pc2UgfTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaW5zdGFsbGF0aW9uRW50cnksXHJcbiAgICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZVxyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyBJbnN0YWxsYXRpb24gRW50cnkgaWYgb25lIGRvZXMgbm90IGV4aXN0LlxyXG4gKiBBbHNvIGNsZWFycyB0aW1lZCBvdXQgcGVuZGluZyByZXF1ZXN0cy5cclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZU9yQ3JlYXRlSW5zdGFsbGF0aW9uRW50cnkob2xkRW50cnkpIHtcclxuICAgIGNvbnN0IGVudHJ5ID0gb2xkRW50cnkgfHwge1xyXG4gICAgICAgIGZpZDogZ2VuZXJhdGVGaWQoKSxcclxuICAgICAgICByZWdpc3RyYXRpb25TdGF0dXM6IDAgLyogUmVxdWVzdFN0YXR1cy5OT1RfU1RBUlRFRCAqL1xyXG4gICAgfTtcclxuICAgIHJldHVybiBjbGVhclRpbWVkT3V0UmVxdWVzdChlbnRyeSk7XHJcbn1cclxuLyoqXHJcbiAqIElmIHRoZSBGaXJlYmFzZSBJbnN0YWxsYXRpb24gaXMgbm90IHJlZ2lzdGVyZWQgeWV0LCB0aGlzIHdpbGwgdHJpZ2dlciB0aGVcclxuICogcmVnaXN0cmF0aW9uIGFuZCByZXR1cm4gYW4gSW5Qcm9ncmVzc0luc3RhbGxhdGlvbkVudHJ5LlxyXG4gKlxyXG4gKiBJZiByZWdpc3RyYXRpb25Qcm9taXNlIGRvZXMgbm90IGV4aXN0LCB0aGUgaW5zdGFsbGF0aW9uRW50cnkgaXMgZ3VhcmFudGVlZFxyXG4gKiB0byBiZSByZWdpc3RlcmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gdHJpZ2dlclJlZ2lzdHJhdGlvbklmTmVjZXNzYXJ5KGluc3RhbGxhdGlvbnMsIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICBpZiAoaW5zdGFsbGF0aW9uRW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAwIC8qIFJlcXVlc3RTdGF0dXMuTk9UX1NUQVJURUQgKi8pIHtcclxuICAgICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHtcclxuICAgICAgICAgICAgLy8gUmVnaXN0cmF0aW9uIHJlcXVpcmVkIGJ1dCBhcHAgaXMgb2ZmbGluZS5cclxuICAgICAgICAgICAgY29uc3QgcmVnaXN0cmF0aW9uUHJvbWlzZVdpdGhFcnJvciA9IFByb21pc2UucmVqZWN0KEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLW9mZmxpbmVcIiAvKiBFcnJvckNvZGUuQVBQX09GRkxJTkUgKi8pKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbGxhdGlvbkVudHJ5LFxyXG4gICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZTogcmVnaXN0cmF0aW9uUHJvbWlzZVdpdGhFcnJvclxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUcnkgcmVnaXN0ZXJpbmcuIENoYW5nZSBzdGF0dXMgdG8gSU5fUFJPR1JFU1MuXHJcbiAgICAgICAgY29uc3QgaW5Qcm9ncmVzc0VudHJ5ID0ge1xyXG4gICAgICAgICAgICBmaWQ6IGluc3RhbGxhdGlvbkVudHJ5LmZpZCxcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAxIC8qIFJlcXVlc3RTdGF0dXMuSU5fUFJPR1JFU1MgKi8sXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblRpbWU6IERhdGUubm93KClcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvblByb21pc2UgPSByZWdpc3Rlckluc3RhbGxhdGlvbihpbnN0YWxsYXRpb25zLCBpblByb2dyZXNzRW50cnkpO1xyXG4gICAgICAgIHJldHVybiB7IGluc3RhbGxhdGlvbkVudHJ5OiBpblByb2dyZXNzRW50cnksIHJlZ2lzdHJhdGlvblByb21pc2UgfTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMSAvKiBSZXF1ZXN0U3RhdHVzLklOX1BST0dSRVNTICovKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5zdGFsbGF0aW9uRW50cnksXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2U6IHdhaXRVbnRpbEZpZFJlZ2lzdHJhdGlvbihpbnN0YWxsYXRpb25zKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4geyBpbnN0YWxsYXRpb25FbnRyeSB9O1xyXG4gICAgfVxyXG59XHJcbi8qKiBUaGlzIHdpbGwgYmUgZXhlY3V0ZWQgb25seSBvbmNlIGZvciBlYWNoIG5ldyBGaXJlYmFzZSBJbnN0YWxsYXRpb24uICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVySW5zdGFsbGF0aW9uKGluc3RhbGxhdGlvbnMsIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSA9IGF3YWl0IGNyZWF0ZUluc3RhbGxhdGlvblJlcXVlc3QoaW5zdGFsbGF0aW9ucywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgICAgIHJldHVybiBzZXQoaW5zdGFsbGF0aW9ucy5hcHBDb25maWcsIHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChpc1NlcnZlckVycm9yKGUpICYmIGUuY3VzdG9tRGF0YS5zZXJ2ZXJDb2RlID09PSA0MDkpIHtcclxuICAgICAgICAgICAgLy8gU2VydmVyIHJldHVybmVkIGEgXCJGSUQgY2FuIG5vdCBiZSB1c2VkXCIgZXJyb3IuXHJcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IElEIG5leHQgdGltZS5cclxuICAgICAgICAgICAgYXdhaXQgcmVtb3ZlKGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFJlZ2lzdHJhdGlvbiBmYWlsZWQuIFNldCBGSUQgYXMgbm90IHJlZ2lzdGVyZWQuXHJcbiAgICAgICAgICAgIGF3YWl0IHNldChpbnN0YWxsYXRpb25zLmFwcENvbmZpZywge1xyXG4gICAgICAgICAgICAgICAgZmlkOiBpbnN0YWxsYXRpb25FbnRyeS5maWQsXHJcbiAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25TdGF0dXM6IDAgLyogUmVxdWVzdFN0YXR1cy5OT1RfU1RBUlRFRCAqL1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxufVxyXG4vKiogQ2FsbCBpZiBGSUQgcmVnaXN0cmF0aW9uIGlzIHBlbmRpbmcgaW4gYW5vdGhlciByZXF1ZXN0LiAqL1xyXG5hc3luYyBmdW5jdGlvbiB3YWl0VW50aWxGaWRSZWdpc3RyYXRpb24oaW5zdGFsbGF0aW9ucykge1xyXG4gICAgLy8gVW5mb3J0dW5hdGVseSwgdGhlcmUgaXMgbm8gd2F5IG9mIHJlbGlhYmx5IG9ic2VydmluZyB3aGVuIGEgdmFsdWUgaW5cclxuICAgIC8vIEluZGV4ZWREQiBjaGFuZ2VzICh5ZXQsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vV0lDRy9pbmRleGVkLWRiLW9ic2VydmVycyksXHJcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHBvbGwuXHJcbiAgICBsZXQgZW50cnkgPSBhd2FpdCB1cGRhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgIHdoaWxlIChlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogUmVxdWVzdFN0YXR1cy5JTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgIC8vIGNyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0IHN0aWxsIGluIHByb2dyZXNzLlxyXG4gICAgICAgIGF3YWl0IHNsZWVwKDEwMCk7XHJcbiAgICAgICAgZW50cnkgPSBhd2FpdCB1cGRhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgIH1cclxuICAgIGlmIChlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDAgLyogUmVxdWVzdFN0YXR1cy5OT1RfU1RBUlRFRCAqLykge1xyXG4gICAgICAgIC8vIFRoZSByZXF1ZXN0IHRpbWVkIG91dCBvciBmYWlsZWQgaW4gYSBkaWZmZXJlbnQgY2FsbC4gVHJ5IGFnYWluLlxyXG4gICAgICAgIGNvbnN0IHsgaW5zdGFsbGF0aW9uRW50cnksIHJlZ2lzdHJhdGlvblByb21pc2UgfSA9IGF3YWl0IGdldEluc3RhbGxhdGlvbkVudHJ5KGluc3RhbGxhdGlvbnMpO1xyXG4gICAgICAgIGlmIChyZWdpc3RyYXRpb25Qcm9taXNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gcmVnaXN0cmF0aW9uUHJvbWlzZSwgZW50cnkgaXMgcmVnaXN0ZXJlZC5cclxuICAgICAgICAgICAgcmV0dXJuIGluc3RhbGxhdGlvbkVudHJ5O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBlbnRyeTtcclxufVxyXG4vKipcclxuICogQ2FsbGVkIG9ubHkgaWYgdGhlcmUgaXMgYSBDcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdCBpbiBwcm9ncmVzcy5cclxuICpcclxuICogVXBkYXRlcyB0aGUgSW5zdGFsbGF0aW9uRW50cnkgaW4gdGhlIERCIGJhc2VkIG9uIHRoZSBzdGF0dXMgb2YgdGhlXHJcbiAqIENyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0LlxyXG4gKlxyXG4gKiBSZXR1cm5zIHRoZSB1cGRhdGVkIEluc3RhbGxhdGlvbkVudHJ5LlxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlSW5zdGFsbGF0aW9uUmVxdWVzdChhcHBDb25maWcpIHtcclxuICAgIHJldHVybiB1cGRhdGUoYXBwQ29uZmlnLCBvbGRFbnRyeSA9PiB7XHJcbiAgICAgICAgaWYgKCFvbGRFbnRyeSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImluc3RhbGxhdGlvbi1ub3QtZm91bmRcIiAvKiBFcnJvckNvZGUuSU5TVEFMTEFUSU9OX05PVF9GT1VORCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVkT3V0UmVxdWVzdChvbGRFbnRyeSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBjbGVhclRpbWVkT3V0UmVxdWVzdChlbnRyeSkge1xyXG4gICAgaWYgKGhhc0luc3RhbGxhdGlvblJlcXVlc3RUaW1lZE91dChlbnRyeSkpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBmaWQ6IGVudHJ5LmZpZCxcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAwIC8qIFJlcXVlc3RTdGF0dXMuTk9UX1NUQVJURUQgKi9cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVudHJ5O1xyXG59XHJcbmZ1bmN0aW9uIGhhc0luc3RhbGxhdGlvblJlcXVlc3RUaW1lZE91dChpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgcmV0dXJuIChpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogUmVxdWVzdFN0YXR1cy5JTl9QUk9HUkVTUyAqLyAmJlxyXG4gICAgICAgIGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblRpbWUgKyBQRU5ESU5HX1RJTUVPVVRfTVMgPCBEYXRlLm5vdygpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUF1dGhUb2tlblJlcXVlc3QoeyBhcHBDb25maWcsIGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciB9LCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgY29uc3QgZW5kcG9pbnQgPSBnZXRHZW5lcmF0ZUF1dGhUb2tlbkVuZHBvaW50KGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnNXaXRoQXV0aChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgIC8vIElmIGhlYXJ0YmVhdCBzZXJ2aWNlIGV4aXN0cywgYWRkIHRoZSBoZWFydGJlYXQgc3RyaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICBjb25zdCBoZWFydGJlYXRTZXJ2aWNlID0gaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyLmdldEltbWVkaWF0ZSh7XHJcbiAgICAgICAgb3B0aW9uYWw6IHRydWVcclxuICAgIH0pO1xyXG4gICAgaWYgKGhlYXJ0YmVhdFNlcnZpY2UpIHtcclxuICAgICAgICBjb25zdCBoZWFydGJlYXRzSGVhZGVyID0gYXdhaXQgaGVhcnRiZWF0U2VydmljZS5nZXRIZWFydGJlYXRzSGVhZGVyKCk7XHJcbiAgICAgICAgaWYgKGhlYXJ0YmVhdHNIZWFkZXIpIHtcclxuICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoJ3gtZmlyZWJhc2UtY2xpZW50JywgaGVhcnRiZWF0c0hlYWRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICBpbnN0YWxsYXRpb246IHtcclxuICAgICAgICAgICAgc2RrVmVyc2lvbjogUEFDS0FHRV9WRVJTSU9OLFxyXG4gICAgICAgICAgICBhcHBJZDogYXBwQ29uZmlnLmFwcElkXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlJZlNlcnZlckVycm9yKCgpID0+IGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KSk7XHJcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCByZXNwb25zZVZhbHVlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIGNvbnN0IGNvbXBsZXRlZEF1dGhUb2tlbiA9IGV4dHJhY3RBdXRoVG9rZW5JbmZvRnJvbVJlc3BvbnNlKHJlc3BvbnNlVmFsdWUpO1xyXG4gICAgICAgIHJldHVybiBjb21wbGV0ZWRBdXRoVG9rZW47XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aHJvdyBhd2FpdCBnZXRFcnJvckZyb21SZXNwb25zZSgnR2VuZXJhdGUgQXV0aCBUb2tlbicsIHJlc3BvbnNlKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRHZW5lcmF0ZUF1dGhUb2tlbkVuZHBvaW50KGFwcENvbmZpZywgeyBmaWQgfSkge1xyXG4gICAgcmV0dXJuIGAke2dldEluc3RhbGxhdGlvbnNFbmRwb2ludChhcHBDb25maWcpfS8ke2ZpZH0vYXV0aFRva2VuczpnZW5lcmF0ZWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSB2YWxpZCBhdXRoZW50aWNhdGlvbiB0b2tlbiBmb3IgdGhlIGluc3RhbGxhdGlvbi4gR2VuZXJhdGVzIGEgbmV3XHJcbiAqIHRva2VuIGlmIG9uZSBkb2Vzbid0IGV4aXN0LCBpcyBleHBpcmVkIG9yIGFib3V0IHRvIGV4cGlyZS5cclxuICpcclxuICogU2hvdWxkIG9ubHkgYmUgY2FsbGVkIGlmIHRoZSBGaXJlYmFzZSBJbnN0YWxsYXRpb24gaXMgcmVnaXN0ZXJlZC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlZnJlc2hBdXRoVG9rZW4oaW5zdGFsbGF0aW9ucywgZm9yY2VSZWZyZXNoID0gZmFsc2UpIHtcclxuICAgIGxldCB0b2tlblByb21pc2U7XHJcbiAgICBjb25zdCBlbnRyeSA9IGF3YWl0IHVwZGF0ZShpbnN0YWxsYXRpb25zLmFwcENvbmZpZywgb2xkRW50cnkgPT4ge1xyXG4gICAgICAgIGlmICghaXNFbnRyeVJlZ2lzdGVyZWQob2xkRW50cnkpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm90LXJlZ2lzdGVyZWRcIiAvKiBFcnJvckNvZGUuTk9UX1JFR0lTVEVSRUQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBvbGRBdXRoVG9rZW4gPSBvbGRFbnRyeS5hdXRoVG9rZW47XHJcbiAgICAgICAgaWYgKCFmb3JjZVJlZnJlc2ggJiYgaXNBdXRoVG9rZW5WYWxpZChvbGRBdXRoVG9rZW4pKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZXJlIGlzIGEgdmFsaWQgdG9rZW4gaW4gdGhlIERCLlxyXG4gICAgICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG9sZEF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSAxIC8qIFJlcXVlc3RTdGF0dXMuSU5fUFJPR1JFU1MgKi8pIHtcclxuICAgICAgICAgICAgLy8gVGhlcmUgYWxyZWFkeSBpcyBhIHRva2VuIHJlcXVlc3QgaW4gcHJvZ3Jlc3MuXHJcbiAgICAgICAgICAgIHRva2VuUHJvbWlzZSA9IHdhaXRVbnRpbEF1dGhUb2tlblJlcXVlc3QoaW5zdGFsbGF0aW9ucywgZm9yY2VSZWZyZXNoKTtcclxuICAgICAgICAgICAgcmV0dXJuIG9sZEVudHJ5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gTm8gdG9rZW4gb3IgdG9rZW4gZXhwaXJlZC5cclxuICAgICAgICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1vZmZsaW5lXCIgLyogRXJyb3JDb2RlLkFQUF9PRkZMSU5FICovKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBpblByb2dyZXNzRW50cnkgPSBtYWtlQXV0aFRva2VuUmVxdWVzdEluUHJvZ3Jlc3NFbnRyeShvbGRFbnRyeSk7XHJcbiAgICAgICAgICAgIHRva2VuUHJvbWlzZSA9IGZldGNoQXV0aFRva2VuRnJvbVNlcnZlcihpbnN0YWxsYXRpb25zLCBpblByb2dyZXNzRW50cnkpO1xyXG4gICAgICAgICAgICByZXR1cm4gaW5Qcm9ncmVzc0VudHJ5O1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgY29uc3QgYXV0aFRva2VuID0gdG9rZW5Qcm9taXNlXHJcbiAgICAgICAgPyBhd2FpdCB0b2tlblByb21pc2VcclxuICAgICAgICA6IGVudHJ5LmF1dGhUb2tlbjtcclxuICAgIHJldHVybiBhdXRoVG9rZW47XHJcbn1cclxuLyoqXHJcbiAqIENhbGwgb25seSBpZiBGSUQgaXMgcmVnaXN0ZXJlZCBhbmQgQXV0aCBUb2tlbiByZXF1ZXN0IGlzIGluIHByb2dyZXNzLlxyXG4gKlxyXG4gKiBXYWl0cyB1bnRpbCB0aGUgY3VycmVudCBwZW5kaW5nIHJlcXVlc3QgZmluaXNoZXMuIElmIHRoZSByZXF1ZXN0IHRpbWVzIG91dCxcclxuICogdHJpZXMgb25jZSBpbiB0aGlzIHRocmVhZCBhcyB3ZWxsLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gd2FpdFVudGlsQXV0aFRva2VuUmVxdWVzdChpbnN0YWxsYXRpb25zLCBmb3JjZVJlZnJlc2gpIHtcclxuICAgIC8vIFVuZm9ydHVuYXRlbHksIHRoZXJlIGlzIG5vIHdheSBvZiByZWxpYWJseSBvYnNlcnZpbmcgd2hlbiBhIHZhbHVlIGluXHJcbiAgICAvLyBJbmRleGVkREIgY2hhbmdlcyAoeWV0LCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL1dJQ0cvaW5kZXhlZC1kYi1vYnNlcnZlcnMpLFxyXG4gICAgLy8gc28gd2UgbmVlZCB0byBwb2xsLlxyXG4gICAgbGV0IGVudHJ5ID0gYXdhaXQgdXBkYXRlQXV0aFRva2VuUmVxdWVzdChpbnN0YWxsYXRpb25zLmFwcENvbmZpZyk7XHJcbiAgICB3aGlsZSAoZW50cnkuYXV0aFRva2VuLnJlcXVlc3RTdGF0dXMgPT09IDEgLyogUmVxdWVzdFN0YXR1cy5JTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgIC8vIGdlbmVyYXRlQXV0aFRva2VuIHN0aWxsIGluIHByb2dyZXNzLlxyXG4gICAgICAgIGF3YWl0IHNsZWVwKDEwMCk7XHJcbiAgICAgICAgZW50cnkgPSBhd2FpdCB1cGRhdGVBdXRoVG9rZW5SZXF1ZXN0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGF1dGhUb2tlbiA9IGVudHJ5LmF1dGhUb2tlbjtcclxuICAgIGlmIChhdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMCAvKiBSZXF1ZXN0U3RhdHVzLk5PVF9TVEFSVEVEICovKSB7XHJcbiAgICAgICAgLy8gVGhlIHJlcXVlc3QgdGltZWQgb3V0IG9yIGZhaWxlZCBpbiBhIGRpZmZlcmVudCBjYWxsLiBUcnkgYWdhaW4uXHJcbiAgICAgICAgcmV0dXJuIHJlZnJlc2hBdXRoVG9rZW4oaW5zdGFsbGF0aW9ucywgZm9yY2VSZWZyZXNoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBhdXRoVG9rZW47XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENhbGxlZCBvbmx5IGlmIHRoZXJlIGlzIGEgR2VuZXJhdGVBdXRoVG9rZW4gcmVxdWVzdCBpbiBwcm9ncmVzcy5cclxuICpcclxuICogVXBkYXRlcyB0aGUgSW5zdGFsbGF0aW9uRW50cnkgaW4gdGhlIERCIGJhc2VkIG9uIHRoZSBzdGF0dXMgb2YgdGhlXHJcbiAqIEdlbmVyYXRlQXV0aFRva2VuIHJlcXVlc3QuXHJcbiAqXHJcbiAqIFJldHVybnMgdGhlIHVwZGF0ZWQgSW5zdGFsbGF0aW9uRW50cnkuXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVBdXRoVG9rZW5SZXF1ZXN0KGFwcENvbmZpZykge1xyXG4gICAgcmV0dXJuIHVwZGF0ZShhcHBDb25maWcsIG9sZEVudHJ5ID0+IHtcclxuICAgICAgICBpZiAoIWlzRW50cnlSZWdpc3RlcmVkKG9sZEVudHJ5KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vdC1yZWdpc3RlcmVkXCIgLyogRXJyb3JDb2RlLk5PVF9SRUdJU1RFUkVEICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb2xkQXV0aFRva2VuID0gb2xkRW50cnkuYXV0aFRva2VuO1xyXG4gICAgICAgIGlmIChoYXNBdXRoVG9rZW5SZXF1ZXN0VGltZWRPdXQob2xkQXV0aFRva2VuKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvbGRFbnRyeSksIHsgYXV0aFRva2VuOiB7IHJlcXVlc3RTdGF0dXM6IDAgLyogUmVxdWVzdFN0YXR1cy5OT1RfU1RBUlRFRCAqLyB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICB9KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBmZXRjaEF1dGhUb2tlbkZyb21TZXJ2ZXIoaW5zdGFsbGF0aW9ucywgaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgYXV0aFRva2VuID0gYXdhaXQgZ2VuZXJhdGVBdXRoVG9rZW5SZXF1ZXN0KGluc3RhbGxhdGlvbnMsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICBjb25zdCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGluc3RhbGxhdGlvbkVudHJ5KSwgeyBhdXRoVG9rZW4gfSk7XHJcbiAgICAgICAgYXdhaXQgc2V0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnLCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgICAgIHJldHVybiBhdXRoVG9rZW47XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChpc1NlcnZlckVycm9yKGUpICYmXHJcbiAgICAgICAgICAgIChlLmN1c3RvbURhdGEuc2VydmVyQ29kZSA9PT0gNDAxIHx8IGUuY3VzdG9tRGF0YS5zZXJ2ZXJDb2RlID09PSA0MDQpKSB7XHJcbiAgICAgICAgICAgIC8vIFNlcnZlciByZXR1cm5lZCBhIFwiRklEIG5vdCBmb3VuZFwiIG9yIGEgXCJJbnZhbGlkIGF1dGhlbnRpY2F0aW9uXCIgZXJyb3IuXHJcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IElEIG5leHQgdGltZS5cclxuICAgICAgICAgICAgYXdhaXQgcmVtb3ZlKGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgaW5zdGFsbGF0aW9uRW50cnkpLCB7IGF1dGhUb2tlbjogeyByZXF1ZXN0U3RhdHVzOiAwIC8qIFJlcXVlc3RTdGF0dXMuTk9UX1NUQVJURUQgKi8gfSB9KTtcclxuICAgICAgICAgICAgYXdhaXQgc2V0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnLCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzRW50cnlSZWdpc3RlcmVkKGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICByZXR1cm4gKGluc3RhbGxhdGlvbkVudHJ5ICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICBpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDIgLyogUmVxdWVzdFN0YXR1cy5DT01QTEVURUQgKi8pO1xyXG59XHJcbmZ1bmN0aW9uIGlzQXV0aFRva2VuVmFsaWQoYXV0aFRva2VuKSB7XHJcbiAgICByZXR1cm4gKGF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSAyIC8qIFJlcXVlc3RTdGF0dXMuQ09NUExFVEVEICovICYmXHJcbiAgICAgICAgIWlzQXV0aFRva2VuRXhwaXJlZChhdXRoVG9rZW4pKTtcclxufVxyXG5mdW5jdGlvbiBpc0F1dGhUb2tlbkV4cGlyZWQoYXV0aFRva2VuKSB7XHJcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgcmV0dXJuIChub3cgPCBhdXRoVG9rZW4uY3JlYXRpb25UaW1lIHx8XHJcbiAgICAgICAgYXV0aFRva2VuLmNyZWF0aW9uVGltZSArIGF1dGhUb2tlbi5leHBpcmVzSW4gPCBub3cgKyBUT0tFTl9FWFBJUkFUSU9OX0JVRkZFUik7XHJcbn1cclxuLyoqIFJldHVybnMgYW4gdXBkYXRlZCBJbnN0YWxsYXRpb25FbnRyeSB3aXRoIGFuIEluUHJvZ3Jlc3NBdXRoVG9rZW4uICovXHJcbmZ1bmN0aW9uIG1ha2VBdXRoVG9rZW5SZXF1ZXN0SW5Qcm9ncmVzc0VudHJ5KG9sZEVudHJ5KSB7XHJcbiAgICBjb25zdCBpblByb2dyZXNzQXV0aFRva2VuID0ge1xyXG4gICAgICAgIHJlcXVlc3RTdGF0dXM6IDEgLyogUmVxdWVzdFN0YXR1cy5JTl9QUk9HUkVTUyAqLyxcclxuICAgICAgICByZXF1ZXN0VGltZTogRGF0ZS5ub3coKVxyXG4gICAgfTtcclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9sZEVudHJ5KSwgeyBhdXRoVG9rZW46IGluUHJvZ3Jlc3NBdXRoVG9rZW4gfSk7XHJcbn1cclxuZnVuY3Rpb24gaGFzQXV0aFRva2VuUmVxdWVzdFRpbWVkT3V0KGF1dGhUb2tlbikge1xyXG4gICAgcmV0dXJuIChhdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMSAvKiBSZXF1ZXN0U3RhdHVzLklOX1BST0dSRVNTICovICYmXHJcbiAgICAgICAgYXV0aFRva2VuLnJlcXVlc3RUaW1lICsgUEVORElOR19USU1FT1VUX01TIDwgRGF0ZS5ub3coKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBGaXJlYmFzZSBJbnN0YWxsYXRpb24gaWYgdGhlcmUgaXNuJ3Qgb25lIGZvciB0aGUgYXBwIGFuZFxyXG4gKiByZXR1cm5zIHRoZSBJbnN0YWxsYXRpb24gSUQuXHJcbiAqIEBwYXJhbSBpbnN0YWxsYXRpb25zIC0gVGhlIGBJbnN0YWxsYXRpb25zYCBpbnN0YW5jZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0SWQoaW5zdGFsbGF0aW9ucykge1xyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9uc0ltcGwgPSBpbnN0YWxsYXRpb25zO1xyXG4gICAgY29uc3QgeyBpbnN0YWxsYXRpb25FbnRyeSwgcmVnaXN0cmF0aW9uUHJvbWlzZSB9ID0gYXdhaXQgZ2V0SW5zdGFsbGF0aW9uRW50cnkoaW5zdGFsbGF0aW9uc0ltcGwpO1xyXG4gICAgaWYgKHJlZ2lzdHJhdGlvblByb21pc2UpIHtcclxuICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gSWYgdGhlIGluc3RhbGxhdGlvbiBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQsIHVwZGF0ZSB0aGUgYXV0aGVudGljYXRpb25cclxuICAgICAgICAvLyB0b2tlbiBpZiBuZWVkZWQuXHJcbiAgICAgICAgcmVmcmVzaEF1dGhUb2tlbihpbnN0YWxsYXRpb25zSW1wbCkuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5zdGFsbGF0aW9uRW50cnkuZmlkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgRmlyZWJhc2UgSW5zdGFsbGF0aW9ucyBhdXRoIHRva2VuLCBpZGVudGlmeWluZyB0aGUgY3VycmVudFxyXG4gKiBGaXJlYmFzZSBJbnN0YWxsYXRpb24uXHJcbiAqIEBwYXJhbSBpbnN0YWxsYXRpb25zIC0gVGhlIGBJbnN0YWxsYXRpb25zYCBpbnN0YW5jZS5cclxuICogQHBhcmFtIGZvcmNlUmVmcmVzaCAtIEZvcmNlIHJlZnJlc2ggcmVnYXJkbGVzcyBvZiB0b2tlbiBleHBpcmF0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRUb2tlbihpbnN0YWxsYXRpb25zLCBmb3JjZVJlZnJlc2ggPSBmYWxzZSkge1xyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9uc0ltcGwgPSBpbnN0YWxsYXRpb25zO1xyXG4gICAgYXdhaXQgY29tcGxldGVJbnN0YWxsYXRpb25SZWdpc3RyYXRpb24oaW5zdGFsbGF0aW9uc0ltcGwpO1xyXG4gICAgLy8gQXQgdGhpcyBwb2ludCB3ZSBlaXRoZXIgaGF2ZSBhIFJlZ2lzdGVyZWQgSW5zdGFsbGF0aW9uIGluIHRoZSBEQiwgb3Igd2UndmVcclxuICAgIC8vIGFscmVhZHkgdGhyb3duIGFuIGVycm9yLlxyXG4gICAgY29uc3QgYXV0aFRva2VuID0gYXdhaXQgcmVmcmVzaEF1dGhUb2tlbihpbnN0YWxsYXRpb25zSW1wbCwgZm9yY2VSZWZyZXNoKTtcclxuICAgIHJldHVybiBhdXRoVG9rZW4udG9rZW47XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gY29tcGxldGVJbnN0YWxsYXRpb25SZWdpc3RyYXRpb24oaW5zdGFsbGF0aW9ucykge1xyXG4gICAgY29uc3QgeyByZWdpc3RyYXRpb25Qcm9taXNlIH0gPSBhd2FpdCBnZXRJbnN0YWxsYXRpb25FbnRyeShpbnN0YWxsYXRpb25zKTtcclxuICAgIGlmIChyZWdpc3RyYXRpb25Qcm9taXNlKSB7XHJcbiAgICAgICAgLy8gQSBjcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdCBpcyBpbiBwcm9ncmVzcy4gV2FpdCB1bnRpbCBpdCBmaW5pc2hlcy5cclxuICAgICAgICBhd2FpdCByZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgY29uc3QgZW5kcG9pbnQgPSBnZXREZWxldGVFbmRwb2ludChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgIGNvbnN0IGhlYWRlcnMgPSBnZXRIZWFkZXJzV2l0aEF1dGgoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgaGVhZGVyc1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlJZlNlcnZlckVycm9yKCgpID0+IGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KSk7XHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgdGhyb3cgYXdhaXQgZ2V0RXJyb3JGcm9tUmVzcG9uc2UoJ0RlbGV0ZSBJbnN0YWxsYXRpb24nLCByZXNwb25zZSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0RGVsZXRlRW5kcG9pbnQoYXBwQ29uZmlnLCB7IGZpZCB9KSB7XHJcbiAgICByZXR1cm4gYCR7Z2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50KGFwcENvbmZpZyl9LyR7ZmlkfWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERlbGV0ZXMgdGhlIEZpcmViYXNlIEluc3RhbGxhdGlvbiBhbmQgYWxsIGFzc29jaWF0ZWQgZGF0YS5cclxuICogQHBhcmFtIGluc3RhbGxhdGlvbnMgLSBUaGUgYEluc3RhbGxhdGlvbnNgIGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVJbnN0YWxsYXRpb25zKGluc3RhbGxhdGlvbnMpIHtcclxuICAgIGNvbnN0IHsgYXBwQ29uZmlnIH0gPSBpbnN0YWxsYXRpb25zO1xyXG4gICAgY29uc3QgZW50cnkgPSBhd2FpdCB1cGRhdGUoYXBwQ29uZmlnLCBvbGRFbnRyeSA9PiB7XHJcbiAgICAgICAgaWYgKG9sZEVudHJ5ICYmIG9sZEVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMCAvKiBSZXF1ZXN0U3RhdHVzLk5PVF9TVEFSVEVEICovKSB7XHJcbiAgICAgICAgICAgIC8vIERlbGV0ZSB0aGUgdW5yZWdpc3RlcmVkIGVudHJ5IHdpdGhvdXQgc2VuZGluZyBhIGRlbGV0ZUluc3RhbGxhdGlvbiByZXF1ZXN0LlxyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICB9KTtcclxuICAgIGlmIChlbnRyeSkge1xyXG4gICAgICAgIGlmIChlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogUmVxdWVzdFN0YXR1cy5JTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgICAgICAvLyBDYW4ndCBkZWxldGUgd2hpbGUgdHJ5aW5nIHRvIHJlZ2lzdGVyLlxyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImRlbGV0ZS1wZW5kaW5nLXJlZ2lzdHJhdGlvblwiIC8qIEVycm9yQ29kZS5ERUxFVEVfUEVORElOR19SRUdJU1RSQVRJT04gKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDIgLyogUmVxdWVzdFN0YXR1cy5DT01QTEVURUQgKi8pIHtcclxuICAgICAgICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1vZmZsaW5lXCIgLyogRXJyb3JDb2RlLkFQUF9PRkZMSU5FICovKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGRlbGV0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnLCBlbnRyeSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZW1vdmUoYXBwQ29uZmlnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU2V0cyBhIG5ldyBjYWxsYmFjayB0aGF0IHdpbGwgZ2V0IGNhbGxlZCB3aGVuIEluc3RhbGxhdGlvbiBJRCBjaGFuZ2VzLlxyXG4gKiBSZXR1cm5zIGFuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgd2lsbCByZW1vdmUgdGhlIGNhbGxiYWNrIHdoZW4gY2FsbGVkLlxyXG4gKiBAcGFyYW0gaW5zdGFsbGF0aW9ucyAtIFRoZSBgSW5zdGFsbGF0aW9uc2AgaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBjYWxsYmFjayAtIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IGlzIGludm9rZWQgd2hlbiBGSUQgY2hhbmdlcy5cclxuICogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IGNhbiBiZSBjYWxsZWQgdG8gdW5zdWJzY3JpYmUuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG9uSWRDaGFuZ2UoaW5zdGFsbGF0aW9ucywgY2FsbGJhY2spIHtcclxuICAgIGNvbnN0IHsgYXBwQ29uZmlnIH0gPSBpbnN0YWxsYXRpb25zO1xyXG4gICAgYWRkQ2FsbGJhY2soYXBwQ29uZmlnLCBjYWxsYmFjayk7XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgIHJlbW92ZUNhbGxiYWNrKGFwcENvbmZpZywgY2FsbGJhY2spO1xyXG4gICAgfTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhbiBpbnN0YW5jZSBvZiB7QGxpbmsgSW5zdGFsbGF0aW9uc30gYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlblxyXG4gKiB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBhcHAgLSBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRJbnN0YWxsYXRpb25zKGFwcCA9IGdldEFwcCgpKSB7XHJcbiAgICBjb25zdCBpbnN0YWxsYXRpb25zSW1wbCA9IF9nZXRQcm92aWRlcihhcHAsICdpbnN0YWxsYXRpb25zJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICByZXR1cm4gaW5zdGFsbGF0aW9uc0ltcGw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZXh0cmFjdEFwcENvbmZpZyhhcHApIHtcclxuICAgIGlmICghYXBwIHx8ICFhcHAub3B0aW9ucykge1xyXG4gICAgICAgIHRocm93IGdldE1pc3NpbmdWYWx1ZUVycm9yKCdBcHAgQ29uZmlndXJhdGlvbicpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcHAubmFtZSkge1xyXG4gICAgICAgIHRocm93IGdldE1pc3NpbmdWYWx1ZUVycm9yKCdBcHAgTmFtZScpO1xyXG4gICAgfVxyXG4gICAgLy8gUmVxdWlyZWQgYXBwIGNvbmZpZyBrZXlzXHJcbiAgICBjb25zdCBjb25maWdLZXlzID0gW1xyXG4gICAgICAgICdwcm9qZWN0SWQnLFxyXG4gICAgICAgICdhcGlLZXknLFxyXG4gICAgICAgICdhcHBJZCdcclxuICAgIF07XHJcbiAgICBmb3IgKGNvbnN0IGtleU5hbWUgb2YgY29uZmlnS2V5cykge1xyXG4gICAgICAgIGlmICghYXBwLm9wdGlvbnNba2V5TmFtZV0pIHtcclxuICAgICAgICAgICAgdGhyb3cgZ2V0TWlzc2luZ1ZhbHVlRXJyb3Ioa2V5TmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBhcHBOYW1lOiBhcHAubmFtZSxcclxuICAgICAgICBwcm9qZWN0SWQ6IGFwcC5vcHRpb25zLnByb2plY3RJZCxcclxuICAgICAgICBhcGlLZXk6IGFwcC5vcHRpb25zLmFwaUtleSxcclxuICAgICAgICBhcHBJZDogYXBwLm9wdGlvbnMuYXBwSWRcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gZ2V0TWlzc2luZ1ZhbHVlRXJyb3IodmFsdWVOYW1lKSB7XHJcbiAgICByZXR1cm4gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJtaXNzaW5nLWFwcC1jb25maWctdmFsdWVzXCIgLyogRXJyb3JDb2RlLk1JU1NJTkdfQVBQX0NPTkZJR19WQUxVRVMgKi8sIHtcclxuICAgICAgICB2YWx1ZU5hbWVcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IElOU1RBTExBVElPTlNfTkFNRSA9ICdpbnN0YWxsYXRpb25zJztcclxuY29uc3QgSU5TVEFMTEFUSU9OU19OQU1FX0lOVEVSTkFMID0gJ2luc3RhbGxhdGlvbnMtaW50ZXJuYWwnO1xyXG5jb25zdCBwdWJsaWNGYWN0b3J5ID0gKGNvbnRhaW5lcikgPT4ge1xyXG4gICAgY29uc3QgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgIC8vIFRocm93cyBpZiBhcHAgaXNuJ3QgY29uZmlndXJlZCBwcm9wZXJseS5cclxuICAgIGNvbnN0IGFwcENvbmZpZyA9IGV4dHJhY3RBcHBDb25maWcoYXBwKTtcclxuICAgIGNvbnN0IGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciA9IF9nZXRQcm92aWRlcihhcHAsICdoZWFydGJlYXQnKTtcclxuICAgIGNvbnN0IGluc3RhbGxhdGlvbnNJbXBsID0ge1xyXG4gICAgICAgIGFwcCxcclxuICAgICAgICBhcHBDb25maWcsXHJcbiAgICAgICAgaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyLFxyXG4gICAgICAgIF9kZWxldGU6ICgpID0+IFByb21pc2UucmVzb2x2ZSgpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGluc3RhbGxhdGlvbnNJbXBsO1xyXG59O1xyXG5jb25zdCBpbnRlcm5hbEZhY3RvcnkgPSAoY29udGFpbmVyKSA9PiB7XHJcbiAgICBjb25zdCBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgLy8gSW50ZXJuYWwgRklTIGluc3RhbmNlIHJlbGllcyBvbiBwdWJsaWMgRklTIGluc3RhbmNlLlxyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9ucyA9IF9nZXRQcm92aWRlcihhcHAsIElOU1RBTExBVElPTlNfTkFNRSkuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICBjb25zdCBpbnN0YWxsYXRpb25zSW50ZXJuYWwgPSB7XHJcbiAgICAgICAgZ2V0SWQ6ICgpID0+IGdldElkKGluc3RhbGxhdGlvbnMpLFxyXG4gICAgICAgIGdldFRva2VuOiAoZm9yY2VSZWZyZXNoKSA9PiBnZXRUb2tlbihpbnN0YWxsYXRpb25zLCBmb3JjZVJlZnJlc2gpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGluc3RhbGxhdGlvbnNJbnRlcm5hbDtcclxufTtcclxuZnVuY3Rpb24gcmVnaXN0ZXJJbnN0YWxsYXRpb25zKCkge1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoSU5TVEFMTEFUSU9OU19OQU1FLCBwdWJsaWNGYWN0b3J5LCBcIlBVQkxJQ1wiIC8qIENvbXBvbmVudFR5cGUuUFVCTElDICovKSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChJTlNUQUxMQVRJT05TX05BTUVfSU5URVJOQUwsIGludGVybmFsRmFjdG9yeSwgXCJQUklWQVRFXCIgLyogQ29tcG9uZW50VHlwZS5QUklWQVRFICovKSk7XHJcbn1cblxuLyoqXHJcbiAqIFRoZSBGaXJlYmFzZSBJbnN0YWxsYXRpb25zIFdlYiBTREsuXHJcbiAqIFRoaXMgU0RLIGRvZXMgbm90IHdvcmsgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50LlxyXG4gKlxyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbnJlZ2lzdGVySW5zdGFsbGF0aW9ucygpO1xyXG5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbik7XHJcbi8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXHJcbnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnZXNtMjAxNycpO1xuXG5leHBvcnQgeyBkZWxldGVJbnN0YWxsYXRpb25zLCBnZXRJZCwgZ2V0SW5zdGFsbGF0aW9ucywgZ2V0VG9rZW4sIG9uSWRDaGFuZ2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBfZ2V0UHJvdmlkZXIsIGdldEFwcCwgX3JlZ2lzdGVyQ29tcG9uZW50LCByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzLCBGaXJlYmFzZUVycm9yLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSwgaXNCcm93c2VyRXh0ZW5zaW9uLCBhcmVDb29raWVzRW5hYmxlZCwgZ2V0TW9kdWxhckluc3RhbmNlLCBkZWVwRXF1YWwgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCAnQGZpcmViYXNlL2luc3RhbGxhdGlvbnMnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVHlwZSBjb25zdGFudCBmb3IgRmlyZWJhc2UgQW5hbHl0aWNzLlxyXG4gKi9cclxuY29uc3QgQU5BTFlUSUNTX1RZUEUgPSAnYW5hbHl0aWNzJztcclxuLy8gS2V5IHRvIGF0dGFjaCBGSUQgdG8gaW4gZ3RhZyBwYXJhbXMuXHJcbmNvbnN0IEdBX0ZJRF9LRVkgPSAnZmlyZWJhc2VfaWQnO1xyXG5jb25zdCBPUklHSU5fS0VZID0gJ29yaWdpbic7XHJcbmNvbnN0IEZFVENIX1RJTUVPVVRfTUlMTElTID0gNjAgKiAxMDAwO1xyXG5jb25zdCBEWU5BTUlDX0NPTkZJR19VUkwgPSAnaHR0cHM6Ly9maXJlYmFzZS5nb29nbGVhcGlzLmNvbS92MWFscGhhL3Byb2plY3RzLy0vYXBwcy97YXBwLWlkfS93ZWJDb25maWcnO1xyXG5jb25zdCBHVEFHX1VSTCA9ICdodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbS9ndGFnL2pzJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcignQGZpcmViYXNlL2FuYWx5dGljcycpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBFUlJPUlMgPSB7XHJcbiAgICBbXCJhbHJlYWR5LWV4aXN0c1wiIC8qIEFuYWx5dGljc0Vycm9yLkFMUkVBRFlfRVhJU1RTICovXTogJ0EgRmlyZWJhc2UgQW5hbHl0aWNzIGluc3RhbmNlIHdpdGggdGhlIGFwcElkIHskaWR9ICcgK1xyXG4gICAgICAgICcgYWxyZWFkeSBleGlzdHMuICcgK1xyXG4gICAgICAgICdPbmx5IG9uZSBGaXJlYmFzZSBBbmFseXRpY3MgaW5zdGFuY2UgY2FuIGJlIGNyZWF0ZWQgZm9yIGVhY2ggYXBwSWQuJyxcclxuICAgIFtcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBbmFseXRpY3NFcnJvci5BTFJFQURZX0lOSVRJQUxJWkVEICovXTogJ2luaXRpYWxpemVBbmFseXRpY3MoKSBjYW5ub3QgYmUgY2FsbGVkIGFnYWluIHdpdGggZGlmZmVyZW50IG9wdGlvbnMgdGhhbiB0aG9zZSAnICtcclxuICAgICAgICAnaXQgd2FzIGluaXRpYWxseSBjYWxsZWQgd2l0aC4gSXQgY2FuIGJlIGNhbGxlZCBhZ2FpbiB3aXRoIHRoZSBzYW1lIG9wdGlvbnMgdG8gJyArXHJcbiAgICAgICAgJ3JldHVybiB0aGUgZXhpc3RpbmcgaW5zdGFuY2UsIG9yIGdldEFuYWx5dGljcygpIGNhbiBiZSB1c2VkICcgK1xyXG4gICAgICAgICd0byBnZXQgYSByZWZlcmVuY2UgdG8gdGhlIGFscmVhZHktaW50aWFsaXplZCBpbnN0YW5jZS4nLFxyXG4gICAgW1wiYWxyZWFkeS1pbml0aWFsaXplZC1zZXR0aW5nc1wiIC8qIEFuYWx5dGljc0Vycm9yLkFMUkVBRFlfSU5JVElBTElaRURfU0VUVElOR1MgKi9dOiAnRmlyZWJhc2UgQW5hbHl0aWNzIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWQuJyArXHJcbiAgICAgICAgJ3NldHRpbmdzKCkgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIGluaXRpYWxpemluZyBhbnkgQW5hbHl0aWNzIGluc3RhbmNlJyArXHJcbiAgICAgICAgJ29yIGl0IHdpbGwgaGF2ZSBubyBlZmZlY3QuJyxcclxuICAgIFtcImludGVyb3AtY29tcG9uZW50LXJlZy1mYWlsZWRcIiAvKiBBbmFseXRpY3NFcnJvci5JTlRFUk9QX0NPTVBPTkVOVF9SRUdfRkFJTEVEICovXTogJ0ZpcmViYXNlIEFuYWx5dGljcyBJbnRlcm9wIENvbXBvbmVudCBmYWlsZWQgdG8gaW5zdGFudGlhdGU6IHskcmVhc29ufScsXHJcbiAgICBbXCJpbnZhbGlkLWFuYWx5dGljcy1jb250ZXh0XCIgLyogQW5hbHl0aWNzRXJyb3IuSU5WQUxJRF9BTkFMWVRJQ1NfQ09OVEVYVCAqL106ICdGaXJlYmFzZSBBbmFseXRpY3MgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50LiAnICtcclxuICAgICAgICAnV3JhcCBpbml0aWFsaXphdGlvbiBvZiBhbmFseXRpY3MgaW4gYW5hbHl0aWNzLmlzU3VwcG9ydGVkKCkgJyArXHJcbiAgICAgICAgJ3RvIHByZXZlbnQgaW5pdGlhbGl6YXRpb24gaW4gdW5zdXBwb3J0ZWQgZW52aXJvbm1lbnRzLiBEZXRhaWxzOiB7JGVycm9ySW5mb30nLFxyXG4gICAgW1wiaW5kZXhlZGRiLXVuYXZhaWxhYmxlXCIgLyogQW5hbHl0aWNzRXJyb3IuSU5ERVhFRERCX1VOQVZBSUxBQkxFICovXTogJ0luZGV4ZWREQiB1bmF2YWlsYWJsZSBvciByZXN0cmljdGVkIGluIHRoaXMgZW52aXJvbm1lbnQuICcgK1xyXG4gICAgICAgICdXcmFwIGluaXRpYWxpemF0aW9uIG9mIGFuYWx5dGljcyBpbiBhbmFseXRpY3MuaXNTdXBwb3J0ZWQoKSAnICtcclxuICAgICAgICAndG8gcHJldmVudCBpbml0aWFsaXphdGlvbiBpbiB1bnN1cHBvcnRlZCBlbnZpcm9ubWVudHMuIERldGFpbHM6IHskZXJyb3JJbmZvfScsXHJcbiAgICBbXCJmZXRjaC10aHJvdHRsZVwiIC8qIEFuYWx5dGljc0Vycm9yLkZFVENIX1RIUk9UVExFICovXTogJ1RoZSBjb25maWcgZmV0Y2ggcmVxdWVzdCB0aW1lZCBvdXQgd2hpbGUgaW4gYW4gZXhwb25lbnRpYWwgYmFja29mZiBzdGF0ZS4nICtcclxuICAgICAgICAnIFVuaXggdGltZXN0YW1wIGluIG1pbGxpc2Vjb25kcyB3aGVuIGZldGNoIHJlcXVlc3QgdGhyb3R0bGluZyBlbmRzOiB7JHRocm90dGxlRW5kVGltZU1pbGxpc30uJyxcclxuICAgIFtcImNvbmZpZy1mZXRjaC1mYWlsZWRcIiAvKiBBbmFseXRpY3NFcnJvci5DT05GSUdfRkVUQ0hfRkFJTEVEICovXTogJ0R5bmFtaWMgY29uZmlnIGZldGNoIGZhaWxlZDogW3skaHR0cFN0YXR1c31dIHskcmVzcG9uc2VNZXNzYWdlfScsXHJcbiAgICBbXCJuby1hcGkta2V5XCIgLyogQW5hbHl0aWNzRXJyb3IuTk9fQVBJX0tFWSAqL106ICdUaGUgXCJhcGlLZXlcIiBmaWVsZCBpcyBlbXB0eSBpbiB0aGUgbG9jYWwgRmlyZWJhc2UgY29uZmlnLiBGaXJlYmFzZSBBbmFseXRpY3MgcmVxdWlyZXMgdGhpcyBmaWVsZCB0bycgK1xyXG4gICAgICAgICdjb250YWluIGEgdmFsaWQgQVBJIGtleS4nLFxyXG4gICAgW1wibm8tYXBwLWlkXCIgLyogQW5hbHl0aWNzRXJyb3IuTk9fQVBQX0lEICovXTogJ1RoZSBcImFwcElkXCIgZmllbGQgaXMgZW1wdHkgaW4gdGhlIGxvY2FsIEZpcmViYXNlIGNvbmZpZy4gRmlyZWJhc2UgQW5hbHl0aWNzIHJlcXVpcmVzIHRoaXMgZmllbGQgdG8nICtcclxuICAgICAgICAnY29udGFpbiBhIHZhbGlkIGFwcCBJRC4nLFxyXG4gICAgW1wibm8tY2xpZW50LWlkXCIgLyogQW5hbHl0aWNzRXJyb3IuTk9fQ0xJRU5UX0lEICovXTogJ1RoZSBcImNsaWVudF9pZFwiIGZpZWxkIGlzIGVtcHR5LicsXHJcbiAgICBbXCJpbnZhbGlkLWd0YWctcmVzb3VyY2VcIiAvKiBBbmFseXRpY3NFcnJvci5JTlZBTElEX0dUQUdfUkVTT1VSQ0UgKi9dOiAnVHJ1c3RlZCBUeXBlcyBkZXRlY3RlZCBhbiBpbnZhbGlkIGd0YWcgcmVzb3VyY2U6IHskZ3RhZ1VSTH0uJ1xyXG59O1xyXG5jb25zdCBFUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeSgnYW5hbHl0aWNzJywgJ0FuYWx5dGljcycsIEVSUk9SUyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBWZXJpZmllcyBhbmQgY3JlYXRlcyBhIFRydXN0ZWRTY3JpcHRVUkwuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVHdGFnVHJ1c3RlZFR5cGVzU2NyaXB0VVJMKHVybCkge1xyXG4gICAgaWYgKCF1cmwuc3RhcnRzV2l0aChHVEFHX1VSTCkpIHtcclxuICAgICAgICBjb25zdCBlcnIgPSBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtZ3RhZy1yZXNvdXJjZVwiIC8qIEFuYWx5dGljc0Vycm9yLklOVkFMSURfR1RBR19SRVNPVVJDRSAqLywge1xyXG4gICAgICAgICAgICBndGFnVVJMOiB1cmxcclxuICAgICAgICB9KTtcclxuICAgICAgICBsb2dnZXIud2FybihlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVybDtcclxufVxyXG4vKipcclxuICogTWFrZXNoaWZ0IHBvbHlmaWxsIGZvciBQcm9taXNlLmFsbFNldHRsZWQoKS4gUmVzb2x2ZXMgd2hlbiBhbGwgcHJvbWlzZXNcclxuICogaGF2ZSBlaXRoZXIgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBwcm9taXNlcyBBcnJheSBvZiBwcm9taXNlcyB0byB3YWl0IGZvci5cclxuICovXHJcbmZ1bmN0aW9uIHByb21pc2VBbGxTZXR0bGVkKHByb21pc2VzKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMubWFwKHByb21pc2UgPT4gcHJvbWlzZS5jYXRjaChlID0+IGUpKSk7XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBUcnVzdGVkVHlwZVBvbGljeSBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIHRoZSBydWxlcyBwYXNzZWQgYXMgcG9saWN5T3B0aW9ucy5cclxuICpcclxuICogQHBhcmFtIHBvbGljeU5hbWUgQSBzdHJpbmcgY29udGFpbmluZyB0aGUgbmFtZSBvZiB0aGUgcG9saWN5XHJcbiAqIEBwYXJhbSBwb2xpY3lPcHRpb25zIE9iamVjdCBjb250YWluaW5nIGltcGxlbWVudGF0aW9ucyBvZiBpbnN0YW5jZSBtZXRob2RzIGZvciBUcnVzdGVkVHlwZXNQb2xpY3ksIHNlZSB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1RydXN0ZWRUeXBlUG9saWN5I2luc3RhbmNlX21ldGhvZHNcclxuICogfCB0aGUgVHJ1c3RlZFR5cGVQb2xpY3kgcmVmZXJlbmNlIGRvY3VtZW50YXRpb259LlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlVHJ1c3RlZFR5cGVzUG9saWN5KHBvbGljeU5hbWUsIHBvbGljeU9wdGlvbnMpIHtcclxuICAgIC8vIENyZWF0ZSBhIFRydXN0ZWRUeXBlcyBwb2xpY3kgdGhhdCB3ZSBjYW4gdXNlIGZvciB1cGRhdGluZyBzcmNcclxuICAgIC8vIHByb3BlcnRpZXNcclxuICAgIGxldCB0cnVzdGVkVHlwZXNQb2xpY3k7XHJcbiAgICBpZiAod2luZG93LnRydXN0ZWRUeXBlcykge1xyXG4gICAgICAgIHRydXN0ZWRUeXBlc1BvbGljeSA9IHdpbmRvdy50cnVzdGVkVHlwZXMuY3JlYXRlUG9saWN5KHBvbGljeU5hbWUsIHBvbGljeU9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydXN0ZWRUeXBlc1BvbGljeTtcclxufVxyXG4vKipcclxuICogSW5zZXJ0cyBndGFnIHNjcmlwdCB0YWcgaW50byB0aGUgcGFnZSB0byBhc3luY2hyb25vdXNseSBkb3dubG9hZCBndGFnLlxyXG4gKiBAcGFyYW0gZGF0YUxheWVyTmFtZSBOYW1lIG9mIGRhdGFsYXllciAobW9zdCBvZnRlbiB0aGUgZGVmYXVsdCwgXCJfZGF0YUxheWVyXCIpLlxyXG4gKi9cclxuZnVuY3Rpb24gaW5zZXJ0U2NyaXB0VGFnKGRhdGFMYXllck5hbWUsIG1lYXN1cmVtZW50SWQpIHtcclxuICAgIGNvbnN0IHRydXN0ZWRUeXBlc1BvbGljeSA9IGNyZWF0ZVRydXN0ZWRUeXBlc1BvbGljeSgnZmlyZWJhc2UtanMtc2RrLXBvbGljeScsIHtcclxuICAgICAgICBjcmVhdGVTY3JpcHRVUkw6IGNyZWF0ZUd0YWdUcnVzdGVkVHlwZXNTY3JpcHRVUkxcclxuICAgIH0pO1xyXG4gICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAvLyBXZSBhcmUgbm90IHByb3ZpZGluZyBhbiBhbmFseXRpY3NJZCBpbiB0aGUgVVJMIGJlY2F1c2UgaXQgd291bGQgdHJpZ2dlciBhIGBwYWdlX3ZpZXdgXHJcbiAgICAvLyB3aXRob3V0IGZpZC4gV2Ugd2lsbCBpbml0aWFsaXplIGdhLWlkIHVzaW5nIGd0YWcgKGNvbmZpZykgY29tbWFuZCB0b2dldGhlciB3aXRoIGZpZC5cclxuICAgIGNvbnN0IGd0YWdTY3JpcHRVUkwgPSBgJHtHVEFHX1VSTH0/bD0ke2RhdGFMYXllck5hbWV9JmlkPSR7bWVhc3VyZW1lbnRJZH1gO1xyXG4gICAgc2NyaXB0LnNyYyA9IHRydXN0ZWRUeXBlc1BvbGljeVxyXG4gICAgICAgID8gdHJ1c3RlZFR5cGVzUG9saWN5ID09PSBudWxsIHx8IHRydXN0ZWRUeXBlc1BvbGljeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdHJ1c3RlZFR5cGVzUG9saWN5LmNyZWF0ZVNjcmlwdFVSTChndGFnU2NyaXB0VVJMKVxyXG4gICAgICAgIDogZ3RhZ1NjcmlwdFVSTDtcclxuICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XHJcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbn1cclxuLyoqXHJcbiAqIEdldCByZWZlcmVuY2UgdG8sIG9yIGNyZWF0ZSwgZ2xvYmFsIGRhdGFsYXllci5cclxuICogQHBhcmFtIGRhdGFMYXllck5hbWUgTmFtZSBvZiBkYXRhbGF5ZXIgKG1vc3Qgb2Z0ZW4gdGhlIGRlZmF1bHQsIFwiX2RhdGFMYXllclwiKS5cclxuICovXHJcbmZ1bmN0aW9uIGdldE9yQ3JlYXRlRGF0YUxheWVyKGRhdGFMYXllck5hbWUpIHtcclxuICAgIC8vIENoZWNrIGZvciBleGlzdGluZyBkYXRhTGF5ZXIgYW5kIGNyZWF0ZSBpZiBuZWVkZWQuXHJcbiAgICBsZXQgZGF0YUxheWVyID0gW107XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh3aW5kb3dbZGF0YUxheWVyTmFtZV0pKSB7XHJcbiAgICAgICAgZGF0YUxheWVyID0gd2luZG93W2RhdGFMYXllck5hbWVdO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgd2luZG93W2RhdGFMYXllck5hbWVdID0gZGF0YUxheWVyO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGFMYXllcjtcclxufVxyXG4vKipcclxuICogV3JhcHBlZCBndGFnIGxvZ2ljIHdoZW4gZ3RhZyBpcyBjYWxsZWQgd2l0aCAnY29uZmlnJyBjb21tYW5kLlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0NvcmUgQmFzaWMgZ3RhZyBmdW5jdGlvbiB0aGF0IGp1c3QgYXBwZW5kcyB0byBkYXRhTGF5ZXIuXHJcbiAqIEBwYXJhbSBpbml0aWFsaXphdGlvblByb21pc2VzTWFwIE1hcCBvZiBhcHBJZHMgdG8gdGhlaXIgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMuXHJcbiAqIEBwYXJhbSBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0IEFycmF5IG9mIGR5bmFtaWMgY29uZmlnIGZldGNoIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gbWVhc3VyZW1lbnRJZFRvQXBwSWQgTWFwIG9mIEdBIG1lYXN1cmVtZW50SURzIHRvIGNvcnJlc3BvbmRpbmcgRmlyZWJhc2UgYXBwSWQuXHJcbiAqIEBwYXJhbSBtZWFzdXJlbWVudElkIEdBIE1lYXN1cmVtZW50IElEIHRvIHNldCBjb25maWcgZm9yLlxyXG4gKiBAcGFyYW0gZ3RhZ1BhcmFtcyBHdGFnIGNvbmZpZyBwYXJhbXMgdG8gc2V0LlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ3RhZ09uQ29uZmlnKGd0YWdDb3JlLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkVG9BcHBJZCwgbWVhc3VyZW1lbnRJZCwgZ3RhZ1BhcmFtcykge1xyXG4gICAgLy8gSWYgY29uZmlnIGlzIGFscmVhZHkgZmV0Y2hlZCwgd2Uga25vdyB0aGUgYXBwSWQgYW5kIGNhbiB1c2UgaXQgdG8gbG9vayB1cCB3aGF0IEZJRCBwcm9taXNlIHdlXHJcbiAgICAvLy8gYXJlIHdhaXRpbmcgZm9yLCBhbmQgd2FpdCBvbmx5IG9uIHRoYXQgb25lLlxyXG4gICAgY29uc3QgY29ycmVzcG9uZGluZ0FwcElkID0gbWVhc3VyZW1lbnRJZFRvQXBwSWRbbWVhc3VyZW1lbnRJZF07XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGlmIChjb3JyZXNwb25kaW5nQXBwSWQpIHtcclxuICAgICAgICAgICAgYXdhaXQgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFtjb3JyZXNwb25kaW5nQXBwSWRdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSWYgY29uZmlnIGlzIG5vdCBmZXRjaGVkIHlldCwgd2FpdCBmb3IgYWxsIGNvbmZpZ3MgKHdlIGRvbid0IGtub3cgd2hpY2ggb25lIHdlIG5lZWQpIGFuZFxyXG4gICAgICAgICAgICAvLyBmaW5kIHRoZSBhcHBJZCAoaWYgYW55KSBjb3JyZXNwb25kaW5nIHRvIHRoaXMgbWVhc3VyZW1lbnRJZC4gSWYgdGhlcmUgaXMgb25lLCB3YWl0IG9uXHJcbiAgICAgICAgICAgIC8vIHRoYXQgYXBwSWQncyBpbml0aWFsaXphdGlvbiBwcm9taXNlLiBJZiB0aGVyZSBpcyBub25lLCBwcm9taXNlIHJlc29sdmVzIGFuZCBndGFnXHJcbiAgICAgICAgICAgIC8vIGNhbGwgZ29lcyB0aHJvdWdoLlxyXG4gICAgICAgICAgICBjb25zdCBkeW5hbWljQ29uZmlnUmVzdWx0cyA9IGF3YWl0IHByb21pc2VBbGxTZXR0bGVkKGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QpO1xyXG4gICAgICAgICAgICBjb25zdCBmb3VuZENvbmZpZyA9IGR5bmFtaWNDb25maWdSZXN1bHRzLmZpbmQoY29uZmlnID0+IGNvbmZpZy5tZWFzdXJlbWVudElkID09PSBtZWFzdXJlbWVudElkKTtcclxuICAgICAgICAgICAgaWYgKGZvdW5kQ29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2ZvdW5kQ29uZmlnLmFwcElkXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgbG9nZ2VyLmVycm9yKGUpO1xyXG4gICAgfVxyXG4gICAgZ3RhZ0NvcmUoXCJjb25maWdcIiAvKiBHdGFnQ29tbWFuZC5DT05GSUcgKi8sIG1lYXN1cmVtZW50SWQsIGd0YWdQYXJhbXMpO1xyXG59XHJcbi8qKlxyXG4gKiBXcmFwcGVkIGd0YWcgbG9naWMgd2hlbiBndGFnIGlzIGNhbGxlZCB3aXRoICdldmVudCcgY29tbWFuZC5cclxuICpcclxuICogQHBhcmFtIGd0YWdDb3JlIEJhc2ljIGd0YWcgZnVuY3Rpb24gdGhhdCBqdXN0IGFwcGVuZHMgdG8gZGF0YUxheWVyLlxyXG4gKiBAcGFyYW0gaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCBNYXAgb2YgYXBwSWRzIHRvIHRoZWlyIGluaXRpYWxpemF0aW9uIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCBBcnJheSBvZiBkeW5hbWljIGNvbmZpZyBmZXRjaCBwcm9taXNlcy5cclxuICogQHBhcmFtIG1lYXN1cmVtZW50SWQgR0EgTWVhc3VyZW1lbnQgSUQgdG8gbG9nIGV2ZW50IHRvLlxyXG4gKiBAcGFyYW0gZ3RhZ1BhcmFtcyBQYXJhbXMgdG8gbG9nIHdpdGggdGhpcyBldmVudC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGd0YWdPbkV2ZW50KGd0YWdDb3JlLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkLCBndGFnUGFyYW1zKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGxldCBpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yID0gW107XHJcbiAgICAgICAgLy8gSWYgdGhlcmUncyBhICdzZW5kX3RvJyBwYXJhbSwgY2hlY2sgaWYgYW55IElEIHNwZWNpZmllZCBtYXRjaGVzXHJcbiAgICAgICAgLy8gYW4gaW5pdGlhbGl6ZUlkcygpIHByb21pc2Ugd2UgYXJlIHdhaXRpbmcgZm9yLlxyXG4gICAgICAgIGlmIChndGFnUGFyYW1zICYmIGd0YWdQYXJhbXNbJ3NlbmRfdG8nXSkge1xyXG4gICAgICAgICAgICBsZXQgZ2FTZW5kVG9MaXN0ID0gZ3RhZ1BhcmFtc1snc2VuZF90byddO1xyXG4gICAgICAgICAgICAvLyBNYWtlIGl0IGFuIGFycmF5IGlmIGlzIGlzbid0LCBzbyBpdCBjYW4gYmUgZGVhbHQgd2l0aCB0aGUgc2FtZSB3YXkuXHJcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShnYVNlbmRUb0xpc3QpKSB7XHJcbiAgICAgICAgICAgICAgICBnYVNlbmRUb0xpc3QgPSBbZ2FTZW5kVG9MaXN0XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBDaGVja2luZyAnc2VuZF90bycgZmllbGRzIHJlcXVpcmVzIGhhdmluZyBhbGwgbWVhc3VyZW1lbnQgSUQgcmVzdWx0cyBiYWNrIGZyb21cclxuICAgICAgICAgICAgLy8gdGhlIGR5bmFtaWMgY29uZmlnIGZldGNoLlxyXG4gICAgICAgICAgICBjb25zdCBkeW5hbWljQ29uZmlnUmVzdWx0cyA9IGF3YWl0IHByb21pc2VBbGxTZXR0bGVkKGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNlbmRUb0lkIG9mIGdhU2VuZFRvTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQW55IGZldGNoZWQgZHluYW1pYyBtZWFzdXJlbWVudCBJRCB0aGF0IG1hdGNoZXMgdGhpcyAnc2VuZF90bycgSURcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kQ29uZmlnID0gZHluYW1pY0NvbmZpZ1Jlc3VsdHMuZmluZChjb25maWcgPT4gY29uZmlnLm1lYXN1cmVtZW50SWQgPT09IHNlbmRUb0lkKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluaXRpYWxpemF0aW9uUHJvbWlzZSA9IGZvdW5kQ29uZmlnICYmIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbZm91bmRDb25maWcuYXBwSWRdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluaXRpYWxpemF0aW9uUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IucHVzaChpbml0aWFsaXphdGlvblByb21pc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRm91bmQgYW4gaXRlbSBpbiAnc2VuZF90bycgdGhhdCBpcyBub3QgYXNzb2NpYXRlZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRpcmVjdGx5IHdpdGggYW4gRklELCBwb3NzaWJseSBhIGdyb3VwLiAgRW1wdHkgdGhpcyBhcnJheSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBleGl0IHRoZSBsb29wIGVhcmx5LCBhbmQgbGV0IGl0IGdldCBwb3B1bGF0ZWQgYmVsb3cuXHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRoaXMgd2lsbCBiZSB1bnBvcHVsYXRlZCBpZiB0aGVyZSB3YXMgbm8gJ3NlbmRfdG8nIGZpZWxkICwgb3JcclxuICAgICAgICAvLyBpZiBub3QgYWxsIGVudHJpZXMgaW4gdGhlICdzZW5kX3RvJyBmaWVsZCBjb3VsZCBiZSBtYXBwZWQgdG9cclxuICAgICAgICAvLyBhIEZJRC4gSW4gdGhlc2UgY2FzZXMsIHdhaXQgb24gYWxsIHBlbmRpbmcgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMuXHJcbiAgICAgICAgaWYgKGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IgPSBPYmplY3QudmFsdWVzKGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSdW4gY29yZSBndGFnIGZ1bmN0aW9uIHdpdGggYXJncyBhZnRlciBhbGwgcmVsZXZhbnQgaW5pdGlhbGl6YXRpb25cclxuICAgICAgICAvLyBwcm9taXNlcyBoYXZlIGJlZW4gcmVzb2x2ZWQuXHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvcik7XHJcbiAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgaHR0cDovL2IvMTQxMzcwNDQ5IC0gdGhpcmQgYXJndW1lbnQgY2Fubm90IGJlIHVuZGVmaW5lZC5cclxuICAgICAgICBndGFnQ29yZShcImV2ZW50XCIgLyogR3RhZ0NvbW1hbmQuRVZFTlQgKi8sIG1lYXN1cmVtZW50SWQsIGd0YWdQYXJhbXMgfHwge30pO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBsb2dnZXIuZXJyb3IoZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFdyYXBzIGEgc3RhbmRhcmQgZ3RhZyBmdW5jdGlvbiB3aXRoIGV4dHJhIGNvZGUgdG8gd2FpdCBmb3IgY29tcGxldGlvbiBvZlxyXG4gKiByZWxldmFudCBpbml0aWFsaXphdGlvbiBwcm9taXNlcyBiZWZvcmUgc2VuZGluZyByZXF1ZXN0cy5cclxuICpcclxuICogQHBhcmFtIGd0YWdDb3JlIEJhc2ljIGd0YWcgZnVuY3Rpb24gdGhhdCBqdXN0IGFwcGVuZHMgdG8gZGF0YUxheWVyLlxyXG4gKiBAcGFyYW0gaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCBNYXAgb2YgYXBwSWRzIHRvIHRoZWlyIGluaXRpYWxpemF0aW9uIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCBBcnJheSBvZiBkeW5hbWljIGNvbmZpZyBmZXRjaCBwcm9taXNlcy5cclxuICogQHBhcmFtIG1lYXN1cmVtZW50SWRUb0FwcElkIE1hcCBvZiBHQSBtZWFzdXJlbWVudElEcyB0byBjb3JyZXNwb25kaW5nIEZpcmViYXNlIGFwcElkLlxyXG4gKi9cclxuZnVuY3Rpb24gd3JhcEd0YWcoZ3RhZ0NvcmUsIFxyXG4vKipcclxuICogQWxsb3dzIHdyYXBwZWQgZ3RhZyBjYWxscyB0byB3YWl0IG9uIHdoaWNoZXZlciBpbnRpYWxpemF0aW9uIHByb21pc2VzIGFyZSByZXF1aXJlZCxcclxuICogZGVwZW5kaW5nIG9uIHRoZSBjb250ZW50cyBvZiB0aGUgZ3RhZyBwYXJhbXMnIGBzZW5kX3RvYCBmaWVsZCwgaWYgYW55LlxyXG4gKi9cclxuaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCwgXHJcbi8qKlxyXG4gKiBXcmFwcGVkIGd0YWcgY2FsbHMgc29tZXRpbWVzIHJlcXVpcmUgYWxsIGR5bmFtaWMgY29uZmlnIGZldGNoZXMgdG8gaGF2ZSByZXR1cm5lZFxyXG4gKiBiZWZvcmUgZGV0ZXJtaW5pbmcgd2hhdCBpbml0aWFsaXphdGlvbiBwcm9taXNlcyAod2hpY2ggaW5jbHVkZSBGSURzKSB0byB3YWl0IGZvci5cclxuICovXHJcbmR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIFxyXG4vKipcclxuICogV3JhcHBlZCBndGFnIGNvbmZpZyBjYWxscyBjYW4gbmFycm93IGRvd24gd2hpY2ggaW5pdGlhbGl6YXRpb24gcHJvbWlzZSAod2l0aCBGSUQpXHJcbiAqIHRvIHdhaXQgZm9yIGlmIHRoZSBtZWFzdXJlbWVudElkIGlzIGFscmVhZHkgZmV0Y2hlZCwgYnkgZ2V0dGluZyB0aGUgY29ycmVzcG9uZGluZyBhcHBJZCxcclxuICogd2hpY2ggaXMgdGhlIGtleSBmb3IgdGhlIGluaXRpYWxpemF0aW9uIHByb21pc2VzIG1hcC5cclxuICovXHJcbm1lYXN1cmVtZW50SWRUb0FwcElkKSB7XHJcbiAgICAvKipcclxuICAgICAqIFdyYXBwZXIgYXJvdW5kIGd0YWcgdGhhdCBlbnN1cmVzIEZJRCBpcyBzZW50IHdpdGggZ3RhZyBjYWxscy5cclxuICAgICAqIEBwYXJhbSBjb21tYW5kIEd0YWcgY29tbWFuZCB0eXBlLlxyXG4gICAgICogQHBhcmFtIGlkT3JOYW1lT3JQYXJhbXMgTWVhc3VyZW1lbnQgSUQgaWYgY29tbWFuZCBpcyBFVkVOVC9DT05GSUcsIHBhcmFtcyBpZiBjb21tYW5kIGlzIFNFVC5cclxuICAgICAqIEBwYXJhbSBndGFnUGFyYW1zIFBhcmFtcyBpZiBldmVudCBpcyBFVkVOVC9DT05GSUcuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGZ1bmN0aW9uIGd0YWdXcmFwcGVyKGNvbW1hbmQsIC4uLmFyZ3MpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBJZiBldmVudCwgY2hlY2sgdGhhdCByZWxldmFudCBpbml0aWFsaXphdGlvbiBwcm9taXNlcyBoYXZlIGNvbXBsZXRlZC5cclxuICAgICAgICAgICAgaWYgKGNvbW1hbmQgPT09IFwiZXZlbnRcIiAvKiBHdGFnQ29tbWFuZC5FVkVOVCAqLykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW21lYXN1cmVtZW50SWQsIGd0YWdQYXJhbXNdID0gYXJncztcclxuICAgICAgICAgICAgICAgIC8vIElmIEVWRU5ULCBzZWNvbmQgYXJnIG11c3QgYmUgbWVhc3VyZW1lbnRJZC5cclxuICAgICAgICAgICAgICAgIGF3YWl0IGd0YWdPbkV2ZW50KGd0YWdDb3JlLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkLCBndGFnUGFyYW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjb21tYW5kID09PSBcImNvbmZpZ1wiIC8qIEd0YWdDb21tYW5kLkNPTkZJRyAqLykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW21lYXN1cmVtZW50SWQsIGd0YWdQYXJhbXNdID0gYXJncztcclxuICAgICAgICAgICAgICAgIC8vIElmIENPTkZJRywgc2Vjb25kIGFyZyBtdXN0IGJlIG1lYXN1cmVtZW50SWQuXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBndGFnT25Db25maWcoZ3RhZ0NvcmUsIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAsIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIG1lYXN1cmVtZW50SWRUb0FwcElkLCBtZWFzdXJlbWVudElkLCBndGFnUGFyYW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjb21tYW5kID09PSBcImNvbnNlbnRcIiAvKiBHdGFnQ29tbWFuZC5DT05TRU5UICovKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbZ3RhZ1BhcmFtc10gPSBhcmdzO1xyXG4gICAgICAgICAgICAgICAgZ3RhZ0NvcmUoXCJjb25zZW50XCIgLyogR3RhZ0NvbW1hbmQuQ09OU0VOVCAqLywgJ3VwZGF0ZScsIGd0YWdQYXJhbXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbW1hbmQgPT09IFwiZ2V0XCIgLyogR3RhZ0NvbW1hbmQuR0VUICovKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbbWVhc3VyZW1lbnRJZCwgZmllbGROYW1lLCBjYWxsYmFja10gPSBhcmdzO1xyXG4gICAgICAgICAgICAgICAgZ3RhZ0NvcmUoXCJnZXRcIiAvKiBHdGFnQ29tbWFuZC5HRVQgKi8sIG1lYXN1cmVtZW50SWQsIGZpZWxkTmFtZSwgY2FsbGJhY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbW1hbmQgPT09IFwic2V0XCIgLyogR3RhZ0NvbW1hbmQuU0VUICovKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbY3VzdG9tUGFyYW1zXSA9IGFyZ3M7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiBTRVQsIHNlY29uZCBhcmcgbXVzdCBiZSBwYXJhbXMuXHJcbiAgICAgICAgICAgICAgICBndGFnQ29yZShcInNldFwiIC8qIEd0YWdDb21tYW5kLlNFVCAqLywgY3VzdG9tUGFyYW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGd0YWdDb3JlKGNvbW1hbmQsIC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZ3RhZ1dyYXBwZXI7XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgZ2xvYmFsIGd0YWcgZnVuY3Rpb24gb3Igd3JhcHMgZXhpc3Rpbmcgb25lIGlmIGZvdW5kLlxyXG4gKiBUaGlzIHdyYXBwZWQgZnVuY3Rpb24gYXR0YWNoZXMgRmlyZWJhc2UgaW5zdGFuY2UgSUQgKEZJRCkgdG8gZ3RhZyAnY29uZmlnJyBhbmRcclxuICogJ2V2ZW50JyBjYWxscyB0aGF0IGJlbG9uZyB0byB0aGUgR0FJRCBhc3NvY2lhdGVkIHdpdGggdGhpcyBGaXJlYmFzZSBpbnN0YW5jZS5cclxuICpcclxuICogQHBhcmFtIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAgTWFwIG9mIGFwcElkcyB0byB0aGVpciBpbml0aWFsaXphdGlvbiBwcm9taXNlcy5cclxuICogQHBhcmFtIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QgQXJyYXkgb2YgZHluYW1pYyBjb25maWcgZmV0Y2ggcHJvbWlzZXMuXHJcbiAqIEBwYXJhbSBtZWFzdXJlbWVudElkVG9BcHBJZCBNYXAgb2YgR0EgbWVhc3VyZW1lbnRJRHMgdG8gY29ycmVzcG9uZGluZyBGaXJlYmFzZSBhcHBJZC5cclxuICogQHBhcmFtIGRhdGFMYXllck5hbWUgTmFtZSBvZiBnbG9iYWwgR0EgZGF0YWxheWVyIGFycmF5LlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uTmFtZSBOYW1lIG9mIGdsb2JhbCBndGFnIGZ1bmN0aW9uIChcImd0YWdcIiBpZiBub3QgdXNlci1zcGVjaWZpZWQpLlxyXG4gKi9cclxuZnVuY3Rpb24gd3JhcE9yQ3JlYXRlR3RhZyhpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkVG9BcHBJZCwgZGF0YUxheWVyTmFtZSwgZ3RhZ0Z1bmN0aW9uTmFtZSkge1xyXG4gICAgLy8gQ3JlYXRlIGEgYmFzaWMgY29yZSBndGFnIGZ1bmN0aW9uXHJcbiAgICBsZXQgZ3RhZ0NvcmUgPSBmdW5jdGlvbiAoLi4uX2FyZ3MpIHtcclxuICAgICAgICAvLyBNdXN0IHB1c2ggSUFyZ3VtZW50cyBvYmplY3QsIG5vdCBhbiBhcnJheS5cclxuICAgICAgICB3aW5kb3dbZGF0YUxheWVyTmFtZV0ucHVzaChhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuICAgIC8vIFJlcGxhY2UgaXQgd2l0aCBleGlzdGluZyBvbmUgaWYgZm91bmRcclxuICAgIGlmICh3aW5kb3dbZ3RhZ0Z1bmN0aW9uTmFtZV0gJiZcclxuICAgICAgICB0eXBlb2Ygd2luZG93W2d0YWdGdW5jdGlvbk5hbWVdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGd0YWdDb3JlID0gd2luZG93W2d0YWdGdW5jdGlvbk5hbWVdO1xyXG4gICAgfVxyXG4gICAgd2luZG93W2d0YWdGdW5jdGlvbk5hbWVdID0gd3JhcEd0YWcoZ3RhZ0NvcmUsIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAsIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIG1lYXN1cmVtZW50SWRUb0FwcElkKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ3RhZ0NvcmUsXHJcbiAgICAgICAgd3JhcHBlZEd0YWc6IHdpbmRvd1tndGFnRnVuY3Rpb25OYW1lXVxyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyB0aGUgc2NyaXB0IHRhZyBpbiB0aGUgRE9NIG1hdGNoaW5nIGJvdGggdGhlIGd0YWcgdXJsIHBhdHRlcm5cclxuICogYW5kIHRoZSBwcm92aWRlZCBkYXRhIGxheWVyIG5hbWUuXHJcbiAqL1xyXG5mdW5jdGlvbiBmaW5kR3RhZ1NjcmlwdE9uUGFnZShkYXRhTGF5ZXJOYW1lKSB7XHJcbiAgICBjb25zdCBzY3JpcHRUYWdzID0gd2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKTtcclxuICAgIGZvciAoY29uc3QgdGFnIG9mIE9iamVjdC52YWx1ZXMoc2NyaXB0VGFncykpIHtcclxuICAgICAgICBpZiAodGFnLnNyYyAmJlxyXG4gICAgICAgICAgICB0YWcuc3JjLmluY2x1ZGVzKEdUQUdfVVJMKSAmJlxyXG4gICAgICAgICAgICB0YWcuc3JjLmluY2x1ZGVzKGRhdGFMYXllck5hbWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0YWc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEJhY2tvZmYgZmFjdG9yIGZvciA1MDMgZXJyb3JzLCB3aGljaCB3ZSB3YW50IHRvIGJlIGNvbnNlcnZhdGl2ZSBhYm91dFxyXG4gKiB0byBhdm9pZCBvdmVybG9hZGluZyBzZXJ2ZXJzLiBFYWNoIHJldHJ5IGludGVydmFsIHdpbGwgYmVcclxuICogQkFTRV9JTlRFUlZBTF9NSUxMSVMgKiBMT05HX1JFVFJZX0ZBQ1RPUiBeIHJldHJ5Q291bnQsIHNvIHRoZSBzZWNvbmQgb25lXHJcbiAqIHdpbGwgYmUgfjMwIHNlY29uZHMgKHdpdGggZnV6emluZykuXHJcbiAqL1xyXG5jb25zdCBMT05HX1JFVFJZX0ZBQ1RPUiA9IDMwO1xyXG4vKipcclxuICogQmFzZSB3YWl0IGludGVydmFsIHRvIG11bHRpcGxpZWQgYnkgYmFja29mZkZhY3Rvcl5iYWNrb2ZmQ291bnQuXHJcbiAqL1xyXG5jb25zdCBCQVNFX0lOVEVSVkFMX01JTExJUyA9IDEwMDA7XHJcbi8qKlxyXG4gKiBTdHViYmFibGUgcmV0cnkgZGF0YSBzdG9yYWdlIGNsYXNzLlxyXG4gKi9cclxuY2xhc3MgUmV0cnlEYXRhIHtcclxuICAgIGNvbnN0cnVjdG9yKHRocm90dGxlTWV0YWRhdGEgPSB7fSwgaW50ZXJ2YWxNaWxsaXMgPSBCQVNFX0lOVEVSVkFMX01JTExJUykge1xyXG4gICAgICAgIHRoaXMudGhyb3R0bGVNZXRhZGF0YSA9IHRocm90dGxlTWV0YWRhdGE7XHJcbiAgICAgICAgdGhpcy5pbnRlcnZhbE1pbGxpcyA9IGludGVydmFsTWlsbGlzO1xyXG4gICAgfVxyXG4gICAgZ2V0VGhyb3R0bGVNZXRhZGF0YShhcHBJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRocm90dGxlTWV0YWRhdGFbYXBwSWRdO1xyXG4gICAgfVxyXG4gICAgc2V0VGhyb3R0bGVNZXRhZGF0YShhcHBJZCwgbWV0YWRhdGEpIHtcclxuICAgICAgICB0aGlzLnRocm90dGxlTWV0YWRhdGFbYXBwSWRdID0gbWV0YWRhdGE7XHJcbiAgICB9XHJcbiAgICBkZWxldGVUaHJvdHRsZU1ldGFkYXRhKGFwcElkKSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMudGhyb3R0bGVNZXRhZGF0YVthcHBJZF07XHJcbiAgICB9XHJcbn1cclxuY29uc3QgZGVmYXVsdFJldHJ5RGF0YSA9IG5ldyBSZXRyeURhdGEoKTtcclxuLyoqXHJcbiAqIFNldCBHRVQgcmVxdWVzdCBoZWFkZXJzLlxyXG4gKiBAcGFyYW0gYXBpS2V5IEFwcCBBUEkga2V5LlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0SGVhZGVycyhhcGlLZXkpIHtcclxuICAgIHJldHVybiBuZXcgSGVhZGVycyh7XHJcbiAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgJ3gtZ29vZy1hcGkta2V5JzogYXBpS2V5XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogRmV0Y2hlcyBkeW5hbWljIGNvbmZpZyBmcm9tIGJhY2tlbmQuXHJcbiAqIEBwYXJhbSBhcHAgRmlyZWJhc2UgYXBwIHRvIGZldGNoIGNvbmZpZyBmb3IuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBmZXRjaER5bmFtaWNDb25maWcoYXBwRmllbGRzKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCB7IGFwcElkLCBhcGlLZXkgfSA9IGFwcEZpZWxkcztcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICBoZWFkZXJzOiBnZXRIZWFkZXJzKGFwaUtleSlcclxuICAgIH07XHJcbiAgICBjb25zdCBhcHBVcmwgPSBEWU5BTUlDX0NPTkZJR19VUkwucmVwbGFjZSgne2FwcC1pZH0nLCBhcHBJZCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwcFVybCwgcmVxdWVzdCk7XHJcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDAgJiYgcmVzcG9uc2Uuc3RhdHVzICE9PSAzMDQpIHtcclxuICAgICAgICBsZXQgZXJyb3JNZXNzYWdlID0gJyc7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gVHJ5IHRvIGdldCBhbnkgZXJyb3IgbWVzc2FnZSB0ZXh0IGZyb20gc2VydmVyIHJlc3BvbnNlLlxyXG4gICAgICAgICAgICBjb25zdCBqc29uUmVzcG9uc2UgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcclxuICAgICAgICAgICAgaWYgKChfYSA9IGpzb25SZXNwb25zZS5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGpzb25SZXNwb25zZS5lcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfaWdub3JlZCkgeyB9XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJjb25maWctZmV0Y2gtZmFpbGVkXCIgLyogQW5hbHl0aWNzRXJyb3IuQ09ORklHX0ZFVENIX0ZBSUxFRCAqLywge1xyXG4gICAgICAgICAgICBodHRwU3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXHJcbiAgICAgICAgICAgIHJlc3BvbnNlTWVzc2FnZTogZXJyb3JNZXNzYWdlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG59XHJcbi8qKlxyXG4gKiBGZXRjaGVzIGR5bmFtaWMgY29uZmlnIGZyb20gYmFja2VuZCwgcmV0cnlpbmcgaWYgZmFpbGVkLlxyXG4gKiBAcGFyYW0gYXBwIEZpcmViYXNlIGFwcCB0byBmZXRjaCBjb25maWcgZm9yLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hEeW5hbWljQ29uZmlnV2l0aFJldHJ5KGFwcCwgXHJcbi8vIHJldHJ5RGF0YSBhbmQgdGltZW91dE1pbGxpcyBhcmUgcGFyYW1ldGVyaXplZCB0byBhbGxvdyBwYXNzaW5nIGEgZGlmZmVyZW50IHZhbHVlIGZvciB0ZXN0aW5nLlxyXG5yZXRyeURhdGEgPSBkZWZhdWx0UmV0cnlEYXRhLCB0aW1lb3V0TWlsbGlzKSB7XHJcbiAgICBjb25zdCB7IGFwcElkLCBhcGlLZXksIG1lYXN1cmVtZW50SWQgfSA9IGFwcC5vcHRpb25zO1xyXG4gICAgaWYgKCFhcHBJZCkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBwLWlkXCIgLyogQW5hbHl0aWNzRXJyb3IuTk9fQVBQX0lEICovKTtcclxuICAgIH1cclxuICAgIGlmICghYXBpS2V5KSB7XHJcbiAgICAgICAgaWYgKG1lYXN1cmVtZW50SWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIG1lYXN1cmVtZW50SWQsXHJcbiAgICAgICAgICAgICAgICBhcHBJZFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwaS1rZXlcIiAvKiBBbmFseXRpY3NFcnJvci5OT19BUElfS0VZICovKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHRocm90dGxlTWV0YWRhdGEgPSByZXRyeURhdGEuZ2V0VGhyb3R0bGVNZXRhZGF0YShhcHBJZCkgfHwge1xyXG4gICAgICAgIGJhY2tvZmZDb3VudDogMCxcclxuICAgICAgICB0aHJvdHRsZUVuZFRpbWVNaWxsaXM6IERhdGUubm93KClcclxuICAgIH07XHJcbiAgICBjb25zdCBzaWduYWwgPSBuZXcgQW5hbHl0aWNzQWJvcnRTaWduYWwoKTtcclxuICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIC8vIE5vdGUgYSB2ZXJ5IGxvdyBkZWxheSwgZWcgPCAxMG1zLCBjYW4gZWxhcHNlIGJlZm9yZSBsaXN0ZW5lcnMgYXJlIGluaXRpYWxpemVkLlxyXG4gICAgICAgIHNpZ25hbC5hYm9ydCgpO1xyXG4gICAgfSwgdGltZW91dE1pbGxpcyAhPT0gdW5kZWZpbmVkID8gdGltZW91dE1pbGxpcyA6IEZFVENIX1RJTUVPVVRfTUlMTElTKTtcclxuICAgIHJldHVybiBhdHRlbXB0RmV0Y2hEeW5hbWljQ29uZmlnV2l0aFJldHJ5KHsgYXBwSWQsIGFwaUtleSwgbWVhc3VyZW1lbnRJZCB9LCB0aHJvdHRsZU1ldGFkYXRhLCBzaWduYWwsIHJldHJ5RGF0YSk7XHJcbn1cclxuLyoqXHJcbiAqIFJ1bnMgb25lIHJldHJ5IGF0dGVtcHQuXHJcbiAqIEBwYXJhbSBhcHBGaWVsZHMgTmVjZXNzYXJ5IGFwcCBjb25maWcgZmllbGRzLlxyXG4gKiBAcGFyYW0gdGhyb3R0bGVNZXRhZGF0YSBPbmdvaW5nIG1ldGFkYXRhIHRvIGRldGVybWluZSB0aHJvdHRsaW5nIHRpbWVzLlxyXG4gKiBAcGFyYW0gc2lnbmFsIEFib3J0IHNpZ25hbC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGF0dGVtcHRGZXRjaER5bmFtaWNDb25maWdXaXRoUmV0cnkoYXBwRmllbGRzLCB7IHRocm90dGxlRW5kVGltZU1pbGxpcywgYmFja29mZkNvdW50IH0sIHNpZ25hbCwgcmV0cnlEYXRhID0gZGVmYXVsdFJldHJ5RGF0YSAvLyBmb3IgdGVzdGluZ1xyXG4pIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IHsgYXBwSWQsIG1lYXN1cmVtZW50SWQgfSA9IGFwcEZpZWxkcztcclxuICAgIC8vIFN0YXJ0cyB3aXRoIGEgKHBvdGVudGlhbGx5IHplcm8pIHRpbWVvdXQgdG8gc3VwcG9ydCByZXN1bXB0aW9uIGZyb20gc3RvcmVkIHN0YXRlLlxyXG4gICAgLy8gRW5zdXJlcyB0aGUgdGhyb3R0bGUgZW5kIHRpbWUgaXMgaG9ub3JlZCBpZiB0aGUgbGFzdCBhdHRlbXB0IHRpbWVkIG91dC5cclxuICAgIC8vIE5vdGUgdGhlIFNESyB3aWxsIG5ldmVyIG1ha2UgYSByZXF1ZXN0IGlmIHRoZSBmZXRjaCB0aW1lb3V0IGV4cGlyZXMgYXQgdGhpcyBwb2ludC5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgc2V0QWJvcnRhYmxlVGltZW91dChzaWduYWwsIHRocm90dGxlRW5kVGltZU1pbGxpcyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChtZWFzdXJlbWVudElkKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGBUaW1lZCBvdXQgZmV0Y2hpbmcgdGhpcyBGaXJlYmFzZSBhcHAncyBtZWFzdXJlbWVudCBJRCBmcm9tIHRoZSBzZXJ2ZXIuYCArXHJcbiAgICAgICAgICAgICAgICBgIEZhbGxpbmcgYmFjayB0byB0aGUgbWVhc3VyZW1lbnQgSUQgJHttZWFzdXJlbWVudElkfWAgK1xyXG4gICAgICAgICAgICAgICAgYCBwcm92aWRlZCBpbiB0aGUgXCJtZWFzdXJlbWVudElkXCIgZmllbGQgaW4gdGhlIGxvY2FsIEZpcmViYXNlIGNvbmZpZy4gWyR7ZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLm1lc3NhZ2V9XWApO1xyXG4gICAgICAgICAgICByZXR1cm4geyBhcHBJZCwgbWVhc3VyZW1lbnRJZCB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoRHluYW1pY0NvbmZpZyhhcHBGaWVsZHMpO1xyXG4gICAgICAgIC8vIE5vdGUgdGhlIFNESyBvbmx5IGNsZWFycyB0aHJvdHRsZSBzdGF0ZSBpZiByZXNwb25zZSBpcyBzdWNjZXNzIG9yIG5vbi1yZXRyaWFibGUuXHJcbiAgICAgICAgcmV0cnlEYXRhLmRlbGV0ZVRocm90dGxlTWV0YWRhdGEoYXBwSWQpO1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBlO1xyXG4gICAgICAgIGlmICghaXNSZXRyaWFibGVFcnJvcihlcnJvcikpIHtcclxuICAgICAgICAgICAgcmV0cnlEYXRhLmRlbGV0ZVRocm90dGxlTWV0YWRhdGEoYXBwSWQpO1xyXG4gICAgICAgICAgICBpZiAobWVhc3VyZW1lbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oYEZhaWxlZCB0byBmZXRjaCB0aGlzIEZpcmViYXNlIGFwcCdzIG1lYXN1cmVtZW50IElEIGZyb20gdGhlIHNlcnZlci5gICtcclxuICAgICAgICAgICAgICAgICAgICBgIEZhbGxpbmcgYmFjayB0byB0aGUgbWVhc3VyZW1lbnQgSUQgJHttZWFzdXJlbWVudElkfWAgK1xyXG4gICAgICAgICAgICAgICAgICAgIGAgcHJvdmlkZWQgaW4gdGhlIFwibWVhc3VyZW1lbnRJZFwiIGZpZWxkIGluIHRoZSBsb2NhbCBGaXJlYmFzZSBjb25maWcuIFske2Vycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5tZXNzYWdlfV1gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IGFwcElkLCBtZWFzdXJlbWVudElkIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGJhY2tvZmZNaWxsaXMgPSBOdW1iZXIoKF9hID0gZXJyb3IgPT09IG51bGwgfHwgZXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9yLmN1c3RvbURhdGEpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5odHRwU3RhdHVzKSA9PT0gNTAzXHJcbiAgICAgICAgICAgID8gY2FsY3VsYXRlQmFja29mZk1pbGxpcyhiYWNrb2ZmQ291bnQsIHJldHJ5RGF0YS5pbnRlcnZhbE1pbGxpcywgTE9OR19SRVRSWV9GQUNUT1IpXHJcbiAgICAgICAgICAgIDogY2FsY3VsYXRlQmFja29mZk1pbGxpcyhiYWNrb2ZmQ291bnQsIHJldHJ5RGF0YS5pbnRlcnZhbE1pbGxpcyk7XHJcbiAgICAgICAgLy8gSW5jcmVtZW50cyBiYWNrb2ZmIHN0YXRlLlxyXG4gICAgICAgIGNvbnN0IHRocm90dGxlTWV0YWRhdGEgPSB7XHJcbiAgICAgICAgICAgIHRocm90dGxlRW5kVGltZU1pbGxpczogRGF0ZS5ub3coKSArIGJhY2tvZmZNaWxsaXMsXHJcbiAgICAgICAgICAgIGJhY2tvZmZDb3VudDogYmFja29mZkNvdW50ICsgMVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gUGVyc2lzdHMgc3RhdGUuXHJcbiAgICAgICAgcmV0cnlEYXRhLnNldFRocm90dGxlTWV0YWRhdGEoYXBwSWQsIHRocm90dGxlTWV0YWRhdGEpO1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgQ2FsbGluZyBhdHRlbXB0RmV0Y2ggYWdhaW4gaW4gJHtiYWNrb2ZmTWlsbGlzfSBtaWxsaXNgKTtcclxuICAgICAgICByZXR1cm4gYXR0ZW1wdEZldGNoRHluYW1pY0NvbmZpZ1dpdGhSZXRyeShhcHBGaWVsZHMsIHRocm90dGxlTWV0YWRhdGEsIHNpZ25hbCwgcmV0cnlEYXRhKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU3VwcG9ydHMgd2FpdGluZyBvbiBhIGJhY2tvZmYgYnk6XHJcbiAqXHJcbiAqIDx1bD5cclxuICogICA8bGk+UHJvbWlzaWZ5aW5nIHNldFRpbWVvdXQsIHNvIHdlIGNhbiBzZXQgYSB0aW1lb3V0IGluIG91ciBQcm9taXNlIGNoYWluPC9saT5cclxuICogICA8bGk+TGlzdGVuaW5nIG9uIGEgc2lnbmFsIGJ1cyBmb3IgYWJvcnQgZXZlbnRzLCBqdXN0IGxpa2UgdGhlIEZldGNoIEFQSTwvbGk+XHJcbiAqICAgPGxpPkZhaWxpbmcgaW4gdGhlIHNhbWUgd2F5IHRoZSBGZXRjaCBBUEkgZmFpbHMsIHNvIHRpbWluZyBvdXQgYSBsaXZlIHJlcXVlc3QgYW5kIGEgdGhyb3R0bGVkXHJcbiAqICAgICAgIHJlcXVlc3QgYXBwZWFyIHRoZSBzYW1lLjwvbGk+XHJcbiAqIDwvdWw+XHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmcuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRBYm9ydGFibGVUaW1lb3V0KHNpZ25hbCwgdGhyb3R0bGVFbmRUaW1lTWlsbGlzKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIC8vIERlcml2ZXMgYmFja29mZiBmcm9tIGdpdmVuIGVuZCB0aW1lLCBub3JtYWxpemluZyBuZWdhdGl2ZSBudW1iZXJzIHRvIHplcm8uXHJcbiAgICAgICAgY29uc3QgYmFja29mZk1pbGxpcyA9IE1hdGgubWF4KHRocm90dGxlRW5kVGltZU1pbGxpcyAtIERhdGUubm93KCksIDApO1xyXG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KHJlc29sdmUsIGJhY2tvZmZNaWxsaXMpO1xyXG4gICAgICAgIC8vIEFkZHMgbGlzdGVuZXIsIHJhdGhlciB0aGFuIHNldHMgb25hYm9ydCwgYmVjYXVzZSBzaWduYWwgaXMgYSBzaGFyZWQgb2JqZWN0LlxyXG4gICAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCgpID0+IHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBjb21wbGV0ZXMgYmVmb3JlIHRoaXMgdGltZW91dCwgdGhlIHJlamVjdGlvbiBoYXMgbm8gZWZmZWN0LlxyXG4gICAgICAgICAgICByZWplY3QoRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJmZXRjaC10aHJvdHRsZVwiIC8qIEFuYWx5dGljc0Vycm9yLkZFVENIX1RIUk9UVExFICovLCB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdHRsZUVuZFRpbWVNaWxsaXNcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUge0BsaW5rIEVycm9yfSBpbmRpY2F0ZXMgYSBmZXRjaCByZXF1ZXN0IG1heSBzdWNjZWVkIGxhdGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNSZXRyaWFibGVFcnJvcihlKSB7XHJcbiAgICBpZiAoIShlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikgfHwgIWUuY3VzdG9tRGF0YSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8vIFVzZXMgc3RyaW5nIGluZGV4IGRlZmluZWQgYnkgRXJyb3JEYXRhLCB3aGljaCBGaXJlYmFzZUVycm9yIGltcGxlbWVudHMuXHJcbiAgICBjb25zdCBodHRwU3RhdHVzID0gTnVtYmVyKGUuY3VzdG9tRGF0YVsnaHR0cFN0YXR1cyddKTtcclxuICAgIHJldHVybiAoaHR0cFN0YXR1cyA9PT0gNDI5IHx8XHJcbiAgICAgICAgaHR0cFN0YXR1cyA9PT0gNTAwIHx8XHJcbiAgICAgICAgaHR0cFN0YXR1cyA9PT0gNTAzIHx8XHJcbiAgICAgICAgaHR0cFN0YXR1cyA9PT0gNTA0KTtcclxufVxyXG4vKipcclxuICogU2hpbXMgYSBtaW5pbWFsIEFib3J0U2lnbmFsIChjb3BpZWQgZnJvbSBSZW1vdGUgQ29uZmlnKS5cclxuICpcclxuICogPHA+QWJvcnRDb250cm9sbGVyJ3MgQWJvcnRTaWduYWwgY29udmVuaWVudGx5IGRlY291cGxlcyBmZXRjaCB0aW1lb3V0IGxvZ2ljIGZyb20gb3RoZXIgYXNwZWN0c1xyXG4gKiBvZiBuZXR3b3JraW5nLCBzdWNoIGFzIHJldHJpZXMuIEZpcmViYXNlIGRvZXNuJ3QgdXNlIEFib3J0Q29udHJvbGxlciBlbm91Z2ggdG8ganVzdGlmeSBhXHJcbiAqIHBvbHlmaWxsIHJlY29tbWVuZGF0aW9uLCBsaWtlIHdlIGRvIHdpdGggdGhlIEZldGNoIEFQSSwgYnV0IHRoaXMgbWluaW1hbCBzaGltIGNhbiBlYXNpbHkgYmVcclxuICogc3dhcHBlZCBvdXQgaWYvd2hlbiB3ZSBkby5cclxuICovXHJcbmNsYXNzIEFuYWx5dGljc0Fib3J0U2lnbmFsIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gW107XHJcbiAgICB9XHJcbiAgICBhZGRFdmVudExpc3RlbmVyKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XHJcbiAgICB9XHJcbiAgICBhYm9ydCgpIHtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyKCkpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBFdmVudCBwYXJhbWV0ZXJzIHRvIHNldCBvbiAnZ3RhZycgZHVyaW5nIGluaXRpYWxpemF0aW9uLlxyXG4gKi9cclxubGV0IGRlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0O1xyXG4vKipcclxuICogTG9ncyBhbiBhbmFseXRpY3MgZXZlbnQgdGhyb3VnaCB0aGUgRmlyZWJhc2UgU0RLLlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBldmVudE5hbWUgR29vZ2xlIEFuYWx5dGljcyBldmVudCBuYW1lLCBjaG9vc2UgZnJvbSBzdGFuZGFyZCBsaXN0IG9yIHVzZSBhIGN1c3RvbSBzdHJpbmcuXHJcbiAqIEBwYXJhbSBldmVudFBhcmFtcyBBbmFseXRpY3MgZXZlbnQgcGFyYW1ldGVycy5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGxvZ0V2ZW50JDEoZ3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2UsIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2xvYmFsKSB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwiZXZlbnRcIiAvKiBHdGFnQ29tbWFuZC5FVkVOVCAqLywgZXZlbnROYW1lLCBldmVudFBhcmFtcyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBjb25zdCBwYXJhbXMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGV2ZW50UGFyYW1zKSwgeyAnc2VuZF90byc6IG1lYXN1cmVtZW50SWQgfSk7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwiZXZlbnRcIiAvKiBHdGFnQ29tbWFuZC5FVkVOVCAqLywgZXZlbnROYW1lLCBwYXJhbXMpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBTZXQgc2NyZWVuX25hbWUgcGFyYW1ldGVyIGZvciB0aGlzIEdvb2dsZSBBbmFseXRpY3MgSUQuXHJcbiAqXHJcbiAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgbG9nRXZlbnR9IHdpdGggYGV2ZW50TmFtZWAgYXMgJ3NjcmVlbl92aWV3JyBhbmQgYWRkIHJlbGV2YW50IGBldmVudFBhcmFtc2AuXHJcbiAqIFNlZSB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvYW5hbHl0aWNzL3NjcmVlbnZpZXdzIHwgVHJhY2sgU2NyZWVudmlld3N9LlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBzY3JlZW5OYW1lIFNjcmVlbiBuYW1lIHN0cmluZyB0byBzZXQuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZXRDdXJyZW50U2NyZWVuJDEoZ3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2UsIHNjcmVlbk5hbWUsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2xvYmFsKSB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwic2V0XCIgLyogR3RhZ0NvbW1hbmQuU0VUICovLCB7ICdzY3JlZW5fbmFtZSc6IHNjcmVlbk5hbWUgfSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBndGFnRnVuY3Rpb24oXCJjb25maWdcIiAvKiBHdGFnQ29tbWFuZC5DT05GSUcgKi8sIG1lYXN1cmVtZW50SWQsIHtcclxuICAgICAgICAgICAgdXBkYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAnc2NyZWVuX25hbWUnOiBzY3JlZW5OYW1lXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFNldCB1c2VyX2lkIHBhcmFtZXRlciBmb3IgdGhpcyBHb29nbGUgQW5hbHl0aWNzIElELlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBpZCBVc2VyIElEIHN0cmluZyB0byBzZXRcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNldFVzZXJJZCQxKGd0YWdGdW5jdGlvbiwgaW5pdGlhbGl6YXRpb25Qcm9taXNlLCBpZCwgb3B0aW9ucykge1xyXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5nbG9iYWwpIHtcclxuICAgICAgICBndGFnRnVuY3Rpb24oXCJzZXRcIiAvKiBHdGFnQ29tbWFuZC5TRVQgKi8sIHsgJ3VzZXJfaWQnOiBpZCB9KTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBtZWFzdXJlbWVudElkID0gYXdhaXQgaW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgICAgIGd0YWdGdW5jdGlvbihcImNvbmZpZ1wiIC8qIEd0YWdDb21tYW5kLkNPTkZJRyAqLywgbWVhc3VyZW1lbnRJZCwge1xyXG4gICAgICAgICAgICB1cGRhdGU6IHRydWUsXHJcbiAgICAgICAgICAgICd1c2VyX2lkJzogaWRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2V0IGFsbCBvdGhlciB1c2VyIHByb3BlcnRpZXMgb3RoZXIgdGhhbiB1c2VyX2lkIGFuZCBzY3JlZW5fbmFtZS5cclxuICpcclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbiBXcmFwcGVkIGd0YWcgZnVuY3Rpb24gdGhhdCB3YWl0cyBmb3IgZmlkIHRvIGJlIHNldCBiZWZvcmUgc2VuZGluZyBhbiBldmVudFxyXG4gKiBAcGFyYW0gcHJvcGVydGllcyBNYXAgb2YgdXNlciBwcm9wZXJ0aWVzIHRvIHNldFxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2V0VXNlclByb3BlcnRpZXMkMShndGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZSwgcHJvcGVydGllcywgb3B0aW9ucykge1xyXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5nbG9iYWwpIHtcclxuICAgICAgICBjb25zdCBmbGF0UHJvcGVydGllcyA9IHt9O1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHByb3BlcnRpZXMpKSB7XHJcbiAgICAgICAgICAgIC8vIHVzZSBkb3Qgbm90YXRpb24gZm9yIG1lcmdlIGJlaGF2aW9yIGluIGd0YWcuanNcclxuICAgICAgICAgICAgZmxhdFByb3BlcnRpZXNbYHVzZXJfcHJvcGVydGllcy4ke2tleX1gXSA9IHByb3BlcnRpZXNba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwic2V0XCIgLyogR3RhZ0NvbW1hbmQuU0VUICovLCBmbGF0UHJvcGVydGllcyk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBndGFnRnVuY3Rpb24oXCJjb25maWdcIiAvKiBHdGFnQ29tbWFuZC5DT05GSUcgKi8sIG1lYXN1cmVtZW50SWQsIHtcclxuICAgICAgICAgICAgdXBkYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAndXNlcl9wcm9wZXJ0aWVzJzogcHJvcGVydGllc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZXRyaWV2ZXMgYSB1bmlxdWUgR29vZ2xlIEFuYWx5dGljcyBpZGVudGlmaWVyIGZvciB0aGUgd2ViIGNsaWVudC5cclxuICogU2VlIHtAbGluayBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vZ2E0L3JlZmVyZW5jZS9jb25maWcjY2xpZW50X2lkIHwgY2xpZW50X2lkfS5cclxuICpcclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbiBXcmFwcGVkIGd0YWcgZnVuY3Rpb24gdGhhdCB3YWl0cyBmb3IgZmlkIHRvIGJlIHNldCBiZWZvcmUgc2VuZGluZyBhbiBldmVudFxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gaW50ZXJuYWxHZXRHb29nbGVBbmFseXRpY3NDbGllbnRJZChndGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZSkge1xyXG4gICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwiZ2V0XCIgLyogR3RhZ0NvbW1hbmQuR0VUICovLCBtZWFzdXJlbWVudElkLCAnY2xpZW50X2lkJywgKGNsaWVudElkKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghY2xpZW50SWQpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWNsaWVudC1pZFwiIC8qIEFuYWx5dGljc0Vycm9yLk5PX0NMSUVOVF9JRCAqLykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlc29sdmUoY2xpZW50SWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldCB3aGV0aGVyIGNvbGxlY3Rpb24gaXMgZW5hYmxlZCBmb3IgdGhpcyBJRC5cclxuICpcclxuICogQHBhcmFtIGVuYWJsZWQgSWYgdHJ1ZSwgY29sbGVjdGlvbiBpcyBlbmFibGVkIGZvciB0aGlzIElELlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2V0QW5hbHl0aWNzQ29sbGVjdGlvbkVuYWJsZWQkMShpbml0aWFsaXphdGlvblByb21pc2UsIGVuYWJsZWQpIHtcclxuICAgIGNvbnN0IG1lYXN1cmVtZW50SWQgPSBhd2FpdCBpbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICB3aW5kb3dbYGdhLWRpc2FibGUtJHttZWFzdXJlbWVudElkfWBdID0gIWVuYWJsZWQ7XHJcbn1cclxuLyoqXHJcbiAqIENvbnNlbnQgcGFyYW1ldGVycyB0byBkZWZhdWx0IHRvIGR1cmluZyAnZ3RhZycgaW5pdGlhbGl6YXRpb24uXHJcbiAqL1xyXG5sZXQgZGVmYXVsdENvbnNlbnRTZXR0aW5nc0ZvckluaXQ7XHJcbi8qKlxyXG4gKiBTZXRzIHRoZSB2YXJpYWJsZSB7QGxpbmsgZGVmYXVsdENvbnNlbnRTZXR0aW5nc0ZvckluaXR9IGZvciB1c2UgaW4gdGhlIGluaXRpYWxpemF0aW9uIG9mXHJcbiAqIGFuYWx5dGljcy5cclxuICpcclxuICogQHBhcmFtIGNvbnNlbnRTZXR0aW5ncyBNYXBzIHRoZSBhcHBsaWNhYmxlIGVuZCB1c2VyIGNvbnNlbnQgc3RhdGUgZm9yIGd0YWcuanMuXHJcbiAqL1xyXG5mdW5jdGlvbiBfc2V0Q29uc2VudERlZmF1bHRGb3JJbml0KGNvbnNlbnRTZXR0aW5ncykge1xyXG4gICAgZGVmYXVsdENvbnNlbnRTZXR0aW5nc0ZvckluaXQgPSBjb25zZW50U2V0dGluZ3M7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgdGhlIHZhcmlhYmxlIGBkZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdGAgZm9yIHVzZSBpbiB0aGUgaW5pdGlhbGl6YXRpb24gb2ZcclxuICogYW5hbHl0aWNzLlxyXG4gKlxyXG4gKiBAcGFyYW0gY3VzdG9tUGFyYW1zIEFueSBjdXN0b20gcGFyYW1zIHRoZSB1c2VyIG1heSBwYXNzIHRvIGd0YWcuanMuXHJcbiAqL1xyXG5mdW5jdGlvbiBfc2V0RGVmYXVsdEV2ZW50UGFyYW1ldGVyc0ZvckluaXQoY3VzdG9tUGFyYW1zKSB7XHJcbiAgICBkZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdCA9IGN1c3RvbVBhcmFtcztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZUluZGV4ZWREQigpIHtcclxuICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkge1xyXG4gICAgICAgIGxvZ2dlci53YXJuKEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW5kZXhlZGRiLXVuYXZhaWxhYmxlXCIgLyogQW5hbHl0aWNzRXJyb3IuSU5ERVhFRERCX1VOQVZBSUxBQkxFICovLCB7XHJcbiAgICAgICAgICAgIGVycm9ySW5mbzogJ0luZGV4ZWREQiBpcyBub3QgYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQuJ1xyXG4gICAgICAgIH0pLm1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbmRleGVkZGItdW5hdmFpbGFibGVcIiAvKiBBbmFseXRpY3NFcnJvci5JTkRFWEVEREJfVU5BVkFJTEFCTEUgKi8sIHtcclxuICAgICAgICAgICAgICAgIGVycm9ySW5mbzogZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgfSkubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vKipcclxuICogSW5pdGlhbGl6ZSB0aGUgYW5hbHl0aWNzIGluc3RhbmNlIGluIGd0YWcuanMgYnkgY2FsbGluZyBjb25maWcgY29tbWFuZCB3aXRoIGZpZC5cclxuICpcclxuICogTk9URTogV2UgY29tYmluZSBhbmFseXRpY3MgaW5pdGlhbGl6YXRpb24gYW5kIHNldHRpbmcgZmlkIHRvZ2V0aGVyIGJlY2F1c2Ugd2Ugd2FudCBmaWQgdG8gYmVcclxuICogcGFydCBvZiB0aGUgYHBhZ2Vfdmlld2AgZXZlbnQgdGhhdCdzIHNlbnQgZHVyaW5nIHRoZSBpbml0aWFsaXphdGlvblxyXG4gKiBAcGFyYW0gYXBwIEZpcmViYXNlIGFwcFxyXG4gKiBAcGFyYW0gZ3RhZ0NvcmUgVGhlIGd0YWcgZnVuY3Rpb24gdGhhdCdzIG5vdCB3cmFwcGVkLlxyXG4gKiBAcGFyYW0gZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCBBcnJheSBvZiBhbGwgZHluYW1pYyBjb25maWcgcHJvbWlzZXMuXHJcbiAqIEBwYXJhbSBtZWFzdXJlbWVudElkVG9BcHBJZCBNYXBzIG1lYXN1cmVtZW50SUQgdG8gYXBwSUQuXHJcbiAqIEBwYXJhbSBpbnN0YWxsYXRpb25zIF9GaXJlYmFzZUluc3RhbGxhdGlvbnNJbnRlcm5hbCBpbnN0YW5jZS5cclxuICpcclxuICogQHJldHVybnMgTWVhc3VyZW1lbnQgSUQuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfaW5pdGlhbGl6ZUFuYWx5dGljcyhhcHAsIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIG1lYXN1cmVtZW50SWRUb0FwcElkLCBpbnN0YWxsYXRpb25zLCBndGFnQ29yZSwgZGF0YUxheWVyTmFtZSwgb3B0aW9ucykge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgZHluYW1pY0NvbmZpZ1Byb21pc2UgPSBmZXRjaER5bmFtaWNDb25maWdXaXRoUmV0cnkoYXBwKTtcclxuICAgIC8vIE9uY2UgZmV0Y2hlZCwgbWFwIG1lYXN1cmVtZW50SWRzIHRvIGFwcElkLCBmb3IgZWFzZSBvZiBsb29rdXAgaW4gd3JhcHBlZCBndGFnIGZ1bmN0aW9uLlxyXG4gICAgZHluYW1pY0NvbmZpZ1Byb21pc2VcclxuICAgICAgICAudGhlbihjb25maWcgPT4ge1xyXG4gICAgICAgIG1lYXN1cmVtZW50SWRUb0FwcElkW2NvbmZpZy5tZWFzdXJlbWVudElkXSA9IGNvbmZpZy5hcHBJZDtcclxuICAgICAgICBpZiAoYXBwLm9wdGlvbnMubWVhc3VyZW1lbnRJZCAmJlxyXG4gICAgICAgICAgICBjb25maWcubWVhc3VyZW1lbnRJZCAhPT0gYXBwLm9wdGlvbnMubWVhc3VyZW1lbnRJZCkge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihgVGhlIG1lYXN1cmVtZW50IElEIGluIHRoZSBsb2NhbCBGaXJlYmFzZSBjb25maWcgKCR7YXBwLm9wdGlvbnMubWVhc3VyZW1lbnRJZH0pYCArXHJcbiAgICAgICAgICAgICAgICBgIGRvZXMgbm90IG1hdGNoIHRoZSBtZWFzdXJlbWVudCBJRCBmZXRjaGVkIGZyb20gdGhlIHNlcnZlciAoJHtjb25maWcubWVhc3VyZW1lbnRJZH0pLmAgK1xyXG4gICAgICAgICAgICAgICAgYCBUbyBlbnN1cmUgYW5hbHl0aWNzIGV2ZW50cyBhcmUgYWx3YXlzIHNlbnQgdG8gdGhlIGNvcnJlY3QgQW5hbHl0aWNzIHByb3BlcnR5LGAgK1xyXG4gICAgICAgICAgICAgICAgYCB1cGRhdGUgdGhlYCArXHJcbiAgICAgICAgICAgICAgICBgIG1lYXN1cmVtZW50IElEIGZpZWxkIGluIHRoZSBsb2NhbCBjb25maWcgb3IgcmVtb3ZlIGl0IGZyb20gdGhlIGxvY2FsIGNvbmZpZy5gKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlID0+IGxvZ2dlci5lcnJvcihlKSk7XHJcbiAgICAvLyBBZGQgdG8gbGlzdCB0byB0cmFjayBzdGF0ZSBvZiBhbGwgZHluYW1pYyBjb25maWcgcHJvbWlzZXMuXHJcbiAgICBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LnB1c2goZHluYW1pY0NvbmZpZ1Byb21pc2UpO1xyXG4gICAgY29uc3QgZmlkUHJvbWlzZSA9IHZhbGlkYXRlSW5kZXhlZERCKCkudGhlbihlbnZJc1ZhbGlkID0+IHtcclxuICAgICAgICBpZiAoZW52SXNWYWxpZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gaW5zdGFsbGF0aW9ucy5nZXRJZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGNvbnN0IFtkeW5hbWljQ29uZmlnLCBmaWRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgIGR5bmFtaWNDb25maWdQcm9taXNlLFxyXG4gICAgICAgIGZpZFByb21pc2VcclxuICAgIF0pO1xyXG4gICAgLy8gRGV0ZWN0IGlmIHVzZXIgaGFzIGFscmVhZHkgcHV0IHRoZSBndGFnIDxzY3JpcHQ+IHRhZyBvbiB0aGlzIHBhZ2Ugd2l0aCB0aGUgcGFzc2VkIGluXHJcbiAgICAvLyBkYXRhIGxheWVyIG5hbWUuXHJcbiAgICBpZiAoIWZpbmRHdGFnU2NyaXB0T25QYWdlKGRhdGFMYXllck5hbWUpKSB7XHJcbiAgICAgICAgaW5zZXJ0U2NyaXB0VGFnKGRhdGFMYXllck5hbWUsIGR5bmFtaWNDb25maWcubWVhc3VyZW1lbnRJZCk7XHJcbiAgICB9XHJcbiAgICAvLyBEZXRlY3RzIGlmIHRoZXJlIGFyZSBjb25zZW50IHNldHRpbmdzIHRoYXQgbmVlZCB0byBiZSBjb25maWd1cmVkLlxyXG4gICAgaWYgKGRlZmF1bHRDb25zZW50U2V0dGluZ3NGb3JJbml0KSB7XHJcbiAgICAgICAgZ3RhZ0NvcmUoXCJjb25zZW50XCIgLyogR3RhZ0NvbW1hbmQuQ09OU0VOVCAqLywgJ2RlZmF1bHQnLCBkZWZhdWx0Q29uc2VudFNldHRpbmdzRm9ySW5pdCk7XHJcbiAgICAgICAgX3NldENvbnNlbnREZWZhdWx0Rm9ySW5pdCh1bmRlZmluZWQpO1xyXG4gICAgfVxyXG4gICAgLy8gVGhpcyBjb21tYW5kIGluaXRpYWxpemVzIGd0YWcuanMgYW5kIG9ubHkgbmVlZHMgdG8gYmUgY2FsbGVkIG9uY2UgZm9yIHRoZSBlbnRpcmUgd2ViIGFwcCxcclxuICAgIC8vIGJ1dCBzaW5jZSBpdCBpcyBpZGVtcG90ZW50LCB3ZSBjYW4gY2FsbCBpdCBtdWx0aXBsZSB0aW1lcy5cclxuICAgIC8vIFdlIGtlZXAgaXQgdG9nZXRoZXIgd2l0aCBvdGhlciBpbml0aWFsaXphdGlvbiBsb2dpYyBmb3IgYmV0dGVyIGNvZGUgc3RydWN0dXJlLlxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgIGd0YWdDb3JlKCdqcycsIG5ldyBEYXRlKCkpO1xyXG4gICAgLy8gVXNlciBjb25maWcgYWRkZWQgZmlyc3QuIFdlIGRvbid0IHdhbnQgdXNlcnMgdG8gYWNjaWRlbnRhbGx5IG92ZXJ3cml0ZVxyXG4gICAgLy8gYmFzZSBGaXJlYmFzZSBjb25maWcgcHJvcGVydGllcy5cclxuICAgIGNvbnN0IGNvbmZpZ1Byb3BlcnRpZXMgPSAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuY29uZmlnKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fTtcclxuICAgIC8vIGd1YXJkIGFnYWluc3QgZGV2ZWxvcGVycyBhY2NpZGVudGFsbHkgc2V0dGluZyBwcm9wZXJ0aWVzIHdpdGggcHJlZml4IGBmaXJlYmFzZV9gXHJcbiAgICBjb25maWdQcm9wZXJ0aWVzW09SSUdJTl9LRVldID0gJ2ZpcmViYXNlJztcclxuICAgIGNvbmZpZ1Byb3BlcnRpZXMudXBkYXRlID0gdHJ1ZTtcclxuICAgIGlmIChmaWQgIT0gbnVsbCkge1xyXG4gICAgICAgIGNvbmZpZ1Byb3BlcnRpZXNbR0FfRklEX0tFWV0gPSBmaWQ7XHJcbiAgICB9XHJcbiAgICAvLyBJdCBzaG91bGQgYmUgdGhlIGZpcnN0IGNvbmZpZyBjb21tYW5kIGNhbGxlZCBvbiB0aGlzIEdBLUlEXHJcbiAgICAvLyBJbml0aWFsaXplIHRoaXMgR0EtSUQgYW5kIHNldCBGSUQgb24gaXQgdXNpbmcgdGhlIGd0YWcgY29uZmlnIEFQSS5cclxuICAgIC8vIE5vdGU6IFRoaXMgd2lsbCB0cmlnZ2VyIGEgcGFnZV92aWV3IGV2ZW50IHVubGVzcyAnc2VuZF9wYWdlX3ZpZXcnIGlzIHNldCB0byBmYWxzZSBpblxyXG4gICAgLy8gYGNvbmZpZ1Byb3BlcnRpZXNgLlxyXG4gICAgZ3RhZ0NvcmUoXCJjb25maWdcIiAvKiBHdGFnQ29tbWFuZC5DT05GSUcgKi8sIGR5bmFtaWNDb25maWcubWVhc3VyZW1lbnRJZCwgY29uZmlnUHJvcGVydGllcyk7XHJcbiAgICAvLyBEZXRlY3RzIGlmIHRoZXJlIGlzIGRhdGEgdGhhdCB3aWxsIGJlIHNldCBvbiBldmVyeSBldmVudCBsb2dnZWQgZnJvbSB0aGUgU0RLLlxyXG4gICAgaWYgKGRlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0KSB7XHJcbiAgICAgICAgZ3RhZ0NvcmUoXCJzZXRcIiAvKiBHdGFnQ29tbWFuZC5TRVQgKi8sIGRlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0KTtcclxuICAgICAgICBfc2V0RGVmYXVsdEV2ZW50UGFyYW1ldGVyc0ZvckluaXQodW5kZWZpbmVkKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkeW5hbWljQ29uZmlnLm1lYXN1cmVtZW50SWQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFuYWx5dGljcyBTZXJ2aWNlIGNsYXNzLlxyXG4gKi9cclxuY2xhc3MgQW5hbHl0aWNzU2VydmljZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgIH1cclxuICAgIF9kZWxldGUoKSB7XHJcbiAgICAgICAgZGVsZXRlIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbdGhpcy5hcHAub3B0aW9ucy5hcHBJZF07XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBNYXBzIGFwcElkIHRvIGZ1bGwgaW5pdGlhbGl6YXRpb24gcHJvbWlzZS4gV3JhcHBlZCBndGFnIGNhbGxzIG11c3Qgd2FpdCBvblxyXG4gKiBhbGwgb3Igc29tZSBvZiB0aGVzZSwgZGVwZW5kaW5nIG9uIHRoZSBjYWxsJ3MgYHNlbmRfdG9gIHBhcmFtIGFuZCB0aGUgc3RhdHVzXHJcbiAqIG9mIHRoZSBkeW5hbWljIGNvbmZpZyBmZXRjaGVzIChzZWUgYmVsb3cpLlxyXG4gKi9cclxubGV0IGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAgPSB7fTtcclxuLyoqXHJcbiAqIExpc3Qgb2YgZHluYW1pYyBjb25maWcgZmV0Y2ggcHJvbWlzZXMuIEluIGNlcnRhaW4gY2FzZXMsIHdyYXBwZWQgZ3RhZyBjYWxsc1xyXG4gKiB3YWl0IG9uIGFsbCB0aGVzZSB0byBiZSBjb21wbGV0ZSBpbiBvcmRlciB0byBkZXRlcm1pbmUgaWYgaXQgY2FuIHNlbGVjdGl2ZWx5XHJcbiAqIHdhaXQgZm9yIG9ubHkgY2VydGFpbiBpbml0aWFsaXphdGlvbiAoRklEKSBwcm9taXNlcyBvciBpZiBpdCBtdXN0IHdhaXQgZm9yIGFsbC5cclxuICovXHJcbmxldCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0ID0gW107XHJcbi8qKlxyXG4gKiBNYXBzIGZldGNoZWQgbWVhc3VyZW1lbnRJZHMgdG8gYXBwSWQuIFBvcHVsYXRlZCB3aGVuIHRoZSBhcHAncyBkeW5hbWljIGNvbmZpZ1xyXG4gKiBmZXRjaCBjb21wbGV0ZXMuIElmIGFscmVhZHkgcG9wdWxhdGVkLCBndGFnIGNvbmZpZyBjYWxscyBjYW4gdXNlIHRoaXMgdG9cclxuICogc2VsZWN0aXZlbHkgd2FpdCBmb3Igb25seSB0aGlzIGFwcCdzIGluaXRpYWxpemF0aW9uIHByb21pc2UgKEZJRCkgaW5zdGVhZCBvZiBhbGxcclxuICogaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMuXHJcbiAqL1xyXG5jb25zdCBtZWFzdXJlbWVudElkVG9BcHBJZCA9IHt9O1xyXG4vKipcclxuICogTmFtZSBmb3Igd2luZG93IGdsb2JhbCBkYXRhIGxheWVyIGFycmF5IHVzZWQgYnkgR0E6IGRlZmF1bHRzIHRvICdkYXRhTGF5ZXInLlxyXG4gKi9cclxubGV0IGRhdGFMYXllck5hbWUgPSAnZGF0YUxheWVyJztcclxuLyoqXHJcbiAqIE5hbWUgZm9yIHdpbmRvdyBnbG9iYWwgZ3RhZyBmdW5jdGlvbiB1c2VkIGJ5IEdBOiBkZWZhdWx0cyB0byAnZ3RhZycuXHJcbiAqL1xyXG5sZXQgZ3RhZ05hbWUgPSAnZ3RhZyc7XHJcbi8qKlxyXG4gKiBSZXByb2R1Y3Rpb24gb2Ygc3RhbmRhcmQgZ3RhZyBmdW5jdGlvbiBvciByZWZlcmVuY2UgdG8gZXhpc3RpbmdcclxuICogZ3RhZyBmdW5jdGlvbiBvbiB3aW5kb3cgb2JqZWN0LlxyXG4gKi9cclxubGV0IGd0YWdDb3JlRnVuY3Rpb247XHJcbi8qKlxyXG4gKiBXcmFwcGVyIGFyb3VuZCBndGFnIGZ1bmN0aW9uIHRoYXQgZW5zdXJlcyBGSUQgaXMgc2VudCB3aXRoIGFsbFxyXG4gKiByZWxldmFudCBldmVudCBhbmQgY29uZmlnIGNhbGxzLlxyXG4gKi9cclxubGV0IHdyYXBwZWRHdGFnRnVuY3Rpb247XHJcbi8qKlxyXG4gKiBGbGFnIHRvIGVuc3VyZSBwYWdlIGluaXRpYWxpemF0aW9uIHN0ZXBzIChjcmVhdGlvbiBvciB3cmFwcGluZyBvZlxyXG4gKiBkYXRhTGF5ZXIgYW5kIGd0YWcgc2NyaXB0KSBhcmUgb25seSBydW4gb25jZSBwZXIgcGFnZSBsb2FkLlxyXG4gKi9cclxubGV0IGdsb2JhbEluaXREb25lID0gZmFsc2U7XHJcbi8qKlxyXG4gKiBDb25maWd1cmVzIEZpcmViYXNlIEFuYWx5dGljcyB0byB1c2UgY3VzdG9tIGBndGFnYCBvciBgZGF0YUxheWVyYCBuYW1lcy5cclxuICogSW50ZW5kZWQgdG8gYmUgdXNlZCBpZiBgZ3RhZy5qc2Agc2NyaXB0IGhhcyBiZWVuIGluc3RhbGxlZCBvblxyXG4gKiB0aGlzIHBhZ2UgaW5kZXBlbmRlbnRseSBvZiBGaXJlYmFzZSBBbmFseXRpY3MsIGFuZCBpcyB1c2luZyBub24tZGVmYXVsdFxyXG4gKiBuYW1lcyBmb3IgZWl0aGVyIHRoZSBgZ3RhZ2AgZnVuY3Rpb24gb3IgZm9yIGBkYXRhTGF5ZXJgLlxyXG4gKiBNdXN0IGJlIGNhbGxlZCBiZWZvcmUgY2FsbGluZyBgZ2V0QW5hbHl0aWNzKClgIG9yIGl0IHdvbid0XHJcbiAqIGhhdmUgYW55IGVmZmVjdC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKlxyXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEN1c3RvbSBndGFnIGFuZCBkYXRhTGF5ZXIgbmFtZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXR0aW5ncyhvcHRpb25zKSB7XHJcbiAgICBpZiAoZ2xvYmFsSW5pdERvbmUpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBbmFseXRpY3NFcnJvci5BTFJFQURZX0lOSVRJQUxJWkVEICovKTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmRhdGFMYXllck5hbWUpIHtcclxuICAgICAgICBkYXRhTGF5ZXJOYW1lID0gb3B0aW9ucy5kYXRhTGF5ZXJOYW1lO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMuZ3RhZ05hbWUpIHtcclxuICAgICAgICBndGFnTmFtZSA9IG9wdGlvbnMuZ3RhZ05hbWU7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgdHJ1ZSBpZiBubyBlbnZpcm9ubWVudCBtaXNtYXRjaCBpcyBmb3VuZC5cclxuICogSWYgZW52aXJvbm1lbnQgbWlzbWF0Y2hlcyBhcmUgZm91bmQsIHRocm93cyBhbiBJTlZBTElEX0FOQUxZVElDU19DT05URVhUXHJcbiAqIGVycm9yIHRoYXQgYWxzbyBsaXN0cyBkZXRhaWxzIGZvciBlYWNoIG1pc21hdGNoIGZvdW5kLlxyXG4gKi9cclxuZnVuY3Rpb24gd2Fybk9uQnJvd3NlckNvbnRleHRNaXNtYXRjaCgpIHtcclxuICAgIGNvbnN0IG1pc21hdGNoZWRFbnZNZXNzYWdlcyA9IFtdO1xyXG4gICAgaWYgKGlzQnJvd3NlckV4dGVuc2lvbigpKSB7XHJcbiAgICAgICAgbWlzbWF0Y2hlZEVudk1lc3NhZ2VzLnB1c2goJ1RoaXMgaXMgYSBicm93c2VyIGV4dGVuc2lvbiBlbnZpcm9ubWVudC4nKTtcclxuICAgIH1cclxuICAgIGlmICghYXJlQ29va2llc0VuYWJsZWQoKSkge1xyXG4gICAgICAgIG1pc21hdGNoZWRFbnZNZXNzYWdlcy5wdXNoKCdDb29raWVzIGFyZSBub3QgYXZhaWxhYmxlLicpO1xyXG4gICAgfVxyXG4gICAgaWYgKG1pc21hdGNoZWRFbnZNZXNzYWdlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZGV0YWlscyA9IG1pc21hdGNoZWRFbnZNZXNzYWdlc1xyXG4gICAgICAgICAgICAubWFwKChtZXNzYWdlLCBpbmRleCkgPT4gYCgke2luZGV4ICsgMX0pICR7bWVzc2FnZX1gKVxyXG4gICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgICAgIGNvbnN0IGVyciA9IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC1hbmFseXRpY3MtY29udGV4dFwiIC8qIEFuYWx5dGljc0Vycm9yLklOVkFMSURfQU5BTFlUSUNTX0NPTlRFWFQgKi8sIHtcclxuICAgICAgICAgICAgZXJyb3JJbmZvOiBkZXRhaWxzXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbG9nZ2VyLndhcm4oZXJyLm1lc3NhZ2UpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBBbmFseXRpY3MgaW5zdGFuY2UgZmFjdG9yeS5cclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBmYWN0b3J5KGFwcCwgaW5zdGFsbGF0aW9ucywgb3B0aW9ucykge1xyXG4gICAgd2Fybk9uQnJvd3NlckNvbnRleHRNaXNtYXRjaCgpO1xyXG4gICAgY29uc3QgYXBwSWQgPSBhcHAub3B0aW9ucy5hcHBJZDtcclxuICAgIGlmICghYXBwSWQpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwcC1pZFwiIC8qIEFuYWx5dGljc0Vycm9yLk5PX0FQUF9JRCAqLyk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWFwcC5vcHRpb25zLmFwaUtleSkge1xyXG4gICAgICAgIGlmIChhcHAub3B0aW9ucy5tZWFzdXJlbWVudElkKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGBUaGUgXCJhcGlLZXlcIiBmaWVsZCBpcyBlbXB0eSBpbiB0aGUgbG9jYWwgRmlyZWJhc2UgY29uZmlnLiBUaGlzIGlzIG5lZWRlZCB0byBmZXRjaCB0aGUgbGF0ZXN0YCArXHJcbiAgICAgICAgICAgICAgICBgIG1lYXN1cmVtZW50IElEIGZvciB0aGlzIEZpcmViYXNlIGFwcC4gRmFsbGluZyBiYWNrIHRvIHRoZSBtZWFzdXJlbWVudCBJRCAke2FwcC5vcHRpb25zLm1lYXN1cmVtZW50SWR9YCArXHJcbiAgICAgICAgICAgICAgICBgIHByb3ZpZGVkIGluIHRoZSBcIm1lYXN1cmVtZW50SWRcIiBmaWVsZCBpbiB0aGUgbG9jYWwgRmlyZWJhc2UgY29uZmlnLmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcGkta2V5XCIgLyogQW5hbHl0aWNzRXJyb3IuTk9fQVBJX0tFWSAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYXBwSWRdICE9IG51bGwpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFscmVhZHktZXhpc3RzXCIgLyogQW5hbHl0aWNzRXJyb3IuQUxSRUFEWV9FWElTVFMgKi8sIHtcclxuICAgICAgICAgICAgaWQ6IGFwcElkXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWdsb2JhbEluaXREb25lKSB7XHJcbiAgICAgICAgLy8gU3RlcHMgaGVyZSBzaG91bGQgb25seSBiZSBkb25lIG9uY2UgcGVyIHBhZ2U6IGNyZWF0aW9uIG9yIHdyYXBwaW5nXHJcbiAgICAgICAgLy8gb2YgZGF0YUxheWVyIGFuZCBnbG9iYWwgZ3RhZyBmdW5jdGlvbi5cclxuICAgICAgICBnZXRPckNyZWF0ZURhdGFMYXllcihkYXRhTGF5ZXJOYW1lKTtcclxuICAgICAgICBjb25zdCB7IHdyYXBwZWRHdGFnLCBndGFnQ29yZSB9ID0gd3JhcE9yQ3JlYXRlR3RhZyhpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkVG9BcHBJZCwgZGF0YUxheWVyTmFtZSwgZ3RhZ05hbWUpO1xyXG4gICAgICAgIHdyYXBwZWRHdGFnRnVuY3Rpb24gPSB3cmFwcGVkR3RhZztcclxuICAgICAgICBndGFnQ29yZUZ1bmN0aW9uID0gZ3RhZ0NvcmU7XHJcbiAgICAgICAgZ2xvYmFsSW5pdERvbmUgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgLy8gQXN5bmMgYnV0IG5vbi1ibG9ja2luZy5cclxuICAgIC8vIFRoaXMgbWFwIHJlZmxlY3RzIHRoZSBjb21wbGV0aW9uIHN0YXRlIG9mIGFsbCBwcm9taXNlcyBmb3IgZWFjaCBhcHBJZC5cclxuICAgIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYXBwSWRdID0gX2luaXRpYWxpemVBbmFseXRpY3MoYXBwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkVG9BcHBJZCwgaW5zdGFsbGF0aW9ucywgZ3RhZ0NvcmVGdW5jdGlvbiwgZGF0YUxheWVyTmFtZSwgb3B0aW9ucyk7XHJcbiAgICBjb25zdCBhbmFseXRpY3NJbnN0YW5jZSA9IG5ldyBBbmFseXRpY3NTZXJ2aWNlKGFwcCk7XHJcbiAgICByZXR1cm4gYW5hbHl0aWNzSW5zdGFuY2U7XHJcbn1cblxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xyXG4vKipcclxuICogUmV0dXJucyBhbiB7QGxpbmsgQW5hbHl0aWNzfSBpbnN0YW5jZSBmb3IgdGhlIGdpdmVuIGFwcC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSB0byB1c2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBbmFseXRpY3MoYXBwID0gZ2V0QXBwKCkpIHtcclxuICAgIGFwcCA9IGdldE1vZHVsYXJJbnN0YW5jZShhcHApO1xyXG4gICAgLy8gRGVwZW5kZW5jaWVzXHJcbiAgICBjb25zdCBhbmFseXRpY3NQcm92aWRlciA9IF9nZXRQcm92aWRlcihhcHAsIEFOQUxZVElDU19UWVBFKTtcclxuICAgIGlmIChhbmFseXRpY3NQcm92aWRlci5pc0luaXRpYWxpemVkKCkpIHtcclxuICAgICAgICByZXR1cm4gYW5hbHl0aWNzUHJvdmlkZXIuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5pdGlhbGl6ZUFuYWx5dGljcyhhcHApO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIHtAbGluayBBbmFseXRpY3N9IGluc3RhbmNlIGZvciB0aGUgZ2l2ZW4gYXBwLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IHRvIHVzZS5cclxuICovXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVBbmFseXRpY3MoYXBwLCBvcHRpb25zID0ge30pIHtcclxuICAgIC8vIERlcGVuZGVuY2llc1xyXG4gICAgY29uc3QgYW5hbHl0aWNzUHJvdmlkZXIgPSBfZ2V0UHJvdmlkZXIoYXBwLCBBTkFMWVRJQ1NfVFlQRSk7XHJcbiAgICBpZiAoYW5hbHl0aWNzUHJvdmlkZXIuaXNJbml0aWFsaXplZCgpKSB7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbnN0YW5jZSA9IGFuYWx5dGljc1Byb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIGlmIChkZWVwRXF1YWwob3B0aW9ucywgYW5hbHl0aWNzUHJvdmlkZXIuZ2V0T3B0aW9ucygpKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdJbnN0YW5jZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYWxyZWFkeS1pbml0aWFsaXplZFwiIC8qIEFuYWx5dGljc0Vycm9yLkFMUkVBRFlfSU5JVElBTElaRUQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGFuYWx5dGljc0luc3RhbmNlID0gYW5hbHl0aWNzUHJvdmlkZXIuaW5pdGlhbGl6ZSh7IG9wdGlvbnMgfSk7XHJcbiAgICByZXR1cm4gYW5hbHl0aWNzSW5zdGFuY2U7XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgaXMgYSBwdWJsaWMgc3RhdGljIG1ldGhvZCBwcm92aWRlZCB0byB1c2VycyB0aGF0IHdyYXBzIGZvdXIgZGlmZmVyZW50IGNoZWNrczpcclxuICpcclxuICogMS4gQ2hlY2sgaWYgaXQncyBub3QgYSBicm93c2VyIGV4dGVuc2lvbiBlbnZpcm9ubWVudC5cclxuICogMi4gQ2hlY2sgaWYgY29va2llcyBhcmUgZW5hYmxlZCBpbiBjdXJyZW50IGJyb3dzZXIuXHJcbiAqIDMuIENoZWNrIGlmIEluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIgZW52aXJvbm1lbnQuXHJcbiAqIDQuIENoZWNrIGlmIHRoZSBjdXJyZW50IGJyb3dzZXIgY29udGV4dCBpcyB2YWxpZCBmb3IgdXNpbmcgYEluZGV4ZWREQi5vcGVuKClgLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBpc1N1cHBvcnRlZCgpIHtcclxuICAgIGlmIChpc0Jyb3dzZXJFeHRlbnNpb24oKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICghYXJlQ29va2llc0VuYWJsZWQoKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgaXNEQk9wZW5hYmxlID0gYXdhaXQgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpO1xyXG4gICAgICAgIHJldHVybiBpc0RCT3BlbmFibGU7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVzZSBndGFnIGBjb25maWdgIGNvbW1hbmQgdG8gc2V0IGBzY3JlZW5fbmFtZWAuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBsb2dFdmVudH0gd2l0aCBgZXZlbnROYW1lYCBhcyAnc2NyZWVuX3ZpZXcnIGFuZCBhZGQgcmVsZXZhbnQgYGV2ZW50UGFyYW1zYC5cclxuICogU2VlIHtAbGluayBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9hbmFseXRpY3Mvc2NyZWVudmlld3MgfCBUcmFjayBTY3JlZW52aWV3c30uXHJcbiAqXHJcbiAqIEBwYXJhbSBhbmFseXRpY3NJbnN0YW5jZSAtIFRoZSB7QGxpbmsgQW5hbHl0aWNzfSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHNjcmVlbk5hbWUgLSBTY3JlZW4gbmFtZSB0byBzZXQuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRDdXJyZW50U2NyZWVuKGFuYWx5dGljc0luc3RhbmNlLCBzY3JlZW5OYW1lLCBvcHRpb25zKSB7XHJcbiAgICBhbmFseXRpY3NJbnN0YW5jZSA9IGdldE1vZHVsYXJJbnN0YW5jZShhbmFseXRpY3NJbnN0YW5jZSk7XHJcbiAgICBzZXRDdXJyZW50U2NyZWVuJDEod3JhcHBlZEd0YWdGdW5jdGlvbiwgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFthbmFseXRpY3NJbnN0YW5jZS5hcHAub3B0aW9ucy5hcHBJZF0sIHNjcmVlbk5hbWUsIG9wdGlvbnMpLmNhdGNoKGUgPT4gbG9nZ2VyLmVycm9yKGUpKTtcclxufVxyXG4vKipcclxuICogUmV0cmlldmVzIGEgdW5pcXVlIEdvb2dsZSBBbmFseXRpY3MgaWRlbnRpZmllciBmb3IgdGhlIHdlYiBjbGllbnQuXHJcbiAqIFNlZSB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2dhNC9yZWZlcmVuY2UvY29uZmlnI2NsaWVudF9pZCB8IGNsaWVudF9pZH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gdG8gdXNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0R29vZ2xlQW5hbHl0aWNzQ2xpZW50SWQoYW5hbHl0aWNzSW5zdGFuY2UpIHtcclxuICAgIGFuYWx5dGljc0luc3RhbmNlID0gZ2V0TW9kdWxhckluc3RhbmNlKGFuYWx5dGljc0luc3RhbmNlKTtcclxuICAgIHJldHVybiBpbnRlcm5hbEdldEdvb2dsZUFuYWx5dGljc0NsaWVudElkKHdyYXBwZWRHdGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYW5hbHl0aWNzSW5zdGFuY2UuYXBwLm9wdGlvbnMuYXBwSWRdKTtcclxufVxyXG4vKipcclxuICogVXNlIGd0YWcgYGNvbmZpZ2AgY29tbWFuZCB0byBzZXQgYHVzZXJfaWRgLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqIEBwYXJhbSBhbmFseXRpY3NJbnN0YW5jZSAtIFRoZSB7QGxpbmsgQW5hbHl0aWNzfSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGlkIC0gVXNlciBJRCB0byBzZXQuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRVc2VySWQoYW5hbHl0aWNzSW5zdGFuY2UsIGlkLCBvcHRpb25zKSB7XHJcbiAgICBhbmFseXRpY3NJbnN0YW5jZSA9IGdldE1vZHVsYXJJbnN0YW5jZShhbmFseXRpY3NJbnN0YW5jZSk7XHJcbiAgICBzZXRVc2VySWQkMSh3cmFwcGVkR3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2FuYWx5dGljc0luc3RhbmNlLmFwcC5vcHRpb25zLmFwcElkXSwgaWQsIG9wdGlvbnMpLmNhdGNoKGUgPT4gbG9nZ2VyLmVycm9yKGUpKTtcclxufVxyXG4vKipcclxuICogVXNlIGd0YWcgYGNvbmZpZ2AgY29tbWFuZCB0byBzZXQgYWxsIHBhcmFtcyBzcGVjaWZpZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNldFVzZXJQcm9wZXJ0aWVzKGFuYWx5dGljc0luc3RhbmNlLCBwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XHJcbiAgICBhbmFseXRpY3NJbnN0YW5jZSA9IGdldE1vZHVsYXJJbnN0YW5jZShhbmFseXRpY3NJbnN0YW5jZSk7XHJcbiAgICBzZXRVc2VyUHJvcGVydGllcyQxKHdyYXBwZWRHdGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYW5hbHl0aWNzSW5zdGFuY2UuYXBwLm9wdGlvbnMuYXBwSWRdLCBwcm9wZXJ0aWVzLCBvcHRpb25zKS5jYXRjaChlID0+IGxvZ2dlci5lcnJvcihlKSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgd2hldGhlciBHb29nbGUgQW5hbHl0aWNzIGNvbGxlY3Rpb24gaXMgZW5hYmxlZCBmb3IgdGhpcyBhcHAgb24gdGhpcyBkZXZpY2UuXHJcbiAqIFNldHMgZ2xvYmFsIGB3aW5kb3dbJ2dhLWRpc2FibGUtYW5hbHl0aWNzSWQnXSA9IHRydWU7YFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqIEBwYXJhbSBhbmFseXRpY3NJbnN0YW5jZSAtIFRoZSB7QGxpbmsgQW5hbHl0aWNzfSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVuYWJsZWQgLSBJZiB0cnVlLCBlbmFibGVzIGNvbGxlY3Rpb24sIGlmIGZhbHNlLCBkaXNhYmxlcyBpdC5cclxuICovXHJcbmZ1bmN0aW9uIHNldEFuYWx5dGljc0NvbGxlY3Rpb25FbmFibGVkKGFuYWx5dGljc0luc3RhbmNlLCBlbmFibGVkKSB7XHJcbiAgICBhbmFseXRpY3NJbnN0YW5jZSA9IGdldE1vZHVsYXJJbnN0YW5jZShhbmFseXRpY3NJbnN0YW5jZSk7XHJcbiAgICBzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZCQxKGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYW5hbHl0aWNzSW5zdGFuY2UuYXBwLm9wdGlvbnMuYXBwSWRdLCBlbmFibGVkKS5jYXRjaChlID0+IGxvZ2dlci5lcnJvcihlKSk7XHJcbn1cclxuLyoqXHJcbiAqIEFkZHMgZGF0YSB0aGF0IHdpbGwgYmUgc2V0IG9uIGV2ZXJ5IGV2ZW50IGxvZ2dlZCBmcm9tIHRoZSBTREssIGluY2x1ZGluZyBhdXRvbWF0aWMgb25lcy5cclxuICogV2l0aCBndGFnJ3MgXCJzZXRcIiBjb21tYW5kLCB0aGUgdmFsdWVzIHBhc3NlZCBwZXJzaXN0IG9uIHRoZSBjdXJyZW50IHBhZ2UgYW5kIGFyZSBwYXNzZWQgd2l0aFxyXG4gKiBhbGwgc3Vic2VxdWVudCBldmVudHMuXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIGN1c3RvbVBhcmFtcyAtIEFueSBjdXN0b20gcGFyYW1zIHRoZSB1c2VyIG1heSBwYXNzIHRvIGd0YWcuanMuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXREZWZhdWx0RXZlbnRQYXJhbWV0ZXJzKGN1c3RvbVBhcmFtcykge1xyXG4gICAgLy8gQ2hlY2sgaWYgcmVmZXJlbmNlIHRvIGV4aXN0aW5nIGd0YWcgZnVuY3Rpb24gb24gd2luZG93IG9iamVjdCBleGlzdHNcclxuICAgIGlmICh3cmFwcGVkR3RhZ0Z1bmN0aW9uKSB7XHJcbiAgICAgICAgd3JhcHBlZEd0YWdGdW5jdGlvbihcInNldFwiIC8qIEd0YWdDb21tYW5kLlNFVCAqLywgY3VzdG9tUGFyYW1zKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIF9zZXREZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdChjdXN0b21QYXJhbXMpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBTZW5kcyBhIEdvb2dsZSBBbmFseXRpY3MgZXZlbnQgd2l0aCBnaXZlbiBgZXZlbnRQYXJhbXNgLiBUaGlzIG1ldGhvZFxyXG4gKiBhdXRvbWF0aWNhbGx5IGFzc29jaWF0ZXMgdGhpcyBsb2dnZWQgZXZlbnQgd2l0aCB0aGlzIEZpcmViYXNlIHdlYlxyXG4gKiBhcHAgaW5zdGFuY2Ugb24gdGhpcyBkZXZpY2UuXHJcbiAqIExpc3Qgb2Ygb2ZmaWNpYWwgZXZlbnQgcGFyYW1ldGVycyBjYW4gYmUgZm91bmQgaW4gdGhlIGd0YWcuanNcclxuICogcmVmZXJlbmNlIGRvY3VtZW50YXRpb246XHJcbiAqIHtAbGluayBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9ndGFnanMvcmVmZXJlbmNlL2dhNC1ldmVudHNcclxuICogfCB0aGUgR0E0IHJlZmVyZW5jZSBkb2N1bWVudGF0aW9ufS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gbG9nRXZlbnQoYW5hbHl0aWNzSW5zdGFuY2UsIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpIHtcclxuICAgIGFuYWx5dGljc0luc3RhbmNlID0gZ2V0TW9kdWxhckluc3RhbmNlKGFuYWx5dGljc0luc3RhbmNlKTtcclxuICAgIGxvZ0V2ZW50JDEod3JhcHBlZEd0YWdGdW5jdGlvbiwgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFthbmFseXRpY3NJbnN0YW5jZS5hcHAub3B0aW9ucy5hcHBJZF0sIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpLmNhdGNoKGUgPT4gbG9nZ2VyLmVycm9yKGUpKTtcclxufVxyXG4vKipcclxuICogU2V0cyB0aGUgYXBwbGljYWJsZSBlbmQgdXNlciBjb25zZW50IHN0YXRlIGZvciB0aGlzIHdlYiBhcHAgYWNyb3NzIGFsbCBndGFnIHJlZmVyZW5jZXMgb25jZVxyXG4gKiBGaXJlYmFzZSBBbmFseXRpY3MgaXMgaW5pdGlhbGl6ZWQuXHJcbiAqXHJcbiAqIFVzZSB0aGUge0BsaW5rIENvbnNlbnRTZXR0aW5nc30gdG8gc3BlY2lmeSBpbmRpdmlkdWFsIGNvbnNlbnQgdHlwZSB2YWx1ZXMuIEJ5IGRlZmF1bHQgY29uc2VudFxyXG4gKiB0eXBlcyBhcmUgc2V0IHRvIFwiZ3JhbnRlZFwiLlxyXG4gKiBAcHVibGljXHJcbiAqIEBwYXJhbSBjb25zZW50U2V0dGluZ3MgLSBNYXBzIHRoZSBhcHBsaWNhYmxlIGVuZCB1c2VyIGNvbnNlbnQgc3RhdGUgZm9yIGd0YWcuanMuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRDb25zZW50KGNvbnNlbnRTZXR0aW5ncykge1xyXG4gICAgLy8gQ2hlY2sgaWYgcmVmZXJlbmNlIHRvIGV4aXN0aW5nIGd0YWcgZnVuY3Rpb24gb24gd2luZG93IG9iamVjdCBleGlzdHNcclxuICAgIGlmICh3cmFwcGVkR3RhZ0Z1bmN0aW9uKSB7XHJcbiAgICAgICAgd3JhcHBlZEd0YWdGdW5jdGlvbihcImNvbnNlbnRcIiAvKiBHdGFnQ29tbWFuZC5DT05TRU5UICovLCAndXBkYXRlJywgY29uc2VudFNldHRpbmdzKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIF9zZXRDb25zZW50RGVmYXVsdEZvckluaXQoY29uc2VudFNldHRpbmdzKTtcclxuICAgIH1cclxufVxuXG5jb25zdCBuYW1lID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzXCI7XG5jb25zdCB2ZXJzaW9uID0gXCIwLjEwLjFcIjtcblxuLyoqXHJcbiAqIFRoZSBGaXJlYmFzZSBBbmFseXRpY3MgV2ViIFNESy5cclxuICogVGhpcyBTREsgZG9lcyBub3Qgd29yayBpbiBhIE5vZGUuanMgZW52aXJvbm1lbnQuXHJcbiAqXHJcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJBbmFseXRpY3MoKSB7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChBTkFMWVRJQ1NfVFlQRSwgKGNvbnRhaW5lciwgeyBvcHRpb25zOiBhbmFseXRpY3NPcHRpb25zIH0pID0+IHtcclxuICAgICAgICAvLyBnZXRJbW1lZGlhdGUgZm9yIEZpcmViYXNlQXBwIHdpbGwgYWx3YXlzIHN1Y2NlZWRcclxuICAgICAgICBjb25zdCBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IGluc3RhbGxhdGlvbnMgPSBjb250YWluZXJcclxuICAgICAgICAgICAgLmdldFByb3ZpZGVyKCdpbnN0YWxsYXRpb25zLWludGVybmFsJylcclxuICAgICAgICAgICAgLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIHJldHVybiBmYWN0b3J5KGFwcCwgaW5zdGFsbGF0aW9ucywgYW5hbHl0aWNzT3B0aW9ucyk7XHJcbiAgICB9LCBcIlBVQkxJQ1wiIC8qIENvbXBvbmVudFR5cGUuUFVCTElDICovKSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgnYW5hbHl0aWNzLWludGVybmFsJywgaW50ZXJuYWxGYWN0b3J5LCBcIlBSSVZBVEVcIiAvKiBDb21wb25lbnRUeXBlLlBSSVZBVEUgKi8pKTtcclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uKTtcclxuICAgIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ2VzbTIwMTcnKTtcclxuICAgIGZ1bmN0aW9uIGludGVybmFsRmFjdG9yeShjb250YWluZXIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBhbmFseXRpY3MgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoQU5BTFlUSUNTX1RZUEUpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbG9nRXZlbnQ6IChldmVudE5hbWUsIGV2ZW50UGFyYW1zLCBvcHRpb25zKSA9PiBsb2dFdmVudChhbmFseXRpY3MsIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW50ZXJvcC1jb21wb25lbnQtcmVnLWZhaWxlZFwiIC8qIEFuYWx5dGljc0Vycm9yLklOVEVST1BfQ09NUE9ORU5UX1JFR19GQUlMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgIHJlYXNvbjogZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxucmVnaXN0ZXJBbmFseXRpY3MoKTtcblxuZXhwb3J0IHsgZ2V0QW5hbHl0aWNzLCBnZXRHb29nbGVBbmFseXRpY3NDbGllbnRJZCwgaW5pdGlhbGl6ZUFuYWx5dGljcywgaXNTdXBwb3J0ZWQsIGxvZ0V2ZW50LCBzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZCwgc2V0Q29uc2VudCwgc2V0Q3VycmVudFNjcmVlbiwgc2V0RGVmYXVsdEV2ZW50UGFyYW1ldGVycywgc2V0VXNlcklkLCBzZXRVc2VyUHJvcGVydGllcywgc2V0dGluZ3MgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJleHBvcnQgY29uc3QgZmlyZWJhc2VDb25maWcgPSB7XHJcbiAgYXBpS2V5OiBcIkFJemFTeUI4YzJsQlZpMjZ1N1lSTDlzeE9QOTdVYXEzeU44aFRsNFwiLFxyXG4gIGF1dGhEb21haW46IFwiZnRtLWI5ZDk5LmZpcmViYXNlYXBwLmNvbVwiLFxyXG4gIGRhdGFiYXNlVVJMOiBcImh0dHBzOi8vZnRtLWI5ZDk5LmZpcmViYXNlaW8uY29tXCIsXHJcbiAgcHJvamVjdElkOiBcImZ0bS1iOWQ5OVwiLFxyXG4gIHN0b3JhZ2VCdWNrZXQ6IFwiZnRtLWI5ZDk5LmFwcHNwb3QuY29tXCIsXHJcbiAgbWVzc2FnaW5nU2VuZGVySWQ6IFwiNjAyNDAyMzg3OTQxXCIsXHJcbiAgYXBwSWQ6IFwiMTo2MDI0MDIzODc5NDE6d2ViOjNiZGQ1MDJiMGU3Y2U2Nzg5ZGUxMGNcIixcclxuICBtZWFzdXJlbWVudElkOiBcIkctWE5FN1kyNDM5VlwiLFxyXG59O1xyXG4iLCJpbXBvcnQgeyBpbml0aWFsaXplQXBwLCBGaXJlYmFzZUFwcCB9IGZyb20gXCJmaXJlYmFzZS9hcHBcIjtcclxuaW1wb3J0IHsgZ2V0QW5hbHl0aWNzLCBsb2dFdmVudCwgQW5hbHl0aWNzIH0gZnJvbSBcImZpcmViYXNlL2FuYWx5dGljc1wiO1xyXG5pbXBvcnQgeyBmaXJlYmFzZUNvbmZpZyB9IGZyb20gXCIuL2NvbmZpZ1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZpcmViYXNlQW5hbHl0aWNzTWFuYWdlciB7XHJcbiAgcHVibGljIHN0YXRpYyBpbnN0YW5jZTogRmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyO1xyXG4gIHB1YmxpYyBmaXJlYmFzZUFwcDogRmlyZWJhc2VBcHA7XHJcbiAgcHVibGljIGZpcmViYXNlQW5hbHl0aWNzOiBBbmFseXRpY3M7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHRoaXMuZmlyZWJhc2VBcHAgPSBpbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcclxuICAgICAgdGhpcy5maXJlYmFzZUFuYWx5dGljcyA9IGdldEFuYWx5dGljcyh0aGlzLmZpcmViYXNlQXBwKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB3aGlsZSBpbml0aWFsaXppbmcgRmlyZWJhc2U6XCIsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogRmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyIHtcclxuICAgIGlmICghRmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyLmluc3RhbmNlKSB7XHJcbiAgICAgIEZpcmViYXNlQW5hbHl0aWNzTWFuYWdlci5pbnN0YW5jZSA9IG5ldyBGaXJlYmFzZUFuYWx5dGljc01hbmFnZXIoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBGaXJlYmFzZUFuYWx5dGljc01hbmFnZXIuaW5zdGFuY2U7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgbG9nRXZlbnRXaXRoUGF5bG9hZChldmVudE5hbWU6IHN0cmluZywgcGF5bG9hZDogb2JqZWN0KTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZyhgU2VuZGluZyBjdXN0b20gZXZlbnQgJHtldmVudE5hbWV9IHdpdGggZGF0YTpgLCBwYXlsb2FkKTtcclxuICAgICAgbG9nRXZlbnQodGhpcy5maXJlYmFzZUFuYWx5dGljcywgZXZlbnROYW1lLCBwYXlsb2FkKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB3aGlsZSBsb2dnaW5nIGN1c3RvbSBldmVudDpcIiwgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGxvZ1Nlc3Npb25TdGFydFdpdGhQYXlsb2FkKHBheWxvYWQ6IG9iamVjdCk6IHZvaWQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coXCJMb2dnaW5nIHNlc3Npb24gc3RhcnQgd2l0aCBkYXRhOlwiLCBwYXlsb2FkKTtcclxuICAgICAgbG9nRXZlbnQodGhpcy5maXJlYmFzZUFuYWx5dGljcywgXCJzZXNzaW9uX3N0YXJ0XCIsIHBheWxvYWQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHdoaWxlIGxvZ2dpbmcgc2Vzc2lvbiBzdGFydDpcIiwgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGxvZ0Rvd25sb2FkUHJvZ3Jlc3NXaXRoUGF5bG9hZChldmVudE5hbWU6IHN0cmluZywgcGF5bG9hZDogb2JqZWN0KTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIkxvZ2dpbmcgZG93bmxvYWQgcHJvZ3Jlc3MgZm9yIFwiLCBldmVudE5hbWUsIFwiIHdpdGggZGF0YTpcIiwgcGF5bG9hZCk7XHJcbiAgICAgIGxvZ0V2ZW50KHRoaXMuZmlyZWJhc2VBbmFseXRpY3MsIGV2ZW50TmFtZSwgcGF5bG9hZCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igd2hpbGUgbG9nZ2luZyBkb3dubG9hZCBwcm9ncmVzczpcIiwgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCIvLyBUaGUgR2xvYmFsIFByb3BlcnRpZXMgZmlsZSBkZXNjcmliZXMgdGhlIHByb3BlcnRpZXMgdGhhdCBhcmUgc2hhcmVkIGFjcm9zcyBtdWx0aXBsZSBmaWxlcyBpbiB0aGUgcHJvamVjdC5cclxuXHJcbmNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XHJcblxyXG5leHBvcnQgdmFyIGNyVXNlcklkOiBzdHJpbmcgPSB1cmxQYXJhbXMuZ2V0KFwiY3JfdXNlcl9pZFwiKSB8fCBcInVua25vd25cIjtcclxuZXhwb3J0IHZhciBjYW1wYWlnblNvdXJjZTogc3RyaW5nID0gdXJsUGFyYW1zLmdldChcInNvdXJjZVwiKSB8fCBcInVua25vd25cIjtcclxuZXhwb3J0IHZhciBjYW1wYWlnbklkOiBzdHJpbmcgPSB1cmxQYXJhbXMuZ2V0KFwiY2FtcGFpZ25faWRcIikgfHwgXCJ1bmtub3duXCI7XHJcbiIsIi8vIE1haW4gRW50cnkgZm9yIHRoZSBDdXJpb3VzIFJlYWRlciBXZWIgUGxheWVyIEFwcFxyXG5pbXBvcnQgeyBDb250ZW50UGFyc2VyIH0gZnJvbSBcIi4vc3JjL1BhcnNlci9Db250ZW50UGFyc2VyXCI7XHJcbmltcG9ydCB7IFBsYXlCYWNrRW5naW5lIH0gZnJvbSBcIi4vc3JjL1BsYXlCYWNrRW5naW5lL1BsYXlCYWNrRW5naW5lXCI7XHJcbmltcG9ydCB7IFdvcmtib3gsIFdvcmtib3hFdmVudE1hcCB9IGZyb20gXCJ3b3JrYm94LXdpbmRvd1wiO1xyXG5pbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vc3JjL01vZGVscy9Nb2RlbHNcIjtcclxuaW1wb3J0IHsgRmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyIH0gZnJvbSBcIi4vc3JjL0FuYWx5dGljcy9GaXJlYmFzZS9GaXJlYmFzZU1hbmFnZXJcIjtcclxuaW1wb3J0IHsgY2FtcGFpZ25JZCwgY2FtcGFpZ25Tb3VyY2UsIGNyVXNlcklkIH0gZnJvbSBcIi4vc3JjL2NvbW1vblwiO1xyXG5cclxubGV0IGFwcFZlcnNpb246IHN0cmluZyA9IFwidjAuMy43XCI7XHJcbmxldCBhcHBOYW1lOiBzdHJpbmcgPSBcIkNSV2ViUGxheWVyXCI7XHJcblxyXG4vLyBjb25zdCBjaGFubmVsID0gbmV3IEJyb2FkY2FzdENoYW5uZWwoXCJteS1jaGFubmVsXCIpO1xyXG5cclxubGV0IGxvYWRpbmdTY3JlZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvYWRpbmdTY3JlZW5cIik7XHJcblxyXG5sZXQgc2Vzc2lvblN0YXJ0VGltZTogRGF0ZTtcclxubGV0IGxvZ2dlZDI1UGVyY2VudERvd25sb2FkOiBib29sZWFuID0gZmFsc2U7XHJcbmxldCBsb2dnZWQ1MFBlcmNlbnREb3dubG9hZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5sZXQgbG9nZ2VkNzVQZXJjZW50RG93bmxvYWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxubGV0IGxvZ2dlZDEwMFBlcmNlbnREb3dubG9hZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxubGV0IGZpcmViYXNlQW5hbHl0aWNzTWFuYWdlcjogRmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyID0gRmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyLmdldEluc3RhbmNlKCk7XHJcblxyXG5leHBvcnQgY2xhc3MgQXBwIHtcclxuICBwdWJsaWMgYm9va05hbWU6IHN0cmluZztcclxuICBwdWJsaWMgY29udGVudFBhcnNlcjogQ29udGVudFBhcnNlcjtcclxuICBwdWJsaWMgcGxheUJhY2tFbmdpbmU6IFBsYXlCYWNrRW5naW5lO1xyXG4gIHB1YmxpYyBjb250ZW50RmlsZVBhdGg6IHN0cmluZztcclxuICBwdWJsaWMgaW1hZ2VzUGF0aDogc3RyaW5nO1xyXG4gIHB1YmxpYyBhdWRpb1BhdGg6IHN0cmluZztcclxuICBwdWJsaWMgYnJvYWRjYXN0Q2hhbm5lbDogQnJvYWRjYXN0Q2hhbm5lbDtcclxuICBwdWJsaWMgbGFuZzogc3RyaW5nO1xyXG4gIC8vIHB1YmxpYyBmaXJlYmFzZUFuYWx5dGljc01hbmFnZXI6IEZpcmViYXNlQW5hbHl0aWNzTWFuYWdlcjtcclxuXHJcbiAgY29uc3RydWN0b3IoYm9va05hbWU6IHN0cmluZywgY29udGVudEZpbGVQYXRoOiBzdHJpbmcsIGltYWdlc1BhdGg6IHN0cmluZywgYXVkaW9QYXRoOiBzdHJpbmcpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiQ3VyaW91cyBSZWFkZXIgQXBwIFwiICsgYXBwVmVyc2lvbiArIFwiIGluaXRpYWxpemluZyFcIik7XHJcbiAgICB0aGlzLmJvb2tOYW1lID0gYm9va05hbWU7XHJcbiAgICB0aGlzLmNvbnRlbnRGaWxlUGF0aCA9IGNvbnRlbnRGaWxlUGF0aDtcclxuICAgIHRoaXMuaW1hZ2VzUGF0aCA9IGltYWdlc1BhdGg7XHJcbiAgICB0aGlzLmF1ZGlvUGF0aCA9IGF1ZGlvUGF0aDtcclxuICAgIC8vIExlYXZpbmcgdGhpcyBqdXN0IGluIGNhc2Ugd2UgbmVlZCB0byBsb2cgc2Vzc2lvbiBzdGFydFxyXG4gICAgLy8gZmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyLmxvZ1Nlc3Npb25TdGFydFdpdGhQYXlsb2FkKHtcclxuICAgIC8vICAgICBhcHA6IGFwcE5hbWUsXHJcbiAgICAvLyAgICAgdmVyc2lvbjogYXBwVmVyc2lvbixcclxuICAgIC8vICAgICBjcl91c2VyX2lkOiBjclVzZXJJZCxcclxuICAgIC8vICAgICBzb3VyY2U6IGNhbXBhaWduU291cmNlLFxyXG4gICAgLy8gICAgIGNhbXBhaWduSWQ6IGNhbXBhaWduSWQsXHJcbiAgICAvLyAgICAgYm9va19uYW1lOiBib29rTmFtZVxyXG4gICAgLy8gfSk7XHJcbiAgICBzZXNzaW9uU3RhcnRUaW1lID0gbmV3IERhdGUoKTtcclxuICAgIHRoaXMuY29udGVudFBhcnNlciA9IG5ldyBDb250ZW50UGFyc2VyKGNvbnRlbnRGaWxlUGF0aCk7XHJcbiAgICB0aGlzLnBsYXlCYWNrRW5naW5lID0gbmV3IFBsYXlCYWNrRW5naW5lKGltYWdlc1BhdGgsIGF1ZGlvUGF0aCk7XHJcbiAgICB0aGlzLmJyb2FkY2FzdENoYW5uZWwgPSBuZXcgQnJvYWRjYXN0Q2hhbm5lbChcImNyLW1lc3NhZ2UtY2hhbm5lbFwiKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGluaXRpYWxpemUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBMb2FkIGFuZCBwYXJzZSB0aGUgYm9vayBkYXRhXHJcbiAgICAgIGNvbnN0IGJvb2sgPSBhd2FpdCB0aGlzLmNvbnRlbnRQYXJzZXIucGFyc2VCb29rKCk7XHJcbiAgICAgIGJvb2suYm9va05hbWUgPSB0aGlzLmJvb2tOYW1lO1xyXG5cclxuICAgICAgLy8gTG9nIGJvb2sgaW5mb3JtYXRpb24gZm9yIGRlYnVnZ2luZ1xyXG4gICAgICBjb25zb2xlLmxvZyhcIkFwcCBpbml0aWFsaXplZCB3aXRoIGJvb2s6XCIsIGJvb2spO1xyXG5cclxuICAgICAgLy8gRW5mb3JjZSBsYW5kc2NhcGUgbW9kZSAoaWYgc3VwcG9ydGVkKVxyXG4gICAgICB0aGlzLmVuZm9yY2VMYW5kc2NhcGVNb2RlKCk7XHJcblxyXG4gICAgICAvLyBSZWdpc3RlciBhIHNlcnZpY2Ugd29ya2VyIGZvciBjYWNoaW5nXHJcblxyXG4gICAgICBhd2FpdCB0aGlzLnJlZ2lzdGVyU2VydmljZVdvcmtlcihib29rKTtcclxuXHJcbiAgICAgIC8vIEluaXRpYWxpemUgdGhlIHBsYXliYWNrIGVuZ2luZSB3aXRoIHRoZSBwYXJzZWQgYm9vayBkYXRhXHJcbiAgICAgIHRoaXMucGxheUJhY2tFbmdpbmUuaW5pdGlhbGl6ZUJvb2soYm9vayk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhcIkluaXRpYWxpemF0aW9uIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkhXCIpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgLy8gSGFuZGxlIGFueSBlcnJvcnMgdGhhdCBtYXkgb2NjdXIgZHVyaW5nIGluaXRpYWxpemF0aW9uXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJJbml0aWFsaXphdGlvbiBlcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZW5mb3JjZUxhbmRzY2FwZU1vZGUoKSB7XHJcbiAgICAvLyBBdHRlbXB0IHRvIGVuZm9yY2UgbGFuZHNjYXBlIG1vZGUgdGhyb3VnaCBBbmRyb2lkIGJyaWRnZSBjYWxsXHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBpZiAod2luZG93LkFuZHJvaWQgJiYgdHlwZW9mIHdpbmRvdy5BbmRyb2lkLnNldENvbnRhaW5lckFwcE9yaWVudGF0aW9uID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgIHdpbmRvdy5BbmRyb2lkLnNldENvbnRhaW5lckFwcE9yaWVudGF0aW9uKFwibGFuZHNjYXBlXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmVnaXN0ZXJTZXJ2aWNlV29ya2VyKGJvb2s6IEJvb2spIHtcclxuICAgIGlmIChcInNlcnZpY2VXb3JrZXJcIiBpbiBuYXZpZ2F0b3IpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBsZXQgd2IgPSBuZXcgV29ya2JveChcIi9zdy5qc1wiLCB7fSk7XHJcbiAgICAgICAgYXdhaXQgd2IucmVnaXN0ZXIoKTtcclxuICAgICAgICBhd2FpdCBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWFkeTtcclxuICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oYm9vay5ib29rTmFtZSkgPT0gbnVsbCkge1xyXG4gICAgICAgICAgbG9hZGluZ1NjcmVlbiEuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgICAgdGhpcy5icm9hZGNhc3RDaGFubmVsLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgY29tbWFuZDogXCJDYWNoZVwiLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgbGFuZzogdGhpcy5sYW5nLFxyXG4gICAgICAgICAgICAgIGJvb2tEYXRhOiBib29rLFxyXG4gICAgICAgICAgICAgIGNvbnRlbnRGaWxlOiB0aGlzLmNvbnRlbnRGaWxlUGF0aCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBsb2FkaW5nU2NyZWVuIS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmJyb2FkY2FzdENoYW5uZWwub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkNSYXBwOiBNZXNzYWdlIFJlY2VpdmVkIVwiKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGV2ZW50LmRhdGEuY29tbWFuZCk7XHJcbiAgICAgICAgICBpZiAoZXZlbnQuZGF0YS5jb21tYW5kID09IFwiQWN0aXZhdGVkXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RDaGFubmVsLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICBjb21tYW5kOiBcIkNhY2hlXCIsXHJcbiAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgbGFuZzogdGhpcy5sYW5nLFxyXG4gICAgICAgICAgICAgICAgYm9va0RhdGE6IGJvb2ssXHJcbiAgICAgICAgICAgICAgICBjb250ZW50RmlsZTogdGhpcy5jb250ZW50RmlsZVBhdGgsXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoZXZlbnQuZGF0YS5jb21tYW5kID09IFwiQ2FjaGluZ1Byb2dyZXNzXCIpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJDYWNoaW5nIFByb2dyZXNzOiBcIiwgZXZlbnQuZGF0YS5kYXRhLnByb2dyZXNzKTtcclxuICAgICAgICAgICAgbGV0IHByb2dyZXNzVmFsdWUgPSBwYXJzZUludChldmVudC5kYXRhLmRhdGEucHJvZ3Jlc3MpO1xyXG4gICAgICAgICAgICBoYW5kbGVMb2FkaW5nTWVzc2FnZShldmVudCwgcHJvZ3Jlc3NWYWx1ZSk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmRhdGEuY29tbWFuZCA9PSBcIlVwZGF0ZUZvdW5kXCIpIHtcclxuICAgICAgICAgICAgaGFuZGxlVXBkYXRlRm91bmRNZXNzYWdlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yIFJlZ2lzdGVyaW5nIFNlcnZpY2UgV29ya2VyXCIsIGVycm9yKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gVE9ETzogQWRkZWQgdG8gYmFja2xvZyBmb3IgY2xlYW51cCwgd2UgaWRlYWxseSBzaG91bGQgbW92ZSB0aGlzIHRvIGEgc2VwYXJhdGUgZmlsZSxcclxuLy8gYWxsIHRoZSBjYWNoaW5nIGxvZ2ljIHNob3VsZCBiZSBpbiB0aGUgc2VydmljZSB3b3JrZXIgY2xhc3NcclxuLy8gdGhlcmUncyBubyBuZWVkIHRvIGhhdmUgdGhlc2UgZnVuY3Rpb25zIHNlcGFyYXRlbHkgYWRkZWQgaW4gdGhlIEFwcC50cyBhbnltb3JlIHNpbmNlIHdlIGhhdmUgYWRkZWQgdGhlIHNlcnZpY2Ugd29ya2VyXHJcbi8vIGNvbW11bmljYXRpb24gb3ZlciB0aGUgYnJvYWRjYXN0IGNoYW5uZWwgaW5zdGVhZCBvZiB0aGVcclxuLy8gW3NlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgaGFuZGxlU2VydmljZVdvcmtlck1lc3NhZ2UpO11cclxuZnVuY3Rpb24gaGFuZGxlTG9hZGluZ01lc3NhZ2UoZXZlbnQsIHByb2dyZXNzVmFsdWUpOiB2b2lkIHtcclxuICBsZXQgcHJvZ3Jlc3NCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2dyZXNzQmFyXCIpO1xyXG4gIGlmIChwcm9ncmVzc1ZhbHVlIDwgMTAwKSB7XHJcbiAgICBwcm9ncmVzc0JhciEuc3R5bGUud2lkdGggPSBwcm9ncmVzc1ZhbHVlICsgXCIlXCI7XHJcbiAgfVxyXG5cclxuICBpZiAocHJvZ3Jlc3NWYWx1ZSA+PSAyNSAmJiAhbG9nZ2VkMjVQZXJjZW50RG93bmxvYWQpIHtcclxuICAgIGxvZ2dlZDI1UGVyY2VudERvd25sb2FkID0gdHJ1ZTtcclxuICAgIGxvZ0Rvd25sb2FkUHJvZ3Jlc3NXaXRoUGF5bG9hZFRvRmlyZWJhc2UoXCJkb3dubG9hZF8yNVwiLCBldmVudC5kYXRhLmRhdGEuYm9va05hbWUpO1xyXG4gIH1cclxuXHJcbiAgaWYgKHByb2dyZXNzVmFsdWUgPj0gNTAgJiYgIWxvZ2dlZDUwUGVyY2VudERvd25sb2FkKSB7XHJcbiAgICBsb2dnZWQ1MFBlcmNlbnREb3dubG9hZCA9IHRydWU7XHJcbiAgICBsb2dEb3dubG9hZFByb2dyZXNzV2l0aFBheWxvYWRUb0ZpcmViYXNlKFwiZG93bmxvYWRfNTBcIiwgZXZlbnQuZGF0YS5kYXRhLmJvb2tOYW1lKTtcclxuICB9XHJcblxyXG4gIGlmIChwcm9ncmVzc1ZhbHVlID49IDc1ICYmICFsb2dnZWQ3NVBlcmNlbnREb3dubG9hZCkge1xyXG4gICAgbG9nZ2VkNzVQZXJjZW50RG93bmxvYWQgPSB0cnVlO1xyXG4gICAgbG9nRG93bmxvYWRQcm9ncmVzc1dpdGhQYXlsb2FkVG9GaXJlYmFzZShcImRvd25sb2FkXzc1XCIsIGV2ZW50LmRhdGEuZGF0YS5ib29rTmFtZSk7XHJcbiAgfVxyXG5cclxuICBpZiAocHJvZ3Jlc3NWYWx1ZSA+PSAxMDApIHtcclxuICAgIGxvYWRpbmdTY3JlZW4hLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIGlmICghbG9nZ2VkMTAwUGVyY2VudERvd25sb2FkKSB7XHJcbiAgICAgIGxvZ2dlZDEwMFBlcmNlbnREb3dubG9hZCA9IHRydWU7XHJcbiAgICAgIGxvZ0Rvd25sb2FkUHJvZ3Jlc3NXaXRoUGF5bG9hZFRvRmlyZWJhc2UoXCJkb3dubG9hZF9jb21wbGV0ZWRcIiwgZXZlbnQuZGF0YS5kYXRhLmJvb2tOYW1lKTtcclxuICAgIH1cclxuICAgIC8vIGFkZCBib29rIHdpdGggYSBuYW1lIHRvIGxvY2FsIHN0b3JhZ2UgYXMgY2FjaGVkXHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShldmVudC5kYXRhLmRhdGEuYm9va05hbWUsIFwidHJ1ZVwiKTtcclxuICAgIHJlYWRMYW5ndWFnZURhdGFGcm9tQ2FjaGVBbmROb3RpZnlBbmRyb2lkQXBwKGV2ZW50LmRhdGEuZGF0YS5ib29rTmFtZSk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogTG9nIGRvd25sb2FkIHByb2dyZXNzIHdpdGggcGF5bG9hZFxyXG4gKiBAcGFyYW0gZXZlbnROYW1lIE5hbWUgb2YgdGhlIGV2ZW50IHRvIGxvZ1xyXG4gKiBAcGFyYW0gYm9va05hbWUgTmFtZSBvZiB0aGUgYm9vayBiZWluZyBkb3dubG9hZGVkXHJcbiAqL1xyXG5mdW5jdGlvbiBsb2dEb3dubG9hZFByb2dyZXNzV2l0aFBheWxvYWRUb0ZpcmViYXNlKGV2ZW50TmFtZTogc3RyaW5nLCBib29rTmFtZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgbGV0IHRpbWVTcGVudCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc2Vzc2lvblN0YXJ0VGltZS5nZXRUaW1lKCk7XHJcbiAgZmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyLmxvZ0Rvd25sb2FkUHJvZ3Jlc3NXaXRoUGF5bG9hZChldmVudE5hbWUsIHtcclxuICAgIGFwcDogYXBwTmFtZSxcclxuICAgIHZlcnNpb246IGFwcFZlcnNpb24sXHJcbiAgICBib29rX25hbWU6IGJvb2tOYW1lLFxyXG4gICAgY3JfdXNlcl9pZDogY3JVc2VySWQsXHJcbiAgICBtc19zaW5jZV9zZXNzaW9uX3N0YXJ0OiB0aW1lU3BlbnQsXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlYWRMYW5ndWFnZURhdGFGcm9tQ2FjaGVBbmROb3RpZnlBbmRyb2lkQXBwKGJvb2tOYW1lOiBzdHJpbmcpIHtcclxuICAvL0B0cy1pZ25vcmVcclxuICBpZiAod2luZG93LkFuZHJvaWQpIHtcclxuICAgIGxldCBpc0NvbnRlbnRDYWNoZWQ6IGJvb2xlYW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShib29rTmFtZSkgIT09IG51bGw7XHJcbiAgICAvL0B0cy1pZ25vcmVcclxuICAgIHdpbmRvdy5BbmRyb2lkLmNhY2hlZFN0YXR1cyhpc0NvbnRlbnRDYWNoZWQpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlVXBkYXRlRm91bmRNZXNzYWdlKCk6IHZvaWQge1xyXG4gIGxldCB0ZXh0ID0gXCJVcGRhdGUgRm91bmQuXFxuUGxlYXNlIGFjY2VwdCB0aGUgdXBkYXRlIGJ5IHByZXNzaW5nIE9rLlwiO1xyXG4gIGlmIChjb25maXJtKHRleHQpID09IHRydWUpIHtcclxuICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGV4dCA9IFwiVXBkYXRlIHdpbGwgaGFwcGVuIG9uIHRoZSBuZXh0IGxhdW5jaC5cIjtcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IHF1ZXJ5U3RyaW5nID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcclxuY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhxdWVyeVN0cmluZyk7XHJcbmxldCBib29rTmFtZSA9IHVybFBhcmFtcy5nZXQoXCJib29rXCIpO1xyXG5cclxuY29uc3QgZGVmYXVsdEJvb2tOYW1lOiBzdHJpbmcgPSBcIkxldHNGbHlMZXZlbDJFblwiO1xyXG5cclxuaWYgKGJvb2tOYW1lID09IG51bGwpIHtcclxuICBib29rTmFtZSA9IGRlZmF1bHRCb29rTmFtZTtcclxufVxyXG5cclxuY29uc29sZS5sb2coXCJCb29rIE5hbWU6IFwiICsgYm9va05hbWUpO1xyXG5cclxubGV0IGFwcDogQXBwID0gbmV3IEFwcChcclxuICBib29rTmFtZSxcclxuICBgL0Jvb2tDb250ZW50LyR7Ym9va05hbWV9L2NvbnRlbnQvY29udGVudC5qc29uYCxcclxuICBgL0Jvb2tDb250ZW50LyR7Ym9va05hbWV9L2NvbnRlbnQvaW1hZ2VzL2AsXHJcbiAgYC9Cb29rQ29udGVudC8ke2Jvb2tOYW1lfS9jb250ZW50L2F1ZGlvcy9gXHJcbik7XHJcblxyXG5hcHAuaW5pdGlhbGl6ZSgpO1xyXG4iXSwibmFtZXMiOlsiQm9va1R5cGUiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZyIsImdsb2JhbFRoaXMiLCJ0aGlzIiwiRnVuY3Rpb24iLCJlIiwid2luZG93IiwiQ29udGVudFBhcnNlciIsImNvbnN0cnVjdG9yIiwiY29udGVudEZpbGVQYXRoIiwiZW1wdHlHbG93SW1hZ2VUYWciLCJwYXJzZUJvb2siLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInBhcnNlQ29udGVudEpTT05GaWxlIiwidGhlbiIsImNvbnRlbnRKU09OIiwiY29uc29sZSIsImxvZyIsImJvb2siLCJib29rTmFtZSIsInBhZ2VzIiwiYm9va1R5cGUiLCJkZXRlcm1pbmVCb29rVHlwZSIsInBhcnNlUGFnZXMiLCJjYXRjaCIsImVycm9yIiwidW5kZWZpbmVkIiwiQ3VyaW91c1JlYWRlciIsIkdETCIsIlVua25vd24iLCJwYWdlc0pTT04iLCJnbG9iYWxGaWxsQ29sb3IiLCJpIiwibGVuZ3RoIiwicGFnZUpTT04iLCJwYWdlIiwidmlzdWFsRWxlbWVudHMiLCJiYWNrZ3JvdW5kQ29sb3IiLCJwYXJzZVBhZ2VDUiIsInB1c2giLCJwYXJzZVBhZ2VHREwiLCJlbGVtZW50c0pTT04iLCJsaWJyYXJ5U3RyaW5nIiwiaW5jbHVkZXMiLCJ0ZXh0RWxlbWVudCIsInBhcnNlVGV4dEVsZW1lbnRDUiIsImltYWdlRWxlbWVudCIsInBhcnNlSW1hZ2VFbGVtZW50Q1IiLCJhdWRpb0VsZW1lbnQiLCJwYXJzZUF1ZGlvRWxlbWVudENSIiwiZWxlbWVudHNKU09OQXJyYXkiLCJwYXJzZVRleHRFbGVtZW50R0RMIiwicGFyc2VJbWFnZUVsZW1lbnRHREwiLCJlbGVtZW50SlNPTiIsInR5cGUiLCJwb3NpdGlvblgiLCJwb3NpdGlvblkiLCJ3aWR0aCIsImhlaWdodCIsInRleHRDb250ZW50QXNIVE1MIiwiTmFOIiwicGF0aCIsImRvbUlEIiwiaW1hZ2VTb3VyY2UiLCJhdWRpb1RpbWVzdGFtcHMiLCJ0aW1lc3RhbXBzIiwidGltZXN0YW1wc0pTT05BcnJheSIsInRpbWVzdGFtcEluZGV4IiwidGltZXN0YW1wSlNPTiIsInRpbWVzdGFtcCIsInRvU3RyaW5nIiwid29yZCIsInJlcGxhY2UiLCJzdGFydFRpbWVzdGFtcCIsImVuZFRpbWVzdGFtcCIsImF1ZGlvU3JjIiwiZ2xvd0NvbG9yIiwic3R5bGVzIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwicmVzcG9uc2VUeXBlIiwib25sb2FkIiwic3RhdHVzIiwicmVzcG9uc2UiLCJzZW5kIiwiX2RlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsIk1FRElBX1BSRUZFUlNfUkVEVUNFRF9NT1RJT04iLCJlbXB0eSIsImFycmF5Iiwic2xpY2UiLCJhcnJheUxpa2UiLCJzdGFydCIsImVuZCIsIkFycmF5IiwicHJvdG90eXBlIiwiY2FsbCIsImFwcGx5IiwiZnVuYyIsImJpbmQiLCJjb25jYXQiLCJhcmd1bWVudHMiLCJuZXh0VGljayIsInNldFRpbWVvdXQiLCJub29wIiwicmFmIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwidHlwZU9mIiwic3ViamVjdCIsImlzT2JqZWN0IiwiaXNOdWxsIiwiaXNBcnJheSIsImlzRnVuY3Rpb24iLCJpc1N0cmluZyIsImlzVW5kZWZpbmVkIiwiaXNIVE1MRWxlbWVudCIsIm93bmVyRG9jdW1lbnQiLCJkZWZhdWx0VmlldyIsIkhUTUxFbGVtZW50IiwidG9BcnJheSIsInZhbHVlIiwiZm9yRWFjaCIsInZhbHVlcyIsIml0ZXJhdGVlIiwiaW5kZXhPZiIsIml0ZW1zIiwidG9nZ2xlQ2xhc3MiLCJlbG0iLCJjbGFzc2VzIiwiYWRkIiwibmFtZSIsImNsYXNzTGlzdCIsImFkZENsYXNzIiwic3BsaXQiLCJhcHBlbmQiLCJwYXJlbnQiLCJjaGlsZHJlbiIsImFwcGVuZENoaWxkIiwiYmVmb3JlIiwibm9kZXMiLCJyZWYiLCJub2RlIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsIm1hdGNoZXMiLCJzZWxlY3RvciIsImNoaWxkcmVuMiIsImZpbHRlciIsImNoaWxkIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJvd25LZXlzIiwia2V5cyIsImZvck93biIsIm9iamVjdCIsInJpZ2h0IiwicmV2ZXJzZSIsInNvdXJjZSIsIm1lcmdlIiwib21pdCIsInJlbW92ZUF0dHJpYnV0ZSIsImVsbXMiLCJhdHRycyIsImF0dHIiLCJzZXRBdHRyaWJ1dGUiLCJ2YWx1ZTIiLCJTdHJpbmciLCJjcmVhdGUiLCJ0YWciLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsInByb3AiLCJnZXRDb21wdXRlZFN0eWxlIiwiZGlzcGxheSIsImRpc3BsYXkyIiwiZm9jdXMiLCJwcmV2ZW50U2Nyb2xsIiwiZ2V0QXR0cmlidXRlIiwiaGFzQ2xhc3MiLCJjbGFzc05hbWUiLCJjb250YWlucyIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJyZW1vdmUiLCJyZW1vdmVDaGlsZCIsInBhcnNlSHRtbCIsImh0bWwiLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJib2R5IiwicHJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsInByZXZlbnREZWZhdWx0Iiwic3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwicXVlcnkiLCJxdWVyeVNlbGVjdG9yIiwicXVlcnlBbGwiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVtb3ZlQ2xhc3MiLCJ0aW1lT2YiLCJ0aW1lU3RhbXAiLCJ1bml0IiwiUFJPSkVDVF9DT0RFIiwiREFUQV9BVFRSSUJVVEUiLCJhc3NlcnQiLCJjb25kaXRpb24iLCJtZXNzYWdlIiwiRXJyb3IiLCJtaW4iLCJNYXRoIiwibWF4IiwiZmxvb3IiLCJjZWlsIiwiYWJzIiwiYXBwcm94aW1hdGVseUVxdWFsIiwieCIsInkiLCJlcHNpbG9uIiwiYmV0d2VlbiIsIm51bWJlciIsImV4Y2x1c2l2ZSIsIm1pbmltdW0iLCJtYXhpbXVtIiwiY2xhbXAiLCJzaWduIiwiZm9ybWF0Iiwic3RyaW5nIiwicmVwbGFjZW1lbnRzIiwicmVwbGFjZW1lbnQiLCJwYWQiLCJpZHMiLCJFdmVudEJpbmRlciIsImxpc3RlbmVycyIsImZvckVhY2hFdmVudCIsInRhcmdldHMiLCJldmVudHMiLCJldmVudHMyIiwiZXZlbnROUyIsImZyYWdtZW50IiwiY2FsbGJhY2siLCJvcHRpb25zIiwiZXZlbnQiLCJuYW1lc3BhY2UiLCJpc0V2ZW50VGFyZ2V0IiwicmVtb3ZlciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwidW5iaW5kIiwibGlzdGVuZXIiLCJkaXNwYXRjaCIsImRldGFpbCIsImJ1YmJsZXMiLCJDdXN0b21FdmVudCIsImNyZWF0ZUV2ZW50IiwiaW5pdEN1c3RvbUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsImRlc3Ryb3kiLCJkYXRhIiwiRVZFTlRfTU9VTlRFRCIsIkVWRU5UX1JFQURZIiwiRVZFTlRfTU9WRSIsIkVWRU5UX01PVkVEIiwiRVZFTlRfQ0xJQ0siLCJFVkVOVF9SRUZSRVNIIiwiRVZFTlRfVVBEQVRFRCIsIkVWRU5UX1JFU0laRSIsIkVWRU5UX1JFU0laRUQiLCJFVkVOVF9TQ1JPTEwiLCJFVkVOVF9TQ1JPTExFRCIsIkVWRU5UX0RFU1RST1kiLCJFVkVOVF9OQVZJR0FUSU9OX01PVU5URUQiLCJFVkVOVF9BVVRPUExBWV9QTEFZIiwiRVZFTlRfQVVUT1BMQVlfUEFVU0UiLCJFVkVOVF9MQVpZTE9BRF9MT0FERUQiLCJFVkVOVF9FTkRfSU5ERVhfQ0hBTkdFRCIsIkV2ZW50SW50ZXJmYWNlIiwiU3BsaWRlMiIsImJ1cyIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJiaW5kZXIiLCJvbiIsImpvaW4iLCJvZmYiLCJlbWl0IiwiUmVxdWVzdEludGVydmFsIiwiaW50ZXJ2YWwiLCJvbkludGVydmFsIiwib25VcGRhdGUiLCJsaW1pdCIsInN0YXJ0VGltZSIsImlkIiwibm93IiwiRGF0ZSIsInJhdGUiLCJwYXVzZWQiLCJjb3VudCIsInVwZGF0ZSIsInBhdXNlIiwiY2FuY2VsIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJyZXN1bWUiLCJyZXdpbmQiLCJzZXQiLCJ0aW1lIiwiaXNQYXVzZWQiLCJBUlJPVyIsIkFSUk9XX0xFRlQiLCJBUlJPV19SSUdIVCIsIkFSUk9XX1VQIiwiQVJST1dfRE9XTiIsIlRUQiIsIk9SSUVOVEFUSU9OX01BUCIsImxlZnQiLCJYIiwiWSIsIkFycm93TGVmdCIsIkFycm93UmlnaHQiLCJST0xFIiwiVEFCX0lOREVYIiwiQVJJQV9QUkVGSVgiLCJBUklBX0NPTlRST0xTIiwiQVJJQV9DVVJSRU5UIiwiQVJJQV9TRUxFQ1RFRCIsIkFSSUFfTEFCRUwiLCJBUklBX0xBQkVMTEVEQlkiLCJBUklBX0hJRERFTiIsIkFSSUFfT1JJRU5UQVRJT04iLCJBUklBX1JPTEVERVNDUklQVElPTiIsIkFSSUFfTElWRSIsIkFSSUFfQlVTWSIsIkFSSUFfQVRPTUlDIiwiQUxMX0FUVFJJQlVURVMiLCJDTEFTU19QUkVGSVgiLCJTVEFUVVNfQ0xBU1NfUFJFRklYIiwiQ0xBU1NfUk9PVCIsIkNMQVNTX1RSQUNLIiwiQ0xBU1NfTElTVCIsIkNMQVNTX1NMSURFIiwiQ0xBU1NfQ0xPTkUiLCJDTEFTU19DT05UQUlORVIiLCJDTEFTU19BUlJPV1MiLCJDTEFTU19BUlJPVyIsIkNMQVNTX0FSUk9XX1BSRVYiLCJDTEFTU19BUlJPV19ORVhUIiwiQ0xBU1NfUEFHSU5BVElPTiIsIkNMQVNTX1BBR0lOQVRJT05fUEFHRSIsIkNMQVNTX1BST0dSRVNTX0JBUiIsIkNMQVNTX1BST0dSRVNTIiwiQ0xBU1NfVE9HR0xFIiwiQ0xBU1NfU1IiLCJDTEFTU19JTklUSUFMSVpFRCIsIkNMQVNTX0FDVElWRSIsIkNMQVNTX1BSRVYiLCJDTEFTU19ORVhUIiwiQ0xBU1NfVklTSUJMRSIsIkNMQVNTX0xPQURJTkciLCJDTEFTU19GT0NVU19JTiIsIkNMQVNTX09WRVJGTE9XIiwiU1RBVFVTX0NMQVNTRVMiLCJDTEFTU0VTIiwic2xpZGUiLCJjbG9uZSIsImFycm93cyIsImFycm93IiwicHJldiIsIm5leHQiLCJwYWdpbmF0aW9uIiwic3Bpbm5lciIsIlBPSU5URVJfRE9XTl9FVkVOVFMiLCJQT0lOVEVSX01PVkVfRVZFTlRTIiwiUE9JTlRFUl9VUF9FVkVOVFMiLCJTTElERSIsIkxPT1AiLCJGQURFIiwiSU5URVJWQUxfREFUQV9BVFRSSUJVVEUiLCJTQ1JPTExfTElTVEVORVJfT1BUSU9OUyIsInBhc3NpdmUiLCJjYXB0dXJlIiwiTk9STUFMSVpBVElPTl9NQVAiLCJTcGFjZWJhciIsIlJpZ2h0IiwiTGVmdCIsIlVwIiwiRG93biIsIm5vcm1hbGl6ZUtleSIsIktFWUJPQVJEX0VWRU5UIiwiU1JDX0RBVEFfQVRUUklCVVRFIiwiU1JDU0VUX0RBVEFfQVRUUklCVVRFIiwiSU1BR0VfU0VMRUNUT1IiLCJUUklHR0VSX0tFWVMiLCJDb21wb25lbnRDb25zdHJ1Y3RvcnMiLCJmcmVlemUiLCJfX3Byb3RvX18iLCJNZWRpYSIsIkNvbXBvbmVudHMyIiwic3RhdGUiLCJicmVha3BvaW50cyIsInJlZHVjZWRNb3Rpb24iLCJxdWVyaWVzIiwiY29tcGxldGVseSIsInJlZ2lzdGVyIiwib3B0aW9uczIiLCJxdWVyeUxpc3QiLCJtYXRjaE1lZGlhIiwiZGVzdHJveWVkIiwiaXMiLCJkaXJlY3Rpb24iLCJtZXJnZWQiLCJyZWR1Y2UiLCJtZXJnZWQyIiwiZW50cnkiLCJtb3VudCIsInJlZnJlc2giLCJvcHRzIiwiYmFzZSIsIm5vdGlmeSIsImdldFByb3RvdHlwZU9mIiwic2V0dXAiLCJpc01pbiIsIm1lZGlhUXVlcnkiLCJzb3J0IiwibiIsIm0iLCJlbmFibGUiLCJEaXJlY3Rpb24iLCJheGlzT25seSIsImluZGV4IiwibWF0Y2giLCJvZmZzZXQiLCJ0b0xvd2VyQ2FzZSIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwib3JpZW50IiwiRWxlbWVudHMiLCJ0cmFjayIsImxpc3QiLCJpc1VzaW5nS2V5IiwiX0V2ZW50SW50ZXJmYWNlIiwicm9vdCIsImkxOG4iLCJlbGVtZW50cyIsInNsaWRlcyIsInJvb3RDbGFzc2VzIiwidHJhY2tDbGFzc2VzIiwicHJlZml4Iiwicm9sZSIsImZpbmQiLCJiYXIiLCJ0b2dnbGUiLCJ0YWdOYW1lIiwiY2Fyb3VzZWwiLCJnZXRDbGFzc2VzIiwibGFiZWwiLCJsYWJlbGxlZGJ5IiwiZnJvbSIsImNsb3Nlc3QiLCJub2RlVHlwZSIsInBhcmVudEVsZW1lbnQiLCJkcmFnIiwiaXNOYXZpZ2F0aW9uIiwiU2xpZGVzIiwiX0V2ZW50SW50ZXJmYWNlMiIsIl9Db21wb25lbnRzMiRFbGVtZW50cyIsIlNsaWRlczIiLCJpbml0IiwiZm9yRWFjaCQxIiwiU2xpZGUyIiwic2xpZGVJbmRleCIsIkNvbXBvbmVudHMiLCJ1cGRhdGVPbk1vdmUiLCJzbGlkZUZvY3VzIiwiaXNDbG9uZSIsImNvbnRhaW5lciIsImluaXROYXZpZ2F0aW9uIiwiY29udHJvbHMiLCJzcGxpZGVzIiwibWFwIiwic3BsaWRlIiwiZ2V0QXQiLCJzbGlkZVgiLCJvbk1vdmUiLCJjdXJyIiwiYWN0aXZlIiwiaXNBY3RpdmUiLCJzZWxmIiwidmlzaWJsZSIsInRyYWNrUmVjdCIsInNsaWRlUmVjdCIsImlzVmlzaWJsZSIsImhpZGRlbiIsImZvY3VzYWJsZU5vZGVzIiwiYWN0aXZlRWxlbWVudCIsInVwZGF0ZVZpc2liaWxpdHkiLCJjbG9uZVN0YXR1cyIsInNsaWRlTGFiZWwiLCJ1c2VDb250YWluZXIiLCJpc1dpdGhpbiIsImRpc3RhbmNlIiwiZGlmZiIsIlNsaWRlJDEiLCJTbGlkZTEiLCJnZXQiLCJleGNsdWRlQ2xvbmVzIiwibWF0Y2hlciIsImdldEluIiwiQ29udHJvbGxlciIsInRvSW5kZXgiLCJoYXNGb2N1cyIsInBlclBhZ2UiLCJpbWFnZXMiLCJpbWciLCJnZXRMZW5ndGgiLCJpc0Vub3VnaCIsIkxheW91dCIsInZlcnRpY2FsIiwicm9vdFJlY3QiLCJvdmVyZmxvdyIsIl9FdmVudEludGVyZmFjZTMiLCJfQ29tcG9uZW50czIkRWxlbWVudHMyIiwic3R5bGVTbGlkZXMiLCJjc3NQYWRkaW5nIiwicmVzaXplIiwiZm9yY2UiLCJuZXdSZWN0IiwiY3NzSGVpZ2h0IiwiZ2FwIiwiYXV0b1dpZHRoIiwiZml4ZWRXaWR0aCIsImNzc1NsaWRlU2l6ZSIsImZpeGVkSGVpZ2h0IiwiYXV0b0hlaWdodCIsImlzT3ZlcmZsb3ciLCJwYWRkaW5nIiwiaGVpZ2h0UmF0aW8iLCJsaXN0U2l6ZSIsInNsaWRlU2l6ZSIsIndpdGhvdXRHYXAiLCJTbGlkZSIsImdldEdhcCIsInRvdGFsU2l6ZSIsInNsaWRlclNpemUiLCJwYXJzZUZsb2F0IiwiZ2V0UGFkZGluZyIsIkNsb25lcyIsImNsb25lQ291bnQiLCJjbG9uZXMiLCJyZW1vdW50Iiwib2JzZXJ2ZSIsImNvbXB1dGVDbG9uZUNvdW50IiwiaXNIZWFkIiwiY2xvbmVOb2RlIiwiY2xvbmVEZWVwIiwiZ2VuZXJhdGUiLCJjbG9uZXMyIiwiZml4ZWRTaXplIiwiTW92ZSIsIlRyYW5zaXRpb24iLCJfRXZlbnRJbnRlcmZhY2U0IiwiX0NvbXBvbmVudHMyJExheW91dCIsIl9Db21wb25lbnRzMiREaXJlY3RpbyIsIl9Db21wb25lbnRzMiRFbGVtZW50czMiLCJyZXBvc2l0aW9uIiwiaXNCdXN5IiwiU2Nyb2xsIiwianVtcCIsInRyYW5zbGF0ZSIsInRvUG9zaXRpb24iLCJwb3NpdGlvbiIsInByZXZlbnRMb29wIiwiZGVzdGluYXRpb24iLCJleGNlZWRlZE1heCIsImdldEVuZCIsInNoaWZ0IiwibG9vcCIsImJhY2t3YXJkcyIsImV4Y2VzcyIsImdldExpbWl0Iiwic2l6ZSIsImdldFBvc2l0aW9uIiwibWluRGlzdGFuY2UiLCJJbmZpbml0eSIsInRyaW1taW5nIiwidHJpbVNwYWNlIiwidHJpbSIsIm1vdmUiLCJkZXN0Iiwic2hpZnRlZCIsImV4Y2VlZGVkTGltaXQiLCJleGNlZWRlZE1pbiIsImVuZEluZGV4Iiwic2xpZGVDb3VudCIsInBlck1vdmUiLCJfRXZlbnRJbnRlcmZhY2U1IiwiX0NvbXBvbmVudHMyJFNsaWRlcyIsIm9taXRFbmQiLCJpc0xvb3AiLCJpc1NsaWRlIiwiZ2V0TmV4dCIsImdldEFkamFjZW50IiwiZ2V0UHJldiIsImN1cnJJbmRleCIsInByZXZJbmRleCIsIm9uUmVzaXplZCIsImNvbXB1dGVEZXN0SW5kZXgiLCJzbmFwUGFnZSIsImNvbXB1dGVNb3ZhYmxlRGVzdEluZGV4IiwidG9QYWdlIiwic2V0SW5kZXgiLCJ3YWl0Rm9yVHJhbnNpdGlvbiIsImdvIiwiY29udHJvbCIsImFsbG93U2FtZUluZGV4IiwiX3JlZiIsImluZGljYXRvciIsInBhcnNlIiwic2Nyb2xsIiwiZHVyYXRpb24iLCJzbmFwIiwiZ2V0SW5kZXgiLCJ0b0Rlc3QiLCJBcnJvd3MiLCJjcmVhdGVkIiwid3JhcHBlckNsYXNzZXMiLCJwbGFjZWhvbGRlciIsIndyYXBwZXIiLCJlbmFibGVkIiwiY3JlYXRlQXJyb3ciLCJwcmV2MiIsImFycm93UGF0aCIsIm5leHRJbmRleCIsInByZXZMYWJlbCIsImxhc3QiLCJuZXh0TGFiZWwiLCJmaXJzdCIsImRpc2FibGVkIiwiQXV0b3BsYXkiLCJob3ZlcmVkIiwiZm9jdXNlZCIsIl9FdmVudEludGVyZmFjZTYiLCJfQ29tcG9uZW50czIkRWxlbWVudHM0IiwiYXV0b3BsYXkiLCJzdG9wcGVkIiwicGxheSIsInJlc2V0UHJvZ3Jlc3MiLCJzdG9wIiwiYXV0b1RvZ2dsZSIsInBhdXNlT25Ib3ZlciIsInBhdXNlT25Gb2N1cyIsIkNvdmVyIiwiY292ZXIiLCJjb3ZlcjIiLCJzcmMiLCJfRXZlbnRJbnRlcmZhY2U4IiwiZnJpY3Rpb24iLCJvblNjcm9sbGVkIiwibm9Db25zdHJhaW4iLCJjbGVhciIsIm5vRGlzdGFuY2UiLCJvbkVuZCIsInRvIiwidCIsImVhc2luZ0Z1bmMiLCJwb3ciLCJlYXNpbmciLCJEcmFnIiwiYmFzZVBvc2l0aW9uIiwiYmFzZUV2ZW50IiwicHJldkJhc2VFdmVudCIsImlzRnJlZSIsImRyYWdnaW5nIiwiY2xpY2tQcmV2ZW50ZWQiLCJfRXZlbnRJbnRlcmZhY2U5IiwiX0NvbXBvbmVudHMyJERpcmVjdGlvMiIsImV4Y2VlZGVkIiwiZGlzYWJsZSIsIm9uUG9pbnRlckRvd24iLCJpc1RvdWNoIiwiaXNUb3VjaEV2ZW50IiwidGFyZ2V0MiIsIm5vRHJhZyIsImJ1dHRvbiIsIm9uUG9pbnRlck1vdmUiLCJvblBvaW50ZXJVcCIsInNhdmUiLCJjYW5jZWxhYmxlIiwiZGlmZkNvb3JkIiwiZXhwaXJlZCIsImRpZmZUaW1lIiwiaGFzRXhjZWVkZWQiLCJpc1NsaWRlckRpcmVjdGlvbiIsInRocmVzaG9sZHMiLCJkcmFnTWluVGhyZXNob2xkIiwiaXNPYmoiLCJtb3VzZSIsInRvdWNoIiwic2hvdWxkU3RhcnQiLCJ2ZWxvY2l0eSIsImNvbXB1dGVWZWxvY2l0eSIsImZsaWNrUG93ZXIiLCJmbGlja01heFBhZ2VzIiwiY29tcHV0ZURlc3RpbmF0aW9uIiwicmV3aW5kQnlEcmFnIiwib25DbGljayIsIm9ydGhvZ29uYWwiLCJjb29yZE9mIiwiZ2V0QmFzZUV2ZW50IiwiY2hhbmdlZFRvdWNoZXMiLCJUb3VjaEV2ZW50IiwiaXNEcmFnZ2luZyIsIktleWJvYXJkIiwiX0V2ZW50SW50ZXJmYWNlMTAiLCJrZXlib2FyZCIsIm9uS2V5ZG93biIsIl9kaXNhYmxlZCIsIkxhenlMb2FkIiwiX0V2ZW50SW50ZXJmYWNlMTEiLCJpc1NlcXVlbnRpYWwiLCJsYXp5TG9hZCIsImVudHJpZXMiLCJzcmNzZXQiLCJsb2FkTmV4dCIsImNoZWNrIiwicHJlbG9hZFBhZ2VzIiwibG9hZCIsIm9uTG9hZCIsIlBhZ2luYXRpb24iLCJwYWdpbmF0aW9uQ2xhc3NlcyIsImRpciIsImdldERpcmVjdGlvbiIsIm5leHRQYWdlIiwiaXRlbSIsInBhZ2luYXRpb25EaXJlY3Rpb24iLCJfYnV0dG9uIiwic2VsZWN0IiwibGkiLCJjbGFzcyIsInRleHQiLCJwYWdlWCIsInBhZ2luYXRpb25LZXlib2FyZCIsImNyZWF0ZVBhZ2luYXRpb24iLCJTeW5jIiwiaXNQYXJlbnQiLCJzeW5jIiwiV2hlZWwiLCJsYXN0VGltZSIsIm9uV2hlZWwiLCJkZWx0YVkiLCJfbWluIiwid2hlZWxNaW5UaHJlc2hvbGQiLCJzbGVlcCIsIndoZWVsU2xlZXAiLCJyZWxlYXNlV2hlZWwiLCJzaG91bGRQcmV2ZW50Iiwid2hlZWwiLCJMaXZlIiwibGl2ZSIsInNyIiwidGV4dENvbnRlbnQiLCJERUZBVUxUUyIsInNwZWVkIiwicmV3aW5kU3BlZWQiLCJGYWRlIiwiZG9uZSIsImVuZENhbGxiYWNrIiwidHJhbnNpdGlvbiIsImdldFNwZWVkIiwidXNlU2Nyb2xsIiwiX1NwbGlkZSIsInN0YXRlcyIsIl9vIiwiX0UiLCJkZWZhdWx0cyIsIkpTT04iLCJDb25zdHJ1Y3RvciIsInByb3RvUHJvcHMiLCJfcHJvdG8iLCJFeHRlbnNpb25zIiwiX3RoaXMiLCJfQyIsIl9UIiwiQ29tcG9uZW50IiwiY29tcG9uZW50IiwiX3RoaXMkZXZlbnQiLCJTcGxpZGUiLCJTVEFURVMiLCJDUkVBVEVEIiwiTU9VTlRFRCIsIklETEUiLCJNT1ZJTkciLCJTQ1JPTExJTkciLCJEUkFHR0lORyIsIkRFU1RST1lFRCIsIlBsYXlCYWNrRW5naW5lIiwiaW1hZ2VzUGF0aCIsImF1ZGlvUGF0aCIsImN1cnJlbnRseVBsYXlpbmdBdWRpb0VsZW1lbnQiLCJjdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzIiwiY3VycmVudGx5QWN0aXZlV29yZCIsImN1cnJlbnRQYWdlIiwic3BsaWRlSGFuZGxlIiwiaW5uZXJIZWlnaHQiLCJuZXdJbmRleCIsIm9sZEluZGV4IiwiZGVzdEluZGV4IiwidHJhbnNpdGlvbmluZ1RvUGFnZSIsInN0b3BQYWdlQXVkaW8iLCJjdXJyZW50SW5kZXgiLCJwbGF5UGFnZUF1ZGlvIiwiYWRkUGFnZVJlc2l6ZUxpc3RlbmVyIiwiYWRkTWluaW16YXRpb25MaXN0ZW5lciIsInZpc2liaWxpdHlTdGF0ZSIsInZpc3VhbEVsZW1lbnQiLCJhdWRpb0VsZW1lbnREb20iLCJnZXRFbGVtZW50QnlJZCIsImN1cnJlbnRUaW1lIiwiY2xlYXJJbnRlcnZhbCIsImN1cnJlbnRQYWdlQXV0b1BsYXllckludGVydmFsIiwiaiIsIndvcmRFbGVtZW50IiwiY29sb3IiLCJwYWdlSW5kZXgiLCJsYXN0V29yZEluZGV4Iiwic2V0SW50ZXJ2YWwiLCJlbmFibGVDb25uZWN0ZWRHcmFwaGljSGlnaGxpZ2h0aW5nIiwiaW5pdGlhbGl6ZUJvb2siLCJjdXJyZW50Qm9va1R5cGUiLCJudW1iZXJPZlBhZ2VzIiwiaW5pdGlhbGl6ZUN1cmlvdXNSZWFkZXJCb29rIiwiaW5pdGlhbGl6ZUdETEJvb2siLCJzbGlkZUxpIiwianVzdGlmeUNvbnRlbnQiLCJhbGlnbkl0ZW1zIiwidG9wIiwic2VudGVuY2VJbml0aWFsaXplZEJ5QXVkaW8iLCJjcmVhdGVJbWFnZUNvbnRhaW5lciIsImF1ZGlvQW5kVGV4dERpdnMiLCJjcmVhdGVBdWRpb0FuZFRleHRDb250YWluZXJzIiwiY3JlYXRlQXVkaW9Db250YWluZXIiLCJjcmVhdGVUZXh0Q29udGFpbmVyIiwidGV4dEVsZW1lbnREaXYiLCJ3ZWJraXRUZXh0U3Ryb2tlIiwidGV4dFNoYWRvdyIsImZvbnRGYW1pbHkiLCJmb250V2VpZ2h0IiwiZm9udFNpemUiLCJ0ZXh0QWxpZ24iLCJpbm5lckhUTUwiLCJlbGVtZW50SW5kZXgiLCJpbWFnZUVsZW1lbnREaXYiLCJoYW5kbGVTdGFuZGFsb25lR2xvd0ltYWdlQ2xpY2siLCJoYW5kbGVHbG93SW1hZ2VDbGljayIsImltYWdlRWxlbWVudEltZyIsImF1ZGlvRWxlbWVudERpdiIsInBhZ2VBdWRpbyIsIndvcmRUaW1lc3RhbXBFbGVtZW50Iiwid29yZEF1ZGlvRWxlbWVudCIsImF1ZGlvQW5kVGV4dEFycmF5Iiwic2VudGVuY2VBcnJheVRyaW1tZWQiLCJhdWRpb0NvbnRlbnRET01JZCIsInNlbnRlbmNlUGFyYWdyYXBoIiwibWFyZ2luIiwiY2xpY2thYmxlV29yZEVsZW1lbnQiLCJtYXJnaW5MZWZ0IiwibWFyZ2luUmlnaHQiLCJpbm5lclRleHQiLCJldiIsImhhbmRsZUludGVyYWN0aXZlV29yZENsaWNrIiwiY2xlYXJUaW1lb3V0IiwiY3VycmVudFdvcmRQbGF5aW5nVGltZW91dCIsImN1cnJlbnRHbG93SW1hZ2VUaW1lb3V0IiwiYm94U2hhZG93IiwiZ2xvd0RpdiIsIndvcmRJbmRleCIsIndvcmRJbmRleE51bWJlciIsInBhcnNlSW50IiwiZ2xvd0ltYWdlT25seSIsImNvbm5lY3RlZEdsb3dJbWFnZUNsYXNzIiwiY29ubmVjdGVkR2xvd0ltYWdlcyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJmbGV4Q29udGFpbmVyIiwiZmxleERpcmVjdGlvbiIsImdvVG9OZXh0UGFnZSIsInRyYW5zaXRpb25Ub1BhZ2UiLCJnb1RvUHJldmlvdXNQYWdlIiwicGFnZU51bWJlciIsIl8iLCJyIiwiTWVzc2FnZUNoYW5uZWwiLCJwb3J0MSIsIm9ubWVzc2FnZSIsInBvc3RNZXNzYWdlIiwicG9ydDIiLCJTeW1ib2wiLCJpdGVyYXRvciIsInRlc3QiLCJUeXBlRXJyb3IiLCJwcm9taXNlIiwibyIsImxvY2F0aW9uIiwiaHJlZiIsIlVSTCIsInUiLCJhc3NpZ24iLCJhIiwiYyIsImYiLCJzIiwidiIsIm5uIiwidG4iLCJybiIsImVuIiwidW4iLCJhbiIsIlNldCIsImNuIiwiZm4iLCJpbnN0YWxsaW5nIiwic2NyaXB0VVJMIiwic24iLCJwZXJmb3JtYW5jZSIsInZuIiwiaG4iLCJsbiIsInN3IiwiaXNFeHRlcm5hbCIsIm9yaWdpbmFsRXZlbnQiLCJtbiIsImlzVXBkYXRlIiwid24iLCJ3YWl0aW5nIiwiZG4iLCJuYXZpZ2F0b3IiLCJzZXJ2aWNlV29ya2VyIiwiY29udHJvbGxlciIsImduIiwicG9ydHMiLCJnZXRTVyIsImhhcyIsImwiLCJ3IiwiaW1tZWRpYXRlIiwicmVhZHlTdGF0ZSIsIkJvb2xlYW4iLCJ5biIsInBuIiwiYm4iLCJvbmNlIiwid2FzV2FpdGluZ0JlZm9yZVJlZ2lzdGVyIiwibWVzc2FnZVNXIiwibWVzc2FnZVNraXBXYWl0aW5nIiwiUG4iLCJNYXAiLCJTbiIsImRlbGV0ZSIsInN0cmluZ1RvQnl0ZUFycmF5JDEiLCJzdHIiLCJvdXQiLCJwIiwiY2hhckNvZGVBdCIsImJhc2U2NCIsImJ5dGVUb0NoYXJNYXBfIiwiY2hhclRvQnl0ZU1hcF8iLCJieXRlVG9DaGFyTWFwV2ViU2FmZV8iLCJjaGFyVG9CeXRlTWFwV2ViU2FmZV8iLCJFTkNPREVEX1ZBTFNfQkFTRSIsIkVOQ09ERURfVkFMUyIsIkVOQ09ERURfVkFMU19XRUJTQUZFIiwiSEFTX05BVElWRV9TVVBQT1JUIiwiYXRvYiIsImVuY29kZUJ5dGVBcnJheSIsImlucHV0Iiwid2ViU2FmZSIsImluaXRfIiwiYnl0ZVRvQ2hhck1hcCIsIm91dHB1dCIsImJ5dGUxIiwiaGF2ZUJ5dGUyIiwiYnl0ZTIiLCJoYXZlQnl0ZTMiLCJieXRlMyIsIm91dEJ5dGUxIiwib3V0Qnl0ZTIiLCJvdXRCeXRlMyIsIm91dEJ5dGU0IiwiZW5jb2RlU3RyaW5nIiwiYnRvYSIsImRlY29kZVN0cmluZyIsImJ5dGVzIiwicG9zIiwiYzEiLCJmcm9tQ2hhckNvZGUiLCJjMiIsImMzIiwiYnl0ZUFycmF5VG9TdHJpbmciLCJkZWNvZGVTdHJpbmdUb0J5dGVBcnJheSIsImNoYXJUb0J5dGVNYXAiLCJieXRlNCIsIkRlY29kZUJhc2U2NFN0cmluZ0Vycm9yIiwic3VwZXIiLCJiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyIsInV0ZjhCeXRlcyIsImJhc2U2NEVuY29kZSIsImdldERlZmF1bHRzIiwiZ2V0R2xvYmFsIiwiX19GSVJFQkFTRV9ERUZBVUxUU19fIiwicHJvY2VzcyIsImVudiIsImRlZmF1bHRzSnNvblN0cmluZyIsImdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlIiwiY29va2llIiwiZGVjb2RlZCIsImJhc2U2NERlY29kZSIsImdldERlZmF1bHRzRnJvbUNvb2tpZSIsImluZm8iLCJnZXREZWZhdWx0QXBwQ29uZmlnIiwiX2EiLCJjb25maWciLCJEZWZlcnJlZCIsIndyYXBDYWxsYmFjayIsImluZGV4ZWREQiIsInByZUV4aXN0IiwiREJfQ0hFQ0tfTkFNRSIsInJlcXVlc3QiLCJvbnN1Y2Nlc3MiLCJyZXN1bHQiLCJjbG9zZSIsImRlbGV0ZURhdGFiYXNlIiwib251cGdyYWRlbmVlZGVkIiwib25lcnJvciIsIkZpcmViYXNlRXJyb3IiLCJjb2RlIiwiY3VzdG9tRGF0YSIsInNldFByb3RvdHlwZU9mIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJFcnJvckZhY3RvcnkiLCJzZXJ2aWNlIiwic2VydmljZU5hbWUiLCJlcnJvcnMiLCJmdWxsQ29kZSIsInRlbXBsYXRlIiwiUEFUVEVSTiIsInJlcGxhY2VUZW1wbGF0ZSIsImZ1bGxNZXNzYWdlIiwiZGVlcEVxdWFsIiwiYiIsImFLZXlzIiwiYktleXMiLCJrIiwiYVByb3AiLCJiUHJvcCIsInRoaW5nIiwiY2FsY3VsYXRlQmFja29mZk1pbGxpcyIsImJhY2tvZmZDb3VudCIsImludGVydmFsTWlsbGlzIiwiYmFja29mZkZhY3RvciIsImN1cnJCYXNlVmFsdWUiLCJyYW5kb21XYWl0Iiwicm91bmQiLCJyYW5kb20iLCJfZGVsZWdhdGUiLCJpbnN0YW5jZUZhY3RvcnkiLCJtdWx0aXBsZUluc3RhbmNlcyIsInNlcnZpY2VQcm9wcyIsImluc3RhbnRpYXRpb25Nb2RlIiwib25JbnN0YW5jZUNyZWF0ZWQiLCJzZXRJbnN0YW50aWF0aW9uTW9kZSIsIm1vZGUiLCJzZXRNdWx0aXBsZUluc3RhbmNlcyIsInNldFNlcnZpY2VQcm9wcyIsInNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrIiwiREVGQVVMVF9FTlRSWV9OQU1FIiwiUHJvdmlkZXIiLCJpbnN0YW5jZXMiLCJpbnN0YW5jZXNEZWZlcnJlZCIsImluc3RhbmNlc09wdGlvbnMiLCJvbkluaXRDYWxsYmFja3MiLCJpZGVudGlmaWVyIiwibm9ybWFsaXplZElkZW50aWZpZXIiLCJub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIiLCJkZWZlcnJlZCIsImlzSW5pdGlhbGl6ZWQiLCJzaG91bGRBdXRvSW5pdGlhbGl6ZSIsImluc3RhbmNlIiwiZ2V0T3JJbml0aWFsaXplU2VydmljZSIsImluc3RhbmNlSWRlbnRpZmllciIsImdldEltbWVkaWF0ZSIsIm9wdGlvbmFsIiwiZ2V0Q29tcG9uZW50Iiwic2V0Q29tcG9uZW50IiwiaXNDb21wb25lbnRFYWdlciIsImluc3RhbmNlRGVmZXJyZWQiLCJjbGVhckluc3RhbmNlIiwic2VydmljZXMiLCJhbGwiLCJJTlRFUk5BTCIsIl9kZWxldGUiLCJpc0NvbXBvbmVudFNldCIsImdldE9wdGlvbnMiLCJpbml0aWFsaXplIiwib25Jbml0IiwiZXhpc3RpbmdDYWxsYmFja3MiLCJleGlzdGluZ0luc3RhbmNlIiwiaW52b2tlT25Jbml0Q2FsbGJhY2tzIiwiY2FsbGJhY2tzIiwiQ29tcG9uZW50Q29udGFpbmVyIiwicHJvdmlkZXJzIiwiYWRkQ29tcG9uZW50IiwicHJvdmlkZXIiLCJnZXRQcm92aWRlciIsImFkZE9yT3ZlcndyaXRlQ29tcG9uZW50IiwiZ2V0UHJvdmlkZXJzIiwiTG9nTGV2ZWwiLCJsZXZlbFN0cmluZ1RvRW51bSIsIkRFQlVHIiwiVkVSQk9TRSIsIklORk8iLCJXQVJOIiwiRVJST1IiLCJTSUxFTlQiLCJkZWZhdWx0TG9nTGV2ZWwiLCJDb25zb2xlTWV0aG9kIiwiZGVmYXVsdExvZ0hhbmRsZXIiLCJsb2dUeXBlIiwiYXJncyIsImxvZ0xldmVsIiwidG9JU09TdHJpbmciLCJtZXRob2QiLCJMb2dnZXIiLCJfbG9nTGV2ZWwiLCJfbG9nSGFuZGxlciIsIl91c2VyTG9nSGFuZGxlciIsInZhbCIsInNldExvZ0xldmVsIiwibG9nSGFuZGxlciIsInVzZXJMb2dIYW5kbGVyIiwiZGVidWciLCJ3YXJuIiwiaWRiUHJveHlhYmxlVHlwZXMiLCJjdXJzb3JBZHZhbmNlTWV0aG9kcyIsImN1cnNvclJlcXVlc3RNYXAiLCJXZWFrTWFwIiwidHJhbnNhY3Rpb25Eb25lTWFwIiwidHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwIiwidHJhbnNmb3JtQ2FjaGUiLCJyZXZlcnNlVHJhbnNmb3JtQ2FjaGUiLCJpZGJQcm94eVRyYXBzIiwicmVjZWl2ZXIiLCJJREJUcmFuc2FjdGlvbiIsIm9iamVjdFN0b3JlTmFtZXMiLCJvYmplY3RTdG9yZSIsInRyYW5zZm9ybUNhY2hhYmxlVmFsdWUiLCJJREJEYXRhYmFzZSIsInRyYW5zYWN0aW9uIiwiSURCQ3Vyc29yIiwiYWR2YW5jZSIsImNvbnRpbnVlIiwiY29udGludWVQcmltYXJ5S2V5IiwidW53cmFwIiwic3RvcmVOYW1lcyIsInR4IiwidW5saXN0ZW4iLCJjb21wbGV0ZSIsIkRPTUV4Y2VwdGlvbiIsImNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbiIsIklEQk9iamVjdFN0b3JlIiwiSURCSW5kZXgiLCJzb21lIiwiUHJveHkiLCJJREJSZXF1ZXN0Iiwic3VjY2VzcyIsInByb21pc2lmeVJlcXVlc3QiLCJuZXdWYWx1ZSIsIm9wZW5EQiIsInZlcnNpb24iLCJibG9ja2VkIiwidXBncmFkZSIsImJsb2NraW5nIiwidGVybWluYXRlZCIsIm9wZW5Qcm9taXNlIiwib2xkVmVyc2lvbiIsIm5ld1ZlcnNpb24iLCJkYiIsInJlYWRNZXRob2RzIiwid3JpdGVNZXRob2RzIiwiY2FjaGVkTWV0aG9kcyIsImdldE1ldGhvZCIsInRhcmdldEZ1bmNOYW1lIiwidXNlSW5kZXgiLCJpc1dyaXRlIiwiYXN5bmMiLCJzdG9yZU5hbWUiLCJzdG9yZSIsIm9sZFRyYXBzIiwiUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbCIsImdldFBsYXRmb3JtSW5mb1N0cmluZyIsImlzVmVyc2lvblNlcnZpY2VQcm92aWRlciIsImxpYnJhcnkiLCJsb2dTdHJpbmciLCJuYW1lJG8iLCJ2ZXJzaW9uJDEiLCJsb2dnZXIiLCJuYW1lJG4iLCJuYW1lJG0iLCJuYW1lJGwiLCJuYW1lJGsiLCJuYW1lJGoiLCJuYW1lJGkiLCJuYW1lJGgiLCJuYW1lJGciLCJuYW1lJGYiLCJuYW1lJGUiLCJuYW1lJGQiLCJuYW1lJGMiLCJuYW1lJGIiLCJuYW1lJGEiLCJuYW1lJDkiLCJuYW1lJDgiLCJuYW1lJDciLCJuYW1lJDYiLCJuYW1lJDUiLCJuYW1lJDQiLCJuYW1lJDMiLCJuYW1lJDIiLCJuYW1lJDEiLCJQTEFURk9STV9MT0dfU1RSSU5HIiwiX2FwcHMiLCJfY29tcG9uZW50cyIsIl9hZGRDb21wb25lbnQiLCJhcHAiLCJfcmVnaXN0ZXJDb21wb25lbnQiLCJjb21wb25lbnROYW1lIiwiaGVhcnRiZWF0Q29udHJvbGxlciIsInRyaWdnZXJIZWFydGJlYXQiLCJFUlJPUl9GQUNUT1JZIiwiRmlyZWJhc2VBcHBJbXBsIiwiX2lzRGVsZXRlZCIsIl9vcHRpb25zIiwiX2NvbmZpZyIsIl9uYW1lIiwiX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsImF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsIl9jb250YWluZXIiLCJjaGVja0Rlc3Ryb3llZCIsImlzRGVsZXRlZCIsImFwcE5hbWUiLCJpbml0aWFsaXplQXBwIiwicmF3Q29uZmlnIiwiZXhpc3RpbmdBcHAiLCJuZXdBcHAiLCJyZWdpc3RlclZlcnNpb24iLCJsaWJyYXJ5S2V5T3JOYW1lIiwidmFyaWFudCIsImxpYnJhcnlNaXNtYXRjaCIsInZlcnNpb25NaXNtYXRjaCIsIndhcm5pbmciLCJTVE9SRV9OQU1FIiwiZGJQcm9taXNlIiwiZ2V0RGJQcm9taXNlIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJvcmlnaW5hbEVycm9yTWVzc2FnZSIsIndyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCIiwiaGVhcnRiZWF0T2JqZWN0IiwicHV0IiwiY29tcHV0ZUtleSIsImlkYkdldEVycm9yIiwiYXBwSWQiLCJIZWFydGJlYXRTZXJ2aWNlSW1wbCIsIl9oZWFydGJlYXRzQ2FjaGUiLCJfc3RvcmFnZSIsIkhlYXJ0YmVhdFN0b3JhZ2VJbXBsIiwiX2hlYXJ0YmVhdHNDYWNoZVByb21pc2UiLCJyZWFkIiwiX2IiLCJhZ2VudCIsImRhdGUiLCJnZXRVVENEYXRlU3RyaW5nIiwiaGVhcnRiZWF0cyIsImxhc3RTZW50SGVhcnRiZWF0RGF0ZSIsInNpbmdsZURhdGVIZWFydGJlYXQiLCJoYlRpbWVzdGFtcCIsInZhbHVlT2YiLCJvdmVyd3JpdGUiLCJnZXRIZWFydGJlYXRzSGVhZGVyIiwiaGVhcnRiZWF0c1RvU2VuZCIsInVuc2VudEVudHJpZXMiLCJoZWFydGJlYXRzQ2FjaGUiLCJtYXhTaXplIiwiaGVhcnRiZWF0RW50cnkiLCJoYiIsImRhdGVzIiwiY291bnRCeXRlcyIsInBvcCIsImV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyIiwiaGVhZGVyU3RyaW5nIiwic3RyaW5naWZ5Iiwic3Vic3RyaW5nIiwiX2NhblVzZUluZGV4ZWREQlByb21pc2UiLCJydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrIiwiaWRiSGVhcnRiZWF0T2JqZWN0IiwicmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCIiwiaGVhcnRiZWF0c09iamVjdCIsImV4aXN0aW5nSGVhcnRiZWF0c09iamVjdCIsIlBBQ0tBR0VfVkVSU0lPTiIsIklOVEVSTkFMX0FVVEhfVkVSU0lPTiIsImlzU2VydmVyRXJyb3IiLCJnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQiLCJwcm9qZWN0SWQiLCJleHRyYWN0QXV0aFRva2VuSW5mb0Zyb21SZXNwb25zZSIsInRva2VuIiwicmVxdWVzdFN0YXR1cyIsImV4cGlyZXNJbiIsInJlc3BvbnNlRXhwaXJlc0luIiwiTnVtYmVyIiwiY3JlYXRpb25UaW1lIiwiZ2V0RXJyb3JGcm9tUmVzcG9uc2UiLCJyZXF1ZXN0TmFtZSIsImVycm9yRGF0YSIsImpzb24iLCJzZXJ2ZXJDb2RlIiwic2VydmVyTWVzc2FnZSIsInNlcnZlclN0YXR1cyIsImdldEhlYWRlcnMiLCJhcGlLZXkiLCJIZWFkZXJzIiwiQWNjZXB0IiwicmV0cnlJZlNlcnZlckVycm9yIiwibXMiLCJWQUxJRF9GSURfUEFUVEVSTiIsImdlbmVyYXRlRmlkIiwiZmlkQnl0ZUFycmF5IiwiVWludDhBcnJheSIsImNyeXB0byIsIm1zQ3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwiZmlkIiwic3Vic3RyIiwiZW5jb2RlIiwiZ2V0S2V5IiwiYXBwQ29uZmlnIiwiZmlkQ2hhbmdlQ2FsbGJhY2tzIiwiZmlkQ2hhbmdlZCIsImNhbGxGaWRDaGFuZ2VDYWxsYmFja3MiLCJjaGFubmVsIiwiYnJvYWRjYXN0Q2hhbm5lbCIsIkJyb2FkY2FzdENoYW5uZWwiLCJicm9hZGNhc3RGaWRDaGFuZ2UiLCJPQkpFQ1RfU1RPUkVfTkFNRSIsIm9sZFZhbHVlIiwidXBkYXRlRm4iLCJnZXRJbnN0YWxsYXRpb25FbnRyeSIsImluc3RhbGxhdGlvbnMiLCJyZWdpc3RyYXRpb25Qcm9taXNlIiwiaW5zdGFsbGF0aW9uRW50cnkiLCJvbGRFbnRyeSIsImNsZWFyVGltZWRPdXRSZXF1ZXN0IiwicmVnaXN0cmF0aW9uU3RhdHVzIiwidXBkYXRlT3JDcmVhdGVJbnN0YWxsYXRpb25FbnRyeSIsImVudHJ5V2l0aFByb21pc2UiLCJvbkxpbmUiLCJpblByb2dyZXNzRW50cnkiLCJyZWdpc3RyYXRpb25UaW1lIiwicmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5IiwiaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyIiwiZW5kcG9pbnQiLCJoZWFkZXJzIiwiaGVhcnRiZWF0U2VydmljZSIsImhlYXJ0YmVhdHNIZWFkZXIiLCJhdXRoVmVyc2lvbiIsInNka1ZlcnNpb24iLCJmZXRjaCIsIm9rIiwicmVzcG9uc2VWYWx1ZSIsInJlZnJlc2hUb2tlbiIsImF1dGhUb2tlbiIsImNyZWF0ZUluc3RhbGxhdGlvblJlcXVlc3QiLCJyZWdpc3Rlckluc3RhbGxhdGlvbiIsIndhaXRVbnRpbEZpZFJlZ2lzdHJhdGlvbiIsInRyaWdnZXJSZWdpc3RyYXRpb25JZk5lY2Vzc2FyeSIsInVwZGF0ZUluc3RhbGxhdGlvblJlcXVlc3QiLCJnZW5lcmF0ZUF1dGhUb2tlblJlcXVlc3QiLCJnZXRHZW5lcmF0ZUF1dGhUb2tlbkVuZHBvaW50IiwiZ2V0QXV0aG9yaXphdGlvbkhlYWRlciIsImdldEhlYWRlcnNXaXRoQXV0aCIsImluc3RhbGxhdGlvbiIsInJlZnJlc2hBdXRoVG9rZW4iLCJmb3JjZVJlZnJlc2giLCJ0b2tlblByb21pc2UiLCJpc0VudHJ5UmVnaXN0ZXJlZCIsIm9sZEF1dGhUb2tlbiIsImlzQXV0aFRva2VuRXhwaXJlZCIsInVwZGF0ZUF1dGhUb2tlblJlcXVlc3QiLCJ3YWl0VW50aWxBdXRoVG9rZW5SZXF1ZXN0IiwiaW5Qcm9ncmVzc0F1dGhUb2tlbiIsInJlcXVlc3RUaW1lIiwibWFrZUF1dGhUb2tlblJlcXVlc3RJblByb2dyZXNzRW50cnkiLCJ1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkiLCJmZXRjaEF1dGhUb2tlbkZyb21TZXJ2ZXIiLCJnZXRNaXNzaW5nVmFsdWVFcnJvciIsInZhbHVlTmFtZSIsIklOU1RBTExBVElPTlNfTkFNRSIsImNvbmZpZ0tleXMiLCJrZXlOYW1lIiwiZXh0cmFjdEFwcENvbmZpZyIsImdldElkIiwiaW5zdGFsbGF0aW9uc0ltcGwiLCJnZXRUb2tlbiIsImNvbXBsZXRlSW5zdGFsbGF0aW9uUmVnaXN0cmF0aW9uIiwiQU5BTFlUSUNTX1RZUEUiLCJHVEFHX1VSTCIsImNyZWF0ZUd0YWdUcnVzdGVkVHlwZXNTY3JpcHRVUkwiLCJ1cmwiLCJzdGFydHNXaXRoIiwiZXJyIiwiZ3RhZ1VSTCIsInByb21pc2VBbGxTZXR0bGVkIiwicHJvbWlzZXMiLCJkZWZhdWx0UmV0cnlEYXRhIiwidGhyb3R0bGVNZXRhZGF0YSIsImdldFRocm90dGxlTWV0YWRhdGEiLCJzZXRUaHJvdHRsZU1ldGFkYXRhIiwibWV0YWRhdGEiLCJkZWxldGVUaHJvdHRsZU1ldGFkYXRhIiwiZmV0Y2hEeW5hbWljQ29uZmlnV2l0aFJldHJ5IiwicmV0cnlEYXRhIiwidGltZW91dE1pbGxpcyIsIm1lYXN1cmVtZW50SWQiLCJ0aHJvdHRsZUVuZFRpbWVNaWxsaXMiLCJzaWduYWwiLCJBbmFseXRpY3NBYm9ydFNpZ25hbCIsImFib3J0IiwiYXR0ZW1wdEZldGNoRHluYW1pY0NvbmZpZ1dpdGhSZXRyeSIsImFwcEZpZWxkcyIsImJhY2tvZmZNaWxsaXMiLCJ0aW1lb3V0Iiwic2V0QWJvcnRhYmxlVGltZW91dCIsImFwcFVybCIsImVycm9yTWVzc2FnZSIsImpzb25SZXNwb25zZSIsIl9pZ25vcmVkIiwiaHR0cFN0YXR1cyIsInJlc3BvbnNlTWVzc2FnZSIsImZldGNoRHluYW1pY0NvbmZpZyIsImlzUmV0cmlhYmxlRXJyb3IiLCJkZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdCIsImRlZmF1bHRDb25zZW50U2V0dGluZ3NGb3JJbml0IiwiX2luaXRpYWxpemVBbmFseXRpY3MiLCJkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0IiwibWVhc3VyZW1lbnRJZFRvQXBwSWQiLCJndGFnQ29yZSIsImRhdGFMYXllck5hbWUiLCJkeW5hbWljQ29uZmlnUHJvbWlzZSIsImZpZFByb21pc2UiLCJlcnJvckluZm8iLCJ2YWxpZGF0ZUluZGV4ZWREQiIsImVudklzVmFsaWQiLCJkeW5hbWljQ29uZmlnIiwic2NyaXB0VGFncyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiZmluZEd0YWdTY3JpcHRPblBhZ2UiLCJ0cnVzdGVkVHlwZXNQb2xpY3kiLCJwb2xpY3lOYW1lIiwicG9saWN5T3B0aW9ucyIsInRydXN0ZWRUeXBlcyIsImNyZWF0ZVBvbGljeSIsImNyZWF0ZVRydXN0ZWRUeXBlc1BvbGljeSIsImNyZWF0ZVNjcmlwdFVSTCIsInNjcmlwdCIsImd0YWdTY3JpcHRVUkwiLCJoZWFkIiwiaW5zZXJ0U2NyaXB0VGFnIiwiY29uZmlnUHJvcGVydGllcyIsIkFuYWx5dGljc1NlcnZpY2UiLCJpbml0aWFsaXphdGlvblByb21pc2VzTWFwIiwiZ3RhZ0NvcmVGdW5jdGlvbiIsIndyYXBwZWRHdGFnRnVuY3Rpb24iLCJnbG9iYWxJbml0RG9uZSIsImZhY3RvcnkiLCJtaXNtYXRjaGVkRW52TWVzc2FnZXMiLCJydW50aW1lIiwiY2hyb21lIiwiYnJvd3NlciIsImNvb2tpZUVuYWJsZWQiLCJkZXRhaWxzIiwid2Fybk9uQnJvd3NlckNvbnRleHRNaXNtYXRjaCIsImRhdGFMYXllciIsImdldE9yQ3JlYXRlRGF0YUxheWVyIiwid3JhcHBlZEd0YWciLCJndGFnRnVuY3Rpb25OYW1lIiwiX2FyZ3MiLCJjb21tYW5kIiwiZ3RhZ1BhcmFtcyIsImluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IiLCJnYVNlbmRUb0xpc3QiLCJkeW5hbWljQ29uZmlnUmVzdWx0cyIsInNlbmRUb0lkIiwiZm91bmRDb25maWciLCJpbml0aWFsaXphdGlvblByb21pc2UiLCJndGFnT25FdmVudCIsImNvcnJlc3BvbmRpbmdBcHBJZCIsImd0YWdPbkNvbmZpZyIsImZpZWxkTmFtZSIsImN1c3RvbVBhcmFtcyIsIndyYXBHdGFnIiwid3JhcE9yQ3JlYXRlR3RhZyIsImxvZ0V2ZW50IiwiYW5hbHl0aWNzSW5zdGFuY2UiLCJldmVudE5hbWUiLCJldmVudFBhcmFtcyIsImd0YWdGdW5jdGlvbiIsImdsb2JhbCIsImxvZ0V2ZW50JDEiLCJhbmFseXRpY3NPcHRpb25zIiwiYW5hbHl0aWNzIiwicmVhc29uIiwiZmlyZWJhc2VDb25maWciLCJhdXRoRG9tYWluIiwiZGF0YWJhc2VVUkwiLCJzdG9yYWdlQnVja2V0IiwibWVzc2FnaW5nU2VuZGVySWQiLCJGaXJlYmFzZUFuYWx5dGljc01hbmFnZXIiLCJmaXJlYmFzZUFwcCIsImZpcmViYXNlQW5hbHl0aWNzIiwiYW5hbHl0aWNzUHJvdmlkZXIiLCJpbml0aWFsaXplQW5hbHl0aWNzIiwiZ2V0QW5hbHl0aWNzIiwiZ2V0SW5zdGFuY2UiLCJsb2dFdmVudFdpdGhQYXlsb2FkIiwicGF5bG9hZCIsImxvZ1Nlc3Npb25TdGFydFdpdGhQYXlsb2FkIiwibG9nRG93bmxvYWRQcm9ncmVzc1dpdGhQYXlsb2FkIiwidXJsUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwic2VhcmNoIiwiY3JVc2VySWQiLCJzZXNzaW9uU3RhcnRUaW1lIiwiYXBwVmVyc2lvbiIsImxvYWRpbmdTY3JlZW4iLCJsb2dnZWQyNVBlcmNlbnREb3dubG9hZCIsImxvZ2dlZDUwUGVyY2VudERvd25sb2FkIiwibG9nZ2VkNzVQZXJjZW50RG93bmxvYWQiLCJsb2dnZWQxMDBQZXJjZW50RG93bmxvYWQiLCJmaXJlYmFzZUFuYWx5dGljc01hbmFnZXIiLCJsb2dEb3dubG9hZFByb2dyZXNzV2l0aFBheWxvYWRUb0ZpcmViYXNlIiwidGltZVNwZW50IiwiZ2V0VGltZSIsImJvb2tfbmFtZSIsImNyX3VzZXJfaWQiLCJtc19zaW5jZV9zZXNzaW9uX3N0YXJ0IiwicXVlcnlTdHJpbmciLCJjb250ZW50UGFyc2VyIiwicGxheUJhY2tFbmdpbmUiLCJlbmZvcmNlTGFuZHNjYXBlTW9kZSIsInJlZ2lzdGVyU2VydmljZVdvcmtlciIsIkFuZHJvaWQiLCJzZXRDb250YWluZXJBcHBPcmllbnRhdGlvbiIsIndiIiwicmVhZHkiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwibGFuZyIsImJvb2tEYXRhIiwiY29udGVudEZpbGUiLCJwcm9ncmVzc1ZhbHVlIiwicHJvZ3Jlc3NCYXIiLCJzZXRJdGVtIiwiaXNDb250ZW50Q2FjaGVkIiwiY2FjaGVkU3RhdHVzIiwicmVhZExhbmd1YWdlRGF0YUZyb21DYWNoZUFuZE5vdGlmeUFuZHJvaWRBcHAiLCJoYW5kbGVMb2FkaW5nTWVzc2FnZSIsInByb2dyZXNzIiwiY29uZmlybSIsInJlbG9hZCIsImhhbmRsZVVwZGF0ZUZvdW5kTWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=