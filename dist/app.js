/*! For license information please see app.js.LICENSE.txt */
(()=>{"use strict";var e,t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(e){e.CuriousReader="CuriousReader",e.GDL="GDL",e.Unknown="Unknown"}(e||(e={}));class n{constructor(e){this.emptyGlowImageTag="empty_glow_image",this.contentFilePath=e}async parseBook(){return new Promise(((e,t)=>{this.parseContentJSONFile().then((t=>{this.contentJSON=t,console.log("Content JSON file parsed!"),console.log(this.contentJSON);let n={bookName:"",pages:[],bookType:this.determineBookType()};n.pages=this.parsePages(n),e(n)})).catch((e=>{t(e)}))}))}determineBookType(){return void 0!==this.contentJSON.presentation?e.CuriousReader:void 0!==this.contentJSON.chapters?e.GDL:e.Unknown}parsePages(t){let n=[];if(t.bookType===e.CuriousReader){let e=this.contentJSON.presentation.slides,t=this.contentJSON.presentation.globalBackgroundSelector.fillGlobalBackground;for(let i=0;i<e.length;i++){let r=e[i],o={visualElements:[],backgroundColor:t};o.visualElements=this.parsePageCR(r),n.push(o)}}else if(t.bookType===e.GDL){let e=this.contentJSON.chapters,t="#FCFCF2";for(let i=0;i<e.length;i++){let r=e[i],o={visualElements:[],backgroundColor:t};o.visualElements=this.parsePageGDL(r),n.push(o)}}else console.log("Unknown book type!");return n}parsePageCR(e){let t=[],n=e.elements;for(let e=0;e<n.length;e++){let i=n[e].action.library;if(i.includes("AdvancedText")){let i=this.parseTextElementCR(n[e]);t.push(i)}else if(i.includes("Image")){let i=this.parseImageElementCR(n[e]);t.push(i)}else if(i.includes("Audio")){let i=this.parseAudioElementCR(n[e]);t.push(i)}}return t}parsePageGDL(e){let t=[],n=e.params.content;for(let e=0;e<n.length;e++){let i=n[e].content.library;if(i.includes("AdvancedText")){let i=this.parseTextElementGDL(n[e].content.params);t.push(i)}else if(i.includes("Image")){let i=this.parseImageElementGDL(n[e].content.params);t.push(i)}}return t}parseTextElementCR(e){return{type:"text",positionX:e.x,positionY:e.y,width:e.width,height:e.height,textContentAsHTML:e.action.params.text}}parseTextElementGDL(e){return{type:"text",positionX:NaN,positionY:NaN,width:NaN,height:NaN,textContentAsHTML:e.text}}parseImageElementCR(e){let t="";return t=void 0===e.action.params.file?this.emptyGlowImageTag:e.action.params.file.path,{domID:t===this.emptyGlowImageTag?e.id:e.action.subContentId,type:"image",positionX:e.x,positionY:e.y,width:e.width,height:e.height,imageSource:t}}parseImageElementGDL(e){return{domID:"",type:"image",positionX:NaN,positionY:NaN,width:e.width,height:e.height,imageSource:e.file.path}}parseAudioElementCR(e){let t={timestamps:[]},n=e.action.params.timeStampForEachText;for(let i=0;i<n.length;i++){let r=i,o=n[i],a={domID:e.action.subContentId+"_"+r.toString(),word:o.text.replace(/&#039;/g,"'"),startTimestamp:o.startDuration,endTimestamp:o.endDuration,audioSrc:o.wordfile[0].path};t.timestamps.push(a)}return{domID:e.action.subContentId,type:"audio",positionX:e.x,positionY:e.y,width:e.width,height:e.height,glowColor:e.action.params.glowColor,audioSrc:e.action.params.files[0].path,audioTimestamps:t,styles:""}}async parseContentJSONFile(){return new Promise(((e,t)=>{let n=new XMLHttpRequest;n.open("GET",this.contentFilePath,!0),n.responseType="json",n.onload=function(){if(200===n.status){let t=n.response;delete t.l10n,delete t.override,e(t)}else t(n.response)},n.send()}))}}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r="(prefers-reduced-motion: reduce)";function o(e){e.length=0}function a(e,t,n){return Array.prototype.slice.call(e,t,n)}function s(e){return e.bind.apply(e,[null].concat(a(arguments,1)))}var c=setTimeout,l=function(){};function u(e){return requestAnimationFrame(e)}function d(e,t){return typeof t===e}function h(e){return!v(e)&&d("object",e)}var f=Array.isArray,p=s(d,"function"),g=s(d,"string"),m=s(d,"undefined");function v(e){return null===e}function y(e){try{return e instanceof(e.ownerDocument.defaultView||window).HTMLElement}catch(e){return!1}}function w(e){return f(e)?e:[e]}function b(e,t){w(e).forEach(t)}function E(e,t){return e.indexOf(t)>-1}function I(e,t){return e.push.apply(e,w(t)),e}function S(e,t,n){e&&b(t,(function(t){t&&e.classList[n?"add":"remove"](t)}))}function C(e,t){S(e,g(t)?t.split(" "):t,!0)}function T(e,t){b(t,e.appendChild.bind(e))}function P(e,t){b(e,(function(e){var n=(t||e).parentNode;n&&n.insertBefore(e,t)}))}function A(e,t){return y(e)&&(e.msMatchesSelector||e.matches).call(e,t)}function k(e,t){var n=e?a(e.children):[];return t?n.filter((function(e){return A(e,t)})):n}function D(e,t){return t?k(e,t)[0]:e.firstElementChild}var x=Object.keys;function L(e,t,n){return e&&(n?x(e).reverse():x(e)).forEach((function(n){"__proto__"!==n&&t(e[n],n)})),e}function O(e){return a(arguments,1).forEach((function(t){L(t,(function(n,i){e[i]=t[i]}))})),e}function B(e){return a(arguments,1).forEach((function(t){L(t,(function(t,n){f(t)?e[n]=t.slice():h(t)?e[n]=B({},h(e[n])?e[n]:{},t):e[n]=t}))})),e}function N(e,t){b(t||x(e),(function(t){delete e[t]}))}function M(e,t){b(e,(function(e){b(t,(function(t){e&&e.removeAttribute(t)}))}))}function F(e,t,n){h(t)?L(t,(function(t,n){F(e,n,t)})):b(e,(function(e){v(n)||""===n?M(e,t):e.setAttribute(t,String(n))}))}function j(e,t,n){var i=document.createElement(e);return t&&(g(t)?C(i,t):F(i,t)),n&&T(n,i),i}function R(e,t,n){if(m(n))return getComputedStyle(e)[t];v(n)||(e.style[t]=""+n)}function z(e,t){R(e,"display",t)}function $(e){e.setActive&&e.setActive()||e.focus({preventScroll:!0})}function H(e,t){return e.getAttribute(t)}function W(e,t){return e&&e.classList.contains(t)}function G(e){return e.getBoundingClientRect()}function U(e){b(e,(function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}))}function V(e){return D((new DOMParser).parseFromString(e,"text/html").body)}function q(e,t){e.preventDefault(),t&&(e.stopPropagation(),e.stopImmediatePropagation())}function X(e,t){return e&&e.querySelector(t)}function Y(e,t){return t?a(e.querySelectorAll(t)):[]}function J(e,t){S(e,t,!1)}function K(e){return e.timeStamp}function Q(e){return g(e)?e:e?e+"px":""}var Z="splide",ee="data-"+Z;function te(e,t){if(!e)throw new Error("["+Z+"] "+(t||""))}var ne=Math.min,ie=Math.max,re=Math.floor,oe=Math.ceil,ae=Math.abs;function se(e,t,n){return ae(e-t)<n}function ce(e,t,n,i){var r=ne(t,n),o=ie(t,n);return i?r<e&&e<o:r<=e&&e<=o}function le(e,t,n){var i=ne(t,n),r=ie(t,n);return ne(ie(i,e),r)}function ue(e){return+(e>0)-+(e<0)}function de(e,t){return b(t,(function(t){e=e.replace("%s",""+t)})),e}function he(e){return e<10?"0"+e:""+e}var fe={};function pe(){var e=[];function t(e,t,n){b(e,(function(e){e&&b(t,(function(t){t.split(" ").forEach((function(t){var i=t.split(".");n(e,i[0],i[1])}))}))}))}return{bind:function(n,i,r,o){t(n,i,(function(t,n,i){var a="addEventListener"in t,s=a?t.removeEventListener.bind(t,n,r,o):t.removeListener.bind(t,r);a?t.addEventListener(n,r,o):t.addListener(r),e.push([t,n,i,r,s])}))},unbind:function(n,i,r){t(n,i,(function(t,n,i){e=e.filter((function(e){return!!(e[0]!==t||e[1]!==n||e[2]!==i||r&&e[3]!==r)||(e[4](),!1)}))}))},dispatch:function(e,t,n){var i,r=!0;return"function"==typeof CustomEvent?i=new CustomEvent(t,{bubbles:r,detail:n}):(i=document.createEvent("CustomEvent")).initCustomEvent(t,r,!1,n),e.dispatchEvent(i),i},destroy:function(){e.forEach((function(e){e[4]()})),o(e)}}}var ge="mounted",me="ready",ve="move",ye="moved",we="click",be="refresh",Ee="updated",Ie="resize",Se="resized",Ce="scroll",Te="scrolled",Pe="destroy",Ae="navigation:mounted",ke="autoplay:play",_e="autoplay:pause",De="lazyload:loaded",xe="ei";function Le(e){var t=e?e.event.bus:document.createDocumentFragment(),n=pe();return e&&e.event.on(Pe,n.destroy),O(n,{bus:t,on:function(e,i){n.bind(t,w(e).join(" "),(function(e){i.apply(i,f(e.detail)?e.detail:[])}))},off:s(n.unbind,t),emit:function(e){n.dispatch(t,e,a(arguments,1))}})}function Oe(e,t,n,i){var r,o,a=Date.now,s=0,c=!0,l=0;function d(){if(!c){if(s=e?ne((a()-r)/e,1):1,n&&n(s),s>=1&&(t(),r=a(),i&&++l>=i))return h();o=u(d)}}function h(){c=!0}function f(){o&&cancelAnimationFrame(o),s=0,o=0,c=!0}return{start:function(t){t||f(),r=a()-(t?s*e:0),c=!1,o=u(d)},rewind:function(){r=a(),s=0,n&&n(s)},pause:h,cancel:f,set:function(t){e=t},isPaused:function(){return c}}}var Be="Arrow",Ne=Be+"Left",Me=Be+"Right",Fe=Be+"Up",je=Be+"Down",Re="ttb",ze={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[Fe,Me],ArrowRight:[je,Ne]};var $e="role",He="tabindex",We="aria-",Ge=We+"controls",Ue=We+"current",Ve=We+"selected",qe=We+"label",Xe=We+"labelledby",Ye=We+"hidden",Je=We+"orientation",Ke=We+"roledescription",Qe=We+"live",Ze=We+"busy",et=We+"atomic",tt=[$e,He,"disabled",Ge,Ue,qe,Xe,Ye,Je,Ke],nt=Z+"__",it="is-",rt=Z,ot=nt+"track",at=nt+"list",st=nt+"slide",ct=st+"--clone",lt=st+"__container",ut=nt+"arrows",dt=nt+"arrow",ht=dt+"--prev",ft=dt+"--next",pt=nt+"pagination",gt=pt+"__page",mt=nt+"progress__bar",vt=nt+"toggle",yt=nt+"sr",wt=it+"initialized",bt=it+"active",Et=it+"prev",It=it+"next",St=it+"visible",Ct=it+"loading",Tt=it+"focus-in",Pt=it+"overflow",At=[bt,St,Et,It,Ct,Tt,Pt],kt={slide:st,clone:ct,arrows:ut,arrow:dt,prev:ht,next:ft,pagination:pt,page:gt,spinner:nt+"spinner"},_t="touchstart mousedown",Dt="touchmove mousemove",xt="touchend touchcancel mouseup click",Lt="slide",Ot="loop",Bt="fade";var Nt=ee+"-interval",Mt={passive:!1,capture:!0},Ft={Spacebar:" ",Right:Me,Left:Ne,Up:Fe,Down:je};function jt(e){return e=g(e)?e:e.key,Ft[e]||e}var Rt="keydown",zt=ee+"-lazy",$t=zt+"-srcset",Ht="["+zt+"], ["+$t+"]",Wt=[" ","Enter"],Gt=Object.freeze({__proto__:null,Media:function(e,t,n){var i=e.state,o=n.breakpoints||{},a=n.reducedMotion||{},s=pe(),c=[];function l(e){e&&s.destroy()}function u(e,t){var n=matchMedia(t);s.bind(n,"change",d),c.push([e,n])}function d(){var t=i.is(7),r=n.direction,o=c.reduce((function(e,t){return B(e,t[1].matches?t[0]:{})}),{});N(n),h(o),n.destroy?e.destroy("completely"===n.destroy):t?(l(!0),e.mount()):r!==n.direction&&e.refresh()}function h(t,r,o){B(n,t),r&&B(Object.getPrototypeOf(n),t),!o&&i.is(1)||e.emit(Ee,n)}return{setup:function(){var e="min"===n.mediaQuery;x(o).sort((function(t,n){return e?+t-+n:+n-+t})).forEach((function(t){u(o[t],"("+(e?"min":"max")+"-width:"+t+"px)")})),u(a,r),d()},destroy:l,reduce:function(e){matchMedia(r).matches&&(e?B(n,a):N(n,x(a)))},set:h}},Direction:function(e,t,n){return{resolve:function(e,t,i){var r="rtl"!==(i=i||n.direction)||t?i===Re?0:-1:1;return ze[e]&&ze[e][r]||e.replace(/width|left|right/i,(function(e,t){var n=ze[e.toLowerCase()][r]||e;return t>0?n.charAt(0).toUpperCase()+n.slice(1):n}))},orient:function(e){return e*("rtl"===n.direction?1:-1)}}},Elements:function(e,t,n){var i,r,a,s=Le(e),c=s.on,l=s.bind,u=e.root,d=n.i18n,h={},f=[],g=[],m=[];function v(){var e,t,o;i=b("."+ot),r=D(i,"."+at),te(i&&r,"A track/list element is missing."),I(f,k(r,"."+st+":not(."+ct+")")),L({arrows:ut,pagination:pt,prev:ht,next:ft,bar:mt,toggle:vt},(function(e,t){h[t]=b("."+e)})),O(h,{root:u,track:i,list:r,slides:f}),t=u.id||""+(e=Z)+he(fe[e]=(fe[e]||0)+1),o=n.role,u.id=t,i.id=i.id||t+"-track",r.id=r.id||t+"-list",!H(u,$e)&&"SECTION"!==u.tagName&&o&&F(u,$e,o),F(u,Ke,d.carousel),F(r,$e,"presentation"),w()}function y(e){var t=tt.concat("style");o(f),J(u,g),J(i,m),M([i,r],t),M(u,e?t:["style",Ke])}function w(){J(u,g),J(i,m),g=E(rt),m=E(ot),C(u,g),C(i,m),F(u,qe,n.label),F(u,Xe,n.labelledby)}function b(e){var t=X(u,e);return t&&function(e,t){if(p(e.closest))return e.closest(t);for(var n=e;n&&1===n.nodeType&&!A(n,t);)n=n.parentElement;return n}(t,"."+rt)===u?t:void 0}function E(e){return[e+"--"+n.type,e+"--"+n.direction,n.drag&&e+"--draggable",n.isNavigation&&e+"--nav",e===rt&&bt]}return O(h,{setup:v,mount:function(){c(be,y),c(be,v),c(Ee,w),l(document,_t+" keydown",(function(e){a="keydown"===e.type}),{capture:!0}),l(u,"focusin",(function(){S(u,Tt,!!a)}))},destroy:y})},Slides:function(e,t,n){var i=Le(e),r=i.on,a=i.emit,c=i.bind,l=t.Elements,u=l.slides,d=l.list,h=[];function f(){u.forEach((function(e,t){v(e,t,-1)}))}function m(){k((function(e){e.destroy()})),o(h)}function v(t,n,i){var r=function(e,t,n,i){var r,o=Le(e),a=o.on,c=o.emit,l=o.bind,u=e.Components,d=e.root,h=e.options,f=h.isNavigation,p=h.updateOnMove,g=h.i18n,m=h.pagination,v=h.slideFocus,y=u.Direction.resolve,w=H(i,"style"),b=H(i,qe),E=n>-1,I=D(i,"."+lt);function C(){var r=e.splides.map((function(e){var n=e.splide.Components.Slides.getAt(t);return n?n.slide.id:""})).join(" ");F(i,qe,de(g.slideX,(E?n:t)+1)),F(i,Ge,r),F(i,$e,v?"button":""),v&&M(i,Ke)}function T(){r||P()}function P(){if(!r){var n=e.index;(o=A())!==W(i,bt)&&(S(i,bt,o),F(i,Ue,f&&o||""),c(o?"active":"inactive",k)),function(){var t=function(){if(e.is(Bt))return A();var t=G(u.Elements.track),n=G(i),r=y("left",!0),o=y("right",!0);return re(t[r])<=oe(n[r])&&re(n[o])<=oe(t[o])}(),n=!t&&(!A()||E);if(e.state.is([4,5])||F(i,Ye,n||""),F(Y(i,h.focusableNodes||""),He,n?-1:""),v&&F(i,He,n?-1:0),t!==W(i,St)&&(S(i,St,t),c(t?"visible":"hidden",k)),!t&&document.activeElement===i){var r=u.Slides.getAt(e.index);r&&$(r.slide)}}(),S(i,Et,t===n-1),S(i,It,t===n+1)}var o}function A(){var i=e.index;return i===t||h.cloneStatus&&i===n}var k={index:t,slideIndex:n,slide:i,container:I,isClone:E,mount:function(){E||(i.id=d.id+"-slide"+he(t+1),F(i,$e,m?"tabpanel":"group"),F(i,Ke,g.slide),F(i,qe,b||de(g.slideLabel,[t+1,e.length]))),l(i,"click",s(c,we,k)),l(i,"keydown",s(c,"sk",k)),a([ye,"sh",Te],P),a(Ae,C),p&&a(ve,T)},destroy:function(){r=!0,o.destroy(),J(i,At),M(i,tt),F(i,"style",w),F(i,qe,b||"")},update:P,style:function(e,t,n){R(n&&I||i,e,t)},isWithin:function(n,i){var r=ae(n-t);return E||!h.rewind&&!e.is(Ot)||(r=ne(r,e.length-r)),r<=i}};return k}(e,n,i,t);r.mount(),h.push(r),h.sort((function(e,t){return e.index-t.index}))}function I(e){return e?_((function(e){return!e.isClone})):h}function k(e,t){I(t).forEach(e)}function _(e){return h.filter(p(e)?e:function(t){return g(e)?A(t.slide,e):E(w(e),t.index)})}return{mount:function(){f(),r(be,m),r(be,f)},destroy:m,update:function(){k((function(e){e.update()}))},register:v,get:I,getIn:function(e){var i=t.Controller,r=i.toIndex(e),o=i.hasFocus()?1:n.perPage;return _((function(e){return ce(e.index,r,r+o-1)}))},getAt:function(e){return _(e)[0]},add:function(e,t){b(e,(function(e){if(g(e)&&(e=V(e)),y(e)){var i=u[t];i?P(e,i):T(d,e),C(e,n.classes.slide),r=e,o=s(a,Ie),l=Y(r,"img"),(h=l.length)?l.forEach((function(e){c(e,"load error",(function(){--h||o()}))})):o()}var r,o,l,h})),a(be)},remove:function(e){U(_(e).map((function(e){return e.slide}))),a(be)},forEach:k,filter:_,style:function(e,t,n){k((function(i){i.style(e,t,n)}))},getLength:function(e){return e?u.length:h.length},isEnough:function(){return h.length>n.perPage}}},Layout:function(e,t,n){var i,r,o,a=Le(e),c=a.on,l=a.bind,u=a.emit,d=t.Slides,f=t.Direction.resolve,p=t.Elements,g=p.root,m=p.track,v=p.list,y=d.getAt,w=d.style;function b(){i=n.direction===Re,R(g,"maxWidth",Q(n.width)),R(m,f("paddingLeft"),I(!1)),R(m,f("paddingRight"),I(!0)),E(!0)}function E(e){var t,a=G(g);(e||r.width!==a.width||r.height!==a.height)&&(R(m,"height",(t="",i&&(te(t=C(),"height or heightRatio is missing."),t="calc("+t+" - "+I(!1)+" - "+I(!0)+")"),t)),w(f("marginRight"),Q(n.gap)),w("width",n.autoWidth?null:Q(n.fixedWidth)||(i?"":T())),w("height",Q(n.fixedHeight)||(i?n.autoHeight?null:T():C()),!0),r=a,u(Se),o!==(o=x())&&(S(g,Pt,o),u("overflow",o)))}function I(e){var t=n.padding,i=f(e?"right":"left");return t&&Q(t[i]||(h(t)?0:t))||"0px"}function C(){return Q(n.height||G(v).width*n.heightRatio)}function T(){var e=Q(n.gap);return"calc((100%"+(e&&" + "+e)+")/"+(n.perPage||1)+(e&&" - "+e)+")"}function P(){return G(v)[f("width")]}function A(e,t){var n=y(e||0);return n?G(n.slide)[f("width")]+(t?0:D()):0}function k(e,t){var n=y(e);if(n){var i=G(n.slide)[f("right")],r=G(v)[f("left")];return ae(i-r)+(t?0:D())}return 0}function _(t){return k(e.length-1)-k(0)+A(0,t)}function D(){var e=y(0);return e&&parseFloat(R(e.slide,f("marginRight")))||0}function x(){return e.is(Bt)||_(!0)>P()}return{mount:function(){var e,t;b(),l(window,"resize load",(e=s(u,Ie),t=Oe(0,e,null,1),function(){t.isPaused()&&t.start()})),c([Ee,be],b),c(Ie,E)},resize:E,listSize:P,slideSize:A,sliderSize:_,totalSize:k,getPadding:function(e){return parseFloat(R(m,f("padding"+(e?"Right":"Left"))))||0},isOverflow:x}},Clones:function(e,t,n){var i,r=Le(e),a=r.on,s=t.Elements,c=t.Slides,l=t.Direction.resolve,u=[];function d(){a(be,h),a([Ee,Ie],p),(i=g())&&(function(t){var i=c.get().slice(),r=i.length;if(r){for(;i.length<t;)I(i,i);I(i.slice(-t),i.slice(0,t)).forEach((function(o,a){var l=a<t,d=function(t,i){var r=t.cloneNode(!0);return C(r,n.classes.clone),r.id=e.root.id+"-clone"+he(i+1),r}(o.slide,a);l?P(d,i[0].slide):T(s.list,d),I(u,d),c.register(d,a-t+(l?0:r),o.index)}))}}(i),t.Layout.resize(!0))}function h(){f(),d()}function f(){U(u),o(u),r.destroy()}function p(){var e=g();i!==e&&(i<e||!e)&&r.emit(be)}function g(){var i=n.clones;if(e.is(Ot)){if(m(i)){var r=n[l("fixedWidth")]&&t.Layout.slideSize(0);i=r&&oe(G(s.track)[l("width")]/r)||n[l("autoWidth")]&&e.length||2*n.perPage}}else i=0;return i}return{mount:d,destroy:f}},Move:function(e,t,n){var i,r=Le(e),o=r.on,a=r.emit,s=e.state.set,c=t.Layout,l=c.slideSize,u=c.getPadding,d=c.totalSize,h=c.listSize,f=c.sliderSize,p=t.Direction,g=p.resolve,v=p.orient,y=t.Elements,w=y.list,b=y.track;function E(){t.Controller.isBusy()||(t.Scroll.cancel(),I(e.index),t.Slides.update())}function I(e){S(A(e,!0))}function S(n,i){if(!e.is(Bt)){var r=i?n:function(n){if(e.is(Ot)){var i=P(n),r=i>t.Controller.getEnd();(i<0||r)&&(n=C(n,r))}return n}(n);R(w,"transform","translate"+g("X")+"("+r+"px)"),n!==r&&a("sh")}}function C(e,t){var n=e-_(t),i=f();return e-v(i*(oe(ae(n)/i)||1))*(t?1:-1)}function T(){S(k(),!0),i.cancel()}function P(e){for(var n=t.Slides.get(),i=0,r=1/0,o=0;o<n.length;o++){var a=n[o].index,s=ae(A(a,!0)-e);if(!(s<=r))break;r=s,i=a}return i}function A(t,i){var r=v(d(t-1)-function(e){var t=n.focus;return"center"===t?(h()-l(e,!0))/2:+t*l(e)||0}(t));return i?function(t){return n.trimSpace&&e.is(Lt)&&(t=le(t,0,v(f(!0)-h()))),t}(r):r}function k(){var e=g("left");return G(w)[e]-G(b)[e]+v(u(!1))}function _(e){return A(e?t.Controller.getEnd():0,!!n.trimSpace)}return{mount:function(){i=t.Transition,o([ge,Se,Ee,be],E)},move:function(e,t,n,r){var o,c;e!==t&&(o=e>n,c=v(C(k(),o)),o?c>=0:c<=w[g("scrollWidth")]-G(b)[g("width")])&&(T(),S(C(k(),e>n),!0)),s(4),a(ve,t,n,e),i.start(t,(function(){s(3),a(ye,t,n,e),r&&r()}))},jump:I,translate:S,shift:C,cancel:T,toIndex:P,toPosition:A,getPosition:k,getLimit:_,exceededLimit:function(e,t){t=m(t)?k():t;var n=!0!==e&&v(t)<v(_(!1)),i=!1!==e&&v(t)>v(_(!0));return n||i},reposition:E}},Controller:function(e,t,n){var i,r,o,a,c=Le(e),l=c.on,u=c.emit,d=t.Move,h=d.getPosition,f=d.getLimit,p=d.toPosition,v=t.Slides,y=v.isEnough,w=v.getLength,b=n.omitEnd,E=e.is(Ot),I=e.is(Lt),S=s(_,!1),C=s(_,!0),T=n.start||0,P=T;function A(){r=w(!0),o=n.perMove,a=n.perPage,i=L();var e=le(T,0,b?i:r-1);e!==T&&(T=e,d.reposition())}function k(){i!==L()&&u(xe)}function _(e,t){var n=o||(M()?1:a),r=D(T+n*(e?-1:1),T,!(o||M()));return-1===r&&I&&!se(h(),f(!e),1)?e?0:i:t?r:x(r)}function D(t,s,c){if(y()||M()){var l=function(t){if(I&&"move"===n.trimSpace&&t!==T)for(var i=h();i===p(t,!0)&&ce(t,0,e.length-1,!n.rewind);)t<T?--t:++t;return t}(t);l!==t&&(s=t,t=l,c=!1),t<0||t>i?t=o||!ce(0,t,s,!0)&&!ce(i,s,t,!0)?E?c?t<0?-(r%a||a):r:t:n.rewind?t<0?i:0:-1:O(B(t)):c&&t!==s&&(t=O(B(s)+(t<s?-1:1)))}else t=-1;return t}function x(e){return E?(e+r)%r||0:e}function L(){for(var e=r-(M()||E&&o?1:a);b&&e-- >0;)if(p(r-1,!0)!==p(e,!0)){e++;break}return le(e,0,r-1)}function O(e){return le(M()?e:a*e,0,i)}function B(e){return M()?ne(e,i):re((e>=i?r-1:e)/a)}function N(e){e!==T&&(P=T,T=e)}function M(){return!m(n.focus)||n.isNavigation}function F(){return e.state.is([4,5])&&!!n.waitForTransition}return{mount:function(){A(),l([Ee,be,xe],A),l(Se,k)},go:function(e,t,n){if(!F()){var r=function(e){var t=T;if(g(e)){var n=e.match(/([+\-<>])(\d+)?/)||[],r=n[1],o=n[2];"+"===r||"-"===r?t=D(T+ +(""+r+(+o||1)),T):">"===r?t=o?O(+o):S(!0):"<"===r&&(t=C(!0))}else t=E?e:le(e,0,i);return t}(e),o=x(r);o>-1&&(t||o!==T)&&(N(o),d.move(r,o,P,n))}},scroll:function(e,n,r,o){t.Scroll.scroll(e,n,r,(function(){var e=x(d.toIndex(h()));N(b?ne(e,i):e),o&&o()}))},getNext:S,getPrev:C,getAdjacent:_,getEnd:L,setIndex:N,getIndex:function(e){return e?P:T},toIndex:O,toPage:B,toDest:function(e){var t=d.toIndex(e);return I?le(t,0,i):t},hasFocus:M,isBusy:F}},Arrows:function(e,t,n){var i,r,o=Le(e),a=o.on,c=o.bind,l=o.emit,u=n.classes,d=n.i18n,h=t.Elements,f=t.Controller,p=h.arrows,g=h.track,m=p,v=h.prev,y=h.next,w={};function b(){var e;!(e=n.arrows)||v&&y||(m=p||j("div",u.arrows),v=A(!0),y=A(!1),i=!0,T(m,[v,y]),!p&&P(m,g)),v&&y&&(O(w,{prev:v,next:y}),z(m,e?"":"none"),C(m,r=ut+"--"+n.direction),e&&(a([ge,ye,be,Te,xe],k),c(y,"click",s(S,">")),c(v,"click",s(S,"<")),k(),F([v,y],Ge,g.id),l("arrows:mounted",v,y))),a(Ee,E)}function E(){I(),b()}function I(){o.destroy(),J(m,r),i?(U(p?[v,y]:m),v=y=null):M([v,y],tt)}function S(e){f.go(e,!0)}function A(e){return V('<button class="'+u.arrow+" "+(e?u.prev:u.next)+'" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="40" height="40" focusable="false"><path d="'+(n.arrowPath||"m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z")+'" />')}function k(){if(v&&y){var t=e.index,n=f.getPrev(),i=f.getNext(),r=n>-1&&t<n?d.last:d.prev,o=i>-1&&t>i?d.first:d.next;v.disabled=n<0,y.disabled=i<0,F(v,qe,r),F(y,qe,o),l("arrows:updated",v,y,n,i)}}return{arrows:w,mount:b,destroy:I,update:k}},Autoplay:function(e,t,n){var i,r,o=Le(e),a=o.on,s=o.bind,c=o.emit,l=Oe(n.interval,e.go.bind(e,">"),(function(e){var t=d.bar;t&&R(t,"width",100*e+"%"),c("autoplay:playing",e)})),u=l.isPaused,d=t.Elements,h=t.Elements,f=h.root,p=h.toggle,g=n.autoplay,m="pause"===g;function v(){u()&&t.Slides.isEnough()&&(l.start(!n.resetProgress),r=i=m=!1,b(),c(ke))}function y(e){void 0===e&&(e=!0),m=!!e,b(),u()||(l.pause(),c(_e))}function w(){m||(i||r?y(!1):v())}function b(){p&&(S(p,bt,!m),F(p,qe,n.i18n[m?"play":"pause"]))}function E(e){var i=t.Slides.getAt(e);l.set(i&&+H(i.slide,Nt)||n.interval)}return{mount:function(){g&&(n.pauseOnHover&&s(f,"mouseenter mouseleave",(function(e){i="mouseenter"===e.type,w()})),n.pauseOnFocus&&s(f,"focusin focusout",(function(e){r="focusin"===e.type,w()})),p&&s(p,"click",(function(){m?v():y(!0)})),a([ve,Ce,be],l.rewind),a(ve,E),p&&F(p,Ge,d.track.id),m||v(),b())},destroy:l.cancel,play:v,pause:y,isPaused:u}},Cover:function(e,t,n){var i=Le(e).on;function r(e){t.Slides.forEach((function(t){var n=D(t.container||t.slide,"img");n&&n.src&&o(e,n,t)}))}function o(e,t,n){n.style("background",e?'center/cover no-repeat url("'+t.src+'")':"",!0),z(t,e?"none":"")}return{mount:function(){n.cover&&(i(De,s(o,!0)),i([ge,Ee,be],s(r,!0)))},destroy:s(r,!1)}},Scroll:function(e,t,n){var i,r,o=Le(e),a=o.on,c=o.emit,l=e.state.set,u=t.Move,d=u.getPosition,h=u.getLimit,f=u.exceededLimit,p=u.translate,g=e.is(Lt),m=1;function v(e,n,o,a,h){var p=d();if(b(),o&&(!g||!f())){var v=t.Layout.sliderSize(),E=ue(e)*v*re(ae(e)/v)||0;e=u.toPosition(t.Controller.toDest(e%v))+E}var I=se(p,e,1);m=1,n=I?0:n||ie(ae(e-p)/1.5,800),r=a,i=Oe(n,y,s(w,p,e,h),1),l(5),c(Ce),i.start()}function y(){l(3),r&&r(),c(Te)}function w(e,t,i,o){var a=d(),s=e+(t-e)*function(e){var t=n.easingFunc;return t?t(e):1-Math.pow(1-e,4)}(o),c=(s-a)*m;p(a+c),g&&!i&&f()&&(m*=.6,ae(c)<10&&v(h(f(!0)),600,!1,r,!0))}function b(){i&&i.cancel()}function E(){i&&!i.isPaused()&&(b(),y())}return{mount:function(){a(ve,b),a([Ee,be],E)},destroy:b,scroll:v,cancel:E}},Drag:function(e,t,n){var i,r,o,a,s,c,u,d,f=Le(e),p=f.on,g=f.emit,m=f.bind,v=f.unbind,y=e.state,w=t.Move,b=t.Scroll,E=t.Controller,I=t.Elements.track,S=t.Media.reduce,C=t.Direction,T=C.resolve,P=C.orient,k=w.getPosition,_=w.exceededLimit,D=!1;function x(){var e=n.drag;H(!e),a="free"===e}function L(e){if(c=!1,!u){var t=$(e);i=e.target,r=n.noDrag,A(i,"."+gt+", ."+dt)||r&&A(i,r)||!t&&e.button||(E.isBusy()?q(e,!0):(d=t?I:window,s=y.is([4,5]),o=null,m(d,Dt,O,Mt),m(d,xt,B,Mt),w.cancel(),b.cancel(),M(e)))}var i,r}function O(t){if(y.is(6)||(y.set(6),g("drag")),t.cancelable)if(s){w.translate(i+F(t)/(D&&e.is(Lt)?5:1));var r=j(t)>200,o=D!==(D=_());(r||o)&&M(t),c=!0,g("dragging"),q(t)}else(function(e){return ae(F(e))>ae(F(e,!0))})(t)&&(s=function(e){var t=n.dragMinThreshold,i=h(t),r=i&&t.mouse||0,o=(i?t.touch:+t)||10;return ae(F(e))>($(e)?o:r)}(t),q(t))}function B(i){y.is(6)&&(y.set(3),g("dragged")),s&&(function(i){var r=function(t){if(e.is(Ot)||!D){var n=j(t);if(n&&n<200)return F(t)/n}return 0}(i),o=function(e){return k()+ue(e)*ne(ae(e)*(n.flickPower||600),a?1/0:t.Layout.listSize()*(n.flickMaxPages||1))}(r),s=n.rewind&&n.rewindByDrag;S(!1),a?E.scroll(o,0,n.snap):e.is(Bt)?E.go(P(ue(r))<0?s?"<":"-":s?">":"+"):e.is(Lt)&&D&&s?E.go(_(!0)?">":"<"):E.go(E.toDest(o),!0),S(!0)}(i),q(i)),v(d,Dt,O),v(d,xt,B),s=!1}function N(e){!u&&c&&q(e,!0)}function M(e){o=r,r=e,i=k()}function F(e,t){return z(e,t)-z(R(e),t)}function j(e){return K(e)-K(R(e))}function R(e){return r===e&&o||r}function z(e,t){return($(e)?e.changedTouches[0]:e)["page"+T(t?"Y":"X")]}function $(e){return"undefined"!=typeof TouchEvent&&e instanceof TouchEvent}function H(e){u=e}return{mount:function(){m(I,Dt,l,Mt),m(I,xt,l,Mt),m(I,_t,L,Mt),m(I,"click",N,{capture:!0}),m(I,"dragstart",q),p([ge,Ee],x)},disable:H,isDragging:function(){return s}}},Keyboard:function(e,t,n){var i,r,o=Le(e),a=o.on,s=o.bind,l=o.unbind,u=e.root,d=t.Direction.resolve;function h(){var e=n.keyboard;e&&(i="global"===e?window:u,s(i,Rt,g))}function f(){l(i,Rt)}function p(){var e=r;r=!0,c((function(){r=e}))}function g(t){if(!r){var n=jt(t);n===d(Ne)?e.go("<"):n===d(Me)&&e.go(">")}}return{mount:function(){h(),a(Ee,f),a(Ee,h),a(ve,p)},destroy:f,disable:function(e){r=e}}},LazyLoad:function(e,t,n){var i=Le(e),r=i.on,a=i.off,c=i.bind,l=i.emit,u="sequential"===n.lazyLoad,d=[ye,Te],h=[];function f(){o(h),t.Slides.forEach((function(e){Y(e.slide,Ht).forEach((function(t){var i=H(t,zt),r=H(t,$t);if(i!==t.src||r!==t.srcset){var o=n.classes.spinner,a=t.parentElement,s=D(a,"."+o)||j("span",o,a);h.push([t,e,s]),t.src||z(t,"none")}}))})),u?v():(a(d),r(d,p),p())}function p(){(h=h.filter((function(t){var i=n.perPage*((n.preloadPages||1)+1)-1;return!t[1].isWithin(e.index,i)||g(t)}))).length||a(d)}function g(e){var t=e[0];C(e[1].slide,Ct),c(t,"load error",s(m,e)),F(t,"src",H(t,zt)),F(t,"srcset",H(t,$t)),M(t,zt),M(t,$t)}function m(e,t){var n=e[0],i=e[1];J(i.slide,Ct),"error"!==t.type&&(U(e[2]),z(n,""),l(De,n,i),l(Ie)),u&&v()}function v(){h.length&&g(h.shift())}return{mount:function(){n.lazyLoad&&(f(),r(be,f))},destroy:s(o,h),check:p}},Pagination:function(e,t,n){var i,r,c=Le(e),l=c.on,u=c.emit,d=c.bind,h=t.Slides,f=t.Elements,p=t.Controller,g=p.hasFocus,m=p.getIndex,v=p.go,y=t.Direction.resolve,w=f.pagination,b=[];function E(){i&&(U(w?a(i.children):i),J(i,r),o(b),i=null),c.destroy()}function I(e){v(">"+e,!0)}function S(e,t){var n=b.length,i=jt(t),r=T(),o=-1;i===y(Me,!1,r)?o=++e%n:i===y(Ne,!1,r)?o=(--e+n)%n:"Home"===i?o=0:"End"===i&&(o=n-1);var a=b[o];a&&($(a.button),v(">"+o),q(t,!0))}function T(){return n.paginationDirection||n.direction}function P(e){return b[p.toPage(e)]}function A(){var e=P(m(!0)),t=P(m());if(e){var n=e.button;J(n,bt),M(n,Ve),F(n,He,-1)}if(t){var r=t.button;C(r,bt),F(r,Ve,!0),F(r,He,"")}u("pagination:updated",{list:i,items:b},e,t)}return{items:b,mount:function t(){E(),l([Ee,be,xe],t);var o=n.pagination;w&&z(w,o?"":"none"),o&&(l([ve,Ce,Te],A),function(){var t=e.length,o=n.classes,a=n.i18n,c=n.perPage,l=g()?p.getEnd()+1:oe(t/c);C(i=w||j("ul",o.pagination,f.track.parentElement),r=pt+"--"+T()),F(i,$e,"tablist"),F(i,qe,a.select),F(i,Je,T()===Re?"vertical":"");for(var u=0;u<l;u++){var m=j("li",null,i),v=j("button",{class:o.page,type:"button"},m),y=h.getIn(u).map((function(e){return e.slide.id})),E=!g()&&c>1?a.pageX:a.slideX;d(v,"click",s(I,u)),n.paginationKeyboard&&d(v,"keydown",s(S,u)),F(m,$e,"presentation"),F(v,$e,"tab"),F(v,Ge,y.join(" ")),F(v,qe,de(E,u+1)),F(v,He,-1),b.push({li:m,button:v,page:u})}}(),A(),u("pagination:mounted",{list:i,items:b},P(e.index)))},destroy:E,getAt:P,update:A}},Sync:function(e,t,n){var i=n.isNavigation,r=n.slideFocus,a=[];function c(){var t,n;e.splides.forEach((function(t){t.isParent||(u(e,t.splide),u(t.splide,e))})),i&&((n=(t=Le(e)).on)(we,h),n("sk",f),n([ge,Ee],d),a.push(t),t.emit(Ae,e.splides))}function l(){a.forEach((function(e){e.destroy()})),o(a)}function u(e,t){var n=Le(e);n.on(ve,(function(e,n,i){t.go(t.is(Ot)?i:e)})),a.push(n)}function d(){F(t.Elements.list,Je,n.direction===Re?"vertical":"")}function h(t){e.go(t.index)}function f(e,t){E(Wt,jt(t))&&(h(e),q(t))}return{setup:s(t.Media.set,{slideFocus:m(r)?i:r},!0),mount:c,destroy:l,remount:function(){l(),c()}}},Wheel:function(e,t,n){var i=Le(e).bind,r=0;function o(i){if(i.cancelable){var o=i.deltaY,a=o<0,s=K(i),c=n.wheelMinThreshold||0,l=n.wheelSleep||0;ae(o)>c&&s-r>l&&(e.go(a?"<":">"),r=s),function(i){return!n.releaseWheel||e.state.is(4)||-1!==t.Controller.getAdjacent(i)}(a)&&q(i)}}return{mount:function(){n.wheel&&i(t.Elements.track,"wheel",o,Mt)}}},Live:function(e,t,n){var i=Le(e).on,r=t.Elements.track,o=n.live&&!n.isNavigation,a=j("span",yt),c=Oe(90,s(l,!1));function l(e){F(r,Ze,e),e?(T(r,a),c.start()):(U(a),c.cancel())}function u(e){o&&F(r,Qe,e?"off":"polite")}return{mount:function(){o&&(u(!t.Autoplay.isPaused()),F(r,et,!0),a.textContent="…",i(ke,s(u,!0)),i(_e,s(u,!1)),i([ye,Te],s(l,!0)))},disable:u,destroy:function(){M(r,[Qe,et,Ze]),U(a)}}}}),Ut={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:kt,i18n:{prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function Vt(e,t,n){var i=t.Slides;function r(){i.forEach((function(e){e.style("transform","translateX(-"+100*e.index+"%)")}))}return{mount:function(){Le(e).on([ge,be],r)},start:function(e,t){i.style("transition","opacity "+n.speed+"ms "+n.easing),c(t)},cancel:l}}function qt(e,t,n){var i,r=t.Move,o=t.Controller,a=t.Scroll,c=t.Elements.list,l=s(R,c,"transition");function u(){l(""),a.cancel()}return{mount:function(){Le(e).bind(c,"transitionend",(function(e){e.target===c&&i&&(u(),i())}))},start:function(t,s){var c=r.toPosition(t,!0),u=r.getPosition(),d=function(t){var i=n.rewindSpeed;if(e.is(Lt)&&i){var r=o.getIndex(!0),a=o.getEnd();if(0===r&&t>=a||r>=a&&0===t)return i}return n.speed}(t);ae(c-u)>=1&&d>=1?n.useScroll?a.scroll(c,d,!1,s):(l("transform "+d+"ms "+n.easing),r.translate(c,!0),i=s):(r.jump(t),s())},cancel:u}}var Xt=function(){function e(t,n){var i;this.event=Le(),this.Components={},this.state=(i=1,{set:function(e){i=e},is:function(e){return E(w(e),i)}}),this.splides=[],this._o={},this._E={};var r=g(t)?X(document,t):t;te(r,r+" is invalid."),this.root=r,n=B({label:H(r,qe)||"",labelledby:H(r,Xe)||""},Ut,e.defaults,n||{});try{B(n,JSON.parse(H(r,ee)))}catch(e){te(!1,"Invalid JSON")}this._o=Object.create(B({},n))}var t,n,r=e.prototype;return r.mount=function(e,t){var n=this,i=this.state,r=this.Components;return te(i.is([1,7]),"Already mounted!"),i.set(1),this._C=r,this._T=t||this._T||(this.is(Bt)?Vt:qt),this._E=e||this._E,L(O({},Gt,this._E,{Transition:this._T}),(function(e,t){var i=e(n,r,n._o);r[t]=i,i.setup&&i.setup()})),L(r,(function(e){e.mount&&e.mount()})),this.emit(ge),C(this.root,wt),i.set(3),this.emit(me),this},r.sync=function(e){return this.splides.push({splide:e}),e.splides.push({splide:this,isParent:!0}),this.state.is(3)&&(this._C.Sync.remount(),e.Components.Sync.remount()),this},r.go=function(e){return this._C.Controller.go(e),this},r.on=function(e,t){return this.event.on(e,t),this},r.off=function(e){return this.event.off(e),this},r.emit=function(e){var t;return(t=this.event).emit.apply(t,[e].concat(a(arguments,1))),this},r.add=function(e,t){return this._C.Slides.add(e,t),this},r.remove=function(e){return this._C.Slides.remove(e),this},r.is=function(e){return this._o.type===e},r.refresh=function(){return this.emit(be),this},r.destroy=function(e){void 0===e&&(e=!0);var t=this.event,n=this.state;return n.is(1)?Le(this).on(me,this.destroy.bind(this,e)):(L(this._C,(function(t){t.destroy&&t.destroy(e)}),!0),t.emit(Pe),t.destroy(),e&&o(this.splides),n.set(7)),this},t=e,(n=[{key:"options",get:function(){return this._o},set:function(e){this._C.Media.set(e,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Yt=Xt;Yt.defaults={},Yt.STATES={CREATED:1,MOUNTED:2,IDLE:3,MOVING:4,SCROLLING:5,DRAGGING:6,DESTROYED:7};class Jt{constructor(e,t){this.emptyGlowImageTag="empty_glow_image",this.currentlyPlayingAudioElement=null,this.currentlyActiveGlowImages=[],this.currentlyActiveWord=null,this.imagesPath=e,this.audioPath=t,this.currentPage=0,this.splideHandle=new Yt(".splide",{fixedHeight:window.innerHeight-20}).mount(),this.splideHandle.on("move",((e,t,n)=>{this.currentPage!==e&&(console.log("Stopping audio for page from move: "+t),this.transitioningToPage=!0,this.stopPageAudio(this.book.pages[t]))})),this.splideHandle.on("moved",((e,t,n)=>{this.currentPage!==e&&(console.log("Playing audio for page from moved: "+e),this.currentPage=e,this.transitioningToPage=!1,this.playPageAudio(this.book.pages[e],e))})),this.splideHandle.on("drag",((e,t,n)=>{this.currentPage!==e&&(console.log("Stopping audio for page from drag: "+t),this.transitioningToPage=!0,this.stopPageAudio(this.book.pages[t]))})),this.splideHandle.on("dragged",((e,t,n)=>{this.currentPage!==e&&(console.log("Playing audio for page from dragged: "+e),this.currentPage=e,this.transitioningToPage=!1,this.playPageAudio(this.book.pages[e],e))})),this.addPageResizeListener(),this.addMinimzationListener()}addMinimzationListener(){document.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState?this.playPageAudio(this.book.pages[this.currentPage],this.currentPage):this.stopPageAudio(this.book.pages[this.currentPage])}))}stopPageAudio(e){for(let t=0;t<e.visualElements.length;t++){let n=e.visualElements[t];if("audio"===n.type){let e=n,t=document.getElementById(e.domID);t.pause(),t.currentTime=0,clearInterval(this.currentPageAutoPlayerInterval);for(let t=0;t<e.audioTimestamps.timestamps.length;t++){let n=document.getElementById(e.domID+"_word_"+t);n.classList.remove("cr-clickable-word-active"),n.style.color="white"}}}}playPageAudio(e,t){console.log("Attempting to play audio for page: "+t),console.log("Book has: "+this.book.pages.length+" pages"),console.log("The page has "+e.visualElements.length+" visual elements");for(let n=0;n<e.visualElements.length;n++){let i=e.visualElements[n];if("audio"===i.type){let e=i;console.log("Found the audio element in page's visual elements: "+e.audioSrc),console.log("Does the audio element have timestamps? "+(void 0!==e.audioTimestamps?"Yes":"No")),console.log("Audio element domID: "+e.domID);let n=document.getElementById(e.domID);console.log("Audio element dom is null or undefined? "+(null==n?"Yes":"No")),n.play(),this.currentlyPlayingAudioElement=n;let r=0,o=0;console.log("Starting the auto player interval for word highlighting with 60ms interval"),this.currentPageAutoPlayerInterval=setInterval((()=>{if(void 0!==e.audioTimestamps){let i=n.currentTime;for(let n=0;n<e.audioTimestamps.timestamps.length;n++){if(i>=e.audioTimestamps.timestamps[n].startTimestamp&&i<=e.audioTimestamps.timestamps[n].endTimestamp){o=n;let i=document.getElementById(e.domID+"_word_"+o);this.currentlyActiveWord=i,i.classList.add("cr-clickable-word-active"),i.style.color=e.glowColor,this.enableConnectedGraphicHighlighting(t,o)}if(r<o){let t=document.getElementById(e.domID+"_word_"+r);t.classList.remove("cr-clickable-word-active"),t.style.color="white",r=o}}if(i>=e.audioTimestamps.timestamps[e.audioTimestamps.timestamps.length-1].endTimestamp-.1){let t=document.getElementById(e.domID+"_word_"+o);t.classList.remove("cr-clickable-word-active"),t.style.color="white",this.currentlyPlayingAudioElement=null,clearInterval(this.currentPageAutoPlayerInterval)}}}),60)}}}addPageResizeListener(){window.addEventListener("resize",(()=>{this.splideHandle.options.fixedHeight=window.innerHeight-20,this.splideHandle.refresh()}))}initializeBook(t){this.book=t,this.currentBookType=t.bookType,this.numberOfPages=t.pages.length,this.currentBookType===e.CuriousReader?this.initializeCuriousReaderBook(t):this.currentBookType===e.GDL&&this.initializeGDLBook(t)}initializeCuriousReaderBook(e){this.numberOfPages=e.pages.length;for(let t=0;t<e.pages.length;t++){const n=document.createElement("li"),i=document.createElement("div");n.style.display="flex",n.style.justifyContent="center",n.style.alignItems="center",i.style.position="relative",i.style.width="90%",i.style.height="90%",i.style.top="-4%",n.appendChild(i),n.classList.add("splide__slide");let r=!1;for(let o=0;o<e.pages[t].visualElements.length;o++){let a=e.pages[t].visualElements[o];if("image"==a.type){let e=a,n=t;i.appendChild(this.createImageContainer(n,e,o))}else if("audio"==a.type){r=!0;let n=a,o=null;for(let n=0;n<e.pages[t].visualElements.length;n++){let i=e.pages[t].visualElements[n];if("text"==i.type){o=i;break}}let s=null;for(let n=0;n<e.pages[t].visualElements.length;n++){let i=e.pages[t].visualElements[n];if("image"==i.type){s=i;break}}if(o){let e=this.createAudioAndTextContainers(t,n,o,s);i.appendChild(e[0]),i.appendChild(e[1])}else i.appendChild(this.createAudioContainer(n))}this.splideHandle.add(n)}if(!r)for(let n=0;n<e.pages[t].visualElements.length;n++){let r=e.pages[t].visualElements[n];if("text"==r.type){let e=r;i.appendChild(this.createTextContainer(e))}}}}createTextContainer(e){let t=document.createElement("div");return t.id="cr-text",t.classList.add("cr-text"),t.style.position="absolute",t.style.webkitTextStroke="1px #303030",t.style.color="#FFFFFF",t.style.textShadow="0.1rem 0.15rem 0.1rem #303030",t.style.fontFamily="Quicksand",t.style.fontWeight="800",t.style.fontSize="inherit",t.style.top=e.positionY+"%",t.style.left=e.positionX+"%",t.style.width=e.width+"%",t.style.height=e.height+"%",t.innerHTML=e.textContentAsHTML.replace(/font-size:[^;]+;/g,""),t}createImageContainer(e,t,n){let i=document.createElement("div");if(i.style.position="absolute",i.style.top=t.positionY+"%",i.style.left=t.positionX+"%",i.style.width=t.width+"%",i.style.height=t.height+"%",t.imageSource===this.emptyGlowImageTag)if(i.classList.add("cr-image-empty-glow"),void 0===t.domID||null===t.domID||""===t.domID){const t="img"+e+"_"+n;i.id=t,i.addEventListener("click",(()=>{this.handleStandaloneGlowImageClick(e,t)}))}else i.classList.add(t.domID),i.addEventListener("click",(()=>{this.handleGlowImageClick(e,t.domID.split("_")[1])}));else{i.id=t.domID,i.classList.add("cr-image");let e=document.createElement("img");e.src=this.imagesPath+t.imageSource.replace("images/",""),e.style.width="100%",e.style.height="100%",i.appendChild(e)}return i}createAudioContainer(e){let t=document.createElement("div");t.classList.add("cr-audio"),t.style.position="absolute";let n=document.createElement("audio");if(n.id=e.domID,n.src=this.audioPath+e.audioSrc.replace("audios/",""),n.controls=!1,t.appendChild(n),void 0!==e.audioTimestamps)for(let n=0;n<e.audioTimestamps.timestamps.length;n++){let i=e.audioTimestamps.timestamps[n],r=document.createElement("audio");r.id=i.domID,r.src=this.audioPath+i.audioSrc.replace("audios/",""),r.controls=!1,t.appendChild(r)}return t}createAudioAndTextContainers(e,t,n,i){let r=Array(),o=document.createElement("div");o.classList.add("cr-audio"),o.style.position="absolute";let a=document.createElement("audio");a.id=t.domID,a.src=this.audioPath+t.audioSrc.replace("audios/",""),a.controls=!1,o.appendChild(a);let s=Array();if(void 0!==t.audioTimestamps)for(let e=0;e<t.audioTimestamps.timestamps.length;e++){let n=t.audioTimestamps.timestamps[e],i=document.createElement("audio");i.id=n.domID,i.src=this.audioPath+n.audioSrc.replace("audios/",""),i.controls=!1,s.push(n.word.trim()),o.appendChild(i)}r.push(o);let c=t.domID,l=document.createElement("div");l.id="cr-text",l.classList.add("cr-text"),l.style.position="absolute",l.style.display="flex",l.style.justifyContent="center",l.style.alignItems="center",l.style.webkitTextStroke="1px #303030",l.style.color="#FFFFFF",l.style.textShadow="0.1rem 0.15rem 0.1rem #303030",l.style.fontFamily="Quicksand",l.style.fontWeight="800",l.style.top=n.positionY+"%",l.style.height=n.height+"%",i.positionX>28&&n.width<88&&n.positionY<65?(l.style.left=n.positionX+"%",l.style.width="42%"):i.positionX<=28&&n.width<88?(l.style.left=n.positionX+2+"%",l.style.width=n.width+"%"):l.style.width="100%";let u=document.createElement("p");void 0!==t.audioTimestamps&&t.audioTimestamps.timestamps.length>15?u.classList.add("cr-sentence-mini-s"):void 0!==t.audioTimestamps&&t.audioTimestamps.timestamps.length>12&&t.audioTimestamps.timestamps.length<=15&&u.classList.add("cr-sentence-mini"),u.style.textAlign="center",u.style.margin="0px";for(let t=0;t<s.length;t++){let n=document.createElement("div");n.id=c+"_word_"+t,n.classList.add("cr-clickable-word"),n.style.marginLeft="10px",n.style.marginRight="10px",n.innerText=s[t],n.addEventListener("click",(n=>{this.handleInteractiveWordClick(e,t)})),u.appendChild(n)}return l.appendChild(u),r.push(l),r}handleStandaloneGlowImageClick(e,t){if(null!==this.currentlyPlayingAudioElement&&(this.currentlyPlayingAudioElement.pause(),this.currentlyPlayingAudioElement.currentTime=0,clearInterval(this.currentPageAutoPlayerInterval),clearTimeout(this.currentWordPlayingTimeout),clearTimeout(this.currentGlowImageTimeout),this.currentlyActiveGlowImages.length>0))for(let e=0;e<this.currentlyActiveGlowImages.length;e++)this.currentlyActiveGlowImages[e].style.boxShadow="transparent 0px 0px 20px 20px";this.currentlyActiveGlowImages=Array();let n=document.getElementById(t);this.currentlyActiveGlowImages.push(n),n.style.boxShadow="orange 0px 0px 20px 20px",this.currentGlowImageTimeout=setTimeout((()=>{document.getElementById(t).style.boxShadow="transparent 0px 0px 20px 20px"}),600)}handleGlowImageClick(e,t){let n=parseInt(t);this.handleInteractiveWordClick(e,n)}enableConnectedGraphicHighlighting(e,t){this.handleInteractiveWordClick(e,t,!0)}handleInteractiveWordClick(e,t,n=!1){if(null!==this.currentlyPlayingAudioElement&&!n&&(this.currentlyPlayingAudioElement.pause(),this.currentlyPlayingAudioElement.currentTime=0,clearInterval(this.currentPageAutoPlayerInterval),clearTimeout(this.currentWordPlayingTimeout),clearTimeout(this.currentGlowImageTimeout),null!==this.currentlyActiveWord&&(this.currentlyActiveWord.classList.remove("cr-clickable-word-active"),this.currentlyActiveWord.style.color="white"),this.currentlyActiveGlowImages.length>0))for(let e=0;e<this.currentlyActiveGlowImages.length;e++)this.currentlyActiveGlowImages[e].style.boxShadow="transparent 0px 0px 20px 20px";this.currentlyActiveGlowImages=Array();let i=this.book.pages[e];for(let e=0;e<i.visualElements.length;e++){let r=i.visualElements[e];if("audio"===r.type){let e=r,i=document.getElementById(e.audioTimestamps.timestamps[t].domID);if(!n){let n=document.getElementById(e.domID+"_word_"+t);this.currentlyActiveWord=n,n.classList.add("cr-clickable-word-active"),n.style.color=e.glowColor,this.currentWordPlayingTimeout=setTimeout((()=>{n.classList.remove("cr-clickable-word-active"),n.style.color="white"}),600)}let o="img"+e.domID+"_"+t,a=document.getElementsByClassName(o);for(let t=0;t<a.length;t++){let n=a[t];this.currentlyActiveGlowImages.push(n),n.style.boxShadow=e.glowColor+" 0px 0px 20px 20px"}this.currentGlowImageTimeout=setTimeout((()=>{for(let e=0;e<a.length;e++)a[e].style.boxShadow="transparent 0px 0px 20px 20px"}),600),n||(this.currentlyPlayingAudioElement=i,i.play())}}}initializeGDLBook(e){for(let t=0;t<e.pages.length;t++){const n=document.createElement("li");n.classList.add("splide__slide");let i=document.createElement("div");i.classList.add("gdl-flex-container"),i.style.display="flex",i.style.flexDirection="column",i.style.justifyContent="center",i.style.alignItems="center",i.style.height="100%",i.style.width="100%",n.appendChild(i);for(let n=0;n<e.pages[t].visualElements.length;n++){let r=e.pages[t].visualElements[n];if("text"==r.type){let e=r,t=document.createElement("div");t.style.width="60%",t.classList.add("gdl-text"),t.style.webkitTextStroke="1px #303030",t.style.color="#FFFFFF",t.style.textShadow="0.1rem 0.15rem 0.1rem #303030",t.style.fontFamily="Quicksand",t.style.fontWeight="800",t.style.fontSize="1.7em",t.innerHTML=e.textContentAsHTML.replace("2.25em","28px"),i.appendChild(t)}else if("image"==r.type){let e=r,t=document.createElement("div");t.classList.add("gdl-image");let n=document.createElement("img");n.src=this.imagesPath+e.imageSource.replace("images/",""),n.style.width="100%",n.style.height="100%",t.appendChild(n),i.appendChild(t)}}this.splideHandle.add(n)}}goToNextPage(){this.transitioningToPage||(this.currentPage<this.numberOfPages&&this.currentPage++,this.transitionToPage(this.currentPage))}goToPreviousPage(){this.transitioningToPage||(this.currentPage>0&&this.currentPage--,this.transitionToPage(this.currentPage))}transitionToPage(e){this.transitioningToPage=!0}}try{self["workbox:window:6.5.3"]&&_()}catch(Kt){}function Kt(e,t){return new Promise((function(n){var i=new MessageChannel;i.port1.onmessage=function(e){n(e.data)},e.postMessage(t,[i.port2])}))}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Zt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.5.3"]&&_()}catch(Kt){}var en=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};function tn(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var nn=function(e,t){this.type=e,Object.assign(this,t)};function rn(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function on(){}var an={type:"SKIP_WAITING"};function sn(e,t){if(!t)return e&&e.then?e.then(on):Promise.resolve()}var cn=function(e){var t,n;function i(t,n){var i,r;return void 0===n&&(n={}),(i=e.call(this)||this).nn={},i.tn=0,i.rn=new en,i.en=new en,i.on=new en,i.un=0,i.an=new Set,i.cn=function(){var e=i.fn,t=e.installing;i.tn>0||!tn(t.scriptURL,i.sn.toString())||performance.now()>i.un+6e4?(i.vn=t,e.removeEventListener("updatefound",i.cn)):(i.hn=t,i.an.add(t),i.rn.resolve(t)),++i.tn,t.addEventListener("statechange",i.ln)},i.ln=function(e){var t=i.fn,n=e.target,r=n.state,o=n===i.vn,a={sw:n,isExternal:o,originalEvent:e};!o&&i.mn&&(a.isUpdate=!0),i.dispatchEvent(new nn(r,a)),"installed"===r?i.wn=self.setTimeout((function(){"installed"===r&&t.waiting===n&&i.dispatchEvent(new nn("waiting",a))}),200):"activating"===r&&(clearTimeout(i.wn),o||i.en.resolve(n))},i.dn=function(e){var t=i.hn,n=t!==navigator.serviceWorker.controller;i.dispatchEvent(new nn("controlling",{isExternal:n,originalEvent:e,sw:t,isUpdate:i.mn})),n||i.on.resolve(t)},i.gn=(r=function(e){var t=e.data,n=e.ports,r=e.source;return rn(i.getSW(),(function(){i.an.has(r)&&i.dispatchEvent(new nn("message",{data:t,originalEvent:e,ports:n,sw:r}))}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(r.apply(this,e))}catch(e){return Promise.reject(e)}}),i.sn=t,i.nn=n,navigator.serviceWorker.addEventListener("message",i.gn),i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,o=i.prototype;return o.register=function(e){var t=(void 0===e?{}:e).immediate,n=void 0!==t&&t;try{var i=this;return function(e,t){var n=e();return n&&n.then?n.then(t):t()}((function(){if(!n&&"complete"!==document.readyState)return sn(new Promise((function(e){return window.addEventListener("load",e)})))}),(function(){return i.mn=Boolean(navigator.serviceWorker.controller),i.yn=i.pn(),rn(i.bn(),(function(e){i.fn=e,i.yn&&(i.hn=i.yn,i.en.resolve(i.yn),i.on.resolve(i.yn),i.yn.addEventListener("statechange",i.ln,{once:!0}));var t=i.fn.waiting;return t&&tn(t.scriptURL,i.sn.toString())&&(i.hn=t,Promise.resolve().then((function(){i.dispatchEvent(new nn("waiting",{sw:t,wasWaitingBeforeRegister:!0}))})).then((function(){}))),i.hn&&(i.rn.resolve(i.hn),i.an.add(i.hn)),i.fn.addEventListener("updatefound",i.cn),navigator.serviceWorker.addEventListener("controllerchange",i.dn),i.fn}))}))}catch(e){return Promise.reject(e)}},o.update=function(){try{return this.fn?sn(this.fn.update()):void 0}catch(e){return Promise.reject(e)}},o.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},o.messageSW=function(e){try{return rn(this.getSW(),(function(t){return Kt(t,e)}))}catch(e){return Promise.reject(e)}},o.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&Kt(this.fn.waiting,an)},o.pn=function(){var e=navigator.serviceWorker.controller;return e&&tn(e.scriptURL,this.sn.toString())?e:void 0},o.bn=function(){try{var e=this;return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return rn(navigator.serviceWorker.register(e.sn,e.nn),(function(t){return e.un=performance.now(),t}))}),(function(e){throw e}))}catch(e){return Promise.reject(e)}},(r=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(i.prototype,r),i}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(e,t){this.Sn(e).add(t)},t.removeEventListener=function(e,t){this.Sn(e).delete(t)},t.dispatchEvent=function(e){e.target=this;for(var t,n=Zt(this.Sn(e.type));!(t=n()).done;)(0,t.value)(e)},t.Sn=function(e){return this.Pn.has(e)||this.Pn.set(e,new Set),this.Pn.get(e)},e}());const ln=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},un={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const r=e[t],o=t+1<e.length,a=o?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=r>>2,u=(3&r)<<4|a>>4;let d=(15&a)<<2|c>>6,h=63&c;s||(h=64,o||(d=64)),i.push(n[l],n[u],n[d],n[h])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ln(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&o)}else if(r>239&&r<365){const o=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(o>>10)),t[i++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const r=n[e.charAt(t++)],o=t<e.length?n[e.charAt(t)]:0;++t;const a=t<e.length?n[e.charAt(t)]:64;++t;const s=t<e.length?n[e.charAt(t)]:64;if(++t,null==r||null==o||null==a||null==s)throw new dn;const c=r<<2|o>>4;if(i.push(c),64!==a){const e=o<<4&240|a>>2;if(i.push(e),64!==s){const e=a<<6&192|s;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class dn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hn=function(e){return function(e){const t=ln(e);return un.encodeByteArray(t,!0)}(e).replace(/\./g,"")},fn=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t.g)return t.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&function(e){try{return un.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},pn=()=>{var e;return null===(e=fn())||void 0===e?void 0:e.config};class gn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function mn(){try{return"object"==typeof indexedDB}catch(e){return!1}}function vn(){return new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}class yn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wn.prototype.create)}}class wn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],o=r?function(e,t){return e.replace(bn,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new yn(i,a,n)}}const bn=/\{\$([^}]+)}/g;function En(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],o=t[r];if(In(n)&&In(o)){if(!En(n,o))return!1}else if(n!==o)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function In(e){return null!==e&&"object"==typeof e}function Sn(e,t=1e3,n=2){const i=t*Math.pow(n,e),r=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+r)}function Cn(e){return e&&e._delegate?e._delegate:e}class Tn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Pn="[DEFAULT]";class An{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new gn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Pn})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=Pn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=Pn){return this.instances.has(e)}getOptions(e=Pn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===Pn?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e=Pn){return this.component?this.component.multipleInstances?e:Pn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class kn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new An(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const _n=[];var Dn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Dn||(Dn={}));const xn={debug:Dn.DEBUG,verbose:Dn.VERBOSE,info:Dn.INFO,warn:Dn.WARN,error:Dn.ERROR,silent:Dn.SILENT},Ln=Dn.INFO,On={[Dn.DEBUG]:"log",[Dn.VERBOSE]:"log",[Dn.INFO]:"info",[Dn.WARN]:"warn",[Dn.ERROR]:"error"},Bn=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),r=On[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${i}]  ${e.name}:`,...n)};class Nn{constructor(e){this.name=e,this._logLevel=Ln,this._logHandler=Bn,this._userLogHandler=null,_n.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Dn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?xn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Dn.DEBUG,...e),this._logHandler(this,Dn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Dn.VERBOSE,...e),this._logHandler(this,Dn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Dn.INFO,...e),this._logHandler(this,Dn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Dn.WARN,...e),this._logHandler(this,Dn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Dn.ERROR,...e),this._logHandler(this,Dn.ERROR,...e)}}let Mn,Fn;const jn=new WeakMap,Rn=new WeakMap,zn=new WeakMap,$n=new WeakMap,Hn=new WeakMap;let Wn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Rn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||zn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Un(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Gn(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Fn||(Fn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Vn(this),e),Un(jn.get(this))}:function(...e){return Un(t.apply(Vn(this),e))}:function(e,...n){const i=t.call(Vn(this),e,...n);return zn.set(i,e.sort?e.sort():[e]),Un(i)}:(e instanceof IDBTransaction&&function(e){if(Rn.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{t(),i()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)}));Rn.set(e,t)}(e),n=e,(Mn||(Mn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>n instanceof e))?new Proxy(e,Wn):e);var t,n}function Un(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{t(Un(e.result)),i()},o=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&jn.set(t,e)})).catch((()=>{})),Hn.set(t,e),t}(e);if($n.has(e))return $n.get(e);const t=Gn(e);return t!==e&&($n.set(e,t),Hn.set(t,e)),t}const Vn=e=>Hn.get(e);function qn(e,t,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(e,t),s=Un(a);return i&&a.addEventListener("upgradeneeded",(e=>{i(Un(a.result),e.oldVersion,e.newVersion,Un(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{o&&e.addEventListener("close",(()=>o())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}const Xn=["get","getKey","getAll","getAllKeys","count"],Yn=["put","add","delete","clear"],Jn=new Map;function Kn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Jn.get(t))return Jn.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Yn.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Xn.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,r?"readwrite":"readonly");let a=o.store;return i&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),r&&o.done]))[0]};return Jn.set(t,o),o}var Qn;Qn=Wn,Wn={...Qn,get:(e,t,n)=>Kn(e,t)||Qn.get(e,t,n),has:(e,t)=>!!Kn(e,t)||Qn.has(e,t)};class Zn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const ei="@firebase/app",ti="0.9.27",ni=new Nn("@firebase/app"),ii="@firebase/app-compat",ri="@firebase/analytics-compat",oi="@firebase/analytics",ai="@firebase/app-check-compat",si="@firebase/app-check",ci="@firebase/auth",li="@firebase/auth-compat",ui="@firebase/database",di="@firebase/database-compat",hi="@firebase/functions",fi="@firebase/functions-compat",pi="@firebase/installations",gi="@firebase/installations-compat",mi="@firebase/messaging",vi="@firebase/messaging-compat",yi="@firebase/performance",wi="@firebase/performance-compat",bi="@firebase/remote-config",Ei="@firebase/remote-config-compat",Ii="@firebase/storage",Si="@firebase/storage-compat",Ci="@firebase/firestore",Ti="@firebase/firestore-compat",Pi="firebase",Ai="[DEFAULT]",ki={[ei]:"fire-core",[ii]:"fire-core-compat",[oi]:"fire-analytics",[ri]:"fire-analytics-compat",[si]:"fire-app-check",[ai]:"fire-app-check-compat",[ci]:"fire-auth",[li]:"fire-auth-compat",[ui]:"fire-rtdb",[di]:"fire-rtdb-compat",[hi]:"fire-fn",[fi]:"fire-fn-compat",[pi]:"fire-iid",[gi]:"fire-iid-compat",[mi]:"fire-fcm",[vi]:"fire-fcm-compat",[yi]:"fire-perf",[wi]:"fire-perf-compat",[bi]:"fire-rc",[Ei]:"fire-rc-compat",[Ii]:"fire-gcs",[Si]:"fire-gcs-compat",[Ci]:"fire-fst",[Ti]:"fire-fst-compat","fire-js":"fire-js",[Pi]:"fire-js-all"},_i=new Map,Di=new Map;function xi(e,t){try{e.container.addComponent(t)}catch(n){ni.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Li(e){const t=e.name;if(Di.has(t))return ni.debug(`There were multiple attempts to register component ${t}.`),!1;Di.set(t,e);for(const t of _i.values())xi(t,e);return!0}function Oi(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Bi=new wn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ni{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Tn("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bi.create("app-deleted",{appName:this._name})}}function Mi(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const i=Object.assign({name:Ai,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!=typeof r||!r)throw Bi.create("bad-app-name",{appName:String(r)});if(n||(n=pn()),!n)throw Bi.create("no-options");const o=_i.get(r);if(o){if(En(n,o.options)&&En(i,o.config))return o;throw Bi.create("duplicate-app",{appName:r})}const a=new kn(r);for(const e of Di.values())a.addComponent(e);const s=new Ni(n,i,a);return _i.set(r,s),s}function Fi(e,t,n){var i;let r=null!==(i=ki[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);const o=r.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${r}" with version "${t}":`];return o&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ni.warn(e.join(" "))}Li(new Tn(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}const ji="firebase-heartbeat-store";let Ri=null;function zi(){return Ri||(Ri=qn("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ji)}catch(e){console.warn(e)}}}).catch((e=>{throw Bi.create("idb-open",{originalErrorMessage:e.message})}))),Ri}async function $i(e,t){try{const n=(await zi()).transaction(ji,"readwrite"),i=n.objectStore(ji);await i.put(t,Hi(e)),await n.done}catch(e){if(e instanceof yn)ni.warn(e.message);else{const t=Bi.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});ni.warn(t.message)}}}function Hi(e){return`${e.name}!${e.options.appId}`}class Wi{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ui(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Gi();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((e=>e.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Gi(),{heartbeatsToSend:n,unsentEntries:i}=function(e,t=1024){const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),Vi(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Vi(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=hn(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Gi(){return(new Date).toISOString().substring(0,10)}class Ui{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!mn()&&vn().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await zi()).transaction(ji),n=await t.objectStore(ji).get(Hi(e));return await t.done,n}catch(e){if(e instanceof yn)ni.warn(e.message);else{const t=Bi.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});ni.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return $i(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return $i(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Vi(e){return hn(JSON.stringify({version:2,heartbeats:e})).length}Li(new Tn("platform-logger",(e=>new Zn(e)),"PRIVATE")),Li(new Tn("heartbeat",(e=>new Wi(e)),"PRIVATE")),Fi(ei,ti,""),Fi(ei,ti,"esm2017"),Fi("fire-js",""),Fi("firebase","10.8.0","app");const qi="@firebase/installations",Xi="0.6.5",Yi=`w:${Xi}`,Ji="FIS_v2",Ki=new wn("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Qi(e){return e instanceof yn&&e.code.includes("request-failed")}function Zi({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function er(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function tr(e,t){const n=(await t.json()).error;return Ki.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function nr({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function ir(e){const t=await e();return t.status>=500&&t.status<600?e():t}function rr(e){return new Promise((t=>{setTimeout(t,e)}))}const or=/^[cdef][\w-]{21}$/;function ar(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){var t;return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22)}(e);return or.test(t)?t:""}catch(e){return""}}function sr(e){return`${e.appName}!${e.appId}`}const cr=new Map;function lr(e,t){const n=sr(e);ur(n,t),function(e,t){const n=(!dr&&"BroadcastChannel"in self&&(dr=new BroadcastChannel("[Firebase] FID Change"),dr.onmessage=e=>{ur(e.data.key,e.data.fid)}),dr);n&&n.postMessage({key:e,fid:t}),0===cr.size&&dr&&(dr.close(),dr=null)}(n,t)}function ur(e,t){const n=cr.get(e);if(n)for(const e of n)e(t)}let dr=null;const hr="firebase-installations-store";let fr=null;function pr(){return fr||(fr=qn("firebase-installations-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(hr)}})),fr}async function gr(e,t){const n=sr(e),i=(await pr()).transaction(hr,"readwrite"),r=i.objectStore(hr),o=await r.get(n);return await r.put(t,n),await i.done,o&&o.fid===t.fid||lr(e,t.fid),t}async function mr(e){const t=sr(e),n=(await pr()).transaction(hr,"readwrite");await n.objectStore(hr).delete(t),await n.done}async function vr(e,t){const n=sr(e),i=(await pr()).transaction(hr,"readwrite"),r=i.objectStore(hr),o=await r.get(n),a=t(o);return void 0===a?await r.delete(n):await r.put(a,n),await i.done,!a||o&&o.fid===a.fid||lr(e,a.fid),a}async function yr(e){let t;const n=await vr(e.appConfig,(n=>{const i=function(e){return Er(e||{fid:ar(),registrationStatus:0})}(n),r=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Ki.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=Zi(e),r=nr(e),o=t.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const a={fid:n,authVersion:Ji,appId:e.appId,sdkVersion:Yi},s={method:"POST",headers:r,body:JSON.stringify(a)},c=await ir((()=>fetch(i,s)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:er(e.authToken)}}throw await tr("Create Installation",c)}(e,t);return gr(e.appConfig,n)}catch(n){throw Qi(n)&&409===n.customData.serverCode?await mr(e.appConfig):await gr(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:wr(e)}:{installationEntry:t}}(e,i);return t=r.registrationPromise,r.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function wr(e){let t=await br(e.appConfig);for(;1===t.registrationStatus;)await rr(100),t=await br(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await yr(e);return n||t}return t}function br(e){return vr(e,(e=>{if(!e)throw Ki.create("installation-not-found");return Er(e)}))}function Er(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Ir({appConfig:e,heartbeatServiceProvider:t},n){const i=function(e,{fid:t}){return`${Zi(e)}/${t}/authTokens:generate`}(e,n),r=function(e,{refreshToken:t}){const n=nr(e);return n.append("Authorization",function(e){return`${Ji} ${e}`}(t)),n}(e,n),o=t.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const a={installation:{sdkVersion:Yi,appId:e.appId}},s={method:"POST",headers:r,body:JSON.stringify(a)},c=await ir((()=>fetch(i,s)));if(c.ok)return er(await c.json());throw await tr("Generate Auth Token",c)}async function Sr(e,t=!1){let n;const i=await vr(e.appConfig,(i=>{if(!Tr(i))throw Ki.create("not-registered");const r=i.authToken;if(!t&&(2===(o=r).requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(o)))return i;var o;if(1===r.requestStatus)return n=async function(e,t){let n=await Cr(e.appConfig);for(;1===n.authToken.requestStatus;)await rr(100),n=await Cr(e.appConfig);const i=n.authToken;return 0===i.requestStatus?Sr(e,t):i}(e,t),i;{if(!navigator.onLine)throw Ki.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(i);return n=async function(e,t){try{const n=await Ir(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await gr(e.appConfig,i),n}catch(n){if(!Qi(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await gr(e.appConfig,n)}else await mr(e.appConfig);throw n}}(e,t),t}}));return n?await n:i.authToken}function Cr(e){return vr(e,(e=>{if(!Tr(e))throw Ki.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t}))}function Tr(e){return void 0!==e&&2===e.registrationStatus}function Pr(e){return Ki.create("missing-app-config-values",{valueName:e})}const Ar="installations";Li(new Tn(Ar,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Pr("App Configuration");if(!e.name)throw Pr("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Pr(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Oi(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),Li(new Tn("installations-internal",(e=>{const t=Oi(e.getProvider("app").getImmediate(),Ar).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:i}=await yr(t);return i?i.catch(console.error):Sr(t).catch(console.error),n.fid}(t),getToken:e=>async function(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await yr(e);t&&await t}(n),(await Sr(n,t)).token}(t,e)}}),"PRIVATE")),Fi(qi,Xi),Fi(qi,Xi,"esm2017");const kr="analytics",_r="https://www.googletagmanager.com/gtag/js",Dr=new Nn("@firebase/analytics"),xr=new wn("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Lr(e){if(!e.startsWith(_r)){const t=xr.create("invalid-gtag-resource",{gtagURL:e});return Dr.warn(t.message),""}return e}function Or(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}const Br=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Nr(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Mr(e,t=Br,n){const{appId:i,apiKey:r,measurementId:o}=e.options;if(!i)throw xr.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:i};throw xr.create("no-api-key")}const a=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new jr;return setTimeout((async()=>{s.abort()}),void 0!==n?n:6e4),Fr({appId:i,apiKey:r,measurementId:o},a,s,t)}async function Fr(e,{throttleEndTimeMillis:t,backoffCount:n},i,r=Br){var o;const{appId:a,measurementId:s}=e;try{await function(e,t){return new Promise(((n,i)=>{const r=Math.max(t-Date.now(),0),o=setTimeout(n,r);e.addEventListener((()=>{clearTimeout(o),i(xr.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(i,t)}catch(e){if(s)return Dr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:a,measurementId:s};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:i}=e,r={method:"GET",headers:Nr(i)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(o,r);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw xr.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return r.deleteThrottleMetadata(a),t}catch(t){const c=t;if(!function(e){if(!(e instanceof yn&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(c)){if(r.deleteThrottleMetadata(a),s)return Dr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:a,measurementId:s};throw t}const l=503===Number(null===(o=null==c?void 0:c.customData)||void 0===o?void 0:o.httpStatus)?Sn(n,r.intervalMillis,30):Sn(n,r.intervalMillis),u={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return r.setThrottleMetadata(a,u),Dr.debug(`Calling attemptFetch again in ${l} millis`),Fr(e,u,i,r)}}class jr{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Rr,zr;async function $r(e,t,n,i,r,o,a){var s;const c=Mr(e);c.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Dr.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>Dr.error(e))),t.push(c);const l=async function(){if(!mn())return Dr.warn(xr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await vn()}catch(e){return Dr.warn(xr.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?i.getId():void 0)),[u,d]=await Promise.all([c,l]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(_r)&&n.src.includes(e))return n;return null})(o)||function(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy("firebase-js-sdk-policy",t)),n}(0,{createScriptURL:Lr}),i=document.createElement("script"),r=`${_r}?l=${e}&id=${t}`;i.src=n?null==n?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}(o,u.measurementId),zr&&(r("consent","default",zr),zr=void 0),r("js",new Date);const h=null!==(s=null==a?void 0:a.config)&&void 0!==s?s:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),r("config",u.measurementId,h),Rr&&(r("set",Rr),Rr=void 0),u.measurementId}class Hr{constructor(e){this.app=e}_delete(){return delete Wr[this.app.options.appId],Promise.resolve()}}let Wr={},Gr=[];const Ur={};let Vr,qr,Xr="dataLayer",Yr=!1;function Jr(e,t,n){!function(){const e=[];if(function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=xr.create("invalid-analytics-context",{errorInfo:t});Dr.warn(n.message)}}();const i=e.options.appId;if(!i)throw xr.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw xr.create("no-api-key");Dr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Wr[i])throw xr.create("already-exists",{id:i});if(!Yr){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Xr);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,i,r){let o=function(...e){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(o=window[r]),window[r]=function(e,t,n,i){return async function(r,...o){try{if("event"===r){const[i,r]=o;await async function(e,t,n,i,r){try{let o=[];if(r&&r.send_to){let e=r.send_to;Array.isArray(e)||(e=[e]);const i=await Or(n);for(const n of e){const e=i.find((e=>e.measurementId===n)),r=e&&t[e.appId];if(!r){o=[];break}o.push(r)}}0===o.length&&(o=Object.values(t)),await Promise.all(o),e("event",i,r||{})}catch(e){Dr.error(e)}}(e,t,n,i,r)}else if("config"===r){const[r,a]=o;await async function(e,t,n,i,r,o){const a=i[r];try{if(a)await t[a];else{const e=(await Or(n)).find((e=>e.measurementId===r));e&&await t[e.appId]}}catch(e){Dr.error(e)}e("config",r,o)}(e,t,n,i,r,a)}else if("consent"===r){const[t]=o;e("consent","update",t)}else if("get"===r){const[t,n,i]=o;e("get",t,n,i)}else if("set"===r){const[t]=o;e("set",t)}else e(r,...o)}catch(e){Dr.error(e)}}}(o,e,t,n),{gtagCore:o,wrappedGtag:window[r]}}(Wr,Gr,Ur,Xr,"gtag");qr=e,Vr=t,Yr=!0}return Wr[i]=$r(e,Gr,Ur,t,Vr,Xr,n),new Hr(e)}function Kr(e,t,n,i){e=Cn(e),async function(e,t,n,i,r){if(r&&r.global)e("event",n,i);else{const r=await t;e("event",n,Object.assign(Object.assign({},i),{send_to:r}))}}(qr,Wr[e.app.options.appId],t,n,i).catch((e=>Dr.error(e)))}const Qr="@firebase/analytics",Zr="0.10.1";Li(new Tn(kr,((e,{options:t})=>Jr(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),Li(new Tn("analytics-internal",(function(e){try{const t=e.getProvider(kr).getImmediate();return{logEvent:(e,n,i)=>Kr(t,e,n,i)}}catch(e){throw xr.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),Fi(Qr,Zr),Fi(Qr,Zr,"esm2017");const eo={apiKey:"AIzaSyB8c2lBVi26u7YRL9sxOP97Uaq3yN8hTl4",authDomain:"ftm-b9d99.firebaseapp.com",databaseURL:"https://ftm-b9d99.firebaseio.com",projectId:"ftm-b9d99",storageBucket:"ftm-b9d99.appspot.com",messagingSenderId:"602402387941",appId:"1:602402387941:web:3bdd502b0e7ce6789de10c",measurementId:"G-XNE7Y2439V"};class to{constructor(){try{this.firebaseApp=Mi(eo),this.firebaseAnalytics=function(e=function(e=Ai){const t=_i.get(e);if(!t&&e===Ai&&pn())return Mi();if(!t)throw Bi.create("no-app",{appName:e});return t}()){const t=Oi(e=Cn(e),kr);return t.isInitialized()?t.getImmediate():function(e,t={}){const n=Oi(e,kr);if(n.isInitialized()){const e=n.getImmediate();if(En(t,n.getOptions()))return e;throw xr.create("already-initialized")}return n.initialize({options:t})}(e)}(this.firebaseApp)}catch(e){console.error("Error while initializing Firebase:",e)}}static getInstance(){return to.instance||(to.instance=new to),to.instance}logEvents(e,t){try{console.log(`Sending custom event ${e} with data:`,t),Kr(this.firebaseAnalytics,e,t)}catch(e){console.error("Error while logging custom event:",e)}}}const no=new BroadcastChannel("my-channel");let io=document.getElementById("loadingScreen");function ro(e){"Loading"==e.data.msg&&function(e,t){let n=document.getElementById("progressBar");t<100?n.style.width=t+"%":t>=100&&(io.style.display="none",localStorage.setItem(e.data.data.bookName,"true"),function(e){if(window.Android){let t=null!==localStorage.getItem(e);window.Android.cachedStatus(t)}}(e.data.data.bookName))}(e,parseInt(e.data.data.progress)),"UpdateFound"==e.data.msg&&(console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>.,update Found"),function(){let e="Update Found.\nPlease accept the update by pressing Ok.";1==confirm(e)?window.location.reload():e="Update will happen on the next launch."}())}no.addEventListener("message",ro);const oo=window.location.search;let ao=new URLSearchParams(oo).get("book");null==ao&&(ao="LetsFlyLevel2En"),console.log("Book Name: "+ao);let so=new class{constructor(e,t,i,r){console.log("Curious Reader App v0.3.5 initializing!"),this.bookName=e,this.contentFilePath=t,this.imagesPath=i,this.audioPath=r,this.firebaseAnalyticsManager=to.getInstance(),this.contentParser=new n(t),this.playBackEngine=new Jt(i,r),this.broadcastChannel=new BroadcastChannel("cr-message-channel")}async initialize(){try{const e=await this.contentParser.parseBook();e.bookName=this.bookName,console.log("App initialized with book:",e),this.enforceLandscapeMode(),await this.registerServiceWorker(e),this.playBackEngine.initializeBook(e),console.log("Initialization completed successfully!")}catch(e){console.error("Initialization error:",e)}}enforceLandscapeMode(){window.Android&&"function"==typeof window.Android.setContainerAppOrientation&&window.Android.setContainerAppOrientation("landscape")}async registerServiceWorker(e){if("serviceWorker"in navigator)try{let t=new cn("/sw.js",{});await t.register(),await navigator.serviceWorker.ready,null==localStorage.getItem(e.bookName)?(io.style.display="flex",this.broadcastChannel.postMessage({command:"Cache",data:{lang:this.lang,bookData:e,contentFile:this.contentFilePath}})):io.style.display="none",this.broadcastChannel.onmessage=t=>{console.log("CRapp: Message Received!"),console.log(t.data.command),"Activated"==t.data.command&&this.broadcastChannel.postMessage({command:"Cache",data:{lang:this.lang,bookData:e,contentFile:this.contentFilePath}})},navigator.serviceWorker.addEventListener("message",ro)}catch(e){console.log("Error Registering Service Worker",e)}}}(ao,`/BookContent/${ao}/content/content.json`,`/BookContent/${ao}/content/images/`,`/BookContent/${ao}/content/audios/`);so.initialize()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwibWFwcGluZ3MiOiI7bUJBQ0EsSUNHWUEsRURIUkMsRUFBc0IsQ0FBQyxFRUQzQkEsRUFBb0JDLEVBQUksV0FDdkIsR0FBMEIsaUJBQWZDLFdBQXlCLE9BQU9BLFdBQzNDLElBQ0MsT0FBT0MsTUFBUSxJQUFJQyxTQUFTLGNBQWIsRUFDaEIsQ0FBRSxNQUFPQyxHQUNSLEdBQXNCLGlCQUFYQyxPQUFxQixPQUFPQSxNQUN4QyxDQUNBLENBUHVCLEdESXhCLFNBQVlQLEdBQ1IsZ0NBQ0EsWUFDQSxtQkFDSCxDQUpELENBQVlBLElBQUFBLEVBQVEsS0VPYixNQUFNUSxFQVNULFdBQUFDLENBQVlDLEdBRlosS0FBQUMsa0JBQTRCLG1CQUd4QlAsS0FBS00sZ0JBQWtCQSxDQUMzQixDQUVBLGVBQU1FLEdBQ0YsT0FBTyxJQUFJQyxTQUFRLENBQUNDLEVBQVNDLEtBQ3pCWCxLQUFLWSx1QkFDQUMsTUFBTUMsSUFDSGQsS0FBS2MsWUFBY0EsRUFDbkJDLFFBQVFDLElBQUksNkJBQ1pELFFBQVFDLElBQUloQixLQUFLYyxhQUVqQixJQUFJRyxFQUFhLENBQ2JDLFNBQVUsR0FDVkMsTUFBTyxHQUNQQyxTQUFVcEIsS0FBS3FCLHFCQUduQkosRUFBS0UsTUFBUW5CLEtBQUtzQixXQUFXTCxHQUU3QlAsRUFBUU8sRUFBSyxJQUVoQk0sT0FBT0MsSUFDSmIsRUFBT2EsRUFBTSxHQUNmLEdBRWQsQ0FFQSxpQkFBQUgsR0FDSSxZQUF5Q0ksSUFBckN6QixLQUFLYyxZQUEwQixhQUN4QmxCLEVBQVM4QixtQkFDd0JELElBQWpDekIsS0FBS2MsWUFBc0IsU0FDM0JsQixFQUFTK0IsSUFFVC9CLEVBQVNnQyxPQUV4QixDQUVBLFVBQUFOLENBQVdMLEdBQ1AsSUFBSUUsRUFBZ0IsR0FFcEIsR0FBSUYsRUFBS0csV0FBYXhCLEVBQVM4QixjQUFlLENBQzFDLElBQUlHLEVBQVk3QixLQUFLYyxZQUEwQixhQUFVLE9BQ3JEZ0IsRUFDQTlCLEtBQUtjLFlBQTBCLGFBQTRCLHlCQUNyQyxxQkFFMUIsSUFBSyxJQUFJaUIsRUFBSSxFQUFHQSxFQUFJRixFQUFVRyxPQUFRRCxJQUFLLENBQ3ZDLElBQUlFLEVBQVdKLEVBQVVFLEdBQ3JCRyxFQUFhLENBQ2JDLGVBQWdCLEdBQ2hCQyxnQkFBaUJOLEdBRXJCSSxFQUFLQyxlQUFpQm5DLEtBQUtxQyxZQUFZSixHQUN2Q2QsRUFBTW1CLEtBQUtKLEVBQ2YsQ0FDSixNQUFPLEdBQUlqQixFQUFLRyxXQUFheEIsRUFBUytCLElBQUssQ0FDdkMsSUFBSUUsRUFBWTdCLEtBQUtjLFlBQXNCLFNBQ3ZDZ0IsRUFBa0IsVUFDdEIsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlGLEVBQVVHLE9BQVFELElBQUssQ0FDdkMsSUFBSUUsRUFBV0osRUFBVUUsR0FDckJHLEVBQWEsQ0FDYkMsZUFBZ0IsR0FDaEJDLGdCQUFpQk4sR0FFckJJLEVBQUtDLGVBQWlCbkMsS0FBS3VDLGFBQWFOLEdBQ3hDZCxFQUFNbUIsS0FBS0osRUFDZixDQUNKLE1BQ0luQixRQUFRQyxJQUFJLHNCQUdoQixPQUFPRyxDQUNYLENBRUEsV0FBQWtCLENBQVlKLEdBQ1IsSUFBSUUsRUFBd0IsR0FDeEJLLEVBQWVQLEVBQW1CLFNBQ3RDLElBQUssSUFBSUYsRUFBSSxFQUFHQSxFQUFJUyxFQUFhUixPQUFRRCxJQUFLLENBQzFDLElBQUlVLEVBQXdCRCxFQUFhVCxHQUFXLE9BQVcsUUFDL0QsR0FBSVUsRUFBY0MsU0FBUyxnQkFBaUIsQ0FDeEMsSUFBSUMsRUFBMkIzQyxLQUFLNEMsbUJBQW1CSixFQUFhVCxJQUNwRUksRUFBZUcsS0FBS0ssRUFDeEIsTUFBTyxHQUFJRixFQUFjQyxTQUFTLFNBQVUsQ0FDeEMsSUFBSUcsRUFBNkI3QyxLQUFLOEMsb0JBQ2xDTixFQUFhVCxJQUVqQkksRUFBZUcsS0FBS08sRUFDeEIsTUFBTyxHQUFJSixFQUFjQyxTQUFTLFNBQVUsQ0FDeEMsSUFBSUssRUFBNkIvQyxLQUFLZ0Qsb0JBQ2xDUixFQUFhVCxJQUVqQkksRUFBZUcsS0FBS1MsRUFDeEIsQ0FDSixDQUVBLE9BQU9aLENBQ1gsQ0FFQSxZQUFBSSxDQUFhTixHQUNULElBQUlFLEVBQXdCLEdBQ3hCYyxFQUFvQmhCLEVBQWlCLE9BQVcsUUFFcEQsSUFBSyxJQUFJRixFQUFJLEVBQUdBLEVBQUlrQixFQUFrQmpCLE9BQVFELElBQUssQ0FDL0MsSUFBSVUsRUFBd0JRLEVBQWtCbEIsR0FBWSxRQUFXLFFBQ3JFLEdBQUlVLEVBQWNDLFNBQVMsZ0JBQWlCLENBQ3hDLElBQUlDLEVBQTJCM0MsS0FBS2tELG9CQUNoQ0QsRUFBa0JsQixHQUFZLFFBQVUsUUFFNUNJLEVBQWVHLEtBQUtLLEVBQ3hCLE1BQU8sR0FBSUYsRUFBY0MsU0FBUyxTQUFVLENBQ3hDLElBQUlHLEVBQTZCN0MsS0FBS21ELHFCQUNsQ0YsRUFBa0JsQixHQUFZLFFBQVUsUUFFNUNJLEVBQWVHLEtBQUtPLEVBQ3hCLENBQ0osQ0FFQSxPQUFPVixDQUNYLENBRUEsa0JBQUFTLENBQW1CUSxHQVVmLE1BVCtCLENBQzNCQyxLQUFNLE9BQ05DLFVBQVdGLEVBQWUsRUFDMUJHLFVBQVdILEVBQWUsRUFDMUJJLE1BQU9KLEVBQW1CLE1BQzFCSyxPQUFRTCxFQUFvQixPQUM1Qk0sa0JBQW1CTixFQUFvQixPQUFVLE9BQVEsS0FJakUsQ0FFQSxtQkFBQUYsQ0FBb0JFLEdBU2hCLE1BUitCLENBQzNCQyxLQUFNLE9BQ05DLFVBQVdLLElBQ1hKLFVBQVdJLElBQ1hILE1BQU9HLElBQ1BGLE9BQVFFLElBQ1JELGtCQUFtQk4sRUFBa0IsS0FHN0MsQ0FFQSxtQkFBQU4sQ0FBb0JNLEdBQ2hCLElBQUlRLEVBQWUsR0FrQm5CLE9BaEJJQSxPQUQ0Q25DLElBQTVDMkIsRUFBb0IsT0FBVSxPQUFRLEtBQy9CcEQsS0FBS08sa0JBRUw2QyxFQUFvQixPQUFVLE9BQVEsS0FBUSxLQUV4QixDQUM3QlMsTUFBT0QsSUFBUzVELEtBQUtPLGtCQUNYNkMsRUFBZ0IsR0FDaEJBLEVBQW9CLE9BQWdCLGFBQzlDQyxLQUFNLFFBQ05DLFVBQVdGLEVBQWUsRUFDMUJHLFVBQVdILEVBQWUsRUFDMUJJLE1BQU9KLEVBQW1CLE1BQzFCSyxPQUFRTCxFQUFvQixPQUM1QlUsWUFBYUYsRUFJckIsQ0FFQSxvQkFBQVQsQ0FBcUJDLEdBVWpCLE1BVGlDLENBQzdCUyxNQUFPLEdBQ1BSLEtBQU0sUUFDTkMsVUFBV0ssSUFDWEosVUFBV0ksSUFDWEgsTUFBT0osRUFBbUIsTUFDMUJLLE9BQVFMLEVBQW9CLE9BQzVCVSxZQUFhVixFQUFrQixLQUFRLEtBRy9DLENBRUEsbUJBQUFKLENBQW9CSSxHQUNoQixJQUFJVyxFQUFtQyxDQUNuQ0MsV0FBWSxJQUVaQyxFQUNBYixFQUFvQixPQUFVLE9BQXdCLHFCQUMxRCxJQUFLLElBQUlyQixFQUFJLEVBQUdBLEVBQUlrQyxFQUFvQmpDLE9BQVFELElBQUssQ0FDakQsSUFBSW1DLEVBQWlCbkMsRUFDakJvQyxFQUFnQkYsRUFBb0JsQyxHQUNwQ3FDLEVBQWtDLENBQ2xDUCxNQUNJVCxFQUFvQixPQUFnQixhQUNwQyxJQUNBYyxFQUFlRyxXQUNuQkMsS0FBTUgsRUFBb0IsS0FBRUksUUFBUSxVQUFXLEtBQy9DQyxlQUFnQkwsRUFBNkIsY0FDN0NNLGFBQWNOLEVBQTJCLFlBQ3pDTyxTQUFVUCxFQUF3QixTQUFFLEdBQVMsTUFFakRKLEVBQWdCQyxXQUFXMUIsS0FBSzhCLEVBQ3BDLENBY0EsTUFiaUMsQ0FDN0JQLE1BQU9ULEVBQW9CLE9BQWdCLGFBQzNDQyxLQUFNLFFBQ05DLFVBQVdGLEVBQWUsRUFDMUJHLFVBQVdILEVBQWUsRUFDMUJJLE1BQU9KLEVBQW1CLE1BQzFCSyxPQUFRTCxFQUFvQixPQUM1QnVCLFVBQVd2QixFQUFvQixPQUFVLE9BQWEsVUFDdERzQixTQUFVdEIsRUFBb0IsT0FBVSxPQUFTLE1BQUUsR0FBUyxLQUM1RFcsZ0JBQWlCQSxFQUNqQmEsT0FBUSxHQUloQixDQUVBLDBCQUFNaEUsR0FDRixPQUFPLElBQUlILFNBQVEsQ0FBQ0MsRUFBU0MsS0FDekIsSUFBSWtFLEVBQU0sSUFBSUMsZUFDZEQsRUFBSUUsS0FBSyxNQUFPL0UsS0FBS00saUJBQWlCLEdBQ3RDdUUsRUFBSUcsYUFBZSxPQUNuQkgsRUFBSUksT0FBUyxXQUVULEdBQWUsTUFERkosRUFBSUssT0FDRyxDQUNoQixJQUFJQyxFQUFXTixFQUFJTSxnQkFDWkEsRUFBZSxZQUNmQSxFQUFtQixTQUMxQnpFLEVBQVF5RSxFQUNaLE1BQ0l4RSxFQUFPa0UsRUFBSU0sU0FFbkIsRUFDQU4sRUFBSU8sTUFBTSxHQUVsQixFQ2hRSixTQUFTQyxFQUFrQkMsRUFBUUMsR0FBUyxJQUFLLElBQUl4RCxFQUFJLEVBQUdBLEVBQUl3RCxFQUFNdkQsT0FBUUQsSUFBSyxDQUFFLElBQUl5RCxFQUFhRCxFQUFNeEQsR0FBSXlELEVBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFBT0QsRUFBV0UsY0FBZSxFQUFVLFVBQVdGLElBQVlBLEVBQVdHLFVBQVcsR0FBTUMsT0FBT0MsZUFBZVAsRUFBUUUsRUFBV00sSUFBS04sRUFBYSxDQUFFLENBVTVULElBQUlPLEVBQStCLG1DQWtCbkMsU0FBU0MsRUFBTUMsR0FDYkEsRUFBTWpFLE9BQVMsQ0FDakIsQ0FFQSxTQUFTa0UsRUFBTUMsRUFBV0MsRUFBT0MsR0FDL0IsT0FBT0MsTUFBTUMsVUFBVUwsTUFBTU0sS0FBS0wsRUFBV0MsRUFBT0MsRUFDdEQsQ0FFQSxTQUFTSSxFQUFNQyxHQUNiLE9BQU9BLEVBQUtDLEtBQUtGLE1BQU1DLEVBQU0sQ0FBQyxNQUFNRSxPQUFPVixFQUFNVyxVQUFXLElBQzlELENBRUEsSUFBSUMsRUFBV0MsV0FFWEMsRUFBTyxXQUFpQixFQUU1QixTQUFTQyxFQUFJUCxHQUNYLE9BQU9RLHNCQUFzQlIsRUFDL0IsQ0FFQSxTQUFTUyxFQUFPOUQsRUFBTStELEdBQ3BCLGNBQWNBLElBQVkvRCxDQUM1QixDQUVBLFNBQVNnRSxFQUFTRCxHQUNoQixPQUFRRSxFQUFPRixJQUFZRCxFQUFPLFNBQVVDLEVBQzlDLENBRUEsSUFBSUcsRUFBVWpCLE1BQU1pQixRQUNoQkMsRUFBYWYsRUFBTVUsRUFBUSxZQUMzQk0sRUFBV2hCLEVBQU1VLEVBQVEsVUFDekJPLEVBQWNqQixFQUFNVSxFQUFRLGFBRWhDLFNBQVNHLEVBQU9GLEdBQ2QsT0FBbUIsT0FBWkEsQ0FDVCxDQUVBLFNBQVNPLEVBQWNQLEdBQ3JCLElBQ0UsT0FBT0EsYUFBb0JBLEVBQVFRLGNBQWNDLGFBQWUxSCxRQUFRMkgsV0FDMUUsQ0FBRSxNQUFPNUgsR0FDUCxPQUFPLENBQ1QsQ0FDRixDQUVBLFNBQVM2SCxFQUFRQyxHQUNmLE9BQU9ULEVBQVFTLEdBQVNBLEVBQVEsQ0FBQ0EsRUFDbkMsQ0FFQSxTQUFTQyxFQUFRQyxFQUFRQyxHQUN2QkosRUFBUUcsR0FBUUQsUUFBUUUsRUFDMUIsQ0FFQSxTQUFTekYsRUFBU3VELEVBQU8rQixHQUN2QixPQUFPL0IsRUFBTW1DLFFBQVFKLElBQVUsQ0FDakMsQ0FFQSxTQUFTMUYsRUFBSzJELEVBQU9vQyxHQUVuQixPQURBcEMsRUFBTTNELEtBQUttRSxNQUFNUixFQUFPOEIsRUFBUU0sSUFDekJwQyxDQUNULENBRUEsU0FBU3FDLEVBQVlDLEVBQUtDLEVBQVNDLEdBQzdCRixHQUNGTixFQUFRTyxHQUFTLFNBQVVFLEdBQ3JCQSxHQUNGSCxFQUFJSSxVQUFVRixFQUFNLE1BQVEsVUFBVUMsRUFFMUMsR0FFSixDQUVBLFNBQVNFLEVBQVNMLEVBQUtDLEdBQ3JCRixFQUFZQyxFQUFLZCxFQUFTZSxHQUFXQSxFQUFRSyxNQUFNLEtBQU9MLEdBQVMsRUFDckUsQ0FFQSxTQUFTTSxFQUFPQyxFQUFRQyxHQUN0QmYsRUFBUWUsRUFBVUQsRUFBT0UsWUFBWXRDLEtBQUtvQyxHQUM1QyxDQUVBLFNBQVNHLEVBQU9DLEVBQU9DLEdBQ3JCbkIsRUFBUWtCLEdBQU8sU0FBVUUsR0FDdkIsSUFBSU4sR0FBVUssR0FBT0MsR0FBTUMsV0FFdkJQLEdBQ0ZBLEVBQU9RLGFBQWFGLEVBQU1ELEVBRTlCLEdBQ0YsQ0FFQSxTQUFTSSxFQUFRakIsRUFBS2tCLEdBQ3BCLE9BQU85QixFQUFjWSxLQUFTQSxFQUF1QixtQkFBS0EsRUFBSWlCLFNBQVNoRCxLQUFLK0IsRUFBS2tCLEVBQ25GLENBRUEsU0FBU1QsRUFBU0QsRUFBUVUsR0FDeEIsSUFBSUMsRUFBWVgsRUFBUzdDLEVBQU02QyxFQUFPQyxVQUFZLEdBQ2xELE9BQU9TLEVBQVdDLEVBQVVDLFFBQU8sU0FBVUMsR0FDM0MsT0FBT0osRUFBUUksRUFBT0gsRUFDeEIsSUFBS0MsQ0FDUCxDQUVBLFNBQVNFLEVBQU1iLEVBQVFVLEdBQ3JCLE9BQU9BLEVBQVdULEVBQVNELEVBQVFVLEdBQVUsR0FBS1YsRUFBT2MsaUJBQzNELENBRUEsSUFBSUMsRUFBVWxFLE9BQU9tRSxLQUVyQixTQUFTQyxFQUFPQyxFQUFROUIsRUFBVStCLEdBT2hDLE9BTklELElBQ0RDLEVBQVFKLEVBQVFHLEdBQVFFLFVBQVlMLEVBQVFHLElBQVNoQyxTQUFRLFNBQVVuQyxHQUM5RCxjQUFSQSxHQUF1QnFDLEVBQVM4QixFQUFPbkUsR0FBTUEsRUFDL0MsSUFHS21FLENBQ1QsQ0FFQSxTQUFTLEVBQU9BLEdBTWQsT0FMQS9ELEVBQU1XLFVBQVcsR0FBR29CLFNBQVEsU0FBVW1DLEdBQ3BDSixFQUFPSSxHQUFRLFNBQVVwQyxFQUFPbEMsR0FDOUJtRSxFQUFPbkUsR0FBT3NFLEVBQU90RSxFQUN2QixHQUNGLElBQ09tRSxDQUNULENBRUEsU0FBU0ksRUFBTUosR0FZYixPQVhBL0QsRUFBTVcsVUFBVyxHQUFHb0IsU0FBUSxTQUFVbUMsR0FDcENKLEVBQU9JLEdBQVEsU0FBVXBDLEVBQU9sQyxHQUMxQnlCLEVBQVFTLEdBQ1ZpQyxFQUFPbkUsR0FBT2tDLEVBQU05QixRQUNYbUIsRUFBU1csR0FDbEJpQyxFQUFPbkUsR0FBT3VFLEVBQU0sQ0FBQyxFQUFHaEQsRUFBUzRDLEVBQU9uRSxJQUFRbUUsRUFBT25FLEdBQU8sQ0FBQyxFQUFHa0MsR0FFbEVpQyxFQUFPbkUsR0FBT2tDLENBRWxCLEdBQ0YsSUFDT2lDLENBQ1QsQ0FFQSxTQUFTSyxFQUFLTCxFQUFRRixHQUNwQjlCLEVBQVE4QixHQUFRRCxFQUFRRyxJQUFTLFNBQVVuRSxVQUNsQ21FLEVBQU9uRSxFQUNoQixHQUNGLENBRUEsU0FBU3lFLEVBQWdCQyxFQUFNQyxHQUM3QnhDLEVBQVF1QyxHQUFNLFNBQVVqQyxHQUN0Qk4sRUFBUXdDLEdBQU8sU0FBVUMsR0FDdkJuQyxHQUFPQSxFQUFJZ0MsZ0JBQWdCRyxFQUM3QixHQUNGLEdBQ0YsQ0FFQSxTQUFTQyxFQUFhSCxFQUFNQyxFQUFPekMsR0FDN0JYLEVBQVNvRCxHQUNYVCxFQUFPUyxHQUFPLFNBQVVHLEVBQVFsQyxHQUM5QmlDLEVBQWFILEVBQU05QixFQUFNa0MsRUFDM0IsSUFFQTNDLEVBQVF1QyxHQUFNLFNBQVVqQyxHQUN0QmpCLEVBQU9VLElBQW9CLEtBQVZBLEVBQWV1QyxFQUFnQmhDLEVBQUtrQyxHQUFTbEMsRUFBSW9DLGFBQWFGLEVBQU9JLE9BQU83QyxHQUMvRixHQUVKLENBRUEsU0FBUzhDLEVBQU9DLEVBQUtOLEVBQU8xQixHQUMxQixJQUFJUixFQUFNeUMsU0FBU0MsY0FBY0YsR0FPakMsT0FMSU4sSUFDRmhELEVBQVNnRCxHQUFTN0IsRUFBU0wsRUFBS2tDLEdBQVNFLEVBQWFwQyxFQUFLa0MsSUFHN0QxQixHQUFVRCxFQUFPQyxFQUFRUixHQUNsQkEsQ0FDVCxDQUVBLFNBQVMyQyxFQUFNM0MsRUFBSzRDLEVBQU1uRCxHQUN4QixHQUFJTixFQUFZTSxHQUNkLE9BQU9vRCxpQkFBaUI3QyxHQUFLNEMsR0FHMUI3RCxFQUFPVSxLQUNWTyxFQUFJMkMsTUFBTUMsR0FBUSxHQUFLbkQsRUFFM0IsQ0FFQSxTQUFTcUQsRUFBUTlDLEVBQUsrQyxHQUNwQkosRUFBTTNDLEVBQUssVUFBVytDLEVBQ3hCLENBRUEsU0FBUyxFQUFNL0MsR0FDYkEsRUFBZSxXQUFLQSxFQUFlLGFBQU9BLEVBQUlnRCxNQUFNLENBQ2xEQyxlQUFlLEdBRW5CLENBRUEsU0FBU0MsRUFBYWxELEVBQUttQyxHQUN6QixPQUFPbkMsRUFBSWtELGFBQWFmLEVBQzFCLENBRUEsU0FBU2dCLEVBQVNuRCxFQUFLb0QsR0FDckIsT0FBT3BELEdBQU9BLEVBQUlJLFVBQVVpRCxTQUFTRCxFQUN2QyxDQUVBLFNBQVNFLEVBQUt2RyxHQUNaLE9BQU9BLEVBQU93Ryx1QkFDaEIsQ0FFQSxTQUFTQyxFQUFPNUMsR0FDZGxCLEVBQVFrQixHQUFPLFNBQVVFLEdBQ25CQSxHQUFRQSxFQUFLQyxZQUNmRCxFQUFLQyxXQUFXMEMsWUFBWTNDLEVBRWhDLEdBQ0YsQ0FFQSxTQUFTNEMsRUFBVUMsR0FDakIsT0FBT3RDLEdBQU0sSUFBSXVDLFdBQVlDLGdCQUFnQkYsRUFBTSxhQUFhRyxLQUNsRSxDQUVBLFNBQVNDLEVBQVFwTSxFQUFHcU0sR0FDbEJyTSxFQUFFc00saUJBRUVELElBQ0ZyTSxFQUFFcU0sa0JBQ0ZyTSxFQUFFdU0sMkJBRU4sQ0FFQSxTQUFTQyxFQUFNM0QsRUFBUVUsR0FDckIsT0FBT1YsR0FBVUEsRUFBTzRELGNBQWNsRCxFQUN4QyxDQUVBLFNBQVNtRCxFQUFTN0QsRUFBUVUsR0FDeEIsT0FBT0EsRUFBV3ZELEVBQU02QyxFQUFPOEQsaUJBQWlCcEQsSUFBYSxFQUMvRCxDQUVBLFNBQVNxRCxFQUFZdkUsRUFBS0MsR0FDeEJGLEVBQVlDLEVBQUtDLEdBQVMsRUFDNUIsQ0FFQSxTQUFTdUUsRUFBTzdNLEdBQ2QsT0FBT0EsRUFBRThNLFNBQ1gsQ0FFQSxTQUFTQyxFQUFLakYsR0FDWixPQUFPUCxFQUFTTyxHQUFTQSxFQUFRQSxFQUFRQSxFQUFRLEtBQU8sRUFDMUQsQ0FFQSxJQUFJa0YsRUFBZSxTQUNmQyxHQUFpQixRQUFVRCxFQUUvQixTQUFTRSxHQUFPQyxFQUFXQyxHQUN6QixJQUFLRCxFQUNILE1BQU0sSUFBSUUsTUFBTSxJQUFNTCxFQUFlLE1BQVFJLEdBQVcsSUFFNUQsQ0FFQSxJQUFJRSxHQUFNQyxLQUFLRCxJQUNYRSxHQUFNRCxLQUFLQyxJQUNYQyxHQUFRRixLQUFLRSxNQUNiQyxHQUFPSCxLQUFLRyxLQUNaQyxHQUFNSixLQUFLSSxJQUVmLFNBQVNDLEdBQW1CQyxFQUFHQyxFQUFHQyxHQUNoQyxPQUFPSixHQUFJRSxFQUFJQyxHQUFLQyxDQUN0QixDQUVBLFNBQVNDLEdBQVFDLEVBQVFKLEVBQUdDLEVBQUdJLEdBQzdCLElBQUlDLEVBQVViLEdBQUlPLEVBQUdDLEdBQ2pCTSxFQUFVWixHQUFJSyxFQUFHQyxHQUNyQixPQUFPSSxFQUFZQyxFQUFVRixHQUFVQSxFQUFTRyxFQUFVRCxHQUFXRixHQUFVQSxHQUFVRyxDQUMzRixDQUVBLFNBQVNDLEdBQU1KLEVBQVFKLEVBQUdDLEdBQ3hCLElBQUlLLEVBQVViLEdBQUlPLEVBQUdDLEdBQ2pCTSxFQUFVWixHQUFJSyxFQUFHQyxHQUNyQixPQUFPUixHQUFJRSxHQUFJVyxFQUFTRixHQUFTRyxFQUNuQyxDQUVBLFNBQVNFLEdBQUtULEdBQ1osUUFBU0EsRUFBSSxLQUFPQSxFQUFJLEVBQzFCLENBTUEsU0FBU1UsR0FBT0MsRUFBUUMsR0FJdEIsT0FIQTFHLEVBQVEwRyxHQUFjLFNBQVVDLEdBQzlCRixFQUFTQSxFQUFPbkssUUFBUSxLQUFNLEdBQUtxSyxFQUNyQyxJQUNPRixDQUNULENBRUEsU0FBU0csR0FBSVYsR0FDWCxPQUFPQSxFQUFTLEdBQUssSUFBTUEsRUFBUyxHQUFLQSxDQUMzQyxDQUVBLElBQUlXLEdBQU0sQ0FBQyxFQU1YLFNBQVNDLEtBQ1AsSUFBSUMsRUFBWSxHQTBDaEIsU0FBU0MsRUFBYUMsRUFBU0MsRUFBUWhILEdBQ3JDRixFQUFRaUgsR0FBUyxTQUFVNUosR0FDekJBLEdBQVUyQyxFQUFRa0gsR0FBUSxTQUFVQyxHQUNsQ0EsRUFBUXZHLE1BQU0sS0FBS1osU0FBUSxTQUFVb0gsR0FDbkMsSUFBSUMsRUFBV0QsRUFBUXhHLE1BQU0sS0FDN0JWLEVBQVM3QyxFQUFRZ0ssRUFBUyxHQUFJQSxFQUFTLEdBQ3pDLEdBQ0YsR0FDRixHQUNGLENBU0EsTUFBTyxDQUNMM0ksS0EzREYsU0FBY3VJLEVBQVNDLEVBQVFJLEVBQVVDLEdBQ3ZDUCxFQUFhQyxFQUFTQyxHQUFRLFNBQVU3SixFQUFRbUssRUFBT0MsR0FDckQsSUFBSUMsRUFBaUIscUJBQXNCckssRUFDdkNzSyxFQUFVRCxFQUFnQnJLLEVBQU91SyxvQkFBb0JsSixLQUFLckIsRUFBUW1LLEVBQU9GLEVBQVVDLEdBQVdsSyxFQUF1QixlQUFFcUIsS0FBS3JCLEVBQVFpSyxHQUN4SUksRUFBZ0JySyxFQUFPd0ssaUJBQWlCTCxFQUFPRixFQUFVQyxHQUFXbEssRUFBb0IsWUFBRWlLLEdBQzFGUCxFQUFVMU0sS0FBSyxDQUFDZ0QsRUFBUW1LLEVBQU9DLEVBQVdILEVBQVVLLEdBQ3RELEdBQ0YsRUFxREVHLE9BbkRGLFNBQWdCYixFQUFTQyxFQUFRSSxHQUMvQk4sRUFBYUMsRUFBU0MsR0FBUSxTQUFVN0osRUFBUW1LLEVBQU9DLEdBQ3JEVixFQUFZQSxFQUFVckYsUUFBTyxTQUFVcUcsR0FDckMsU0FBSUEsRUFBUyxLQUFPMUssR0FBVTBLLEVBQVMsS0FBT1AsR0FBU08sRUFBUyxLQUFPTixHQUFlSCxHQUFZUyxFQUFTLEtBQU9ULEtBQ2hIUyxFQUFTLE1BQ0YsRUFJWCxHQUNGLEdBQ0YsRUF5Q0VDLFNBdkNGLFNBQWtCM0ssRUFBUWpDLEVBQU02TSxHQUM5QixJQUFJaFEsRUFDQWlRLEdBQVUsRUFhZCxNQVgyQixtQkFBaEJDLFlBQ1RsUSxFQUFJLElBQUlrUSxZQUFZL00sRUFBTSxDQUN4QjhNLFFBQVNBLEVBQ1RELE9BQVFBLEtBR1ZoUSxFQUFJOEssU0FBU3FGLFlBQVksZ0JBQ3ZCQyxnQkFBZ0JqTixFQUFNOE0sR0FBUyxFQUFPRCxHQUcxQzVLLEVBQU9pTCxjQUFjclEsR0FDZEEsQ0FDVCxFQXdCRXNRLFFBWEYsV0FDRXhCLEVBQVUvRyxTQUFRLFNBQVV3SSxHQUMxQkEsRUFBSyxJQUNQLElBQ0F6SyxFQUFNZ0osRUFDUixFQVFGLENBRUEsSUFBSTBCLEdBQWdCLFVBQ2hCQyxHQUFjLFFBQ2RDLEdBQWEsT0FDYkMsR0FBYyxRQUNkQyxHQUFjLFFBS2RDLEdBQWdCLFVBQ2hCQyxHQUFnQixVQUNoQkMsR0FBZSxTQUNmQyxHQUFnQixVQUloQkMsR0FBZSxTQUNmQyxHQUFpQixXQUVqQkMsR0FBZ0IsVUFLaEJDLEdBQTJCLHFCQUMzQkMsR0FBc0IsZ0JBRXRCQyxHQUF1QixpQkFDdkJDLEdBQXdCLGtCQUd4QkMsR0FBMEIsS0FFOUIsU0FBU0MsR0FBZUMsR0FDdEIsSUFBSUMsRUFBTUQsRUFBVUEsRUFBUW5DLE1BQU1vQyxJQUFNN0csU0FBUzhHLHlCQUM3Q0MsRUFBU2hELEtBZ0JiLE9BSkk2QyxHQUNGQSxFQUFRbkMsTUFBTXVDLEdBQUdYLEdBQWVVLEVBQU92QixTQUdsQyxFQUFPdUIsRUFBUSxDQUNwQkYsSUFBS0EsRUFDTEcsR0FoQkYsU0FBWTdDLEVBQVFJLEdBQ2xCd0MsRUFBT3BMLEtBQUtrTCxFQUFLOUosRUFBUW9ILEdBQVE4QyxLQUFLLE1BQU0sU0FBVS9SLEdBQ3BEcVAsRUFBUzlJLE1BQU04SSxFQUFVaEksRUFBUXJILEVBQUVnUSxRQUFVaFEsRUFBRWdRLE9BQVMsR0FDMUQsR0FDRixFQWFFZ0MsSUFBS3pMLEVBQU1zTCxFQUFPaEMsT0FBUThCLEdBQzFCTSxLQVpGLFNBQWMxQyxHQUNac0MsRUFBTzlCLFNBQVM0QixFQUFLcEMsRUFBT3ZKLEVBQU1XLFVBQVcsR0FDL0MsR0FZRixDQUVBLFNBQVN1TCxHQUFnQkMsRUFBVUMsRUFBWUMsRUFBVUMsR0FDdkQsSUFDSUMsRUFFQUMsRUFIQUMsRUFBTUMsS0FBS0QsSUFFWEUsRUFBTyxFQUVQQyxHQUFTLEVBQ1RDLEVBQVEsRUFFWixTQUFTQyxJQUNQLElBQUtGLEVBQVEsQ0FJWCxHQUhBRCxFQUFPUixFQUFXN0UsSUFBS21GLElBQVFGLEdBQWFKLEVBQVUsR0FBSyxFQUMzREUsR0FBWUEsRUFBU00sR0FFakJBLEdBQVEsSUFDVlAsSUFDQUcsRUFBWUUsSUFFUkgsS0FBV08sR0FBU1AsR0FDdEIsT0FBT1MsSUFJWFAsRUFBS3pMLEVBQUkrTCxFQUNYLENBQ0YsQ0FTQSxTQUFTQyxJQUNQSCxHQUFTLENBQ1gsQ0FXQSxTQUFTSSxJQUNQUixHQUFNUyxxQkFBcUJULEdBQzNCRyxFQUFPLEVBQ1BILEVBQUssRUFDTEksR0FBUyxDQUNYLENBVUEsTUFBTyxDQUNMMU0sTUFwQ0YsU0FBZWdOLEdBQ2JBLEdBQVVGLElBQ1ZULEVBQVlFLEtBQVNTLEVBQVNQLEVBQU9SLEVBQVcsR0FDaERTLEdBQVMsRUFDVEosRUFBS3pMLEVBQUkrTCxFQUNYLEVBZ0NFSyxPQTFCRixXQUNFWixFQUFZRSxJQUNaRSxFQUFPLEVBRUhOLEdBQ0ZBLEVBQVNNLEVBRWIsRUFvQkVJLE1BQU9BLEVBQ1BDLE9BQVFBLEVBQ1JJLElBYkYsU0FBYUMsR0FDWGxCLEVBQVdrQixDQUNiLEVBWUVDLFNBVkYsV0FDRSxPQUFPVixDQUNULEVBVUYsQ0FrR0EsSUFBSVcsR0FBUSxRQUNSQyxHQUFhRCxHQUFRLE9BQ3JCRSxHQUFjRixHQUFRLFFBQ3RCRyxHQUFXSCxHQUFRLEtBQ25CSSxHQUFhSixHQUFRLE9BR3JCSyxHQUFNLE1BQ05DLEdBQWtCLENBQ3BCdlEsTUFBTyxDQUFDLFVBQ1J3USxLQUFNLENBQUMsTUFBTyxTQUNkOUosTUFBTyxDQUFDLFNBQVUsUUFDbEI2RCxFQUFHLENBQUMsS0FDSmtHLEVBQUcsQ0FBQyxLQUNKQyxFQUFHLENBQUMsS0FDSkMsVUFBVyxDQUFDUCxHQUFVRCxJQUN0QlMsV0FBWSxDQUFDUCxHQUFZSCxLQXVCM0IsSUFBSVcsR0FBTyxPQUNQQyxHQUFZLFdBRVpDLEdBQWMsUUFDZEMsR0FBZ0JELEdBQWMsV0FDOUJFLEdBQWVGLEdBQWMsVUFDN0JHLEdBQWdCSCxHQUFjLFdBQzlCSSxHQUFhSixHQUFjLFFBQzNCSyxHQUFrQkwsR0FBYyxhQUNoQ00sR0FBY04sR0FBYyxTQUM1Qk8sR0FBbUJQLEdBQWMsY0FDakNRLEdBQXVCUixHQUFjLGtCQUNyQ1MsR0FBWVQsR0FBYyxPQUMxQlUsR0FBWVYsR0FBYyxPQUMxQlcsR0FBY1gsR0FBYyxTQUM1QlksR0FBaUIsQ0FBQ2QsR0FBTUMsR0FiYixXQWFrQ0UsR0FBZUMsR0FBY0UsR0FBWUMsR0FBaUJDLEdBQWFDLEdBQWtCQyxJQUN0SUssR0FBZWxJLEVBQWUsS0FDOUJtSSxHQUFzQixNQUN0QkMsR0FBYXBJLEVBQ2JxSSxHQUFjSCxHQUFlLFFBQzdCSSxHQUFhSixHQUFlLE9BQzVCSyxHQUFjTCxHQUFlLFFBQzdCTSxHQUFjRCxHQUFjLFVBQzVCRSxHQUFrQkYsR0FBYyxjQUNoQ0csR0FBZVIsR0FBZSxTQUM5QlMsR0FBY1QsR0FBZSxRQUM3QlUsR0FBbUJELEdBQWMsU0FDakNFLEdBQW1CRixHQUFjLFNBQ2pDRyxHQUFtQlosR0FBZSxhQUNsQ2EsR0FBd0JELEdBQW1CLFNBRTNDRSxHQURpQmQsR0FDSWUsZ0JBQ3JCQyxHQUFlaEIsR0FBZSxTQUk5QmlCLEdBQVdqQixHQUFlLEtBQzFCa0IsR0FBb0JqQixHQUFzQixjQUMxQ2tCLEdBQWVsQixHQUFzQixTQUNyQ21CLEdBQWFuQixHQUFzQixPQUNuQ29CLEdBQWFwQixHQUFzQixPQUNuQ3FCLEdBQWdCckIsR0FBc0IsVUFDdENzQixHQUFnQnRCLEdBQXNCLFVBQ3RDdUIsR0FBaUJ2QixHQUFzQixXQUN2Q3dCLEdBQWlCeEIsR0FBc0IsV0FDdkN5QixHQUFpQixDQUFDUCxHQUFjRyxHQUFlRixHQUFZQyxHQUFZRSxHQUFlQyxHQUFnQkMsSUFDdEdFLEdBQVUsQ0FDWkMsTUFBT3ZCLEdBQ1B3QixNQUFPdkIsR0FDUHdCLE9BQVF0QixHQUNSdUIsTUFBT3RCLEdBQ1B1QixLQUFNdEIsR0FDTnVCLEtBQU10QixHQUNOdUIsV0FBWXRCLEdBQ1o5VCxLQUFNK1QsR0FDTnNCLFFBcEJrQm5DLEdBQWUsV0EyQy9Cb0MsR0FBc0IsdUJBQ3RCQyxHQUFzQixzQkFDdEJDLEdBQW9CLHFDQStHcEJDLEdBQVEsUUFDUkMsR0FBTyxPQUNQQyxHQUFPLE9BNjRCWCxJQW1ISUMsR0FBMEIzSyxHQUFpQixZQTJPM0M0SyxHQUEwQixDQUM1QkMsU0FBUyxFQUNUQyxTQUFTLEdBd05QQyxHQUFvQixDQUN0QkMsU0FBVSxJQUNWQyxNQUFPekUsR0FDUDBFLEtBQU0zRSxHQUNONEUsR0FBSTFFLEdBQ0oyRSxLQUFNMUUsSUFHUixTQUFTMkUsR0FBYTFTLEdBRXBCLE9BREFBLEVBQU0yQixFQUFTM0IsR0FBT0EsRUFBTUEsRUFBSUEsSUFDekJvUyxHQUFrQnBTLElBQVFBLENBQ25DLENBRUEsSUFBSTJTLEdBQWlCLFVBZ0VqQkMsR0FBcUJ2TCxHQUFpQixRQUN0Q3dMLEdBQXdCRCxHQUFxQixVQUM3Q0UsR0FBaUIsSUFBTUYsR0FBcUIsT0FBU0MsR0FBd0IsSUEwUDdFRSxHQUFlLENBQUMsSUFBSyxTQXVLckJDLEdBQXFDbFQsT0FBT21ULE9BQU8sQ0FDckRDLFVBQVcsS0FDWEMsTUF2dUVGLFNBQWVySCxFQUFTc0gsRUFBYTFKLEdBQ25DLElBQUkySixFQUFRdkgsRUFBUXVILE1BQ2hCQyxFQUFjNUosRUFBUTRKLGFBQWUsQ0FBQyxFQUN0Q0MsRUFBZ0I3SixFQUFRNkosZUFBaUIsQ0FBQyxFQUMxQ3RILEVBQVNoRCxLQUNUdUssRUFBVSxHQWFkLFNBQVM5SSxFQUFRK0ksR0FDWEEsR0FDRnhILEVBQU92QixTQUVYLENBRUEsU0FBU2dKLEVBQVNDLEVBQVUvTSxHQUMxQixJQUFJZ04sRUFBWUMsV0FBV2pOLEdBQzNCcUYsRUFBT3BMLEtBQUsrUyxFQUFXLFNBQVUxRyxHQUNqQ3NHLEVBQVFoWCxLQUFLLENBQUNtWCxFQUFVQyxHQUMxQixDQUVBLFNBQVMxRyxJQUNQLElBQUk0RyxFQUFZVCxFQUFNVSxHQTVqQlYsR0E2akJSQyxFQUFZdEssRUFBUXNLLFVBQ3BCQyxFQUFTVCxFQUFRVSxRQUFPLFNBQVVDLEVBQVNDLEdBQzdDLE9BQU83UCxFQUFNNFAsRUFBU0MsRUFBTSxHQUFHMVEsUUFBVTBRLEVBQU0sR0FBSyxDQUFDLEVBQ3ZELEdBQUcsQ0FBQyxHQUNKNVAsRUFBS2tGLEdBQ0w4RCxFQUFJeUcsR0FFQXZLLEVBQVFnQixRQUNWb0IsRUFBUXBCLFFBQTRCLGVBQXBCaEIsRUFBUWdCLFNBQ2ZvSixHQUNUcEosR0FBUSxHQUNSb0IsRUFBUXVJLFNBRVJMLElBQWN0SyxFQUFRc0ssV0FBYWxJLEVBQVF3SSxTQUUvQyxDQVFBLFNBQVM5RyxFQUFJK0csRUFBTUMsRUFBTUMsR0FDdkJsUSxFQUFNbUYsRUFBUzZLLEdBQ2ZDLEdBQVFqUSxFQUFNekUsT0FBTzRVLGVBQWVoTCxHQUFVNkssSUFFMUNFLEdBQVdwQixFQUFNVSxHQTlsQlgsSUErbEJSakksRUFBUU8sS0FBS25CLEdBQWV4QixFQUVoQyxDQUVBLE1BQU8sQ0FDTGlMLE1BMURGLFdBQ0UsSUFBSUMsRUFBK0IsUUFBdkJsTCxFQUFRbUwsV0FDcEI3USxFQUFRc1AsR0FBYXdCLE1BQUssU0FBVUMsRUFBR0MsR0FDckMsT0FBT0osR0FBU0csR0FBS0MsR0FBS0EsR0FBS0QsQ0FDakMsSUFBRzVTLFNBQVEsU0FBVW5DLEdBQ25CMFQsRUFBU0osRUFBWXRULEdBQU0sS0FBTzRVLEVBQVEsTUFBUSxPQUFTLFVBQVk1VSxFQUFNLE1BQy9FLElBQ0EwVCxFQUFTSCxFQUFldFQsR0FDeEJpTixHQUNGLEVBa0RFeEMsUUFBU0EsRUFDVHdKLE9BbEJGLFNBQWdCZSxHQUNWcEIsV0FBVzVULEdBQThCeUQsVUFDM0N1UixFQUFTMVEsRUFBTW1GLEVBQVM2SixHQUFpQi9PLEVBQUtrRixFQUFTMUYsRUFBUXVQLElBRW5FLEVBZUUvRixJQUFLQSxFQUVULEVBa3FFRTBILFVBN29FRixTQUFtQnBKLEVBQVNzSCxFQUFhMUosR0FjdkMsTUFBTyxDQUNMOU8sUUFkRixTQUFpQnlLLEVBQU04UCxFQUFVbkIsR0FFL0IsSUFBSW9CLEVBaEJFLFNBZU5wQixFQUFZQSxHQUFhdEssRUFBUXNLLFlBQ0NtQixFQUFlbkIsSUFBY2hHLEdBQU0sR0FBSyxFQUE3QixFQUM3QyxPQUFPQyxHQUFnQjVJLElBQVM0SSxHQUFnQjVJLEdBQU0rUCxJQUFVL1AsRUFBSzVHLFFBQVEscUJBQXFCLFNBQVU0VyxFQUFPQyxHQUNqSCxJQUFJeE0sRUFBY21GLEdBQWdCb0gsRUFBTUUsZUFBZUgsSUFBVUMsRUFDakUsT0FBT0MsRUFBUyxFQUFJeE0sRUFBWTBNLE9BQU8sR0FBR0MsY0FBZ0IzTSxFQUFZMUksTUFBTSxHQUFLMEksQ0FDbkYsR0FDRixFQVFFNE0sT0FORixTQUFnQnhULEdBQ2QsT0FBT0EsR0F4QkQsUUF3QlV3SCxFQUFRc0ssVUFBb0IsR0FBSyxFQUNuRCxFQU1GLEVBNG5FRTJCLFNBeGlFRixTQUFrQjdKLEVBQVNzSCxFQUFhMUosR0FDdEMsSUFVSWtNLEVBQ0FDLEVBQ0FDLEVBWkFDLEVBQWtCbEssR0FBZUMsR0FDakNJLEVBQUs2SixFQUFnQjdKLEdBQ3JCckwsRUFBT2tWLEVBQWdCbFYsS0FFdkJtVixFQUFPbEssRUFBUWtLLEtBQ2ZDLEVBQU92TSxFQUFRdU0sS0FDZkMsRUFBVyxDQUFDLEVBQ1pDLEVBQVMsR0FDVEMsRUFBYyxHQUNkQyxFQUFlLEdBS25CLFNBQVMxQixJQStEVCxJQWxmZ0IyQixFQW1mVjFKLEVBQ0EySixFQXhCSlgsRUFBUVksRUFBSyxJQUFNL0csSUFDbkJvRyxFQUFPL1IsRUFBTThSLEVBQU8sSUFBTWxHLElBQzFCcEksR0FBT3NPLEdBQVNDLEVBQU0sb0NBQ3RCclosRUFBSzJaLEVBQVFqVCxFQUFTMlMsRUFBTSxJQUFNbEcsR0FBYyxTQUFXQyxHQUFjLE1BQ3pFMUwsRUFBTyxDQUNMa04sT0FBUXRCLEdBQ1IwQixXQUFZdEIsR0FDWm9CLEtBQU10QixHQUNOdUIsS0FBTXRCLEdBQ053RyxJQUFLckcsR0FDTHNHLE9BQVFwRyxLQUNQLFNBQVV6SyxFQUFXN0YsR0FDdEJrVyxFQUFTbFcsR0FBT3dXLEVBQUssSUFBTTNRLEVBQzdCLElBQ0EsRUFBT3FRLEVBQVUsQ0FDZkYsS0FBTUEsRUFDTkosTUFBT0EsRUFDUEMsS0FBTUEsRUFDTk0sT0FBUUEsSUFLTnZKLEVBQUtvSixFQUFLcEosSUFsZlQsSUFEUzBKLEVBbWZlbFAsR0FsZlYyQixHQUFJQyxHQUFJc04sSUFBV3ROLEdBQUlzTixJQUFXLEdBQUssR0FtZnREQyxFQUFPN00sRUFBUTZNLEtBQ25CUCxFQUFLcEosR0FBS0EsRUFDVmdKLEVBQU1oSixHQUFLZ0osRUFBTWhKLElBQU1BLEVBQUssU0FDNUJpSixFQUFLakosR0FBS2lKLEVBQUtqSixJQUFNQSxFQUFLLFNBRXJCakgsRUFBYXFRLEVBQU16SCxLQUEwQixZQUFqQnlILEVBQUtXLFNBQXlCSixHQUM3RDFSLEVBQWFtUixFQUFNekgsR0FBTWdJLEdBRzNCMVIsRUFBYW1SLEVBQU0vRyxHQUFzQmdILEVBQUtXLFVBQzlDL1IsRUFBYWdSLEVBQU10SCxHQUFNLGdCQXhFekJyQixHQUNGLENBZ0JBLFNBQVN4QyxFQUFRK0ksR0FDZixJQUFJOU8sRUFBUTBLLEdBQWV2TyxPQUFPLFNBQ2xDWixFQUFNaVcsR0FDTm5QLEVBQVlnUCxFQUFNSSxHQUNsQnBQLEVBQVk0TyxFQUFPUyxHQUNuQjVSLEVBQWdCLENBQUNtUixFQUFPQyxHQUFPbFIsR0FDL0JGLEVBQWdCdVIsRUFBTXZDLEVBQWE5TyxFQUFRLENBQUMsUUFBU3NLLElBQ3ZELENBRUEsU0FBUy9CLElBQ1BsRyxFQUFZZ1AsRUFBTUksR0FDbEJwUCxFQUFZNE8sRUFBT1MsR0FDbkJELEVBQWNTLEVBQVdySCxJQUN6QjZHLEVBQWVRLEVBQVdwSCxJQUMxQjNNLEVBQVNrVCxFQUFNSSxHQUNmdFQsRUFBUzhTLEVBQU9TLEdBQ2hCeFIsRUFBYW1SLEVBQU1uSCxHQUFZbkYsRUFBUW9OLE9BQ3ZDalMsRUFBYW1SLEVBQU1sSCxHQUFpQnBGLEVBQVFxTixXQUM5QyxDQXdDQSxTQUFTUCxFQUFLN1MsR0FDWixJQUFJbEIsRUFBTW1FLEVBQU1vUCxFQUFNclMsR0FDdEIsT0FBT2xCLEdBdkhYLFNBQWlCdVUsRUFBTXJULEdBQ3JCLEdBQUlqQyxFQUFXc1YsRUFBS0MsU0FDbEIsT0FBT0QsRUFBS0MsUUFBUXRULEdBS3RCLElBRkEsSUFBSWxCLEVBQU11VSxFQUVIdlUsR0FBd0IsSUFBakJBLEVBQUl5VSxXQUNaeFQsRUFBUWpCLEVBQUtrQixJQUlqQmxCLEVBQU1BLEVBQUkwVSxjQUdaLE9BQU8xVSxDQUNULENBdUdrQndVLENBQVF4VSxFQUFLLElBQU0rTSxNQUFnQndHLEVBQU92VCxPQUFNLENBQ2hFLENBRUEsU0FBU29VLEVBQVdyQyxHQUNsQixNQUFPLENBQUNBLEVBQU8sS0FBTzlLLEVBQVFuTSxLQUFNaVgsRUFBTyxLQUFPOUssRUFBUXNLLFVBQVd0SyxFQUFRME4sTUFBUTVDLEVBQU8sY0FBZTlLLEVBQVEyTixjQUFnQjdDLEVBQU8sUUFBU0EsSUFBU2hGLElBQWNpQixHQUM1SyxDQUVBLE9BQU8sRUFBT3lGLEVBQVUsQ0FDdEJ2QixNQUFPQSxFQUNQTixNQW5GRixXQUNFbkksRUFBR2pCLEdBQWVQLEdBQ2xCd0IsRUFBR2pCLEdBQWUwSixHQUNsQnpJLEVBQUdoQixHQUFlZ0MsR0FDbEJyTSxFQUFLcUUsU0FBVXdNLEdBQXNCLFlBQVksU0FBVXRYLEdBQ3pEMGIsRUFBd0IsWUFBWDFiLEVBQUVtRCxJQUNqQixHQUFHLENBQ0Q0VSxTQUFTLElBRVh0UixFQUFLbVYsRUFBTSxXQUFXLFdBQ3BCeFQsRUFBWXdULEVBQU1sRixLQUFrQmdGLEVBQ3RDLEdBQ0YsRUF3RUVwTCxRQUFTQSxHQUViLEVBODdERTRNLE9BenhERixTQUFnQnhMLEVBQVNzSCxFQUFhMUosR0FDcEMsSUFBSTZOLEVBQW1CMUwsR0FBZUMsR0FDbENJLEVBQUtxTCxFQUFpQnJMLEdBQ3RCRyxFQUFPa0wsRUFBaUJsTCxLQUN4QnhMLEVBQU8wVyxFQUFpQjFXLEtBRXhCMlcsRUFBd0JwRSxFQUFZdUMsU0FDcENRLEVBQVNxQixFQUFzQnJCLE9BQy9CTixFQUFPMkIsRUFBc0IzQixLQUM3QjRCLEVBQVUsR0FRZCxTQUFTQyxJQUNQdkIsRUFBT2hVLFNBQVEsU0FBVStPLEVBQU9rRSxHQUM5QjFCLEVBQVN4QyxFQUFPa0UsR0FBUSxFQUMxQixHQUNGLENBRUEsU0FBUzFLLElBQ1BpTixHQUFVLFNBQVVDLEdBQ2xCQSxFQUFPbE4sU0FDVCxJQUNBeEssRUFBTXVYLEVBQ1IsQ0FRQSxTQUFTL0QsRUFBU3hDLEVBQU9rRSxFQUFPeUMsR0FDOUIsSUFBSTFULEVBcE1SLFNBQWlCMkgsRUFBU3NKLEVBQU95QyxFQUFZM0csR0FDM0MsSUFpQkk0QyxFQWpCQW5LLEVBQVFrQyxHQUFlQyxHQUN2QkksRUFBS3ZDLEVBQU11QyxHQUNYRyxFQUFPMUMsRUFBTTBDLEtBQ2J4TCxFQUFPOEksRUFBTTlJLEtBQ2JpWCxFQUFhaE0sRUFBUWdNLFdBQ3JCOUIsRUFBT2xLLEVBQVFrSyxLQUNmdE0sRUFBVW9DLEVBQVFwQyxRQUNsQjJOLEVBQWUzTixFQUFRMk4sYUFDdkJVLEVBQWVyTyxFQUFRcU8sYUFDdkI5QixFQUFPdk0sRUFBUXVNLEtBQ2Z6RSxFQUFhOUgsRUFBUThILFdBQ3JCd0csRUFBYXRPLEVBQVFzTyxXQUNyQnBkLEVBQVVrZCxFQUFXNUMsVUFBVXRhLFFBQy9Ca0UsRUFBUzZHLEVBQWF1TCxFQUFPLFNBQzdCNEYsRUFBUW5SLEVBQWF1TCxFQUFPckMsSUFDNUJvSixFQUFVSixHQUFjLEVBQ3hCSyxFQUFZcFUsRUFBTW9OLEVBQU8sSUFBTXJCLElBa0NuQyxTQUFTc0ksSUFDUCxJQUFJQyxFQUFXdE0sRUFBUXVNLFFBQVFDLEtBQUksU0FBVTlZLEdBQzNDLElBQUlvWSxFQUFTcFksRUFBTytZLE9BQU9ULFdBQVdSLE9BQU9rQixNQUFNcEQsR0FDbkQsT0FBT3dDLEVBQVNBLEVBQU8xRyxNQUFNdEUsR0FBSyxFQUNwQyxJQUFHVCxLQUFLLEtBQ1J0SCxFQUFhcU0sRUFBT3JDLEdBQVlsRyxHQUFPc04sRUFBS3dDLFFBQVNSLEVBQVVKLEVBQWF6QyxHQUFTLElBQ3JGdlEsRUFBYXFNLEVBQU94QyxHQUFlMEosR0FDbkN2VCxFQUFhcU0sRUFBTzNDLEdBQU15SixFQUFhLFNBQVcsSUFDbERBLEdBQWN2VCxFQUFnQnlNLEVBQU9qQyxHQUN2QyxDQUVBLFNBQVN5SixJQUNGNUUsR0FDSDVHLEdBRUosQ0FFQSxTQUFTQSxJQUNQLElBQUs0RyxFQUFXLENBQ2QsSUFBSTZFLEVBQU83TSxFQUFRc0osT0FTakJ3RCxFQUFTQyxPQUVFalQsRUFBU3NMLEVBQU9ULE1BQzdCak8sRUFBWTBPLEVBQU9ULEdBQWNtSSxHQUNqQy9ULEVBQWFxTSxFQUFPdkMsR0FBYzBJLEdBQWdCdUIsR0FBVSxJQUM1RHZNLEVBQUt1TSxFQTNoQlEsU0FDRSxXQTBoQjhCRSxJQUlqRCxXQUNFLElBQUlDLEVBaUNOLFdBQ0UsR0FBSWpOLEVBQVFpSSxHQUFHaEMsSUFDYixPQUFPOEcsSUFHVCxJQUFJRyxFQUFZalQsRUFBSytSLEVBQVduQyxTQUFTQyxPQUNyQ3FELEVBQVlsVCxFQUFLbUwsR0FDakJoRCxFQUFPdFQsRUFBUSxRQUFRLEdBQ3ZCd0osRUFBUXhKLEVBQVEsU0FBUyxHQUM3QixPQUFPaU4sR0FBTW1SLEVBQVU5SyxLQUFVcEcsR0FBS21SLEVBQVUvSyxLQUFVckcsR0FBTW9SLEVBQVU3VSxLQUFXMEQsR0FBS2tSLEVBQVU1VSxHQUN0RyxDQTNDZ0I4VSxHQUNWQyxHQUFVSixLQUFhRixLQUFjWixHQWlCekMsR0FmS25NLEVBQVF1SCxNQUFNVSxHQUFHLENBOTZCYixFQUNHLEtBODZCVmxQLEVBQWFxTSxFQUFPbkMsR0FBYW9LLEdBQVUsSUFHN0N0VSxFQUFhaUMsRUFBU29LLEVBQU94SCxFQUFRMFAsZ0JBQWtCLElBQUs1SyxHQUFXMkssR0FBVSxFQUFJLElBRWpGbkIsR0FDRm5ULEVBQWFxTSxFQUFPMUMsR0FBVzJLLEdBQVUsRUFBSSxHQUczQ0osSUFBWW5ULEVBQVNzTCxFQUFPTixNQUM5QnBPLEVBQVkwTyxFQUFPTixHQUFlbUksR0FDbEMxTSxFQUFLME0sRUE3aUJTLFVBQ0QsU0E0aUJnQ0QsS0FHMUNDLEdBQVc3VCxTQUFTbVUsZ0JBQWtCbkksRUFBTyxDQUNoRCxJQUFJMEcsRUFBU0UsRUFBV1IsT0FBT2tCLE1BQU0xTSxFQUFRc0osT0FDN0N3QyxHQUFVLEVBQU1BLEVBQU8xRyxNQUN6QixDQUNGLENBdkNJb0ksR0FDQTlXLEVBQVkwTyxFQUFPUixHQUFZMEUsSUFBVXVELEVBQU8sR0FDaERuVyxFQUFZME8sRUFBT1AsR0FBWXlFLElBQVV1RCxFQUFPLEVBQ2xELENBR0YsSUFDTUMsQ0FITixDQXlDQSxTQUFTQyxJQUNQLElBQUlGLEVBQU83TSxFQUFRc0osTUFDbkIsT0FBT3VELElBQVN2RCxHQUFTMUwsRUFBUTZQLGFBQWVaLElBQVNkLENBQzNELENBd0JBLElBQUlpQixFQUFPLENBQ1QxRCxNQUFPQSxFQUNQeUMsV0FBWUEsRUFDWjNHLE1BQU9BLEVBQ1BnSCxVQUFXQSxFQUNYRCxRQUFTQSxFQUNUNUQsTUFsSUYsV0FDTzRELElBQ0gvRyxFQUFNdEUsR0FBS29KLEVBQUtwSixHQUFLLFNBQVc3RCxHQUFJcU0sRUFBUSxHQUM1Q3ZRLEVBQWFxTSxFQUFPM0MsR0FBTWlELEVBQWEsV0FBYSxTQUNwRDNNLEVBQWFxTSxFQUFPakMsR0FBc0JnSCxFQUFLL0UsT0FDL0NyTSxFQUFhcU0sRUFBT3JDLEdBQVlpSSxHQUFTbk8sR0FBT3NOLEVBQUt1RCxXQUFZLENBQUNwRSxFQUFRLEVBQUd0SixFQUFRNVAsV0FPdkYyRSxFQUFLcVEsRUFBTyxRQUFTdlEsRUFBTTBMLEVBQU1yQixHQUFhOE4sSUFDOUNqWSxFQUFLcVEsRUFBTyxVQUFXdlEsRUFBTTBMLEVBaGRQLEtBZ2RrQ3lNLElBQ3hENU0sRUFBRyxDQUFDbkIsR0FoZFksS0FnZGdCTyxJQUFpQjRCLEdBQ2pEaEIsRUFBR1YsR0FBMEIyTSxHQUV6QkosR0FDRjdMLEVBQUdwQixHQUFZNE4sRUFUbkIsRUEwSEVoTyxRQTdHRixXQUNFb0osR0FBWSxFQUNabkssRUFBTWUsVUFDTjFELEVBQVlrSyxFQUFPRixJQUNuQnZNLEVBQWdCeU0sRUFBTzdCLElBQ3ZCeEssRUFBYXFNLEVBQU8sUUFBU3BTLEdBQzdCK0YsRUFBYXFNLEVBQU9yQyxHQUFZaUksR0FBUyxHQUMzQyxFQXVHRTVKLE9BQVFBLEVBQ1I5SCxNQXhDRixTQUFpQkMsRUFBTW5ELEVBQU91WCxHQUM1QnJVLEVBQU1xVSxHQUFnQnZCLEdBQWFoSCxFQUFPN0wsRUFBTW5ELEVBQ2xELEVBdUNFd1gsU0FwQkYsU0FBa0IxQyxFQUFNMkMsR0FDdEIsSUFBSUMsRUFBTzdSLEdBQUlpUCxFQUFPNUIsR0FNdEIsT0FKSzZDLElBQVl2TyxFQUFRNkQsU0FBVXpCLEVBQVFpSSxHQUFHakMsTUFDNUM4SCxFQUFPbFMsR0FBSWtTLEVBQU05TixFQUFRNVAsT0FBUzBkLElBRzdCQSxHQUFRRCxDQUNqQixHQWNBLE9BQU9iLENBQ1QsQ0F1Q2lCZSxDQUFRL04sRUFBU3NKLEVBQU95QyxFQUFZM0csR0FDakQvTSxFQUFPa1EsUUFDUG9ELEVBQVFqYixLQUFLMkgsR0FDYnNULEVBQVEzQyxNQUFLLFNBQVVnRixFQUFRbEMsR0FDN0IsT0FBT2tDLEVBQU8xRSxNQUFRd0MsRUFBT3hDLEtBQy9CLEdBQ0YsQ0FFQSxTQUFTMkUsRUFBSUMsR0FDWCxPQUFPQSxFQUFnQm5XLEdBQU8sU0FBVStULEdBQ3RDLE9BQVFBLEVBQU9LLE9BQ2pCLElBQUtSLENBQ1AsQ0FzQ0EsU0FBU0UsRUFBVXRWLEVBQVUyWCxHQUMzQkQsRUFBSUMsR0FBZTdYLFFBQVFFLEVBQzdCLENBRUEsU0FBU3dCLEVBQU9vVyxHQUNkLE9BQU94QyxFQUFRNVQsT0FBT25DLEVBQVd1WSxHQUFXQSxFQUFVLFNBQVVyQyxHQUM5RCxPQUFPalcsRUFBU3NZLEdBQVd2VyxFQUFRa1UsRUFBTzFHLE1BQU8rSSxHQUFXcmQsRUFBU3FGLEVBQVFnWSxHQUFVckMsRUFBT3hDLE1BQ2hHLEVBQ0YsQ0FpQ0EsTUFBTyxDQUNMZixNQXRIRixXQUNFcUQsSUFDQXhMLEVBQUdqQixHQUFlUCxHQUNsQndCLEVBQUdqQixHQUFleU0sRUFDcEIsRUFtSEVoTixRQUFTQSxFQUNUd0MsT0FyR0YsV0FDRXlLLEdBQVUsU0FBVUMsR0FDbEJBLEVBQU8xSyxRQUNULEdBQ0YsRUFrR0V3RyxTQUFVQSxFQUNWcUcsSUFBS0EsRUFDTEcsTUFuRkYsU0FBZTlkLEdBQ2IsSUFBSStkLEVBQWEvRyxFQUFZK0csV0FDekIvRSxFQUFRK0UsRUFBV0MsUUFBUWhlLEdBQzNCd0wsRUFBTXVTLEVBQVdFLFdBQWEsRUFBSTNRLEVBQVE0USxRQUM5QyxPQUFPelcsR0FBTyxTQUFVK1QsR0FDdEIsT0FBT3hQLEdBQVF3UCxFQUFPeEMsTUFBT0EsRUFBT0EsRUFBUXhOLEVBQU0sRUFDcEQsR0FDRixFQTZFRTRRLE1BM0VGLFNBQWVwRCxHQUNiLE9BQU92UixFQUFPdVIsR0FBTyxFQUN2QixFQTBFRXpTLElBeEVGLFNBQWFKLEVBQU82UyxHQUNsQmpULEVBQVFJLEdBQU8sU0FBVTJPLEdBS3ZCLEdBSkl2UCxFQUFTdVAsS0FDWEEsRUFBUS9LLEVBQVUrSyxJQUdoQnJQLEVBQWNxUCxHQUFRLENBQ3hCLElBQUk1TixFQUFNNlMsRUFBT2YsR0FDakI5UixFQUFNRixFQUFPOE4sRUFBTzVOLEdBQU9OLEVBQU82UyxFQUFNM0UsR0FDeENwTyxFQUFTb08sRUFBT3hILEVBQVFoSCxRQUFRd08sT0E4QmZ6TyxFQTdCSHlPLEVBNkJRekgsRUE3QkQ5SSxFQUFNMEwsRUFBTWxCLElBOEJqQ29QLEVBQVN6VCxFQUFTckUsRUFBSyxRQUN2QnZHLEVBQVNxZSxFQUFPcmUsUUFHbEJxZSxFQUFPcFksU0FBUSxTQUFVcVksR0FDdkIzWixFQUFLMlosRUFBSyxjQUFjLGFBQ2R0ZSxHQUNOdU4sR0FFSixHQUNGLElBRUFBLEdBekNBLENBNEJKLElBQXVCaEgsRUFBS2dILEVBQ3RCOFEsRUFDQXJlLENBN0JKLElBQ0FtUSxFQUFLcEIsR0FDUCxFQTJERWhGLE9BekRGLFNBQWtCZ1UsR0FDaEJoVSxFQUFPcEMsRUFBT29XLEdBQVMzQixLQUFJLFNBQVVWLEdBQ25DLE9BQU9BLEVBQU8xRyxLQUNoQixLQUNBN0UsRUFBS3BCLEdBQ1AsRUFxREU5SSxRQUFTd1YsRUFDVDlULE9BQVFBLEVBQ1J1QixNQTNDRixTQUFlQyxFQUFNbkQsRUFBT3VYLEdBQzFCOUIsR0FBVSxTQUFVQyxHQUNsQkEsRUFBT3hTLE1BQU1DLEVBQU1uRCxFQUFPdVgsRUFDNUIsR0FDRixFQXdDRWdCLFVBckJGLFNBQW1CVCxHQUNqQixPQUFPQSxFQUFnQjdELEVBQU9qYSxPQUFTdWIsRUFBUXZiLE1BQ2pELEVBb0JFd2UsU0FsQkYsV0FDRSxPQUFPakQsRUFBUXZiLE9BQVN3TixFQUFRNFEsT0FDbEMsRUFrQkYsRUEwb0RFSyxPQXhvREYsU0FBZ0I3TyxFQUFTc0gsRUFBYTFKLEdBQ3BDLElBYUlrUixFQUNBQyxFQUNBQyxFQWZBQyxFQUFtQmxQLEdBQWVDLEdBQ2xDSSxFQUFLNk8sRUFBaUI3TyxHQUN0QnJMLEVBQU9rYSxFQUFpQmxhLEtBQ3hCd0wsRUFBTzBPLEVBQWlCMU8sS0FFeEJpTCxFQUFTbEUsRUFBWWtFLE9BQ3JCMWMsRUFBVXdZLEVBQVk4QixVQUFVdGEsUUFDaENvZ0IsRUFBeUI1SCxFQUFZdUMsU0FDckNLLEVBQU9nRixFQUF1QmhGLEtBQzlCSixFQUFRb0YsRUFBdUJwRixNQUMvQkMsRUFBT21GLEVBQXVCbkYsS0FDOUIyQyxFQUFRbEIsRUFBT2tCLE1BQ2Z5QyxFQUFjM0QsRUFBT2xTLE1BWXpCLFNBQVNzUyxJQUNQa0QsRUFBV2xSLEVBQVFzSyxZQUFjaEcsR0FDakM1SSxFQUFNNFEsRUFBTSxXQUFZN08sRUFBS3VDLEVBQVFoTSxRQUNyQzBILEVBQU13USxFQUFPaGIsRUFBUSxlQUFnQnNnQixHQUFXLElBQ2hEOVYsRUFBTXdRLEVBQU9oYixFQUFRLGdCQUFpQnNnQixHQUFXLElBQ2pEQyxHQUFPLEVBQ1QsQ0FFQSxTQUFTQSxFQUFPQyxHQUNkLElBd0JJemQsRUF4QkEwZCxFQUFVdFYsRUFBS2lRLElBRWZvRixHQUFTUCxFQUFTbmQsUUFBVTJkLEVBQVEzZCxPQUFTbWQsRUFBU2xkLFNBQVcwZCxFQUFRMWQsVUFDM0V5SCxFQUFNd1EsRUFBTyxVQXFCWGpZLEVBQVMsR0FFVGlkLElBRUZ0VCxHQURBM0osRUFBUzJkLElBQ00scUNBQ2YzZCxFQUFTLFFBQVVBLEVBQVMsTUFBUXVkLEdBQVcsR0FBUyxNQUFRQSxHQUFXLEdBQVEsS0FHOUV2ZCxJQTVCTHNkLEVBQVlyZ0IsRUFBUSxlQUFnQnVNLEVBQUt1QyxFQUFRNlIsTUFDakROLEVBQVksUUFtQ1B2UixFQUFROFIsVUFBWSxLQUFPclUsRUFBS3VDLEVBQVErUixjQUFnQmIsRUFBVyxHQUFLYyxNQWxDN0VULEVBQVksU0FzQ1A5VCxFQUFLdUMsRUFBUWlTLGVBQWlCZixFQUFXbFIsRUFBUWtTLFdBQWEsS0FBT0YsSUFBaUJKLE1BdENuRCxHQUN4Q1QsRUFBV1EsRUFDWGhQLEVBQUtqQixJQUVEMFAsS0FBY0EsRUFBV2UsT0FDM0JyWixFQUFZd1QsRUFBTWpGLEdBQWdCK0osR0FDbEN6TyxFQXp4QmEsV0F5eEJReU8sSUFHM0IsQ0FFQSxTQUFTSSxFQUFXOVcsR0FDbEIsSUFBSTBYLEVBQVVwUyxFQUFRb1MsUUFDbEJ6VyxFQUFPekssRUFBUXdKLEVBQVEsUUFBVSxRQUNyQyxPQUFPMFgsR0FBVzNVLEVBQUsyVSxFQUFRelcsS0FBVTlELEVBQVN1YSxHQUFXLEVBQUlBLEtBQWEsS0FDaEYsQ0FjQSxTQUFTUixJQUNQLE9BQU9uVSxFQUFLdUMsRUFBUS9MLFFBQVVvSSxFQUFLOFAsR0FBTW5ZLE1BQVFnTSxFQUFRcVMsWUFDM0QsQ0FVQSxTQUFTTCxJQUNQLElBQUlILEVBQU1wVSxFQUFLdUMsRUFBUTZSLEtBQ3ZCLE1BQU8sY0FBZ0JBLEdBQU8sTUFBUUEsR0FBTyxNQUFRN1IsRUFBUTRRLFNBQVcsSUFBTWlCLEdBQU8sTUFBUUEsR0FBTyxHQUN0RyxDQUVBLFNBQVNTLElBQ1AsT0FBT2pXLEVBQUs4UCxHQUFNamIsRUFBUSxTQUM1QixDQUVBLFNBQVNxaEIsRUFBVTdHLEVBQU84RyxHQUN4QixJQUFJQyxFQUFRM0QsRUFBTXBELEdBQVMsR0FDM0IsT0FBTytHLEVBQVFwVyxFQUFLb1csRUFBTWpMLE9BQU90VyxFQUFRLFdBQWFzaEIsRUFBYSxFQUFJRSxLQUFZLENBQ3JGLENBRUEsU0FBU0MsRUFBVWpILEVBQU84RyxHQUN4QixJQUFJQyxFQUFRM0QsRUFBTXBELEdBRWxCLEdBQUkrRyxFQUFPLENBQ1QsSUFBSS9YLEVBQVEyQixFQUFLb1csRUFBTWpMLE9BQU90VyxFQUFRLFVBQ2xDc1QsRUFBT25JLEVBQUs4UCxHQUFNamIsRUFBUSxTQUM5QixPQUFPbU4sR0FBSTNELEVBQVE4SixJQUFTZ08sRUFBYSxFQUFJRSxJQUMvQyxDQUVBLE9BQU8sQ0FDVCxDQUVBLFNBQVNFLEVBQVdKLEdBQ2xCLE9BQU9HLEVBQVV2USxFQUFRNVAsT0FBUyxHQUFLbWdCLEVBQVUsR0FBS0osRUFBVSxFQUFHQyxFQUNyRSxDQUVBLFNBQVNFLElBQ1AsSUFBSUQsRUFBUTNELEVBQU0sR0FDbEIsT0FBTzJELEdBQVNJLFdBQVduWCxFQUFNK1csRUFBTWpMLE1BQU90VyxFQUFRLGtCQUFvQixDQUM1RSxDQU1BLFNBQVNpaEIsSUFDUCxPQUFPL1AsRUFBUWlJLEdBQUdoQyxLQUFTdUssR0FBVyxHQUFRTixHQUNoRCxDQUVBLE1BQU8sQ0FDTDNILE1BM0dGLFdBNW5CRixJQUFrQnpULEVBQ1oyTCxFQTRuQkZtTCxJQUNBN1csRUFBS3hHLE9BQVEsZUE5bkJDdUcsRUE4bkJ1QkQsRUFBTTBMLEVBQU1sQixJQTduQi9Db0IsRUFBV0QsR0FBNEIsRUFBRzFMLEVBQU0sS0FBTSxHQUNuRCxXQUNMMkwsRUFBU21CLFlBQWNuQixFQUFTak0sT0FDbEMsSUEybkJFNEwsRUFBRyxDQUFDaEIsR0FBZUQsSUFBZ0J5TSxHQUNuQ3hMLEVBQUdmLEdBQWNnUSxFQUNuQixFQXVHRUEsT0FBUUEsRUFDUmEsU0FBVUEsRUFDVkMsVUFBV0EsRUFDWEssV0FBWUEsRUFDWkQsVUFBV0EsRUFDWEcsV0FmRixTQUFvQnBZLEdBQ2xCLE9BQU9tWSxXQUFXblgsRUFBTXdRLEVBQU9oYixFQUFRLFdBQWF3SixFQUFRLFFBQVUsWUFBYyxDQUN0RixFQWNFeVgsV0FBWUEsRUFFaEIsRUFtZ0RFWSxPQS8vQ0YsU0FBZ0IzUSxFQUFTc0gsRUFBYTFKLEdBQ3BDLElBTUlnVCxFQU5BL1MsRUFBUWtDLEdBQWVDLEdBQ3ZCSSxFQUFLdkMsRUFBTXVDLEdBQ1h5SixFQUFXdkMsRUFBWXVDLFNBQ3ZCMkIsRUFBU2xFLEVBQVlrRSxPQUNyQjFjLEVBQVV3WSxFQUFZOEIsVUFBVXRhLFFBQ2hDK2hCLEVBQVMsR0FHYixTQUFTdEksSUFDUG5JLEVBQUdqQixHQUFlMlIsR0FDbEIxUSxFQUFHLENBQUNoQixHQUFlQyxJQUFlMFIsSUFFOUJILEVBQWFJLE9BMkJuQixTQUFrQjdQLEdBQ2hCLElBQUlrSixFQUFTbUIsRUFBT3lDLE1BQU0zWixRQUN0QmxFLEVBQVNpYSxFQUFPamEsT0FFcEIsR0FBSUEsRUFBUSxDQUNWLEtBQU9pYSxFQUFPamEsT0FBUytRLEdBQ3JCelEsRUFBSzJaLEVBQVFBLEdBR2YzWixFQUFLMlosRUFBTy9WLE9BQU82TSxHQUFRa0osRUFBTy9WLE1BQU0sRUFBRzZNLElBQVE5SyxTQUFRLFNBQVVnYSxFQUFPL0csR0FDMUUsSUFBSTJILEVBQVMzSCxFQUFRbkksRUFDakJrRSxFQVFWLFNBQW1CMU8sRUFBSzJTLEdBQ3RCLElBQUlqRSxFQUFRMU8sRUFBSXVhLFdBQVUsR0FHMUIsT0FGQWxhLEVBQVNxTyxFQUFPekgsRUFBUWhILFFBQVF5TyxPQUNoQ0EsRUFBTXZFLEdBQUtkLEVBQVFrSyxLQUFLcEosR0FBSyxTQUFXN0QsR0FBSXFNLEVBQVEsR0FDN0NqRSxDQUNULENBYmtCOEwsQ0FBVWQsRUFBTWpMLE1BQU9rRSxHQUNuQzJILEVBQVMzWixFQUFPK04sRUFBT2dGLEVBQU8sR0FBR2pGLE9BQVNsTyxFQUFPMlMsRUFBU0UsS0FBTTFFLEdBQ2hFM1UsRUFBS21nQixFQUFReEwsR0FDYm1HLEVBQU81RCxTQUFTdkMsRUFBT2lFLEVBQVFuSSxHQUFTOFAsRUFBUyxFQUFJN2dCLEdBQVNpZ0IsRUFBTS9HLE1BQ3RFLEdBQ0YsQ0FDRixDQTNDSThILENBQVNSLEdBQ1R0SixFQUFZdUgsT0FBT1EsUUFBTyxHQUU5QixDQUVBLFNBQVN5QixJQUNQbFMsSUFDQTJKLEdBQ0YsQ0FFQSxTQUFTM0osSUFDUHpFLEVBQU8wVyxHQUNQemMsRUFBTXljLEdBQ05oVCxFQUFNZSxTQUNSLENBRUEsU0FBU21TLElBQ1AsSUFBSTVQLEVBQVE2UCxJQUVSSixJQUFlelAsSUFDYnlQLEVBQWF6UCxJQUFVQSxJQUN6QnRELEVBQU0wQyxLQUFLcEIsR0FHakIsQ0E0QkEsU0FBUzZSLElBQ1AsSUFBSUssRUFBVXpULEVBQVFpVCxPQUV0QixHQUFLN1EsRUFBUWlJLEdBQUdqQyxLQUVULEdBQUlsUSxFQUFZdWIsR0FBVSxDQUMvQixJQUFJQyxFQUFZMVQsRUFBUTlPLEVBQVEsZ0JBQWtCd1ksRUFBWXVILE9BQU9zQixVQUFVLEdBRS9Fa0IsRUFEaUJDLEdBQWF0VixHQUFLL0IsRUFBSzRQLEVBQVNDLE9BQU9oYixFQUFRLFVBQVl3aUIsSUFDcEQxVCxFQUFROU8sRUFBUSxlQUFpQmtSLEVBQVE1UCxRQTVFdEQsRUE0RWdFd04sRUFBUTRRLE9BQ3JGLE9BTEU2QyxFQUFVLEVBT1osT0FBT0EsQ0FDVCxDQUVBLE1BQU8sQ0FDTDlJLE1BQU9BLEVBQ1AzSixRQUFTQSxFQUViLEVBNDZDRTJTLEtBMTZDRixTQUFjdlIsRUFBU3NILEVBQWExSixHQUNsQyxJQWlCSTRULEVBakJBQyxFQUFtQjFSLEdBQWVDLEdBQ2xDSSxFQUFLcVIsRUFBaUJyUixHQUN0QkcsRUFBT2tSLEVBQWlCbFIsS0FFeEJtQixFQUFNMUIsRUFBUXVILE1BQU03RixJQUNwQmdRLEVBQXNCcEssRUFBWXVILE9BQ2xDc0IsRUFBWXVCLEVBQW9CdkIsVUFDaENPLEVBQWFnQixFQUFvQmhCLFdBQ2pDSCxFQUFZbUIsRUFBb0JuQixVQUNoQ0wsRUFBV3dCLEVBQW9CeEIsU0FDL0JNLEVBQWFrQixFQUFvQmxCLFdBQ2pDbUIsRUFBd0JySyxFQUFZOEIsVUFDcEN0YSxFQUFVNmlCLEVBQXNCN2lCLFFBQ2hDOGEsRUFBUytILEVBQXNCL0gsT0FDL0JnSSxFQUF5QnRLLEVBQVl1QyxTQUNyQ0UsRUFBTzZILEVBQXVCN0gsS0FDOUJELEVBQVE4SCxFQUF1QjlILE1BUW5DLFNBQVMrSCxJQUNGdkssRUFBWStHLFdBQVd5RCxXQUMxQnhLLEVBQVl5SyxPQUFPelEsU0FDbkIwUSxFQUFLaFMsRUFBUXNKLE9BQ2JoQyxFQUFZa0UsT0FBT3BLLFNBRXZCLENBaUJBLFNBQVM0USxFQUFLMUksR0FDWjJJLEVBQVVDLEVBQVc1SSxHQUFPLEdBQzlCLENBRUEsU0FBUzJJLEVBQVVFLEVBQVVDLEdBQzNCLElBQUtwUyxFQUFRaUksR0FBR2hDLElBQU8sQ0FDckIsSUFBSW9NLEVBQWNELEVBQWNELEVBTXBDLFNBQWNBLEdBQ1osR0FBSW5TLEVBQVFpSSxHQUFHakMsSUFBTyxDQUNwQixJQUFJc0QsRUFBUWdGLEVBQVE2RCxHQUNoQkcsRUFBY2hKLEVBQVFoQyxFQUFZK0csV0FBV2tFLFVBQy9CakosRUFBUSxHQUVQZ0osS0FDakJILEVBQVdLLEVBQU1MLEVBQVVHLEdBRS9CLENBRUEsT0FBT0gsQ0FDVCxDQWxCK0NNLENBQUtOLEdBQ2hEN1ksRUFBTXlRLEVBQU0sWUFBYSxZQUFjamIsRUFBUSxLQUFPLElBQU11akIsRUFBYyxPQUMxRUYsSUFBYUUsR0FBZTlSLEVBdi9CZCxLQXcvQmhCLENBQ0YsQ0FnQkEsU0FBU2lTLEVBQU1MLEVBQVVPLEdBQ3ZCLElBQUlDLEVBQVNSLEVBQVdTLEVBQVNGLEdBQzdCRyxFQUFPckMsSUFFWCxPQURBMkIsRUFBWXZJLEVBQU9pSixHQUFRN1csR0FBS0MsR0FBSTBXLEdBQVVFLElBQVMsS0FBT0gsRUFBWSxHQUFLLEVBRWpGLENBRUEsU0FBU3BSLElBQ1AyUSxFQUFVYSxLQUFlLEdBQ3pCdEIsRUFBV2xRLFFBQ2IsQ0FFQSxTQUFTZ04sRUFBUTZELEdBS2YsSUFKQSxJQUFJM0csRUFBU2xFLEVBQVlrRSxPQUFPeUMsTUFDNUIzRSxFQUFRLEVBQ1J5SixFQUFjQyxJQUVUN2lCLEVBQUksRUFBR0EsRUFBSXFiLEVBQU9wYixPQUFRRCxJQUFLLENBQ3RDLElBQUk0YixFQUFhUCxFQUFPcmIsR0FBR21aLE1BQ3ZCdUUsRUFBVzVSLEdBQUlpVyxFQUFXbkcsR0FBWSxHQUFRb0csR0FFbEQsS0FBSXRFLEdBQVlrRixHQUlkLE1BSEFBLEVBQWNsRixFQUNkdkUsRUFBUXlDLENBSVosQ0FFQSxPQUFPekMsQ0FDVCxDQUVBLFNBQVM0SSxFQUFXNUksRUFBTzJKLEdBQ3pCLElBQUlkLEVBQVd2SSxFQUFPMkcsRUFBVWpILEVBQVEsR0FpQjFDLFNBQWdCQSxHQUNkLElBQUkzUCxFQUFRaUUsRUFBUWpFLE1BQ3BCLE1BQWlCLFdBQVZBLEdBQXNCdVcsSUFBYUMsRUFBVTdHLEdBQU8sSUFBUyxHQUFLM1AsRUFBUXdXLEVBQVU3RyxJQUFVLENBQ3ZHLENBcEIrQ0UsQ0FBT0YsSUFDcEQsT0FBTzJKLEVBUVQsU0FBY2QsR0FLWixPQUpJdlUsRUFBUXNWLFdBQWFsVCxFQUFRaUksR0FBR2xDLE1BQ2xDb00sRUFBV3hWLEdBQU13VixFQUFVLEVBQUd2SSxFQUFPNEcsR0FBVyxHQUFRTixPQUduRGlDLENBQ1QsQ0Fkb0JnQixDQUFLaEIsR0FBWUEsQ0FDckMsQ0FFQSxTQUFTVyxJQUNQLElBQUkxUSxFQUFPdFQsRUFBUSxRQUNuQixPQUFPbUwsRUFBSzhQLEdBQU0zSCxHQUFRbkksRUFBSzZQLEdBQU8xSCxHQUFRd0gsRUFBTzhHLEdBQVcsR0FDbEUsQ0FlQSxTQUFTa0MsRUFBUzlXLEdBQ2hCLE9BQU9vVyxFQUFXcFcsRUFBTXdMLEVBQVkrRyxXQUFXa0UsU0FBVyxJQUFLM1UsRUFBUXNWLFVBQ3pFLENBY0EsTUFBTyxDQUNMM0ssTUE5SEYsV0FDRWlKLEVBQWFsSyxFQUFZa0ssV0FDekJwUixFQUFHLENBQUN0QixHQUFlUSxHQUFlRixHQUFlRCxJQUFnQjBTLEVBQ25FLEVBNEhFdUIsS0FsSEYsU0FBY0MsRUFBTS9KLEVBQU85RCxFQUFNN0gsR0FvR2pDLElBQWtCK1UsRUFDWlksRUFwR0FELElBQVMvSixJQW1HR29KLEVBbkdlVyxFQUFPN04sRUFvR2xDOE4sRUFBVTFKLEVBQU80SSxFQUFNTSxJQUFlSixJQUNuQ0EsRUFBWVksR0FBVyxFQUFJQSxHQUFXdkosRUFBS2piLEVBQVEsZ0JBQWtCbUwsRUFBSzZQLEdBQU9oYixFQUFRLGFBcEc5RndTLElBQ0EyUSxFQUFVTyxFQUFNTSxJQUFlTyxFQUFPN04sSUFBTyxJQUcvQzlELEVBMTRDUyxHQTI0Q1RuQixFQUFLdkIsR0FBWXNLLEVBQU85RCxFQUFNNk4sR0FDOUI3QixFQUFXaGQsTUFBTThVLEdBQU8sV0FDdEI1SCxFQTk0Q0ssR0ErNENMbkIsRUFBS3RCLEdBQWFxSyxFQUFPOUQsRUFBTTZOLEdBQy9CMVYsR0FBWUEsR0FDZCxHQUNGLEVBc0dFcVUsS0FBTUEsRUFDTkMsVUFBV0EsRUFDWE8sTUFBT0EsRUFDUGxSLE9BQVFBLEVBQ1JnTixRQUFTQSxFQUNUNEQsV0FBWUEsRUFDWlksWUFBYUEsRUFDYkYsU0FBVUEsRUFDVlcsY0FsQkYsU0FBdUJ6WCxFQUFLcVcsR0FDMUJBLEVBQVdyYyxFQUFZcWMsR0FBWVcsSUFBZ0JYLEVBQ25ELElBQUlxQixHQUFzQixJQUFSMVgsR0FBZ0I4TixFQUFPdUksR0FBWXZJLEVBQU9nSixHQUFTLElBQ2pFTixHQUFzQixJQUFSeFcsR0FBaUI4TixFQUFPdUksR0FBWXZJLEVBQU9nSixHQUFTLElBQ3RFLE9BQU9ZLEdBQWVsQixDQUN4QixFQWNFVCxXQUFZQSxFQUVoQixFQTR3Q0V4RCxXQTF3Q0YsU0FBb0JyTyxFQUFTc0gsRUFBYTFKLEdBQ3hDLElBaUJJNlYsRUFFQUMsRUFDQUMsRUFDQW5GLEVBckJBb0YsRUFBbUI3VCxHQUFlQyxHQUNsQ0ksRUFBS3dULEVBQWlCeFQsR0FDdEJHLEVBQU9xVCxFQUFpQnJULEtBRXhCZ1IsRUFBT2pLLEVBQVlpSyxLQUNuQnVCLEVBQWN2QixFQUFLdUIsWUFDbkJGLEVBQVdyQixFQUFLcUIsU0FDaEJWLEVBQWFYLEVBQUtXLFdBQ2xCMkIsRUFBc0J2TSxFQUFZa0UsT0FDbENvRCxFQUFXaUYsRUFBb0JqRixTQUMvQkQsRUFBWWtGLEVBQW9CbEYsVUFDaENtRixFQUFVbFcsRUFBUWtXLFFBQ2xCQyxFQUFTL1QsRUFBUWlJLEdBQUdqQyxJQUNwQmdPLEVBQVVoVSxFQUFRaUksR0FBR2xDLElBQ3JCa08sRUFBVXBmLEVBQU1xZixHQUFhLEdBQzdCQyxFQUFVdGYsRUFBTXFmLEdBQWEsR0FDN0JFLEVBQVl4VyxFQUFRcEosT0FBUyxFQUU3QjZmLEVBQVlELEVBV2hCLFNBQVN4SSxJQUNQOEgsRUFBYS9FLEdBQVUsR0FDdkJnRixFQUFVL1YsRUFBUStWLFFBQ2xCbkYsRUFBVTVRLEVBQVE0USxRQUNsQmlGLEVBQVdsQixJQUNYLElBQUlqSixFQUFRM00sR0FBTXlYLEVBQVcsRUFBR04sRUFBVUwsRUFBV0MsRUFBYSxHQUU5RHBLLElBQVU4SyxJQUNaQSxFQUFZOUssRUFDWmlJLEVBQUtNLGFBRVQsQ0FFQSxTQUFTeUMsSUFDSGIsSUFBYWxCLEtBQ2ZoUyxFQUFLVCxHQUVULENBNENBLFNBQVNvVSxFQUFZMU8sRUFBTTZNLEdBQ3pCLElBQUk5VixFQUFTb1gsSUFBWXBGLElBQWEsRUFBSUMsR0FDdEM2RSxFQUFPa0IsRUFBaUJILEVBQVk3WCxHQUFVaUosR0FBUSxFQUFJLEdBQUk0TyxJQUFhVCxHQUFXcEYsTUFFMUYsT0FBYyxJQUFWOEUsR0FBZVcsSUFDWjlYLEdBQW1CNFcsSUFBZUYsR0FBVXBOLEdBQU8sR0FDL0NBLEVBQU8sRUFBSWlPLEVBSWZwQixFQUFjZ0IsRUFBT1osRUFBS1ksRUFDbkMsQ0FFQSxTQUFTa0IsRUFBaUJsQixFQUFNbkksRUFBTXNKLEdBQ3BDLEdBQUk1RixLQUFjTCxJQUFZLENBQzVCLElBQUlqRixFQWdDUixTQUFpQytKLEdBQy9CLEdBQUlXLEdBQWlDLFNBQXRCcFcsRUFBUXNWLFdBQXdCRyxJQUFTZSxFQUd0RCxJQUZBLElBQUlqQyxFQUFXVyxJQUVSWCxJQUFhRCxFQUFXbUIsR0FBTSxJQUFTL1csR0FBUStXLEVBQU0sRUFBR3JULEVBQVE1UCxPQUFTLEdBQUl3TixFQUFRNkQsU0FDMUY0UixFQUFPZSxJQUFjZixJQUFTQSxFQUlsQyxPQUFPQSxDQUNULENBMUNnQm9CLENBQXdCcEIsR0FFaEMvSixJQUFVK0osSUFDWm5JLEVBQU9tSSxFQUNQQSxFQUFPL0osRUFDUGtMLEdBQVcsR0FHVG5CLEVBQU8sR0FBS0EsRUFBT0ksRUFLakJKLEVBSkNNLElBQVlyWCxHQUFRLEVBQUcrVyxFQUFNbkksR0FBTSxLQUFTNU8sR0FBUW1YLEVBQVV2SSxFQUFNbUksR0FBTSxHQUd6RVUsRUFDS1MsRUFBV25CLEVBQU8sSUFBTUssRUFBYWxGLEdBQVdBLEdBQVdrRixFQUFhTCxFQUN0RXpWLEVBQVE2RCxPQUNWNFIsRUFBTyxFQUFJSSxFQUFXLEdBRXJCLEVBUEhuRixFQUFRb0csRUFBT3JCLElBV3BCbUIsR0FBWW5CLElBQVNuSSxJQUN2Qm1JLEVBQU8vRSxFQUFRb0csRUFBT3hKLElBQVNtSSxFQUFPbkksR0FBUSxFQUFJLElBR3hELE1BQ0VtSSxHQUFRLEVBR1YsT0FBT0EsQ0FDVCxDQWNBLFNBQVNaLEVBQUtuSixHQUNaLE9BQU95SyxHQUFVekssRUFBUW9LLEdBQWNBLEdBQWMsRUFBSXBLLENBQzNELENBRUEsU0FBU2lKLElBR1AsSUFGQSxJQUFJOWQsRUFBTWlmLEdBQWNuRixLQUFjd0YsR0FBVUosRUFBVSxFQUFJbkYsR0FFdkRzRixHQUFXcmYsS0FBUSxHQUN4QixHQUFJeWQsRUFBV3dCLEVBQWEsR0FBRyxLQUFVeEIsRUFBV3pkLEdBQUssR0FBTyxDQUM5REEsSUFDQSxLQUNGLENBR0YsT0FBT2tJLEdBQU1sSSxFQUFLLEVBQUdpZixFQUFhLEVBQ3BDLENBRUEsU0FBU3BGLEVBQVFoZSxHQUNmLE9BQU9xTSxHQUFNNFIsSUFBYWplLEVBQU9rZSxFQUFVbGUsRUFBTSxFQUFHbWpCLEVBQ3RELENBRUEsU0FBU2lCLEVBQU9wTCxHQUNkLE9BQU9pRixJQUFhM1MsR0FBSTBOLEVBQU9tSyxHQUFZMVgsSUFBT3VOLEdBQVNtSyxFQUFXQyxFQUFhLEVBQUlwSyxHQUFTa0YsRUFDbEcsQ0FPQSxTQUFTbUcsRUFBU3JMLEdBQ1pBLElBQVU4SyxJQUNaQyxFQUFZRCxFQUNaQSxFQUFZOUssRUFFaEIsQ0FNQSxTQUFTaUYsSUFDUCxPQUFRelksRUFBWThILEVBQVFqRSxRQUFVaUUsRUFBUTJOLFlBQ2hELENBRUEsU0FBU3VHLElBQ1AsT0FBTzlSLEVBQVF1SCxNQUFNVSxHQUFHLENBeHNEZixFQUNHLE9BdXNEc0NySyxFQUFRZ1gsaUJBQzVELENBRUEsTUFBTyxDQUNMck0sTUFoTEYsV0FDRXFELElBQ0F4TCxFQUFHLENBQUNoQixHQUFlRCxHQUFlVyxJQUEwQjhMLEdBQzVEeEwsRUFBR2QsR0FBZWdWLEVBQ3BCLEVBNktFTyxHQXhKRixTQUFZQyxFQUFTQyxFQUFnQnBYLEdBQ25DLElBQUttVSxJQUFVLENBQ2IsSUFBSXVCLEVBa0JSLFNBQWV5QixHQUNiLElBQUl4TCxFQUFROEssRUFFWixHQUFJdmUsRUFBU2lmLEdBQVUsQ0FDckIsSUFBSUUsRUFBT0YsRUFBUXZMLE1BQU0sb0JBQXNCLEdBQzNDMEwsRUFBWUQsRUFBSyxHQUNqQnpZLEVBQVN5WSxFQUFLLEdBRUEsTUFBZEMsR0FBbUMsTUFBZEEsRUFDdkIzTCxFQUFRaUwsRUFBaUJILEtBQWMsR0FBS2EsSUFBYzFZLEdBQVUsSUFBSzZYLEdBQ2xELE1BQWRhLEVBQ1QzTCxFQUFRL00sRUFBUytSLEdBQVMvUixHQUFVMFgsR0FBUSxHQUNyQixNQUFkZ0IsSUFDVDNMLEVBQVE2SyxHQUFRLEdBRXBCLE1BQ0U3SyxFQUFReUssRUFBU2UsRUFBVW5ZLEdBQU1tWSxFQUFTLEVBQUdyQixHQUcvQyxPQUFPbkssQ0FDVCxDQXRDZTRMLENBQU1KLEdBQ2J4TCxFQUFRbUosRUFBS1ksR0FFYi9KLEdBQVMsSUFBTXlMLEdBQWtCekwsSUFBVThLLEtBQzdDTyxFQUFTckwsR0FDVGlJLEVBQUs2QixLQUFLQyxFQUFNL0osRUFBTytLLEVBQVcxVyxHQUV0QyxDQUNGLEVBK0lFd1gsT0E3SUYsU0FBZ0I5QyxFQUFhK0MsRUFBVUMsRUFBTTFYLEdBQzNDMkosRUFBWXlLLE9BQU9vRCxPQUFPOUMsRUFBYStDLEVBQVVDLEdBQU0sV0FDckQsSUFBSS9MLEVBQVFtSixFQUFLbEIsRUFBS2pELFFBQVF3RSxNQUM5QjZCLEVBQVNiLEVBQVVsWSxHQUFJME4sRUFBT21LLEdBQVluSyxHQUMxQzNMLEdBQVlBLEdBQ2QsR0FDRixFQXdJRXNXLFFBQVNBLEVBQ1RFLFFBQVNBLEVBQ1RELFlBQWFBLEVBQ2IzQixPQUFRQSxFQUNSb0MsU0FBVUEsRUFDVlcsU0FyQkYsU0FBa0I5UCxHQUNoQixPQUFPQSxFQUFPNk8sRUFBWUQsQ0FDNUIsRUFvQkU5RixRQUFTQSxFQUNUb0csT0FBUUEsRUFDUmEsT0FwQ0YsU0FBZ0JsRCxHQUNkLElBQUlsSCxFQUFVb0csRUFBS2pELFFBQVErRCxHQUMzQixPQUFPMkIsRUFBVXJYLEdBQU13TyxFQUFTLEVBQUdzSSxHQUFZdEksQ0FDakQsRUFrQ0VvRCxTQUFVQSxFQUNWdUQsT0FBUUEsRUFFWixFQW9qQ0UwRCxPQTlpQ0YsU0FBZ0J4VixFQUFTc0gsRUFBYTFKLEdBQ3BDLElBYUk2WCxFQUNBQyxFQWRBN1gsRUFBUWtDLEdBQWVDLEdBQ3ZCSSxFQUFLdkMsRUFBTXVDLEdBQ1hyTCxFQUFPOEksRUFBTTlJLEtBQ2J3TCxFQUFPMUMsRUFBTTBDLEtBQ2IzSixFQUFVZ0gsRUFBUWhILFFBQ2xCdVQsRUFBT3ZNLEVBQVF1TSxLQUNmTixFQUFXdkMsRUFBWXVDLFNBQ3ZCd0UsRUFBYS9HLEVBQVkrRyxXQUN6QnNILEVBQWM5TCxFQUFTdkUsT0FDdkJ3RSxFQUFRRCxFQUFTQyxNQUNqQjhMLEVBQVVELEVBQ1ZuUSxFQUFPcUUsRUFBU3JFLEtBQ2hCQyxFQUFPb0UsRUFBU3BFLEtBR2hCSCxFQUFTLENBQUMsRUFFZCxTQUFTaUQsSUFVVCxJQUNNc04sTUFBVWpZLEVBQVEwSCxTQUVMRSxHQUFRQyxJQTRDekJtUSxFQUFVRCxHQUFlemMsRUFBTyxNQUFPdEMsRUFBUTBPLFFBQy9DRSxFQUFPc1EsR0FBWSxHQUNuQnJRLEVBQU9xUSxHQUFZLEdBQ25CTCxHQUFVLEVBQ1Z2ZSxFQUFPMGUsRUFBUyxDQUFDcFEsRUFBTUMsS0FDdEJrUSxHQUFlcmUsRUFBT3NlLEVBQVM5TCxJQTdDNUJ0RSxHQUFRQyxJQUNWLEVBQU9ILEVBQVEsQ0FDYkUsS0FBTUEsRUFDTkMsS0FBTUEsSUFFUmhNLEVBQVFtYyxFQUFTQyxFQUFVLEdBQUssUUFDaEM3ZSxFQUFTNGUsRUFBU0YsRUFBaUIxUixHQUFlLEtBQU9wRyxFQUFRc0ssV0FFN0QyTixJQXNCTnpWLEVBQUcsQ0FBQ3RCLEdBQWVHLEdBQWFFLEdBQWVLLEdBQWdCTSxJQUEwQnNCLEdBQ3pGck0sRUFBSzBRLEVBQU0sUUFBUzVRLEVBQU1nZ0IsRUFBSSxNQUM5QjlmLEVBQUt5USxFQUFNLFFBQVMzUSxFQUFNZ2dCLEVBQUksTUF0QjFCelQsSUFDQXJJLEVBQWEsQ0FBQ3lNLEVBQU1DLEdBQU83QyxHQUFla0gsRUFBTWhKLElBQ2hEUCxFQXQzQ21CLGlCQXMzQ1FpRixFQUFNQyxLQTNCckNyRixFQUFHaEIsR0FBZTBSLEVBQ3BCLENBRUEsU0FBU0EsSUFDUGxTLElBQ0EySixHQUNGLENBMEJBLFNBQVMzSixJQUNQZixFQUFNZSxVQUNOMUQsRUFBWTBhLEVBQVNGLEdBRWpCRCxHQUNGdGIsRUFBT3diLEVBQWMsQ0FBQ25RLEVBQU1DLEdBQVFtUSxHQUNwQ3BRLEVBQU9DLEVBQU8sTUFFZDlNLEVBQWdCLENBQUM2TSxFQUFNQyxHQUFPbEMsR0FFbEMsQ0FRQSxTQUFTc1IsRUFBR0MsR0FDVnpHLEVBQVd3RyxHQUFHQyxHQUFTLEVBQ3pCLENBV0EsU0FBU2dCLEVBQVlDLEdBRW5CLE9BQU8xYixFQURLLGtCQUFxQnpELEVBQVEyTyxNQUFRLEtBQU93USxFQUFRbmYsRUFBUTRPLEtBQU81TyxFQUFRNk8sTUFBM0Usa0lBQXlRN0gsRUFBUW9ZLFdBdkZ0Uix5RkF1RjJTLE9BRXBULENBRUEsU0FBUzVVLElBQ1AsR0FBSW9FLEdBQVFDLEVBQU0sQ0FDaEIsSUFBSTZELEVBQVF0SixFQUFRc0osTUFDaEIrSyxFQUFZaEcsRUFBVzhGLFVBQ3ZCOEIsRUFBWTVILEVBQVc0RixVQUN2QmlDLEVBQVk3QixHQUFhLEdBQUsvSyxFQUFRK0ssRUFBWWxLLEVBQUtnTSxLQUFPaE0sRUFBSzNFLEtBQ25FNFEsRUFBWUgsR0FBYSxHQUFLM00sRUFBUTJNLEVBQVk5TCxFQUFLa00sTUFBUWxNLEVBQUsxRSxLQUN4RUQsRUFBSzhRLFNBQVdqQyxFQUFZLEVBQzVCNU8sRUFBSzZRLFNBQVdMLEVBQVksRUFDNUJsZCxFQUFheU0sRUFBTXpDLEdBQVltVCxHQUMvQm5kLEVBQWEwTSxFQUFNMUMsR0FBWXFULEdBQy9CN1YsRUF6NkNxQixpQkF5NkNNaUYsRUFBTUMsRUFBTTRPLEVBQVc0QixFQUNwRCxDQUNGLENBRUEsTUFBTyxDQUNMM1EsT0FBUUEsRUFDUmlELE1BQU9BLEVBQ1AzSixRQUFTQSxFQUNUd0MsT0FBUUEsRUFFWixFQWs4QkVtVixTQTk3QkYsU0FBa0J2VyxFQUFTc0gsRUFBYTFKLEdBQ3RDLElBWUk0WSxFQUNBQyxFQWJBQyxFQUFtQjNXLEdBQWVDLEdBQ2xDSSxFQUFLc1csRUFBaUJ0VyxHQUN0QnJMLEVBQU8yaEIsRUFBaUIzaEIsS0FDeEJ3TCxFQUFPbVcsRUFBaUJuVyxLQUV4QkUsRUFBV0QsR0FBZ0I1QyxFQUFRNkMsU0FBVVQsRUFBUTZVLEdBQUc5ZixLQUFLaUwsRUFBUyxNQWlGMUUsU0FBMEJpQixHQUN4QixJQUFJMEosRUFBTWQsRUFBU2MsSUFDbkJBLEdBQU9yUixFQUFNcVIsRUFBSyxRQUFnQixJQUFQMUosRUFBYSxLQUN4Q1YsRUE1Z0R5QixtQkE0Z0RJVSxFQUMvQixJQXBGSVcsRUFBV25CLEVBQVNtQixTQUNwQmlJLEVBQVd2QyxFQUFZdUMsU0FDdkI4TSxFQUF5QnJQLEVBQVl1QyxTQUNyQ0ssRUFBT3lNLEVBQXVCek0sS0FDOUJVLEVBQVMrTCxFQUF1Qi9MLE9BQ2hDZ00sRUFBV2haLEVBQVFnWixTQUduQkMsRUFBdUIsVUFBYkQsRUFvQ2QsU0FBU0UsSUFDSGxWLEtBQWMwRixFQUFZa0UsT0FBT29ELGFBQ25Dbk8sRUFBU2pNLE9BQU9vSixFQUFRbVosZUFDeEJOLEVBQVVELEVBQVVLLEdBQVUsRUFDOUJ6VixJQUNBYixFQUFLWixJQUVULENBRUEsU0FBUzBCLEVBQU0yVixRQUNBLElBQVRBLElBQ0ZBLEdBQU8sR0FHVEgsSUFBWUcsRUFDWjVWLElBRUtRLE1BQ0huQixFQUFTWSxRQUNUZCxFQUFLWCxJQUVULENBRUEsU0FBU3FYLElBQ0ZKLElBQ0hMLEdBQVdDLEVBQVVwVixHQUFNLEdBQVN5VixJQUV4QyxDQUVBLFNBQVMxVixJQUNId0osSUFDRmxVLEVBQVlrVSxFQUFRakcsSUFBZWtTLEdBQ25DOWQsRUFBYTZSLEVBQVE3SCxHQUFZbkYsRUFBUXVNLEtBQUswTSxFQUFVLE9BQVMsVUFFckUsQ0FRQSxTQUFTakssRUFBT3RELEdBQ2QsSUFBSStHLEVBQVEvSSxFQUFZa0UsT0FBT2tCLE1BQU1wRCxHQUNyQzdJLEVBQVNpQixJQUFJMk8sSUFBVXhXLEVBQWF3VyxFQUFNakwsTUFBT2MsS0FBNEJ0SSxFQUFRNkMsU0FDdkYsQ0FFQSxNQUFPLENBQ0w4SCxNQWxGRixXQUNNcU8sSUFTQWhaLEVBQVFzWixjQUNWbmlCLEVBQUttVixFQUFNLHlCQUF5QixTQUFVNWIsR0FDNUNrb0IsRUFBcUIsZUFBWGxvQixFQUFFbUQsS0FDWndsQixHQUNGLElBR0VyWixFQUFRdVosY0FDVnBpQixFQUFLbVYsRUFBTSxvQkFBb0IsU0FBVTViLEdBQ3ZDbW9CLEVBQXFCLFlBQVhub0IsRUFBRW1ELEtBQ1p3bEIsR0FDRixJQUdFck0sR0FDRjdWLEVBQUs2VixFQUFRLFNBQVMsV0FDcEJpTSxFQUFVQyxJQUFTelYsR0FBTSxFQUMzQixJQUdGakIsRUFBRyxDQUFDcEIsR0FBWU8sR0FBY0osSUFBZ0JzQixFQUFTZ0IsUUFDdkRyQixFQUFHcEIsR0FBWTROLEdBNUJiaEMsR0FBVTdSLEVBQWE2UixFQUFRaEksR0FBZWlILEVBQVNDLE1BQU1oSixJQUM3RCtWLEdBQVdDLElBQ1gxVixJQUVKLEVBNEVFeEMsUUFBUzZCLEVBQVNhLE9BQ2xCd1YsS0FBTUEsRUFDTnpWLE1BQU9BLEVBQ1BPLFNBQVVBLEVBRWQsRUFzMUJFd1YsTUFwMUJGLFNBQWVwWCxFQUFTc0gsRUFBYTFKLEdBQ25DLElBQ0l3QyxFQURtQkwsR0FBZUMsR0FDWkksR0FTMUIsU0FBU2lYLEVBQU1DLEdBQ2JoUSxFQUFZa0UsT0FBT25WLFNBQVEsU0FBVWdhLEdBQ25DLElBQUkzQixFQUFNMVcsRUFBTXFZLEVBQU1qRSxXQUFhaUUsRUFBTWpMLE1BQU8sT0FFNUNzSixHQUFPQSxFQUFJNkksS0FDYjNNLEVBQU8wTSxFQUFRNUksRUFBSzJCLEVBRXhCLEdBQ0YsQ0FFQSxTQUFTekYsRUFBTzBNLEVBQVE1SSxFQUFLMkIsR0FDM0JBLEVBQU0vVyxNQUFNLGFBQWNnZSxFQUFTLCtCQUFrQzVJLEVBQUk2SSxJQUFNLEtBQVEsSUFBSSxHQUMzRjlkLEVBQVFpVixFQUFLNEksRUFBUyxPQUFTLEdBQ2pDLENBRUEsTUFBTyxDQUNML08sTUF2QkYsV0FDTTNLLEVBQVF5WixRQUNWalgsRUFBR1AsR0FBdUJoTCxFQUFNK1YsR0FBUSxJQUN4Q3hLLEVBQUcsQ0FBQ3RCLEdBQWVNLEdBQWVELElBQWdCdEssRUFBTXdpQixHQUFPLElBRW5FLEVBbUJFelksUUFBUy9KLEVBQU13aUIsR0FBTyxHQUUxQixFQXV6QkV0RixPQS95QkYsU0FBZ0IvUixFQUFTc0gsRUFBYTFKLEdBQ3BDLElBV0k2QyxFQUNBOUMsRUFaQTZaLEVBQW1CelgsR0FBZUMsR0FDbENJLEVBQUtvWCxFQUFpQnBYLEdBQ3RCRyxFQUFPaVgsRUFBaUJqWCxLQUV4Qm1CLEVBQU0xQixFQUFRdUgsTUFBTTdGLElBQ3BCNlAsRUFBT2pLLEVBQVlpSyxLQUNuQnVCLEVBQWN2QixFQUFLdUIsWUFDbkJGLEVBQVdyQixFQUFLcUIsU0FDaEJXLEVBQWdCaEMsRUFBS2dDLGNBQ3JCdEIsRUFBWVYsRUFBS1UsVUFDakIrQixFQUFVaFUsRUFBUWlJLEdBQUdsQyxJQUdyQjBSLEVBQVcsRUFPZixTQUFTdEMsRUFBTzlDLEVBQWErQyxFQUFVQyxFQUFNcUMsRUFBWUMsR0FDdkQsSUFBSXpNLEVBQU80SCxJQUdYLEdBRkE4RSxJQUVJdkMsS0FBVXJCLElBQVlULEtBQWtCLENBQzFDLElBQUlWLEVBQU92TCxFQUFZdUgsT0FBTzJCLGFBQzFCaEgsRUFBUzVNLEdBQUt5VixHQUFlUSxFQUFPOVcsR0FBTUUsR0FBSW9XLEdBQWVRLElBQVMsRUFDMUVSLEVBQWNkLEVBQUtXLFdBQVc1SyxFQUFZK0csV0FBV2tILE9BQU9sRCxFQUFjUSxJQUFTckosQ0FDckYsQ0FFQSxJQUFJcU8sRUFBYTNiLEdBQW1CZ1AsRUFBTW1ILEVBQWEsR0FDdkRvRixFQUFXLEVBQ1hyQyxFQUFXeUMsRUFBYSxFQUFJekMsR0FBWXRaLEdBQUlHLEdBQUlvVyxFQUFjbkgsR0FwQzlDLElBQ0QsS0FvQ2Z2TixFQUFXK1osRUFDWGpYLEVBQVdELEdBQWdCNFUsRUFBVTBDLEVBQU9qakIsRUFBTXVNLEVBQVE4SixFQUFNbUgsRUFBYXNGLEdBQWMsR0FDM0ZqVyxFQXRnRVksR0F1Z0VabkIsRUFBS2hCLElBQ0xrQixFQUFTak0sT0FDWCxDQUVBLFNBQVNzakIsSUFDUHBXLEVBOWdFTyxHQStnRVAvRCxHQUFZQSxJQUNaNEMsRUFBS2YsR0FDUCxDQUVBLFNBQVM0QixFQUFPOEosRUFBTTZNLEVBQUlKLEVBQWExVyxHQUNyQyxJQUFJa1IsRUFBV1csSUFDWHBmLEVBQVN3WCxHQUFRNk0sRUFBSzdNLEdBMEI1QixTQUFnQjhNLEdBQ2QsSUFBSUMsRUFBYXJhLEVBQVFxYSxXQUN6QixPQUFPQSxFQUFhQSxFQUFXRCxHQUFLLEVBQUluYyxLQUFLcWMsSUFBSSxFQUFJRixFQUFHLEVBQzFELENBN0JvQ0csQ0FBT2xYLEdBQ3JDNk0sR0FBUXBhLEVBQVN5ZSxHQUFZc0YsRUFDakN4RixFQUFVRSxFQUFXckUsR0FFakJrRyxJQUFZMkQsR0FBZXBFLE1BQzdCa0UsR0ExRGdCLEdBNERaeGIsR0FBSTZSLEdBOURjLElBK0RwQnFILEVBQU92QyxFQUFTVyxHQUFjLElBOURoQixLQThEeUMsRUFBTzVWLEdBQVUsR0FHOUUsQ0FFQSxTQUFTaWEsSUFDSG5YLEdBQ0ZBLEVBQVNhLFFBRWIsQ0FFQSxTQUFTQSxJQUNIYixJQUFhQSxFQUFTbUIsYUFDeEJnVyxJQUNBRSxJQUVKLENBT0EsTUFBTyxDQUNMdlAsTUFqRUYsV0FDRW5JLEVBQUdwQixHQUFZNFksR0FDZnhYLEVBQUcsQ0FBQ2hCLEdBQWVELElBQWdCbUMsRUFDckMsRUErREUxQyxRQUFTZ1osRUFDVHpDLE9BQVFBLEVBQ1I3VCxPQUFRQSxFQUVaLEVBMHRCRThXLEtBbnRCRixTQUFjcFksRUFBU3NILEVBQWExSixHQUNsQyxJQWlCSXlhLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBRUFDLEVBQ0FwQyxFQUNBNWlCLEVBekJBaWxCLEVBQW1CNVksR0FBZUMsR0FDbENJLEVBQUt1WSxFQUFpQnZZLEdBQ3RCRyxFQUFPb1ksRUFBaUJwWSxLQUN4QnhMLEVBQU80akIsRUFBaUI1akIsS0FDeEJvSixFQUFTd2EsRUFBaUJ4YSxPQUUxQm9KLEVBQVF2SCxFQUFRdUgsTUFDaEJnSyxFQUFPakssRUFBWWlLLEtBQ25CUSxFQUFTekssRUFBWXlLLE9BQ3JCMUQsRUFBYS9HLEVBQVkrRyxXQUN6QnZFLEVBQVF4QyxFQUFZdUMsU0FBU0MsTUFDN0IxQixFQUFTZCxFQUFZRCxNQUFNZSxPQUMzQndRLEVBQXlCdFIsRUFBWThCLFVBQ3JDdGEsRUFBVThwQixFQUF1QjlwQixRQUNqQzhhLEVBQVNnUCxFQUF1QmhQLE9BQ2hDa0osRUFBY3ZCLEVBQUt1QixZQUNuQlMsRUFBZ0JoQyxFQUFLZ0MsY0FNckJzRixHQUFXLEVBZ0JmLFNBQVNqTixJQUNQLElBQUlOLEVBQU8xTixFQUFRME4sS0FDbkJ3TixHQUFTeE4sR0FDVGtOLEVBQWtCLFNBQVRsTixDQUNYLENBRUEsU0FBU3lOLEVBQWN6cUIsR0FHckIsR0FGQW9xQixHQUFpQixHQUVacEMsRUFBVSxDQUNiLElBQUkwQyxFQUFVQyxFQUFhM3FCLEdBNElWNHFCLEVBMUlENXFCLEVBQUVvRixPQTJJaEJ5bEIsRUFBU3ZiLEVBQVF1YixPQUNidmhCLEVBQVFzaEIsRUFBUyxJQUFNN1UsR0FBd0IsTUFBUUosS0FBa0JrVixHQUFXdmhCLEVBQVFzaEIsRUFBU0MsS0E1STdFSCxHQUFZMXFCLEVBQUU4cUIsU0FDckMvSyxFQUFXeUQsU0FVZHBYLEVBQVFwTSxHQUFHLElBVFhvRixFQUFTc2xCLEVBQVVsUCxFQUFRdmIsT0FDM0JrcUIsRUFBV2xSLEVBQU1VLEdBQUcsQ0F0bkVqQixFQUNHLElBc25FTnNRLEVBQWdCLEtBQ2hCeGpCLEVBQUtyQixFQUFRbVMsR0FBcUJ3VCxFQUFlbFQsSUFDakRwUixFQUFLckIsRUFBUW9TLEdBQW1Cd1QsRUFBYW5ULElBQzdDb0wsRUFBS2pRLFNBQ0x5USxFQUFPelEsU0FDUGlZLEVBQUtqckIsSUFLWCxDQTRIRixJQUFxQjRxQixFQUNmQyxDQTVITixDQUVBLFNBQVNFLEVBQWMvcUIsR0FNckIsR0FMS2laLEVBQU1VLEdBbm9FQSxLQW9vRVRWLEVBQU03RixJQXBvRUcsR0Fxb0VUbkIsRUFwdkRXLFNBdXZEVGpTLEVBQUVrckIsV0FDSixHQUFJZixFQUFVLENBQ1psSCxFQUFLVSxVQUFVb0csRUFBeUJvQixFQUFVbnJCLElBOEd2Q3VxQixHQUFZN1ksRUFBUWlJLEdBQUdsQyxJQS9oRDNCLEVBK2hEK0MsSUE3R3RELElBQUkyVCxFQUFVQyxFQUFTcnJCLEdBajdDWixJQWs3Q1BzckIsRUFBY2YsS0FBY0EsRUFBV3RGLE1BRXZDbUcsR0FBV0UsSUFDYkwsRUFBS2pyQixHQUdQb3FCLEdBQWlCLEVBQ2pCblksRUFqd0RhLFlBa3dEYjdGLEVBQVFwTSxFQUNWLE1BOERKLFNBQTJCQSxHQUN6QixPQUFPMk4sR0FBSXdkLEVBQVVuckIsSUFBTTJOLEdBQUl3ZCxFQUFVbnJCLEdBQUcsR0FDOUMsRUFoRWV1ckIsQ0FBa0J2ckIsS0FDM0JtcUIsRUFxRE4sU0FBcUJucUIsR0FDbkIsSUFBSXdyQixFQUFhbGMsRUFBUW1jLGlCQUNyQkMsRUFBUXZrQixFQUFTcWtCLEdBQ2pCRyxFQUFRRCxHQUFTRixFQUFXRyxPQUFTLEVBQ3JDQyxHQUFTRixFQUFRRixFQUFXSSxPQUFTSixJQUFlLEdBQ3hELE9BQU83ZCxHQUFJd2QsRUFBVW5yQixLQUFPMnFCLEVBQWEzcUIsR0FBSzRyQixFQUFRRCxFQUN4RCxDQTNEaUJFLENBQVk3ckIsR0FDdkJvTSxFQUFRcE0sR0FHZCxDQUVBLFNBQVNnckIsRUFBWWhyQixHQUNmaVosRUFBTVUsR0E3cEVDLEtBOHBFVFYsRUFBTTdGLElBanFFRCxHQWtxRUxuQixFQTV3RGMsWUErd0Raa1ksSUFzQk4sU0FBY25xQixHQUNaLElBQUk4ckIsRUE4Qk4sU0FBeUI5ckIsR0FDdkIsR0FBSTBSLEVBQVFpSSxHQUFHakMsTUFBVTZTLEVBQVUsQ0FDakMsSUFBSWxYLEVBQU9nWSxFQUFTcnJCLEdBRXBCLEdBQUlxVCxHQUFRQSxFQWpnREMsSUFrZ0RYLE9BQU84WCxFQUFVbnJCLEdBQUtxVCxDQUUxQixDQUVBLE9BQU8sQ0FDVCxDQXhDaUIwWSxDQUFnQi9yQixHQUMzQitqQixFQXlDTixTQUE0QitILEdBQzFCLE9BQU90SCxJQUFnQmxXLEdBQUt3ZCxHQUFZeGUsR0FBSUssR0FBSW1lLElBQWF4YyxFQUFRMGMsWUFBYyxLQUFNOUIsRUFBU3hGLElBQVcxTCxFQUFZdUgsT0FBT3FCLFlBQWN0UyxFQUFRMmMsZUFBaUIsR0FDekssQ0EzQ29CQyxDQUFtQkosR0FDakMzWSxFQUFTN0QsRUFBUTZELFFBQVU3RCxFQUFRNmMsYUFDdkNyUyxHQUFPLEdBRUhvUSxFQUNGbkssRUFBVzhHLE9BQU85QyxFQUFhLEVBQUd6VSxFQUFReVgsTUFDakNyVixFQUFRaUksR0FBR2hDLElBQ3BCb0ksRUFBV3dHLEdBQUdqTCxFQUFPaE4sR0FBS3dkLElBQWEsRUFBSTNZLEVBQVMsSUFBTSxJQUFNQSxFQUFTLElBQU0sS0FDdEV6QixFQUFRaUksR0FBR2xDLEtBQVU4UyxHQUFZcFgsRUFDMUM0TSxFQUFXd0csR0FBR3RCLEdBQWMsR0FBUSxJQUFNLEtBRTFDbEYsRUFBV3dHLEdBQUd4RyxFQUFXa0gsT0FBT2xELElBQWMsR0FHaERqSyxHQUFPLEVBQ1QsQ0F0Q0lnTCxDQUFLOWtCLEdBQ0xvTSxFQUFRcE0sSUFHVjZQLEVBQU96SyxFQUFRbVMsR0FBcUJ3VCxHQUNwQ2xiLEVBQU96SyxFQUFRb1MsR0FBbUJ3VCxHQUNsQ2IsR0FBVyxDQUNiLENBRUEsU0FBU2lDLEVBQVFwc0IsSUFDVmdvQixHQUFZb0MsR0FDZmhlLEVBQVFwTSxHQUFHLEVBRWYsQ0FFQSxTQUFTaXJCLEVBQUtqckIsR0FDWmlxQixFQUFnQkQsRUFDaEJBLEVBQVlocUIsRUFDWitwQixFQUFldkYsR0FDakIsQ0FpREEsU0FBUzJHLEVBQVVuckIsRUFBR3FzQixHQUNwQixPQUFPQyxFQUFRdHNCLEVBQUdxc0IsR0FBY0MsRUFBUUMsRUFBYXZzQixHQUFJcXNCLEVBQzNELENBRUEsU0FBU2hCLEVBQVNyckIsR0FDaEIsT0FBTzZNLEVBQU83TSxHQUFLNk0sRUFBTzBmLEVBQWF2c0IsR0FDekMsQ0FFQSxTQUFTdXNCLEVBQWF2c0IsR0FDcEIsT0FBT2dxQixJQUFjaHFCLEdBQUtpcUIsR0FBaUJELENBQzdDLENBRUEsU0FBU3NDLEVBQVF0c0IsRUFBR3FzQixHQUNsQixPQUFRMUIsRUFBYTNxQixHQUFLQSxFQUFFd3NCLGVBQWUsR0FBS3hzQixHQUFHLE9BQVNRLEVBQVE2ckIsRUFBYSxJQUFNLEtBQ3pGLENBV0EsU0FBUzFCLEVBQWEzcUIsR0FDcEIsTUFBNkIsb0JBQWZ5c0IsWUFBOEJ6c0IsYUFBYXlzQixVQUMzRCxDQU1BLFNBQVNqQyxFQUFRMWlCLEdBQ2ZrZ0IsRUFBV2xnQixDQUNiLENBRUEsTUFBTyxDQUNMbVMsTUFuTEYsV0FDRXhULEVBQUsrVSxFQUFPakUsR0FBcUJ6USxFQUFNK1EsSUFDdkNwUixFQUFLK1UsRUFBT2hFLEdBQW1CMVEsRUFBTStRLElBQ3JDcFIsRUFBSytVLEVBQU9sRSxHQUFxQm1ULEVBQWU1UyxJQUNoRHBSLEVBQUsrVSxFQUFPLFFBQVM0USxFQUFTLENBQzVCclUsU0FBUyxJQUVYdFIsRUFBSytVLEVBQU8sWUFBYXBQLEdBQ3pCMEYsRUFBRyxDQUFDdEIsR0FBZU0sSUFBZ0J3TSxFQUNyQyxFQTJLRWtOLFFBQVNBLEVBQ1RrQyxXQVhGLFdBQ0UsT0FBT3ZDLENBQ1QsRUFXRixFQWlnQkV3QyxTQWhmRixTQUFrQmpiLEVBQVNzSCxFQUFhMUosR0FDdEMsSUFPSWxLLEVBQ0E0aUIsRUFSQTRFLEVBQW9CbmIsR0FBZUMsR0FDbkNJLEVBQUs4YSxFQUFrQjlhLEdBQ3ZCckwsRUFBT21tQixFQUFrQm5tQixLQUN6Qm9KLEVBQVMrYyxFQUFrQi9jLE9BRTNCK0wsRUFBT2xLLEVBQVFrSyxLQUNmcGIsRUFBVXdZLEVBQVk4QixVQUFVdGEsUUFXcEMsU0FBUzhjLElBQ1AsSUFBSXVQLEVBQVd2ZCxFQUFRdWQsU0FFbkJBLElBQ0Z6bkIsRUFBc0IsV0FBYnluQixFQUF3QjVzQixPQUFTMmIsRUFDMUNuVixFQUFLckIsRUFBUW1ULEdBQWdCdVUsR0FFakMsQ0FFQSxTQUFTeGMsSUFDUFQsRUFBT3pLLEVBQVFtVCxHQUNqQixDQU1BLFNBQVMrRixJQUNQLElBQUl5TyxFQUFZL0UsRUFDaEJBLEdBQVcsRUFDWHBoQixHQUFTLFdBQ1BvaEIsRUFBVytFLENBQ2IsR0FDRixDQUVBLFNBQVNELEVBQVU5c0IsR0FDakIsSUFBS2dvQixFQUFVLENBQ2IsSUFBSXBpQixFQUFNMFMsR0FBYXRZLEdBRW5CNEYsSUFBUXBGLEVBQVFnVCxJQUNsQjlCLEVBQVE2VSxHQUFHLEtBQ0YzZ0IsSUFBUXBGLEVBQVFpVCxLQUN6Qi9CLEVBQVE2VSxHQUFHLElBRWYsQ0FDRixDQUVBLE1BQU8sQ0FDTHRNLE1BN0NGLFdBQ0VxRCxJQUNBeEwsRUFBR2hCLEdBQWVSLEdBQ2xCd0IsRUFBR2hCLEdBQWV3TSxHQUNsQnhMLEVBQUdwQixHQUFZNE4sRUFDakIsRUF5Q0VoTyxRQUFTQSxFQUNUa2EsUUEzQkYsU0FBaUIxaUIsR0FDZmtnQixFQUFXbGdCLENBQ2IsRUEyQkYsRUFxYkVrbEIsU0EvYUYsU0FBa0J0YixFQUFTc0gsRUFBYTFKLEdBQ3RDLElBQUkyZCxFQUFvQnhiLEdBQWVDLEdBQ25DSSxFQUFLbWIsRUFBa0JuYixHQUN2QkUsRUFBTWliLEVBQWtCamIsSUFDeEJ2TCxFQUFPd21CLEVBQWtCeG1CLEtBQ3pCd0wsRUFBT2diLEVBQWtCaGIsS0FFekJpYixFQUFvQyxlQUFyQjVkLEVBQVE2ZCxTQUN2QmxlLEVBQVMsQ0FBQzBCLEdBQWFPLElBQ3ZCa2MsRUFBVSxHQVNkLFNBQVM5UCxJQUNQeFgsRUFBTXNuQixHQWFOcFUsRUFBWWtFLE9BQU9uVixTQUFRLFNBQVVnYSxHQUNuQ3JWLEVBQVNxVixFQUFNakwsTUFBTzRCLElBQWdCM1EsU0FBUSxTQUFVcVksR0FDdEQsSUFBSTZJLEVBQU0xZCxFQUFhNlUsRUFBSzVILElBQ3hCNlUsRUFBUzloQixFQUFhNlUsRUFBSzNILElBRS9CLEdBQUl3USxJQUFRN0ksRUFBSTZJLEtBQU9vRSxJQUFXak4sRUFBSWlOLE9BQVEsQ0FDNUMsSUFBSTVoQixFQUFZNkQsRUFBUWhILFFBQVErTyxRQUM1QnhPLEVBQVN1WCxFQUFJckQsY0FDYjFGLEVBQVUzTixFQUFNYixFQUFRLElBQU00QyxJQUFjYixFQUFPLE9BQVFhLEVBQVc1QyxHQUMxRXVrQixFQUFRaHJCLEtBQUssQ0FBQ2dlLEVBQUsyQixFQUFPMUssSUFDMUIrSSxFQUFJNkksS0FBTzlkLEVBQVFpVixFQUFLLE9BQzFCLENBQ0YsR0FDRixJQXZCSThNLEVBQ0ZJLEtBRUF0YixFQUFJL0MsR0FDSjZDLEVBQUc3QyxFQUFRc2UsR0FDWEEsSUFFSixDQW1CQSxTQUFTQSxLQUNQSCxFQUFVQSxFQUFRM2pCLFFBQU8sU0FBVThHLEdBQ2pDLElBQUlnUCxFQUFXalEsRUFBUTRRLFVBQVk1USxFQUFRa2UsY0FBZ0IsR0FBSyxHQUFLLEVBQ3JFLE9BQU9qZCxFQUFLLEdBQUcrTyxTQUFTNU4sRUFBUXNKLE1BQU91RSxJQUFZa08sRUFBS2xkLEVBQzFELEtBQ1F6TyxRQUFVa1EsRUFBSS9DLEVBQ3hCLENBRUEsU0FBU3dlLEVBQUtsZCxHQUNaLElBQUk2UCxFQUFNN1AsRUFBSyxHQUNmN0gsRUFBUzZILEVBQUssR0FBR3VHLE1BQU9MLElBQ3hCaFEsRUFBSzJaLEVBQUssYUFBYzdaLEVBQU1tbkIsRUFBUW5kLElBQ3RDOUYsRUFBYTJWLEVBQUssTUFBTzdVLEVBQWE2VSxFQUFLNUgsS0FDM0MvTixFQUFhMlYsRUFBSyxTQUFVN1UsRUFBYTZVLEVBQUszSCxLQUM5Q3BPLEVBQWdCK1YsRUFBSzVILElBQ3JCbk8sRUFBZ0IrVixFQUFLM0gsR0FDdkIsQ0FFQSxTQUFTaVYsRUFBT25kLEVBQU12USxHQUNwQixJQUFJb2dCLEVBQU03UCxFQUFLLEdBQ1h3UixFQUFReFIsRUFBSyxHQUNqQjNELEVBQVltVixFQUFNakwsTUFBT0wsSUFFVixVQUFYelcsRUFBRW1ELE9BQ0owSSxFQUFPMEUsRUFBSyxJQUNacEYsRUFBUWlWLEVBQUssSUFDYm5PLEVBQUtWLEdBQXVCNk8sRUFBSzJCLEdBQ2pDOVAsRUFBS2xCLEtBR1BtYyxHQUFnQkksR0FDbEIsQ0FFQSxTQUFTQSxJQUNQRixFQUFRdHJCLFFBQVUyckIsRUFBS0wsRUFBUWxKLFFBQ2pDLENBRUEsTUFBTyxDQUNMakssTUEzRUYsV0FDTTNLLEVBQVE2ZCxXQUNWN1AsSUFDQXhMLEVBQUdqQixHQUFleU0sR0FFdEIsRUF1RUVoTixRQUFTL0osRUFBTVQsRUFBT3NuQixHQUN0QkcsTUFBT0EsRUFFWCxFQXNWRUksV0FwVkYsU0FBb0JqYyxFQUFTc0gsRUFBYTFKLEdBQ3hDLElBYUltTSxFQUNBbVMsRUFkQXJlLEVBQVFrQyxHQUFlQyxHQUN2QkksRUFBS3ZDLEVBQU11QyxHQUNYRyxFQUFPMUMsRUFBTTBDLEtBQ2J4TCxFQUFPOEksRUFBTTlJLEtBQ2J5VyxFQUFTbEUsRUFBWWtFLE9BQ3JCM0IsRUFBV3ZDLEVBQVl1QyxTQUN2QndFLEVBQWEvRyxFQUFZK0csV0FDekJFLEVBQVdGLEVBQVdFLFNBQ3RCK0csRUFBV2pILEVBQVdpSCxTQUN0QlQsRUFBS3hHLEVBQVd3RyxHQUNoQi9sQixFQUFVd1ksRUFBWThCLFVBQVV0YSxRQUNoQzZtQixFQUFjOUwsRUFBU25FLFdBQ3ZCalAsRUFBUSxHQXFCWixTQUFTbUksSUFDSG1MLElBQ0Y1UCxFQUFPd2IsRUFBY3JoQixFQUFNeVYsRUFBSzNTLFVBQVkyUyxHQUM1QzdPLEVBQVk2TyxFQUFNbVMsR0FDbEI5bkIsRUFBTXFDLEdBQ05zVCxFQUFPLE1BR1RsTSxFQUFNZSxTQUNSLENBMkNBLFNBQVM4YixFQUFRcHFCLEdBQ2Z1a0IsRUFBRyxJQUFNdmtCLEdBQU0sRUFDakIsQ0FFQSxTQUFTOHFCLEVBQVU5cUIsRUFBTWhDLEdBQ3ZCLElBQUk4QixFQUFTcUcsRUFBTXJHLE9BQ2Y4RCxFQUFNMFMsR0FBYXRZLEdBQ25CNnRCLEVBQU1DLElBQ05DLEdBQVksRUFFWm5vQixJQUFRcEYsRUFBUWlULElBQWEsRUFBT29hLEdBQ3RDRSxJQUFhL3JCLEVBQU9GLEVBQ1g4RCxJQUFRcEYsRUFBUWdULElBQVksRUFBT3FhLEdBQzVDRSxLQUFjL3JCLEVBQU9GLEdBQVVBLEVBQ2QsU0FBUjhELEVBQ1Rtb0IsRUFBVyxFQUNNLFFBQVJub0IsSUFDVG1vQixFQUFXanNCLEVBQVMsR0FHdEIsSUFBSWtzQixFQUFPN2xCLEVBQU00bEIsR0FFYkMsSUFDRixFQUFNQSxFQUFLbEQsUUFDWHZFLEVBQUcsSUFBTXdILEdBQ1QzaEIsRUFBUXBNLEdBQUcsR0FFZixDQUVBLFNBQVM4dEIsSUFDUCxPQUFPeGUsRUFBUTJlLHFCQUF1QjNlLEVBQVFzSyxTQUNoRCxDQUVBLFNBQVN3RSxFQUFNcEQsR0FDYixPQUFPN1MsRUFBTTRYLEVBQVdxRyxPQUFPcEwsR0FDakMsQ0FFQSxTQUFTbEksSUFDUCxJQUFJb0UsRUFBT2tILEVBQU00SSxHQUFTLElBQ3RCekksRUFBT0gsRUFBTTRJLEtBRWpCLEdBQUk5UCxFQUFNLENBQ1IsSUFBSTRULEVBQVM1VCxFQUFLNFQsT0FDbEJsZSxFQUFZa2UsRUFBUXpVLElBQ3BCaE0sRUFBZ0J5Z0IsRUFBUXRXLElBQ3hCL0osRUFBYXFnQixFQUFRMVcsSUFBWSxFQUNuQyxDQUVBLEdBQUltSyxFQUFNLENBQ1IsSUFBSTJQLEVBQVUzUCxFQUFLdU0sT0FDbkJwaUIsRUFBU3dsQixFQUFTN1gsSUFDbEI1TCxFQUFheWpCLEVBQVMxWixJQUFlLEdBQ3JDL0osRUFBYXlqQixFQUFTOVosR0FBVyxHQUNuQyxDQUVBbkMsRUFsckUyQixxQkFrckVJLENBQzdCd0osS0FBTUEsRUFDTnRULE1BQU9BLEdBQ04rTyxFQUFNcUgsRUFDWCxDQUVBLE1BQU8sQ0FDTHBXLE1BQU9BLEVBQ1A4UixNQXBJRixTQUFTQSxJQUNQM0osSUFDQXdCLEVBQUcsQ0FBQ2hCLEdBQWVELEdBQWVXLElBQTBCeUksR0FDNUQsSUFBSXNOLEVBQVVqWSxFQUFROEgsV0FDdEJpUSxHQUFlbGMsRUFBUWtjLEVBQWFFLEVBQVUsR0FBSyxRQUUvQ0EsSUFDRnpWLEVBQUcsQ0FBQ3BCLEdBQVlPLEdBQWNDLElBQWlCNEIsR0FxQm5ELFdBQ0UsSUFBSWhSLEVBQVM0UCxFQUFRNVAsT0FDakJ3RyxFQUFVZ0gsRUFBUWhILFFBQ2xCdVQsRUFBT3ZNLEVBQVF1TSxLQUNmcUUsRUFBVTVRLEVBQVE0USxRQUNsQjFTLEVBQU15UyxJQUFhRixFQUFXa0UsU0FBVyxFQUFJdlcsR0FBSzVMLEVBQVNvZSxHQUUvRHhYLEVBREErUyxFQUFPNEwsR0FBZXpjLEVBQU8sS0FBTXRDLEVBQVE4TyxXQUFZbUUsRUFBU0MsTUFBTXVCLGVBQ3ZENlEsRUFBb0I5WCxHQUFtQixLQUFPZ1ksS0FDN0RyakIsRUFBYWdSLEVBQU10SCxHQUFNLFdBQ3pCMUosRUFBYWdSLEVBQU1oSCxHQUFZb0gsRUFBS3NTLFFBQ3BDMWpCLEVBQWFnUixFQUFNN0csR0FBa0JrWixNQUFtQmxhLEdBQU0sV0FBYSxJQUUzRSxJQUFLLElBQUkvUixFQUFJLEVBQUdBLEVBQUkyTCxFQUFLM0wsSUFBSyxDQUM1QixJQUFJdXNCLEVBQUt4akIsRUFBTyxLQUFNLEtBQU02USxHQUN4QnFQLEVBQVNsZ0IsRUFBTyxTQUFVLENBQzVCeWpCLE1BQU8vbEIsRUFBUXRHLEtBQ2ZtQixLQUFNLFVBQ0xpckIsR0FDQ3BRLEVBQVdkLEVBQU80QyxNQUFNamUsR0FBR3FjLEtBQUksU0FBVTZELEdBQzNDLE9BQU9BLEVBQU1qTCxNQUFNdEUsRUFDckIsSUFDSThiLEdBQVFyTyxLQUFjQyxFQUFVLEVBQUlyRSxFQUFLMFMsTUFBUTFTLEVBQUt3QyxPQUMxRDVYLEVBQUtxa0IsRUFBUSxRQUFTdmtCLEVBQU02bEIsRUFBU3ZxQixJQUVqQ3lOLEVBQVFrZixvQkFDVi9uQixFQUFLcWtCLEVBQVEsVUFBV3ZrQixFQUFNdW1CLEVBQVdqckIsSUFHM0M0SSxFQUFhMmpCLEVBQUlqYSxHQUFNLGdCQUN2QjFKLEVBQWFxZ0IsRUFBUTNXLEdBQU0sT0FDM0IxSixFQUFhcWdCLEVBQVF4VyxHQUFlMEosRUFBU2pNLEtBQUssTUFDbER0SCxFQUFhcWdCLEVBQVFyVyxHQUFZbEcsR0FBTytmLEVBQU16c0IsRUFBSSxJQUNsRDRJLEVBQWFxZ0IsRUFBUTFXLElBQVksR0FDakNqTSxFQUFNL0YsS0FBSyxDQUNUZ3NCLEdBQUlBLEVBQ0p0RCxPQUFRQSxFQUNSOW9CLEtBQU1ILEdBRVYsQ0FDRixDQTNESTRzQixHQUNBM2IsSUFDQWIsRUFqa0V5QixxQkFpa0VNLENBQzdCd0osS0FBTUEsRUFDTnRULE1BQU9BLEdBQ05pVyxFQUFNMU0sRUFBUXNKLFFBRXJCLEVBc0hFMUssUUFBU0EsRUFDVDhOLE1BQU9BLEVBQ1B0TCxPQUFRQSxFQUVaLEVBMkxFNGIsS0F2TEYsU0FBY2hkLEVBQVNzSCxFQUFhMUosR0FDbEMsSUFBSTJOLEVBQWUzTixFQUFRMk4sYUFDdkJXLEVBQWF0TyxFQUFRc08sV0FDckIzTyxFQUFTLEdBRWIsU0FBU2dMLElBaUNULElBQ00xSyxFQUNBdUMsRUFsQ0pKLEVBQVF1TSxRQUFRbFcsU0FBUSxTQUFVM0MsR0FDM0JBLEVBQU91cEIsV0FDVkMsRUFBS2xkLEVBQVN0TSxFQUFPK1ksUUFDckJ5USxFQUFLeHBCLEVBQU8rWSxPQUFRek0sR0FFeEIsSUFFSXVMLEtBMkJBbkwsR0FEQXZDLEVBQVFrQyxHQUFlQyxJQUNaSSxJQUNabEIsR0FBYXdiLEdBQ2hCdGEsRUF2dUVzQixLQXV1RUVnYixHQUN4QmhiLEVBQUcsQ0FBQ3RCLEdBQWVNLElBQWdCZ0MsR0FDbkM3RCxFQUFPN00sS0FBS21OLEdBQ1pBLEVBQU0wQyxLQUFLYixHQUEwQk0sRUFBUXVNLFNBN0IvQyxDQUVBLFNBQVMzTixJQUNQckIsRUFBT2xILFNBQVEsU0FBVXdILEdBQ3ZCQSxFQUFNZSxTQUNSLElBQ0F4SyxFQUFNbUosRUFDUixDQU9BLFNBQVMyZixFQUFLelEsRUFBUS9ZLEdBQ3BCLElBQUltSyxFQUFRa0MsR0FBZTBNLEdBQzNCNU8sRUFBTXVDLEdBQUdwQixJQUFZLFNBQVVzSyxFQUFPOUQsRUFBTTZOLEdBQzFDM2YsRUFBT21oQixHQUFHbmhCLEVBQU91VSxHQUFHakMsSUFBUXFOLEVBQU8vSixFQUNyQyxJQUNBL0wsRUFBTzdNLEtBQUttTixFQUNkLENBWUEsU0FBU3VELElBQ1BySSxFQUFhdU8sRUFBWXVDLFNBQVNFLEtBQU03RyxHQUFrQnRGLEVBQVFzSyxZQUFjaEcsR0FBTSxXQUFhLEdBQ3JHLENBRUEsU0FBU3dZLEVBQVFySyxHQUNmclEsRUFBUTZVLEdBQUd4RSxFQUFNL0csTUFDbkIsQ0FFQSxTQUFTOFIsRUFBVS9LLEVBQU8vaEIsR0FDcEJ3QyxFQUFTbVcsR0FBY0wsR0FBYXRZLE1BQ3RDb3NCLEVBQVFySyxHQUNSM1YsRUFBUXBNLEdBRVosQ0FFQSxNQUFPLENBQ0x1YSxNQUFPaFUsRUFBTXlTLEVBQVlELE1BQU0zRixJQUFLLENBQ2xDd0ssV0FBWXBXLEVBQVlvVyxHQUFjWCxFQUFlVyxJQUNwRCxHQUNIM0QsTUFBT0EsRUFDUDNKLFFBQVNBLEVBQ1RrUyxRQTVDRixXQUNFbFMsSUFDQTJKLEdBQ0YsRUEyQ0YsRUFpSEU0VSxNQS9HRixTQUFlbmQsRUFBU3NILEVBQWExSixHQUNuQyxJQUNJN0ksRUFEb0JnTCxHQUFlQyxHQUNWakwsS0FFekJxb0IsRUFBVyxFQVFmLFNBQVNDLEVBQVEvdUIsR0FDZixHQUFJQSxFQUFFa3JCLFdBQVksQ0FDaEIsSUFBSThELEVBQVNodkIsRUFBRWd2QixPQUNYNUssRUFBWTRLLEVBQVMsRUFDckJsaUIsRUFBWUQsRUFBTzdNLEdBRW5CaXZCLEVBQU8zZixFQUFRNGYsbUJBQXFCLEVBRXBDQyxFQUFRN2YsRUFBUThmLFlBQWMsRUFFOUJ6aEIsR0FBSXFoQixHQUFVQyxHQUFRbmlCLEVBQVlnaUIsRUFBV0ssSUFDL0N6ZCxFQUFRNlUsR0FBR25DLEVBQVksSUFBTSxLQUM3QjBLLEVBQVdoaUIsR0FPakIsU0FBdUJzWCxHQUNyQixPQUFROVUsRUFBUStmLGNBQWdCM2QsRUFBUXVILE1BQU1VLEdBenNGckMsS0F5c0ZzRyxJQUFuRFgsRUFBWStHLFdBQVc2RixZQUFZeEIsRUFDakcsQ0FOSWtMLENBQWNsTCxJQUFjaFksRUFBUXBNLEVBQ3RDLENBQ0YsQ0FNQSxNQUFPLENBQ0xpYSxNQTlCRixXQUNNM0ssRUFBUWlnQixPQUNWOW9CLEVBQUt1UyxFQUFZdUMsU0FBU0MsTUFBTyxRQUFTdVQsRUFBU2xYLEdBRXZELEVBNEJGLEVBMEVFMlgsS0F0RUYsU0FBYzlkLEVBQVNzSCxFQUFhMUosR0FDbEMsSUFDSXdDLEVBRG9CTCxHQUFlQyxHQUNaSSxHQUV2QjBKLEVBQVF4QyxFQUFZdUMsU0FBU0MsTUFDN0IrTCxFQUFValksRUFBUW1nQixPQUFTbmdCLEVBQVEyTixhQUNuQ3lTLEVBQUs5a0IsRUFBTyxPQUFRdUwsSUFDcEJoRSxFQUFXRCxHQVRNLEdBUzRCM0wsRUFBTStWLEdBQVEsSUFhL0QsU0FBU0EsRUFBT2tDLEdBQ2QvVCxFQUFhK1EsRUFBT3pHLEdBQVd5SixHQUUzQkEsR0FDRjVWLEVBQU80UyxFQUFPa1UsR0FDZHZkLEVBQVNqTSxVQUVUMkYsRUFBTzZqQixHQUNQdmQsRUFBU2EsU0FFYixDQU9BLFNBQVN3WCxFQUFReEMsR0FDWFQsR0FDRjljLEVBQWErUSxFQUFPMUcsR0FBV2tULEVBQVcsTUFBUSxTQUV0RCxDQUVBLE1BQU8sQ0FDTC9OLE1BbkNGLFdBQ01zTixJQUNGaUQsR0FBU3hSLEVBQVlpUCxTQUFTM1UsWUFDOUI3SSxFQUFhK1EsRUFBT3hHLElBQWEsR0FDakMwYSxFQUFHQyxZQUFjLElBQ2pCN2QsRUFBR1QsR0FBcUI5SyxFQUFNaWtCLEdBQVMsSUFDdkMxWSxFQUFHUixHQUFzQi9LLEVBQU1pa0IsR0FBUyxJQUN4QzFZLEVBQUcsQ0FBQ25CLEdBQWFPLElBQWlCM0ssRUFBTStWLEdBQVEsSUFFcEQsRUEyQkVrTyxRQUFTQSxFQUNUbGEsUUFkRixXQUNFakcsRUFBZ0JtUixFQUFPLENBQUMxRyxHQUFXRSxHQUFhRCxLQUNoRGxKLEVBQU82akIsRUFDVCxFQWFGLElBc0NJRSxHQUFXLENBQ2J6c0IsS0FBTSxRQUNOZ1osS0FBTSxTQUNOMFQsTUFBTyxJQUNQM1AsUUFBUyxFQUNUZixhQUFhLEVBQ2JuSSxRQUFRLEVBQ1JJLFlBQVksRUFDWm9YLG9CQUFvQixFQUNwQnJjLFNBQVUsSUFDVnlXLGNBQWMsRUFDZEMsY0FBYyxFQUNkSixlQUFlLEVBQ2ZvQixPQUFRLGdDQUNSN00sTUFBTSxFQUNOcEQsVUFBVyxNQUNYZ0wsV0FBVyxFQUNYNUYsZUFBZ0IsNkNBQ2hCeVEsTUFBTSxFQUNObm5CLFFBQVN1TyxHQUNUZ0YsS0FsQ1MsQ0FDVDNFLEtBQU0saUJBQ05DLEtBQU0sYUFDTjRRLE1BQU8sb0JBQ1BGLEtBQU0sbUJBQ054SixPQUFRLGlCQUNSa1EsTUFBTyxnQkFDUC9GLEtBQU0saUJBQ056VixNQUFPLGlCQUNQeUosU0FBVSxXQUNWMUYsTUFBTyxRQUNQcVgsT0FBUSx5QkFDUi9PLFdBQVksWUF1QlpqRyxjQUFlLENBQ2IwVyxNQUFPLEVBQ1BDLFlBQWEsRUFDYnhILFNBQVUsVUFJZCxTQUFTeUgsR0FBS3JlLEVBQVNzSCxFQUFhMUosR0FDbEMsSUFBSTROLEVBQVNsRSxFQUFZa0UsT0FNekIsU0FBU0ksSUFDUEosRUFBT25WLFNBQVEsU0FBVWdhLEdBQ3ZCQSxFQUFNL1csTUFBTSxZQUFhLGVBQWlCLElBQU0rVyxFQUFNL0csTUFBUSxLQUNoRSxHQUNGLENBT0EsTUFBTyxDQUNMZixNQWhCRixXQUNFeEksR0FBZUMsR0FBU0ksR0FBRyxDQUFDdEIsR0FBZUssSUFBZ0J5TSxFQUM3RCxFQWVFcFgsTUFQRixTQUFlOFUsRUFBT2dWLEdBQ3BCOVMsRUFBT2xTLE1BQU0sYUFBYyxXQUFhc0UsRUFBUXVnQixNQUFRLE1BQVF2Z0IsRUFBUXVhLFFBQ3hFampCLEVBQVNvcEIsRUFDWCxFQUtFaGQsT0FBUWxNLEVBRVosQ0FFQSxTQUFTaWIsR0FBTXJRLEVBQVNzSCxFQUFhMUosR0FDbkMsSUFLSTJnQixFQUxBaE4sRUFBT2pLLEVBQVlpSyxLQUNuQmxELEVBQWEvRyxFQUFZK0csV0FDekIwRCxFQUFTekssRUFBWXlLLE9BQ3JCaEksRUFBT3pDLEVBQVl1QyxTQUFTRSxLQUM1QnlVLEVBQWEzcEIsRUFBTXlFLEVBQU95USxFQUFNLGNBK0JwQyxTQUFTekksSUFDUGtkLEVBQVcsSUFDWHpNLEVBQU96USxRQUNULENBaUJBLE1BQU8sQ0FDTGlILE1BakRGLFdBQ0V4SSxHQUFlQyxHQUFTakwsS0FBS2dWLEVBQU0saUJBQWlCLFNBQVV6YixHQUN4REEsRUFBRW9GLFNBQVdxVyxHQUFRd1UsSUFDdkJqZCxJQUNBaWQsSUFFSixHQUNGLEVBMkNFL3BCLE1BekNGLFNBQWU4VSxFQUFPZ1YsR0FDcEIsSUFBSWpNLEVBQWNkLEVBQUtXLFdBQVc1SSxHQUFPLEdBQ3JDNkksRUFBV1osRUFBS3VCLGNBQ2hCcUwsRUFxQk4sU0FBa0I3VSxHQUNoQixJQUFJOFUsRUFBY3hnQixFQUFRd2dCLFlBRTFCLEdBQUlwZSxFQUFRaUksR0FBR2xDLEtBQVVxWSxFQUFhLENBQ3BDLElBQUk1WSxFQUFPNkksRUFBV2lILFVBQVMsR0FDM0I3Z0IsRUFBTTRaLEVBQVdrRSxTQUVyQixHQUFhLElBQVQvTSxHQUFjOEQsR0FBUzdVLEdBQU8rUSxHQUFRL1EsR0FBaUIsSUFBVjZVLEVBQy9DLE9BQU84VSxDQUVYLENBRUEsT0FBT3hnQixFQUFRdWdCLEtBQ2pCLENBbENjTSxDQUFTblYsR0FFakJyTixHQUFJb1csRUFBY0YsSUFBYSxHQUFLZ00sR0FBUyxFQUMzQ3ZnQixFQUFROGdCLFVBQ1YzTSxFQUFPb0QsT0FBTzlDLEVBQWE4TCxHQUFPLEVBQU9HLElBRXpDRSxFQUFXLGFBQWVMLEVBQVEsTUFBUXZnQixFQUFRdWEsUUFDbEQ1RyxFQUFLVSxVQUFVSSxHQUFhLEdBQzVCa00sRUFBY0QsSUFHaEIvTSxFQUFLUyxLQUFLMUksR0FDVmdWLElBRUosRUF5QkVoZCxPQUFRQSxFQUVaLENBRUEsSUFBSXFkLEdBQXVCLFdBQ3pCLFNBQVNBLEVBQVFqckIsRUFBUWtLLEdBdDVFM0IsSUFDTTJKLEVBczVFRm5aLEtBQUt5UCxNQUFRa0MsS0FDYjNSLEtBQUs0ZCxXQUFhLENBQUMsRUFDbkI1ZCxLQUFLbVosT0F4NUVIQSxFQTVnQlEsRUFzaEJMLENBQ0w3RixJQVRGLFNBQWF0TCxHQUNYbVIsRUFBUW5SLENBQ1YsRUFRRTZSLEdBTkYsU0FBWTJXLEdBQ1YsT0FBTzl0QixFQUFTcUYsRUFBUXlvQixHQUFTclgsRUFDbkMsSUFpNUVFblosS0FBS21lLFFBQVUsR0FDZm5lLEtBQUt5d0IsR0FBSyxDQUFDLEVBQ1h6d0IsS0FBSzB3QixHQUFLLENBQUMsRUFDWCxJQUFJNVUsRUFBT3JVLEVBQVNuQyxHQUFVb0gsRUFBTTFCLFNBQVUxRixHQUFVQSxFQUN4RDhILEdBQU8wTyxFQUFNQSxFQUFPLGdCQUNwQjliLEtBQUs4YixLQUFPQSxFQUNadE0sRUFBVW5GLEVBQU0sQ0FDZHVTLE1BQU9uUixFQUFhcVEsRUFBTW5ILEtBQWUsR0FDekNrSSxXQUFZcFIsRUFBYXFRLEVBQU1sSCxLQUFvQixJQUNsRGtiLEdBQVVTLEVBQVFJLFNBQVVuaEIsR0FBVyxDQUFDLEdBRTNDLElBQ0VuRixFQUFNbUYsRUFBU29oQixLQUFLOUosTUFBTXJiLEVBQWFxUSxFQUFNM08sS0FDL0MsQ0FBRSxNQUFPak4sR0FDUGtOLElBQU8sRUFBTyxlQUNoQixDQUVBcE4sS0FBS3l3QixHQUFLN3FCLE9BQU9rRixPQUFPVCxFQUFNLENBQUMsRUFBR21GLEdBQ3BDLENBRUEsSUFsOEZvQnFoQixFQUFhQyxFQWs4RjdCQyxFQUFTUixFQUFRaHFCLFVBd0lyQixPQXRJQXdxQixFQUFPNVcsTUFBUSxTQUFlNlcsRUFBWTVOLEdBQ3hDLElBQUk2TixFQUFRanhCLEtBRVJtWixFQUFRblosS0FBS21aLE1BQ2JELEVBQWNsWixLQUFLNGQsV0FxQnZCLE9BcEJBeFEsR0FBTytMLEVBQU1VLEdBQUcsQ0FoOEZOLEVBTUUsSUEwN0YyQixvQkFDdkNWLEVBQU03RixJQWo4RkksR0FrOEZWdFQsS0FBS2t4QixHQUFLaFksRUFDVmxaLEtBQUtteEIsR0FBSy9OLEdBQWNwakIsS0FBS214QixLQUFPbnhCLEtBQUs2WixHQUFHaEMsSUFBUW9ZLEdBQU9oTyxJQUMzRGppQixLQUFLMHdCLEdBQUtNLEdBQWNoeEIsS0FBSzB3QixHQUk3QjFtQixFQUhtQixFQUFPLENBQUMsRUFBRzhPLEdBQXVCOVksS0FBSzB3QixHQUFJLENBQzVEdE4sV0FBWXBqQixLQUFLbXhCLE1BRUUsU0FBVUMsRUFBV3RyQixHQUN4QyxJQUFJdXJCLEVBQVlELEVBQVVILEVBQU8vWCxFQUFhK1gsRUFBTVIsSUFDcER2WCxFQUFZcFQsR0FBT3VyQixFQUNuQkEsRUFBVTVXLE9BQVM0VyxFQUFVNVcsT0FDL0IsSUFDQXpRLEVBQU9rUCxHQUFhLFNBQVVtWSxHQUM1QkEsRUFBVWxYLE9BQVNrWCxFQUFVbFgsT0FDL0IsSUFDQW5hLEtBQUttUyxLQUFLekIsSUFDVjlILEVBQVM1SSxLQUFLOGIsS0FBTXhGLElBQ3BCNkMsRUFBTTdGLElBaDlGQyxHQWk5RlB0VCxLQUFLbVMsS0FBS3hCLElBQ0gzUSxJQUNULEVBRUErd0IsRUFBT2pDLEtBQU8sU0FBY3pRLEdBZTFCLE9BZEFyZSxLQUFLbWUsUUFBUTdiLEtBQUssQ0FDaEIrYixPQUFRQSxJQUVWQSxFQUFPRixRQUFRN2IsS0FBSyxDQUNsQitiLE9BQVFyZSxLQUNSNnVCLFVBQVUsSUFHUjd1QixLQUFLbVosTUFBTVUsR0E5OUZSLEtBKzlGTDdaLEtBQUtreEIsR0FBR3RDLEtBQUtsTSxVQUVickUsRUFBT1QsV0FBV2dSLEtBQUtsTSxXQUdsQjFpQixJQUNULEVBRUErd0IsRUFBT3RLLEdBQUssU0FBWUMsR0FHdEIsT0FGQTFtQixLQUFLa3hCLEdBQUdqUixXQUFXd0csR0FBR0MsR0FFZjFtQixJQUNULEVBRUErd0IsRUFBTy9lLEdBQUssU0FBWTdDLEVBQVFJLEdBRTlCLE9BREF2UCxLQUFLeVAsTUFBTXVDLEdBQUc3QyxFQUFRSSxHQUNmdlAsSUFDVCxFQUVBK3dCLEVBQU83ZSxJQUFNLFNBQWEvQyxHQUV4QixPQURBblAsS0FBS3lQLE1BQU15QyxJQUFJL0MsR0FDUm5QLElBQ1QsRUFFQSt3QixFQUFPNWUsS0FBTyxTQUFjMUMsR0FDMUIsSUFBSTZoQixFQUlKLE9BRkNBLEVBQWN0eEIsS0FBS3lQLE9BQU8wQyxLQUFLMUwsTUFBTTZxQixFQUFhLENBQUM3aEIsR0FBTzdJLE9BQU9WLEVBQU1XLFVBQVcsS0FFNUU3RyxJQUNULEVBRUErd0IsRUFBT3RvQixJQUFNLFNBQWF3VCxFQUFRZixHQUdoQyxPQUZBbGIsS0FBS2t4QixHQUFHOVQsT0FBTzNVLElBQUl3VCxFQUFRZixHQUVwQmxiLElBQ1QsRUFFQSt3QixFQUFPaGxCLE9BQVMsU0FBZ0JnVSxHQUc5QixPQUZBL2YsS0FBS2t4QixHQUFHOVQsT0FBT3JSLE9BQU9nVSxHQUVmL2YsSUFDVCxFQUVBK3dCLEVBQU9sWCxHQUFLLFNBQVl4VyxHQUN0QixPQUFPckQsS0FBS3l3QixHQUFHcHRCLE9BQVNBLENBQzFCLEVBRUEwdEIsRUFBTzNXLFFBQVUsV0FFZixPQURBcGEsS0FBS21TLEtBQUtwQixJQUNIL1EsSUFDVCxFQUVBK3dCLEVBQU92Z0IsUUFBVSxTQUFpQitJLFFBQ2IsSUFBZkEsSUFDRkEsR0FBYSxHQUdmLElBQUk5SixFQUFRelAsS0FBS3lQLE1BQ2IwSixFQUFRblosS0FBS21aLE1BY2pCLE9BWklBLEVBQU1VLEdBOWhHQSxHQStoR1JsSSxHQUFlM1IsTUFBTWdTLEdBQUdyQixHQUFhM1EsS0FBS3dRLFFBQVE3SixLQUFLM0csS0FBTXVaLEtBRTdEdlAsRUFBT2hLLEtBQUtreEIsSUFBSSxTQUFVRyxHQUN4QkEsRUFBVTdnQixTQUFXNmdCLEVBQVU3Z0IsUUFBUStJLEVBQ3pDLElBQUcsR0FDSDlKLEVBQU0wQyxLQUFLZCxJQUNYNUIsRUFBTWUsVUFDTitJLEdBQWN2VCxFQUFNaEcsS0FBS21lLFNBQ3pCaEYsRUFBTTdGLElBamlHSSxJQW9pR0x0VCxJQUNULEVBcGpHb0I2d0IsRUFzakdQTixHQXRqR29CTyxFQXNqR1gsQ0FBQyxDQUNyQmhyQixJQUFLLFVBQ0wrWixJQUFLLFdBQ0gsT0FBTzdmLEtBQUt5d0IsRUFDZCxFQUNBbmQsSUFBSyxTQUFhOUQsR0FDaEJ4UCxLQUFLa3hCLEdBQUdqWSxNQUFNM0YsSUFBSTlELEdBQVMsR0FBTSxFQUNuQyxHQUNDLENBQ0QxSixJQUFLLFNBQ0wrWixJQUFLLFdBQ0gsT0FBTzdmLEtBQUtreEIsR0FBRzlULE9BQU9tRCxXQUFVLEVBQ2xDLEdBQ0MsQ0FDRHphLElBQUssUUFDTCtaLElBQUssV0FDSCxPQUFPN2YsS0FBS2t4QixHQUFHalIsV0FBV2lILFVBQzVCLE1BdmtHMEU3aEIsRUFBa0J3ckIsRUFBWXRxQixVQUFXdXFCLEdBQTJFbHJCLE9BQU9DLGVBQWVnckIsRUFBYSxZQUFhLENBQUVsckIsVUFBVSxJQTBrR3JQNHFCLENBQ1QsQ0FsSzJCLEdBb0t2QmdCLEdBQVNoQixHQUNiZ0IsR0FBT1osU0FBVyxDQUFDLEVBQ25CWSxHQUFPQyxPQS9qR00sQ0FDWEMsUUFSWSxFQVNaQyxRQVJZLEVBU1pDLEtBUlMsRUFTVEMsT0FSVyxFQVNYQyxVQVJjLEVBU2RDLFNBUmEsRUFTYkMsVUFSYyxHQ0pULE1BQU1DLEdBNEJULFdBQUEzeEIsQ0FBWTR4QixFQUFvQkMsR0FwQmhDLEtBQUEzeEIsa0JBQTRCLG1CQVU1QixLQUFBNHhCLDZCQUF3RCxLQU14RCxLQUFBQywwQkFBOEMsR0FFOUMsS0FBQUMsb0JBQTZDLEtBR3pDcnlCLEtBQUtpeUIsV0FBYUEsRUFDbEJqeUIsS0FBS2t5QixVQUFZQSxFQUNqQmx5QixLQUFLc3lCLFlBQWMsRUFDbkJ0eUIsS0FBS3V5QixhQUFlLElBQUloQixHQUFPLFVBQVcsQ0FDdEM5UCxZQUFhdGhCLE9BQU9xeUIsWUFBYyxLQUNuQ3JZLFFBRUhuYSxLQUFLdXlCLGFBQWF2Z0IsR0FBRyxRQUFRLENBQUN5Z0IsRUFBVUMsRUFBVUMsS0FDMUMzeUIsS0FBS3N5QixjQUFnQkcsSUFDckIxeEIsUUFBUUMsSUFBSSxzQ0FBd0MweEIsR0FDcEQxeUIsS0FBSzR5QixxQkFBc0IsRUFDM0I1eUIsS0FBSzZ5QixjQUFjN3lCLEtBQUtpQixLQUFLRSxNQUFNdXhCLElBQ3ZDLElBR0oxeUIsS0FBS3V5QixhQUFhdmdCLEdBQUcsU0FBUyxDQUFDOGdCLEVBQWM3TSxFQUFXME0sS0FDaEQzeUIsS0FBS3N5QixjQUFnQlEsSUFDckIveEIsUUFBUUMsSUFBSSxzQ0FBd0M4eEIsR0FDcEQ5eUIsS0FBS3N5QixZQUFjUSxFQUNuQjl5QixLQUFLNHlCLHFCQUFzQixFQUMzQjV5QixLQUFLK3lCLGNBQWMveUIsS0FBS2lCLEtBQUtFLE1BQU0yeEIsR0FBZUEsR0FDdEQsSUFHSjl5QixLQUFLdXlCLGFBQWF2Z0IsR0FBRyxRQUFRLENBQUN5Z0IsRUFBVUMsRUFBVUMsS0FDMUMzeUIsS0FBS3N5QixjQUFnQkcsSUFDckIxeEIsUUFBUUMsSUFBSSxzQ0FBd0MweEIsR0FDcEQxeUIsS0FBSzR5QixxQkFBc0IsRUFDM0I1eUIsS0FBSzZ5QixjQUFjN3lCLEtBQUtpQixLQUFLRSxNQUFNdXhCLElBQ3ZDLElBR0oxeUIsS0FBS3V5QixhQUFhdmdCLEdBQUcsV0FBVyxDQUFDOGdCLEVBQWM3TSxFQUFXME0sS0FDbEQzeUIsS0FBS3N5QixjQUFnQlEsSUFDckIveEIsUUFBUUMsSUFBSSx3Q0FBMEM4eEIsR0FDdEQ5eUIsS0FBS3N5QixZQUFjUSxFQUNuQjl5QixLQUFLNHlCLHFCQUFzQixFQUMzQjV5QixLQUFLK3lCLGNBQWMveUIsS0FBS2lCLEtBQUtFLE1BQU0yeEIsR0FBZUEsR0FDdEQsSUFHSjl5QixLQUFLZ3pCLHdCQUNMaHpCLEtBQUtpekIsd0JBQ1QsQ0FFQSxzQkFBQUEsR0FDSWpvQixTQUFTOEUsaUJBQWlCLG9CQUFvQixLQUNULFlBQTdCOUUsU0FBU2tvQixnQkFDVGx6QixLQUFLK3lCLGNBQWMveUIsS0FBS2lCLEtBQUtFLE1BQU1uQixLQUFLc3lCLGFBQWN0eUIsS0FBS3N5QixhQUUzRHR5QixLQUFLNnlCLGNBQWM3eUIsS0FBS2lCLEtBQUtFLE1BQU1uQixLQUFLc3lCLGFBQzVDLEdBRVIsQ0FFQSxhQUFBTyxDQUFjM3dCLEdBRVYsSUFBSyxJQUFJSCxFQUFJLEVBQUdBLEVBQUlHLEVBQUtDLGVBQWVILE9BQVFELElBQUssQ0FDakQsSUFBSW94QixFQUFnQmp4QixFQUFLQyxlQUFlSixHQUN4QyxHQUEyQixVQUF2Qm94QixFQUFjOXZCLEtBQWtCLENBQ2hDLElBQUlOLEVBQTZCb3dCLEVBQzdCQyxFQUFrQnBvQixTQUFTcW9CLGVBQWV0d0IsRUFBYWMsT0FDM0R1dkIsRUFBZ0JuZ0IsUUFDaEJtZ0IsRUFBZ0JFLFlBQWMsRUFDOUJDLGNBQWN2ekIsS0FBS3d6QiwrQkFDbkIsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUkxd0IsRUFBYWdCLGdCQUFnQkMsV0FBV2hDLE9BQVF5eEIsSUFBSyxDQUNyRSxJQUFJQyxFQUFjMW9CLFNBQVNxb0IsZUFBZXR3QixFQUFhYyxNQUFRLFNBQVc0dkIsR0FDMUVDLEVBQVkvcUIsVUFBVW9ELE9BQU8sNEJBQzdCMm5CLEVBQVl4b0IsTUFBTXlvQixNQUFRLE9BQzlCLENBQ0osQ0FDSixDQUNKLENBRUEsYUFBQVosQ0FBYzd3QixFQUFZMHhCLEdBRXRCN3lCLFFBQVFDLElBQUksc0NBQXdDNHlCLEdBQ3BEN3lCLFFBQVFDLElBQUksYUFBZWhCLEtBQUtpQixLQUFLRSxNQUFNYSxPQUFTLFVBQ3BEakIsUUFBUUMsSUFBSSxnQkFBa0JrQixFQUFLQyxlQUFlSCxPQUFTLG9CQUUzRCxJQUFLLElBQUlELEVBQUksRUFBR0EsRUFBSUcsRUFBS0MsZUFBZUgsT0FBUUQsSUFBSyxDQUNqRCxJQUFJb3hCLEVBQWdCanhCLEVBQUtDLGVBQWVKLEdBQ3hDLEdBQTJCLFVBQXZCb3hCLEVBQWM5dkIsS0FBa0IsQ0FDaEMsSUFBSU4sRUFBNkJvd0IsRUFDakNweUIsUUFBUUMsSUFBSSxzREFBd0QrQixFQUFhMkIsVUFDakYzRCxRQUFRQyxJQUFJLGlEQUErRVMsSUFBakNzQixFQUFhZ0IsZ0JBQWdDLE1BQVEsT0FDL0doRCxRQUFRQyxJQUFJLHdCQUEwQitCLEVBQWFjLE9BRW5ELElBQUl1dkIsRUFBa0Jwb0IsU0FBU3FvQixlQUFldHdCLEVBQWFjLE9BQzNEOUMsUUFBUUMsSUFBSSw0Q0FBOENveUIsUUFBNEQsTUFBUSxPQUU5SEEsRUFBZ0IxSyxPQUNoQjFvQixLQUFLbXlCLDZCQUErQmlCLEVBRXBDLElBQUlTLEVBQWdCLEVBQ2hCZixFQUFlLEVBRW5CL3hCLFFBQVFDLElBQUksOEVBRVpoQixLQUFLd3pCLDhCQUFnQ00sYUFBWSxLQUN6QyxRQUFxQ3J5QixJQUFqQ3NCLEVBQWFnQixnQkFBK0IsQ0FDaEQsSUFBSXV2QixFQUFjRixFQUFnQkUsWUFDbEMsSUFBSyxJQUFJRyxFQUFJLEVBQUdBLEVBQUkxd0IsRUFBYWdCLGdCQUFnQkMsV0FBV2hDLE9BQVF5eEIsSUFBSyxDQUNyRSxHQUFJSCxHQUFldndCLEVBQWFnQixnQkFBZ0JDLFdBQVd5dkIsR0FBR2p2QixnQkFBa0I4dUIsR0FBZXZ3QixFQUFhZ0IsZ0JBQWdCQyxXQUFXeXZCLEdBQUdodkIsYUFBYyxDQUNwSnF1QixFQUFlVyxFQUNmLElBQUlDLEVBQWMxb0IsU0FBU3FvQixlQUFldHdCLEVBQWFjLE1BQVEsU0FBV2l2QixHQUMxRTl5QixLQUFLcXlCLG9CQUFzQnFCLEVBQzNCQSxFQUFZL3FCLFVBQVVGLElBQUksNEJBQzFCaXJCLEVBQVl4b0IsTUFBTXlvQixNQUFRNXdCLEVBQWE0QixVQUN2QzNFLEtBQUsrekIsbUNBQW1DSCxFQUFXZCxFQUN2RCxDQUVBLEdBQUllLEVBQWdCZixFQUFjLENBRTlCLElBQUlZLEVBQWMxb0IsU0FBU3FvQixlQUFldHdCLEVBQWFjLE1BQVEsU0FBV2d3QixHQUMxRUgsRUFBWS9xQixVQUFVb0QsT0FBTyw0QkFDN0IybkIsRUFBWXhvQixNQUFNeW9CLE1BQVEsUUFDMUJFLEVBQWdCZixDQUNwQixDQUNKLENBQ0EsR0FBSVEsR0FBZXZ3QixFQUFhZ0IsZ0JBQWdCQyxXQUFXakIsRUFBYWdCLGdCQUFnQkMsV0FBV2hDLE9BQVMsR0FBR3lDLGFBQWUsR0FBSyxDQUUvSCxJQUFJaXZCLEVBQWMxb0IsU0FBU3FvQixlQUFldHdCLEVBQWFjLE1BQVEsU0FBV2l2QixHQUMxRVksRUFBWS9xQixVQUFVb0QsT0FBTyw0QkFDN0IybkIsRUFBWXhvQixNQUFNeW9CLE1BQVEsUUFDMUIzekIsS0FBS215Qiw2QkFBK0IsS0FDcENvQixjQUFjdnpCLEtBQUt3ekIsOEJBQ3ZCLENBQ0osSUFDRCxHQUNQLENBQ0osQ0FDSixDQUVBLHFCQUFBUixHQUNJN3lCLE9BQU8yUCxpQkFBaUIsVUFBVSxLQUM5QjlQLEtBQUt1eUIsYUFBYS9pQixRQUFRaVMsWUFBY3RoQixPQUFPcXlCLFlBQWMsR0FDN0R4eUIsS0FBS3V5QixhQUFhblksU0FBUyxHQUVuQyxDQUVBLGNBQUE0WixDQUFlL3lCLEdBQ1hqQixLQUFLaUIsS0FBT0EsRUFDWmpCLEtBQUtpMEIsZ0JBQWtCaHpCLEVBQUtHLFNBQzVCcEIsS0FBS2swQixjQUFnQmp6QixFQUFLRSxNQUFNYSxPQUU1QmhDLEtBQUtpMEIsa0JBQW9CcjBCLEVBQVM4QixjQUNsQzFCLEtBQUttMEIsNEJBQTRCbHpCLEdBQzFCakIsS0FBS2kwQixrQkFBb0JyMEIsRUFBUytCLEtBQ3pDM0IsS0FBS28wQixrQkFBa0JuekIsRUFFL0IsQ0FFQSwyQkFBQWt6QixDQUE0Qmx6QixHQUN4QmpCLEtBQUtrMEIsY0FBZ0JqekIsRUFBS0UsTUFBTWEsT0FFaEMsSUFBSyxJQUFJRCxFQUFJLEVBQUdBLEVBQUlkLEVBQUtFLE1BQU1hLE9BQVFELElBQUssQ0FDeEMsTUFBTXN5QixFQUFVcnBCLFNBQVNDLGNBQWMsTUFDakMrTCxFQUFRaE0sU0FBU0MsY0FBYyxPQUVyQ29wQixFQUFRbnBCLE1BQU1HLFFBQVUsT0FDeEJncEIsRUFBUW5wQixNQUFNb3BCLGVBQWlCLFNBQy9CRCxFQUFRbnBCLE1BQU1xcEIsV0FBYSxTQUUzQnZkLEVBQU05TCxNQUFNNlksU0FBVyxXQUN2Qi9NLEVBQU05TCxNQUFNMUgsTUFBUSxNQUNwQndULEVBQU05TCxNQUFNekgsT0FBUyxNQUNyQnVULEVBQU05TCxNQUFNc3BCLElBQU0sTUFFbEJILEVBQVFwckIsWUFBWStOLEdBRXBCcWQsRUFBUTFyQixVQUFVRixJQUFJLGlCQUV0QixJQUFJZ3NCLEdBQTZCLEVBTWpDLElBQUssSUFBSWhCLEVBQUksRUFBR0EsRUFBSXh5QixFQUFLRSxNQUFNWSxHQUFHSSxlQUFlSCxPQUFReXhCLElBQUssQ0FDMUQsSUFBSU4sRUFBZ0JseUIsRUFBS0UsTUFBTVksR0FBR0ksZUFBZXN4QixHQUNqRCxHQUEwQixTQUF0Qk4sRUFBYzl2QixLQUFpQixDQUMvQixJQUFJUixFQUE2QnN3QixFQUM3QlMsRUFBWTd4QixFQUNoQmlWLEVBQU0vTixZQUFZakosS0FBSzAwQixxQkFBcUJkLEVBQVcvd0IsRUFBYzR3QixHQUN6RSxNQUFPLEdBQTBCLFNBQXRCTixFQUFjOXZCLEtBQWlCLENBQ3RDb3hCLEdBQTZCLEVBQzdCLElBQUkxeEIsRUFBNkJvd0IsRUFFN0J4d0IsRUFBMkIsS0FFL0IsSUFBSyxJQUFJOHdCLEVBQUksRUFBR0EsRUFBSXh5QixFQUFLRSxNQUFNWSxHQUFHSSxlQUFlSCxPQUFReXhCLElBQUssQ0FDMUQsSUFBSU4sRUFBZ0JseUIsRUFBS0UsTUFBTVksR0FBR0ksZUFBZXN4QixHQUNqRCxHQUEwQixRQUF0Qk4sRUFBYzl2QixLQUFnQixDQUM5QlYsRUFBY3d3QixFQUNkLEtBQ0osQ0FDSixDQUVBLElBQUl0d0IsRUFBNkIsS0FFakMsSUFBSyxJQUFJNHdCLEVBQUksRUFBR0EsRUFBSXh5QixFQUFLRSxNQUFNWSxHQUFHSSxlQUFlSCxPQUFReXhCLElBQUssQ0FDMUQsSUFBSU4sRUFBZ0JseUIsRUFBS0UsTUFBTVksR0FBR0ksZUFBZXN4QixHQUNqRCxHQUEwQixTQUF0Qk4sRUFBYzl2QixLQUFpQixDQUMvQlIsRUFBZXN3QixFQUNmLEtBQ0osQ0FDSixDQUVBLEdBQUl4d0IsRUFBYSxDQUNiLElBQUlneUIsRUFBbUIzMEIsS0FBSzQwQiw2QkFBNkI3eUIsRUFBR2dCLEVBQWNKLEVBQWFFLEdBQ3ZGbVUsRUFBTS9OLFlBQVkwckIsRUFBaUIsSUFDbkMzZCxFQUFNL04sWUFBWTByQixFQUFpQixHQUN2QyxNQUNJM2QsRUFBTS9OLFlBQVlqSixLQUFLNjBCLHFCQUFxQjl4QixHQUVwRCxDQUVBL0MsS0FBS3V5QixhQUFhOXBCLElBQUk0ckIsRUFDMUIsQ0FJQSxJQUFLSSxFQUNELElBQUssSUFBSWhCLEVBQUksRUFBR0EsRUFBSXh5QixFQUFLRSxNQUFNWSxHQUFHSSxlQUFlSCxPQUFReXhCLElBQUssQ0FDMUQsSUFBSU4sRUFBZ0JseUIsRUFBS0UsTUFBTVksR0FBR0ksZUFBZXN4QixHQUNqRCxHQUEwQixRQUF0Qk4sRUFBYzl2QixLQUFnQixDQUM5QixJQUFJVixFQUEyQnd3QixFQUUvQm5jLEVBQU0vTixZQUFZakosS0FBSzgwQixvQkFBb0JueUIsR0FDL0MsQ0FDSixDQUVSLENBQ0osQ0FFQSxtQkFBQW15QixDQUFvQm55QixHQUNoQixJQUFJb3lCLEVBQWlCL3BCLFNBQVNDLGNBQWMsT0FrQjVDLE9BaEJBOHBCLEVBQWVyaUIsR0FBSyxVQUNwQnFpQixFQUFlcHNCLFVBQVVGLElBQUksV0FDN0Jzc0IsRUFBZTdwQixNQUFNNlksU0FBVyxXQUNoQ2dSLEVBQWU3cEIsTUFBTThwQixpQkFBbUIsY0FDeENELEVBQWU3cEIsTUFBTXlvQixNQUFRLFVBQzdCb0IsRUFBZTdwQixNQUFNK3BCLFdBQWEsZ0NBQ2xDRixFQUFlN3BCLE1BQU1ncUIsV0FBYSxZQUNsQ0gsRUFBZTdwQixNQUFNaXFCLFdBQWEsTUFDbENKLEVBQWU3cEIsTUFBTWtxQixTQUFXLFVBQ2hDTCxFQUFlN3BCLE1BQU1zcEIsSUFBTTd4QixFQUFZWSxVQUFZLElBQ25Ed3hCLEVBQWU3cEIsTUFBTThJLEtBQU9yUixFQUFZVyxVQUFZLElBQ3BEeXhCLEVBQWU3cEIsTUFBTTFILE1BQVFiLEVBQVlhLE1BQVEsSUFDakR1eEIsRUFBZTdwQixNQUFNekgsT0FBU2QsRUFBWWMsT0FBUyxJQUVuRHN4QixFQUFlTSxVQUFZMXlCLEVBQVllLGtCQUFrQmEsUUFBUSxvQkFBcUIsSUFFL0V3d0IsQ0FDWCxDQUVBLG9CQUFBTCxDQUFxQmQsRUFBbUIvd0IsRUFBNEJ5eUIsR0FDaEUsSUFBSUMsRUFBa0J2cUIsU0FBU0MsY0FBYyxPQVE3QyxHQU5Bc3FCLEVBQWdCcnFCLE1BQU02WSxTQUFXLFdBQ2pDd1IsRUFBZ0JycUIsTUFBTXNwQixJQUFNM3hCLEVBQWFVLFVBQVksSUFDckRneUIsRUFBZ0JycUIsTUFBTThJLEtBQU9uUixFQUFhUyxVQUFZLElBQ3REaXlCLEVBQWdCcnFCLE1BQU0xSCxNQUFRWCxFQUFhVyxNQUFRLElBQ25EK3hCLEVBQWdCcnFCLE1BQU16SCxPQUFTWixFQUFhWSxPQUFTLElBRWpEWixFQUFhaUIsY0FBZ0I5RCxLQUFLTyxrQkFLbEMsR0FKQWcxQixFQUFnQjVzQixVQUFVRixJQUFJLDRCQUlIaEgsSUFBdkJvQixFQUFhZ0IsT0FBOEMsT0FBdkJoQixFQUFhZ0IsT0FBeUMsS0FBdkJoQixFQUFhZ0IsTUFBYyxDQUM5RixNQUFNNk8sRUFBSyxNQUFRa2hCLEVBQVksSUFBTTBCLEVBQ3JDQyxFQUFnQjdpQixHQUFLQSxFQUNyQjZpQixFQUFnQnpsQixpQkFBaUIsU0FBUyxLQUd0QzlQLEtBQUt3MUIsK0JBQStCNUIsRUFBV2xoQixFQUFHLEdBRTFELE1BQ0k2aUIsRUFBZ0I1c0IsVUFBVUYsSUFBSTVGLEVBQWFnQixPQUMzQzB4QixFQUFnQnpsQixpQkFBaUIsU0FBUyxLQUN0QzlQLEtBQUt5MUIscUJBQXFCN0IsRUFBVy93QixFQUFhZ0IsTUFBTWdGLE1BQU0sS0FBSyxHQUFHLFFBRzNFLENBQ0gwc0IsRUFBZ0I3aUIsR0FBSzdQLEVBQWFnQixNQUNsQzB4QixFQUFnQjVzQixVQUFVRixJQUFJLFlBRTlCLElBQUlpdEIsRUFBa0IxcUIsU0FBU0MsY0FBYyxPQUM3Q3lxQixFQUFnQnZNLElBQ1pucEIsS0FBS2l5QixXQUFhcHZCLEVBQWFpQixZQUFZUyxRQUFRLFVBQVcsSUFDbEVteEIsRUFBZ0J4cUIsTUFBTTFILE1BQVEsT0FDOUJreUIsRUFBZ0J4cUIsTUFBTXpILE9BQVMsT0FDL0I4eEIsRUFBZ0J0c0IsWUFBWXlzQixFQUNoQyxDQUVBLE9BQU9ILENBQ1gsQ0FFQSxvQkFBQVYsQ0FBcUI5eEIsR0FDakIsSUFBSTR5QixFQUFrQjNxQixTQUFTQyxjQUFjLE9BRTdDMHFCLEVBQWdCaHRCLFVBQVVGLElBQUksWUFDOUJrdEIsRUFBZ0J6cUIsTUFBTTZZLFNBQVcsV0FFakMsSUFBSTZSLEVBQVk1cUIsU0FBU0MsY0FBYyxTQU12QyxHQUxBMnFCLEVBQVVsakIsR0FBSzNQLEVBQWFjLE1BQzVCK3hCLEVBQVV6TSxJQUFNbnBCLEtBQUtreUIsVUFBWW52QixFQUFhMkIsU0FBU0gsUUFBUSxVQUFXLElBQzFFcXhCLEVBQVUxWCxVQUFXLEVBQ3JCeVgsRUFBZ0Ixc0IsWUFBWTJzQixRQUVTbjBCLElBQWpDc0IsRUFBYWdCLGdCQUNiLElBQUssSUFBSWhDLEVBQUksRUFBR0EsRUFBSWdCLEVBQWFnQixnQkFBZ0JDLFdBQVdoQyxPQUFRRCxJQUFLLENBQ3JFLElBQUk4ekIsRUFBNkM5eUIsRUFBYWdCLGdCQUFnQkMsV0FBV2pDLEdBQ3JGK3pCLEVBQW1COXFCLFNBQVNDLGNBQWMsU0FDOUM2cUIsRUFBaUJwakIsR0FBS21qQixFQUFxQmh5QixNQUMzQ2l5QixFQUFpQjNNLElBQU1ucEIsS0FBS2t5QixVQUFZMkQsRUFBcUJueEIsU0FBU0gsUUFBUSxVQUFXLElBQ3pGdXhCLEVBQWlCNVgsVUFBVyxFQUM1QnlYLEVBQWdCMXNCLFlBQVk2c0IsRUFDaEMsQ0FHSixPQUFPSCxDQUNYLENBRUEsNEJBQUFmLENBQTZCaEIsRUFBbUI3d0IsRUFBNEJKLEVBQTBCRSxHQUNsRyxJQUFJa3pCLEVBQXNDenZCLFFBRXRDcXZCLEVBQWtCM3FCLFNBQVNDLGNBQWMsT0FFN0MwcUIsRUFBZ0JodEIsVUFBVUYsSUFBSSxZQUM5Qmt0QixFQUFnQnpxQixNQUFNNlksU0FBVyxXQUVqQyxJQUFJNlIsRUFBWTVxQixTQUFTQyxjQUFjLFNBQ3ZDMnFCLEVBQVVsakIsR0FBSzNQLEVBQWFjLE1BQzVCK3hCLEVBQVV6TSxJQUFNbnBCLEtBQUtreUIsVUFBWW52QixFQUFhMkIsU0FBU0gsUUFBUSxVQUFXLElBQzFFcXhCLEVBQVUxWCxVQUFXLEVBQ3JCeVgsRUFBZ0Ixc0IsWUFBWTJzQixHQUU1QixJQUFJSSxFQUFpQzF2QixRQUVyQyxRQUFxQzdFLElBQWpDc0IsRUFBYWdCLGdCQUNiLElBQUssSUFBSWhDLEVBQUksRUFBR0EsRUFBSWdCLEVBQWFnQixnQkFBZ0JDLFdBQVdoQyxPQUFRRCxJQUFLLENBQ3JFLElBQUk4ekIsRUFBNkM5eUIsRUFBYWdCLGdCQUFnQkMsV0FBV2pDLEdBQ3JGK3pCLEVBQW1COXFCLFNBQVNDLGNBQWMsU0FDOUM2cUIsRUFBaUJwakIsR0FBS21qQixFQUFxQmh5QixNQUMzQ2l5QixFQUFpQjNNLElBQU1ucEIsS0FBS2t5QixVQUFZMkQsRUFBcUJueEIsU0FBU0gsUUFBUSxVQUFXLElBQ3pGdXhCLEVBQWlCNVgsVUFBVyxFQUM1QjhYLEVBQXFCMXpCLEtBQUt1ekIsRUFBcUJ2eEIsS0FBS3lnQixRQUNwRDRRLEVBQWdCMXNCLFlBQVk2c0IsRUFDaEMsQ0FHSkMsRUFBa0J6ekIsS0FBS3F6QixHQUV2QixJQUFJTSxFQUFvQmx6QixFQUFhYyxNQUVqQ2t4QixFQUFpQi9wQixTQUFTQyxjQUFjLE9BRTVDOHBCLEVBQWVyaUIsR0FBSyxVQUNwQnFpQixFQUFlcHNCLFVBQVVGLElBQUksV0FDN0Jzc0IsRUFBZTdwQixNQUFNNlksU0FBVyxXQUNoQ2dSLEVBQWU3cEIsTUFBTUcsUUFBVSxPQUMvQjBwQixFQUFlN3BCLE1BQU1vcEIsZUFBaUIsU0FDdENTLEVBQWU3cEIsTUFBTXFwQixXQUFhLFNBQ2xDUSxFQUFlN3BCLE1BQU04cEIsaUJBQW1CLGNBQ3hDRCxFQUFlN3BCLE1BQU15b0IsTUFBUSxVQUM3Qm9CLEVBQWU3cEIsTUFBTStwQixXQUFhLGdDQUNsQ0YsRUFBZTdwQixNQUFNZ3FCLFdBQWEsWUFDbENILEVBQWU3cEIsTUFBTWlxQixXQUFhLE1BRWxDSixFQUFlN3BCLE1BQU1zcEIsSUFBTTd4QixFQUFZWSxVQUFZLElBRW5Ed3hCLEVBQWU3cEIsTUFBTXpILE9BQVNkLEVBQVljLE9BQVMsSUFFL0NaLEVBQWFTLFVBQVksSUFBTVgsRUFBWWEsTUFBUSxJQUFNYixFQUFZWSxVQUFZLElBR2pGd3hCLEVBQWU3cEIsTUFBTThJLEtBQU9yUixFQUFZVyxVQUFZLElBQ3BEeXhCLEVBQWU3cEIsTUFBTTFILE1BQVEsT0FDdEJYLEVBQWFTLFdBQWEsSUFBTVgsRUFBWWEsTUFBUSxJQUUzRHV4QixFQUFlN3BCLE1BQU04SSxLQUFPclIsRUFBWVcsVUFBWSxFQUFJLElBQ3hEeXhCLEVBQWU3cEIsTUFBTTFILE1BQVFiLEVBQVlhLE1BQVEsS0FFakR1eEIsRUFBZTdwQixNQUFNMUgsTUFBUSxPQUdqQyxJQUFJMHlCLEVBQTBDbHJCLFNBQVNDLGNBQWMsVUFDaEN4SixJQUFqQ3NCLEVBQWFnQixpQkFBaUNoQixFQUFhZ0IsZ0JBQWdCQyxXQUFXaEMsT0FBUyxHQUMvRmswQixFQUFrQnZ0QixVQUFVRixJQUFJLDJCQUNRaEgsSUFBakNzQixFQUFhZ0IsaUJBQWlDaEIsRUFBYWdCLGdCQUFnQkMsV0FBV2hDLE9BQVMsSUFDdEdlLEVBQWFnQixnQkFBZ0JDLFdBQVdoQyxRQUFVLElBQ2xEazBCLEVBQWtCdnRCLFVBQVVGLElBQUksb0JBRXBDeXRCLEVBQWtCaHJCLE1BQU1pckIsVUFBWSxTQUdwQ0QsRUFBa0JockIsTUFBTWtyQixPQUFTLE1BRWpDLElBQUssSUFBSXIwQixFQUFJLEVBQUdBLEVBQUlpMEIsRUFBcUJoMEIsT0FBUUQsSUFBSyxDQUNsRCxJQUFJczBCLEVBQXdDcnJCLFNBQVNDLGNBQWMsT0FDbkVvckIsRUFBcUIzakIsR0FBS3VqQixFQUFvQixTQUFXbDBCLEVBQ3pEczBCLEVBQXFCMXRCLFVBQVVGLElBQUkscUJBQ25DNHRCLEVBQXFCbnJCLE1BQU1vckIsV0FBYSxPQUN4Q0QsRUFBcUJuckIsTUFBTXFyQixZQUFjLE9BRXpDRixFQUFxQkcsVUFBWVIsRUFBcUJqMEIsR0FDdERzMEIsRUFBcUJ2bUIsaUJBQWlCLFNBQVUybUIsSUFDNUN6MkIsS0FBSzAyQiwyQkFBMkI5QyxFQUFXN3hCLEVBQUUsSUFFakRtMEIsRUFBa0JqdEIsWUFBWW90QixFQUNsQyxDQU1BLE9BSkF0QixFQUFlOXJCLFlBQVlpdEIsR0FFM0JILEVBQWtCenpCLEtBQUt5eUIsR0FFaEJnQixDQUNYLENBRUEsOEJBQUFQLENBQStCNUIsRUFBbUJsaEIsR0FDOUMsR0FBMEMsT0FBdEMxUyxLQUFLbXlCLCtCQUNMbnlCLEtBQUtteUIsNkJBQTZCbGYsUUFDbENqVCxLQUFLbXlCLDZCQUE2Qm1CLFlBQWMsRUFDaERDLGNBQWN2ekIsS0FBS3d6QiwrQkFDbkJtRCxhQUFhMzJCLEtBQUs0MkIsMkJBQ2xCRCxhQUFhMzJCLEtBQUs2MkIseUJBRWQ3MkIsS0FBS295QiwwQkFBMEJwd0IsT0FBUyxHQUN4QyxJQUFLLElBQUlELEVBQUksRUFBR0EsRUFBSS9CLEtBQUtveUIsMEJBQTBCcHdCLE9BQVFELElBQ3ZEL0IsS0FBS295QiwwQkFBMEJyd0IsR0FBR21KLE1BQU00ckIsVUFBWSxnQ0FLaEU5MkIsS0FBS295QiwwQkFBNEI5ckIsUUFFakMsSUFBSXl3QixFQUFVL3JCLFNBQVNxb0IsZUFBZTNnQixHQUV0QzFTLEtBQUtveUIsMEJBQTBCOXZCLEtBQUt5MEIsR0FDcENBLEVBQVE3ckIsTUFBTTRyQixVQUFZLDJCQUUxQjkyQixLQUFLNjJCLHdCQUEwQjl2QixZQUFXLEtBQ3hCaUUsU0FBU3FvQixlQUFlM2dCLEdBQzlCeEgsTUFBTTRyQixVQUFZLCtCQUErQixHQUMxRCxJQUNQLENBRUEsb0JBQUFyQixDQUFxQjdCLEVBQW1Cb0QsR0FFcEMsSUFBSUMsRUFBa0JDLFNBQVNGLEdBQy9CaDNCLEtBQUswMkIsMkJBQTJCOUMsRUFBV3FELEVBQy9DLENBRUEsa0NBQUFsRCxDQUFtQ0gsRUFBbUJvRCxHQUNsRGgzQixLQUFLMDJCLDJCQUEyQjlDLEVBQVdvRCxHQUFXLEVBQzFELENBRUEsMEJBQUFOLENBQTJCOUMsRUFBbUJvRCxFQUFtQkcsR0FBeUIsR0FDdEYsR0FBMEMsT0FBdENuM0IsS0FBS215QiwrQkFBMENnRixJQUMvQ24zQixLQUFLbXlCLDZCQUE2QmxmLFFBQ2xDalQsS0FBS215Qiw2QkFBNkJtQixZQUFjLEVBQ2hEQyxjQUFjdnpCLEtBQUt3ekIsK0JBQ25CbUQsYUFBYTMyQixLQUFLNDJCLDJCQUNsQkQsYUFBYTMyQixLQUFLNjJCLHlCQUNlLE9BQTdCNzJCLEtBQUtxeUIsc0JBQ0xyeUIsS0FBS3F5QixvQkFBb0IxcEIsVUFBVW9ELE9BQU8sNEJBQzFDL0wsS0FBS3F5QixvQkFBb0JubkIsTUFBTXlvQixNQUFRLFNBRXZDM3pCLEtBQUtveUIsMEJBQTBCcHdCLE9BQVMsR0FDeEMsSUFBSyxJQUFJRCxFQUFJLEVBQUdBLEVBQUkvQixLQUFLb3lCLDBCQUEwQnB3QixPQUFRRCxJQUN2RC9CLEtBQUtveUIsMEJBQTBCcndCLEdBQUdtSixNQUFNNHJCLFVBQVksZ0NBSWhFOTJCLEtBQUtveUIsMEJBQTRCOXJCLFFBQ2pDLElBQUlwRSxFQUFPbEMsS0FBS2lCLEtBQUtFLE1BQU15eUIsR0FDM0IsSUFBSyxJQUFJN3hCLEVBQUksRUFBR0EsRUFBSUcsRUFBS0MsZUFBZUgsT0FBUUQsSUFBSyxDQUNqRCxJQUFJb3hCLEVBQWdCanhCLEVBQUtDLGVBQWVKLEdBQ3hDLEdBQTJCLFVBQXZCb3hCLEVBQWM5dkIsS0FBa0IsQ0FDaEMsSUFBSU4sRUFBNkJvd0IsRUFFN0IyQyxFQUFtQjlxQixTQUFTcW9CLGVBQWV0d0IsRUFBYWdCLGdCQUFnQkMsV0FBV2d6QixHQUFXbnpCLE9BRWxHLElBQUtzekIsRUFBZSxDQUVoQixJQUFJekQsRUFBYzFvQixTQUFTcW9CLGVBQWV0d0IsRUFBYWMsTUFBUSxTQUFXbXpCLEdBQzFFaDNCLEtBQUtxeUIsb0JBQXNCcUIsRUFDM0JBLEVBQVkvcUIsVUFBVUYsSUFBSSw0QkFDMUJpckIsRUFBWXhvQixNQUFNeW9CLE1BQVE1d0IsRUFBYTRCLFVBRXZDM0UsS0FBSzQyQiwwQkFBNEI3dkIsWUFBVyxLQUN4QzJzQixFQUFZL3FCLFVBQVVvRCxPQUFPLDRCQUM3QjJuQixFQUFZeG9CLE1BQU15b0IsTUFBUSxPQUFPLEdBQ2xDLElBQ1AsQ0FHQSxJQUFJeUQsRUFBMEIsTUFBUXIwQixFQUFhYyxNQUFRLElBQU1tekIsRUFDN0RLLEVBQXNCcnNCLFNBQVNzc0IsdUJBQXVCRixHQUMxRCxJQUFLLElBQUlyMUIsRUFBSSxFQUFHQSxFQUFJczFCLEVBQW9CcjFCLE9BQVFELElBQUssQ0FDakQsSUFBSWcxQixFQUFVTSxFQUFvQnQxQixHQUNsQy9CLEtBQUtveUIsMEJBQTBCOXZCLEtBQUt5MEIsR0FDcENBLEVBQVE3ckIsTUFBTTRyQixVQUFZL3pCLEVBQWE0QixVQUFZLG9CQUN2RCxDQUVBM0UsS0FBSzYyQix3QkFBMEI5dkIsWUFBVyxLQUN0QyxJQUFLLElBQUloRixFQUFJLEVBQUdBLEVBQUlzMUIsRUFBb0JyMUIsT0FBUUQsSUFDOUJzMUIsRUFBb0J0MUIsR0FDMUJtSixNQUFNNHJCLFVBQVksK0JBQzlCLEdBQ0QsS0FFRUssSUFDRG4zQixLQUFLbXlCLDZCQUErQjJELEVBQ3BDQSxFQUFpQnBOLE9BRXpCLENBQ0osQ0FDSixDQUVBLGlCQUFBMEwsQ0FBa0JuekIsR0FDZCxJQUFLLElBQUljLEVBQUksRUFBR0EsRUFBSWQsRUFBS0UsTUFBTWEsT0FBUUQsSUFBSyxDQUN4QyxNQUFNaVYsRUFBUWhNLFNBQVNDLGNBQWMsTUFDckMrTCxFQUFNck8sVUFBVUYsSUFBSSxpQkFHcEIsSUFBSTh1QixFQUFnQnZzQixTQUFTQyxjQUFjLE9BQzNDc3NCLEVBQWM1dUIsVUFBVUYsSUFBSSxzQkFDNUI4dUIsRUFBY3JzQixNQUFNRyxRQUFVLE9BQzlCa3NCLEVBQWNyc0IsTUFBTXNzQixjQUFnQixTQUNwQ0QsRUFBY3JzQixNQUFNb3BCLGVBQWlCLFNBQ3JDaUQsRUFBY3JzQixNQUFNcXBCLFdBQWEsU0FDakNnRCxFQUFjcnNCLE1BQU16SCxPQUFTLE9BQzdCOHpCLEVBQWNyc0IsTUFBTTFILE1BQVEsT0FDNUJ3VCxFQUFNL04sWUFBWXN1QixHQUdsQixJQUFLLElBQUk5RCxFQUFJLEVBQUdBLEVBQUl4eUIsRUFBS0UsTUFBTVksR0FBR0ksZUFBZUgsT0FBUXl4QixJQUFLLENBQzFELElBQUlOLEVBQWdCbHlCLEVBQUtFLE1BQU1ZLEdBQUdJLGVBQWVzeEIsR0FDakQsR0FBMEIsUUFBdEJOLEVBQWM5dkIsS0FBZ0IsQ0FDOUIsSUFBSVYsRUFBMkJ3d0IsRUFDM0I0QixFQUFpQi9wQixTQUFTQyxjQUFjLE9BQzVDOHBCLEVBQWU3cEIsTUFBTTFILE1BQVEsTUFFN0J1eEIsRUFBZXBzQixVQUFVRixJQUFJLFlBQzdCc3NCLEVBQWU3cEIsTUFBTThwQixpQkFBbUIsY0FDeENELEVBQWU3cEIsTUFBTXlvQixNQUFRLFVBQzdCb0IsRUFBZTdwQixNQUFNK3BCLFdBQWEsZ0NBQ2xDRixFQUFlN3BCLE1BQU1ncUIsV0FBYSxZQUNsQ0gsRUFBZTdwQixNQUFNaXFCLFdBQWEsTUFDbENKLEVBQWU3cEIsTUFBTWtxQixTQUFXLFFBQ2hDTCxFQUFlTSxVQUFZMXlCLEVBQVllLGtCQUFrQmEsUUFBUSxTQUFVLFFBQzNFZ3pCLEVBQWN0dUIsWUFBWThyQixFQUM5QixNQUFPLEdBQTBCLFNBQXRCNUIsRUFBYzl2QixLQUFpQixDQUN0QyxJQUFJUixFQUE2QnN3QixFQUU3Qm9DLEVBQWtCdnFCLFNBQVNDLGNBQWMsT0FDN0NzcUIsRUFBZ0I1c0IsVUFBVUYsSUFBSSxhQUU5QixJQUFJaXRCLEVBQWtCMXFCLFNBQVNDLGNBQWMsT0FDN0N5cUIsRUFBZ0J2TSxJQUFNbnBCLEtBQUtpeUIsV0FBYXB2QixFQUFhaUIsWUFBWVMsUUFBUSxVQUFXLElBQ3BGbXhCLEVBQWdCeHFCLE1BQU0xSCxNQUFRLE9BQzlCa3lCLEVBQWdCeHFCLE1BQU16SCxPQUFTLE9BQy9COHhCLEVBQWdCdHNCLFlBQVl5c0IsR0FDNUI2QixFQUFjdHVCLFlBQVlzc0IsRUFDOUIsQ0FDSixDQUVBdjFCLEtBQUt1eUIsYUFBYTlwQixJQUFJdU8sRUFDMUIsQ0FDSixDQUVBLFlBQUF5Z0IsR0FDUXozQixLQUFLNHlCLHNCQUNMNXlCLEtBQUtzeUIsWUFBY3R5QixLQUFLazBCLGVBQ3hCbDBCLEtBQUtzeUIsY0FFVHR5QixLQUFLMDNCLGlCQUFpQjEzQixLQUFLc3lCLGFBQy9CLENBRUEsZ0JBQUFxRixHQUNRMzNCLEtBQUs0eUIsc0JBQ0w1eUIsS0FBS3N5QixZQUFjLEdBQ25CdHlCLEtBQUtzeUIsY0FFVHR5QixLQUFLMDNCLGlCQUFpQjEzQixLQUFLc3lCLGFBQy9CLENBRUEsZ0JBQUFvRixDQUFpQkUsR0FDYjUzQixLQUFLNHlCLHFCQUFzQixDQUMvQixFQzVuQkosSUFBSWhVLEtBQUsseUJBQXlCaVosR0FBRyxDQUFDLE1BQU1oZCxJQUFHLENBQUMsU0FBU0EsR0FBRUEsRUFBRStPLEdBQUcsT0FBTyxJQUFJbnBCLFNBQVEsU0FBVXEzQixHQUFHLElBQUk1M0IsRUFBRSxJQUFJNjNCLGVBQWU3M0IsRUFBRTgzQixNQUFNQyxVQUFVLFNBQVNwZCxHQUFHaWQsRUFBRWpkLEVBQUVwSyxLQUFLLEVBQUVvSyxFQUFFcWQsWUFBWXRPLEVBQUUsQ0FBQzFwQixFQUFFaTRCLE9BQVEsR0FBRSxDQUF1SyxTQUFTTCxHQUFFamQsRUFBRStPLElBQUksTUFBTUEsR0FBR0EsRUFBRS9PLEVBQUU3WSxVQUFVNG5CLEVBQUUvTyxFQUFFN1ksUUFBUSxJQUFJLElBQUk4MUIsRUFBRSxFQUFFNTNCLEVBQUUsSUFBSW9HLE1BQU1zakIsR0FBR2tPLEVBQUVsTyxFQUFFa08sSUFBSTUzQixFQUFFNDNCLEdBQUdqZCxFQUFFaWQsR0FBRyxPQUFPNTNCLENBQUMsQ0FBQyxTQUFTQSxHQUFFMmEsRUFBRStPLEdBQUcsSUFBSTFwQixFQUFFLEdBQUcsb0JBQW9CazRCLFFBQVEsTUFBTXZkLEVBQUV1ZCxPQUFPQyxVQUFVLENBQUMsR0FBRy94QixNQUFNaUIsUUFBUXNULEtBQUszYSxFQUFFLFNBQVMyYSxFQUFFK08sR0FBRyxHQUFHL08sRUFBRSxDQUFDLEdBQUcsaUJBQWlCQSxFQUFFLE9BQU9pZCxHQUFFamQsRUFBRStPLEdBQUcsSUFBSTFwQixFQUFFMEYsT0FBT1csVUFBVWxDLFNBQVNtQyxLQUFLcVUsR0FBRzNVLE1BQU0sR0FBRyxHQUFHLE1BQU0sV0FBV2hHLEdBQUcyYSxFQUFFeGEsY0FBY0gsRUFBRTJhLEVBQUV4YSxZQUFZcUksTUFBTSxRQUFReEksR0FBRyxRQUFRQSxFQUFFb0csTUFBTXdXLEtBQUtqQyxHQUFHLGNBQWMzYSxHQUFHLDJDQUEyQ280QixLQUFLcDRCLEdBQUc0M0IsR0FBRWpkLEVBQUUrTyxRQUFHLENBQU0sQ0FBQyxDQUEzUixDQUE2Ui9PLEtBQUsrTyxHQUFHL08sR0FBRyxpQkFBaUJBLEVBQUU3WSxPQUFPLENBQUM5QixJQUFJMmEsRUFBRTNhLEdBQUcsSUFBSTZCLEVBQUUsRUFBRSxPQUFPLFdBQVcsT0FBT0EsR0FBRzhZLEVBQUU3WSxPQUFPLENBQUNrdUIsTUFBSyxHQUFJLENBQUNBLE1BQUssRUFBR2xvQixNQUFNNlMsRUFBRTlZLEtBQUssQ0FBQyxDQUFDLE1BQU0sSUFBSXcyQixVQUFVLHdJQUF3SSxDQUFDLE9BQU9yNEIsRUFBRTJhLEVBQUV1ZCxPQUFPQyxhQUFhaGhCLEtBQUsxUSxLQUFLekcsRUFBRSxDQUFDLElBQUkwZSxLQUFLLHVCQUF1QmlaLEdBQUcsQ0FBQyxNQUFNaGQsSUFBRyxDQUFDLElBQUk5WSxHQUFFLFdBQVcsSUFBSThZLEVBQUU3YSxLQUFLQSxLQUFLdzRCLFFBQVEsSUFBSS8zQixTQUFRLFNBQVVtcEIsRUFBRWtPLEdBQUdqZCxFQUFFbmEsUUFBUWtwQixFQUFFL08sRUFBRWxhLE9BQU9tM0IsQ0FBRSxHQUFFLEVBQUUsU0FBU1csR0FBRTVkLEVBQUUrTyxHQUFHLElBQUlrTyxFQUFFWSxTQUFTQyxLQUFLLE9BQU8sSUFBSUMsSUFBSS9kLEVBQUVpZCxHQUFHYSxPQUFPLElBQUlDLElBQUloUCxFQUFFa08sR0FBR2EsSUFBSSxDQUFDLElBQUlFLEdBQUUsU0FBU2hlLEVBQUUrTyxHQUFHNXBCLEtBQUtxRCxLQUFLd1gsRUFBRWpWLE9BQU9rekIsT0FBTzk0QixLQUFLNHBCLEVBQUUsRUFBRSxTQUFTbVAsR0FBRWxlLEVBQUUrTyxFQUFFa08sR0FBRyxPQUFPQSxFQUFFbE8sRUFBRUEsRUFBRS9PLEdBQUdBLEdBQUdBLEdBQUdBLEVBQUVoYSxPQUFPZ2EsRUFBRXBhLFFBQVFDLFFBQVFtYSxJQUFJK08sRUFBRS9PLEVBQUVoYSxLQUFLK29CLEdBQUcvTyxFQUFFLENBQUMsU0FBU21lLEtBQUksQ0FBQyxJQUFJQyxHQUFFLENBQUM1MUIsS0FBSyxnQkFBZ0IsU0FBUzYxQixHQUFFcmUsRUFBRStPLEdBQUcsSUFBSUEsRUFBRSxPQUFPL08sR0FBR0EsRUFBRWhhLEtBQUtnYSxFQUFFaGEsS0FBS200QixJQUFHdjRCLFFBQVFDLFNBQVMsQ0FBQyxJQUFJeTRCLEdBQUUsU0FBU3JCLEdBQUcsSUFBSTUzQixFQUFFODRCLEVBQUUsU0FBU0csRUFBRXRlLEVBQUUrTyxHQUFHLElBQUkxcEIsRUFBRTg0QixFQUFFLFlBQU8sSUFBU3BQLElBQUlBLEVBQUUsQ0FBQyxJQUFJMXBCLEVBQUU0M0IsRUFBRXR4QixLQUFLeEcsT0FBT0EsTUFBTW81QixHQUFHLENBQUMsRUFBRWw1QixFQUFFbTVCLEdBQUcsRUFBRW41QixFQUFFbzVCLEdBQUcsSUFBSXYzQixHQUFFN0IsRUFBRXE1QixHQUFHLElBQUl4M0IsR0FBRTdCLEVBQUU4UixHQUFHLElBQUlqUSxHQUFFN0IsRUFBRXM1QixHQUFHLEVBQUV0NUIsRUFBRXU1QixHQUFHLElBQUlDLElBQUl4NUIsRUFBRXk1QixHQUFHLFdBQVcsSUFBSTllLEVBQUUzYSxFQUFFMDVCLEdBQUdoUSxFQUFFL08sRUFBRWdmLFdBQVczNUIsRUFBRW01QixHQUFHLElBQUlaLEdBQUU3TyxFQUFFa1EsVUFBVTU1QixFQUFFNjVCLEdBQUcxMUIsYUFBYTIxQixZQUFZcm5CLE1BQU16UyxFQUFFczVCLEdBQUcsS0FBS3Q1QixFQUFFKzVCLEdBQUdyUSxFQUFFL08sRUFBRWhMLG9CQUFvQixjQUFjM1AsRUFBRXk1QixNQUFNejVCLEVBQUVnNkIsR0FBR3RRLEVBQUUxcEIsRUFBRXU1QixHQUFHaHhCLElBQUltaEIsR0FBRzFwQixFQUFFbzVCLEdBQUc1NEIsUUFBUWtwQixNQUFNMXBCLEVBQUVtNUIsR0FBR3pQLEVBQUU5WixpQkFBaUIsY0FBYzVQLEVBQUVpNkIsR0FBRyxFQUFFajZCLEVBQUVpNkIsR0FBRyxTQUFTdGYsR0FBRyxJQUFJK08sRUFBRTFwQixFQUFFMDVCLEdBQUc5QixFQUFFamQsRUFBRXZWLE9BQU92RCxFQUFFKzFCLEVBQUUzZSxNQUFNc2YsRUFBRVgsSUFBSTUzQixFQUFFKzVCLEdBQUdsQixFQUFFLENBQUNxQixHQUFHdEMsRUFBRXVDLFdBQVc1QixFQUFFNkIsY0FBY3pmLElBQUk0ZCxHQUFHdjRCLEVBQUVxNkIsS0FBS3hCLEVBQUV5QixVQUFTLEdBQUl0NkIsRUFBRXFRLGNBQWMsSUFBSXNvQixHQUFFOTJCLEVBQUVnM0IsSUFBSSxjQUFjaDNCLEVBQUU3QixFQUFFdTZCLEdBQUc3YixLQUFLN1gsWUFBVyxXQUFZLGNBQWNoRixHQUFHNm5CLEVBQUU4USxVQUFVNUMsR0FBRzUzQixFQUFFcVEsY0FBYyxJQUFJc29CLEdBQUUsVUFBVUUsR0FBSSxHQUFFLEtBQUssZUFBZWgzQixJQUFJNDBCLGFBQWF6MkIsRUFBRXU2QixJQUFJaEMsR0FBR3Y0QixFQUFFcTVCLEdBQUc3NEIsUUFBUW8zQixHQUFHLEVBQUU1M0IsRUFBRXk2QixHQUFHLFNBQVM5ZixHQUFHLElBQUkrTyxFQUFFMXBCLEVBQUVnNkIsR0FBR3BDLEVBQUVsTyxJQUFJZ1IsVUFBVUMsY0FBY0MsV0FBVzU2QixFQUFFcVEsY0FBYyxJQUFJc29CLEdBQUUsY0FBYyxDQUFDd0IsV0FBV3ZDLEVBQUV3QyxjQUFjemYsRUFBRXVmLEdBQUd4USxFQUFFNFEsU0FBU3Q2QixFQUFFcTZCLE1BQU16QyxHQUFHNTNCLEVBQUU4UixHQUFHdFIsUUFBUWtwQixFQUFFLEVBQUUxcEIsRUFBRTY2QixJQUFJL0IsRUFBRSxTQUFTbmUsR0FBRyxJQUFJK08sRUFBRS9PLEVBQUVwSyxLQUFLcW5CLEVBQUVqZCxFQUFFbWdCLE1BQU1qNUIsRUFBRThZLEVBQUV6USxPQUFPLE9BQU8ydUIsR0FBRTc0QixFQUFFKzZCLFNBQVEsV0FBWS82QixFQUFFdTVCLEdBQUd5QixJQUFJbjVCLElBQUk3QixFQUFFcVEsY0FBYyxJQUFJc29CLEdBQUUsVUFBVSxDQUFDcG9CLEtBQUttWixFQUFFMFEsY0FBY3pmLEVBQUVtZ0IsTUFBTWxELEVBQUVzQyxHQUFHcjRCLElBQUssR0FBRSxFQUFFLFdBQVcsSUFBSSxJQUFJOFksRUFBRSxHQUFHK08sRUFBRSxFQUFFQSxFQUFFL2lCLFVBQVU3RSxPQUFPNG5CLElBQUkvTyxFQUFFK08sR0FBRy9pQixVQUFVK2lCLEdBQUcsSUFBSSxPQUFPbnBCLFFBQVFDLFFBQVFzNEIsRUFBRXZ5QixNQUFNekcsS0FBSzZhLEdBQUcsQ0FBQyxNQUFNQSxHQUFHLE9BQU9wYSxRQUFRRSxPQUFPa2EsRUFBRSxDQUFDLEdBQUczYSxFQUFFNjVCLEdBQUdsZixFQUFFM2EsRUFBRWs1QixHQUFHeFAsRUFBRWdSLFVBQVVDLGNBQWMvcUIsaUJBQWlCLFVBQVU1UCxFQUFFNjZCLElBQUk3NkIsQ0FBQyxDQUFDODRCLEVBQUVsQixHQUFHNTNCLEVBQUVpNUIsR0FBRzV5QixVQUFVWCxPQUFPa0YsT0FBT2t1QixFQUFFenlCLFdBQVdyRyxFQUFFcUcsVUFBVWxHLFlBQVlILEVBQUVBLEVBQUU4WSxVQUFVZ2dCLEVBQUUsSUFBTW1DLEVBQUlDLEVBQUVqQyxFQUFFNXlCLFVBQVUsT0FBTzYwQixFQUFFNWhCLFNBQVMsU0FBU3FCLEdBQUcsSUFBSStPLFFBQUcsSUFBUy9PLEVBQUUsQ0FBQyxFQUFFQSxHQUFHd2dCLFVBQVV2RCxPQUFFLElBQVNsTyxHQUFHQSxFQUFFLElBQUksSUFBSTFwQixFQUFFRixLQUFLLE9BQU8sU0FBUzZhLEVBQUUrTyxHQUFHLElBQUlrTyxFQUFFamQsSUFBSSxPQUFHaWQsR0FBR0EsRUFBRWozQixLQUFZaTNCLEVBQUVqM0IsS0FBSytvQixHQUFVQSxHQUFJLENBQWpFLEVBQW1FLFdBQVksSUFBSWtPLEdBQUcsYUFBYTlzQixTQUFTc3dCLFdBQVcsT0FBT3BDLEdBQUUsSUFBSXo0QixTQUFRLFNBQVVvYSxHQUFHLE9BQU8xYSxPQUFPMlAsaUJBQWlCLE9BQU8rSyxFQUFHLElBQUksSUFBRSxXQUFZLE9BQU8zYSxFQUFFcTZCLEdBQUdnQixRQUFRWCxVQUFVQyxjQUFjQyxZQUFZNTZCLEVBQUVzN0IsR0FBR3Q3QixFQUFFdTdCLEtBQUsxQyxHQUFFNzRCLEVBQUV3N0IsTUFBSyxTQUFVN2dCLEdBQUczYSxFQUFFMDVCLEdBQUcvZSxFQUFFM2EsRUFBRXM3QixLQUFLdDdCLEVBQUVnNkIsR0FBR2g2QixFQUFFczdCLEdBQUd0N0IsRUFBRXE1QixHQUFHNzRCLFFBQVFSLEVBQUVzN0IsSUFBSXQ3QixFQUFFOFIsR0FBR3RSLFFBQVFSLEVBQUVzN0IsSUFBSXQ3QixFQUFFczdCLEdBQUcxckIsaUJBQWlCLGNBQWM1UCxFQUFFaTZCLEdBQUcsQ0FBQ3dCLE1BQUssS0FBTSxJQUFJL1IsRUFBRTFwQixFQUFFMDVCLEdBQUdjLFFBQVEsT0FBTzlRLEdBQUc2TyxHQUFFN08sRUFBRWtRLFVBQVU1NUIsRUFBRTY1QixHQUFHMTFCLGNBQWNuRSxFQUFFZzZCLEdBQUd0USxFQUFFbnBCLFFBQVFDLFVBQVVHLE1BQUssV0FBWVgsRUFBRXFRLGNBQWMsSUFBSXNvQixHQUFFLFVBQVUsQ0FBQ3VCLEdBQUd4USxFQUFFZ1MsMEJBQXlCLElBQU0sSUFBRy82QixNQUFLLFdBQWEsS0FBSVgsRUFBRWc2QixLQUFLaDZCLEVBQUVvNUIsR0FBRzU0QixRQUFRUixFQUFFZzZCLElBQUloNkIsRUFBRXU1QixHQUFHaHhCLElBQUl2SSxFQUFFZzZCLEtBQUtoNkIsRUFBRTA1QixHQUFHOXBCLGlCQUFpQixjQUFjNVAsRUFBRXk1QixJQUFJaUIsVUFBVUMsY0FBYy9xQixpQkFBaUIsbUJBQW1CNVAsRUFBRXk2QixJQUFJejZCLEVBQUUwNUIsRUFBRyxHQUFHLEdBQUUsQ0FBQyxNQUFNL2UsR0FBRyxPQUFPcGEsUUFBUUUsT0FBT2thLEVBQUUsQ0FBQyxFQUFFdWdCLEVBQUVwb0IsT0FBTyxXQUFXLElBQUksT0FBT2hULEtBQUs0NUIsR0FBR1YsR0FBRWw1QixLQUFLNDVCLEdBQUc1bUIsZUFBVSxDQUFNLENBQUMsTUFBTTZILEdBQUcsT0FBT3BhLFFBQVFFLE9BQU9rYSxFQUFFLENBQUMsRUFBRXVnQixFQUFFSCxNQUFNLFdBQVcsWUFBTyxJQUFTajdCLEtBQUtrNkIsR0FBR3o1QixRQUFRQyxRQUFRVixLQUFLazZCLElBQUlsNkIsS0FBS3M1QixHQUFHZCxPQUFPLEVBQUU0QyxFQUFFUyxVQUFVLFNBQVNqUyxHQUFHLElBQUksT0FBT21QLEdBQUUvNEIsS0FBS2k3QixTQUFRLFNBQVVuRCxHQUFHLE9BQU9qZCxHQUFFaWQsRUFBRWxPLEVBQUcsR0FBRSxDQUFDLE1BQU0vTyxHQUFHLE9BQU9wYSxRQUFRRSxPQUFPa2EsRUFBRSxDQUFDLEVBQUV1Z0IsRUFBRVUsbUJBQW1CLFdBQVc5N0IsS0FBSzQ1QixJQUFJNTVCLEtBQUs0NUIsR0FBR2MsU0FBUzdmLEdBQUU3YSxLQUFLNDVCLEdBQUdjLFFBQVF6QixHQUFFLEVBQUVtQyxFQUFFSyxHQUFHLFdBQVcsSUFBSTVnQixFQUFFK2YsVUFBVUMsY0FBY0MsV0FBVyxPQUFPamdCLEdBQUc0ZCxHQUFFNWQsRUFBRWlmLFVBQVU5NUIsS0FBSys1QixHQUFHMTFCLFlBQVl3VyxPQUFFLENBQU0sRUFBRXVnQixFQUFFTSxHQUFHLFdBQVcsSUFBSSxJQUFJN2dCLEVBQUU3YSxLQUFLLE9BQU8sU0FBUzZhLEVBQUUrTyxHQUFHLElBQUksSUFBSWtPLEVBQUVqZCxHQUFHLENBQUMsTUFBTUEsR0FBRyxPQUFPK08sRUFBRS9PLEVBQUUsQ0FBQyxPQUFHaWQsR0FBR0EsRUFBRWozQixLQUFZaTNCLEVBQUVqM0IsVUFBSyxFQUFPK29CLEdBQVVrTyxDQUFDLENBQTlGLEVBQWdHLFdBQVksT0FBT2lCLEdBQUU2QixVQUFVQyxjQUFjcmhCLFNBQVNxQixFQUFFa2YsR0FBR2xmLEVBQUV1ZSxLQUFJLFNBQVV4UCxHQUFHLE9BQU8vTyxFQUFFMmUsR0FBR1EsWUFBWXJuQixNQUFNaVgsQ0FBRSxHQUFHLElBQUUsU0FBVS9PLEdBQUcsTUFBTUEsQ0FBRSxHQUFFLENBQUMsTUFBTUEsR0FBRyxPQUFPcGEsUUFBUUUsT0FBT2thLEVBQUUsQ0FBQyxHQUFPc2dCLEVBQUUsQ0FBQyxDQUFDcjFCLElBQUksU0FBUytaLElBQUksV0FBVyxPQUFPN2YsS0FBS3U1QixHQUFHZixPQUFPLEdBQUcsQ0FBQzF5QixJQUFJLGNBQWMrWixJQUFJLFdBQVcsT0FBTzdmLEtBQUtnUyxHQUFHd21CLE9BQU8sTUFBcG5KLFNBQVczZCxFQUFFK08sR0FBRyxJQUFJLElBQUlrTyxFQUFFLEVBQUVBLEVBQUVsTyxFQUFFNW5CLE9BQU84MUIsSUFBSSxDQUFDLElBQUk1M0IsRUFBRTBwQixFQUFFa08sR0FBRzUzQixFQUFFdUYsV0FBV3ZGLEVBQUV1RixhQUFZLEVBQUd2RixFQUFFd0YsY0FBYSxFQUFHLFVBQVV4RixJQUFJQSxFQUFFeUYsVUFBUyxHQUFJQyxPQUFPQyxlQUFlZ1YsRUFBRTNhLEVBQUU0RixJQUFJNUYsRUFBRSxDQUFDLENBQXE5STBwQixDQUExSHVQLEVBQThINXlCLFVBQVU0MEIsR0FBYWhDLENBQUMsQ0FBN3RHLENBQSt0RyxXQUFXLFNBQVN0ZSxJQUFJN2EsS0FBSys3QixHQUFHLElBQUlDLEdBQUcsQ0FBQyxJQUFJcFMsRUFBRS9PLEVBQUV0VSxVQUFVLE9BQU9xakIsRUFBRTlaLGlCQUFpQixTQUFTK0ssRUFBRStPLEdBQUc1cEIsS0FBS2k4QixHQUFHcGhCLEdBQUdwUyxJQUFJbWhCLEVBQUUsRUFBRUEsRUFBRS9aLG9CQUFvQixTQUFTZ0wsRUFBRStPLEdBQUc1cEIsS0FBS2k4QixHQUFHcGhCLEdBQUdxaEIsT0FBT3RTLEVBQUUsRUFBRUEsRUFBRXJaLGNBQWMsU0FBU3NLLEdBQUdBLEVBQUV2VixPQUFPdEYsS0FBSyxJQUFJLElBQUk0cEIsRUFBRWtPLEVBQUU1M0IsR0FBRUYsS0FBS2k4QixHQUFHcGhCLEVBQUV4WCxTQUFTdW1CLEVBQUVrTyxLQUFLNUgsT0FBTyxFQUFHdEcsRUFBRTVoQixPQUFPNlMsRUFBRyxFQUFFK08sRUFBRXFTLEdBQUcsU0FBU3BoQixHQUFHLE9BQU83YSxLQUFLKzdCLEdBQUdiLElBQUlyZ0IsSUFBSTdhLEtBQUsrN0IsR0FBR3pvQixJQUFJdUgsRUFBRSxJQUFJNmUsS0FBSzE1QixLQUFLKzdCLEdBQUdsYyxJQUFJaEYsRUFBRSxFQUFFQSxDQUFDLENBQXpXLElDbUJ4MUosTUFpRU1zaEIsR0FBc0IsU0FBVUMsR0FFbEMsTUFBTUMsRUFBTSxHQUNaLElBQUlDLEVBQUksRUFDUixJQUFLLElBQUl2NkIsRUFBSSxFQUFHQSxFQUFJcTZCLEVBQUlwNkIsT0FBUUQsSUFBSyxDQUNqQyxJQUFJaTNCLEVBQUlvRCxFQUFJRyxXQUFXeDZCLEdBQ25CaTNCLEVBQUksSUFDSnFELEVBQUlDLEtBQU90RCxFQUVOQSxFQUFJLE1BQ1RxRCxFQUFJQyxLQUFRdEQsR0FBSyxFQUFLLElBQ3RCcUQsRUFBSUMsS0FBWSxHQUFKdEQsRUFBVSxLQUVBLFFBQVosTUFBSkEsSUFDTmozQixFQUFJLEVBQUlxNkIsRUFBSXA2QixRQUN5QixRQUFaLE1BQXhCbzZCLEVBQUlHLFdBQVd4NkIsRUFBSSxLQUVwQmkzQixFQUFJLFFBQWdCLEtBQUpBLElBQWUsS0FBNkIsS0FBdEJvRCxFQUFJRyxhQUFheDZCLElBQ3ZEczZCLEVBQUlDLEtBQVF0RCxHQUFLLEdBQU0sSUFDdkJxRCxFQUFJQyxLQUFTdEQsR0FBSyxHQUFNLEdBQU0sSUFDOUJxRCxFQUFJQyxLQUFTdEQsR0FBSyxFQUFLLEdBQU0sSUFDN0JxRCxFQUFJQyxLQUFZLEdBQUp0RCxFQUFVLE1BR3RCcUQsRUFBSUMsS0FBUXRELEdBQUssR0FBTSxJQUN2QnFELEVBQUlDLEtBQVN0RCxHQUFLLEVBQUssR0FBTSxJQUM3QnFELEVBQUlDLEtBQVksR0FBSnRELEVBQVUsSUFFOUIsQ0FDQSxPQUFPcUQsQ0FDWCxFQXlDTUcsR0FBUyxDQUlYQyxlQUFnQixLQUloQkMsZUFBZ0IsS0FLaEJDLHNCQUF1QixLQUt2QkMsc0JBQXVCLEtBS3ZCQyxrQkFBbUIsaUVBSW5CLGdCQUFJQyxHQUNBLE9BQU85OEIsS0FBSzY4QixrQkFBb0IsS0FDcEMsRUFJQSx3QkFBSUUsR0FDQSxPQUFPLzhCLEtBQUs2OEIsa0JBQW9CLEtBQ3BDLEVBUUFHLG1CQUFvQyxtQkFBVEMsS0FVM0IsZUFBQUMsQ0FBZ0JDLEVBQU9DLEdBQ25CLElBQUs5MkIsTUFBTWlCLFFBQVE0MUIsR0FDZixNQUFNNXZCLE1BQU0saURBRWhCdk4sS0FBS3E5QixRQUNMLE1BQU1DLEVBQWdCRixFQUNoQnA5QixLQUFLMjhCLHNCQUNMMzhCLEtBQUt5OEIsZUFDTGMsRUFBUyxHQUNmLElBQUssSUFBSXg3QixFQUFJLEVBQUdBLEVBQUlvN0IsRUFBTW43QixPQUFRRCxHQUFLLEVBQUcsQ0FDdEMsTUFBTXk3QixFQUFRTCxFQUFNcDdCLEdBQ2QwN0IsRUFBWTE3QixFQUFJLEVBQUlvN0IsRUFBTW43QixPQUMxQjA3QixFQUFRRCxFQUFZTixFQUFNcDdCLEVBQUksR0FBSyxFQUNuQzQ3QixFQUFZNTdCLEVBQUksRUFBSW83QixFQUFNbjdCLE9BQzFCNDdCLEVBQVFELEVBQVlSLEVBQU1wN0IsRUFBSSxHQUFLLEVBQ25DODdCLEVBQVdMLEdBQVMsRUFDcEJNLEdBQXFCLEVBQVJOLElBQWlCLEVBQU1FLEdBQVMsRUFDbkQsSUFBSUssR0FBcUIsR0FBUkwsSUFBaUIsRUFBTUUsR0FBUyxFQUM3Q0ksRUFBbUIsR0FBUkosRUFDVkQsSUFDREssRUFBVyxHQUNOUCxJQUNETSxFQUFXLEtBR25CUixFQUFPajdCLEtBQUtnN0IsRUFBY08sR0FBV1AsRUFBY1EsR0FBV1IsRUFBY1MsR0FBV1QsRUFBY1UsR0FDekcsQ0FDQSxPQUFPVCxFQUFPdHJCLEtBQUssR0FDdkIsRUFTQSxZQUFBZ3NCLENBQWFkLEVBQU9DLEdBR2hCLE9BQUlwOUIsS0FBS2c5QixxQkFBdUJJLEVBQ3JCYyxLQUFLZixHQUVUbjlCLEtBQUtrOUIsZ0JBQWdCZixHQUFvQmdCLEdBQVFDLEVBQzVELEVBU0EsWUFBQWUsQ0FBYWhCLEVBQU9DLEdBR2hCLE9BQUlwOUIsS0FBS2c5QixxQkFBdUJJLEVBQ3JCSCxLQUFLRSxHQWhKRSxTQUFVaUIsR0FFaEMsTUFBTS9CLEVBQU0sR0FDWixJQUFJZ0MsRUFBTSxFQUFHckYsRUFBSSxFQUNqQixLQUFPcUYsRUFBTUQsRUFBTXA4QixRQUFRLENBQ3ZCLE1BQU1zOEIsRUFBS0YsRUFBTUMsS0FDakIsR0FBSUMsRUFBSyxJQUNMakMsRUFBSXJELEtBQU9udUIsT0FBTzB6QixhQUFhRCxRQUU5QixHQUFJQSxFQUFLLEtBQU9BLEVBQUssSUFBSyxDQUMzQixNQUFNRSxFQUFLSixFQUFNQyxLQUNqQmhDLEVBQUlyRCxLQUFPbnVCLE9BQU8wekIsY0FBb0IsR0FBTEQsSUFBWSxFQUFXLEdBQUxFLEVBQ3ZELE1BQ0ssR0FBSUYsRUFBSyxLQUFPQSxFQUFLLElBQUssQ0FFM0IsTUFHTXpGLElBQVksRUFBTHlGLElBQVcsSUFBYSxHQUgxQkYsRUFBTUMsT0FHMkIsSUFBYSxHQUY5Q0QsRUFBTUMsT0FFK0MsRUFBVyxHQURoRUQsRUFBTUMsTUFFYixNQUNKaEMsRUFBSXJELEtBQU9udUIsT0FBTzB6QixhQUFhLE9BQVUxRixHQUFLLEtBQzlDd0QsRUFBSXJELEtBQU9udUIsT0FBTzB6QixhQUFhLE9BQWMsS0FBSjFGLEdBQzdDLEtBQ0ssQ0FDRCxNQUFNMkYsRUFBS0osRUFBTUMsS0FDWEksRUFBS0wsRUFBTUMsS0FDakJoQyxFQUFJckQsS0FBT251QixPQUFPMHpCLGNBQW9CLEdBQUxELElBQVksSUFBYSxHQUFMRSxJQUFZLEVBQVcsR0FBTEMsRUFDM0UsQ0FDSixDQUNBLE9BQU9wQyxFQUFJcHFCLEtBQUssR0FDcEIsQ0FvSGV5c0IsQ0FBa0IxK0IsS0FBSzIrQix3QkFBd0J4QixFQUFPQyxHQUNqRSxFQWdCQSx1QkFBQXVCLENBQXdCeEIsRUFBT0MsR0FDM0JwOUIsS0FBS3E5QixRQUNMLE1BQU11QixFQUFnQnhCLEVBQ2hCcDlCLEtBQUs0OEIsc0JBQ0w1OEIsS0FBSzA4QixlQUNMYSxFQUFTLEdBQ2YsSUFBSyxJQUFJeDdCLEVBQUksRUFBR0EsRUFBSW83QixFQUFNbjdCLFFBQVMsQ0FDL0IsTUFBTXc3QixFQUFRb0IsRUFBY3pCLEVBQU03aEIsT0FBT3ZaLE1BRW5DMjdCLEVBRFkzN0IsRUFBSW83QixFQUFNbjdCLE9BQ0Y0OEIsRUFBY3pCLEVBQU03aEIsT0FBT3ZaLElBQU0sSUFDekRBLEVBQ0YsTUFDTTY3QixFQURZNzdCLEVBQUlvN0IsRUFBTW43QixPQUNGNDhCLEVBQWN6QixFQUFNN2hCLE9BQU92WixJQUFNLEtBQ3pEQSxFQUNGLE1BQ004OEIsRUFEWTk4QixFQUFJbzdCLEVBQU1uN0IsT0FDRjQ4QixFQUFjekIsRUFBTTdoQixPQUFPdlosSUFBTSxHQUUzRCxLQURFQSxFQUNXLE1BQVR5N0IsR0FBMEIsTUFBVEUsR0FBMEIsTUFBVEUsR0FBMEIsTUFBVGlCLEVBQ25ELE1BQU0sSUFBSUMsR0FFZCxNQUFNakIsRUFBWUwsR0FBUyxFQUFNRSxHQUFTLEVBRTFDLEdBREFILEVBQU9qN0IsS0FBS3U3QixHQUNFLEtBQVZELEVBQWMsQ0FDZCxNQUFNRSxFQUFhSixHQUFTLEVBQUssSUFBU0UsR0FBUyxFQUVuRCxHQURBTCxFQUFPajdCLEtBQUt3N0IsR0FDRSxLQUFWZSxFQUFjLENBQ2QsTUFBTWQsRUFBYUgsR0FBUyxFQUFLLElBQVFpQixFQUN6Q3RCLEVBQU9qN0IsS0FBS3k3QixFQUNoQixDQUNKLENBQ0osQ0FDQSxPQUFPUixDQUNYLEVBTUEsS0FBQUYsR0FDSSxJQUFLcjlCLEtBQUt5OEIsZUFBZ0IsQ0FDdEJ6OEIsS0FBS3k4QixlQUFpQixDQUFDLEVBQ3ZCejhCLEtBQUswOEIsZUFBaUIsQ0FBQyxFQUN2QjE4QixLQUFLMjhCLHNCQUF3QixDQUFDLEVBQzlCMzhCLEtBQUs0OEIsc0JBQXdCLENBQUMsRUFFOUIsSUFBSyxJQUFJNzZCLEVBQUksRUFBR0EsRUFBSS9CLEtBQUs4OEIsYUFBYTk2QixPQUFRRCxJQUMxQy9CLEtBQUt5OEIsZUFBZTE2QixHQUFLL0IsS0FBSzg4QixhQUFheGhCLE9BQU92WixHQUNsRC9CLEtBQUswOEIsZUFBZTE4QixLQUFLeThCLGVBQWUxNkIsSUFBTUEsRUFDOUMvQixLQUFLMjhCLHNCQUFzQjU2QixHQUFLL0IsS0FBSys4QixxQkFBcUJ6aEIsT0FBT3ZaLEdBQ2pFL0IsS0FBSzQ4QixzQkFBc0I1OEIsS0FBSzI4QixzQkFBc0I1NkIsSUFBTUEsRUFFeERBLEdBQUsvQixLQUFLNjhCLGtCQUFrQjc2QixTQUM1QmhDLEtBQUswOEIsZUFBZTE4QixLQUFLKzhCLHFCQUFxQnpoQixPQUFPdlosSUFBTUEsRUFDM0QvQixLQUFLNDhCLHNCQUFzQjU4QixLQUFLODhCLGFBQWF4aEIsT0FBT3ZaLElBQU1BLEVBR3RFLENBQ0osR0FLSixNQUFNKzhCLFdBQWdDdnhCLE1BQ2xDLFdBQUFsTixHQUNJMCtCLFNBQVNsNEIsV0FDVDdHLEtBQUswSSxLQUFPLHlCQUNoQixFQUtKLE1BUU1zMkIsR0FBZ0MsU0FBVTVDLEdBRTVDLE9BVmlCLFNBQVVBLEdBQzNCLE1BQU02QyxFQUFZOUMsR0FBb0JDLEdBQ3RDLE9BQU9JLEdBQU9VLGdCQUFnQitCLEdBQVcsRUFDN0MsQ0FPV0MsQ0FBYTlDLEdBQUs3M0IsUUFBUSxNQUFPLEdBQzVDLEVBdUxNNDZCLEdBQWMsS0FDaEIsSUFDSSxPQXhFUixXQUNJLEdBQW9CLG9CQUFUdmdCLEtBQ1AsT0FBT0EsS0FFWCxHQUFzQixvQkFBWHplLE9BQ1AsT0FBT0EsT0FFWCxRQUFzQixJQUFYLEVBQUFMLEVBQ1AsT0FBTyxFQUFBQSxFQUVYLE1BQU0sSUFBSXlOLE1BQU0sa0NBQ3BCLENBa0JvQzZ4QixHQUFZQyx1QkFTYixNQUMvQixHQUF1QixvQkFBWkMsY0FBa0QsSUFBaEJBLFFBQVFDLElBQ2pELE9BRUosTUFBTUMsRUFBcUJGLFFBQVFDLElBQUlGLHNCQUN2QyxPQUFJRyxFQUNPNU8sS0FBSzlKLE1BQU0wWSxRQUR0QixDQUVBLEVBNEJRQyxJQTFCa0IsTUFDMUIsR0FBd0Isb0JBQWJ6MEIsU0FDUCxPQUVKLElBQUltUSxFQUNKLElBQ0lBLEVBQVFuUSxTQUFTMDBCLE9BQU92a0IsTUFBTSxnQ0FDbEMsQ0FDQSxNQUFPamIsR0FHSCxNQUNKLENBQ0EsTUFBTXkvQixFQUFVeGtCLEdBbktDLFNBQVVpaEIsR0FDM0IsSUFDSSxPQUFPSSxHQUFPMkIsYUFBYS9CLEdBQUssRUFDcEMsQ0FDQSxNQUFPbDhCLEdBQ0hhLFFBQVFTLE1BQU0sd0JBQXlCdEIsRUFDM0MsQ0FDQSxPQUFPLElBQ1gsQ0EySjZCMC9CLENBQWF6a0IsRUFBTSxJQUM1QyxPQUFPd2tCLEdBQVcvTyxLQUFLOUosTUFBTTZZLEVBQVEsRUFhN0JFLEVBQ1IsQ0FDQSxNQUFPMy9CLEdBUUgsWUFEQWEsUUFBUSsrQixLQUFLLCtDQUErQzUvQixJQUVoRSxHQXNDRTYvQixHQUFzQixLQUFRLElBQUlDLEVBQUksT0FBZ0MsUUFBeEJBLEVBQUtiLFlBQWtDLElBQVBhLE9BQWdCLEVBQVNBLEVBQUdDLE1BQU0sRUF3QnRILE1BQU1DLEdBQ0YsV0FBQTcvQixHQUNJTCxLQUFLVyxPQUFTLE9BQ2RYLEtBQUtVLFFBQVUsT0FDZlYsS0FBS3c0QixRQUFVLElBQUkvM0IsU0FBUSxDQUFDQyxFQUFTQyxLQUNqQ1gsS0FBS1UsUUFBVUEsRUFDZlYsS0FBS1csT0FBU0EsQ0FBTSxHQUU1QixDQU1BLFlBQUF3L0IsQ0FBYTV3QixHQUNULE1BQU8sQ0FBQy9OLEVBQU93RyxLQUNQeEcsRUFDQXhCLEtBQUtXLE9BQU9hLEdBR1p4QixLQUFLVSxRQUFRc0gsR0FFTyxtQkFBYnVILElBR1B2UCxLQUFLdzRCLFFBQVFqM0IsT0FBTSxTQUdLLElBQXBCZ08sRUFBU3ZOLE9BQ1R1TixFQUFTL04sR0FHVCtOLEVBQVMvTixFQUFPd0csR0FFeEIsQ0FFUixFQXdLSixTQUFTLEtBQ0wsSUFDSSxNQUE0QixpQkFBZG80QixTQUNsQixDQUNBLE1BQU9sZ0MsR0FDSCxPQUFPLENBQ1gsQ0FDSixDQVFBLFNBQVMsS0FDTCxPQUFPLElBQUlPLFNBQVEsQ0FBQ0MsRUFBU0MsS0FDekIsSUFDSSxJQUFJMC9CLEdBQVcsRUFDZixNQUFNQyxFQUFnQiwwREFDaEJDLEVBQVUzaEIsS0FBS3doQixVQUFVcjdCLEtBQUt1N0IsR0FDcENDLEVBQVFDLFVBQVksS0FDaEJELEVBQVFFLE9BQU9DLFFBRVZMLEdBQ0R6aEIsS0FBS3doQixVQUFVTyxlQUFlTCxHQUVsQzUvQixHQUFRLEVBQUssRUFFakI2L0IsRUFBUUssZ0JBQWtCLEtBQ3RCUCxHQUFXLENBQUssRUFFcEJFLEVBQVFNLFFBQVUsS0FDZCxJQUFJYixFQUNKci9CLEdBQWlDLFFBQXhCcS9CLEVBQUtPLEVBQVEvK0IsYUFBMEIsSUFBUHcrQixPQUFnQixFQUFTQSxFQUFHMXlCLFVBQVksR0FBRyxDQUU1RixDQUNBLE1BQU85TCxHQUNIYixFQUFPYSxFQUNYLElBRVIsQ0F3RUEsTUFBTXMvQixXQUFzQnZ6QixNQUN4QixXQUFBbE4sQ0FFQTBnQyxFQUFNenpCLEVBRU4wekIsR0FDSWpDLE1BQU16eEIsR0FDTnROLEtBQUsrZ0MsS0FBT0EsRUFDWi9nQyxLQUFLZ2hDLFdBQWFBLEVBRWxCaGhDLEtBQUswSSxLQWJNLGdCQWdCWDlDLE9BQU9xN0IsZUFBZWpoQyxLQUFNOGdDLEdBQWN2NkIsV0FHdENnSCxNQUFNMnpCLG1CQUNOM3pCLE1BQU0yekIsa0JBQWtCbGhDLEtBQU1taEMsR0FBYTU2QixVQUFVdUUsT0FFN0QsRUFFSixNQUFNcTJCLEdBQ0YsV0FBQTlnQyxDQUFZK2dDLEVBQVNDLEVBQWFDLEdBQzlCdGhDLEtBQUtvaEMsUUFBVUEsRUFDZnBoQyxLQUFLcWhDLFlBQWNBLEVBQ25CcmhDLEtBQUtzaEMsT0FBU0EsQ0FDbEIsQ0FDQSxNQUFBeDJCLENBQU9pMkIsS0FBU3R3QixHQUNaLE1BQU11d0IsRUFBYXZ3QixFQUFLLElBQU0sQ0FBQyxFQUN6Qjh3QixFQUFXLEdBQUd2aEMsS0FBS29oQyxXQUFXTCxJQUM5QlMsRUFBV3hoQyxLQUFLc2hDLE9BQU9QLEdBQ3ZCenpCLEVBQVVrMEIsRUFPeEIsU0FBeUJBLEVBQVUvd0IsR0FDL0IsT0FBTyt3QixFQUFTajlCLFFBQVFrOUIsSUFBUyxDQUFDNUosRUFBRy94QixLQUNqQyxNQUFNa0MsRUFBUXlJLEVBQUszSyxHQUNuQixPQUFnQixNQUFUa0MsRUFBZ0I2QyxPQUFPN0MsR0FBUyxJQUFJbEMsS0FBTyxHQUUxRCxDQVptQzQ3QixDQUFnQkYsRUFBVVIsR0FBYyxRQUU3RFcsRUFBYyxHQUFHM2hDLEtBQUtxaEMsZ0JBQWdCL3pCLE1BQVlpMEIsTUFFeEQsT0FEYyxJQUFJVCxHQUFjUyxFQUFVSSxFQUFhWCxFQUUzRCxFQVFKLE1BQU1TLEdBQVUsZ0JBa01oQixTQUFTRyxHQUFVN0ksRUFBRzhJLEdBQ2xCLEdBQUk5SSxJQUFNOEksRUFDTixPQUFPLEVBRVgsTUFBTUMsRUFBUWw4QixPQUFPbUUsS0FBS2d2QixHQUNwQmdKLEVBQVFuOEIsT0FBT21FLEtBQUs4M0IsR0FDMUIsSUFBSyxNQUFNRyxLQUFLRixFQUFPLENBQ25CLElBQUtDLEVBQU1yL0IsU0FBU3MvQixHQUNoQixPQUFPLEVBRVgsTUFBTUMsRUFBUWxKLEVBQUVpSixHQUNWRSxFQUFRTCxFQUFFRyxHQUNoQixHQUFJLEdBQVNDLElBQVUsR0FBU0MsSUFDNUIsSUFBS04sR0FBVUssRUFBT0MsR0FDbEIsT0FBTyxPQUdWLEdBQUlELElBQVVDLEVBQ2YsT0FBTyxDQUVmLENBQ0EsSUFBSyxNQUFNRixLQUFLRCxFQUNaLElBQUtELEVBQU1wL0IsU0FBU3MvQixHQUNoQixPQUFPLEVBR2YsT0FBTyxDQUNYLENBQ0EsU0FBUyxHQUFTRyxHQUNkLE9BQWlCLE9BQVZBLEdBQW1DLGlCQUFWQSxDQUNwQyxDQTJ5QkEsU0FBU0MsR0FBdUJDLEVBQWNDLEVBMUJkLElBMEJ3REMsRUFyQnpELEdBeUIzQixNQUFNQyxFQUFnQkYsRUFBaUI3MEIsS0FBS3FjLElBQUl5WSxFQUFlRixHQUd6REksRUFBYWgxQixLQUFLaTFCLE1BYk4sR0FpQmRGLEdBR0MvMEIsS0FBS2sxQixTQUFXLElBQ2pCLEdBRUosT0FBT2wxQixLQUFLRCxJQWhDUyxNQWdDYWcxQixFQUFnQkMsRUFDdEQsQ0E4REEsU0FBUyxHQUFtQnJCLEdBQ3hCLE9BQUlBLEdBQVdBLEVBQVF3QixVQUNaeEIsRUFBUXdCLFVBR1J4QixDQUVmLENDeGpFQSxNQUFNaFEsR0FPRixXQUFBL3dCLENBQVlxSSxFQUFNbTZCLEVBQWlCeC9CLEdBQy9CckQsS0FBSzBJLEtBQU9BLEVBQ1oxSSxLQUFLNmlDLGdCQUFrQkEsRUFDdkI3aUMsS0FBS3FELEtBQU9BLEVBQ1pyRCxLQUFLOGlDLG1CQUFvQixFQUl6QjlpQyxLQUFLK2lDLGFBQWUsQ0FBQyxFQUNyQi9pQyxLQUFLZ2pDLGtCQUFvQixPQUN6QmhqQyxLQUFLaWpDLGtCQUFvQixJQUM3QixDQUNBLG9CQUFBQyxDQUFxQkMsR0FFakIsT0FEQW5qQyxLQUFLZ2pDLGtCQUFvQkcsRUFDbEJuakMsSUFDWCxDQUNBLG9CQUFBb2pDLENBQXFCTixHQUVqQixPQURBOWlDLEtBQUs4aUMsa0JBQW9CQSxFQUNsQjlpQyxJQUNYLENBQ0EsZUFBQXFqQyxDQUFnQjk5QixHQUVaLE9BREF2RixLQUFLK2lDLGFBQWV4OUIsRUFDYnZGLElBQ1gsQ0FDQSwwQkFBQXNqQyxDQUEyQi96QixHQUV2QixPQURBdlAsS0FBS2lqQyxrQkFBb0IxekIsRUFDbEJ2UCxJQUNYLEVBbUJKLE1BQU11akMsR0FBcUIsWUFzQjNCLE1BQU1DLEdBQ0YsV0FBQW5qQyxDQUFZcUksRUFBTXNWLEdBQ2RoZSxLQUFLMEksS0FBT0EsRUFDWjFJLEtBQUtnZSxVQUFZQSxFQUNqQmhlLEtBQUtxeEIsVUFBWSxLQUNqQnJ4QixLQUFLeWpDLFVBQVksSUFBSXpILElBQ3JCaDhCLEtBQUswakMsa0JBQW9CLElBQUkxSCxJQUM3Qmg4QixLQUFLMmpDLGlCQUFtQixJQUFJM0gsSUFDNUJoOEIsS0FBSzRqQyxnQkFBa0IsSUFBSTVILEdBQy9CLENBS0EsR0FBQW5jLENBQUlna0IsR0FFQSxNQUFNQyxFQUF1QjlqQyxLQUFLK2pDLDRCQUE0QkYsR0FDOUQsSUFBSzdqQyxLQUFLMGpDLGtCQUFrQnhJLElBQUk0SSxHQUF1QixDQUNuRCxNQUFNRSxFQUFXLElBQUk5RCxHQUVyQixHQURBbGdDLEtBQUswakMsa0JBQWtCcHdCLElBQUl3d0IsRUFBc0JFLEdBQzdDaGtDLEtBQUtpa0MsY0FBY0gsSUFDbkI5akMsS0FBS2trQyx1QkFFTCxJQUNJLE1BQU1DLEVBQVdua0MsS0FBS29rQyx1QkFBdUIsQ0FDekNDLG1CQUFvQlAsSUFFcEJLLEdBQ0FILEVBQVN0akMsUUFBUXlqQyxFQUV6QixDQUNBLE1BQU9qa0MsR0FHUCxDQUVSLENBQ0EsT0FBT0YsS0FBSzBqQyxrQkFBa0I3akIsSUFBSWlrQixHQUFzQnRMLE9BQzVELENBQ0EsWUFBQThMLENBQWE5MEIsR0FDVCxJQUFJd3dCLEVBRUosTUFBTThELEVBQXVCOWpDLEtBQUsrakMsNEJBQTRCdjBCLGFBQXlDLEVBQVNBLEVBQVFxMEIsWUFDbEhVLEVBQXlGLFFBQTdFdkUsRUFBS3h3QixhQUF5QyxFQUFTQSxFQUFRKzBCLGdCQUE2QixJQUFQdkUsR0FBZ0JBLEVBQ3ZILElBQUloZ0MsS0FBS2lrQyxjQUFjSCxLQUNuQjlqQyxLQUFLa2tDLHVCQWVKLENBRUQsR0FBSUssRUFDQSxPQUFPLEtBR1AsTUFBTWgzQixNQUFNLFdBQVd2TixLQUFLMEksd0JBRXBDLENBdEJJLElBQ0ksT0FBTzFJLEtBQUtva0MsdUJBQXVCLENBQy9CQyxtQkFBb0JQLEdBRTVCLENBQ0EsTUFBTzVqQyxHQUNILEdBQUlxa0MsRUFDQSxPQUFPLEtBR1AsTUFBTXJrQyxDQUVkLENBV1IsQ0FDQSxZQUFBc2tDLEdBQ0ksT0FBT3hrQyxLQUFLcXhCLFNBQ2hCLENBQ0EsWUFBQW9ULENBQWFwVCxHQUNULEdBQUlBLEVBQVUzb0IsT0FBUzFJLEtBQUswSSxLQUN4QixNQUFNNkUsTUFBTSx5QkFBeUI4akIsRUFBVTNvQixxQkFBcUIxSSxLQUFLMEksU0FFN0UsR0FBSTFJLEtBQUtxeEIsVUFDTCxNQUFNOWpCLE1BQU0saUJBQWlCdk4sS0FBSzBJLGtDQUl0QyxHQUZBMUksS0FBS3F4QixVQUFZQSxFQUVacnhCLEtBQUtra0MsdUJBQVYsQ0FJQSxHQXdLUixTQUEwQjdTLEdBQ3RCLE1BQXVDLFVBQWhDQSxFQUFVMlIsaUJBQ3JCLENBMUtZMEIsQ0FBaUJyVCxHQUNqQixJQUNJcnhCLEtBQUtva0MsdUJBQXVCLENBQUVDLG1CQUFvQmQsSUFDdEQsQ0FDQSxNQUFPcmpDLEdBS1AsQ0FLSixJQUFLLE1BQU9ta0MsRUFBb0JNLEtBQXFCM2tDLEtBQUswakMsa0JBQWtCcFcsVUFBVyxDQUNuRixNQUFNd1csRUFBdUI5akMsS0FBSytqQyw0QkFBNEJNLEdBQzlELElBRUksTUFBTUYsRUFBV25rQyxLQUFLb2tDLHVCQUF1QixDQUN6Q0MsbUJBQW9CUCxJQUV4QmEsRUFBaUJqa0MsUUFBUXlqQyxFQUM3QixDQUNBLE1BQU9qa0MsR0FHUCxDQUNKLENBN0JBLENBOEJKLENBQ0EsYUFBQTBrQyxDQUFjZixFQUFhTixJQUN2QnZqQyxLQUFLMGpDLGtCQUFrQnhILE9BQU8ySCxHQUM5QjdqQyxLQUFLMmpDLGlCQUFpQnpILE9BQU8ySCxHQUM3QjdqQyxLQUFLeWpDLFVBQVV2SCxPQUFPMkgsRUFDMUIsQ0FHQSxZQUFNLEdBQ0YsTUFBTWdCLEVBQVd2K0IsTUFBTXdXLEtBQUs5YyxLQUFLeWpDLFVBQVV2N0IsZ0JBQ3JDekgsUUFBUXFrQyxJQUFJLElBQ1hELEVBQ0VsN0IsUUFBT3kzQixHQUFXLGFBQWNBLElBRWhDaGpCLEtBQUlnakIsR0FBV0EsRUFBUTJELFNBQVM3SSxjQUNsQzJJLEVBQ0VsN0IsUUFBT3kzQixHQUFXLFlBQWFBLElBRS9CaGpCLEtBQUlnakIsR0FBV0EsRUFBUTRELGFBRXBDLENBQ0EsY0FBQUMsR0FDSSxPQUF5QixNQUFsQmpsQyxLQUFLcXhCLFNBQ2hCLENBQ0EsYUFBQTRTLENBQWNKLEVBQWFOLElBQ3ZCLE9BQU92akMsS0FBS3lqQyxVQUFVdkksSUFBSTJJLEVBQzlCLENBQ0EsVUFBQXFCLENBQVdyQixFQUFhTixJQUNwQixPQUFPdmpDLEtBQUsyakMsaUJBQWlCOWpCLElBQUlna0IsSUFBZSxDQUFDLENBQ3JELENBQ0EsVUFBQXNCLENBQVc5cUIsRUFBTyxDQUFDLEdBQ2YsTUFBTSxRQUFFN0ssRUFBVSxDQUFDLEdBQU02SyxFQUNuQnlwQixFQUF1QjlqQyxLQUFLK2pDLDRCQUE0QjFwQixFQUFLZ3FCLG9CQUNuRSxHQUFJcmtDLEtBQUtpa0MsY0FBY0gsR0FDbkIsTUFBTXYyQixNQUFNLEdBQUd2TixLQUFLMEksUUFBUW83QixtQ0FFaEMsSUFBSzlqQyxLQUFLaWxDLGlCQUNOLE1BQU0xM0IsTUFBTSxhQUFhdk4sS0FBSzBJLG9DQUVsQyxNQUFNeTdCLEVBQVdua0MsS0FBS29rQyx1QkFBdUIsQ0FDekNDLG1CQUFvQlAsRUFDcEJ0MEIsWUFHSixJQUFLLE1BQU82MEIsRUFBb0JNLEtBQXFCM2tDLEtBQUswakMsa0JBQWtCcFcsVUFFcEV3VyxJQURpQzlqQyxLQUFLK2pDLDRCQUE0Qk0sSUFFbEVNLEVBQWlCamtDLFFBQVF5akMsR0FHakMsT0FBT0EsQ0FDWCxDQVNBLE1BQUFpQixDQUFPNzFCLEVBQVVzMEIsR0FDYixJQUFJN0QsRUFDSixNQUFNOEQsRUFBdUI5akMsS0FBSytqQyw0QkFBNEJGLEdBQ3hEd0IsRUFBOEUsUUFBekRyRixFQUFLaGdDLEtBQUs0akMsZ0JBQWdCL2pCLElBQUlpa0IsVUFBMEMsSUFBUDlELEVBQWdCQSxFQUFLLElBQUl0RyxJQUNySDJMLEVBQWtCNThCLElBQUk4RyxHQUN0QnZQLEtBQUs0akMsZ0JBQWdCdHdCLElBQUl3d0IsRUFBc0J1QixHQUMvQyxNQUFNQyxFQUFtQnRsQyxLQUFLeWpDLFVBQVU1akIsSUFBSWlrQixHQUk1QyxPQUhJd0IsR0FDQS8xQixFQUFTKzFCLEVBQWtCeEIsR0FFeEIsS0FDSHVCLEVBQWtCbkosT0FBTzNzQixFQUFTLENBRTFDLENBS0EscUJBQUFnMkIsQ0FBc0JwQixFQUFVTixHQUM1QixNQUFNMkIsRUFBWXhsQyxLQUFLNGpDLGdCQUFnQi9qQixJQUFJZ2tCLEdBQzNDLEdBQUsyQixFQUdMLElBQUssTUFBTWoyQixLQUFZaTJCLEVBQ25CLElBQ0lqMkIsRUFBUzQwQixFQUFVTixFQUN2QixDQUNBLE1BQU83RCxHQUVQLENBRVIsQ0FDQSxzQkFBQW9FLEVBQXVCLG1CQUFFQyxFQUFrQixRQUFFNzBCLEVBQVUsQ0FBQyxJQUNwRCxJQUFJMjBCLEVBQVdua0MsS0FBS3lqQyxVQUFVNWpCLElBQUl3a0IsR0FDbEMsSUFBS0YsR0FBWW5rQyxLQUFLcXhCLFlBQ2xCOFMsRUFBV25rQyxLQUFLcXhCLFVBQVV3UixnQkFBZ0I3aUMsS0FBS2dlLFVBQVcsQ0FDdERxbUIsb0JBeUN1QlIsRUF6QzJCUSxFQTBDdkRSLElBQWVOLFFBQXFCOWhDLEVBQVlvaUMsR0F6QzNDcjBCLFlBRUp4UCxLQUFLeWpDLFVBQVVud0IsSUFBSSt3QixFQUFvQkYsR0FDdkNua0MsS0FBSzJqQyxpQkFBaUJyd0IsSUFBSSt3QixFQUFvQjcwQixHQU05Q3hQLEtBQUt1bEMsc0JBQXNCcEIsRUFBVUUsR0FNakNya0MsS0FBS3F4QixVQUFVNFIsbUJBQ2YsSUFDSWpqQyxLQUFLcXhCLFVBQVU0UixrQkFBa0JqakMsS0FBS2dlLFVBQVdxbUIsRUFBb0JGLEVBQ3pFLENBQ0EsTUFBT25FLEdBRVAsQ0FtQmhCLElBQXVDNkQsRUFoQi9CLE9BQU9NLEdBQVksSUFDdkIsQ0FDQSwyQkFBQUosQ0FBNEJGLEVBQWFOLElBQ3JDLE9BQUl2akMsS0FBS3F4QixVQUNFcnhCLEtBQUtxeEIsVUFBVXlSLGtCQUFvQmUsRUFBYU4sR0FHaERNLENBRWYsQ0FDQSxvQkFBQUssR0FDSSxRQUFVbGtDLEtBQUtxeEIsV0FDMEIsYUFBckNyeEIsS0FBS3F4QixVQUFVMlIsaUJBQ3ZCLEVBNkJKLE1BQU15QyxHQUNGLFdBQUFwbEMsQ0FBWXFJLEdBQ1IxSSxLQUFLMEksS0FBT0EsRUFDWjFJLEtBQUswbEMsVUFBWSxJQUFJMUosR0FDekIsQ0FVQSxZQUFBMkosQ0FBYXRVLEdBQ1QsTUFBTXVVLEVBQVc1bEMsS0FBSzZsQyxZQUFZeFUsRUFBVTNvQixNQUM1QyxHQUFJazlCLEVBQVNYLGlCQUNULE1BQU0sSUFBSTEzQixNQUFNLGFBQWE4akIsRUFBVTNvQix5Q0FBeUMxSSxLQUFLMEksUUFFekZrOUIsRUFBU25CLGFBQWFwVCxFQUMxQixDQUNBLHVCQUFBeVUsQ0FBd0J6VSxHQUNIcnhCLEtBQUs2bEMsWUFBWXhVLEVBQVUzb0IsTUFDL0J1OEIsa0JBRVRqbEMsS0FBSzBsQyxVQUFVeEosT0FBTzdLLEVBQVUzb0IsTUFFcEMxSSxLQUFLMmxDLGFBQWF0VSxFQUN0QixDQVFBLFdBQUF3VSxDQUFZbjlCLEdBQ1IsR0FBSTFJLEtBQUswbEMsVUFBVXhLLElBQUl4eUIsR0FDbkIsT0FBTzFJLEtBQUswbEMsVUFBVTdsQixJQUFJblgsR0FHOUIsTUFBTWs5QixFQUFXLElBQUlwQyxHQUFTOTZCLEVBQU0xSSxNQUVwQyxPQURBQSxLQUFLMGxDLFVBQVVweUIsSUFBSTVLLEVBQU1rOUIsR0FDbEJBLENBQ1gsQ0FDQSxZQUFBRyxHQUNJLE9BQU96L0IsTUFBTXdXLEtBQUs5YyxLQUFLMGxDLFVBQVV4OUIsU0FDckMsRUNqWUosTUFBTXU3QixHQUFZLEdBWWxCLElBQUl1QyxJQUNKLFNBQVdBLEdBQ1BBLEVBQVNBLEVBQWdCLE1BQUksR0FBSyxRQUNsQ0EsRUFBU0EsRUFBa0IsUUFBSSxHQUFLLFVBQ3BDQSxFQUFTQSxFQUFlLEtBQUksR0FBSyxPQUNqQ0EsRUFBU0EsRUFBZSxLQUFJLEdBQUssT0FDakNBLEVBQVNBLEVBQWdCLE1BQUksR0FBSyxRQUNsQ0EsRUFBU0EsRUFBaUIsT0FBSSxHQUFLLFFBQ3RDLENBUEQsQ0FPR0EsS0FBYUEsR0FBVyxDQUFDLElBQzVCLE1BQU1DLEdBQW9CLENBQ3RCLE1BQVNELEdBQVNFLE1BQ2xCLFFBQVdGLEdBQVNHLFFBQ3BCLEtBQVFILEdBQVNJLEtBQ2pCLEtBQVFKLEdBQVNLLEtBQ2pCLE1BQVNMLEdBQVNNLE1BQ2xCLE9BQVVOLEdBQVNPLFFBS2pCQyxHQUFrQlIsR0FBU0ksS0FPM0JLLEdBQWdCLENBQ2xCLENBQUNULEdBQVNFLE9BQVEsTUFDbEIsQ0FBQ0YsR0FBU0csU0FBVSxNQUNwQixDQUFDSCxHQUFTSSxNQUFPLE9BQ2pCLENBQUNKLEdBQVNLLE1BQU8sT0FDakIsQ0FBQ0wsR0FBU00sT0FBUSxTQU9oQkksR0FBb0IsQ0FBQ3ZDLEVBQVV3QyxLQUFZQyxLQUM3QyxHQUFJRCxFQUFVeEMsRUFBUzBDLFNBQ25CLE9BRUosTUFBTWwwQixHQUFNLElBQUlDLE1BQU9rMEIsY0FDakJDLEVBQVNOLEdBQWNFLEdBQzdCLElBQUlJLEVBSUEsTUFBTSxJQUFJeDVCLE1BQU0sOERBQThEbzVCLE1BSDlFNWxDLFFBQVFnbUMsR0FBUSxJQUFJcDBCLE9BQVN3eEIsRUFBU3o3QixXQUFZaytCLEVBSXRELEVBRUosTUFBTUksR0FPRixXQUFBM21DLENBQVlxSSxHQUNSMUksS0FBSzBJLEtBQU9BLEVBSVoxSSxLQUFLaW5DLFVBQVlULEdBS2pCeG1DLEtBQUtrbkMsWUFBY1IsR0FJbkIxbUMsS0FBS21uQyxnQkFBa0IsS0FJdkIxRCxHQUFVbmhDLEtBQUt0QyxLQUNuQixDQUNBLFlBQUk2bUMsR0FDQSxPQUFPN21DLEtBQUtpbkMsU0FDaEIsQ0FDQSxZQUFJSixDQUFTTyxHQUNULEtBQU1BLEtBQU9wQixJQUNULE1BQU0sSUFBSXpOLFVBQVUsa0JBQWtCNk8sK0JBRTFDcG5DLEtBQUtpbkMsVUFBWUcsQ0FDckIsQ0FFQSxXQUFBQyxDQUFZRCxHQUNScG5DLEtBQUtpbkMsVUFBMkIsaUJBQVJHLEVBQW1CbkIsR0FBa0JtQixHQUFPQSxDQUN4RSxDQUNBLGNBQUlFLEdBQ0EsT0FBT3RuQyxLQUFLa25DLFdBQ2hCLENBQ0EsY0FBSUksQ0FBV0YsR0FDWCxHQUFtQixtQkFBUkEsRUFDUCxNQUFNLElBQUk3TyxVQUFVLHFEQUV4QnY0QixLQUFLa25DLFlBQWNFLENBQ3ZCLENBQ0Esa0JBQUlHLEdBQ0EsT0FBT3ZuQyxLQUFLbW5DLGVBQ2hCLENBQ0Esa0JBQUlJLENBQWVILEdBQ2ZwbkMsS0FBS21uQyxnQkFBa0JDLENBQzNCLENBSUEsS0FBQUksSUFBU1osR0FDTDVtQyxLQUFLbW5DLGlCQUFtQm5uQyxLQUFLbW5DLGdCQUFnQm5uQyxLQUFNZ21DLEdBQVNFLFNBQVVVLEdBQ3RFNW1DLEtBQUtrbkMsWUFBWWxuQyxLQUFNZ21DLEdBQVNFLFNBQVVVLEVBQzlDLENBQ0EsR0FBQTVsQyxJQUFPNGxDLEdBQ0g1bUMsS0FBS21uQyxpQkFDRG5uQyxLQUFLbW5DLGdCQUFnQm5uQyxLQUFNZ21DLEdBQVNHLFdBQVlTLEdBQ3BENW1DLEtBQUtrbkMsWUFBWWxuQyxLQUFNZ21DLEdBQVNHLFdBQVlTLEVBQ2hELENBQ0EsSUFBQTlHLElBQVE4RyxHQUNKNW1DLEtBQUttbkMsaUJBQW1Cbm5DLEtBQUttbkMsZ0JBQWdCbm5DLEtBQU1nbUMsR0FBU0ksUUFBU1EsR0FDckU1bUMsS0FBS2tuQyxZQUFZbG5DLEtBQU1nbUMsR0FBU0ksUUFBU1EsRUFDN0MsQ0FDQSxJQUFBYSxJQUFRYixHQUNKNW1DLEtBQUttbkMsaUJBQW1Cbm5DLEtBQUttbkMsZ0JBQWdCbm5DLEtBQU1nbUMsR0FBU0ssUUFBU08sR0FDckU1bUMsS0FBS2tuQyxZQUFZbG5DLEtBQU1nbUMsR0FBU0ssUUFBU08sRUFDN0MsQ0FDQSxLQUFBcGxDLElBQVNvbEMsR0FDTDVtQyxLQUFLbW5DLGlCQUFtQm5uQyxLQUFLbW5DLGdCQUFnQm5uQyxLQUFNZ21DLEdBQVNNLFNBQVVNLEdBQ3RFNW1DLEtBQUtrbkMsWUFBWWxuQyxLQUFNZ21DLEdBQVNNLFNBQVVNLEVBQzlDLEVDL0pKLElBQUljLEdBQ0FDLEdBcUJKLE1BQU1DLEdBQW1CLElBQUlDLFFBQ3ZCQyxHQUFxQixJQUFJRCxRQUN6QkUsR0FBMkIsSUFBSUYsUUFDL0JHLEdBQWlCLElBQUlILFFBQ3JCSSxHQUF3QixJQUFJSixRQTBEbEMsSUFBSUssR0FBZ0IsQ0FDaEIsR0FBQXJvQixDQUFJdmEsRUFBUTZGLEVBQU1nOUIsR0FDZCxHQUFJN2lDLGFBQWtCOGlDLGVBQWdCLENBRWxDLEdBQWEsU0FBVGo5QixFQUNBLE9BQU8yOEIsR0FBbUJqb0IsSUFBSXZhLEdBRWxDLEdBQWEscUJBQVQ2RixFQUNBLE9BQU83RixFQUFPK2lDLGtCQUFvQk4sR0FBeUJsb0IsSUFBSXZhLEdBR25FLEdBQWEsVUFBVDZGLEVBQ0EsT0FBT2c5QixFQUFTRSxpQkFBaUIsUUFDM0I1bUMsRUFDQTBtQyxFQUFTRyxZQUFZSCxFQUFTRSxpQkFBaUIsR0FFN0QsQ0FFQSxPQUFPLEdBQUsvaUMsRUFBTzZGLEdBQ3ZCLEVBQ0FtSSxJQUFHLENBQUNoTyxFQUFRNkYsRUFBTW5ELEtBQ2QxQyxFQUFPNkYsR0FBUW5ELEdBQ1IsR0FFWGt6QixJQUFHLENBQUM1MUIsRUFBUTZGLElBQ0o3RixhQUFrQjhpQyxpQkFDUixTQUFUajlCLEdBQTRCLFVBQVRBLElBR2pCQSxLQUFRN0YsR0FxQ3ZCLFNBQVNpakMsR0FBdUJ2Z0MsR0FDNUIsTUFBcUIsbUJBQVZBLEdBaENPdEIsRUFpQ01zQixLQTdCWHdnQyxZQUFZamlDLFVBQVVraUMsYUFDN0IscUJBQXNCTCxlQUFlN2hDLFdBN0duQ29oQyxLQUNIQSxHQUF1QixDQUNwQmUsVUFBVW5pQyxVQUFVb2lDLFFBQ3BCRCxVQUFVbmlDLFVBQVVxaUMsU0FDcEJGLFVBQVVuaUMsVUFBVXNpQyxzQkFxSEVubUMsU0FBU2dFLEdBQzVCLFlBQWFrZ0MsR0FJaEIsT0FEQWxnQyxFQUFLRCxNQUFNcWlDLEdBQU85b0MsTUFBTzRtQyxHQUNsQixHQUFLZ0IsR0FBaUIvbkIsSUFBSTdmLE1BQ3JDLEVBRUcsWUFBYTRtQyxHQUdoQixPQUFPLEdBQUtsZ0MsRUFBS0QsTUFBTXFpQyxHQUFPOW9DLE1BQU80bUMsR0FDekMsRUF2QlcsU0FBVW1DLEtBQWVuQyxHQUM1QixNQUFNb0MsRUFBS3RpQyxFQUFLRixLQUFLc2lDLEdBQU85b0MsTUFBTytvQyxLQUFlbkMsR0FFbEQsT0FEQW1CLEdBQXlCejBCLElBQUkwMUIsRUFBSUQsRUFBV251QixLQUFPbXVCLEVBQVdudUIsT0FBUyxDQUFDbXVCLElBQ2pFLEdBQUtDLEVBQ2hCLEdBMEJBaGhDLGFBQWlCb2dDLGdCQWhHekIsU0FBd0NZLEdBRXBDLEdBQUlsQixHQUFtQjVNLElBQUk4TixHQUN2QixPQUNKLE1BQU05WSxFQUFPLElBQUl6dkIsU0FBUSxDQUFDQyxFQUFTQyxLQUMvQixNQUFNc29DLEVBQVcsS0FDYkQsRUFBR241QixvQkFBb0IsV0FBWXE1QixHQUNuQ0YsRUFBR241QixvQkFBb0IsUUFBU3JPLEdBQ2hDd25DLEVBQUduNUIsb0JBQW9CLFFBQVNyTyxFQUFNLEVBRXBDMG5DLEVBQVcsS0FDYnhvQyxJQUNBdW9DLEdBQVUsRUFFUnpuQyxFQUFRLEtBQ1ZiLEVBQU9xb0MsRUFBR3huQyxPQUFTLElBQUkybkMsYUFBYSxhQUFjLGVBQ2xERixHQUFVLEVBRWRELEVBQUdsNUIsaUJBQWlCLFdBQVlvNUIsR0FDaENGLEVBQUdsNUIsaUJBQWlCLFFBQVN0TyxHQUM3QnduQyxFQUFHbDVCLGlCQUFpQixRQUFTdE8sRUFBTSxJQUd2Q3NtQyxHQUFtQngwQixJQUFJMDFCLEVBQUk5WSxFQUMvQixDQXlFUWtaLENBQStCcGhDLEdBOUpoQmlDLEVBK0pEakMsR0F6SlYwL0IsS0FDSEEsR0FBb0IsQ0FDakJjLFlBQ0FhLGVBQ0FDLFNBQ0FaLFVBQ0FOLGtCQVppRG1CLE1BQU12USxHQUFNL3VCLGFBQWtCK3VCLElBZ0s1RSxJQUFJd1EsTUFBTXhoQyxFQUFPa2dDLElBRXJCbGdDLEdBekNYLElBQXNCdEIsRUF6SEN1RCxDQW1LdkIsQ0FDQSxTQUFTLEdBQUtqQyxHQUdWLEdBQUlBLGFBQWlCeWhDLFdBQ2pCLE9BM0lSLFNBQTBCbEosR0FDdEIsTUFBTS9ILEVBQVUsSUFBSS8zQixTQUFRLENBQUNDLEVBQVNDLEtBQ2xDLE1BQU1zb0MsRUFBVyxLQUNiMUksRUFBUTF3QixvQkFBb0IsVUFBVzY1QixHQUN2Q25KLEVBQVExd0Isb0JBQW9CLFFBQVNyTyxFQUFNLEVBRXpDa29DLEVBQVUsS0FDWmhwQyxFQUFRLEdBQUs2L0IsRUFBUUUsU0FDckJ3SSxHQUFVLEVBRVJ6bkMsRUFBUSxLQUNWYixFQUFPNC9CLEVBQVEvK0IsT0FDZnluQyxHQUFVLEVBRWQxSSxFQUFRendCLGlCQUFpQixVQUFXNDVCLEdBQ3BDbkosRUFBUXp3QixpQkFBaUIsUUFBU3RPLEVBQU0sSUFlNUMsT0FiQWczQixFQUNLMzNCLE1BQU1tSCxJQUdIQSxhQUFpQjBnQyxXQUNqQmQsR0FBaUJ0MEIsSUFBSXRMLEVBQU91NEIsRUFDaEMsSUFHQ2gvQixPQUFNLFNBR1gwbUMsR0FBc0IzMEIsSUFBSWtsQixFQUFTK0gsR0FDNUIvSCxDQUNYLENBNEdlbVIsQ0FBaUIzaEMsR0FHNUIsR0FBSWdnQyxHQUFlOU0sSUFBSWx6QixHQUNuQixPQUFPZ2dDLEdBQWVub0IsSUFBSTdYLEdBQzlCLE1BQU00aEMsRUFBV3JCLEdBQXVCdmdDLEdBT3hDLE9BSkk0aEMsSUFBYTVoQyxJQUNiZ2dDLEdBQWUxMEIsSUFBSXRMLEVBQU80aEMsR0FDMUIzQixHQUFzQjMwQixJQUFJczJCLEVBQVU1aEMsSUFFakM0aEMsQ0FDWCxDQUNBLE1BQU1kLEdBQVU5Z0MsR0FBVWlnQyxHQUFzQnBvQixJQUFJN1gsR0M1S3BELFNBQVM2aEMsR0FBT25oQyxFQUFNb2hDLEdBQVMsUUFBRUMsRUFBTyxRQUFFQyxFQUFPLFNBQUVDLEVBQVEsV0FBRUMsR0FBZSxDQUFDLEdBQ3pFLE1BQU0zSixFQUFVSCxVQUFVcjdCLEtBQUsyRCxFQUFNb2hDLEdBQy9CSyxFQUFjLEdBQUs1SixHQW9CekIsT0FuQkl5SixHQUNBekosRUFBUXp3QixpQkFBaUIsaUJBQWtCTCxJQUN2Q3U2QixFQUFRLEdBQUt6SixFQUFRRSxRQUFTaHhCLEVBQU0yNkIsV0FBWTM2QixFQUFNNDZCLFdBQVksR0FBSzlKLEVBQVFrSSxhQUFjaDVCLEVBQU0sSUFHdkdzNkIsR0FDQXhKLEVBQVF6d0IsaUJBQWlCLFdBQVlMLEdBQVVzNkIsRUFFL0N0NkIsRUFBTTI2QixXQUFZMzZCLEVBQU00NkIsV0FBWTU2QixLQUV4QzA2QixFQUNLdHBDLE1BQU15cEMsSUFDSEosR0FDQUksRUFBR3g2QixpQkFBaUIsU0FBUyxJQUFNbzZCLE1BQ25DRCxHQUNBSyxFQUFHeDZCLGlCQUFpQixpQkFBa0JMLEdBQVV3NkIsRUFBU3g2QixFQUFNMjZCLFdBQVkzNkIsRUFBTTQ2QixXQUFZNTZCLElBQ2pHLElBRUNsTyxPQUFNLFNBQ0o0b0MsQ0FDWCxDQWdCQSxNQUFNSSxHQUFjLENBQUMsTUFBTyxTQUFVLFNBQVUsYUFBYyxTQUN4REMsR0FBZSxDQUFDLE1BQU8sTUFBTyxTQUFVLFNBQ3hDQyxHQUFnQixJQUFJek8sSUFDMUIsU0FBUzBPLEdBQVVwbEMsRUFBUTZGLEdBQ3ZCLEtBQU03RixhQUFrQmtqQyxjQUNsQnI5QixLQUFRN0YsR0FDTSxpQkFBVDZGLEVBQ1AsT0FFSixHQUFJcy9CLEdBQWM1cUIsSUFBSTFVLEdBQ2xCLE9BQU9zL0IsR0FBYzVxQixJQUFJMVUsR0FDN0IsTUFBTXcvQixFQUFpQngvQixFQUFLNUcsUUFBUSxhQUFjLElBQzVDcW1DLEVBQVd6L0IsSUFBU3cvQixFQUNwQkUsRUFBVUwsR0FBYTluQyxTQUFTaW9DLEdBQ3RDLEtBRUVBLEtBQW1CQyxFQUFXdEIsU0FBV0QsZ0JBQWdCOWlDLGFBQ3JEc2tDLElBQVdOLEdBQVk3bkMsU0FBU2lvQyxHQUNsQyxPQUVKLE1BQU01RCxFQUFTK0QsZUFBZ0JDLEtBQWNuRSxHQUV6QyxNQUFNb0MsRUFBS2hwQyxLQUFLeW9DLFlBQVlzQyxFQUFXRixFQUFVLFlBQWMsWUFDL0QsSUFBSXZsQyxFQUFTMGpDLEVBQUdnQyxNQVFoQixPQVBJSixJQUNBdGxDLEVBQVNBLEVBQU80VixNQUFNMHJCLEVBQUt4aUIsaUJBTWpCM2pCLFFBQVFxa0MsSUFBSSxDQUN0QngvQixFQUFPcWxDLE1BQW1CL0QsR0FDMUJpRSxHQUFXN0IsRUFBRzlZLFFBQ2QsRUFDUixFQUVBLE9BREF1YSxHQUFjbjNCLElBQUluSSxFQUFNNDdCLEdBQ2pCQSxDQUNYLENBQ2EsSUFBQ2tFLE1EK0JlL0MsR0FBekJBLEdDL0J1QixJQUNwQitDLEdBQ0hwckIsSUFBSyxDQUFDdmEsRUFBUTZGLEVBQU1nOUIsSUFBYXVDLEdBQVVwbEMsRUFBUTZGLElBQVM4L0IsR0FBU3ByQixJQUFJdmEsRUFBUTZGLEVBQU1nOUIsR0FDdkZqTixJQUFLLENBQUM1MUIsRUFBUTZGLE1BQVd1L0IsR0FBVXBsQyxFQUFRNkYsSUFBUzgvQixHQUFTL1AsSUFBSTUxQixFQUFRNkYsSUNyRTdFLE1BQU0rL0IsR0FDRixXQUFBN3FDLENBQVkyZCxHQUNSaGUsS0FBS2dlLFVBQVlBLENBQ3JCLENBR0EscUJBQUFtdEIsR0FJSSxPQUhrQm5yQyxLQUFLZ2UsVUFBVStuQixlQUk1QjNuQixLQUFJd25CLElBQ0wsR0FvQlosU0FBa0NBLEdBQzlCLE1BQU12VSxFQUFZdVUsRUFBU3BCLGVBQzNCLE1BQWtGLGFBQTFFblQsYUFBNkMsRUFBU0EsRUFBVWh1QixLQUM1RSxDQXZCZ0IrbkMsQ0FBeUJ4RixHQUFXLENBQ3BDLE1BQU14RSxFQUFVd0UsRUFBU3RCLGVBQ3pCLE1BQU8sR0FBR2xELEVBQVFpSyxXQUFXakssRUFBUTBJLFNBQ3pDLENBRUksT0FBTyxJQUNYLElBRUNuZ0MsUUFBTzJoQyxHQUFhQSxJQUNwQnI1QixLQUFLLElBQ2QsRUFlSixNQUFNczVCLEdBQVMsZ0JBQ1RDLEdBQVksU0FrQlpDLEdBQVMsSUFBSXpFLEdBQU8saUJBRXBCMEUsR0FBUyx1QkFFVEMsR0FBUyw2QkFFVEMsR0FBUyxzQkFFVEMsR0FBUyw2QkFFVEMsR0FBUyxzQkFFVEMsR0FBUyxpQkFFVEMsR0FBUyx3QkFFVEMsR0FBUyxxQkFFVEMsR0FBUyw0QkFFVEMsR0FBUyxzQkFFVEMsR0FBUyw2QkFFVEMsR0FBUywwQkFFVEMsR0FBUyxpQ0FFVEMsR0FBUyxzQkFFVEMsR0FBUyw2QkFFVEMsR0FBUyx3QkFFVEMsR0FBUywrQkFFVEMsR0FBUywwQkFFVEMsR0FBUyxpQ0FFVEMsR0FBUyxvQkFFVEMsR0FBUywyQkFFVEMsR0FBUyxzQkFFVEMsR0FBUyw2QkFFVCxHQUFPLFdBd0JQLEdBQXFCLFlBQ3JCQyxHQUFzQixDQUN4QixDQUFDMUIsSUFBUyxZQUNWLENBQUNHLElBQVMsbUJBQ1YsQ0FBQ0UsSUFBUyxpQkFDVixDQUFDRCxJQUFTLHdCQUNWLENBQUNHLElBQVMsaUJBQ1YsQ0FBQ0QsSUFBUyx3QkFDVixDQUFDRSxJQUFTLFlBQ1YsQ0FBQ0MsSUFBUyxtQkFDVixDQUFDQyxJQUFTLFlBQ1YsQ0FBQ0MsSUFBUyxtQkFDVixDQUFDQyxJQUFTLFVBQ1YsQ0FBQ0MsSUFBUyxpQkFDVixDQUFDQyxJQUFTLFdBQ1YsQ0FBQ0MsSUFBUyxrQkFDVixDQUFDQyxJQUFTLFdBQ1YsQ0FBQ0MsSUFBUyxrQkFDVixDQUFDQyxJQUFTLFlBQ1YsQ0FBQ0MsSUFBUyxtQkFDVixDQUFDQyxJQUFTLFVBQ1YsQ0FBQ0MsSUFBUyxpQkFDVixDQUFDQyxJQUFTLFdBQ1YsQ0FBQ0MsSUFBUyxrQkFDVixDQUFDQyxJQUFTLFdBQ1YsQ0FBQ0MsSUFBUyxrQkFDVixVQUFXLFVBQ1gsQ0FBQyxJQUFPLGVBc0JORSxHQUFRLElBQUlsUixJQU9abVIsR0FBYyxJQUFJblIsSUFNeEIsU0FBU29SLEdBQWNDLEVBQUtoYyxHQUN4QixJQUNJZ2MsRUFBSXJ2QixVQUFVMm5CLGFBQWF0VSxFQUMvQixDQUNBLE1BQU9ueEIsR0FDSHVyQyxHQUFPakUsTUFBTSxhQUFhblcsRUFBVTNvQiw0Q0FBNEMya0MsRUFBSTNrQyxPQUFReEksRUFDaEcsQ0FDSixDQWVBLFNBQVNvdEMsR0FBbUJqYyxHQUN4QixNQUFNa2MsRUFBZ0JsYyxFQUFVM29CLEtBQ2hDLEdBQUl5a0MsR0FBWWpTLElBQUlxUyxHQUVoQixPQURBOUIsR0FBT2pFLE1BQU0sc0RBQXNEK0YsT0FDNUQsRUFFWEosR0FBWTc1QixJQUFJaTZCLEVBQWVsYyxHQUUvQixJQUFLLE1BQU1nYyxLQUFPSCxHQUFNaGxDLFNBQ3BCa2xDLEdBQWNDLEVBQUtoYyxHQUV2QixPQUFPLENBQ1gsQ0FVQSxTQUFTLEdBQWFnYyxFQUFLM2tDLEdBQ3ZCLE1BQU04a0MsRUFBc0JILEVBQUlydkIsVUFDM0I2bkIsWUFBWSxhQUNadkIsYUFBYSxDQUFFQyxVQUFVLElBSTlCLE9BSElpSixHQUNLQSxFQUFvQkMsbUJBRXRCSixFQUFJcnZCLFVBQVU2bkIsWUFBWW45QixFQUNyQyxDQXFDQSxNQWVNZ2xDLEdBQWdCLElBQUl2TSxHQUFhLE1BQU8sV0FmL0IsQ0FDWCxTQUFrQyw2RUFFbEMsZUFBOEMsZ0NBQzlDLGdCQUFnRCxrRkFDaEQsY0FBNEMsa0RBQzVDLGFBQTBDLDBFQUMxQyx1QkFBOEQsNkVBRTlELHVCQUE4RCx3REFDOUQsV0FBc0MsZ0ZBQ3RDLFVBQW9DLHFGQUNwQyxVQUFzQyxtRkFDdEMsYUFBMEMsd0ZBb0I5QyxNQUFNd00sR0FDRixXQUFBdHRDLENBQVltUCxFQUFTeXdCLEVBQVFqaUIsR0FDekJoZSxLQUFLNHRDLFlBQWEsRUFDbEI1dEMsS0FBSzZ0QyxTQUFXam9DLE9BQU9rekIsT0FBTyxDQUFDLEVBQUd0cEIsR0FDbEN4UCxLQUFLOHRDLFFBQVVsb0MsT0FBT2t6QixPQUFPLENBQUMsRUFBR21ILEdBQ2pDamdDLEtBQUsrdEMsTUFBUTlOLEVBQU92M0IsS0FDcEIxSSxLQUFLZ3VDLGdDQUNEL04sRUFBT2dPLCtCQUNYanVDLEtBQUtrdUMsV0FBYWx3QixFQUNsQmhlLEtBQUtnZSxVQUFVMm5CLGFBQWEsSUFBSXZVLEdBQVUsT0FBTyxJQUFNcHhCLE1BQU0sVUFDakUsQ0FDQSxrQ0FBSWl1QyxHQUVBLE9BREFqdUMsS0FBS211QyxpQkFDRW51QyxLQUFLZ3VDLCtCQUNoQixDQUNBLGtDQUFJQyxDQUErQjdHLEdBQy9CcG5DLEtBQUttdUMsaUJBQ0xudUMsS0FBS2d1QyxnQ0FBa0M1RyxDQUMzQyxDQUNBLFFBQUkxK0IsR0FFQSxPQURBMUksS0FBS211QyxpQkFDRW51QyxLQUFLK3RDLEtBQ2hCLENBQ0EsV0FBSXYrQixHQUVBLE9BREF4UCxLQUFLbXVDLGlCQUNFbnVDLEtBQUs2dEMsUUFDaEIsQ0FDQSxVQUFJNU4sR0FFQSxPQURBamdDLEtBQUttdUMsaUJBQ0VudUMsS0FBSzh0QyxPQUNoQixDQUNBLGFBQUk5dkIsR0FDQSxPQUFPaGUsS0FBS2t1QyxVQUNoQixDQUNBLGFBQUlFLEdBQ0EsT0FBT3B1QyxLQUFLNHRDLFVBQ2hCLENBQ0EsYUFBSVEsQ0FBVWhILEdBQ1ZwbkMsS0FBSzR0QyxXQUFheEcsQ0FDdEIsQ0FLQSxjQUFBK0csR0FDSSxHQUFJbnVDLEtBQUtvdUMsVUFDTCxNQUFNVixHQUFjNWlDLE9BQU8sY0FBMEMsQ0FBRXVqQyxRQUFTcnVDLEtBQUsrdEMsT0FFN0YsRUF5QkosU0FBU08sR0FBY1QsRUFBVVUsRUFBWSxDQUFDLEdBQzFDLElBQUkvK0IsRUFBVXErQixFQUNXLGlCQUFkVSxJQUVQQSxFQUFZLENBQUU3bEMsS0FERDZsQyxJQUdqQixNQUFNdE8sRUFBU3I2QixPQUFPa3pCLE9BQU8sQ0FBRXB3QixLQUFNLEdBQW9CdWxDLGdDQUFnQyxHQUFTTSxHQUM1RjdsQyxFQUFPdTNCLEVBQU92M0IsS0FDcEIsR0FBb0IsaUJBQVRBLElBQXNCQSxFQUM3QixNQUFNZ2xDLEdBQWM1aUMsT0FBTyxlQUE0QyxDQUNuRXVqQyxRQUFTeGpDLE9BQU9uQyxLQUl4QixHQURBOEcsSUFBWUEsRUFBVXV3QixPQUNqQnZ3QixFQUNELE1BQU1rK0IsR0FBYzVpQyxPQUFPLGNBRS9CLE1BQU0wakMsRUFBY3RCLEdBQU1ydEIsSUFBSW5YLEdBQzlCLEdBQUk4bEMsRUFBYSxDQUViLEdBQUk1TSxHQUFVcHlCLEVBQVNnL0IsRUFBWWgvQixVQUMvQm95QixHQUFVM0IsRUFBUXVPLEVBQVl2TyxRQUM5QixPQUFPdU8sRUFHUCxNQUFNZCxHQUFjNWlDLE9BQU8sZ0JBQThDLENBQUV1akMsUUFBUzNsQyxHQUU1RixDQUNBLE1BQU1zVixFQUFZLElBQUl5bkIsR0FBbUIvOEIsR0FDekMsSUFBSyxNQUFNMm9CLEtBQWE4YixHQUFZamxDLFNBQ2hDOFYsRUFBVTJuQixhQUFhdFUsR0FFM0IsTUFBTW9kLEVBQVMsSUFBSWQsR0FBZ0JuK0IsRUFBU3l3QixFQUFRamlCLEdBRXBELE9BREFrdkIsR0FBTTU1QixJQUFJNUssRUFBTStsQyxHQUNUQSxDQUNYLENBa0ZBLFNBQVNDLEdBQWdCQyxFQUFrQjdFLEVBQVM4RSxHQUNoRCxJQUFJNU8sRUFHSixJQUFJcUwsRUFBMkQsUUFBaERyTCxFQUFLaU4sR0FBb0IwQixVQUFzQyxJQUFQM08sRUFBZ0JBLEVBQUsyTyxFQUN4RkMsSUFDQXZELEdBQVcsSUFBSXVELEtBRW5CLE1BQU1DLEVBQWtCeEQsRUFBUWx3QixNQUFNLFNBQ2hDMnpCLEVBQWtCaEYsRUFBUTN1QixNQUFNLFNBQ3RDLEdBQUkwekIsR0FBbUJDLEVBQWlCLENBQ3BDLE1BQU1DLEVBQVUsQ0FDWiwrQkFBK0IxRCxvQkFBMEJ2QixPQVk3RCxPQVZJK0UsR0FDQUUsRUFBUXpzQyxLQUFLLGlCQUFpQitvQyxzREFFOUJ3RCxHQUFtQkMsR0FDbkJDLEVBQVF6c0MsS0FBSyxPQUVid3NDLEdBQ0FDLEVBQVF6c0MsS0FBSyxpQkFBaUJ3bkMsMkRBRWxDMkIsR0FBT2hFLEtBQUtzSCxFQUFROThCLEtBQUssS0FFN0IsQ0FDQXE3QixHQUFtQixJQUFJbGMsR0FBVSxHQUFHaWEsYUFBbUIsS0FBTSxDQUFHQSxVQUFTdkIsYUFBWSxXQUN6RixDQTJDQSxNQUVNa0YsR0FBYSwyQkFDbkIsSUFBSUMsR0FBWSxLQUNoQixTQUFTQyxLQTRCTCxPQTNCS0QsS0FDREEsR0FBWXBGLEdBTkosOEJBQ0csRUFLNkIsQ0FDcENHLFFBQVMsQ0FBQ00sRUFBSUYsS0FNVixHQUNTLElBRERBLEVBRUEsSUFDSUUsRUFBRzZFLGtCQUFrQkgsR0FDekIsQ0FDQSxNQUFPOXVDLEdBSUhhLFFBQVEwbUMsS0FBS3ZuQyxFQUNqQixDQUNSLElBRUxxQixPQUFNckIsSUFDTCxNQUFNd3RDLEdBQWM1aUMsT0FBTyxXQUFvQyxDQUMzRHNrQyxxQkFBc0JsdkMsRUFBRW9OLFNBQzFCLEtBR0gyaEMsRUFDWCxDQXVCQW5FLGVBQWV1RSxHQUEyQmhDLEVBQUtpQyxHQUMzQyxJQUNJLE1BQ010RyxTQURXa0csTUFDSHpHLFlBQVl1RyxHQUFZLGFBQ2hDMUcsRUFBY1UsRUFBR1YsWUFBWTBHLFVBQzdCMUcsRUFBWWlILElBQUlELEVBQWlCRSxHQUFXbkMsVUFDNUNyRSxFQUFHOVksSUFDYixDQUNBLE1BQU9od0IsR0FDSCxHQUFJQSxhQUFhNGdDLEdBQ2IySyxHQUFPaEUsS0FBS3ZuQyxFQUFFb04sYUFFYixDQUNELE1BQU1taUMsRUFBYy9CLEdBQWM1aUMsT0FBTyxVQUFvQyxDQUN6RXNrQyxxQkFBc0JsdkMsYUFBNkIsRUFBU0EsRUFBRW9OLFVBRWxFbStCLEdBQU9oRSxLQUFLZ0ksRUFBWW5pQyxRQUM1QixDQUNKLENBQ0osQ0FDQSxTQUFTa2lDLEdBQVduQyxHQUNoQixNQUFPLEdBQUdBLEVBQUkza0MsUUFBUTJrQyxFQUFJNzlCLFFBQVFrZ0MsT0FDdEMsQ0FxQkEsTUFBTUMsR0FDRixXQUFBdHZDLENBQVkyZCxHQUNSaGUsS0FBS2dlLFVBQVlBLEVBVWpCaGUsS0FBSzR2QyxpQkFBbUIsS0FDeEIsTUFBTXZDLEVBQU1ydEMsS0FBS2dlLFVBQVU2bkIsWUFBWSxPQUFPdkIsZUFDOUN0a0MsS0FBSzZ2QyxTQUFXLElBQUlDLEdBQXFCekMsR0FDekNydEMsS0FBSyt2Qyx3QkFBMEIvdkMsS0FBSzZ2QyxTQUFTRyxPQUFPbnZDLE1BQUs0L0IsSUFDckR6Z0MsS0FBSzR2QyxpQkFBbUJuUCxFQUNqQkEsSUFFZixDQVFBLHNCQUFNZ04sR0FDRixJQUFJek4sRUFBSWlRLEVBQ1IsTUFLTUMsRUFMaUJsd0MsS0FBS2dlLFVBQ3ZCNm5CLFlBQVksbUJBQ1p2QixlQUd3QjZHLHdCQUN2QmdGLEVBQU9DLEtBQ2IsSUFBeUYsT0FBbkQsUUFBaENwUSxFQUFLaGdDLEtBQUs0dkMsd0JBQXFDLElBQVA1UCxPQUFnQixFQUFTQSxFQUFHcVEsY0FDdEVyd0MsS0FBSzR2Qyx1QkFBeUI1dkMsS0FBSyt2Qyx3QkFFc0QsT0FBbkQsUUFBaENFLEVBQUtqd0MsS0FBSzR2Qyx3QkFBcUMsSUFBUEssT0FBZ0IsRUFBU0EsRUFBR0ksZUFNMUVyd0MsS0FBSzR2QyxpQkFBaUJVLHdCQUEwQkgsSUFDaERud0MsS0FBSzR2QyxpQkFBaUJTLFdBQVc5RyxNQUFLZ0gsR0FBdUJBLEVBQW9CSixPQUFTQSxJQWE5RixPQVJJbndDLEtBQUs0dkMsaUJBQWlCUyxXQUFXL3RDLEtBQUssQ0FBRTZ0QyxPQUFNRCxVQUdsRGx3QyxLQUFLNHZDLGlCQUFpQlMsV0FBYXJ3QyxLQUFLNHZDLGlCQUFpQlMsV0FBVzFtQyxRQUFPNG1DLElBQ3ZFLE1BQU1DLEVBQWMsSUFBSTU5QixLQUFLMjlCLEVBQW9CSixNQUFNTSxVQUV2RCxPQURZNzlCLEtBQUtELE1BQ0o2OUIsR0ExRHFCLE1BMEQrQixJQUU5RHh3QyxLQUFLNnZDLFNBQVNhLFVBQVUxd0MsS0FBSzR2QyxpQkFDeEMsQ0FRQSx5QkFBTWUsR0FDRixJQUFJM1EsRUFLSixHQUo4QixPQUExQmhnQyxLQUFLNHZDLHdCQUNDNXZDLEtBQUsrdkMsd0JBRzBFLE9BQW5ELFFBQWhDL1AsRUFBS2hnQyxLQUFLNHZDLHdCQUFxQyxJQUFQNVAsT0FBZ0IsRUFBU0EsRUFBR3FRLGFBQzFCLElBQTVDcndDLEtBQUs0dkMsaUJBQWlCUyxXQUFXcnVDLE9BQ2pDLE1BQU8sR0FFWCxNQUFNbXVDLEVBQU9DLE1BRVAsaUJBQUVRLEVBQWdCLGNBQUVDLEdBeUJsQyxTQUFvQ0MsRUFBaUJDLEVBNUc1QixNQStHckIsTUFBTUgsRUFBbUIsR0FFekIsSUFBSUMsRUFBZ0JDLEVBQWdCNXFDLFFBQ3BDLElBQUssTUFBTXFxQyxLQUF1Qk8sRUFBaUIsQ0FFL0MsTUFBTUUsRUFBaUJKLEVBQWlCdDBCLE1BQUsyMEIsR0FBTUEsRUFBR2YsUUFBVUssRUFBb0JMLFFBQ3BGLEdBQUtjLEdBaUJELEdBSEFBLEVBQWVFLE1BQU01dUMsS0FBS2l1QyxFQUFvQkosTUFHMUNnQixHQUFXUCxHQUFvQkcsRUFBUyxDQUN4Q0MsRUFBZUUsTUFBTUUsTUFDckIsS0FDSixPQWRBLEdBSkFSLEVBQWlCdHVDLEtBQUssQ0FDbEI0dEMsTUFBT0ssRUFBb0JMLE1BQzNCZ0IsTUFBTyxDQUFDWCxFQUFvQkosUUFFNUJnQixHQUFXUCxHQUFvQkcsRUFBUyxDQUd4Q0gsRUFBaUJRLE1BQ2pCLEtBQ0osQ0FhSlAsRUFBZ0JBLEVBQWMzcUMsTUFBTSxFQUN4QyxDQUNBLE1BQU8sQ0FDSDBxQyxtQkFDQUMsZ0JBRVIsQ0FoRW9EUSxDQUEyQnJ4QyxLQUFLNHZDLGlCQUFpQlMsWUFDdkZpQixFQUFldFMsR0FBOEJwTyxLQUFLMmdCLFVBQVUsQ0FBRXpILFFBQVMsRUFBR3VHLFdBQVlPLEtBZ0I1RixPQWRBNXdDLEtBQUs0dkMsaUJBQWlCVSxzQkFBd0JILEVBQzFDVSxFQUFjN3VDLE9BQVMsR0FFdkJoQyxLQUFLNHZDLGlCQUFpQlMsV0FBYVEsUUFJN0I3d0MsS0FBSzZ2QyxTQUFTYSxVQUFVMXdDLEtBQUs0dkMsb0JBR25DNXZDLEtBQUs0dkMsaUJBQWlCUyxXQUFhLEdBRTlCcndDLEtBQUs2dkMsU0FBU2EsVUFBVTF3QyxLQUFLNHZDLG1CQUUvQjBCLENBQ1gsRUFFSixTQUFTbEIsS0FHTCxPQUZjLElBQUl4OUIsTUFFTGswQixjQUFjMEssVUFBVSxFQUFHLEdBQzVDLENBeUNBLE1BQU0xQixHQUNGLFdBQUF6dkMsQ0FBWWd0QyxHQUNScnRDLEtBQUtxdEMsSUFBTUEsRUFDWHJ0QyxLQUFLeXhDLHdCQUEwQnp4QyxLQUFLMHhDLDhCQUN4QyxDQUNBLGtDQUFNQSxHQUNGLFFBQUssTUFJTSxLQUNGN3dDLE1BQUssS0FBTSxJQUNYVSxPQUFNLEtBQU0sR0FFekIsQ0FJQSxVQUFNeXVDLEdBRUYsU0FEOEJod0MsS0FBS3l4Qyx3QkFJOUIsQ0FDRCxNQUFNRSxRQTFPbEI3RyxlQUEyQ3VDLEdBQ3ZDLElBQ0ksTUFDTXJFLFNBRFdrRyxNQUNIekcsWUFBWXVHLElBQ3BCdk8sUUFBZXVJLEVBQUdWLFlBQVkwRyxJQUFZbnZCLElBQUkydkIsR0FBV25DLElBSS9ELGFBRE1yRSxFQUFHOVksS0FDRnVRLENBQ1gsQ0FDQSxNQUFPdmdDLEdBQ0gsR0FBSUEsYUFBYTRnQyxHQUNiMkssR0FBT2hFLEtBQUt2bkMsRUFBRW9OLGFBRWIsQ0FDRCxNQUFNbWlDLEVBQWMvQixHQUFjNWlDLE9BQU8sVUFBa0MsQ0FDdkVza0MscUJBQXNCbHZDLGFBQTZCLEVBQVNBLEVBQUVvTixVQUVsRW0rQixHQUFPaEUsS0FBS2dJLEVBQVluaUMsUUFDNUIsQ0FDSixDQUNKLENBcU42Q3NrQyxDQUE0QjV4QyxLQUFLcXRDLEtBQ2xFLE9BQUlzRSxhQUErRCxFQUFTQSxFQUFtQnRCLFlBQ3BGc0IsRUFHQSxDQUFFdEIsV0FBWSxHQUU3QixDQVZJLE1BQU8sQ0FBRUEsV0FBWSxHQVc3QixDQUVBLGVBQU1LLENBQVVtQixHQUNaLElBQUk3UixFQUVKLFNBRDhCaGdDLEtBQUt5eEMsd0JBSTlCLENBQ0QsTUFBTUssUUFBaUM5eEMsS0FBS2d3QyxPQUM1QyxPQUFPWCxHQUEyQnJ2QyxLQUFLcXRDLElBQUssQ0FDeENpRCxzQkFBeUUsUUFBakR0USxFQUFLNlIsRUFBaUJ2Qiw2QkFBMEMsSUFBUHRRLEVBQWdCQSxFQUFLOFIsRUFBeUJ4QixzQkFDL0hELFdBQVl3QixFQUFpQnhCLFlBRXJDLENBQ0osQ0FFQSxTQUFNNW5DLENBQUlvcEMsR0FDTixJQUFJN1IsRUFFSixTQUQ4QmhnQyxLQUFLeXhDLHdCQUk5QixDQUNELE1BQU1LLFFBQWlDOXhDLEtBQUtnd0MsT0FDNUMsT0FBT1gsR0FBMkJydkMsS0FBS3F0QyxJQUFLLENBQ3hDaUQsc0JBQXlFLFFBQWpEdFEsRUFBSzZSLEVBQWlCdkIsNkJBQTBDLElBQVB0USxFQUFnQkEsRUFBSzhSLEVBQXlCeEIsc0JBQy9IRCxXQUFZLElBQ0x5QixFQUF5QnpCLGNBQ3pCd0IsRUFBaUJ4QixhQUdoQyxDQUNKLEVBT0osU0FBU2MsR0FBV0wsR0FFaEIsT0FBTzlSLEdBRVBwTyxLQUFLMmdCLFVBQVUsQ0FBRXpILFFBQVMsRUFBR3VHLFdBQVlTLEtBQW9COXVDLE1BQ2pFLENBbUJJc3JDLEdBQW1CLElBQUlsYyxHQUFVLG1CQUFtQnBULEdBQWEsSUFBSWt0QixHQUEwQmx0QixJQUFZLFlBQzNHc3ZCLEdBQW1CLElBQUlsYyxHQUFVLGFBQWFwVCxHQUFhLElBQUkyeEIsR0FBcUIzeEIsSUFBWSxZQUVoRzB3QixHQUFnQm5ELEdBQVFDLEdBYUwsSUFYbkJrRCxHQUFnQm5ELEdBQVFDLEdBQVcsV0FFbkNrRCxHQUFnQixVQUFXLElDdjVCL0JBLEdBbkJXLFdBQ0csU0FrQmlCLE9DakIvQixNQUFNLEdBQU8sMEJBQ1AsR0FBVSxRQW1CVnFELEdBQWtCLEtBQUssS0FDdkJDLEdBQXdCLFNBOEJ4QixHQUFnQixJQUFJN1EsR0EzQlYsZ0JBQ0ssZ0JBa0JTLENBQzFCLDRCQUF5RSxrREFDekUsaUJBQW1ELDJDQUNuRCx5QkFBbUUsbUNBQ25FLGlCQUFtRCw2RkFDbkQsY0FBNkMsa0RBQzdDLDhCQUE2RSw2RUFJakYsU0FBUzhRLEdBQWN6d0MsR0FDbkIsT0FBUUEsYUFBaUJzL0IsSUFDckJ0L0IsRUFBTXUvQixLQUFLcitCLFNBQVMsaUJBQzVCLENBa0JBLFNBQVN3dkMsSUFBeUIsVUFBRUMsSUFDaEMsTUFBTyw0REFBcUNBLGlCQUNoRCxDQUNBLFNBQVNDLEdBQWlDanRDLEdBQ3RDLE1BQU8sQ0FDSGt0QyxNQUFPbHRDLEVBQVNrdEMsTUFDaEJDLGNBQWUsRUFDZkMsV0F1Q21DQyxFQXZDVXJ0QyxFQUFTb3RDLFVBeUNuREUsT0FBT0QsRUFBa0JqdUMsUUFBUSxJQUFLLFNBeEN6Q211QyxhQUFjOS9CLEtBQUtELE9Bc0MzQixJQUEyQzYvQixDQXBDM0MsQ0FDQTFILGVBQWU2SCxHQUFxQkMsRUFBYXp0QyxHQUM3QyxNQUNNMHRDLFNBRHFCMXRDLEVBQVMydEMsUUFDTHR4QyxNQUMvQixPQUFPLEdBQWNzSixPQUFPLGlCQUFpRCxDQUN6RThuQyxjQUNBRyxXQUFZRixFQUFVOVIsS0FDdEJpUyxjQUFlSCxFQUFVdmxDLFFBQ3pCMmxDLGFBQWNKLEVBQVUzdEMsUUFFaEMsQ0FDQSxTQUFTZ3VDLElBQVcsT0FBRUMsSUFDbEIsT0FBTyxJQUFJQyxRQUFRLENBQ2YsZUFBZ0IsbUJBQ2hCQyxPQUFRLG1CQUNSLGlCQUFrQkYsR0FFMUIsQ0FXQXJJLGVBQWV3SSxHQUFtQjFaLEdBQzlCLE1BQU02RyxRQUFlN0csSUFDckIsT0FBSTZHLEVBQU92N0IsUUFBVSxLQUFPdTdCLEVBQU92N0IsT0FBUyxJQUVqQzAwQixJQUVKNkcsQ0FDWCxDQWtGQSxTQUFTcFIsR0FBTWtrQixHQUNYLE9BQU8sSUFBSTl5QyxTQUFRQyxJQUNmcUcsV0FBV3JHLEVBQVM2eUMsRUFBRyxHQUUvQixDQXVDQSxNQUFNQyxHQUFvQixvQkFNMUIsU0FBU0MsS0FDTCxJQUdJLE1BQU1DLEVBQWUsSUFBSUMsV0FBVyxLQUNyQi8wQixLQUFLZzFCLFFBQVVoMUIsS0FBS2kxQixVQUM1QkMsZ0JBQWdCSixHQUV2QkEsRUFBYSxHQUFLLElBQWNBLEVBQWEsR0FBSyxHQUNsRCxNQUFNSyxFQVNkLFNBQWdCTCxHQTdDaEIsSUFBK0J6dEMsRUFpRDNCLE9BakQyQkEsRUE4Q2F5dEMsRUE3QzVCeFYsS0FBS3J6QixPQUFPMHpCLGdCQUFnQnQ0QixJQUM3QjFCLFFBQVEsTUFBTyxLQUFLQSxRQUFRLE1BQU8sTUErQzdCeXZDLE9BQU8sRUFBRyxHQUMvQixDQWRvQkMsQ0FBT1AsR0FDbkIsT0FBT0YsR0FBa0JsYixLQUFLeWIsR0FBT0EsRUFmekIsRUFnQmhCLENBQ0EsTUFBTy9ULEdBRUgsTUFuQlksRUFvQmhCLENBQ0osQ0EwQkEsU0FBU2tVLEdBQU9DLEdBQ1osTUFBTyxHQUFHQSxFQUFVOUYsV0FBVzhGLEVBQVV6RSxPQUM3QyxDQWtCQSxNQUFNMEUsR0FBcUIsSUFBSXBZLElBSy9CLFNBQVNxWSxHQUFXRixFQUFXSixHQUMzQixNQUFNanVDLEVBQU1vdUMsR0FBT0MsR0FDbkJHLEdBQXVCeHVDLEVBQUtpdUMsR0FxQ2hDLFNBQTRCanVDLEVBQUtpdUMsR0FDN0IsTUFBTVEsSUFTREMsSUFBb0IscUJBQXNCNTFCLE9BQzNDNDFCLEdBQW1CLElBQUlDLGlCQUFpQix5QkFDeENELEdBQWlCdmMsVUFBWS8zQixJQUN6Qm8wQyxHQUF1QnAwQyxFQUFFdVEsS0FBSzNLLElBQUs1RixFQUFFdVEsS0FBS3NqQyxJQUFJLEdBRy9DUyxJQWRIRCxHQUNBQSxFQUFRcmMsWUFBWSxDQUFFcHlCLE1BQUtpdUMsUUFnQkMsSUFBNUJLLEdBQW1CM3ZCLE1BQWMrdkIsS0FDakNBLEdBQWlCOVQsUUFDakI4VCxHQUFtQixLQWYzQixDQTFDSUUsQ0FBbUI1dUMsRUFBS2l1QyxFQUM1QixDQTBCQSxTQUFTTyxHQUF1Qnh1QyxFQUFLaXVDLEdBQ2pDLE1BQU12TyxFQUFZNE8sR0FBbUJ2MEIsSUFBSS9aLEdBQ3pDLEdBQUswL0IsRUFHTCxJQUFLLE1BQU1qMkIsS0FBWWkyQixFQUNuQmoyQixFQUFTd2tDLEVBRWpCLENBUUEsSUFBSVMsR0FBbUIsS0FrQ3ZCLE1BRU1HLEdBQW9CLCtCQUMxQixJQUFJLEdBQVksS0FDaEIsU0FBUyxLQWdCTCxPQWZLLEtBQ0QsR0FBWTlLLEdBTkUsa0NBQ0csRUFLbUMsQ0FDaERHLFFBQVMsQ0FBQ00sRUFBSUYsS0FPRCxJQUREQSxHQUVBRSxFQUFHNkUsa0JBQWtCd0YsR0FDN0IsS0FJTCxFQUNYLENBRUE3SixlQUFleDNCLEdBQUk2Z0MsRUFBV25zQyxHQUMxQixNQUFNbEMsRUFBTW91QyxHQUFPQyxHQUVibkwsU0FEVyxNQUNIUCxZQUFZa00sR0FBbUIsYUFDdkNyTSxFQUFjVSxFQUFHVixZQUFZcU0sSUFDN0JDLFFBQWtCdE0sRUFBWXpvQixJQUFJL1osR0FNeEMsYUFMTXdpQyxFQUFZaUgsSUFBSXZuQyxFQUFPbEMsU0FDdkJrakMsRUFBRzlZLEtBQ0owa0IsR0FBWUEsRUFBU2IsTUFBUS9yQyxFQUFNK3JDLEtBQ3BDTSxHQUFXRixFQUFXbnNDLEVBQU0rckMsS0FFekIvckMsQ0FDWCxDQUVBOGlDLGVBQWUsR0FBT3FKLEdBQ2xCLE1BQU1ydUMsRUFBTW91QyxHQUFPQyxHQUVibkwsU0FEVyxNQUNIUCxZQUFZa00sR0FBbUIsbUJBQ3ZDM0wsRUFBR1YsWUFBWXFNLElBQW1CelksT0FBT3AyQixTQUN6Q2tqQyxFQUFHOVksSUFDYixDQU9BNGEsZUFBZTkzQixHQUFPbWhDLEVBQVdVLEdBQzdCLE1BQU0vdUMsRUFBTW91QyxHQUFPQyxHQUVibkwsU0FEVyxNQUNIUCxZQUFZa00sR0FBbUIsYUFDdkMzSixFQUFRaEMsRUFBR1YsWUFBWXFNLElBQ3ZCQyxRQUFrQjVKLEVBQU1uckIsSUFBSS9aLEdBQzVCOGpDLEVBQVdpTCxFQUFTRCxHQVcxQixZQVZpQm56QyxJQUFibW9DLFFBQ01vQixFQUFNOU8sT0FBT3AyQixTQUdia2xDLEVBQU11RSxJQUFJM0YsRUFBVTlqQyxTQUV4QmtqQyxFQUFHOVksTUFDTDBaLEdBQWNnTCxHQUFZQSxFQUFTYixNQUFRbkssRUFBU21LLEtBQ3BETSxHQUFXRixFQUFXdkssRUFBU21LLEtBRTVCbkssQ0FDWCxDQXNCQWtCLGVBQWVnSyxHQUFxQkMsR0FDaEMsSUFBSUMsRUFDSixNQUFNQyxRQUEwQmppQyxHQUFPK2hDLEVBQWNaLFdBQVdlLElBQzVELE1BQU1ELEVBa0JkLFNBQXlDQyxHQUtyQyxPQUFPQyxHQUpPRCxHQUFZLENBQ3RCbkIsSUFBS04sS0FDTDJCLG1CQUFvQixHQUc1QixDQXhCa0NDLENBQWdDSCxHQUNwREksRUErQmQsU0FBd0NQLEVBQWVFLEdBQ25ELEdBQTZDLElBQXpDQSxFQUFrQkcsbUJBQTBELENBQzVFLElBQUt4YSxVQUFVMmEsT0FHWCxNQUFPLENBQ0hOLG9CQUNBRCxvQkFIaUN2MEMsUUFBUUUsT0FBTyxHQUFjbUssT0FBTyxpQkFPN0UsTUFBTTBxQyxFQUFrQixDQUNwQnpCLElBQUtrQixFQUFrQmxCLElBQ3ZCcUIsbUJBQW9CLEVBQ3BCSyxpQkFBa0I3aUMsS0FBS0QsT0FFckJxaUMsRUFjZGxLLGVBQW9DaUssRUFBZUUsR0FDL0MsSUFDSSxNQUFNUyxRQTFaZDVLLGdCQUF5QyxVQUFFcUosRUFBUyx5QkFBRXdCLElBQTRCLElBQUU1QixJQUNoRixNQUFNNkIsRUFBVzFELEdBQXlCaUMsR0FDcEMwQixFQUFVM0MsR0FBV2lCLEdBRXJCMkIsRUFBbUJILEVBQXlCclIsYUFBYSxDQUMzREMsVUFBVSxJQUVkLEdBQUl1UixFQUFrQixDQUNsQixNQUFNQyxRQUF5QkQsRUFBaUJuRixzQkFDNUNvRixHQUNBRixFQUFRL3NDLE9BQU8sb0JBQXFCaXRDLEVBRTVDLENBQ0EsTUFBTTFwQyxFQUFPLENBQ1QwbkMsTUFDQWlDLFlBQWFoRSxHQUNidEMsTUFBT3lFLEVBQVV6RSxNQUNqQnVHLFdBQVlsRSxJQUVWeFIsRUFBVSxDQUNad0csT0FBUSxPQUNSOE8sVUFDQXhwQyxLQUFNdWtCLEtBQUsyZ0IsVUFBVWxsQyxJQUVuQmxILFFBQWlCbXVDLElBQW1CLElBQU00QyxNQUFNTixFQUFVclYsS0FDaEUsR0FBSXA3QixFQUFTZ3hDLEdBQUksQ0FDYixNQUFNQyxRQUFzQmp4QyxFQUFTMnRDLE9BT3JDLE1BTm9DLENBQ2hDaUIsSUFBS3FDLEVBQWNyQyxLQUFPQSxFQUMxQnFCLG1CQUFvQixFQUNwQmlCLGFBQWNELEVBQWNDLGFBQzVCQyxVQUFXbEUsR0FBaUNnRSxFQUFjRSxXQUdsRSxDQUVJLFlBQVkzRCxHQUFxQixzQkFBdUJ4dEMsRUFFaEUsQ0FvWGtEb3hDLENBQTBCeEIsRUFBZUUsR0FDbkYsT0FBTzNoQyxHQUFJeWhDLEVBQWNaLFVBQVd1QixFQUN4QyxDQUNBLE1BQU94MUMsR0FhSCxNQVpJK3hDLEdBQWMveEMsSUFBa0MsTUFBNUJBLEVBQUU4Z0MsV0FBVytSLGlCQUczQixHQUFPZ0MsRUFBY1osaUJBSXJCN2dDLEdBQUl5aEMsRUFBY1osVUFBVyxDQUMvQkosSUFBS2tCLEVBQWtCbEIsSUFDdkJxQixtQkFBb0IsSUFHdEJsMUMsQ0FDVixDQUNKLENBbENvQ3MyQyxDQUFxQnpCLEVBQWVTLEdBQ2hFLE1BQU8sQ0FBRVAsa0JBQW1CTyxFQUFpQlIsc0JBQ2pELENBQ0ssT0FBNkMsSUFBekNDLEVBQWtCRyxtQkFDaEIsQ0FDSEgsb0JBQ0FELG9CQUFxQnlCLEdBQXlCMUIsSUFJM0MsQ0FBRUUsb0JBRWpCLENBM0RpQ3lCLENBQStCM0IsRUFBZUUsR0FFdkUsT0FEQUQsRUFBc0JNLEVBQWlCTixvQkFDaENNLEVBQWlCTCxpQkFBaUIsSUFFN0MsTUExUGdCLEtBMFBaQSxFQUFrQmxCLElBRVgsQ0FBRWtCLHdCQUF5QkQsR0FFL0IsQ0FDSEMsb0JBQ0FELHNCQUVSLENBdUVBbEssZUFBZTJMLEdBQXlCMUIsR0FJcEMsSUFBSTc2QixRQUFjeThCLEdBQTBCNUIsRUFBY1osV0FDMUQsS0FBb0MsSUFBN0JqNkIsRUFBTWs3QiwwQkFFSC9sQixHQUFNLEtBQ1puVixRQUFjeThCLEdBQTBCNUIsRUFBY1osV0FFMUQsR0FBaUMsSUFBN0JqNkIsRUFBTWs3QixtQkFBMEQsQ0FFaEUsTUFBTSxrQkFBRUgsRUFBaUIsb0JBQUVELFNBQThCRixHQUFxQkMsR0FDOUUsT0FBSUMsR0FLT0MsQ0FFZixDQUNBLE9BQU8vNkIsQ0FDWCxDQVNBLFNBQVN5OEIsR0FBMEJ4QyxHQUMvQixPQUFPbmhDLEdBQU9taEMsR0FBV2UsSUFDckIsSUFBS0EsRUFDRCxNQUFNLEdBQWNwcUMsT0FBTywwQkFFL0IsT0FBT3FxQyxHQUFxQkQsRUFBUyxHQUU3QyxDQUNBLFNBQVNDLEdBQXFCajdCLEdBQzFCLE9BU2lELEtBRGIrNkIsRUFSRC82QixHQVNUazdCLG9CQUN0QkgsRUFBa0JRLGlCQTdsQkMsSUE2bEJ1QzdpQyxLQUFLRCxNQVR4RCxDQUNIb2hDLElBQUs3NUIsRUFBTTY1QixJQUNYcUIsbUJBQW9CLEdBR3JCbDdCLEVBRVgsSUFBd0MrNkIsQ0FEeEMsQ0FzQkFuSyxlQUFlOEwsSUFBeUIsVUFBRXpDLEVBQVMseUJBQUV3QixHQUE0QlYsR0FDN0UsTUFBTVcsRUFpQ1YsU0FBc0N6QixHQUFXLElBQUVKLElBQy9DLE1BQU8sR0FBRzdCLEdBQXlCaUMsTUFBY0osdUJBQ3JELENBbkNxQjhDLENBQTZCMUMsRUFBV2MsR0FDbkRZLEVBL2hCVixTQUE0QjFCLEdBQVcsYUFBRWtDLElBQ3JDLE1BQU1SLEVBQVUzQyxHQUFXaUIsR0FFM0IsT0FEQTBCLEVBQVEvc0MsT0FBTyxnQkFvQm5CLFNBQWdDdXRDLEdBQzVCLE1BQU8sR0FBR3JFLE1BQXlCcUUsR0FDdkMsQ0F0Qm9DUyxDQUF1QlQsSUFDaERSLENBQ1gsQ0EyaEJvQmtCLENBQW1CNUMsRUFBV2MsR0FFeENhLEVBQW1CSCxFQUF5QnJSLGFBQWEsQ0FDM0RDLFVBQVUsSUFFZCxHQUFJdVIsRUFBa0IsQ0FDbEIsTUFBTUMsUUFBeUJELEVBQWlCbkYsc0JBQzVDb0YsR0FDQUYsRUFBUS9zQyxPQUFPLG9CQUFxQml0QyxFQUU1QyxDQUNBLE1BQU0xcEMsRUFBTyxDQUNUMnFDLGFBQWMsQ0FDVmYsV0FBWWxFLEdBQ1pyQyxNQUFPeUUsRUFBVXpFLFFBR25CblAsRUFBVSxDQUNad0csT0FBUSxPQUNSOE8sVUFDQXhwQyxLQUFNdWtCLEtBQUsyZ0IsVUFBVWxsQyxJQUVuQmxILFFBQWlCbXVDLElBQW1CLElBQU00QyxNQUFNTixFQUFVclYsS0FDaEUsR0FBSXA3QixFQUFTZ3hDLEdBR1QsT0FEMkIvRCxTQURDanRDLEVBQVMydEMsUUFLckMsWUFBWUgsR0FBcUIsc0JBQXVCeHRDLEVBRWhFLENBMkJBMmxDLGVBQWVtTSxHQUFpQmxDLEVBQWVtQyxHQUFlLEdBQzFELElBQUlDLEVBQ0osTUFBTWo5QixRQUFjbEgsR0FBTytoQyxFQUFjWixXQUFXZSxJQUNoRCxJQUFLa0MsR0FBa0JsQyxHQUNuQixNQUFNLEdBQWNwcUMsT0FBTyxrQkFFL0IsTUFBTXVzQyxFQUFlbkMsRUFBU29CLFVBQzlCLElBQUtZLElBK0YyQixLQURkWixFQTlGb0JlLEdBK0Z4Qi9FLGdCQUd0QixTQUE0QmdFLEdBQ3hCLE1BQU0zakMsRUFBTUMsS0FBS0QsTUFDakIsT0FBUUEsRUFBTTJqQyxFQUFVNUQsY0FDcEI0RCxFQUFVNUQsYUFBZTRELEVBQVUvRCxVQUFZNS9CLEVBcHhCdkIsSUFxeEJoQyxDQU5TMmtDLENBQW1CaEIsSUE5RmhCLE9BQU9wQixFQTRGbkIsSUFBMEJvQixFQTFGYixHQUFtQyxJQUEvQmUsRUFBYS9FLGNBR2xCLE9BREE2RSxFQXdCWnJNLGVBQXlDaUssRUFBZW1DLEdBSXBELElBQUloOUIsUUFBY3E5QixHQUF1QnhDLEVBQWNaLFdBQ3ZELEtBQXlDLElBQWxDajZCLEVBQU1vOEIsVUFBVWhFLHFCQUViampCLEdBQU0sS0FDWm5WLFFBQWNxOUIsR0FBdUJ4QyxFQUFjWixXQUV2RCxNQUFNbUMsRUFBWXA4QixFQUFNbzhCLFVBQ3hCLE9BQWdDLElBQTVCQSxFQUFVaEUsY0FFSDJFLEdBQWlCbEMsRUFBZW1DLEdBR2hDWixDQUVmLENBMUMyQmtCLENBQTBCekMsRUFBZW1DLEdBQ2pEaEMsRUFFTixDQUVELElBQUt0YSxVQUFVMmEsT0FDWCxNQUFNLEdBQWN6cUMsT0FBTyxlQUUvQixNQUFNMHFDLEVBMEZsQixTQUE2Q04sR0FDekMsTUFBTXVDLEVBQXNCLENBQ3hCbkYsY0FBZSxFQUNmb0YsWUFBYTlrQyxLQUFLRCxPQUV0QixPQUFPL00sT0FBT2t6QixPQUFPbHpCLE9BQU9rekIsT0FBTyxDQUFDLEVBQUdvYyxHQUFXLENBQUVvQixVQUFXbUIsR0FDbkUsQ0FoR29DRSxDQUFvQ3pDLEdBRTVELE9BREFpQyxFQXNEWnJNLGVBQXdDaUssRUFBZUUsR0FDbkQsSUFDSSxNQUFNcUIsUUFBa0JNLEdBQXlCN0IsRUFBZUUsR0FDMUQyQyxFQUEyQmh5QyxPQUFPa3pCLE9BQU9sekIsT0FBT2t6QixPQUFPLENBQUMsRUFBR21jLEdBQW9CLENBQUVxQixjQUV2RixhQURNaGpDLEdBQUl5aEMsRUFBY1osVUFBV3lELEdBQzVCdEIsQ0FDWCxDQUNBLE1BQU9wMkMsR0FDSCxJQUFJK3hDLEdBQWMveEMsSUFDZSxNQUE1QkEsRUFBRThnQyxXQUFXK1IsWUFBa0QsTUFBNUI3eUMsRUFBRThnQyxXQUFXK1IsV0FLaEQsQ0FDRCxNQUFNNkUsRUFBMkJoeUMsT0FBT2t6QixPQUFPbHpCLE9BQU9rekIsT0FBTyxDQUFDLEVBQUdtYyxHQUFvQixDQUFFcUIsVUFBVyxDQUFFaEUsY0FBZSxXQUM3R2gvQixHQUFJeWhDLEVBQWNaLFVBQVd5RCxFQUN2QyxZQUxVLEdBQU83QyxFQUFjWixXQU0vQixNQUFNajBDLENBQ1YsQ0FDSixDQTFFMkIyM0MsQ0FBeUI5QyxFQUFlUyxHQUNoREEsQ0FDWCxLQUtKLE9BSGtCMkIsUUFDTkEsRUFDTmo5QixFQUFNbzhCLFNBRWhCLENBa0NBLFNBQVNpQixHQUF1QnBELEdBQzVCLE9BQU9uaEMsR0FBT21oQyxHQUFXZSxJQUNyQixJQUFLa0MsR0FBa0JsQyxHQUNuQixNQUFNLEdBQWNwcUMsT0FBTyxrQkFHL0IsT0FpRGdDLEtBREh3ckMsRUFqRFJwQixFQUFTb0IsV0FrRGhCaEUsZUFDZGdFLEVBQVVvQixZQXB5QlMsSUFveUIwQjlrQyxLQUFLRCxNQWpEdkMvTSxPQUFPa3pCLE9BQU9sekIsT0FBT2t6QixPQUFPLENBQUMsRUFBR29jLEdBQVcsQ0FBRW9CLFVBQVcsQ0FBRWhFLGNBQWUsS0FFN0U0QyxFQTZDZixJQUFxQ29CLENBN0NkLEdBRXZCLENBc0JBLFNBQVNjLEdBQWtCbkMsR0FDdkIsWUFBOEJ4ekMsSUFBdEJ3ekMsR0FDcUMsSUFBekNBLEVBQWtCRyxrQkFDMUIsQ0EwUkEsU0FBUzBDLEdBQXFCQyxHQUMxQixPQUFPLEdBQWNqdEMsT0FBTyw0QkFBdUUsQ0FDL0ZpdEMsYUFFUixDQWtCQSxNQUFNQyxHQUFxQixnQkEwQnZCMUssR0FBbUIsSUFBSWxjLEdBQVU0bUIsSUF4QmRoNkIsSUFDbkIsTUFBTXF2QixFQUFNcnZCLEVBQVU2bkIsWUFBWSxPQUFPdkIsZUFFbkM2UCxFQXBEVixTQUEwQjlHLEdBQ3RCLElBQUtBLElBQVFBLEVBQUk3OUIsUUFDYixNQUFNc29DLEdBQXFCLHFCQUUvQixJQUFLekssRUFBSTNrQyxLQUNMLE1BQU1vdkMsR0FBcUIsWUFHL0IsTUFBTUcsRUFBYSxDQUNmLFlBQ0EsU0FDQSxTQUVKLElBQUssTUFBTUMsS0FBV0QsRUFDbEIsSUFBSzVLLEVBQUk3OUIsUUFBUTBvQyxHQUNiLE1BQU1KLEdBQXFCSSxHQUduQyxNQUFPLENBQ0g3SixRQUFTaEIsRUFBSTNrQyxLQUNieXBDLFVBQVc5RSxFQUFJNzlCLFFBQVEyaUMsVUFDdkJnQixPQUFROUYsRUFBSTc5QixRQUFRMmpDLE9BQ3BCekQsTUFBT3JDLEVBQUk3OUIsUUFBUWtnQyxNQUUzQixDQTRCc0J5SSxDQUFpQjlLLEdBUW5DLE1BTjBCLENBQ3RCQSxNQUNBOEcsWUFDQXdCLHlCQUo2QixHQUFhdEksRUFBSyxhQUsvQ3JJLFFBQVMsSUFBTXZrQyxRQUFRQyxVQUVILEdBYTRDLFdBQ3BFNHNDLEdBQW1CLElBQUlsYyxHQTFCUywwQkFjWHBULElBQ3JCLE1BRU0rMkIsRUFBZ0IsR0FGVi8yQixFQUFVNm5CLFlBQVksT0FBT3ZCLGVBRUQwVCxJQUFvQjFULGVBSzVELE1BSjhCLENBQzFCOFQsTUFBTyxJQXRSZnROLGVBQXFCaUssR0FDakIsTUFBTXNELEVBQW9CdEQsR0FDcEIsa0JBQUVFLEVBQWlCLG9CQUFFRCxTQUE4QkYsR0FBcUJ1RCxHQVM5RSxPQVJJckQsRUFDQUEsRUFBb0J6ekMsTUFBTVIsUUFBUVMsT0FLbEN5MUMsR0FBaUJvQixHQUFtQjkyQyxNQUFNUixRQUFRUyxPQUUvQ3l6QyxFQUFrQmxCLEdBQzdCLENBMFFxQnFFLENBQU1yRCxHQUNuQnVELFNBQVdwQixHQWpQbkJwTSxlQUF3QmlLLEVBQWVtQyxHQUFlLEdBQ2xELE1BQU1tQixFQUFvQnRELEVBSzFCLGFBRUpqSyxlQUFnRGlLLEdBQzVDLE1BQU0sb0JBQUVDLFNBQThCRixHQUFxQkMsR0FDdkRDLFNBRU1BLENBRWQsQ0FaVXVELENBQWlDRixVQUdmcEIsR0FBaUJvQixFQUFtQm5CLElBQzNDN0UsS0FDckIsQ0EwT29DaUcsQ0FBU3ZELEVBQWVtQyxHQUU1QixHQUltRCxZQVVuRnhJLEdBQWdCLEdBQU0sSUFFdEJBLEdBQWdCLEdBQU0sR0FBUyxXQ3RtQy9CLE1BQU04SixHQUFpQixZQU1qQkMsR0FBVywyQ0FrQlgsR0FBUyxJQUFJelIsR0FBTyx1QkE4Q3BCLEdBQWdCLElBQUk3RixHQUFhLFlBQWEsWUE1QnJDLENBQ1gsaUJBQXdELDBJQUd4RCxzQkFBa0Usa1JBSWxFLCtCQUFvRixpSkFHcEYsK0JBQW9GLHdFQUNwRiw0QkFBOEUsb01BRzlFLHdCQUFzRSxvTUFHdEUsaUJBQXdELHlLQUV4RCxzQkFBa0Usa0VBQ2xFLGFBQWdELDhIQUVoRCxZQUE4Qyw0SEFFOUMsZUFBb0Qsa0NBQ3BELHdCQUFzRSxpRUF1QjFFLFNBQVN1WCxHQUFnQ0MsR0FDckMsSUFBS0EsRUFBSUMsV0FBV0gsSUFBVyxDQUMzQixNQUFNSSxFQUFNLEdBQWMvdEMsT0FBTyx3QkFBb0UsQ0FDakdndUMsUUFBU0gsSUFHYixPQURBLEdBQU9sUixLQUFLb1IsRUFBSXZyQyxTQUNULEVBQ1gsQ0FDQSxPQUFPcXJDLENBQ1gsQ0FPQSxTQUFTSSxHQUFrQkMsR0FDdkIsT0FBT3Y0QyxRQUFRcWtDLElBQUlrVSxFQUFTNTZCLEtBQUlvYSxHQUFXQSxFQUFRajNCLE9BQU1yQixHQUFLQSxNQUNsRSxDQTBTQSxNQUFNKzRDLEdBQW1CLElBZnpCLE1BQ0ksV0FBQTU0QyxDQUFZNjRDLEVBQW1CLENBQUMsRUFBRzVXLEVBTFYsS0FNckJ0aUMsS0FBS2s1QyxpQkFBbUJBLEVBQ3hCbDVDLEtBQUtzaUMsZUFBaUJBLENBQzFCLENBQ0EsbUJBQUE2VyxDQUFvQnpKLEdBQ2hCLE9BQU8xdkMsS0FBS2s1QyxpQkFBaUJ4SixFQUNqQyxDQUNBLG1CQUFBMEosQ0FBb0IxSixFQUFPMkosR0FDdkJyNUMsS0FBS2s1QyxpQkFBaUJ4SixHQUFTMkosQ0FDbkMsQ0FDQSxzQkFBQUMsQ0FBdUI1SixVQUNaMXZDLEtBQUtrNUMsaUJBQWlCeEosRUFDakMsR0FPSixTQUFTLEdBQVd5RCxHQUNoQixPQUFPLElBQUlDLFFBQVEsQ0FDZkMsT0FBUSxtQkFDUixpQkFBa0JGLEdBRTFCLENBbUNBckksZUFBZXlPLEdBQTRCbE0sRUFFM0NtTSxFQUFZUCxHQUFrQlEsR0FDMUIsTUFBTSxNQUFFL0osRUFBSyxPQUFFeUQsRUFBTSxjQUFFdUcsR0FBa0JyTSxFQUFJNzlCLFFBQzdDLElBQUtrZ0MsRUFDRCxNQUFNLEdBQWM1a0MsT0FBTyxhQUUvQixJQUFLcW9DLEVBQVEsQ0FDVCxHQUFJdUcsRUFDQSxNQUFPLENBQ0hBLGdCQUNBaEssU0FHUixNQUFNLEdBQWM1a0MsT0FBTyxhQUMvQixDQUNBLE1BQU1vdUMsRUFBbUJNLEVBQVVMLG9CQUFvQnpKLElBQVUsQ0FDN0RyTixhQUFjLEVBQ2RzWCxzQkFBdUIvbUMsS0FBS0QsT0FFMUJpbkMsRUFBUyxJQUFJQyxHQUtuQixPQUpBOXlDLFlBQVcrakMsVUFFUDhPLEVBQU9FLE9BQU8sUUFDR3I0QyxJQUFsQmc0QyxFQUE4QkEsRUF4ZFIsS0F5ZGxCTSxHQUFtQyxDQUFFckssUUFBT3lELFNBQVF1RyxpQkFBaUJSLEVBQWtCVSxFQUFRSixFQUMxRyxDQU9BMU8sZUFBZWlQLEdBQW1DQyxHQUFXLHNCQUFFTCxFQUFxQixhQUFFdFgsR0FBZ0J1WCxFQUFRSixFQUFZUCxJQUV0SCxJQUFJalosRUFDSixNQUFNLE1BQUUwUCxFQUFLLGNBQUVnSyxHQUFrQk0sRUFJakMsVUEwREosU0FBNkJKLEVBQVFELEdBQ2pDLE9BQU8sSUFBSWw1QyxTQUFRLENBQUNDLEVBQVNDLEtBRXpCLE1BQU1zNUMsRUFBZ0J4c0MsS0FBS0MsSUFBSWlzQyxFQUF3Qi9tQyxLQUFLRCxNQUFPLEdBQzdEdW5DLEVBQVVuekMsV0FBV3JHLEVBQVN1NUMsR0FFcENMLEVBQU85cEMsa0JBQWlCLEtBQ3BCNm1CLGFBQWF1akIsR0FFYnY1QyxFQUFPLEdBQWNtSyxPQUFPLGlCQUFzRCxDQUM5RTZ1QywwQkFDRCxHQUNMLEdBRVYsQ0F2RWNRLENBQW9CUCxFQUFRRCxFQUN0QyxDQUNBLE1BQU96NUMsR0FDSCxHQUFJdzVDLEVBSUEsT0FIQSxHQUFPalMsS0FDSCw2R0FBdUNpUywwRUFDa0N4NUMsYUFBNkIsRUFBU0EsRUFBRW9OLFlBQzlHLENBQUVvaUMsUUFBT2dLLGlCQUVwQixNQUFNeDVDLENBQ1YsQ0FDQSxJQUNJLE1BQU1pRixRQW5GZDJsQyxlQUFrQ2tQLEdBQzlCLElBQUloYSxFQUNKLE1BQU0sTUFBRTBQLEVBQUssT0FBRXlELEdBQVc2RyxFQUNwQnpaLEVBQVUsQ0FDWndHLE9BQVEsTUFDUjhPLFFBQVMsR0FBVzFDLElBRWxCaUgsRUF4YWlCLDZFQXdhVzcxQyxRQUFRLFdBQVltckMsR0FDaER2cUMsUUFBaUIrd0MsTUFBTWtFLEVBQVE3WixHQUNyQyxHQUF3QixNQUFwQnA3QixFQUFTRCxRQUFzQyxNQUFwQkMsRUFBU0QsT0FBZ0IsQ0FDcEQsSUFBSW0xQyxFQUFlLEdBQ25CLElBRUksTUFBTUMsUUFBc0JuMUMsRUFBUzJ0QyxRQUNILFFBQTdCOVMsRUFBS3NhLEVBQWE5NEMsYUFBMEIsSUFBUHcrQixPQUFnQixFQUFTQSxFQUFHMXlCLFdBQ2xFK3NDLEVBQWVDLEVBQWE5NEMsTUFBTThMLFFBRTFDLENBQ0EsTUFBT2l0QyxHQUFZLENBQ25CLE1BQU0sR0FBY3p2QyxPQUFPLHNCQUFnRSxDQUN2RjB2QyxXQUFZcjFDLEVBQVNELE9BQ3JCdTFDLGdCQUFpQkosR0FFekIsQ0FDQSxPQUFPbDFDLEVBQVMydEMsTUFDcEIsQ0EwRCtCNEgsQ0FBbUJWLEdBRzFDLE9BREFSLEVBQVVGLHVCQUF1QjVKLEdBQzFCdnFDLENBQ1gsQ0FDQSxNQUFPakYsR0FDSCxNQUFNc0IsRUFBUXRCLEVBQ2QsSUF3RFIsU0FBMEJBLEdBQ3RCLEtBQU1BLGFBQWE0Z0MsSUFBbUI1Z0MsRUFBRThnQyxZQUNwQyxPQUFPLEVBR1gsTUFBTXdaLEVBQWEvSCxPQUFPdnlDLEVBQUU4Z0MsV0FBdUIsWUFDbkQsT0FBdUIsTUFBZndaLEdBQ1csTUFBZkEsR0FDZSxNQUFmQSxHQUNlLE1BQWZBLENBQ1IsQ0FsRWFHLENBQWlCbjVDLEdBQVEsQ0FFMUIsR0FEQWc0QyxFQUFVRix1QkFBdUI1SixHQUM3QmdLLEVBSUEsT0FIQSxHQUFPalMsS0FDSCwwR0FBdUNpUywwRUFDa0NsNEMsYUFBcUMsRUFBU0EsRUFBTThMLFlBQzFILENBQUVvaUMsUUFBT2dLLGlCQUdoQixNQUFNeDVDLENBRWQsQ0FDQSxNQUFNKzVDLEVBQXFKLE1BQXJJeEgsT0FBaUYsUUFBekV6UyxFQUFLeCtCLGFBQXFDLEVBQVNBLEVBQU13L0Isa0JBQStCLElBQVBoQixPQUFnQixFQUFTQSxFQUFHd2EsWUFDcklwWSxHQUF1QkMsRUFBY21YLEVBQVVsWCxlQTdJbkMsSUE4SVpGLEdBQXVCQyxFQUFjbVgsRUFBVWxYLGdCQUUvQzRXLEVBQW1CLENBQ3JCUyxzQkFBdUIvbUMsS0FBS0QsTUFBUXNuQyxFQUNwQzVYLGFBQWNBLEVBQWUsR0FLakMsT0FGQW1YLEVBQVVKLG9CQUFvQjFKLEVBQU93SixHQUNyQyxHQUFPMVIsTUFBTSxpQ0FBaUN5UyxZQUN2Q0YsR0FBbUNDLEVBQVdkLEVBQWtCVSxFQUFRSixFQUNuRixDQUNKLENBa0RBLE1BQU1LLEdBQ0YsV0FBQXg1QyxHQUNJTCxLQUFLZ1AsVUFBWSxFQUNyQixDQUNBLGdCQUFBYyxDQUFpQkUsR0FDYmhRLEtBQUtnUCxVQUFVMU0sS0FBSzBOLEVBQ3hCLENBQ0EsS0FBQThwQyxHQUNJOTVDLEtBQUtnUCxVQUFVL0csU0FBUStILEdBQVlBLEtBQ3ZDLEVBc0JKLElBQUk0cUMsR0FpSEFDLEdBcUVKL1AsZUFBZWdRLEdBQXFCek4sRUFBSzBOLEVBQTJCQyxFQUFzQmpHLEVBQWVrRyxFQUFVQyxFQUFlMXJDLEdBQzlILElBQUl3d0IsRUFDSixNQUFNbWIsRUFBdUI1QixHQUE0QmxNLEdBRXpEOE4sRUFDS3Q2QyxNQUFLby9CLElBQ04rYSxFQUFxQi9hLEVBQU95WixlQUFpQnpaLEVBQU95UCxNQUNoRHJDLEVBQUk3OUIsUUFBUWtxQyxlQUNaelosRUFBT3laLGdCQUFrQnJNLEVBQUk3OUIsUUFBUWtxQyxlQUNyQyxHQUFPalMsS0FBSyxvREFBb0Q0RixFQUFJNzlCLFFBQVFrcUMsNkVBQ1R6WixFQUFPeVosd0xBSTlFLElBRUNuNEMsT0FBTXJCLEdBQUssR0FBT3NCLE1BQU10QixLQUU3QjY2QyxFQUEwQno0QyxLQUFLNjRDLEdBQy9CLE1BQU1DLEVBcERWdFEsaUJBQ0ksSUFBSyxLQUlELE9BSEEsR0FBT3JELEtBQUssR0FBYzM4QixPQUFPLHdCQUFvRSxDQUNqR3V3QyxVQUFXLG9EQUNaL3RDLFVBQ0ksRUFHUCxVQUNVLElBQ1YsQ0FDQSxNQUFPcE4sR0FJSCxPQUhBLEdBQU91bkMsS0FBSyxHQUFjMzhCLE9BQU8sd0JBQW9FLENBQ2pHdXdDLFVBQVduN0MsYUFBNkIsRUFBU0EsRUFBRW1FLGFBQ3BEaUosVUFDSSxDQUNYLENBRUosT0FBTyxDQUNYLENBaUN1Qmd1QyxHQUFvQno2QyxNQUFLMDZDLEdBQ3BDQSxFQUNPeEcsRUFBY3FELGFBR3JCLEtBR0RvRCxFQUFlekgsU0FBYXR6QyxRQUFRcWtDLElBQUksQ0FDM0NxVyxFQUNBQyxLQS9kUixTQUE4QkYsR0FDMUIsTUFBTU8sRUFBYXQ3QyxPQUFPNkssU0FBUzB3QyxxQkFBcUIsVUFDeEQsSUFBSyxNQUFNM3dDLEtBQU9uRixPQUFPc0MsT0FBT3V6QyxHQUM1QixHQUFJMXdDLEVBQUlvZSxLQUNKcGUsRUFBSW9lLElBQUl6bUIsU0FBUysxQyxLQUNqQjF0QyxFQUFJb2UsSUFBSXptQixTQUFTdzRDLEdBQ2pCLE9BQU9ud0MsRUFHZixPQUFPLElBQ1gsRUF5ZFM0d0MsQ0FBcUJULElBL3JCOUIsU0FBeUJBLEVBQWV4QixHQUNwQyxNQUFNa0MsRUFkVixTQUFrQ0MsRUFBWUMsR0FHMUMsSUFBSUYsRUFJSixPQUhJejdDLE9BQU80N0MsZUFDUEgsRUFBcUJ6N0MsT0FBTzQ3QyxhQUFhQyxhQVNPLHlCQVRrQkYsSUFFL0RGLENBQ1gsQ0FNK0JLLENBQXlCLEVBQTBCLENBQzFFQyxnQkFBaUJ4RCxLQUVmeUQsRUFBU254QyxTQUFTQyxjQUFjLFVBR2hDbXhDLEVBQWdCLEdBQUczRCxRQUFjeUMsUUFBb0J4QixJQUMzRHlDLEVBQU9oekIsSUFBTXl5QixFQUNQQSxhQUErRCxFQUFTQSxFQUFtQk0sZ0JBQWdCRSxHQUMzR0EsRUFDTkQsRUFBT3JSLE9BQVEsRUFDZjkvQixTQUFTcXhDLEtBQUtwekMsWUFBWWt6QyxFQUM5QixDQW1yQlFHLENBQWdCcEIsRUFBZU0sRUFBYzlCLGVBRzdDbUIsS0FDQUksRUFBUyxVQUFxQyxVQUFXSixJQW5HN0RBLFFBb0c4QnA1QyxHQU05Qnc1QyxFQUFTLEtBQU0sSUFBSXJvQyxNQUduQixNQUFNMnBDLEVBQStGLFFBQTNFdmMsRUFBS3h3QixhQUF5QyxFQUFTQSxFQUFReXdCLGNBQTJCLElBQVBELEVBQWdCQSxFQUFLLENBQUMsRUFpQm5JLE9BZkF1YyxFQUEyQixPQUFJLFdBQy9CQSxFQUFpQnZwQyxRQUFTLEVBQ2YsTUFBUCtnQyxJQUNBd0ksRUFBMkIsWUFBSXhJLEdBTW5Da0gsRUFBUyxTQUFtQ08sRUFBYzlCLGNBQWU2QyxHQUVyRTNCLEtBQ0FLLEVBQVMsTUFBNkJMLElBbEgxQ0EsUUFtSHNDbjVDLEdBRS9CKzVDLEVBQWM5QixhQUN6QixDQXFCQSxNQUFNOEMsR0FDRixXQUFBbjhDLENBQVlndEMsR0FDUnJ0QyxLQUFLcXRDLElBQU1BLENBQ2YsQ0FDQSxPQUFBckksR0FFSSxjQURPeVgsR0FBMEJ6OEMsS0FBS3F0QyxJQUFJNzlCLFFBQVFrZ0MsT0FDM0NqdkMsUUFBUUMsU0FDbkIsRUFPSixJQUFJKzdDLEdBQTRCLENBQUMsRUFNN0IxQixHQUE0QixHQU9oQyxNQUFNQyxHQUF1QixDQUFDLEVBSTlCLElBU0kwQixHQUtBQyxHQWRBekIsR0FBZ0IsWUFtQmhCMEIsSUFBaUIsRUFtRHJCLFNBQVNDLEdBQVF4UCxFQUFLMEgsRUFBZXZsQyxJQXRCckMsV0FDSSxNQUFNc3RDLEVBQXdCLEdBTzlCLEdSek5KLFdBQ0ksTUFBTUMsRUFBNEIsaUJBQVhDLE9BQ2pCQSxPQUFPRCxRQUNZLGlCQUFaRSxRQUNIQSxRQUFRRixhQUNSdDdDLEVBQ1YsTUFBMEIsaUJBQVpzN0MsUUFBdUN0N0MsSUFBZnM3QyxFQUFRcnFDLEVBQ2xELENRNE1RLElBQ0FvcUMsRUFBc0J4NkMsS0FBSyw0Q1JwSE4sb0JBQWRzNEIsV0FBOEJBLFVBQVVzaUIsZVF1SC9DSixFQUFzQng2QyxLQUFLLDhCQUUzQnc2QyxFQUFzQjk2QyxPQUFTLEVBQUcsQ0FDbEMsTUFBTW03QyxFQUFVTCxFQUNYMStCLEtBQUksQ0FBQzlRLEVBQVM0TixJQUFVLElBQUlBLEVBQVEsTUFBTTVOLE1BQzFDMkUsS0FBSyxLQUNKNG1DLEVBQU0sR0FBYy90QyxPQUFPLDRCQUE0RSxDQUN6R3V3QyxVQUFXOEIsSUFFZixHQUFPMVYsS0FBS29SLEVBQUl2ckMsUUFDcEIsQ0FDSixDQU1JOHZDLEdBQ0EsTUFBTTFOLEVBQVFyQyxFQUFJNzlCLFFBQVFrZ0MsTUFDMUIsSUFBS0EsRUFDRCxNQUFNLEdBQWM1a0MsT0FBTyxhQUUvQixJQUFLdWlDLEVBQUk3OUIsUUFBUTJqQyxPQUFRLENBQ3JCLElBQUk5RixFQUFJNzlCLFFBQVFrcUMsY0FNWixNQUFNLEdBQWM1dUMsT0FBTyxjQUwzQixHQUFPMjhCLEtBQ0gseUtBQTZFNEYsRUFBSTc5QixRQUFRa3FDLG9GQU1yRyxDQUNBLEdBQXdDLE1BQXBDK0MsR0FBMEIvTSxHQUMxQixNQUFNLEdBQWM1a0MsT0FBTyxpQkFBc0QsQ0FDN0U0SCxHQUFJZzlCLElBR1osSUFBS2tOLEdBQWdCLEVBNzFCekIsU0FBOEIxQixHQUUxQixJQUFJbUMsRUFBWSxHQUNaLzJDLE1BQU1pQixRQUFRcEgsT0FBTys2QyxJQUNyQm1DLEVBQVlsOUMsT0FBTys2QyxHQUduQi82QyxPQUFPKzZDLEdBQWlCbUMsQ0FHaEMsQ0FzMUJRQyxDQUFxQnBDLElBQ3JCLE1BQU0sWUFBRXFDLEVBQVcsU0FBRXRDLEdBN3FCN0IsU0FBMEJ3QixFQUEyQjFCLEVBQTJCQyxFQUFzQkUsRUFBZXNDLEdBRWpILElBQUl2QyxFQUFXLFlBQWF3QyxHQUV4QnQ5QyxPQUFPKzZDLEdBQWU1NEMsS0FBS3VFLFVBQy9CLEVBUUEsT0FOSTFHLE9BQU9xOUMsSUFDNkIsbUJBQTdCcjlDLE9BQU9xOUMsS0FFZHZDLEVBQVc5NkMsT0FBT3E5QyxJQUV0QnI5QyxPQUFPcTlDLEdBbEZYLFNBQWtCdkMsRUFLbEJ3QixFQUtBMUIsRUFNQUMsR0F5Q0ksT0FsQ0FsUSxlQUEyQjRTLEtBQVk5VyxHQUNuQyxJQUVJLEdBQWdCLFVBQVo4VyxFQUE2QyxDQUM3QyxNQUFPaEUsRUFBZWlFLEdBQWMvVyxRQWxGcERrRSxlQUEyQm1RLEVBQVV3QixFQUEyQjFCLEVBQTJCckIsRUFBZWlFLEdBQ3RHLElBQ0ksSUFBSUMsRUFBa0MsR0FHdEMsR0FBSUQsR0FBY0EsRUFBb0IsUUFBRyxDQUNyQyxJQUFJRSxFQUFlRixFQUFvQixRQUVsQ3IzQyxNQUFNaUIsUUFBUXMyQyxLQUNmQSxFQUFlLENBQUNBLElBSXBCLE1BQU1DLFFBQTZCL0UsR0FBa0JnQyxHQUNyRCxJQUFLLE1BQU1nRCxLQUFZRixFQUFjLENBRWpDLE1BQU1HLEVBQWNGLEVBQXFCeGhDLE1BQUsyakIsR0FBVUEsRUFBT3laLGdCQUFrQnFFLElBQzNFRSxFQUF3QkQsR0FBZXZCLEVBQTBCdUIsRUFBWXRPLE9BQ25GLElBQUl1TyxFQUdDLENBSURMLEVBQWtDLEdBQ2xDLEtBQ0osQ0FSSUEsRUFBZ0N0N0MsS0FBSzI3QyxFQVM3QyxDQUNKLENBSStDLElBQTNDTCxFQUFnQzU3QyxTQUNoQzQ3QyxFQUFrQ2g0QyxPQUFPc0MsT0FBT3UwQyxVQUk5Q2g4QyxRQUFRcWtDLElBQUk4WSxHQUVsQjNDLEVBQVMsUUFBaUN2QixFQUFlaUUsR0FBYyxDQUFDLEVBQzVFLENBQ0EsTUFBT3o5QyxHQUNILEdBQU9zQixNQUFNdEIsRUFDakIsQ0FDSixDQXVDc0JnK0MsQ0FBWWpELEVBQVV3QixFQUEyQjFCLEVBQTJCckIsRUFBZWlFLEVBQ3JHLE1BQ0ssR0FBZ0IsV0FBWkQsRUFBK0MsQ0FDcEQsTUFBT2hFLEVBQWVpRSxHQUFjL1csUUF6SHBEa0UsZUFBNEJtUSxFQUFVd0IsRUFBMkIxQixFQUEyQkMsRUFBc0J0QixFQUFlaUUsR0FHN0gsTUFBTVEsRUFBcUJuRCxFQUFxQnRCLEdBQ2hELElBQ0ksR0FBSXlFLFFBQ00xQixFQUEwQjBCLE9BRS9CLENBS0QsTUFDTUgsU0FENkJqRixHQUFrQmdDLElBQ1p6K0IsTUFBSzJqQixHQUFVQSxFQUFPeVosZ0JBQWtCQSxJQUM3RXNFLFNBQ012QixFQUEwQnVCLEVBQVl0TyxNQUVwRCxDQUNKLENBQ0EsTUFBT3h2QyxHQUNILEdBQU9zQixNQUFNdEIsRUFDakIsQ0FDQSs2QyxFQUFTLFNBQW1DdkIsRUFBZWlFLEVBQy9ELENBbUdzQlMsQ0FBYW5ELEVBQVV3QixFQUEyQjFCLEVBQTJCQyxFQUFzQnRCLEVBQWVpRSxFQUM1SCxNQUNLLEdBQWdCLFlBQVpELEVBQWlELENBQ3RELE1BQU9DLEdBQWMvVyxFQUNyQnFVLEVBQVMsVUFBcUMsU0FBVTBDLEVBQzVELE1BQ0ssR0FBZ0IsUUFBWkQsRUFBeUMsQ0FDOUMsTUFBT2hFLEVBQWUyRSxFQUFXOXVDLEdBQVlxM0IsRUFDN0NxVSxFQUFTLE1BQTZCdkIsRUFBZTJFLEVBQVc5dUMsRUFDcEUsTUFDSyxHQUFnQixRQUFabXVDLEVBQXlDLENBQzlDLE1BQU9ZLEdBQWdCMVgsRUFFdkJxVSxFQUFTLE1BQTZCcUQsRUFDMUMsTUFFSXJELEVBQVN5QyxLQUFZOVcsRUFFN0IsQ0FDQSxNQUFPMW1DLEdBQ0gsR0FBT3NCLE1BQU10QixFQUNqQixDQUNKLENBRUosQ0F3QitCcStDLENBQVN0RCxFQUFVd0IsRUFBMkIxQixFQUEyQkMsR0FDN0YsQ0FDSEMsV0FDQXNDLFlBQWFwOUMsT0FBT3E5QyxHQUU1QixDQTRwQjBDZ0IsQ0FBaUIvQixHQUEyQjFCLEdBQTJCQyxHQUFzQkUsR0EzRnhILFFBNEZQeUIsR0FBc0JZLEVBQ3RCYixHQUFtQnpCLEVBQ25CMkIsSUFBaUIsQ0FDckIsQ0FLQSxPQUZBSCxHQUEwQi9NLEdBQVNvTCxHQUFxQnpOLEVBQUswTixHQUEyQkMsR0FBc0JqRyxFQUFlMkgsR0FBa0J4QixHQUFlMXJDLEdBQ3BJLElBQUlndEMsR0FBaUJuUCxFQUVuRCxDQThKQSxTQUFTb1IsR0FBU0MsRUFBbUJDLEVBQVdDLEVBQWFwdkMsR0FDekRrdkMsRUFBb0IsR0FBbUJBLEdBNWlCM0M1VCxlQUEwQitULEVBQWNaLEVBQXVCVSxFQUFXQyxFQUFhcHZDLEdBQ25GLEdBQUlBLEdBQVdBLEVBQVFzdkMsT0FDbkJELEVBQWEsUUFBaUNGLEVBQVdDLE9BR3hELENBQ0QsTUFBTWxGLFFBQXNCdUUsRUFFNUJZLEVBQWEsUUFBaUNGLEVBRC9CLzRDLE9BQU9rekIsT0FBT2x6QixPQUFPa3pCLE9BQU8sQ0FBQyxFQUFHOGxCLEdBQWMsQ0FBRSxRQUFXbEYsSUFFOUUsQ0FDSixDQW1pQklxRixDQUFXcEMsR0FBcUJGLEdBQTBCaUMsRUFBa0JyUixJQUFJNzlCLFFBQVFrZ0MsT0FBUWlQLEVBQVdDLEVBQWFwdkMsR0FBU2pPLE9BQU1yQixHQUFLLEdBQU9zQixNQUFNdEIsSUFDN0osQ0FvQkEsTUFBTSxHQUFPLHNCQUNQLEdBQVUsU0FTWm90QyxHQUFtQixJQUFJbGMsR0FBVW9uQixJQUFnQixDQUFDeDZCLEdBQWF4TyxRQUFTd3ZDLEtBTTdEbkMsR0FKSzcrQixFQUFVNm5CLFlBQVksT0FBT3ZCLGVBQ25CdG1CLEVBQ2pCNm5CLFlBQVksMEJBQ1p2QixlQUM4QjBhLElBQ3BDLFdBQ0gxUixHQUFtQixJQUFJbGMsR0FBVSxzQkFJakMsU0FBeUJwVCxHQUNyQixJQUNJLE1BQU1paEMsRUFBWWpoQyxFQUFVNm5CLFlBQVkyUyxJQUFnQmxVLGVBQ3hELE1BQU8sQ0FDSG1hLFNBQVUsQ0FBQ0UsRUFBV0MsRUFBYXB2QyxJQUFZaXZDLEdBQVNRLEVBQVdOLEVBQVdDLEVBQWFwdkMsR0FFbkcsQ0FDQSxNQUFPdFAsR0FDSCxNQUFNLEdBQWM0SyxPQUFPLCtCQUFrRixDQUN6R28wQyxPQUFRaC9DLEdBRWhCLENBQ0osR0FoQndFLFlBQ3hFd3VDLEdBQWdCLEdBQU0sSUFFdEJBLEdBQWdCLEdBQU0sR0FBUyxXQ2x1QzVCLE1BQU15USxHQUFpQixDQUM1QmhNLE9BQVEsMENBQ1JpTSxXQUFZLDRCQUNaQyxZQUFhLG1DQUNibE4sVUFBVyxZQUNYbU4sY0FBZSx3QkFDZkMsa0JBQW1CLGVBQ25CN1AsTUFBTyw0Q0FDUGdLLGNBQWUsZ0JDSlYsTUFBTThGLEdBS1gsY0FDRSxJQUNFeC9DLEtBQUt5L0MsWUFBY25SLEdBQWM2USxJQUNqQ24vQyxLQUFLMC9DLGtCRnNoQ1gsU0FBc0JyUyxFSDFrQnRCLFNBQWdCM2tDLEVBQU8sSUFDbkIsTUFBTTJrQyxFQUFNSCxHQUFNcnRCLElBQUluWCxHQUN0QixJQUFLMmtDLEdBQU8za0MsSUFBUyxJQUFzQnEzQixLQUN2QyxPQUFPdU8sS0FFWCxJQUFLakIsRUFDRCxNQUFNSyxHQUFjNWlDLE9BQU8sU0FBZ0MsQ0FBRXVqQyxRQUFTM2xDLElBRTFFLE9BQU8ya0MsQ0FDWCxDR2lrQjRCLElBR3hCLE1BQU1zUyxFQUFvQixHQUYxQnRTLEVBQU0sR0FBbUJBLEdBRW1CbUwsSUFDNUMsT0FBSW1ILEVBQWtCMWIsZ0JBQ1gwYixFQUFrQnJiLGVBV2pDLFNBQTZCK0ksRUFBSzc5QixFQUFVLENBQUMsR0FFekMsTUFBTW13QyxFQUFvQixHQUFhdFMsRUFBS21MLElBQzVDLEdBQUltSCxFQUFrQjFiLGdCQUFpQixDQUNuQyxNQUFNcUIsRUFBbUJxYSxFQUFrQnJiLGVBQzNDLEdBQUkxQyxHQUFVcHlCLEVBQVNtd0MsRUFBa0J6YSxjQUNyQyxPQUFPSSxFQUdQLE1BQU0sR0FBY3g2QixPQUFPLHNCQUVuQyxDQUVBLE9BRDBCNjBDLEVBQWtCeGEsV0FBVyxDQUFFMzFCLFdBRTdELENBdkJXb3dDLENBQW9CdlMsRUFDL0IsQ0U5aEMrQndTLENBQWE3L0MsS0FBS3kvQyxZQUM3QyxDQUFFLE1BQU9qK0MsR0FDUFQsUUFBUVMsTUFBTSxxQ0FBc0NBLEVBQ3RELENBQ0YsQ0FFTyxrQkFBT3MrQyxHQUlaLE9BSEtOLEdBQXlCcmIsV0FDNUJxYixHQUF5QnJiLFNBQVcsSUFBSXFiLElBRW5DQSxHQUF5QnJiLFFBQ2xDLENBRU8sU0FBQTRiLENBQVVwQixFQUFtQmx2QyxHQUNsQyxJQUNFMU8sUUFBUUMsSUFBSSx3QkFBd0IyOUMsZUFBd0JsdkMsR0FDNURndkMsR0FBU3orQyxLQUFLMC9DLGtCQUFtQmYsRUFBV2x2QyxFQUM5QyxDQUFFLE1BQU9qTyxHQUNQVCxRQUFRUyxNQUFNLG9DQUFxQ0EsRUFDckQsQ0FDRixFQ3ZCRixNQUFNK3lDLEdBQVUsSUFBSUUsaUJBQWlCLGNBRXJDLElBQUl1TCxHQUFnQmgxQyxTQUFTcW9CLGVBQWUsaUJBNEc1QyxTQUFTNHNCLEdBQTJCeHdDLEdBQ1YsV0FBbEJBLEVBQU1nQixLQUFLeXZDLEtBV25CLFNBQThCendDLEVBQU8wd0MsR0FDakMsSUFBSUMsRUFBY3AxQyxTQUFTcW9CLGVBQWUsZUFDdEM4c0IsRUFBZ0IsSUFDaEJDLEVBQWFsMUMsTUFBTTFILE1BQVEyOEMsRUFBZ0IsSUFDcENBLEdBQWlCLE1BQ3hCSCxHQUFlOTBDLE1BQU1HLFFBQVUsT0FFL0JnMUMsYUFBYUMsUUFBUTd3QyxFQUFNZ0IsS0FBS0EsS0FBS3ZQLFNBQVUsUUFLdkQsU0FBc0RBLEdBRWxELEdBQUlmLE9BQU9vZ0QsUUFBUyxDQUNoQixJQUFJQyxFQUE4RCxPQUFuQ0gsYUFBYUksUUFBUXYvQyxHQUVwRGYsT0FBT29nRCxRQUFRRyxhQUFhRixFQUNoQyxDQUNKLENBWFFHLENBQTZDbHhDLEVBQU1nQixLQUFLQSxLQUFLdlAsVUFFckUsQ0FuQlEwL0MsQ0FBcUJueEMsRUFERHluQixTQUFTem5CLEVBQU1nQixLQUFLQSxLQUFLb3dDLFdBSTNCLGVBQWxCcHhDLEVBQU1nQixLQUFLeXZDLE1BQ1huL0MsUUFBUUMsSUFBSSw0Q0EwQnBCLFdBQ0ksSUFBSXd0QixFQUFPLDBEQUNVLEdBQWpCc3lCLFFBQVF0eUIsR0FDUnJ1QixPQUFPdTRCLFNBQVNxb0IsU0FFaEJ2eUIsRUFBTyx3Q0FFZixDQWhDUXd5QixHQUVSLENBWkF6TSxHQUFRemtDLGlCQUFpQixVQUFXbXdDLElBNENwQyxNQUFNZ0IsR0FBYzlnRCxPQUFPdTRCLFNBQVN3b0IsT0FFcEMsSUFBSWhnRCxHQURjLElBQUlpZ0QsZ0JBQWdCRixJQUNicGhDLElBQUksUUFJYixNQUFaM2UsS0FDQUEsR0FINEIsbUJBTWhDSCxRQUFRQyxJQUFJLGNBQWdCRSxJQUU1QixJQUFJbXNDLEdBQVcsSUFoS1IsTUFZSCxXQUFBaHRDLENBQVlhLEVBQWtCWixFQUF5QjJ4QixFQUFvQkMsR0FDdkVueEIsUUFBUUMsSUFBSSwyQ0FDWmhCLEtBQUtrQixTQUFXQSxFQUNoQmxCLEtBQUtNLGdCQUFrQkEsRUFDdkJOLEtBQUtpeUIsV0FBYUEsRUFDbEJqeUIsS0FBS2t5QixVQUFZQSxFQUNqQmx5QixLQUFLb2hELHlCQUEyQjVCLEdBQXlCTSxjQUN6RDkvQyxLQUFLcWhELGNBQWdCLElBQUlqaEQsRUFBY0UsR0FDdkNOLEtBQUtzaEQsZUFBaUIsSUFBSXR2QixHQUFlQyxFQUFZQyxHQUNyRGx5QixLQUFLdzBDLGlCQUFtQixJQUFJQyxpQkFBaUIscUJBQ2pELENBRUEsZ0JBQU10UCxHQUNGLElBRUksTUFBTWxrQyxRQUFhakIsS0FBS3FoRCxjQUFjN2dELFlBQ3RDUyxFQUFLQyxTQUFXbEIsS0FBS2tCLFNBR3JCSCxRQUFRQyxJQUFJLDZCQUE4QkMsR0FHMUNqQixLQUFLdWhELDZCQUlDdmhELEtBQUt3aEQsc0JBQXNCdmdELEdBR2pDakIsS0FBS3NoRCxlQUFldHRCLGVBQWUveUIsR0FFbkNGLFFBQVFDLElBQUkseUNBQ2hCLENBQUUsTUFBT1EsR0FFTFQsUUFBUVMsTUFBTSx3QkFBeUJBLEVBQzNDLENBRUosQ0FFQSxvQkFBQSsvQyxHQUdRcGhELE9BQU9vZ0QsU0FBZ0UsbUJBQTlDcGdELE9BQU9vZ0QsUUFBUWtCLDRCQUV4Q3RoRCxPQUFPb2dELFFBQVFrQiwyQkFBMkIsWUFFbEQsQ0FFQSwyQkFBTUQsQ0FBc0J2Z0QsR0FDeEIsR0FBSSxrQkFBbUIyNUIsVUFDbkIsSUFDSSxJQUFJOG1CLEVBQUssSUFBSSxHQUFRLFNBQVUsQ0FBQyxTQUMxQkEsRUFBR2xvQyxpQkFDSG9oQixVQUFVQyxjQUFjOG1CLE1BQ2EsTUFBdkN0QixhQUFhSSxRQUFReC9DLEVBQUtDLFdBQzFCOCtDLEdBQWU5MEMsTUFBTUcsUUFBVSxPQUMvQnJMLEtBQUt3MEMsaUJBQWlCdGMsWUFBWSxDQUM5QndsQixRQUFTLFFBQ1RqdEMsS0FBTSxDQUNGbXhDLEtBQU01aEQsS0FBSzRoRCxLQUNYQyxTQUFVNWdELEVBQ1Y2Z0QsWUFBYTloRCxLQUFLTSxvQkFJMUIwL0MsR0FBZTkwQyxNQUFNRyxRQUFVLE9BR25DckwsS0FBS3cwQyxpQkFBaUJ2YyxVQUFheG9CLElBQy9CMU8sUUFBUUMsSUFBSSw0QkFDWkQsUUFBUUMsSUFBSXlPLEVBQU1nQixLQUFLaXRDLFNBQ0csYUFBdEJqdUMsRUFBTWdCLEtBQUtpdEMsU0FDWDE5QyxLQUFLdzBDLGlCQUFpQnRjLFlBQVksQ0FDOUJ3bEIsUUFBUyxRQUNUanRDLEtBQU0sQ0FDRm14QyxLQUFNNWhELEtBQUs0aEQsS0FDWEMsU0FBVTVnRCxFQUNWNmdELFlBQWE5aEQsS0FBS00sa0JBRzlCLEVBRUpzNkIsVUFBVUMsY0FBYy9xQixpQkFBaUIsVUFBV213QyxHQUN4RCxDQUFFLE1BQU96K0MsR0FDTFQsUUFBUUMsSUFBSSxtQ0FBb0NRLEVBQ3BELENBR1IsR0E0RG1CTixHQUFVLGdCQUFnQkEsMEJBQzdDLGdCQUFnQkEscUJBQ2hCLGdCQUFnQkEsc0JBRXBCbXNDLEdBQUlsSSIsInNvdXJjZXMiOlsid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vLi9Nb2RlbHMvQm9vay50cyIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly8vLi9QYXJzZXIvQ29udGVudFBhcnNlci50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHNwbGlkZWpzL3NwbGlkZS9kaXN0L2pzL3NwbGlkZS5lc20uanMiLCJ3ZWJwYWNrOi8vLy4vUGxheUJhY2tFbmdpbmUvUGxheUJhY2tFbmdpbmUudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dvcmtib3gtd2luZG93L2J1aWxkL3dvcmtib3gtd2luZG93LnByb2QuZXM1Lm1qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvY29tcG9uZW50L2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9sb2dnZXIvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvaWRiL2J1aWxkL3dyYXAtaWRiLXZhbHVlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hcHAvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvYXBwL2Rpc3QvZXNtL2luZGV4LmVzbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2luc3RhbGxhdGlvbnMvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2FuYWx5dGljcy9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovLy8uL0FuYWx5dGljcy9GaXJlYmFzZS9jb25maWcudHMiLCJ3ZWJwYWNrOi8vLy4vQW5hbHl0aWNzL0ZpcmViYXNlL0ZpcmViYXNlTWFuYWdlci50cyIsIndlYnBhY2s6Ly8vLi9BcHAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIFBhZ2UgdHlwZSB0aGF0IGRlXHJcblxyXG5pbXBvcnQgeyBQYWdlIH0gZnJvbSBcIi4vUGFnZVwiO1xyXG5cclxuZXhwb3J0IGVudW0gQm9va1R5cGUge1xyXG4gICAgQ3VyaW91c1JlYWRlciA9IFwiQ3VyaW91c1JlYWRlclwiLFxyXG4gICAgR0RMID0gXCJHRExcIixcclxuICAgIFVua25vd24gPSBcIlVua25vd25cIixcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQm9vayA9IHtcclxuICAgIGJvb2tOYW1lOiBzdHJpbmc7XHJcbiAgICBwYWdlczogUGFnZVtdO1xyXG4gICAgYm9va1R5cGU6IEJvb2tUeXBlO1xyXG59IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJpbXBvcnQge1xyXG4gICAgQm9vayxcclxuICAgIEJvb2tUeXBlLFxyXG4gICAgUGFnZSxcclxuICAgIFRleHRFbGVtZW50LFxyXG4gICAgSW1hZ2VFbGVtZW50LFxyXG4gICAgQXVkaW9FbGVtZW50LFxyXG4gICAgQXVkaW9UaW1lc3RhbXBzLFxyXG4gICAgV29yZFRpbWVzdGFtcEVsZW1lbnQsXHJcbn0gZnJvbSBcIi4uL01vZGVscy9Nb2RlbHNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDb250ZW50UGFyc2VyIHtcclxuICAgIGltYWdlc1BhdGg6IHN0cmluZztcclxuICAgIGF1ZGlvUGF0aDogc3RyaW5nO1xyXG4gICAgY29udGVudEZpbGVQYXRoOiBzdHJpbmc7XHJcblxyXG4gICAgY29udGVudEpTT046IGFueTtcclxuXHJcbiAgICBlbXB0eUdsb3dJbWFnZVRhZzogc3RyaW5nID0gXCJlbXB0eV9nbG93X2ltYWdlXCI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29udGVudEZpbGVQYXRoOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmNvbnRlbnRGaWxlUGF0aCA9IGNvbnRlbnRGaWxlUGF0aDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBwYXJzZUJvb2soKTogUHJvbWlzZTxCb29rPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wYXJzZUNvbnRlbnRKU09ORmlsZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoY29udGVudEpTT04pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRKU09OID0gY29udGVudEpTT047XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb250ZW50IEpTT04gZmlsZSBwYXJzZWQhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY29udGVudEpTT04pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgYm9vazogQm9vayA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9va05hbWU6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9va1R5cGU6IHRoaXMuZGV0ZXJtaW5lQm9va1R5cGUoKSxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBib29rLnBhZ2VzID0gdGhpcy5wYXJzZVBhZ2VzKGJvb2spO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGJvb2spO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGV0ZXJtaW5lQm9va1R5cGUoKTogQm9va1R5cGUge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnRKU09OW1wicHJlc2VudGF0aW9uXCJdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEJvb2tUeXBlLkN1cmlvdXNSZWFkZXI7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbnRlbnRKU09OW1wiY2hhcHRlcnNcIl0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gQm9va1R5cGUuR0RMO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBCb29rVHlwZS5Vbmtub3duO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwYXJzZVBhZ2VzKGJvb2s6IEJvb2spOiBQYWdlW10ge1xyXG4gICAgICAgIGxldCBwYWdlczogUGFnZVtdID0gW107XHJcblxyXG4gICAgICAgIGlmIChib29rLmJvb2tUeXBlID09PSBCb29rVHlwZS5DdXJpb3VzUmVhZGVyKSB7XHJcbiAgICAgICAgICAgIGxldCBwYWdlc0pTT04gPSB0aGlzLmNvbnRlbnRKU09OW1wicHJlc2VudGF0aW9uXCJdW1wic2xpZGVzXCJdO1xyXG4gICAgICAgICAgICBsZXQgZ2xvYmFsRmlsbENvbG9yID1cclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudEpTT05bXCJwcmVzZW50YXRpb25cIl1bXCJnbG9iYWxCYWNrZ3JvdW5kU2VsZWN0b3JcIl1bXHJcbiAgICAgICAgICAgICAgICBcImZpbGxHbG9iYWxCYWNrZ3JvdW5kXCJcclxuICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFnZXNKU09OLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFnZUpTT04gPSBwYWdlc0pTT05baV07XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFnZTogUGFnZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50czogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBnbG9iYWxGaWxsQ29sb3IsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcGFnZS52aXN1YWxFbGVtZW50cyA9IHRoaXMucGFyc2VQYWdlQ1IocGFnZUpTT04pO1xyXG4gICAgICAgICAgICAgICAgcGFnZXMucHVzaChwYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoYm9vay5ib29rVHlwZSA9PT0gQm9va1R5cGUuR0RMKSB7XHJcbiAgICAgICAgICAgIGxldCBwYWdlc0pTT04gPSB0aGlzLmNvbnRlbnRKU09OW1wiY2hhcHRlcnNcIl07XHJcbiAgICAgICAgICAgIGxldCBnbG9iYWxGaWxsQ29sb3IgPSBcIiNGQ0ZDRjJcIjtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlc0pTT04ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBwYWdlSlNPTiA9IHBhZ2VzSlNPTltpXTtcclxuICAgICAgICAgICAgICAgIGxldCBwYWdlOiBQYWdlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnRzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGdsb2JhbEZpbGxDb2xvcixcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBwYWdlLnZpc3VhbEVsZW1lbnRzID0gdGhpcy5wYXJzZVBhZ2VHREwocGFnZUpTT04pO1xyXG4gICAgICAgICAgICAgICAgcGFnZXMucHVzaChwYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVW5rbm93biBib29rIHR5cGUhXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHBhZ2VzO1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlUGFnZUNSKHBhZ2VKU09OOiBhbnkpOiBhbnlbXSB7XHJcbiAgICAgICAgbGV0IHZpc3VhbEVsZW1lbnRzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgIGxldCBlbGVtZW50c0pTT04gPSBwYWdlSlNPTltcImVsZW1lbnRzXCJdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudHNKU09OLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBsaWJyYXJ5U3RyaW5nOiBzdHJpbmcgPSBlbGVtZW50c0pTT05baV1bXCJhY3Rpb25cIl1bXCJsaWJyYXJ5XCJdO1xyXG4gICAgICAgICAgICBpZiAobGlicmFyeVN0cmluZy5pbmNsdWRlcyhcIkFkdmFuY2VkVGV4dFwiKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRleHRFbGVtZW50OiBUZXh0RWxlbWVudCA9IHRoaXMucGFyc2VUZXh0RWxlbWVudENSKGVsZW1lbnRzSlNPTltpXSk7XHJcbiAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50cy5wdXNoKHRleHRFbGVtZW50KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChsaWJyYXJ5U3RyaW5nLmluY2x1ZGVzKFwiSW1hZ2VcIikpIHtcclxuICAgICAgICAgICAgICAgIGxldCBpbWFnZUVsZW1lbnQ6IEltYWdlRWxlbWVudCA9IHRoaXMucGFyc2VJbWFnZUVsZW1lbnRDUihcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50c0pTT05baV1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50cy5wdXNoKGltYWdlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGlicmFyeVN0cmluZy5pbmNsdWRlcyhcIkF1ZGlvXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYXVkaW9FbGVtZW50OiBBdWRpb0VsZW1lbnQgPSB0aGlzLnBhcnNlQXVkaW9FbGVtZW50Q1IoXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNKU09OW2ldXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudHMucHVzaChhdWRpb0VsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdmlzdWFsRWxlbWVudHM7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VQYWdlR0RMKHBhZ2VKU09OOiBhbnkpOiBhbnlbXSB7XHJcbiAgICAgICAgbGV0IHZpc3VhbEVsZW1lbnRzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgIGxldCBlbGVtZW50c0pTT05BcnJheSA9IHBhZ2VKU09OW1wicGFyYW1zXCJdW1wiY29udGVudFwiXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50c0pTT05BcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgbGlicmFyeVN0cmluZzogc3RyaW5nID0gZWxlbWVudHNKU09OQXJyYXlbaV1bXCJjb250ZW50XCJdW1wibGlicmFyeVwiXTtcclxuICAgICAgICAgICAgaWYgKGxpYnJhcnlTdHJpbmcuaW5jbHVkZXMoXCJBZHZhbmNlZFRleHRcIikpIHtcclxuICAgICAgICAgICAgICAgIGxldCB0ZXh0RWxlbWVudDogVGV4dEVsZW1lbnQgPSB0aGlzLnBhcnNlVGV4dEVsZW1lbnRHREwoXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNKU09OQXJyYXlbaV1bXCJjb250ZW50XCJdW1wicGFyYW1zXCJdXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudHMucHVzaCh0ZXh0RWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGlicmFyeVN0cmluZy5pbmNsdWRlcyhcIkltYWdlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW1hZ2VFbGVtZW50OiBJbWFnZUVsZW1lbnQgPSB0aGlzLnBhcnNlSW1hZ2VFbGVtZW50R0RMKFxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzSlNPTkFycmF5W2ldW1wiY29udGVudFwiXVtcInBhcmFtc1wiXVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnRzLnB1c2goaW1hZ2VFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZpc3VhbEVsZW1lbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlVGV4dEVsZW1lbnRDUihlbGVtZW50SlNPTjogYW55KTogVGV4dEVsZW1lbnQge1xyXG4gICAgICAgIGxldCB0ZXh0RWxlbWVudDogVGV4dEVsZW1lbnQgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICBwb3NpdGlvblg6IGVsZW1lbnRKU09OW1wieFwiXSxcclxuICAgICAgICAgICAgcG9zaXRpb25ZOiBlbGVtZW50SlNPTltcInlcIl0sXHJcbiAgICAgICAgICAgIHdpZHRoOiBlbGVtZW50SlNPTltcIndpZHRoXCJdLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGVsZW1lbnRKU09OW1wiaGVpZ2h0XCJdLFxyXG4gICAgICAgICAgICB0ZXh0Q29udGVudEFzSFRNTDogZWxlbWVudEpTT05bXCJhY3Rpb25cIl1bXCJwYXJhbXNcIl1bXCJ0ZXh0XCJdLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB0ZXh0RWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZVRleHRFbGVtZW50R0RMKGVsZW1lbnRKU09OOiBhbnkpOiBUZXh0RWxlbWVudCB7XHJcbiAgICAgICAgbGV0IHRleHRFbGVtZW50OiBUZXh0RWxlbWVudCA9IHtcclxuICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgIHBvc2l0aW9uWDogTmFOLFxyXG4gICAgICAgICAgICBwb3NpdGlvblk6IE5hTixcclxuICAgICAgICAgICAgd2lkdGg6IE5hTixcclxuICAgICAgICAgICAgaGVpZ2h0OiBOYU4sXHJcbiAgICAgICAgICAgIHRleHRDb250ZW50QXNIVE1MOiBlbGVtZW50SlNPTltcInRleHRcIl0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGV4dEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VJbWFnZUVsZW1lbnRDUihlbGVtZW50SlNPTjogYW55KTogSW1hZ2VFbGVtZW50IHtcclxuICAgICAgICBsZXQgcGF0aDogc3RyaW5nID0gXCJcIjtcclxuICAgICAgICBpZiAoZWxlbWVudEpTT05bXCJhY3Rpb25cIl1bXCJwYXJhbXNcIl1bXCJmaWxlXCJdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcGF0aCA9IHRoaXMuZW1wdHlHbG93SW1hZ2VUYWc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGF0aCA9IGVsZW1lbnRKU09OW1wiYWN0aW9uXCJdW1wicGFyYW1zXCJdW1wiZmlsZVwiXVtcInBhdGhcIl07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBpbWFnZUVsZW1lbnQ6IEltYWdlRWxlbWVudCA9IHtcclxuICAgICAgICAgICAgZG9tSUQ6IHBhdGggPT09IHRoaXMuZW1wdHlHbG93SW1hZ2VUYWdcclxuICAgICAgICAgICAgICAgICAgICA/IGVsZW1lbnRKU09OW1wiaWRcIl1cclxuICAgICAgICAgICAgICAgICAgICA6IGVsZW1lbnRKU09OW1wiYWN0aW9uXCJdW1wic3ViQ29udGVudElkXCJdLFxyXG4gICAgICAgICAgICB0eXBlOiBcImltYWdlXCIsXHJcbiAgICAgICAgICAgIHBvc2l0aW9uWDogZWxlbWVudEpTT05bXCJ4XCJdLFxyXG4gICAgICAgICAgICBwb3NpdGlvblk6IGVsZW1lbnRKU09OW1wieVwiXSxcclxuICAgICAgICAgICAgd2lkdGg6IGVsZW1lbnRKU09OW1wid2lkdGhcIl0sXHJcbiAgICAgICAgICAgIGhlaWdodDogZWxlbWVudEpTT05bXCJoZWlnaHRcIl0sXHJcbiAgICAgICAgICAgIGltYWdlU291cmNlOiBwYXRoLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBpbWFnZUVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VJbWFnZUVsZW1lbnRHREwoZWxlbWVudEpTT046IGFueSk6IEltYWdlRWxlbWVudCB7XHJcbiAgICAgICAgbGV0IGltYWdlRWxlbWVudDogSW1hZ2VFbGVtZW50ID0ge1xyXG4gICAgICAgICAgICBkb21JRDogXCJcIixcclxuICAgICAgICAgICAgdHlwZTogXCJpbWFnZVwiLFxyXG4gICAgICAgICAgICBwb3NpdGlvblg6IE5hTixcclxuICAgICAgICAgICAgcG9zaXRpb25ZOiBOYU4sXHJcbiAgICAgICAgICAgIHdpZHRoOiBlbGVtZW50SlNPTltcIndpZHRoXCJdLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGVsZW1lbnRKU09OW1wiaGVpZ2h0XCJdLFxyXG4gICAgICAgICAgICBpbWFnZVNvdXJjZTogZWxlbWVudEpTT05bXCJmaWxlXCJdW1wicGF0aFwiXSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBpbWFnZUVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VBdWRpb0VsZW1lbnRDUihlbGVtZW50SlNPTjogYW55KTogQXVkaW9FbGVtZW50IHtcclxuICAgICAgICBsZXQgYXVkaW9UaW1lc3RhbXBzOiBBdWRpb1RpbWVzdGFtcHMgPSB7XHJcbiAgICAgICAgICAgIHRpbWVzdGFtcHM6IFtdLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IHRpbWVzdGFtcHNKU09OQXJyYXkgPVxyXG4gICAgICAgICAgICBlbGVtZW50SlNPTltcImFjdGlvblwiXVtcInBhcmFtc1wiXVtcInRpbWVTdGFtcEZvckVhY2hUZXh0XCJdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGltZXN0YW1wc0pTT05BcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdGltZXN0YW1wSW5kZXggPSBpO1xyXG4gICAgICAgICAgICBsZXQgdGltZXN0YW1wSlNPTiA9IHRpbWVzdGFtcHNKU09OQXJyYXlbaV07XHJcbiAgICAgICAgICAgIGxldCB0aW1lc3RhbXA6IFdvcmRUaW1lc3RhbXBFbGVtZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgZG9tSUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudEpTT05bXCJhY3Rpb25cIl1bXCJzdWJDb250ZW50SWRcIl0gK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiX1wiICtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXBJbmRleC50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgd29yZDogdGltZXN0YW1wSlNPTltcInRleHRcIl0ucmVwbGFjZSgvJiMwMzk7L2csIFwiJ1wiKSxcclxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZXN0YW1wOiB0aW1lc3RhbXBKU09OW1wic3RhcnREdXJhdGlvblwiXSxcclxuICAgICAgICAgICAgICAgIGVuZFRpbWVzdGFtcDogdGltZXN0YW1wSlNPTltcImVuZER1cmF0aW9uXCJdLFxyXG4gICAgICAgICAgICAgICAgYXVkaW9TcmM6IHRpbWVzdGFtcEpTT05bXCJ3b3JkZmlsZVwiXVswXVtcInBhdGhcIl0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGF1ZGlvVGltZXN0YW1wcy50aW1lc3RhbXBzLnB1c2godGltZXN0YW1wKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGF1ZGlvRWxlbWVudDogQXVkaW9FbGVtZW50ID0ge1xyXG4gICAgICAgICAgICBkb21JRDogZWxlbWVudEpTT05bXCJhY3Rpb25cIl1bXCJzdWJDb250ZW50SWRcIl0sXHJcbiAgICAgICAgICAgIHR5cGU6IFwiYXVkaW9cIixcclxuICAgICAgICAgICAgcG9zaXRpb25YOiBlbGVtZW50SlNPTltcInhcIl0sXHJcbiAgICAgICAgICAgIHBvc2l0aW9uWTogZWxlbWVudEpTT05bXCJ5XCJdLFxyXG4gICAgICAgICAgICB3aWR0aDogZWxlbWVudEpTT05bXCJ3aWR0aFwiXSxcclxuICAgICAgICAgICAgaGVpZ2h0OiBlbGVtZW50SlNPTltcImhlaWdodFwiXSxcclxuICAgICAgICAgICAgZ2xvd0NvbG9yOiBlbGVtZW50SlNPTltcImFjdGlvblwiXVtcInBhcmFtc1wiXVtcImdsb3dDb2xvclwiXSxcclxuICAgICAgICAgICAgYXVkaW9TcmM6IGVsZW1lbnRKU09OW1wiYWN0aW9uXCJdW1wicGFyYW1zXCJdW1wiZmlsZXNcIl1bMF1bXCJwYXRoXCJdLFxyXG4gICAgICAgICAgICBhdWRpb1RpbWVzdGFtcHM6IGF1ZGlvVGltZXN0YW1wcyxcclxuICAgICAgICAgICAgc3R5bGVzOiBcIlwiLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBhdWRpb0VsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcGFyc2VDb250ZW50SlNPTkZpbGUoKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIHhoci5vcGVuKFwiR0VUXCIsIHRoaXMuY29udGVudEZpbGVQYXRoLCB0cnVlKTtcclxuICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9IFwianNvblwiO1xyXG4gICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHN0YXR1cyA9IHhoci5zdGF0dXM7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSB4aHIucmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJlc3BvbnNlW1wibDEwblwiXTtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgcmVzcG9uc2VbXCJvdmVycmlkZVwiXTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHhoci5yZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHhoci5zZW5kKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG4vKiFcbiAqIFNwbGlkZS5qc1xuICogVmVyc2lvbiAgOiA0LjEuNFxuICogTGljZW5zZSAgOiBNSVRcbiAqIENvcHlyaWdodDogMjAyMiBOYW90b3NoaSBGdWppdGFcbiAqL1xudmFyIE1FRElBX1BSRUZFUlNfUkVEVUNFRF9NT1RJT04gPSBcIihwcmVmZXJzLXJlZHVjZWQtbW90aW9uOiByZWR1Y2UpXCI7XG52YXIgQ1JFQVRFRCA9IDE7XG52YXIgTU9VTlRFRCA9IDI7XG52YXIgSURMRSA9IDM7XG52YXIgTU9WSU5HID0gNDtcbnZhciBTQ1JPTExJTkcgPSA1O1xudmFyIERSQUdHSU5HID0gNjtcbnZhciBERVNUUk9ZRUQgPSA3O1xudmFyIFNUQVRFUyA9IHtcbiAgQ1JFQVRFRDogQ1JFQVRFRCxcbiAgTU9VTlRFRDogTU9VTlRFRCxcbiAgSURMRTogSURMRSxcbiAgTU9WSU5HOiBNT1ZJTkcsXG4gIFNDUk9MTElORzogU0NST0xMSU5HLFxuICBEUkFHR0lORzogRFJBR0dJTkcsXG4gIERFU1RST1lFRDogREVTVFJPWUVEXG59O1xuXG5mdW5jdGlvbiBlbXB0eShhcnJheSkge1xuICBhcnJheS5sZW5ndGggPSAwO1xufVxuXG5mdW5jdGlvbiBzbGljZShhcnJheUxpa2UsIHN0YXJ0LCBlbmQpIHtcbiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycmF5TGlrZSwgc3RhcnQsIGVuZCk7XG59XG5cbmZ1bmN0aW9uIGFwcGx5KGZ1bmMpIHtcbiAgcmV0dXJuIGZ1bmMuYmluZC5hcHBseShmdW5jLCBbbnVsbF0uY29uY2F0KHNsaWNlKGFyZ3VtZW50cywgMSkpKTtcbn1cblxudmFyIG5leHRUaWNrID0gc2V0VGltZW91dDtcblxudmFyIG5vb3AgPSBmdW5jdGlvbiBub29wKCkge307XG5cbmZ1bmN0aW9uIHJhZihmdW5jKSB7XG4gIHJldHVybiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuYyk7XG59XG5cbmZ1bmN0aW9uIHR5cGVPZih0eXBlLCBzdWJqZWN0KSB7XG4gIHJldHVybiB0eXBlb2Ygc3ViamVjdCA9PT0gdHlwZTtcbn1cblxuZnVuY3Rpb24gaXNPYmplY3Qoc3ViamVjdCkge1xuICByZXR1cm4gIWlzTnVsbChzdWJqZWN0KSAmJiB0eXBlT2YoXCJvYmplY3RcIiwgc3ViamVjdCk7XG59XG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbnZhciBpc0Z1bmN0aW9uID0gYXBwbHkodHlwZU9mLCBcImZ1bmN0aW9uXCIpO1xudmFyIGlzU3RyaW5nID0gYXBwbHkodHlwZU9mLCBcInN0cmluZ1wiKTtcbnZhciBpc1VuZGVmaW5lZCA9IGFwcGx5KHR5cGVPZiwgXCJ1bmRlZmluZWRcIik7XG5cbmZ1bmN0aW9uIGlzTnVsbChzdWJqZWN0KSB7XG4gIHJldHVybiBzdWJqZWN0ID09PSBudWxsO1xufVxuXG5mdW5jdGlvbiBpc0hUTUxFbGVtZW50KHN1YmplY3QpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gc3ViamVjdCBpbnN0YW5jZW9mIChzdWJqZWN0Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgfHwgd2luZG93KS5IVE1MRWxlbWVudDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0b0FycmF5KHZhbHVlKSB7XG4gIHJldHVybiBpc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogW3ZhbHVlXTtcbn1cblxuZnVuY3Rpb24gZm9yRWFjaCh2YWx1ZXMsIGl0ZXJhdGVlKSB7XG4gIHRvQXJyYXkodmFsdWVzKS5mb3JFYWNoKGl0ZXJhdGVlKTtcbn1cblxuZnVuY3Rpb24gaW5jbHVkZXMoYXJyYXksIHZhbHVlKSB7XG4gIHJldHVybiBhcnJheS5pbmRleE9mKHZhbHVlKSA+IC0xO1xufVxuXG5mdW5jdGlvbiBwdXNoKGFycmF5LCBpdGVtcykge1xuICBhcnJheS5wdXNoLmFwcGx5KGFycmF5LCB0b0FycmF5KGl0ZW1zKSk7XG4gIHJldHVybiBhcnJheTtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoZWxtLCBjbGFzc2VzLCBhZGQpIHtcbiAgaWYgKGVsbSkge1xuICAgIGZvckVhY2goY2xhc3NlcywgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgIGVsbS5jbGFzc0xpc3RbYWRkID8gXCJhZGRcIiA6IFwicmVtb3ZlXCJdKG5hbWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFkZENsYXNzKGVsbSwgY2xhc3Nlcykge1xuICB0b2dnbGVDbGFzcyhlbG0sIGlzU3RyaW5nKGNsYXNzZXMpID8gY2xhc3Nlcy5zcGxpdChcIiBcIikgOiBjbGFzc2VzLCB0cnVlKTtcbn1cblxuZnVuY3Rpb24gYXBwZW5kKHBhcmVudCwgY2hpbGRyZW4pIHtcbiAgZm9yRWFjaChjaGlsZHJlbiwgcGFyZW50LmFwcGVuZENoaWxkLmJpbmQocGFyZW50KSk7XG59XG5cbmZ1bmN0aW9uIGJlZm9yZShub2RlcywgcmVmKSB7XG4gIGZvckVhY2gobm9kZXMsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgdmFyIHBhcmVudCA9IChyZWYgfHwgbm9kZSkucGFyZW50Tm9kZTtcblxuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUobm9kZSwgcmVmKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBtYXRjaGVzKGVsbSwgc2VsZWN0b3IpIHtcbiAgcmV0dXJuIGlzSFRNTEVsZW1lbnQoZWxtKSAmJiAoZWxtW1wibXNNYXRjaGVzU2VsZWN0b3JcIl0gfHwgZWxtLm1hdGNoZXMpLmNhbGwoZWxtLCBzZWxlY3Rvcik7XG59XG5cbmZ1bmN0aW9uIGNoaWxkcmVuKHBhcmVudCwgc2VsZWN0b3IpIHtcbiAgdmFyIGNoaWxkcmVuMiA9IHBhcmVudCA/IHNsaWNlKHBhcmVudC5jaGlsZHJlbikgOiBbXTtcbiAgcmV0dXJuIHNlbGVjdG9yID8gY2hpbGRyZW4yLmZpbHRlcihmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICByZXR1cm4gbWF0Y2hlcyhjaGlsZCwgc2VsZWN0b3IpO1xuICB9KSA6IGNoaWxkcmVuMjtcbn1cblxuZnVuY3Rpb24gY2hpbGQocGFyZW50LCBzZWxlY3Rvcikge1xuICByZXR1cm4gc2VsZWN0b3IgPyBjaGlsZHJlbihwYXJlbnQsIHNlbGVjdG9yKVswXSA6IHBhcmVudC5maXJzdEVsZW1lbnRDaGlsZDtcbn1cblxudmFyIG93bktleXMgPSBPYmplY3Qua2V5cztcblxuZnVuY3Rpb24gZm9yT3duKG9iamVjdCwgaXRlcmF0ZWUsIHJpZ2h0KSB7XG4gIGlmIChvYmplY3QpIHtcbiAgICAocmlnaHQgPyBvd25LZXlzKG9iamVjdCkucmV2ZXJzZSgpIDogb3duS2V5cyhvYmplY3QpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGtleSAhPT0gXCJfX3Byb3RvX19cIiAmJiBpdGVyYXRlZShvYmplY3Rba2V5XSwga2V5KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBvYmplY3Q7XG59XG5cbmZ1bmN0aW9uIGFzc2lnbihvYmplY3QpIHtcbiAgc2xpY2UoYXJndW1lbnRzLCAxKS5mb3JFYWNoKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICBmb3JPd24oc291cmNlLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgb2JqZWN0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBvYmplY3Q7XG59XG5cbmZ1bmN0aW9uIG1lcmdlKG9iamVjdCkge1xuICBzbGljZShhcmd1bWVudHMsIDEpLmZvckVhY2goZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgIGZvck93bihzb3VyY2UsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgb2JqZWN0W2tleV0gPSB2YWx1ZS5zbGljZSgpO1xuICAgICAgfSBlbHNlIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgb2JqZWN0W2tleV0gPSBtZXJnZSh7fSwgaXNPYmplY3Qob2JqZWN0W2tleV0pID8gb2JqZWN0W2tleV0gOiB7fSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb2JqZWN0W2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBvYmplY3Q7XG59XG5cbmZ1bmN0aW9uIG9taXQob2JqZWN0LCBrZXlzKSB7XG4gIGZvckVhY2goa2V5cyB8fCBvd25LZXlzKG9iamVjdCksIGZ1bmN0aW9uIChrZXkpIHtcbiAgICBkZWxldGUgb2JqZWN0W2tleV07XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZW1vdmVBdHRyaWJ1dGUoZWxtcywgYXR0cnMpIHtcbiAgZm9yRWFjaChlbG1zLCBmdW5jdGlvbiAoZWxtKSB7XG4gICAgZm9yRWFjaChhdHRycywgZnVuY3Rpb24gKGF0dHIpIHtcbiAgICAgIGVsbSAmJiBlbG0ucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gc2V0QXR0cmlidXRlKGVsbXMsIGF0dHJzLCB2YWx1ZSkge1xuICBpZiAoaXNPYmplY3QoYXR0cnMpKSB7XG4gICAgZm9yT3duKGF0dHJzLCBmdW5jdGlvbiAodmFsdWUyLCBuYW1lKSB7XG4gICAgICBzZXRBdHRyaWJ1dGUoZWxtcywgbmFtZSwgdmFsdWUyKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBmb3JFYWNoKGVsbXMsIGZ1bmN0aW9uIChlbG0pIHtcbiAgICAgIGlzTnVsbCh2YWx1ZSkgfHwgdmFsdWUgPT09IFwiXCIgPyByZW1vdmVBdHRyaWJ1dGUoZWxtLCBhdHRycykgOiBlbG0uc2V0QXR0cmlidXRlKGF0dHJzLCBTdHJpbmcodmFsdWUpKTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGUodGFnLCBhdHRycywgcGFyZW50KSB7XG4gIHZhciBlbG0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG5cbiAgaWYgKGF0dHJzKSB7XG4gICAgaXNTdHJpbmcoYXR0cnMpID8gYWRkQ2xhc3MoZWxtLCBhdHRycykgOiBzZXRBdHRyaWJ1dGUoZWxtLCBhdHRycyk7XG4gIH1cblxuICBwYXJlbnQgJiYgYXBwZW5kKHBhcmVudCwgZWxtKTtcbiAgcmV0dXJuIGVsbTtcbn1cblxuZnVuY3Rpb24gc3R5bGUoZWxtLCBwcm9wLCB2YWx1ZSkge1xuICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgcmV0dXJuIGdldENvbXB1dGVkU3R5bGUoZWxtKVtwcm9wXTtcbiAgfVxuXG4gIGlmICghaXNOdWxsKHZhbHVlKSkge1xuICAgIGVsbS5zdHlsZVtwcm9wXSA9IFwiXCIgKyB2YWx1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkaXNwbGF5KGVsbSwgZGlzcGxheTIpIHtcbiAgc3R5bGUoZWxtLCBcImRpc3BsYXlcIiwgZGlzcGxheTIpO1xufVxuXG5mdW5jdGlvbiBmb2N1cyhlbG0pIHtcbiAgZWxtW1wic2V0QWN0aXZlXCJdICYmIGVsbVtcInNldEFjdGl2ZVwiXSgpIHx8IGVsbS5mb2N1cyh7XG4gICAgcHJldmVudFNjcm9sbDogdHJ1ZVxuICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0QXR0cmlidXRlKGVsbSwgYXR0cikge1xuICByZXR1cm4gZWxtLmdldEF0dHJpYnV0ZShhdHRyKTtcbn1cblxuZnVuY3Rpb24gaGFzQ2xhc3MoZWxtLCBjbGFzc05hbWUpIHtcbiAgcmV0dXJuIGVsbSAmJiBlbG0uY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSk7XG59XG5cbmZ1bmN0aW9uIHJlY3QodGFyZ2V0KSB7XG4gIHJldHVybiB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZShub2Rlcykge1xuICBmb3JFYWNoKG5vZGVzLCBmdW5jdGlvbiAobm9kZSkge1xuICAgIGlmIChub2RlICYmIG5vZGUucGFyZW50Tm9kZSkge1xuICAgICAgbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlSHRtbChodG1sKSB7XG4gIHJldHVybiBjaGlsZChuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGh0bWwsIFwidGV4dC9odG1sXCIpLmJvZHkpO1xufVxuXG5mdW5jdGlvbiBwcmV2ZW50KGUsIHN0b3BQcm9wYWdhdGlvbikge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgaWYgKHN0b3BQcm9wYWdhdGlvbikge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBxdWVyeShwYXJlbnQsIHNlbGVjdG9yKSB7XG4gIHJldHVybiBwYXJlbnQgJiYgcGFyZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xufVxuXG5mdW5jdGlvbiBxdWVyeUFsbChwYXJlbnQsIHNlbGVjdG9yKSB7XG4gIHJldHVybiBzZWxlY3RvciA/IHNsaWNlKHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSkgOiBbXTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWxtLCBjbGFzc2VzKSB7XG4gIHRvZ2dsZUNsYXNzKGVsbSwgY2xhc3NlcywgZmFsc2UpO1xufVxuXG5mdW5jdGlvbiB0aW1lT2YoZSkge1xuICByZXR1cm4gZS50aW1lU3RhbXA7XG59XG5cbmZ1bmN0aW9uIHVuaXQodmFsdWUpIHtcbiAgcmV0dXJuIGlzU3RyaW5nKHZhbHVlKSA/IHZhbHVlIDogdmFsdWUgPyB2YWx1ZSArIFwicHhcIiA6IFwiXCI7XG59XG5cbnZhciBQUk9KRUNUX0NPREUgPSBcInNwbGlkZVwiO1xudmFyIERBVEFfQVRUUklCVVRFID0gXCJkYXRhLVwiICsgUFJPSkVDVF9DT0RFO1xuXG5mdW5jdGlvbiBhc3NlcnQoY29uZGl0aW9uLCBtZXNzYWdlKSB7XG4gIGlmICghY29uZGl0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiW1wiICsgUFJPSkVDVF9DT0RFICsgXCJdIFwiICsgKG1lc3NhZ2UgfHwgXCJcIikpO1xuICB9XG59XG5cbnZhciBtaW4gPSBNYXRoLm1pbixcbiAgICBtYXggPSBNYXRoLm1heCxcbiAgICBmbG9vciA9IE1hdGguZmxvb3IsXG4gICAgY2VpbCA9IE1hdGguY2VpbCxcbiAgICBhYnMgPSBNYXRoLmFicztcblxuZnVuY3Rpb24gYXBwcm94aW1hdGVseUVxdWFsKHgsIHksIGVwc2lsb24pIHtcbiAgcmV0dXJuIGFicyh4IC0geSkgPCBlcHNpbG9uO1xufVxuXG5mdW5jdGlvbiBiZXR3ZWVuKG51bWJlciwgeCwgeSwgZXhjbHVzaXZlKSB7XG4gIHZhciBtaW5pbXVtID0gbWluKHgsIHkpO1xuICB2YXIgbWF4aW11bSA9IG1heCh4LCB5KTtcbiAgcmV0dXJuIGV4Y2x1c2l2ZSA/IG1pbmltdW0gPCBudW1iZXIgJiYgbnVtYmVyIDwgbWF4aW11bSA6IG1pbmltdW0gPD0gbnVtYmVyICYmIG51bWJlciA8PSBtYXhpbXVtO1xufVxuXG5mdW5jdGlvbiBjbGFtcChudW1iZXIsIHgsIHkpIHtcbiAgdmFyIG1pbmltdW0gPSBtaW4oeCwgeSk7XG4gIHZhciBtYXhpbXVtID0gbWF4KHgsIHkpO1xuICByZXR1cm4gbWluKG1heChtaW5pbXVtLCBudW1iZXIpLCBtYXhpbXVtKTtcbn1cblxuZnVuY3Rpb24gc2lnbih4KSB7XG4gIHJldHVybiArKHggPiAwKSAtICsoeCA8IDApO1xufVxuXG5mdW5jdGlvbiBjYW1lbFRvS2ViYWIoc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmcucmVwbGFjZSgvKFthLXowLTldKShbQS1aXSkvZywgXCIkMS0kMlwiKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5mdW5jdGlvbiBmb3JtYXQoc3RyaW5nLCByZXBsYWNlbWVudHMpIHtcbiAgZm9yRWFjaChyZXBsYWNlbWVudHMsIGZ1bmN0aW9uIChyZXBsYWNlbWVudCkge1xuICAgIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKFwiJXNcIiwgXCJcIiArIHJlcGxhY2VtZW50KTtcbiAgfSk7XG4gIHJldHVybiBzdHJpbmc7XG59XG5cbmZ1bmN0aW9uIHBhZChudW1iZXIpIHtcbiAgcmV0dXJuIG51bWJlciA8IDEwID8gXCIwXCIgKyBudW1iZXIgOiBcIlwiICsgbnVtYmVyO1xufVxuXG52YXIgaWRzID0ge307XG5cbmZ1bmN0aW9uIHVuaXF1ZUlkKHByZWZpeCkge1xuICByZXR1cm4gXCJcIiArIHByZWZpeCArIHBhZChpZHNbcHJlZml4XSA9IChpZHNbcHJlZml4XSB8fCAwKSArIDEpO1xufVxuXG5mdW5jdGlvbiBFdmVudEJpbmRlcigpIHtcbiAgdmFyIGxpc3RlbmVycyA9IFtdO1xuXG4gIGZ1bmN0aW9uIGJpbmQodGFyZ2V0cywgZXZlbnRzLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICAgIGZvckVhY2hFdmVudCh0YXJnZXRzLCBldmVudHMsIGZ1bmN0aW9uICh0YXJnZXQsIGV2ZW50LCBuYW1lc3BhY2UpIHtcbiAgICAgIHZhciBpc0V2ZW50VGFyZ2V0ID0gKFwiYWRkRXZlbnRMaXN0ZW5lclwiIGluIHRhcmdldCk7XG4gICAgICB2YXIgcmVtb3ZlciA9IGlzRXZlbnRUYXJnZXQgPyB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lci5iaW5kKHRhcmdldCwgZXZlbnQsIGNhbGxiYWNrLCBvcHRpb25zKSA6IHRhcmdldFtcInJlbW92ZUxpc3RlbmVyXCJdLmJpbmQodGFyZ2V0LCBjYWxsYmFjayk7XG4gICAgICBpc0V2ZW50VGFyZ2V0ID8gdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGNhbGxiYWNrLCBvcHRpb25zKSA6IHRhcmdldFtcImFkZExpc3RlbmVyXCJdKGNhbGxiYWNrKTtcbiAgICAgIGxpc3RlbmVycy5wdXNoKFt0YXJnZXQsIGV2ZW50LCBuYW1lc3BhY2UsIGNhbGxiYWNrLCByZW1vdmVyXSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiB1bmJpbmQodGFyZ2V0cywgZXZlbnRzLCBjYWxsYmFjaykge1xuICAgIGZvckVhY2hFdmVudCh0YXJnZXRzLCBldmVudHMsIGZ1bmN0aW9uICh0YXJnZXQsIGV2ZW50LCBuYW1lc3BhY2UpIHtcbiAgICAgIGxpc3RlbmVycyA9IGxpc3RlbmVycy5maWx0ZXIoZnVuY3Rpb24gKGxpc3RlbmVyKSB7XG4gICAgICAgIGlmIChsaXN0ZW5lclswXSA9PT0gdGFyZ2V0ICYmIGxpc3RlbmVyWzFdID09PSBldmVudCAmJiBsaXN0ZW5lclsyXSA9PT0gbmFtZXNwYWNlICYmICghY2FsbGJhY2sgfHwgbGlzdGVuZXJbM10gPT09IGNhbGxiYWNrKSkge1xuICAgICAgICAgIGxpc3RlbmVyWzRdKCk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc3BhdGNoKHRhcmdldCwgdHlwZSwgZGV0YWlsKSB7XG4gICAgdmFyIGU7XG4gICAgdmFyIGJ1YmJsZXMgPSB0cnVlO1xuXG4gICAgaWYgKHR5cGVvZiBDdXN0b21FdmVudCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBlID0gbmV3IEN1c3RvbUV2ZW50KHR5cGUsIHtcbiAgICAgICAgYnViYmxlczogYnViYmxlcyxcbiAgICAgICAgZGV0YWlsOiBkZXRhaWxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJDdXN0b21FdmVudFwiKTtcbiAgICAgIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIGJ1YmJsZXMsIGZhbHNlLCBkZXRhaWwpO1xuICAgIH1cblxuICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KGUpO1xuICAgIHJldHVybiBlO1xuICB9XG5cbiAgZnVuY3Rpb24gZm9yRWFjaEV2ZW50KHRhcmdldHMsIGV2ZW50cywgaXRlcmF0ZWUpIHtcbiAgICBmb3JFYWNoKHRhcmdldHMsIGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgIHRhcmdldCAmJiBmb3JFYWNoKGV2ZW50cywgZnVuY3Rpb24gKGV2ZW50czIpIHtcbiAgICAgICAgZXZlbnRzMi5zcGxpdChcIiBcIikuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnROUykge1xuICAgICAgICAgIHZhciBmcmFnbWVudCA9IGV2ZW50TlMuc3BsaXQoXCIuXCIpO1xuICAgICAgICAgIGl0ZXJhdGVlKHRhcmdldCwgZnJhZ21lbnRbMF0sIGZyYWdtZW50WzFdKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgbGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIGRhdGFbNF0oKTtcbiAgICB9KTtcbiAgICBlbXB0eShsaXN0ZW5lcnMpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBiaW5kOiBiaW5kLFxuICAgIHVuYmluZDogdW5iaW5kLFxuICAgIGRpc3BhdGNoOiBkaXNwYXRjaCxcbiAgICBkZXN0cm95OiBkZXN0cm95XG4gIH07XG59XG5cbnZhciBFVkVOVF9NT1VOVEVEID0gXCJtb3VudGVkXCI7XG52YXIgRVZFTlRfUkVBRFkgPSBcInJlYWR5XCI7XG52YXIgRVZFTlRfTU9WRSA9IFwibW92ZVwiO1xudmFyIEVWRU5UX01PVkVEID0gXCJtb3ZlZFwiO1xudmFyIEVWRU5UX0NMSUNLID0gXCJjbGlja1wiO1xudmFyIEVWRU5UX0FDVElWRSA9IFwiYWN0aXZlXCI7XG52YXIgRVZFTlRfSU5BQ1RJVkUgPSBcImluYWN0aXZlXCI7XG52YXIgRVZFTlRfVklTSUJMRSA9IFwidmlzaWJsZVwiO1xudmFyIEVWRU5UX0hJRERFTiA9IFwiaGlkZGVuXCI7XG52YXIgRVZFTlRfUkVGUkVTSCA9IFwicmVmcmVzaFwiO1xudmFyIEVWRU5UX1VQREFURUQgPSBcInVwZGF0ZWRcIjtcbnZhciBFVkVOVF9SRVNJWkUgPSBcInJlc2l6ZVwiO1xudmFyIEVWRU5UX1JFU0laRUQgPSBcInJlc2l6ZWRcIjtcbnZhciBFVkVOVF9EUkFHID0gXCJkcmFnXCI7XG52YXIgRVZFTlRfRFJBR0dJTkcgPSBcImRyYWdnaW5nXCI7XG52YXIgRVZFTlRfRFJBR0dFRCA9IFwiZHJhZ2dlZFwiO1xudmFyIEVWRU5UX1NDUk9MTCA9IFwic2Nyb2xsXCI7XG52YXIgRVZFTlRfU0NST0xMRUQgPSBcInNjcm9sbGVkXCI7XG52YXIgRVZFTlRfT1ZFUkZMT1cgPSBcIm92ZXJmbG93XCI7XG52YXIgRVZFTlRfREVTVFJPWSA9IFwiZGVzdHJveVwiO1xudmFyIEVWRU5UX0FSUk9XU19NT1VOVEVEID0gXCJhcnJvd3M6bW91bnRlZFwiO1xudmFyIEVWRU5UX0FSUk9XU19VUERBVEVEID0gXCJhcnJvd3M6dXBkYXRlZFwiO1xudmFyIEVWRU5UX1BBR0lOQVRJT05fTU9VTlRFRCA9IFwicGFnaW5hdGlvbjptb3VudGVkXCI7XG52YXIgRVZFTlRfUEFHSU5BVElPTl9VUERBVEVEID0gXCJwYWdpbmF0aW9uOnVwZGF0ZWRcIjtcbnZhciBFVkVOVF9OQVZJR0FUSU9OX01PVU5URUQgPSBcIm5hdmlnYXRpb246bW91bnRlZFwiO1xudmFyIEVWRU5UX0FVVE9QTEFZX1BMQVkgPSBcImF1dG9wbGF5OnBsYXlcIjtcbnZhciBFVkVOVF9BVVRPUExBWV9QTEFZSU5HID0gXCJhdXRvcGxheTpwbGF5aW5nXCI7XG52YXIgRVZFTlRfQVVUT1BMQVlfUEFVU0UgPSBcImF1dG9wbGF5OnBhdXNlXCI7XG52YXIgRVZFTlRfTEFaWUxPQURfTE9BREVEID0gXCJsYXp5bG9hZDpsb2FkZWRcIjtcbnZhciBFVkVOVF9TTElERV9LRVlET1dOID0gXCJza1wiO1xudmFyIEVWRU5UX1NISUZURUQgPSBcInNoXCI7XG52YXIgRVZFTlRfRU5EX0lOREVYX0NIQU5HRUQgPSBcImVpXCI7XG5cbmZ1bmN0aW9uIEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpIHtcbiAgdmFyIGJ1cyA9IFNwbGlkZTIgPyBTcGxpZGUyLmV2ZW50LmJ1cyA6IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgdmFyIGJpbmRlciA9IEV2ZW50QmluZGVyKCk7XG5cbiAgZnVuY3Rpb24gb24oZXZlbnRzLCBjYWxsYmFjaykge1xuICAgIGJpbmRlci5iaW5kKGJ1cywgdG9BcnJheShldmVudHMpLmpvaW4oXCIgXCIpLCBmdW5jdGlvbiAoZSkge1xuICAgICAgY2FsbGJhY2suYXBwbHkoY2FsbGJhY2ssIGlzQXJyYXkoZS5kZXRhaWwpID8gZS5kZXRhaWwgOiBbXSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBlbWl0KGV2ZW50KSB7XG4gICAgYmluZGVyLmRpc3BhdGNoKGJ1cywgZXZlbnQsIHNsaWNlKGFyZ3VtZW50cywgMSkpO1xuICB9XG5cbiAgaWYgKFNwbGlkZTIpIHtcbiAgICBTcGxpZGUyLmV2ZW50Lm9uKEVWRU5UX0RFU1RST1ksIGJpbmRlci5kZXN0cm95KTtcbiAgfVxuXG4gIHJldHVybiBhc3NpZ24oYmluZGVyLCB7XG4gICAgYnVzOiBidXMsXG4gICAgb246IG9uLFxuICAgIG9mZjogYXBwbHkoYmluZGVyLnVuYmluZCwgYnVzKSxcbiAgICBlbWl0OiBlbWl0XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBSZXF1ZXN0SW50ZXJ2YWwoaW50ZXJ2YWwsIG9uSW50ZXJ2YWwsIG9uVXBkYXRlLCBsaW1pdCkge1xuICB2YXIgbm93ID0gRGF0ZS5ub3c7XG4gIHZhciBzdGFydFRpbWU7XG4gIHZhciByYXRlID0gMDtcbiAgdmFyIGlkO1xuICB2YXIgcGF1c2VkID0gdHJ1ZTtcbiAgdmFyIGNvdW50ID0gMDtcblxuICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgaWYgKCFwYXVzZWQpIHtcbiAgICAgIHJhdGUgPSBpbnRlcnZhbCA/IG1pbigobm93KCkgLSBzdGFydFRpbWUpIC8gaW50ZXJ2YWwsIDEpIDogMTtcbiAgICAgIG9uVXBkYXRlICYmIG9uVXBkYXRlKHJhdGUpO1xuXG4gICAgICBpZiAocmF0ZSA+PSAxKSB7XG4gICAgICAgIG9uSW50ZXJ2YWwoKTtcbiAgICAgICAgc3RhcnRUaW1lID0gbm93KCk7XG5cbiAgICAgICAgaWYgKGxpbWl0ICYmICsrY291bnQgPj0gbGltaXQpIHtcbiAgICAgICAgICByZXR1cm4gcGF1c2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZCA9IHJhZih1cGRhdGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0YXJ0KHJlc3VtZSkge1xuICAgIHJlc3VtZSB8fCBjYW5jZWwoKTtcbiAgICBzdGFydFRpbWUgPSBub3coKSAtIChyZXN1bWUgPyByYXRlICogaW50ZXJ2YWwgOiAwKTtcbiAgICBwYXVzZWQgPSBmYWxzZTtcbiAgICBpZCA9IHJhZih1cGRhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgcGF1c2VkID0gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJld2luZCgpIHtcbiAgICBzdGFydFRpbWUgPSBub3coKTtcbiAgICByYXRlID0gMDtcblxuICAgIGlmIChvblVwZGF0ZSkge1xuICAgICAgb25VcGRhdGUocmF0ZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgIGlkICYmIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGlkKTtcbiAgICByYXRlID0gMDtcbiAgICBpZCA9IDA7XG4gICAgcGF1c2VkID0gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldCh0aW1lKSB7XG4gICAgaW50ZXJ2YWwgPSB0aW1lO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNQYXVzZWQoKSB7XG4gICAgcmV0dXJuIHBhdXNlZDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc3RhcnQ6IHN0YXJ0LFxuICAgIHJld2luZDogcmV3aW5kLFxuICAgIHBhdXNlOiBwYXVzZSxcbiAgICBjYW5jZWw6IGNhbmNlbCxcbiAgICBzZXQ6IHNldCxcbiAgICBpc1BhdXNlZDogaXNQYXVzZWRcbiAgfTtcbn1cblxuZnVuY3Rpb24gU3RhdGUoaW5pdGlhbFN0YXRlKSB7XG4gIHZhciBzdGF0ZSA9IGluaXRpYWxTdGF0ZTtcblxuICBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICBzdGF0ZSA9IHZhbHVlO1xuICB9XG5cbiAgZnVuY3Rpb24gaXMoc3RhdGVzKSB7XG4gICAgcmV0dXJuIGluY2x1ZGVzKHRvQXJyYXkoc3RhdGVzKSwgc3RhdGUpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzZXQ6IHNldCxcbiAgICBpczogaXNcbiAgfTtcbn1cblxuZnVuY3Rpb24gVGhyb3R0bGUoZnVuYywgZHVyYXRpb24pIHtcbiAgdmFyIGludGVydmFsID0gUmVxdWVzdEludGVydmFsKGR1cmF0aW9uIHx8IDAsIGZ1bmMsIG51bGwsIDEpO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGludGVydmFsLmlzUGF1c2VkKCkgJiYgaW50ZXJ2YWwuc3RhcnQoKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gTWVkaWEoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIHN0YXRlID0gU3BsaWRlMi5zdGF0ZTtcbiAgdmFyIGJyZWFrcG9pbnRzID0gb3B0aW9ucy5icmVha3BvaW50cyB8fCB7fTtcbiAgdmFyIHJlZHVjZWRNb3Rpb24gPSBvcHRpb25zLnJlZHVjZWRNb3Rpb24gfHwge307XG4gIHZhciBiaW5kZXIgPSBFdmVudEJpbmRlcigpO1xuICB2YXIgcXVlcmllcyA9IFtdO1xuXG4gIGZ1bmN0aW9uIHNldHVwKCkge1xuICAgIHZhciBpc01pbiA9IG9wdGlvbnMubWVkaWFRdWVyeSA9PT0gXCJtaW5cIjtcbiAgICBvd25LZXlzKGJyZWFrcG9pbnRzKS5zb3J0KGZ1bmN0aW9uIChuLCBtKSB7XG4gICAgICByZXR1cm4gaXNNaW4gPyArbiAtICttIDogK20gLSArbjtcbiAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJlZ2lzdGVyKGJyZWFrcG9pbnRzW2tleV0sIFwiKFwiICsgKGlzTWluID8gXCJtaW5cIiA6IFwibWF4XCIpICsgXCItd2lkdGg6XCIgKyBrZXkgKyBcInB4KVwiKTtcbiAgICB9KTtcbiAgICByZWdpc3RlcihyZWR1Y2VkTW90aW9uLCBNRURJQV9QUkVGRVJTX1JFRFVDRURfTU9USU9OKTtcbiAgICB1cGRhdGUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3koY29tcGxldGVseSkge1xuICAgIGlmIChjb21wbGV0ZWx5KSB7XG4gICAgICBiaW5kZXIuZGVzdHJveSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyKG9wdGlvbnMyLCBxdWVyeSkge1xuICAgIHZhciBxdWVyeUxpc3QgPSBtYXRjaE1lZGlhKHF1ZXJ5KTtcbiAgICBiaW5kZXIuYmluZChxdWVyeUxpc3QsIFwiY2hhbmdlXCIsIHVwZGF0ZSk7XG4gICAgcXVlcmllcy5wdXNoKFtvcHRpb25zMiwgcXVlcnlMaXN0XSk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgdmFyIGRlc3Ryb3llZCA9IHN0YXRlLmlzKERFU1RST1lFRCk7XG4gICAgdmFyIGRpcmVjdGlvbiA9IG9wdGlvbnMuZGlyZWN0aW9uO1xuICAgIHZhciBtZXJnZWQgPSBxdWVyaWVzLnJlZHVjZShmdW5jdGlvbiAobWVyZ2VkMiwgZW50cnkpIHtcbiAgICAgIHJldHVybiBtZXJnZShtZXJnZWQyLCBlbnRyeVsxXS5tYXRjaGVzID8gZW50cnlbMF0gOiB7fSk7XG4gICAgfSwge30pO1xuICAgIG9taXQob3B0aW9ucyk7XG4gICAgc2V0KG1lcmdlZCk7XG5cbiAgICBpZiAob3B0aW9ucy5kZXN0cm95KSB7XG4gICAgICBTcGxpZGUyLmRlc3Ryb3kob3B0aW9ucy5kZXN0cm95ID09PSBcImNvbXBsZXRlbHlcIik7XG4gICAgfSBlbHNlIGlmIChkZXN0cm95ZWQpIHtcbiAgICAgIGRlc3Ryb3kodHJ1ZSk7XG4gICAgICBTcGxpZGUyLm1vdW50KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRpcmVjdGlvbiAhPT0gb3B0aW9ucy5kaXJlY3Rpb24gJiYgU3BsaWRlMi5yZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVkdWNlKGVuYWJsZSkge1xuICAgIGlmIChtYXRjaE1lZGlhKE1FRElBX1BSRUZFUlNfUkVEVUNFRF9NT1RJT04pLm1hdGNoZXMpIHtcbiAgICAgIGVuYWJsZSA/IG1lcmdlKG9wdGlvbnMsIHJlZHVjZWRNb3Rpb24pIDogb21pdChvcHRpb25zLCBvd25LZXlzKHJlZHVjZWRNb3Rpb24pKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXQob3B0cywgYmFzZSwgbm90aWZ5KSB7XG4gICAgbWVyZ2Uob3B0aW9ucywgb3B0cyk7XG4gICAgYmFzZSAmJiBtZXJnZShPYmplY3QuZ2V0UHJvdG90eXBlT2Yob3B0aW9ucyksIG9wdHMpO1xuXG4gICAgaWYgKG5vdGlmeSB8fCAhc3RhdGUuaXMoQ1JFQVRFRCkpIHtcbiAgICAgIFNwbGlkZTIuZW1pdChFVkVOVF9VUERBVEVELCBvcHRpb25zKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHNldHVwOiBzZXR1cCxcbiAgICBkZXN0cm95OiBkZXN0cm95LFxuICAgIHJlZHVjZTogcmVkdWNlLFxuICAgIHNldDogc2V0XG4gIH07XG59XG5cbnZhciBBUlJPVyA9IFwiQXJyb3dcIjtcbnZhciBBUlJPV19MRUZUID0gQVJST1cgKyBcIkxlZnRcIjtcbnZhciBBUlJPV19SSUdIVCA9IEFSUk9XICsgXCJSaWdodFwiO1xudmFyIEFSUk9XX1VQID0gQVJST1cgKyBcIlVwXCI7XG52YXIgQVJST1dfRE9XTiA9IEFSUk9XICsgXCJEb3duXCI7XG52YXIgTFRSID0gXCJsdHJcIjtcbnZhciBSVEwgPSBcInJ0bFwiO1xudmFyIFRUQiA9IFwidHRiXCI7XG52YXIgT1JJRU5UQVRJT05fTUFQID0ge1xuICB3aWR0aDogW1wiaGVpZ2h0XCJdLFxuICBsZWZ0OiBbXCJ0b3BcIiwgXCJyaWdodFwiXSxcbiAgcmlnaHQ6IFtcImJvdHRvbVwiLCBcImxlZnRcIl0sXG4gIHg6IFtcInlcIl0sXG4gIFg6IFtcIllcIl0sXG4gIFk6IFtcIlhcIl0sXG4gIEFycm93TGVmdDogW0FSUk9XX1VQLCBBUlJPV19SSUdIVF0sXG4gIEFycm93UmlnaHQ6IFtBUlJPV19ET1dOLCBBUlJPV19MRUZUXVxufTtcblxuZnVuY3Rpb24gRGlyZWN0aW9uKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIGZ1bmN0aW9uIHJlc29sdmUocHJvcCwgYXhpc09ubHksIGRpcmVjdGlvbikge1xuICAgIGRpcmVjdGlvbiA9IGRpcmVjdGlvbiB8fCBvcHRpb25zLmRpcmVjdGlvbjtcbiAgICB2YXIgaW5kZXggPSBkaXJlY3Rpb24gPT09IFJUTCAmJiAhYXhpc09ubHkgPyAxIDogZGlyZWN0aW9uID09PSBUVEIgPyAwIDogLTE7XG4gICAgcmV0dXJuIE9SSUVOVEFUSU9OX01BUFtwcm9wXSAmJiBPUklFTlRBVElPTl9NQVBbcHJvcF1baW5kZXhdIHx8IHByb3AucmVwbGFjZSgvd2lkdGh8bGVmdHxyaWdodC9pLCBmdW5jdGlvbiAobWF0Y2gsIG9mZnNldCkge1xuICAgICAgdmFyIHJlcGxhY2VtZW50ID0gT1JJRU5UQVRJT05fTUFQW21hdGNoLnRvTG93ZXJDYXNlKCldW2luZGV4XSB8fCBtYXRjaDtcbiAgICAgIHJldHVybiBvZmZzZXQgPiAwID8gcmVwbGFjZW1lbnQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyByZXBsYWNlbWVudC5zbGljZSgxKSA6IHJlcGxhY2VtZW50O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb3JpZW50KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICogKG9wdGlvbnMuZGlyZWN0aW9uID09PSBSVEwgPyAxIDogLTEpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByZXNvbHZlOiByZXNvbHZlLFxuICAgIG9yaWVudDogb3JpZW50XG4gIH07XG59XG5cbnZhciBST0xFID0gXCJyb2xlXCI7XG52YXIgVEFCX0lOREVYID0gXCJ0YWJpbmRleFwiO1xudmFyIERJU0FCTEVEID0gXCJkaXNhYmxlZFwiO1xudmFyIEFSSUFfUFJFRklYID0gXCJhcmlhLVwiO1xudmFyIEFSSUFfQ09OVFJPTFMgPSBBUklBX1BSRUZJWCArIFwiY29udHJvbHNcIjtcbnZhciBBUklBX0NVUlJFTlQgPSBBUklBX1BSRUZJWCArIFwiY3VycmVudFwiO1xudmFyIEFSSUFfU0VMRUNURUQgPSBBUklBX1BSRUZJWCArIFwic2VsZWN0ZWRcIjtcbnZhciBBUklBX0xBQkVMID0gQVJJQV9QUkVGSVggKyBcImxhYmVsXCI7XG52YXIgQVJJQV9MQUJFTExFREJZID0gQVJJQV9QUkVGSVggKyBcImxhYmVsbGVkYnlcIjtcbnZhciBBUklBX0hJRERFTiA9IEFSSUFfUFJFRklYICsgXCJoaWRkZW5cIjtcbnZhciBBUklBX09SSUVOVEFUSU9OID0gQVJJQV9QUkVGSVggKyBcIm9yaWVudGF0aW9uXCI7XG52YXIgQVJJQV9ST0xFREVTQ1JJUFRJT04gPSBBUklBX1BSRUZJWCArIFwicm9sZWRlc2NyaXB0aW9uXCI7XG52YXIgQVJJQV9MSVZFID0gQVJJQV9QUkVGSVggKyBcImxpdmVcIjtcbnZhciBBUklBX0JVU1kgPSBBUklBX1BSRUZJWCArIFwiYnVzeVwiO1xudmFyIEFSSUFfQVRPTUlDID0gQVJJQV9QUkVGSVggKyBcImF0b21pY1wiO1xudmFyIEFMTF9BVFRSSUJVVEVTID0gW1JPTEUsIFRBQl9JTkRFWCwgRElTQUJMRUQsIEFSSUFfQ09OVFJPTFMsIEFSSUFfQ1VSUkVOVCwgQVJJQV9MQUJFTCwgQVJJQV9MQUJFTExFREJZLCBBUklBX0hJRERFTiwgQVJJQV9PUklFTlRBVElPTiwgQVJJQV9ST0xFREVTQ1JJUFRJT05dO1xudmFyIENMQVNTX1BSRUZJWCA9IFBST0pFQ1RfQ09ERSArIFwiX19cIjtcbnZhciBTVEFUVVNfQ0xBU1NfUFJFRklYID0gXCJpcy1cIjtcbnZhciBDTEFTU19ST09UID0gUFJPSkVDVF9DT0RFO1xudmFyIENMQVNTX1RSQUNLID0gQ0xBU1NfUFJFRklYICsgXCJ0cmFja1wiO1xudmFyIENMQVNTX0xJU1QgPSBDTEFTU19QUkVGSVggKyBcImxpc3RcIjtcbnZhciBDTEFTU19TTElERSA9IENMQVNTX1BSRUZJWCArIFwic2xpZGVcIjtcbnZhciBDTEFTU19DTE9ORSA9IENMQVNTX1NMSURFICsgXCItLWNsb25lXCI7XG52YXIgQ0xBU1NfQ09OVEFJTkVSID0gQ0xBU1NfU0xJREUgKyBcIl9fY29udGFpbmVyXCI7XG52YXIgQ0xBU1NfQVJST1dTID0gQ0xBU1NfUFJFRklYICsgXCJhcnJvd3NcIjtcbnZhciBDTEFTU19BUlJPVyA9IENMQVNTX1BSRUZJWCArIFwiYXJyb3dcIjtcbnZhciBDTEFTU19BUlJPV19QUkVWID0gQ0xBU1NfQVJST1cgKyBcIi0tcHJldlwiO1xudmFyIENMQVNTX0FSUk9XX05FWFQgPSBDTEFTU19BUlJPVyArIFwiLS1uZXh0XCI7XG52YXIgQ0xBU1NfUEFHSU5BVElPTiA9IENMQVNTX1BSRUZJWCArIFwicGFnaW5hdGlvblwiO1xudmFyIENMQVNTX1BBR0lOQVRJT05fUEFHRSA9IENMQVNTX1BBR0lOQVRJT04gKyBcIl9fcGFnZVwiO1xudmFyIENMQVNTX1BST0dSRVNTID0gQ0xBU1NfUFJFRklYICsgXCJwcm9ncmVzc1wiO1xudmFyIENMQVNTX1BST0dSRVNTX0JBUiA9IENMQVNTX1BST0dSRVNTICsgXCJfX2JhclwiO1xudmFyIENMQVNTX1RPR0dMRSA9IENMQVNTX1BSRUZJWCArIFwidG9nZ2xlXCI7XG52YXIgQ0xBU1NfVE9HR0xFX1BMQVkgPSBDTEFTU19UT0dHTEUgKyBcIl9fcGxheVwiO1xudmFyIENMQVNTX1RPR0dMRV9QQVVTRSA9IENMQVNTX1RPR0dMRSArIFwiX19wYXVzZVwiO1xudmFyIENMQVNTX1NQSU5ORVIgPSBDTEFTU19QUkVGSVggKyBcInNwaW5uZXJcIjtcbnZhciBDTEFTU19TUiA9IENMQVNTX1BSRUZJWCArIFwic3JcIjtcbnZhciBDTEFTU19JTklUSUFMSVpFRCA9IFNUQVRVU19DTEFTU19QUkVGSVggKyBcImluaXRpYWxpemVkXCI7XG52YXIgQ0xBU1NfQUNUSVZFID0gU1RBVFVTX0NMQVNTX1BSRUZJWCArIFwiYWN0aXZlXCI7XG52YXIgQ0xBU1NfUFJFViA9IFNUQVRVU19DTEFTU19QUkVGSVggKyBcInByZXZcIjtcbnZhciBDTEFTU19ORVhUID0gU1RBVFVTX0NMQVNTX1BSRUZJWCArIFwibmV4dFwiO1xudmFyIENMQVNTX1ZJU0lCTEUgPSBTVEFUVVNfQ0xBU1NfUFJFRklYICsgXCJ2aXNpYmxlXCI7XG52YXIgQ0xBU1NfTE9BRElORyA9IFNUQVRVU19DTEFTU19QUkVGSVggKyBcImxvYWRpbmdcIjtcbnZhciBDTEFTU19GT0NVU19JTiA9IFNUQVRVU19DTEFTU19QUkVGSVggKyBcImZvY3VzLWluXCI7XG52YXIgQ0xBU1NfT1ZFUkZMT1cgPSBTVEFUVVNfQ0xBU1NfUFJFRklYICsgXCJvdmVyZmxvd1wiO1xudmFyIFNUQVRVU19DTEFTU0VTID0gW0NMQVNTX0FDVElWRSwgQ0xBU1NfVklTSUJMRSwgQ0xBU1NfUFJFViwgQ0xBU1NfTkVYVCwgQ0xBU1NfTE9BRElORywgQ0xBU1NfRk9DVVNfSU4sIENMQVNTX09WRVJGTE9XXTtcbnZhciBDTEFTU0VTID0ge1xuICBzbGlkZTogQ0xBU1NfU0xJREUsXG4gIGNsb25lOiBDTEFTU19DTE9ORSxcbiAgYXJyb3dzOiBDTEFTU19BUlJPV1MsXG4gIGFycm93OiBDTEFTU19BUlJPVyxcbiAgcHJldjogQ0xBU1NfQVJST1dfUFJFVixcbiAgbmV4dDogQ0xBU1NfQVJST1dfTkVYVCxcbiAgcGFnaW5hdGlvbjogQ0xBU1NfUEFHSU5BVElPTixcbiAgcGFnZTogQ0xBU1NfUEFHSU5BVElPTl9QQUdFLFxuICBzcGlubmVyOiBDTEFTU19TUElOTkVSXG59O1xuXG5mdW5jdGlvbiBjbG9zZXN0KGZyb20sIHNlbGVjdG9yKSB7XG4gIGlmIChpc0Z1bmN0aW9uKGZyb20uY2xvc2VzdCkpIHtcbiAgICByZXR1cm4gZnJvbS5jbG9zZXN0KHNlbGVjdG9yKTtcbiAgfVxuXG4gIHZhciBlbG0gPSBmcm9tO1xuXG4gIHdoaWxlIChlbG0gJiYgZWxtLm5vZGVUeXBlID09PSAxKSB7XG4gICAgaWYgKG1hdGNoZXMoZWxtLCBzZWxlY3RvcikpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGVsbSA9IGVsbS5wYXJlbnRFbGVtZW50O1xuICB9XG5cbiAgcmV0dXJuIGVsbTtcbn1cblxudmFyIEZSSUNUSU9OID0gNTtcbnZhciBMT0dfSU5URVJWQUwgPSAyMDA7XG52YXIgUE9JTlRFUl9ET1dOX0VWRU5UUyA9IFwidG91Y2hzdGFydCBtb3VzZWRvd25cIjtcbnZhciBQT0lOVEVSX01PVkVfRVZFTlRTID0gXCJ0b3VjaG1vdmUgbW91c2Vtb3ZlXCI7XG52YXIgUE9JTlRFUl9VUF9FVkVOVFMgPSBcInRvdWNoZW5kIHRvdWNoY2FuY2VsIG1vdXNldXAgY2xpY2tcIjtcblxuZnVuY3Rpb24gRWxlbWVudHMoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIF9FdmVudEludGVyZmFjZSA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpLFxuICAgICAgb24gPSBfRXZlbnRJbnRlcmZhY2Uub24sXG4gICAgICBiaW5kID0gX0V2ZW50SW50ZXJmYWNlLmJpbmQ7XG5cbiAgdmFyIHJvb3QgPSBTcGxpZGUyLnJvb3Q7XG4gIHZhciBpMThuID0gb3B0aW9ucy5pMThuO1xuICB2YXIgZWxlbWVudHMgPSB7fTtcbiAgdmFyIHNsaWRlcyA9IFtdO1xuICB2YXIgcm9vdENsYXNzZXMgPSBbXTtcbiAgdmFyIHRyYWNrQ2xhc3NlcyA9IFtdO1xuICB2YXIgdHJhY2s7XG4gIHZhciBsaXN0O1xuICB2YXIgaXNVc2luZ0tleTtcblxuICBmdW5jdGlvbiBzZXR1cCgpIHtcbiAgICBjb2xsZWN0KCk7XG4gICAgaW5pdCgpO1xuICAgIHVwZGF0ZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgb24oRVZFTlRfUkVGUkVTSCwgZGVzdHJveSk7XG4gICAgb24oRVZFTlRfUkVGUkVTSCwgc2V0dXApO1xuICAgIG9uKEVWRU5UX1VQREFURUQsIHVwZGF0ZSk7XG4gICAgYmluZChkb2N1bWVudCwgUE9JTlRFUl9ET1dOX0VWRU5UUyArIFwiIGtleWRvd25cIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlzVXNpbmdLZXkgPSBlLnR5cGUgPT09IFwia2V5ZG93blwiO1xuICAgIH0sIHtcbiAgICAgIGNhcHR1cmU6IHRydWVcbiAgICB9KTtcbiAgICBiaW5kKHJvb3QsIFwiZm9jdXNpblwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0b2dnbGVDbGFzcyhyb290LCBDTEFTU19GT0NVU19JTiwgISFpc1VzaW5nS2V5KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3koY29tcGxldGVseSkge1xuICAgIHZhciBhdHRycyA9IEFMTF9BVFRSSUJVVEVTLmNvbmNhdChcInN0eWxlXCIpO1xuICAgIGVtcHR5KHNsaWRlcyk7XG4gICAgcmVtb3ZlQ2xhc3Mocm9vdCwgcm9vdENsYXNzZXMpO1xuICAgIHJlbW92ZUNsYXNzKHRyYWNrLCB0cmFja0NsYXNzZXMpO1xuICAgIHJlbW92ZUF0dHJpYnV0ZShbdHJhY2ssIGxpc3RdLCBhdHRycyk7XG4gICAgcmVtb3ZlQXR0cmlidXRlKHJvb3QsIGNvbXBsZXRlbHkgPyBhdHRycyA6IFtcInN0eWxlXCIsIEFSSUFfUk9MRURFU0NSSVBUSU9OXSk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgcmVtb3ZlQ2xhc3Mocm9vdCwgcm9vdENsYXNzZXMpO1xuICAgIHJlbW92ZUNsYXNzKHRyYWNrLCB0cmFja0NsYXNzZXMpO1xuICAgIHJvb3RDbGFzc2VzID0gZ2V0Q2xhc3NlcyhDTEFTU19ST09UKTtcbiAgICB0cmFja0NsYXNzZXMgPSBnZXRDbGFzc2VzKENMQVNTX1RSQUNLKTtcbiAgICBhZGRDbGFzcyhyb290LCByb290Q2xhc3Nlcyk7XG4gICAgYWRkQ2xhc3ModHJhY2ssIHRyYWNrQ2xhc3Nlcyk7XG4gICAgc2V0QXR0cmlidXRlKHJvb3QsIEFSSUFfTEFCRUwsIG9wdGlvbnMubGFiZWwpO1xuICAgIHNldEF0dHJpYnV0ZShyb290LCBBUklBX0xBQkVMTEVEQlksIG9wdGlvbnMubGFiZWxsZWRieSk7XG4gIH1cblxuICBmdW5jdGlvbiBjb2xsZWN0KCkge1xuICAgIHRyYWNrID0gZmluZChcIi5cIiArIENMQVNTX1RSQUNLKTtcbiAgICBsaXN0ID0gY2hpbGQodHJhY2ssIFwiLlwiICsgQ0xBU1NfTElTVCk7XG4gICAgYXNzZXJ0KHRyYWNrICYmIGxpc3QsIFwiQSB0cmFjay9saXN0IGVsZW1lbnQgaXMgbWlzc2luZy5cIik7XG4gICAgcHVzaChzbGlkZXMsIGNoaWxkcmVuKGxpc3QsIFwiLlwiICsgQ0xBU1NfU0xJREUgKyBcIjpub3QoLlwiICsgQ0xBU1NfQ0xPTkUgKyBcIilcIikpO1xuICAgIGZvck93bih7XG4gICAgICBhcnJvd3M6IENMQVNTX0FSUk9XUyxcbiAgICAgIHBhZ2luYXRpb246IENMQVNTX1BBR0lOQVRJT04sXG4gICAgICBwcmV2OiBDTEFTU19BUlJPV19QUkVWLFxuICAgICAgbmV4dDogQ0xBU1NfQVJST1dfTkVYVCxcbiAgICAgIGJhcjogQ0xBU1NfUFJPR1JFU1NfQkFSLFxuICAgICAgdG9nZ2xlOiBDTEFTU19UT0dHTEVcbiAgICB9LCBmdW5jdGlvbiAoY2xhc3NOYW1lLCBrZXkpIHtcbiAgICAgIGVsZW1lbnRzW2tleV0gPSBmaW5kKFwiLlwiICsgY2xhc3NOYW1lKTtcbiAgICB9KTtcbiAgICBhc3NpZ24oZWxlbWVudHMsIHtcbiAgICAgIHJvb3Q6IHJvb3QsXG4gICAgICB0cmFjazogdHJhY2ssXG4gICAgICBsaXN0OiBsaXN0LFxuICAgICAgc2xpZGVzOiBzbGlkZXNcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIGlkID0gcm9vdC5pZCB8fCB1bmlxdWVJZChQUk9KRUNUX0NPREUpO1xuICAgIHZhciByb2xlID0gb3B0aW9ucy5yb2xlO1xuICAgIHJvb3QuaWQgPSBpZDtcbiAgICB0cmFjay5pZCA9IHRyYWNrLmlkIHx8IGlkICsgXCItdHJhY2tcIjtcbiAgICBsaXN0LmlkID0gbGlzdC5pZCB8fCBpZCArIFwiLWxpc3RcIjtcblxuICAgIGlmICghZ2V0QXR0cmlidXRlKHJvb3QsIFJPTEUpICYmIHJvb3QudGFnTmFtZSAhPT0gXCJTRUNUSU9OXCIgJiYgcm9sZSkge1xuICAgICAgc2V0QXR0cmlidXRlKHJvb3QsIFJPTEUsIHJvbGUpO1xuICAgIH1cblxuICAgIHNldEF0dHJpYnV0ZShyb290LCBBUklBX1JPTEVERVNDUklQVElPTiwgaTE4bi5jYXJvdXNlbCk7XG4gICAgc2V0QXR0cmlidXRlKGxpc3QsIFJPTEUsIFwicHJlc2VudGF0aW9uXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmluZChzZWxlY3Rvcikge1xuICAgIHZhciBlbG0gPSBxdWVyeShyb290LCBzZWxlY3Rvcik7XG4gICAgcmV0dXJuIGVsbSAmJiBjbG9zZXN0KGVsbSwgXCIuXCIgKyBDTEFTU19ST09UKSA9PT0gcm9vdCA/IGVsbSA6IHZvaWQgMDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldENsYXNzZXMoYmFzZSkge1xuICAgIHJldHVybiBbYmFzZSArIFwiLS1cIiArIG9wdGlvbnMudHlwZSwgYmFzZSArIFwiLS1cIiArIG9wdGlvbnMuZGlyZWN0aW9uLCBvcHRpb25zLmRyYWcgJiYgYmFzZSArIFwiLS1kcmFnZ2FibGVcIiwgb3B0aW9ucy5pc05hdmlnYXRpb24gJiYgYmFzZSArIFwiLS1uYXZcIiwgYmFzZSA9PT0gQ0xBU1NfUk9PVCAmJiBDTEFTU19BQ1RJVkVdO1xuICB9XG5cbiAgcmV0dXJuIGFzc2lnbihlbGVtZW50cywge1xuICAgIHNldHVwOiBzZXR1cCxcbiAgICBtb3VudDogbW91bnQsXG4gICAgZGVzdHJveTogZGVzdHJveVxuICB9KTtcbn1cblxudmFyIFNMSURFID0gXCJzbGlkZVwiO1xudmFyIExPT1AgPSBcImxvb3BcIjtcbnZhciBGQURFID0gXCJmYWRlXCI7XG5cbmZ1bmN0aW9uIFNsaWRlJDEoU3BsaWRlMiwgaW5kZXgsIHNsaWRlSW5kZXgsIHNsaWRlKSB7XG4gIHZhciBldmVudCA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpO1xuICB2YXIgb24gPSBldmVudC5vbixcbiAgICAgIGVtaXQgPSBldmVudC5lbWl0LFxuICAgICAgYmluZCA9IGV2ZW50LmJpbmQ7XG4gIHZhciBDb21wb25lbnRzID0gU3BsaWRlMi5Db21wb25lbnRzLFxuICAgICAgcm9vdCA9IFNwbGlkZTIucm9vdCxcbiAgICAgIG9wdGlvbnMgPSBTcGxpZGUyLm9wdGlvbnM7XG4gIHZhciBpc05hdmlnYXRpb24gPSBvcHRpb25zLmlzTmF2aWdhdGlvbixcbiAgICAgIHVwZGF0ZU9uTW92ZSA9IG9wdGlvbnMudXBkYXRlT25Nb3ZlLFxuICAgICAgaTE4biA9IG9wdGlvbnMuaTE4bixcbiAgICAgIHBhZ2luYXRpb24gPSBvcHRpb25zLnBhZ2luYXRpb24sXG4gICAgICBzbGlkZUZvY3VzID0gb3B0aW9ucy5zbGlkZUZvY3VzO1xuICB2YXIgcmVzb2x2ZSA9IENvbXBvbmVudHMuRGlyZWN0aW9uLnJlc29sdmU7XG4gIHZhciBzdHlsZXMgPSBnZXRBdHRyaWJ1dGUoc2xpZGUsIFwic3R5bGVcIik7XG4gIHZhciBsYWJlbCA9IGdldEF0dHJpYnV0ZShzbGlkZSwgQVJJQV9MQUJFTCk7XG4gIHZhciBpc0Nsb25lID0gc2xpZGVJbmRleCA+IC0xO1xuICB2YXIgY29udGFpbmVyID0gY2hpbGQoc2xpZGUsIFwiLlwiICsgQ0xBU1NfQ09OVEFJTkVSKTtcbiAgdmFyIGRlc3Ryb3llZDtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBpZiAoIWlzQ2xvbmUpIHtcbiAgICAgIHNsaWRlLmlkID0gcm9vdC5pZCArIFwiLXNsaWRlXCIgKyBwYWQoaW5kZXggKyAxKTtcbiAgICAgIHNldEF0dHJpYnV0ZShzbGlkZSwgUk9MRSwgcGFnaW5hdGlvbiA/IFwidGFicGFuZWxcIiA6IFwiZ3JvdXBcIik7XG4gICAgICBzZXRBdHRyaWJ1dGUoc2xpZGUsIEFSSUFfUk9MRURFU0NSSVBUSU9OLCBpMThuLnNsaWRlKTtcbiAgICAgIHNldEF0dHJpYnV0ZShzbGlkZSwgQVJJQV9MQUJFTCwgbGFiZWwgfHwgZm9ybWF0KGkxOG4uc2xpZGVMYWJlbCwgW2luZGV4ICsgMSwgU3BsaWRlMi5sZW5ndGhdKSk7XG4gICAgfVxuXG4gICAgbGlzdGVuKCk7XG4gIH1cblxuICBmdW5jdGlvbiBsaXN0ZW4oKSB7XG4gICAgYmluZChzbGlkZSwgXCJjbGlja1wiLCBhcHBseShlbWl0LCBFVkVOVF9DTElDSywgc2VsZikpO1xuICAgIGJpbmQoc2xpZGUsIFwia2V5ZG93blwiLCBhcHBseShlbWl0LCBFVkVOVF9TTElERV9LRVlET1dOLCBzZWxmKSk7XG4gICAgb24oW0VWRU5UX01PVkVELCBFVkVOVF9TSElGVEVELCBFVkVOVF9TQ1JPTExFRF0sIHVwZGF0ZSk7XG4gICAgb24oRVZFTlRfTkFWSUdBVElPTl9NT1VOVEVELCBpbml0TmF2aWdhdGlvbik7XG5cbiAgICBpZiAodXBkYXRlT25Nb3ZlKSB7XG4gICAgICBvbihFVkVOVF9NT1ZFLCBvbk1vdmUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgZGVzdHJveWVkID0gdHJ1ZTtcbiAgICBldmVudC5kZXN0cm95KCk7XG4gICAgcmVtb3ZlQ2xhc3Moc2xpZGUsIFNUQVRVU19DTEFTU0VTKTtcbiAgICByZW1vdmVBdHRyaWJ1dGUoc2xpZGUsIEFMTF9BVFRSSUJVVEVTKTtcbiAgICBzZXRBdHRyaWJ1dGUoc2xpZGUsIFwic3R5bGVcIiwgc3R5bGVzKTtcbiAgICBzZXRBdHRyaWJ1dGUoc2xpZGUsIEFSSUFfTEFCRUwsIGxhYmVsIHx8IFwiXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdE5hdmlnYXRpb24oKSB7XG4gICAgdmFyIGNvbnRyb2xzID0gU3BsaWRlMi5zcGxpZGVzLm1hcChmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICB2YXIgU2xpZGUyID0gdGFyZ2V0LnNwbGlkZS5Db21wb25lbnRzLlNsaWRlcy5nZXRBdChpbmRleCk7XG4gICAgICByZXR1cm4gU2xpZGUyID8gU2xpZGUyLnNsaWRlLmlkIDogXCJcIjtcbiAgICB9KS5qb2luKFwiIFwiKTtcbiAgICBzZXRBdHRyaWJ1dGUoc2xpZGUsIEFSSUFfTEFCRUwsIGZvcm1hdChpMThuLnNsaWRlWCwgKGlzQ2xvbmUgPyBzbGlkZUluZGV4IDogaW5kZXgpICsgMSkpO1xuICAgIHNldEF0dHJpYnV0ZShzbGlkZSwgQVJJQV9DT05UUk9MUywgY29udHJvbHMpO1xuICAgIHNldEF0dHJpYnV0ZShzbGlkZSwgUk9MRSwgc2xpZGVGb2N1cyA/IFwiYnV0dG9uXCIgOiBcIlwiKTtcbiAgICBzbGlkZUZvY3VzICYmIHJlbW92ZUF0dHJpYnV0ZShzbGlkZSwgQVJJQV9ST0xFREVTQ1JJUFRJT04pO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Nb3ZlKCkge1xuICAgIGlmICghZGVzdHJveWVkKSB7XG4gICAgICB1cGRhdGUoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgaWYgKCFkZXN0cm95ZWQpIHtcbiAgICAgIHZhciBjdXJyID0gU3BsaWRlMi5pbmRleDtcbiAgICAgIHVwZGF0ZUFjdGl2aXR5KCk7XG4gICAgICB1cGRhdGVWaXNpYmlsaXR5KCk7XG4gICAgICB0b2dnbGVDbGFzcyhzbGlkZSwgQ0xBU1NfUFJFViwgaW5kZXggPT09IGN1cnIgLSAxKTtcbiAgICAgIHRvZ2dsZUNsYXNzKHNsaWRlLCBDTEFTU19ORVhULCBpbmRleCA9PT0gY3VyciArIDEpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUFjdGl2aXR5KCkge1xuICAgIHZhciBhY3RpdmUgPSBpc0FjdGl2ZSgpO1xuXG4gICAgaWYgKGFjdGl2ZSAhPT0gaGFzQ2xhc3Moc2xpZGUsIENMQVNTX0FDVElWRSkpIHtcbiAgICAgIHRvZ2dsZUNsYXNzKHNsaWRlLCBDTEFTU19BQ1RJVkUsIGFjdGl2ZSk7XG4gICAgICBzZXRBdHRyaWJ1dGUoc2xpZGUsIEFSSUFfQ1VSUkVOVCwgaXNOYXZpZ2F0aW9uICYmIGFjdGl2ZSB8fCBcIlwiKTtcbiAgICAgIGVtaXQoYWN0aXZlID8gRVZFTlRfQUNUSVZFIDogRVZFTlRfSU5BQ1RJVkUsIHNlbGYpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZVZpc2liaWxpdHkoKSB7XG4gICAgdmFyIHZpc2libGUgPSBpc1Zpc2libGUoKTtcbiAgICB2YXIgaGlkZGVuID0gIXZpc2libGUgJiYgKCFpc0FjdGl2ZSgpIHx8IGlzQ2xvbmUpO1xuXG4gICAgaWYgKCFTcGxpZGUyLnN0YXRlLmlzKFtNT1ZJTkcsIFNDUk9MTElOR10pKSB7XG4gICAgICBzZXRBdHRyaWJ1dGUoc2xpZGUsIEFSSUFfSElEREVOLCBoaWRkZW4gfHwgXCJcIik7XG4gICAgfVxuXG4gICAgc2V0QXR0cmlidXRlKHF1ZXJ5QWxsKHNsaWRlLCBvcHRpb25zLmZvY3VzYWJsZU5vZGVzIHx8IFwiXCIpLCBUQUJfSU5ERVgsIGhpZGRlbiA/IC0xIDogXCJcIik7XG5cbiAgICBpZiAoc2xpZGVGb2N1cykge1xuICAgICAgc2V0QXR0cmlidXRlKHNsaWRlLCBUQUJfSU5ERVgsIGhpZGRlbiA/IC0xIDogMCk7XG4gICAgfVxuXG4gICAgaWYgKHZpc2libGUgIT09IGhhc0NsYXNzKHNsaWRlLCBDTEFTU19WSVNJQkxFKSkge1xuICAgICAgdG9nZ2xlQ2xhc3Moc2xpZGUsIENMQVNTX1ZJU0lCTEUsIHZpc2libGUpO1xuICAgICAgZW1pdCh2aXNpYmxlID8gRVZFTlRfVklTSUJMRSA6IEVWRU5UX0hJRERFTiwgc2VsZik7XG4gICAgfVxuXG4gICAgaWYgKCF2aXNpYmxlICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IHNsaWRlKSB7XG4gICAgICB2YXIgU2xpZGUyID0gQ29tcG9uZW50cy5TbGlkZXMuZ2V0QXQoU3BsaWRlMi5pbmRleCk7XG4gICAgICBTbGlkZTIgJiYgZm9jdXMoU2xpZGUyLnNsaWRlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzdHlsZSQxKHByb3AsIHZhbHVlLCB1c2VDb250YWluZXIpIHtcbiAgICBzdHlsZSh1c2VDb250YWluZXIgJiYgY29udGFpbmVyIHx8IHNsaWRlLCBwcm9wLCB2YWx1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc0FjdGl2ZSgpIHtcbiAgICB2YXIgY3VyciA9IFNwbGlkZTIuaW5kZXg7XG4gICAgcmV0dXJuIGN1cnIgPT09IGluZGV4IHx8IG9wdGlvbnMuY2xvbmVTdGF0dXMgJiYgY3VyciA9PT0gc2xpZGVJbmRleDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzVmlzaWJsZSgpIHtcbiAgICBpZiAoU3BsaWRlMi5pcyhGQURFKSkge1xuICAgICAgcmV0dXJuIGlzQWN0aXZlKCk7XG4gICAgfVxuXG4gICAgdmFyIHRyYWNrUmVjdCA9IHJlY3QoQ29tcG9uZW50cy5FbGVtZW50cy50cmFjayk7XG4gICAgdmFyIHNsaWRlUmVjdCA9IHJlY3Qoc2xpZGUpO1xuICAgIHZhciBsZWZ0ID0gcmVzb2x2ZShcImxlZnRcIiwgdHJ1ZSk7XG4gICAgdmFyIHJpZ2h0ID0gcmVzb2x2ZShcInJpZ2h0XCIsIHRydWUpO1xuICAgIHJldHVybiBmbG9vcih0cmFja1JlY3RbbGVmdF0pIDw9IGNlaWwoc2xpZGVSZWN0W2xlZnRdKSAmJiBmbG9vcihzbGlkZVJlY3RbcmlnaHRdKSA8PSBjZWlsKHRyYWNrUmVjdFtyaWdodF0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNXaXRoaW4oZnJvbSwgZGlzdGFuY2UpIHtcbiAgICB2YXIgZGlmZiA9IGFicyhmcm9tIC0gaW5kZXgpO1xuXG4gICAgaWYgKCFpc0Nsb25lICYmIChvcHRpb25zLnJld2luZCB8fCBTcGxpZGUyLmlzKExPT1ApKSkge1xuICAgICAgZGlmZiA9IG1pbihkaWZmLCBTcGxpZGUyLmxlbmd0aCAtIGRpZmYpO1xuICAgIH1cblxuICAgIHJldHVybiBkaWZmIDw9IGRpc3RhbmNlO1xuICB9XG5cbiAgdmFyIHNlbGYgPSB7XG4gICAgaW5kZXg6IGluZGV4LFxuICAgIHNsaWRlSW5kZXg6IHNsaWRlSW5kZXgsXG4gICAgc2xpZGU6IHNsaWRlLFxuICAgIGNvbnRhaW5lcjogY29udGFpbmVyLFxuICAgIGlzQ2xvbmU6IGlzQ2xvbmUsXG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3ksXG4gICAgdXBkYXRlOiB1cGRhdGUsXG4gICAgc3R5bGU6IHN0eWxlJDEsXG4gICAgaXNXaXRoaW46IGlzV2l0aGluXG4gIH07XG4gIHJldHVybiBzZWxmO1xufVxuXG5mdW5jdGlvbiBTbGlkZXMoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIF9FdmVudEludGVyZmFjZTIgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKSxcbiAgICAgIG9uID0gX0V2ZW50SW50ZXJmYWNlMi5vbixcbiAgICAgIGVtaXQgPSBfRXZlbnRJbnRlcmZhY2UyLmVtaXQsXG4gICAgICBiaW5kID0gX0V2ZW50SW50ZXJmYWNlMi5iaW5kO1xuXG4gIHZhciBfQ29tcG9uZW50czIkRWxlbWVudHMgPSBDb21wb25lbnRzMi5FbGVtZW50cyxcbiAgICAgIHNsaWRlcyA9IF9Db21wb25lbnRzMiRFbGVtZW50cy5zbGlkZXMsXG4gICAgICBsaXN0ID0gX0NvbXBvbmVudHMyJEVsZW1lbnRzLmxpc3Q7XG4gIHZhciBTbGlkZXMyID0gW107XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgaW5pdCgpO1xuICAgIG9uKEVWRU5UX1JFRlJFU0gsIGRlc3Ryb3kpO1xuICAgIG9uKEVWRU5UX1JFRlJFU0gsIGluaXQpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICBzbGlkZXMuZm9yRWFjaChmdW5jdGlvbiAoc2xpZGUsIGluZGV4KSB7XG4gICAgICByZWdpc3RlcihzbGlkZSwgaW5kZXgsIC0xKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgZm9yRWFjaCQxKGZ1bmN0aW9uIChTbGlkZTIpIHtcbiAgICAgIFNsaWRlMi5kZXN0cm95KCk7XG4gICAgfSk7XG4gICAgZW1wdHkoU2xpZGVzMik7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgZm9yRWFjaCQxKGZ1bmN0aW9uIChTbGlkZTIpIHtcbiAgICAgIFNsaWRlMi51cGRhdGUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyKHNsaWRlLCBpbmRleCwgc2xpZGVJbmRleCkge1xuICAgIHZhciBvYmplY3QgPSBTbGlkZSQxKFNwbGlkZTIsIGluZGV4LCBzbGlkZUluZGV4LCBzbGlkZSk7XG4gICAgb2JqZWN0Lm1vdW50KCk7XG4gICAgU2xpZGVzMi5wdXNoKG9iamVjdCk7XG4gICAgU2xpZGVzMi5zb3J0KGZ1bmN0aW9uIChTbGlkZTEsIFNsaWRlMikge1xuICAgICAgcmV0dXJuIFNsaWRlMS5pbmRleCAtIFNsaWRlMi5pbmRleDtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldChleGNsdWRlQ2xvbmVzKSB7XG4gICAgcmV0dXJuIGV4Y2x1ZGVDbG9uZXMgPyBmaWx0ZXIoZnVuY3Rpb24gKFNsaWRlMikge1xuICAgICAgcmV0dXJuICFTbGlkZTIuaXNDbG9uZTtcbiAgICB9KSA6IFNsaWRlczI7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRJbihwYWdlKSB7XG4gICAgdmFyIENvbnRyb2xsZXIgPSBDb21wb25lbnRzMi5Db250cm9sbGVyO1xuICAgIHZhciBpbmRleCA9IENvbnRyb2xsZXIudG9JbmRleChwYWdlKTtcbiAgICB2YXIgbWF4ID0gQ29udHJvbGxlci5oYXNGb2N1cygpID8gMSA6IG9wdGlvbnMucGVyUGFnZTtcbiAgICByZXR1cm4gZmlsdGVyKGZ1bmN0aW9uIChTbGlkZTIpIHtcbiAgICAgIHJldHVybiBiZXR3ZWVuKFNsaWRlMi5pbmRleCwgaW5kZXgsIGluZGV4ICsgbWF4IC0gMSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRBdChpbmRleCkge1xuICAgIHJldHVybiBmaWx0ZXIoaW5kZXgpWzBdO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkKGl0ZW1zLCBpbmRleCkge1xuICAgIGZvckVhY2goaXRlbXMsIGZ1bmN0aW9uIChzbGlkZSkge1xuICAgICAgaWYgKGlzU3RyaW5nKHNsaWRlKSkge1xuICAgICAgICBzbGlkZSA9IHBhcnNlSHRtbChzbGlkZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0hUTUxFbGVtZW50KHNsaWRlKSkge1xuICAgICAgICB2YXIgcmVmID0gc2xpZGVzW2luZGV4XTtcbiAgICAgICAgcmVmID8gYmVmb3JlKHNsaWRlLCByZWYpIDogYXBwZW5kKGxpc3QsIHNsaWRlKTtcbiAgICAgICAgYWRkQ2xhc3Moc2xpZGUsIG9wdGlvbnMuY2xhc3Nlcy5zbGlkZSk7XG4gICAgICAgIG9ic2VydmVJbWFnZXMoc2xpZGUsIGFwcGx5KGVtaXQsIEVWRU5UX1JFU0laRSkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGVtaXQoRVZFTlRfUkVGUkVTSCk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmUkMShtYXRjaGVyKSB7XG4gICAgcmVtb3ZlKGZpbHRlcihtYXRjaGVyKS5tYXAoZnVuY3Rpb24gKFNsaWRlMikge1xuICAgICAgcmV0dXJuIFNsaWRlMi5zbGlkZTtcbiAgICB9KSk7XG4gICAgZW1pdChFVkVOVF9SRUZSRVNIKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZvckVhY2gkMShpdGVyYXRlZSwgZXhjbHVkZUNsb25lcykge1xuICAgIGdldChleGNsdWRlQ2xvbmVzKS5mb3JFYWNoKGl0ZXJhdGVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbHRlcihtYXRjaGVyKSB7XG4gICAgcmV0dXJuIFNsaWRlczIuZmlsdGVyKGlzRnVuY3Rpb24obWF0Y2hlcikgPyBtYXRjaGVyIDogZnVuY3Rpb24gKFNsaWRlMikge1xuICAgICAgcmV0dXJuIGlzU3RyaW5nKG1hdGNoZXIpID8gbWF0Y2hlcyhTbGlkZTIuc2xpZGUsIG1hdGNoZXIpIDogaW5jbHVkZXModG9BcnJheShtYXRjaGVyKSwgU2xpZGUyLmluZGV4KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0eWxlKHByb3AsIHZhbHVlLCB1c2VDb250YWluZXIpIHtcbiAgICBmb3JFYWNoJDEoZnVuY3Rpb24gKFNsaWRlMikge1xuICAgICAgU2xpZGUyLnN0eWxlKHByb3AsIHZhbHVlLCB1c2VDb250YWluZXIpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb2JzZXJ2ZUltYWdlcyhlbG0sIGNhbGxiYWNrKSB7XG4gICAgdmFyIGltYWdlcyA9IHF1ZXJ5QWxsKGVsbSwgXCJpbWdcIik7XG4gICAgdmFyIGxlbmd0aCA9IGltYWdlcy5sZW5ndGg7XG5cbiAgICBpZiAobGVuZ3RoKSB7XG4gICAgICBpbWFnZXMuZm9yRWFjaChmdW5jdGlvbiAoaW1nKSB7XG4gICAgICAgIGJpbmQoaW1nLCBcImxvYWQgZXJyb3JcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICghIC0tbGVuZ3RoKSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRMZW5ndGgoZXhjbHVkZUNsb25lcykge1xuICAgIHJldHVybiBleGNsdWRlQ2xvbmVzID8gc2xpZGVzLmxlbmd0aCA6IFNsaWRlczIubGVuZ3RoO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNFbm91Z2goKSB7XG4gICAgcmV0dXJuIFNsaWRlczIubGVuZ3RoID4gb3B0aW9ucy5wZXJQYWdlO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb3VudDogbW91bnQsXG4gICAgZGVzdHJveTogZGVzdHJveSxcbiAgICB1cGRhdGU6IHVwZGF0ZSxcbiAgICByZWdpc3RlcjogcmVnaXN0ZXIsXG4gICAgZ2V0OiBnZXQsXG4gICAgZ2V0SW46IGdldEluLFxuICAgIGdldEF0OiBnZXRBdCxcbiAgICBhZGQ6IGFkZCxcbiAgICByZW1vdmU6IHJlbW92ZSQxLFxuICAgIGZvckVhY2g6IGZvckVhY2gkMSxcbiAgICBmaWx0ZXI6IGZpbHRlcixcbiAgICBzdHlsZTogc3R5bGUsXG4gICAgZ2V0TGVuZ3RoOiBnZXRMZW5ndGgsXG4gICAgaXNFbm91Z2g6IGlzRW5vdWdoXG4gIH07XG59XG5cbmZ1bmN0aW9uIExheW91dChTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgX0V2ZW50SW50ZXJmYWNlMyA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpLFxuICAgICAgb24gPSBfRXZlbnRJbnRlcmZhY2UzLm9uLFxuICAgICAgYmluZCA9IF9FdmVudEludGVyZmFjZTMuYmluZCxcbiAgICAgIGVtaXQgPSBfRXZlbnRJbnRlcmZhY2UzLmVtaXQ7XG5cbiAgdmFyIFNsaWRlcyA9IENvbXBvbmVudHMyLlNsaWRlcztcbiAgdmFyIHJlc29sdmUgPSBDb21wb25lbnRzMi5EaXJlY3Rpb24ucmVzb2x2ZTtcbiAgdmFyIF9Db21wb25lbnRzMiRFbGVtZW50czIgPSBDb21wb25lbnRzMi5FbGVtZW50cyxcbiAgICAgIHJvb3QgPSBfQ29tcG9uZW50czIkRWxlbWVudHMyLnJvb3QsXG4gICAgICB0cmFjayA9IF9Db21wb25lbnRzMiRFbGVtZW50czIudHJhY2ssXG4gICAgICBsaXN0ID0gX0NvbXBvbmVudHMyJEVsZW1lbnRzMi5saXN0O1xuICB2YXIgZ2V0QXQgPSBTbGlkZXMuZ2V0QXQsXG4gICAgICBzdHlsZVNsaWRlcyA9IFNsaWRlcy5zdHlsZTtcbiAgdmFyIHZlcnRpY2FsO1xuICB2YXIgcm9vdFJlY3Q7XG4gIHZhciBvdmVyZmxvdztcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBpbml0KCk7XG4gICAgYmluZCh3aW5kb3csIFwicmVzaXplIGxvYWRcIiwgVGhyb3R0bGUoYXBwbHkoZW1pdCwgRVZFTlRfUkVTSVpFKSkpO1xuICAgIG9uKFtFVkVOVF9VUERBVEVELCBFVkVOVF9SRUZSRVNIXSwgaW5pdCk7XG4gICAgb24oRVZFTlRfUkVTSVpFLCByZXNpemUpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2ZXJ0aWNhbCA9IG9wdGlvbnMuZGlyZWN0aW9uID09PSBUVEI7XG4gICAgc3R5bGUocm9vdCwgXCJtYXhXaWR0aFwiLCB1bml0KG9wdGlvbnMud2lkdGgpKTtcbiAgICBzdHlsZSh0cmFjaywgcmVzb2x2ZShcInBhZGRpbmdMZWZ0XCIpLCBjc3NQYWRkaW5nKGZhbHNlKSk7XG4gICAgc3R5bGUodHJhY2ssIHJlc29sdmUoXCJwYWRkaW5nUmlnaHRcIiksIGNzc1BhZGRpbmcodHJ1ZSkpO1xuICAgIHJlc2l6ZSh0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2l6ZShmb3JjZSkge1xuICAgIHZhciBuZXdSZWN0ID0gcmVjdChyb290KTtcblxuICAgIGlmIChmb3JjZSB8fCByb290UmVjdC53aWR0aCAhPT0gbmV3UmVjdC53aWR0aCB8fCByb290UmVjdC5oZWlnaHQgIT09IG5ld1JlY3QuaGVpZ2h0KSB7XG4gICAgICBzdHlsZSh0cmFjaywgXCJoZWlnaHRcIiwgY3NzVHJhY2tIZWlnaHQoKSk7XG4gICAgICBzdHlsZVNsaWRlcyhyZXNvbHZlKFwibWFyZ2luUmlnaHRcIiksIHVuaXQob3B0aW9ucy5nYXApKTtcbiAgICAgIHN0eWxlU2xpZGVzKFwid2lkdGhcIiwgY3NzU2xpZGVXaWR0aCgpKTtcbiAgICAgIHN0eWxlU2xpZGVzKFwiaGVpZ2h0XCIsIGNzc1NsaWRlSGVpZ2h0KCksIHRydWUpO1xuICAgICAgcm9vdFJlY3QgPSBuZXdSZWN0O1xuICAgICAgZW1pdChFVkVOVF9SRVNJWkVEKTtcblxuICAgICAgaWYgKG92ZXJmbG93ICE9PSAob3ZlcmZsb3cgPSBpc092ZXJmbG93KCkpKSB7XG4gICAgICAgIHRvZ2dsZUNsYXNzKHJvb3QsIENMQVNTX09WRVJGTE9XLCBvdmVyZmxvdyk7XG4gICAgICAgIGVtaXQoRVZFTlRfT1ZFUkZMT1csIG92ZXJmbG93KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjc3NQYWRkaW5nKHJpZ2h0KSB7XG4gICAgdmFyIHBhZGRpbmcgPSBvcHRpb25zLnBhZGRpbmc7XG4gICAgdmFyIHByb3AgPSByZXNvbHZlKHJpZ2h0ID8gXCJyaWdodFwiIDogXCJsZWZ0XCIpO1xuICAgIHJldHVybiBwYWRkaW5nICYmIHVuaXQocGFkZGluZ1twcm9wXSB8fCAoaXNPYmplY3QocGFkZGluZykgPyAwIDogcGFkZGluZykpIHx8IFwiMHB4XCI7XG4gIH1cblxuICBmdW5jdGlvbiBjc3NUcmFja0hlaWdodCgpIHtcbiAgICB2YXIgaGVpZ2h0ID0gXCJcIjtcblxuICAgIGlmICh2ZXJ0aWNhbCkge1xuICAgICAgaGVpZ2h0ID0gY3NzSGVpZ2h0KCk7XG4gICAgICBhc3NlcnQoaGVpZ2h0LCBcImhlaWdodCBvciBoZWlnaHRSYXRpbyBpcyBtaXNzaW5nLlwiKTtcbiAgICAgIGhlaWdodCA9IFwiY2FsYyhcIiArIGhlaWdodCArIFwiIC0gXCIgKyBjc3NQYWRkaW5nKGZhbHNlKSArIFwiIC0gXCIgKyBjc3NQYWRkaW5nKHRydWUpICsgXCIpXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhlaWdodDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNzc0hlaWdodCgpIHtcbiAgICByZXR1cm4gdW5pdChvcHRpb25zLmhlaWdodCB8fCByZWN0KGxpc3QpLndpZHRoICogb3B0aW9ucy5oZWlnaHRSYXRpbyk7XG4gIH1cblxuICBmdW5jdGlvbiBjc3NTbGlkZVdpZHRoKCkge1xuICAgIHJldHVybiBvcHRpb25zLmF1dG9XaWR0aCA/IG51bGwgOiB1bml0KG9wdGlvbnMuZml4ZWRXaWR0aCkgfHwgKHZlcnRpY2FsID8gXCJcIiA6IGNzc1NsaWRlU2l6ZSgpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNzc1NsaWRlSGVpZ2h0KCkge1xuICAgIHJldHVybiB1bml0KG9wdGlvbnMuZml4ZWRIZWlnaHQpIHx8ICh2ZXJ0aWNhbCA/IG9wdGlvbnMuYXV0b0hlaWdodCA/IG51bGwgOiBjc3NTbGlkZVNpemUoKSA6IGNzc0hlaWdodCgpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNzc1NsaWRlU2l6ZSgpIHtcbiAgICB2YXIgZ2FwID0gdW5pdChvcHRpb25zLmdhcCk7XG4gICAgcmV0dXJuIFwiY2FsYygoMTAwJVwiICsgKGdhcCAmJiBcIiArIFwiICsgZ2FwKSArIFwiKS9cIiArIChvcHRpb25zLnBlclBhZ2UgfHwgMSkgKyAoZ2FwICYmIFwiIC0gXCIgKyBnYXApICsgXCIpXCI7XG4gIH1cblxuICBmdW5jdGlvbiBsaXN0U2l6ZSgpIHtcbiAgICByZXR1cm4gcmVjdChsaXN0KVtyZXNvbHZlKFwid2lkdGhcIildO1xuICB9XG5cbiAgZnVuY3Rpb24gc2xpZGVTaXplKGluZGV4LCB3aXRob3V0R2FwKSB7XG4gICAgdmFyIFNsaWRlID0gZ2V0QXQoaW5kZXggfHwgMCk7XG4gICAgcmV0dXJuIFNsaWRlID8gcmVjdChTbGlkZS5zbGlkZSlbcmVzb2x2ZShcIndpZHRoXCIpXSArICh3aXRob3V0R2FwID8gMCA6IGdldEdhcCgpKSA6IDA7XG4gIH1cblxuICBmdW5jdGlvbiB0b3RhbFNpemUoaW5kZXgsIHdpdGhvdXRHYXApIHtcbiAgICB2YXIgU2xpZGUgPSBnZXRBdChpbmRleCk7XG5cbiAgICBpZiAoU2xpZGUpIHtcbiAgICAgIHZhciByaWdodCA9IHJlY3QoU2xpZGUuc2xpZGUpW3Jlc29sdmUoXCJyaWdodFwiKV07XG4gICAgICB2YXIgbGVmdCA9IHJlY3QobGlzdClbcmVzb2x2ZShcImxlZnRcIildO1xuICAgICAgcmV0dXJuIGFicyhyaWdodCAtIGxlZnQpICsgKHdpdGhvdXRHYXAgPyAwIDogZ2V0R2FwKCkpO1xuICAgIH1cblxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgZnVuY3Rpb24gc2xpZGVyU2l6ZSh3aXRob3V0R2FwKSB7XG4gICAgcmV0dXJuIHRvdGFsU2l6ZShTcGxpZGUyLmxlbmd0aCAtIDEpIC0gdG90YWxTaXplKDApICsgc2xpZGVTaXplKDAsIHdpdGhvdXRHYXApO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0R2FwKCkge1xuICAgIHZhciBTbGlkZSA9IGdldEF0KDApO1xuICAgIHJldHVybiBTbGlkZSAmJiBwYXJzZUZsb2F0KHN0eWxlKFNsaWRlLnNsaWRlLCByZXNvbHZlKFwibWFyZ2luUmlnaHRcIikpKSB8fCAwO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UGFkZGluZyhyaWdodCkge1xuICAgIHJldHVybiBwYXJzZUZsb2F0KHN0eWxlKHRyYWNrLCByZXNvbHZlKFwicGFkZGluZ1wiICsgKHJpZ2h0ID8gXCJSaWdodFwiIDogXCJMZWZ0XCIpKSkpIHx8IDA7XG4gIH1cblxuICBmdW5jdGlvbiBpc092ZXJmbG93KCkge1xuICAgIHJldHVybiBTcGxpZGUyLmlzKEZBREUpIHx8IHNsaWRlclNpemUodHJ1ZSkgPiBsaXN0U2l6ZSgpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb3VudDogbW91bnQsXG4gICAgcmVzaXplOiByZXNpemUsXG4gICAgbGlzdFNpemU6IGxpc3RTaXplLFxuICAgIHNsaWRlU2l6ZTogc2xpZGVTaXplLFxuICAgIHNsaWRlclNpemU6IHNsaWRlclNpemUsXG4gICAgdG90YWxTaXplOiB0b3RhbFNpemUsXG4gICAgZ2V0UGFkZGluZzogZ2V0UGFkZGluZyxcbiAgICBpc092ZXJmbG93OiBpc092ZXJmbG93XG4gIH07XG59XG5cbnZhciBNVUxUSVBMSUVSID0gMjtcblxuZnVuY3Rpb24gQ2xvbmVzKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBldmVudCA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpO1xuICB2YXIgb24gPSBldmVudC5vbjtcbiAgdmFyIEVsZW1lbnRzID0gQ29tcG9uZW50czIuRWxlbWVudHMsXG4gICAgICBTbGlkZXMgPSBDb21wb25lbnRzMi5TbGlkZXM7XG4gIHZhciByZXNvbHZlID0gQ29tcG9uZW50czIuRGlyZWN0aW9uLnJlc29sdmU7XG4gIHZhciBjbG9uZXMgPSBbXTtcbiAgdmFyIGNsb25lQ291bnQ7XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgb24oRVZFTlRfUkVGUkVTSCwgcmVtb3VudCk7XG4gICAgb24oW0VWRU5UX1VQREFURUQsIEVWRU5UX1JFU0laRV0sIG9ic2VydmUpO1xuXG4gICAgaWYgKGNsb25lQ291bnQgPSBjb21wdXRlQ2xvbmVDb3VudCgpKSB7XG4gICAgICBnZW5lcmF0ZShjbG9uZUNvdW50KTtcbiAgICAgIENvbXBvbmVudHMyLkxheW91dC5yZXNpemUodHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3VudCgpIHtcbiAgICBkZXN0cm95KCk7XG4gICAgbW91bnQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgcmVtb3ZlKGNsb25lcyk7XG4gICAgZW1wdHkoY2xvbmVzKTtcbiAgICBldmVudC5kZXN0cm95KCk7XG4gIH1cblxuICBmdW5jdGlvbiBvYnNlcnZlKCkge1xuICAgIHZhciBjb3VudCA9IGNvbXB1dGVDbG9uZUNvdW50KCk7XG5cbiAgICBpZiAoY2xvbmVDb3VudCAhPT0gY291bnQpIHtcbiAgICAgIGlmIChjbG9uZUNvdW50IDwgY291bnQgfHwgIWNvdW50KSB7XG4gICAgICAgIGV2ZW50LmVtaXQoRVZFTlRfUkVGUkVTSCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2VuZXJhdGUoY291bnQpIHtcbiAgICB2YXIgc2xpZGVzID0gU2xpZGVzLmdldCgpLnNsaWNlKCk7XG4gICAgdmFyIGxlbmd0aCA9IHNsaWRlcy5sZW5ndGg7XG5cbiAgICBpZiAobGVuZ3RoKSB7XG4gICAgICB3aGlsZSAoc2xpZGVzLmxlbmd0aCA8IGNvdW50KSB7XG4gICAgICAgIHB1c2goc2xpZGVzLCBzbGlkZXMpO1xuICAgICAgfVxuXG4gICAgICBwdXNoKHNsaWRlcy5zbGljZSgtY291bnQpLCBzbGlkZXMuc2xpY2UoMCwgY291bnQpKS5mb3JFYWNoKGZ1bmN0aW9uIChTbGlkZSwgaW5kZXgpIHtcbiAgICAgICAgdmFyIGlzSGVhZCA9IGluZGV4IDwgY291bnQ7XG4gICAgICAgIHZhciBjbG9uZSA9IGNsb25lRGVlcChTbGlkZS5zbGlkZSwgaW5kZXgpO1xuICAgICAgICBpc0hlYWQgPyBiZWZvcmUoY2xvbmUsIHNsaWRlc1swXS5zbGlkZSkgOiBhcHBlbmQoRWxlbWVudHMubGlzdCwgY2xvbmUpO1xuICAgICAgICBwdXNoKGNsb25lcywgY2xvbmUpO1xuICAgICAgICBTbGlkZXMucmVnaXN0ZXIoY2xvbmUsIGluZGV4IC0gY291bnQgKyAoaXNIZWFkID8gMCA6IGxlbmd0aCksIFNsaWRlLmluZGV4KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNsb25lRGVlcChlbG0sIGluZGV4KSB7XG4gICAgdmFyIGNsb25lID0gZWxtLmNsb25lTm9kZSh0cnVlKTtcbiAgICBhZGRDbGFzcyhjbG9uZSwgb3B0aW9ucy5jbGFzc2VzLmNsb25lKTtcbiAgICBjbG9uZS5pZCA9IFNwbGlkZTIucm9vdC5pZCArIFwiLWNsb25lXCIgKyBwYWQoaW5kZXggKyAxKTtcbiAgICByZXR1cm4gY2xvbmU7XG4gIH1cblxuICBmdW5jdGlvbiBjb21wdXRlQ2xvbmVDb3VudCgpIHtcbiAgICB2YXIgY2xvbmVzMiA9IG9wdGlvbnMuY2xvbmVzO1xuXG4gICAgaWYgKCFTcGxpZGUyLmlzKExPT1ApKSB7XG4gICAgICBjbG9uZXMyID0gMDtcbiAgICB9IGVsc2UgaWYgKGlzVW5kZWZpbmVkKGNsb25lczIpKSB7XG4gICAgICB2YXIgZml4ZWRTaXplID0gb3B0aW9uc1tyZXNvbHZlKFwiZml4ZWRXaWR0aFwiKV0gJiYgQ29tcG9uZW50czIuTGF5b3V0LnNsaWRlU2l6ZSgwKTtcbiAgICAgIHZhciBmaXhlZENvdW50ID0gZml4ZWRTaXplICYmIGNlaWwocmVjdChFbGVtZW50cy50cmFjaylbcmVzb2x2ZShcIndpZHRoXCIpXSAvIGZpeGVkU2l6ZSk7XG4gICAgICBjbG9uZXMyID0gZml4ZWRDb3VudCB8fCBvcHRpb25zW3Jlc29sdmUoXCJhdXRvV2lkdGhcIildICYmIFNwbGlkZTIubGVuZ3RoIHx8IG9wdGlvbnMucGVyUGFnZSAqIE1VTFRJUExJRVI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsb25lczI7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1vdW50OiBtb3VudCxcbiAgICBkZXN0cm95OiBkZXN0cm95XG4gIH07XG59XG5cbmZ1bmN0aW9uIE1vdmUoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIF9FdmVudEludGVyZmFjZTQgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKSxcbiAgICAgIG9uID0gX0V2ZW50SW50ZXJmYWNlNC5vbixcbiAgICAgIGVtaXQgPSBfRXZlbnRJbnRlcmZhY2U0LmVtaXQ7XG5cbiAgdmFyIHNldCA9IFNwbGlkZTIuc3RhdGUuc2V0O1xuICB2YXIgX0NvbXBvbmVudHMyJExheW91dCA9IENvbXBvbmVudHMyLkxheW91dCxcbiAgICAgIHNsaWRlU2l6ZSA9IF9Db21wb25lbnRzMiRMYXlvdXQuc2xpZGVTaXplLFxuICAgICAgZ2V0UGFkZGluZyA9IF9Db21wb25lbnRzMiRMYXlvdXQuZ2V0UGFkZGluZyxcbiAgICAgIHRvdGFsU2l6ZSA9IF9Db21wb25lbnRzMiRMYXlvdXQudG90YWxTaXplLFxuICAgICAgbGlzdFNpemUgPSBfQ29tcG9uZW50czIkTGF5b3V0Lmxpc3RTaXplLFxuICAgICAgc2xpZGVyU2l6ZSA9IF9Db21wb25lbnRzMiRMYXlvdXQuc2xpZGVyU2l6ZTtcbiAgdmFyIF9Db21wb25lbnRzMiREaXJlY3RpbyA9IENvbXBvbmVudHMyLkRpcmVjdGlvbixcbiAgICAgIHJlc29sdmUgPSBfQ29tcG9uZW50czIkRGlyZWN0aW8ucmVzb2x2ZSxcbiAgICAgIG9yaWVudCA9IF9Db21wb25lbnRzMiREaXJlY3Rpby5vcmllbnQ7XG4gIHZhciBfQ29tcG9uZW50czIkRWxlbWVudHMzID0gQ29tcG9uZW50czIuRWxlbWVudHMsXG4gICAgICBsaXN0ID0gX0NvbXBvbmVudHMyJEVsZW1lbnRzMy5saXN0LFxuICAgICAgdHJhY2sgPSBfQ29tcG9uZW50czIkRWxlbWVudHMzLnRyYWNrO1xuICB2YXIgVHJhbnNpdGlvbjtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBUcmFuc2l0aW9uID0gQ29tcG9uZW50czIuVHJhbnNpdGlvbjtcbiAgICBvbihbRVZFTlRfTU9VTlRFRCwgRVZFTlRfUkVTSVpFRCwgRVZFTlRfVVBEQVRFRCwgRVZFTlRfUkVGUkVTSF0sIHJlcG9zaXRpb24pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVwb3NpdGlvbigpIHtcbiAgICBpZiAoIUNvbXBvbmVudHMyLkNvbnRyb2xsZXIuaXNCdXN5KCkpIHtcbiAgICAgIENvbXBvbmVudHMyLlNjcm9sbC5jYW5jZWwoKTtcbiAgICAgIGp1bXAoU3BsaWRlMi5pbmRleCk7XG4gICAgICBDb21wb25lbnRzMi5TbGlkZXMudXBkYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbW92ZShkZXN0LCBpbmRleCwgcHJldiwgY2FsbGJhY2spIHtcbiAgICBpZiAoZGVzdCAhPT0gaW5kZXggJiYgY2FuU2hpZnQoZGVzdCA+IHByZXYpKSB7XG4gICAgICBjYW5jZWwoKTtcbiAgICAgIHRyYW5zbGF0ZShzaGlmdChnZXRQb3NpdGlvbigpLCBkZXN0ID4gcHJldiksIHRydWUpO1xuICAgIH1cblxuICAgIHNldChNT1ZJTkcpO1xuICAgIGVtaXQoRVZFTlRfTU9WRSwgaW5kZXgsIHByZXYsIGRlc3QpO1xuICAgIFRyYW5zaXRpb24uc3RhcnQoaW5kZXgsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNldChJRExFKTtcbiAgICAgIGVtaXQoRVZFTlRfTU9WRUQsIGluZGV4LCBwcmV2LCBkZXN0KTtcbiAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBqdW1wKGluZGV4KSB7XG4gICAgdHJhbnNsYXRlKHRvUG9zaXRpb24oaW5kZXgsIHRydWUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYW5zbGF0ZShwb3NpdGlvbiwgcHJldmVudExvb3ApIHtcbiAgICBpZiAoIVNwbGlkZTIuaXMoRkFERSkpIHtcbiAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHByZXZlbnRMb29wID8gcG9zaXRpb24gOiBsb29wKHBvc2l0aW9uKTtcbiAgICAgIHN0eWxlKGxpc3QsIFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlXCIgKyByZXNvbHZlKFwiWFwiKSArIFwiKFwiICsgZGVzdGluYXRpb24gKyBcInB4KVwiKTtcbiAgICAgIHBvc2l0aW9uICE9PSBkZXN0aW5hdGlvbiAmJiBlbWl0KEVWRU5UX1NISUZURUQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGxvb3AocG9zaXRpb24pIHtcbiAgICBpZiAoU3BsaWRlMi5pcyhMT09QKSkge1xuICAgICAgdmFyIGluZGV4ID0gdG9JbmRleChwb3NpdGlvbik7XG4gICAgICB2YXIgZXhjZWVkZWRNYXggPSBpbmRleCA+IENvbXBvbmVudHMyLkNvbnRyb2xsZXIuZ2V0RW5kKCk7XG4gICAgICB2YXIgZXhjZWVkZWRNaW4gPSBpbmRleCA8IDA7XG5cbiAgICAgIGlmIChleGNlZWRlZE1pbiB8fCBleGNlZWRlZE1heCkge1xuICAgICAgICBwb3NpdGlvbiA9IHNoaWZ0KHBvc2l0aW9uLCBleGNlZWRlZE1heCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHBvc2l0aW9uO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hpZnQocG9zaXRpb24sIGJhY2t3YXJkcykge1xuICAgIHZhciBleGNlc3MgPSBwb3NpdGlvbiAtIGdldExpbWl0KGJhY2t3YXJkcyk7XG4gICAgdmFyIHNpemUgPSBzbGlkZXJTaXplKCk7XG4gICAgcG9zaXRpb24gLT0gb3JpZW50KHNpemUgKiAoY2VpbChhYnMoZXhjZXNzKSAvIHNpemUpIHx8IDEpKSAqIChiYWNrd2FyZHMgPyAxIDogLTEpO1xuICAgIHJldHVybiBwb3NpdGlvbjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICB0cmFuc2xhdGUoZ2V0UG9zaXRpb24oKSwgdHJ1ZSk7XG4gICAgVHJhbnNpdGlvbi5jYW5jZWwoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvSW5kZXgocG9zaXRpb24pIHtcbiAgICB2YXIgU2xpZGVzID0gQ29tcG9uZW50czIuU2xpZGVzLmdldCgpO1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIG1pbkRpc3RhbmNlID0gSW5maW5pdHk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IFNsaWRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHNsaWRlSW5kZXggPSBTbGlkZXNbaV0uaW5kZXg7XG4gICAgICB2YXIgZGlzdGFuY2UgPSBhYnModG9Qb3NpdGlvbihzbGlkZUluZGV4LCB0cnVlKSAtIHBvc2l0aW9uKTtcblxuICAgICAgaWYgKGRpc3RhbmNlIDw9IG1pbkRpc3RhbmNlKSB7XG4gICAgICAgIG1pbkRpc3RhbmNlID0gZGlzdGFuY2U7XG4gICAgICAgIGluZGV4ID0gc2xpZGVJbmRleDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpbmRleDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvUG9zaXRpb24oaW5kZXgsIHRyaW1taW5nKSB7XG4gICAgdmFyIHBvc2l0aW9uID0gb3JpZW50KHRvdGFsU2l6ZShpbmRleCAtIDEpIC0gb2Zmc2V0KGluZGV4KSk7XG4gICAgcmV0dXJuIHRyaW1taW5nID8gdHJpbShwb3NpdGlvbikgOiBwb3NpdGlvbjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFBvc2l0aW9uKCkge1xuICAgIHZhciBsZWZ0ID0gcmVzb2x2ZShcImxlZnRcIik7XG4gICAgcmV0dXJuIHJlY3QobGlzdClbbGVmdF0gLSByZWN0KHRyYWNrKVtsZWZ0XSArIG9yaWVudChnZXRQYWRkaW5nKGZhbHNlKSk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmltKHBvc2l0aW9uKSB7XG4gICAgaWYgKG9wdGlvbnMudHJpbVNwYWNlICYmIFNwbGlkZTIuaXMoU0xJREUpKSB7XG4gICAgICBwb3NpdGlvbiA9IGNsYW1wKHBvc2l0aW9uLCAwLCBvcmllbnQoc2xpZGVyU2l6ZSh0cnVlKSAtIGxpc3RTaXplKCkpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcG9zaXRpb247XG4gIH1cblxuICBmdW5jdGlvbiBvZmZzZXQoaW5kZXgpIHtcbiAgICB2YXIgZm9jdXMgPSBvcHRpb25zLmZvY3VzO1xuICAgIHJldHVybiBmb2N1cyA9PT0gXCJjZW50ZXJcIiA/IChsaXN0U2l6ZSgpIC0gc2xpZGVTaXplKGluZGV4LCB0cnVlKSkgLyAyIDogK2ZvY3VzICogc2xpZGVTaXplKGluZGV4KSB8fCAwO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0TGltaXQobWF4KSB7XG4gICAgcmV0dXJuIHRvUG9zaXRpb24obWF4ID8gQ29tcG9uZW50czIuQ29udHJvbGxlci5nZXRFbmQoKSA6IDAsICEhb3B0aW9ucy50cmltU3BhY2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuU2hpZnQoYmFja3dhcmRzKSB7XG4gICAgdmFyIHNoaWZ0ZWQgPSBvcmllbnQoc2hpZnQoZ2V0UG9zaXRpb24oKSwgYmFja3dhcmRzKSk7XG4gICAgcmV0dXJuIGJhY2t3YXJkcyA/IHNoaWZ0ZWQgPj0gMCA6IHNoaWZ0ZWQgPD0gbGlzdFtyZXNvbHZlKFwic2Nyb2xsV2lkdGhcIildIC0gcmVjdCh0cmFjaylbcmVzb2x2ZShcIndpZHRoXCIpXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV4Y2VlZGVkTGltaXQobWF4LCBwb3NpdGlvbikge1xuICAgIHBvc2l0aW9uID0gaXNVbmRlZmluZWQocG9zaXRpb24pID8gZ2V0UG9zaXRpb24oKSA6IHBvc2l0aW9uO1xuICAgIHZhciBleGNlZWRlZE1pbiA9IG1heCAhPT0gdHJ1ZSAmJiBvcmllbnQocG9zaXRpb24pIDwgb3JpZW50KGdldExpbWl0KGZhbHNlKSk7XG4gICAgdmFyIGV4Y2VlZGVkTWF4ID0gbWF4ICE9PSBmYWxzZSAmJiBvcmllbnQocG9zaXRpb24pID4gb3JpZW50KGdldExpbWl0KHRydWUpKTtcbiAgICByZXR1cm4gZXhjZWVkZWRNaW4gfHwgZXhjZWVkZWRNYXg7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1vdW50OiBtb3VudCxcbiAgICBtb3ZlOiBtb3ZlLFxuICAgIGp1bXA6IGp1bXAsXG4gICAgdHJhbnNsYXRlOiB0cmFuc2xhdGUsXG4gICAgc2hpZnQ6IHNoaWZ0LFxuICAgIGNhbmNlbDogY2FuY2VsLFxuICAgIHRvSW5kZXg6IHRvSW5kZXgsXG4gICAgdG9Qb3NpdGlvbjogdG9Qb3NpdGlvbixcbiAgICBnZXRQb3NpdGlvbjogZ2V0UG9zaXRpb24sXG4gICAgZ2V0TGltaXQ6IGdldExpbWl0LFxuICAgIGV4Y2VlZGVkTGltaXQ6IGV4Y2VlZGVkTGltaXQsXG4gICAgcmVwb3NpdGlvbjogcmVwb3NpdGlvblxuICB9O1xufVxuXG5mdW5jdGlvbiBDb250cm9sbGVyKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBfRXZlbnRJbnRlcmZhY2U1ID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMiksXG4gICAgICBvbiA9IF9FdmVudEludGVyZmFjZTUub24sXG4gICAgICBlbWl0ID0gX0V2ZW50SW50ZXJmYWNlNS5lbWl0O1xuXG4gIHZhciBNb3ZlID0gQ29tcG9uZW50czIuTW92ZTtcbiAgdmFyIGdldFBvc2l0aW9uID0gTW92ZS5nZXRQb3NpdGlvbixcbiAgICAgIGdldExpbWl0ID0gTW92ZS5nZXRMaW1pdCxcbiAgICAgIHRvUG9zaXRpb24gPSBNb3ZlLnRvUG9zaXRpb247XG4gIHZhciBfQ29tcG9uZW50czIkU2xpZGVzID0gQ29tcG9uZW50czIuU2xpZGVzLFxuICAgICAgaXNFbm91Z2ggPSBfQ29tcG9uZW50czIkU2xpZGVzLmlzRW5vdWdoLFxuICAgICAgZ2V0TGVuZ3RoID0gX0NvbXBvbmVudHMyJFNsaWRlcy5nZXRMZW5ndGg7XG4gIHZhciBvbWl0RW5kID0gb3B0aW9ucy5vbWl0RW5kO1xuICB2YXIgaXNMb29wID0gU3BsaWRlMi5pcyhMT09QKTtcbiAgdmFyIGlzU2xpZGUgPSBTcGxpZGUyLmlzKFNMSURFKTtcbiAgdmFyIGdldE5leHQgPSBhcHBseShnZXRBZGphY2VudCwgZmFsc2UpO1xuICB2YXIgZ2V0UHJldiA9IGFwcGx5KGdldEFkamFjZW50LCB0cnVlKTtcbiAgdmFyIGN1cnJJbmRleCA9IG9wdGlvbnMuc3RhcnQgfHwgMDtcbiAgdmFyIGVuZEluZGV4O1xuICB2YXIgcHJldkluZGV4ID0gY3VyckluZGV4O1xuICB2YXIgc2xpZGVDb3VudDtcbiAgdmFyIHBlck1vdmU7XG4gIHZhciBwZXJQYWdlO1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIGluaXQoKTtcbiAgICBvbihbRVZFTlRfVVBEQVRFRCwgRVZFTlRfUkVGUkVTSCwgRVZFTlRfRU5EX0lOREVYX0NIQU5HRURdLCBpbml0KTtcbiAgICBvbihFVkVOVF9SRVNJWkVELCBvblJlc2l6ZWQpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICBzbGlkZUNvdW50ID0gZ2V0TGVuZ3RoKHRydWUpO1xuICAgIHBlck1vdmUgPSBvcHRpb25zLnBlck1vdmU7XG4gICAgcGVyUGFnZSA9IG9wdGlvbnMucGVyUGFnZTtcbiAgICBlbmRJbmRleCA9IGdldEVuZCgpO1xuICAgIHZhciBpbmRleCA9IGNsYW1wKGN1cnJJbmRleCwgMCwgb21pdEVuZCA/IGVuZEluZGV4IDogc2xpZGVDb3VudCAtIDEpO1xuXG4gICAgaWYgKGluZGV4ICE9PSBjdXJySW5kZXgpIHtcbiAgICAgIGN1cnJJbmRleCA9IGluZGV4O1xuICAgICAgTW92ZS5yZXBvc2l0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25SZXNpemVkKCkge1xuICAgIGlmIChlbmRJbmRleCAhPT0gZ2V0RW5kKCkpIHtcbiAgICAgIGVtaXQoRVZFTlRfRU5EX0lOREVYX0NIQU5HRUQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdvKGNvbnRyb2wsIGFsbG93U2FtZUluZGV4LCBjYWxsYmFjaykge1xuICAgIGlmICghaXNCdXN5KCkpIHtcbiAgICAgIHZhciBkZXN0ID0gcGFyc2UoY29udHJvbCk7XG4gICAgICB2YXIgaW5kZXggPSBsb29wKGRlc3QpO1xuXG4gICAgICBpZiAoaW5kZXggPiAtMSAmJiAoYWxsb3dTYW1lSW5kZXggfHwgaW5kZXggIT09IGN1cnJJbmRleCkpIHtcbiAgICAgICAgc2V0SW5kZXgoaW5kZXgpO1xuICAgICAgICBNb3ZlLm1vdmUoZGVzdCwgaW5kZXgsIHByZXZJbmRleCwgY2FsbGJhY2spO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNjcm9sbChkZXN0aW5hdGlvbiwgZHVyYXRpb24sIHNuYXAsIGNhbGxiYWNrKSB7XG4gICAgQ29tcG9uZW50czIuU2Nyb2xsLnNjcm9sbChkZXN0aW5hdGlvbiwgZHVyYXRpb24sIHNuYXAsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBpbmRleCA9IGxvb3AoTW92ZS50b0luZGV4KGdldFBvc2l0aW9uKCkpKTtcbiAgICAgIHNldEluZGV4KG9taXRFbmQgPyBtaW4oaW5kZXgsIGVuZEluZGV4KSA6IGluZGV4KTtcbiAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZShjb250cm9sKSB7XG4gICAgdmFyIGluZGV4ID0gY3VyckluZGV4O1xuXG4gICAgaWYgKGlzU3RyaW5nKGNvbnRyb2wpKSB7XG4gICAgICB2YXIgX3JlZiA9IGNvbnRyb2wubWF0Y2goLyhbK1xcLTw+XSkoXFxkKyk/LykgfHwgW10sXG4gICAgICAgICAgaW5kaWNhdG9yID0gX3JlZlsxXSxcbiAgICAgICAgICBudW1iZXIgPSBfcmVmWzJdO1xuXG4gICAgICBpZiAoaW5kaWNhdG9yID09PSBcIitcIiB8fCBpbmRpY2F0b3IgPT09IFwiLVwiKSB7XG4gICAgICAgIGluZGV4ID0gY29tcHV0ZURlc3RJbmRleChjdXJySW5kZXggKyArKFwiXCIgKyBpbmRpY2F0b3IgKyAoK251bWJlciB8fCAxKSksIGN1cnJJbmRleCk7XG4gICAgICB9IGVsc2UgaWYgKGluZGljYXRvciA9PT0gXCI+XCIpIHtcbiAgICAgICAgaW5kZXggPSBudW1iZXIgPyB0b0luZGV4KCtudW1iZXIpIDogZ2V0TmV4dCh0cnVlKTtcbiAgICAgIH0gZWxzZSBpZiAoaW5kaWNhdG9yID09PSBcIjxcIikge1xuICAgICAgICBpbmRleCA9IGdldFByZXYodHJ1ZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGluZGV4ID0gaXNMb29wID8gY29udHJvbCA6IGNsYW1wKGNvbnRyb2wsIDAsIGVuZEluZGV4KTtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRBZGphY2VudChwcmV2LCBkZXN0aW5hdGlvbikge1xuICAgIHZhciBudW1iZXIgPSBwZXJNb3ZlIHx8IChoYXNGb2N1cygpID8gMSA6IHBlclBhZ2UpO1xuICAgIHZhciBkZXN0ID0gY29tcHV0ZURlc3RJbmRleChjdXJySW5kZXggKyBudW1iZXIgKiAocHJldiA/IC0xIDogMSksIGN1cnJJbmRleCwgIShwZXJNb3ZlIHx8IGhhc0ZvY3VzKCkpKTtcblxuICAgIGlmIChkZXN0ID09PSAtMSAmJiBpc1NsaWRlKSB7XG4gICAgICBpZiAoIWFwcHJveGltYXRlbHlFcXVhbChnZXRQb3NpdGlvbigpLCBnZXRMaW1pdCghcHJldiksIDEpKSB7XG4gICAgICAgIHJldHVybiBwcmV2ID8gMCA6IGVuZEluZGV4O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkZXN0aW5hdGlvbiA/IGRlc3QgOiBsb29wKGRlc3QpO1xuICB9XG5cbiAgZnVuY3Rpb24gY29tcHV0ZURlc3RJbmRleChkZXN0LCBmcm9tLCBzbmFwUGFnZSkge1xuICAgIGlmIChpc0Vub3VnaCgpIHx8IGhhc0ZvY3VzKCkpIHtcbiAgICAgIHZhciBpbmRleCA9IGNvbXB1dGVNb3ZhYmxlRGVzdEluZGV4KGRlc3QpO1xuXG4gICAgICBpZiAoaW5kZXggIT09IGRlc3QpIHtcbiAgICAgICAgZnJvbSA9IGRlc3Q7XG4gICAgICAgIGRlc3QgPSBpbmRleDtcbiAgICAgICAgc25hcFBhZ2UgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRlc3QgPCAwIHx8IGRlc3QgPiBlbmRJbmRleCkge1xuICAgICAgICBpZiAoIXBlck1vdmUgJiYgKGJldHdlZW4oMCwgZGVzdCwgZnJvbSwgdHJ1ZSkgfHwgYmV0d2VlbihlbmRJbmRleCwgZnJvbSwgZGVzdCwgdHJ1ZSkpKSB7XG4gICAgICAgICAgZGVzdCA9IHRvSW5kZXgodG9QYWdlKGRlc3QpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoaXNMb29wKSB7XG4gICAgICAgICAgICBkZXN0ID0gc25hcFBhZ2UgPyBkZXN0IDwgMCA/IC0oc2xpZGVDb3VudCAlIHBlclBhZ2UgfHwgcGVyUGFnZSkgOiBzbGlkZUNvdW50IDogZGVzdDtcbiAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucmV3aW5kKSB7XG4gICAgICAgICAgICBkZXN0ID0gZGVzdCA8IDAgPyBlbmRJbmRleCA6IDA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlc3QgPSAtMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChzbmFwUGFnZSAmJiBkZXN0ICE9PSBmcm9tKSB7XG4gICAgICAgICAgZGVzdCA9IHRvSW5kZXgodG9QYWdlKGZyb20pICsgKGRlc3QgPCBmcm9tID8gLTEgOiAxKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZGVzdCA9IC0xO1xuICAgIH1cblxuICAgIHJldHVybiBkZXN0O1xuICB9XG5cbiAgZnVuY3Rpb24gY29tcHV0ZU1vdmFibGVEZXN0SW5kZXgoZGVzdCkge1xuICAgIGlmIChpc1NsaWRlICYmIG9wdGlvbnMudHJpbVNwYWNlID09PSBcIm1vdmVcIiAmJiBkZXN0ICE9PSBjdXJySW5kZXgpIHtcbiAgICAgIHZhciBwb3NpdGlvbiA9IGdldFBvc2l0aW9uKCk7XG5cbiAgICAgIHdoaWxlIChwb3NpdGlvbiA9PT0gdG9Qb3NpdGlvbihkZXN0LCB0cnVlKSAmJiBiZXR3ZWVuKGRlc3QsIDAsIFNwbGlkZTIubGVuZ3RoIC0gMSwgIW9wdGlvbnMucmV3aW5kKSkge1xuICAgICAgICBkZXN0IDwgY3VyckluZGV4ID8gLS1kZXN0IDogKytkZXN0O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkZXN0O1xuICB9XG5cbiAgZnVuY3Rpb24gbG9vcChpbmRleCkge1xuICAgIHJldHVybiBpc0xvb3AgPyAoaW5kZXggKyBzbGlkZUNvdW50KSAlIHNsaWRlQ291bnQgfHwgMCA6IGluZGV4O1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RW5kKCkge1xuICAgIHZhciBlbmQgPSBzbGlkZUNvdW50IC0gKGhhc0ZvY3VzKCkgfHwgaXNMb29wICYmIHBlck1vdmUgPyAxIDogcGVyUGFnZSk7XG5cbiAgICB3aGlsZSAob21pdEVuZCAmJiBlbmQtLSA+IDApIHtcbiAgICAgIGlmICh0b1Bvc2l0aW9uKHNsaWRlQ291bnQgLSAxLCB0cnVlKSAhPT0gdG9Qb3NpdGlvbihlbmQsIHRydWUpKSB7XG4gICAgICAgIGVuZCsrO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2xhbXAoZW5kLCAwLCBzbGlkZUNvdW50IC0gMSk7XG4gIH1cblxuICBmdW5jdGlvbiB0b0luZGV4KHBhZ2UpIHtcbiAgICByZXR1cm4gY2xhbXAoaGFzRm9jdXMoKSA/IHBhZ2UgOiBwZXJQYWdlICogcGFnZSwgMCwgZW5kSW5kZXgpO1xuICB9XG5cbiAgZnVuY3Rpb24gdG9QYWdlKGluZGV4KSB7XG4gICAgcmV0dXJuIGhhc0ZvY3VzKCkgPyBtaW4oaW5kZXgsIGVuZEluZGV4KSA6IGZsb29yKChpbmRleCA+PSBlbmRJbmRleCA/IHNsaWRlQ291bnQgLSAxIDogaW5kZXgpIC8gcGVyUGFnZSk7XG4gIH1cblxuICBmdW5jdGlvbiB0b0Rlc3QoZGVzdGluYXRpb24pIHtcbiAgICB2YXIgY2xvc2VzdCA9IE1vdmUudG9JbmRleChkZXN0aW5hdGlvbik7XG4gICAgcmV0dXJuIGlzU2xpZGUgPyBjbGFtcChjbG9zZXN0LCAwLCBlbmRJbmRleCkgOiBjbG9zZXN0O1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0SW5kZXgoaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggIT09IGN1cnJJbmRleCkge1xuICAgICAgcHJldkluZGV4ID0gY3VyckluZGV4O1xuICAgICAgY3VyckluZGV4ID0gaW5kZXg7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SW5kZXgocHJldikge1xuICAgIHJldHVybiBwcmV2ID8gcHJldkluZGV4IDogY3VyckluZGV4O1xuICB9XG5cbiAgZnVuY3Rpb24gaGFzRm9jdXMoKSB7XG4gICAgcmV0dXJuICFpc1VuZGVmaW5lZChvcHRpb25zLmZvY3VzKSB8fCBvcHRpb25zLmlzTmF2aWdhdGlvbjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzQnVzeSgpIHtcbiAgICByZXR1cm4gU3BsaWRlMi5zdGF0ZS5pcyhbTU9WSU5HLCBTQ1JPTExJTkddKSAmJiAhIW9wdGlvbnMud2FpdEZvclRyYW5zaXRpb247XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1vdW50OiBtb3VudCxcbiAgICBnbzogZ28sXG4gICAgc2Nyb2xsOiBzY3JvbGwsXG4gICAgZ2V0TmV4dDogZ2V0TmV4dCxcbiAgICBnZXRQcmV2OiBnZXRQcmV2LFxuICAgIGdldEFkamFjZW50OiBnZXRBZGphY2VudCxcbiAgICBnZXRFbmQ6IGdldEVuZCxcbiAgICBzZXRJbmRleDogc2V0SW5kZXgsXG4gICAgZ2V0SW5kZXg6IGdldEluZGV4LFxuICAgIHRvSW5kZXg6IHRvSW5kZXgsXG4gICAgdG9QYWdlOiB0b1BhZ2UsXG4gICAgdG9EZXN0OiB0b0Rlc3QsXG4gICAgaGFzRm9jdXM6IGhhc0ZvY3VzLFxuICAgIGlzQnVzeTogaXNCdXN5XG4gIH07XG59XG5cbnZhciBYTUxfTkFNRV9TUEFDRSA9IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIjtcbnZhciBQQVRIID0gXCJtMTUuNSAwLjkzMi00LjMgNC4zOCAxNC41IDE0LjYtMTQuNSAxNC41IDQuMyA0LjQgMTQuNi0xNC42IDQuNC00LjMtNC40LTQuNC0xNC42LTE0LjZ6XCI7XG52YXIgU0laRSA9IDQwO1xuXG5mdW5jdGlvbiBBcnJvd3MoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIGV2ZW50ID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMik7XG4gIHZhciBvbiA9IGV2ZW50Lm9uLFxuICAgICAgYmluZCA9IGV2ZW50LmJpbmQsXG4gICAgICBlbWl0ID0gZXZlbnQuZW1pdDtcbiAgdmFyIGNsYXNzZXMgPSBvcHRpb25zLmNsYXNzZXMsXG4gICAgICBpMThuID0gb3B0aW9ucy5pMThuO1xuICB2YXIgRWxlbWVudHMgPSBDb21wb25lbnRzMi5FbGVtZW50cyxcbiAgICAgIENvbnRyb2xsZXIgPSBDb21wb25lbnRzMi5Db250cm9sbGVyO1xuICB2YXIgcGxhY2Vob2xkZXIgPSBFbGVtZW50cy5hcnJvd3MsXG4gICAgICB0cmFjayA9IEVsZW1lbnRzLnRyYWNrO1xuICB2YXIgd3JhcHBlciA9IHBsYWNlaG9sZGVyO1xuICB2YXIgcHJldiA9IEVsZW1lbnRzLnByZXY7XG4gIHZhciBuZXh0ID0gRWxlbWVudHMubmV4dDtcbiAgdmFyIGNyZWF0ZWQ7XG4gIHZhciB3cmFwcGVyQ2xhc3NlcztcbiAgdmFyIGFycm93cyA9IHt9O1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIGluaXQoKTtcbiAgICBvbihFVkVOVF9VUERBVEVELCByZW1vdW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW91bnQoKSB7XG4gICAgZGVzdHJveSgpO1xuICAgIG1vdW50KCk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBlbmFibGVkID0gb3B0aW9ucy5hcnJvd3M7XG5cbiAgICBpZiAoZW5hYmxlZCAmJiAhKHByZXYgJiYgbmV4dCkpIHtcbiAgICAgIGNyZWF0ZUFycm93cygpO1xuICAgIH1cblxuICAgIGlmIChwcmV2ICYmIG5leHQpIHtcbiAgICAgIGFzc2lnbihhcnJvd3MsIHtcbiAgICAgICAgcHJldjogcHJldixcbiAgICAgICAgbmV4dDogbmV4dFxuICAgICAgfSk7XG4gICAgICBkaXNwbGF5KHdyYXBwZXIsIGVuYWJsZWQgPyBcIlwiIDogXCJub25lXCIpO1xuICAgICAgYWRkQ2xhc3Mod3JhcHBlciwgd3JhcHBlckNsYXNzZXMgPSBDTEFTU19BUlJPV1MgKyBcIi0tXCIgKyBvcHRpb25zLmRpcmVjdGlvbik7XG5cbiAgICAgIGlmIChlbmFibGVkKSB7XG4gICAgICAgIGxpc3RlbigpO1xuICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgc2V0QXR0cmlidXRlKFtwcmV2LCBuZXh0XSwgQVJJQV9DT05UUk9MUywgdHJhY2suaWQpO1xuICAgICAgICBlbWl0KEVWRU5UX0FSUk9XU19NT1VOVEVELCBwcmV2LCBuZXh0KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgIGV2ZW50LmRlc3Ryb3koKTtcbiAgICByZW1vdmVDbGFzcyh3cmFwcGVyLCB3cmFwcGVyQ2xhc3Nlcyk7XG5cbiAgICBpZiAoY3JlYXRlZCkge1xuICAgICAgcmVtb3ZlKHBsYWNlaG9sZGVyID8gW3ByZXYsIG5leHRdIDogd3JhcHBlcik7XG4gICAgICBwcmV2ID0gbmV4dCA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZUF0dHJpYnV0ZShbcHJldiwgbmV4dF0sIEFMTF9BVFRSSUJVVEVTKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBsaXN0ZW4oKSB7XG4gICAgb24oW0VWRU5UX01PVU5URUQsIEVWRU5UX01PVkVELCBFVkVOVF9SRUZSRVNILCBFVkVOVF9TQ1JPTExFRCwgRVZFTlRfRU5EX0lOREVYX0NIQU5HRURdLCB1cGRhdGUpO1xuICAgIGJpbmQobmV4dCwgXCJjbGlja1wiLCBhcHBseShnbywgXCI+XCIpKTtcbiAgICBiaW5kKHByZXYsIFwiY2xpY2tcIiwgYXBwbHkoZ28sIFwiPFwiKSk7XG4gIH1cblxuICBmdW5jdGlvbiBnbyhjb250cm9sKSB7XG4gICAgQ29udHJvbGxlci5nbyhjb250cm9sLCB0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUFycm93cygpIHtcbiAgICB3cmFwcGVyID0gcGxhY2Vob2xkZXIgfHwgY3JlYXRlKFwiZGl2XCIsIGNsYXNzZXMuYXJyb3dzKTtcbiAgICBwcmV2ID0gY3JlYXRlQXJyb3codHJ1ZSk7XG4gICAgbmV4dCA9IGNyZWF0ZUFycm93KGZhbHNlKTtcbiAgICBjcmVhdGVkID0gdHJ1ZTtcbiAgICBhcHBlbmQod3JhcHBlciwgW3ByZXYsIG5leHRdKTtcbiAgICAhcGxhY2Vob2xkZXIgJiYgYmVmb3JlKHdyYXBwZXIsIHRyYWNrKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUFycm93KHByZXYyKSB7XG4gICAgdmFyIGFycm93ID0gXCI8YnV0dG9uIGNsYXNzPVxcXCJcIiArIGNsYXNzZXMuYXJyb3cgKyBcIiBcIiArIChwcmV2MiA/IGNsYXNzZXMucHJldiA6IGNsYXNzZXMubmV4dCkgKyBcIlxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIj48c3ZnIHhtbG5zPVxcXCJcIiArIFhNTF9OQU1FX1NQQUNFICsgXCJcXFwiIHZpZXdCb3g9XFxcIjAgMCBcIiArIFNJWkUgKyBcIiBcIiArIFNJWkUgKyBcIlxcXCIgd2lkdGg9XFxcIlwiICsgU0laRSArIFwiXFxcIiBoZWlnaHQ9XFxcIlwiICsgU0laRSArIFwiXFxcIiBmb2N1c2FibGU9XFxcImZhbHNlXFxcIj48cGF0aCBkPVxcXCJcIiArIChvcHRpb25zLmFycm93UGF0aCB8fCBQQVRIKSArIFwiXFxcIiAvPlwiO1xuICAgIHJldHVybiBwYXJzZUh0bWwoYXJyb3cpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgIGlmIChwcmV2ICYmIG5leHQpIHtcbiAgICAgIHZhciBpbmRleCA9IFNwbGlkZTIuaW5kZXg7XG4gICAgICB2YXIgcHJldkluZGV4ID0gQ29udHJvbGxlci5nZXRQcmV2KCk7XG4gICAgICB2YXIgbmV4dEluZGV4ID0gQ29udHJvbGxlci5nZXROZXh0KCk7XG4gICAgICB2YXIgcHJldkxhYmVsID0gcHJldkluZGV4ID4gLTEgJiYgaW5kZXggPCBwcmV2SW5kZXggPyBpMThuLmxhc3QgOiBpMThuLnByZXY7XG4gICAgICB2YXIgbmV4dExhYmVsID0gbmV4dEluZGV4ID4gLTEgJiYgaW5kZXggPiBuZXh0SW5kZXggPyBpMThuLmZpcnN0IDogaTE4bi5uZXh0O1xuICAgICAgcHJldi5kaXNhYmxlZCA9IHByZXZJbmRleCA8IDA7XG4gICAgICBuZXh0LmRpc2FibGVkID0gbmV4dEluZGV4IDwgMDtcbiAgICAgIHNldEF0dHJpYnV0ZShwcmV2LCBBUklBX0xBQkVMLCBwcmV2TGFiZWwpO1xuICAgICAgc2V0QXR0cmlidXRlKG5leHQsIEFSSUFfTEFCRUwsIG5leHRMYWJlbCk7XG4gICAgICBlbWl0KEVWRU5UX0FSUk9XU19VUERBVEVELCBwcmV2LCBuZXh0LCBwcmV2SW5kZXgsIG5leHRJbmRleCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBhcnJvd3M6IGFycm93cyxcbiAgICBtb3VudDogbW91bnQsXG4gICAgZGVzdHJveTogZGVzdHJveSxcbiAgICB1cGRhdGU6IHVwZGF0ZVxuICB9O1xufVxuXG52YXIgSU5URVJWQUxfREFUQV9BVFRSSUJVVEUgPSBEQVRBX0FUVFJJQlVURSArIFwiLWludGVydmFsXCI7XG5cbmZ1bmN0aW9uIEF1dG9wbGF5KFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBfRXZlbnRJbnRlcmZhY2U2ID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMiksXG4gICAgICBvbiA9IF9FdmVudEludGVyZmFjZTYub24sXG4gICAgICBiaW5kID0gX0V2ZW50SW50ZXJmYWNlNi5iaW5kLFxuICAgICAgZW1pdCA9IF9FdmVudEludGVyZmFjZTYuZW1pdDtcblxuICB2YXIgaW50ZXJ2YWwgPSBSZXF1ZXN0SW50ZXJ2YWwob3B0aW9ucy5pbnRlcnZhbCwgU3BsaWRlMi5nby5iaW5kKFNwbGlkZTIsIFwiPlwiKSwgb25BbmltYXRpb25GcmFtZSk7XG4gIHZhciBpc1BhdXNlZCA9IGludGVydmFsLmlzUGF1c2VkO1xuICB2YXIgRWxlbWVudHMgPSBDb21wb25lbnRzMi5FbGVtZW50cyxcbiAgICAgIF9Db21wb25lbnRzMiRFbGVtZW50czQgPSBDb21wb25lbnRzMi5FbGVtZW50cyxcbiAgICAgIHJvb3QgPSBfQ29tcG9uZW50czIkRWxlbWVudHM0LnJvb3QsXG4gICAgICB0b2dnbGUgPSBfQ29tcG9uZW50czIkRWxlbWVudHM0LnRvZ2dsZTtcbiAgdmFyIGF1dG9wbGF5ID0gb3B0aW9ucy5hdXRvcGxheTtcbiAgdmFyIGhvdmVyZWQ7XG4gIHZhciBmb2N1c2VkO1xuICB2YXIgc3RvcHBlZCA9IGF1dG9wbGF5ID09PSBcInBhdXNlXCI7XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgaWYgKGF1dG9wbGF5KSB7XG4gICAgICBsaXN0ZW4oKTtcbiAgICAgIHRvZ2dsZSAmJiBzZXRBdHRyaWJ1dGUodG9nZ2xlLCBBUklBX0NPTlRST0xTLCBFbGVtZW50cy50cmFjay5pZCk7XG4gICAgICBzdG9wcGVkIHx8IHBsYXkoKTtcbiAgICAgIHVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGxpc3RlbigpIHtcbiAgICBpZiAob3B0aW9ucy5wYXVzZU9uSG92ZXIpIHtcbiAgICAgIGJpbmQocm9vdCwgXCJtb3VzZWVudGVyIG1vdXNlbGVhdmVcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaG92ZXJlZCA9IGUudHlwZSA9PT0gXCJtb3VzZWVudGVyXCI7XG4gICAgICAgIGF1dG9Ub2dnbGUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnBhdXNlT25Gb2N1cykge1xuICAgICAgYmluZChyb290LCBcImZvY3VzaW4gZm9jdXNvdXRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZm9jdXNlZCA9IGUudHlwZSA9PT0gXCJmb2N1c2luXCI7XG4gICAgICAgIGF1dG9Ub2dnbGUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0b2dnbGUpIHtcbiAgICAgIGJpbmQodG9nZ2xlLCBcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc3RvcHBlZCA/IHBsYXkoKSA6IHBhdXNlKHRydWUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgb24oW0VWRU5UX01PVkUsIEVWRU5UX1NDUk9MTCwgRVZFTlRfUkVGUkVTSF0sIGludGVydmFsLnJld2luZCk7XG4gICAgb24oRVZFTlRfTU9WRSwgb25Nb3ZlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXkoKSB7XG4gICAgaWYgKGlzUGF1c2VkKCkgJiYgQ29tcG9uZW50czIuU2xpZGVzLmlzRW5vdWdoKCkpIHtcbiAgICAgIGludGVydmFsLnN0YXJ0KCFvcHRpb25zLnJlc2V0UHJvZ3Jlc3MpO1xuICAgICAgZm9jdXNlZCA9IGhvdmVyZWQgPSBzdG9wcGVkID0gZmFsc2U7XG4gICAgICB1cGRhdGUoKTtcbiAgICAgIGVtaXQoRVZFTlRfQVVUT1BMQVlfUExBWSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2Uoc3RvcCkge1xuICAgIGlmIChzdG9wID09PSB2b2lkIDApIHtcbiAgICAgIHN0b3AgPSB0cnVlO1xuICAgIH1cblxuICAgIHN0b3BwZWQgPSAhIXN0b3A7XG4gICAgdXBkYXRlKCk7XG5cbiAgICBpZiAoIWlzUGF1c2VkKCkpIHtcbiAgICAgIGludGVydmFsLnBhdXNlKCk7XG4gICAgICBlbWl0KEVWRU5UX0FVVE9QTEFZX1BBVVNFKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBhdXRvVG9nZ2xlKCkge1xuICAgIGlmICghc3RvcHBlZCkge1xuICAgICAgaG92ZXJlZCB8fCBmb2N1c2VkID8gcGF1c2UoZmFsc2UpIDogcGxheSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICBpZiAodG9nZ2xlKSB7XG4gICAgICB0b2dnbGVDbGFzcyh0b2dnbGUsIENMQVNTX0FDVElWRSwgIXN0b3BwZWQpO1xuICAgICAgc2V0QXR0cmlidXRlKHRvZ2dsZSwgQVJJQV9MQUJFTCwgb3B0aW9ucy5pMThuW3N0b3BwZWQgPyBcInBsYXlcIiA6IFwicGF1c2VcIl0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uQW5pbWF0aW9uRnJhbWUocmF0ZSkge1xuICAgIHZhciBiYXIgPSBFbGVtZW50cy5iYXI7XG4gICAgYmFyICYmIHN0eWxlKGJhciwgXCJ3aWR0aFwiLCByYXRlICogMTAwICsgXCIlXCIpO1xuICAgIGVtaXQoRVZFTlRfQVVUT1BMQVlfUExBWUlORywgcmF0ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBvbk1vdmUoaW5kZXgpIHtcbiAgICB2YXIgU2xpZGUgPSBDb21wb25lbnRzMi5TbGlkZXMuZ2V0QXQoaW5kZXgpO1xuICAgIGludGVydmFsLnNldChTbGlkZSAmJiArZ2V0QXR0cmlidXRlKFNsaWRlLnNsaWRlLCBJTlRFUlZBTF9EQVRBX0FUVFJJQlVURSkgfHwgb3B0aW9ucy5pbnRlcnZhbCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1vdW50OiBtb3VudCxcbiAgICBkZXN0cm95OiBpbnRlcnZhbC5jYW5jZWwsXG4gICAgcGxheTogcGxheSxcbiAgICBwYXVzZTogcGF1c2UsXG4gICAgaXNQYXVzZWQ6IGlzUGF1c2VkXG4gIH07XG59XG5cbmZ1bmN0aW9uIENvdmVyKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBfRXZlbnRJbnRlcmZhY2U3ID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMiksXG4gICAgICBvbiA9IF9FdmVudEludGVyZmFjZTcub247XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgaWYgKG9wdGlvbnMuY292ZXIpIHtcbiAgICAgIG9uKEVWRU5UX0xBWllMT0FEX0xPQURFRCwgYXBwbHkodG9nZ2xlLCB0cnVlKSk7XG4gICAgICBvbihbRVZFTlRfTU9VTlRFRCwgRVZFTlRfVVBEQVRFRCwgRVZFTlRfUkVGUkVTSF0sIGFwcGx5KGNvdmVyLCB0cnVlKSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY292ZXIoY292ZXIyKSB7XG4gICAgQ29tcG9uZW50czIuU2xpZGVzLmZvckVhY2goZnVuY3Rpb24gKFNsaWRlKSB7XG4gICAgICB2YXIgaW1nID0gY2hpbGQoU2xpZGUuY29udGFpbmVyIHx8IFNsaWRlLnNsaWRlLCBcImltZ1wiKTtcblxuICAgICAgaWYgKGltZyAmJiBpbWcuc3JjKSB7XG4gICAgICAgIHRvZ2dsZShjb3ZlcjIsIGltZywgU2xpZGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gdG9nZ2xlKGNvdmVyMiwgaW1nLCBTbGlkZSkge1xuICAgIFNsaWRlLnN0eWxlKFwiYmFja2dyb3VuZFwiLCBjb3ZlcjIgPyBcImNlbnRlci9jb3ZlciBuby1yZXBlYXQgdXJsKFxcXCJcIiArIGltZy5zcmMgKyBcIlxcXCIpXCIgOiBcIlwiLCB0cnVlKTtcbiAgICBkaXNwbGF5KGltZywgY292ZXIyID8gXCJub25lXCIgOiBcIlwiKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGRlc3Ryb3k6IGFwcGx5KGNvdmVyLCBmYWxzZSlcbiAgfTtcbn1cblxudmFyIEJPVU5DRV9ESUZGX1RIUkVTSE9MRCA9IDEwO1xudmFyIEJPVU5DRV9EVVJBVElPTiA9IDYwMDtcbnZhciBGUklDVElPTl9GQUNUT1IgPSAwLjY7XG52YXIgQkFTRV9WRUxPQ0lUWSA9IDEuNTtcbnZhciBNSU5fRFVSQVRJT04gPSA4MDA7XG5cbmZ1bmN0aW9uIFNjcm9sbChTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgX0V2ZW50SW50ZXJmYWNlOCA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpLFxuICAgICAgb24gPSBfRXZlbnRJbnRlcmZhY2U4Lm9uLFxuICAgICAgZW1pdCA9IF9FdmVudEludGVyZmFjZTguZW1pdDtcblxuICB2YXIgc2V0ID0gU3BsaWRlMi5zdGF0ZS5zZXQ7XG4gIHZhciBNb3ZlID0gQ29tcG9uZW50czIuTW92ZTtcbiAgdmFyIGdldFBvc2l0aW9uID0gTW92ZS5nZXRQb3NpdGlvbixcbiAgICAgIGdldExpbWl0ID0gTW92ZS5nZXRMaW1pdCxcbiAgICAgIGV4Y2VlZGVkTGltaXQgPSBNb3ZlLmV4Y2VlZGVkTGltaXQsXG4gICAgICB0cmFuc2xhdGUgPSBNb3ZlLnRyYW5zbGF0ZTtcbiAgdmFyIGlzU2xpZGUgPSBTcGxpZGUyLmlzKFNMSURFKTtcbiAgdmFyIGludGVydmFsO1xuICB2YXIgY2FsbGJhY2s7XG4gIHZhciBmcmljdGlvbiA9IDE7XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgb24oRVZFTlRfTU9WRSwgY2xlYXIpO1xuICAgIG9uKFtFVkVOVF9VUERBVEVELCBFVkVOVF9SRUZSRVNIXSwgY2FuY2VsKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNjcm9sbChkZXN0aW5hdGlvbiwgZHVyYXRpb24sIHNuYXAsIG9uU2Nyb2xsZWQsIG5vQ29uc3RyYWluKSB7XG4gICAgdmFyIGZyb20gPSBnZXRQb3NpdGlvbigpO1xuICAgIGNsZWFyKCk7XG5cbiAgICBpZiAoc25hcCAmJiAoIWlzU2xpZGUgfHwgIWV4Y2VlZGVkTGltaXQoKSkpIHtcbiAgICAgIHZhciBzaXplID0gQ29tcG9uZW50czIuTGF5b3V0LnNsaWRlclNpemUoKTtcbiAgICAgIHZhciBvZmZzZXQgPSBzaWduKGRlc3RpbmF0aW9uKSAqIHNpemUgKiBmbG9vcihhYnMoZGVzdGluYXRpb24pIC8gc2l6ZSkgfHwgMDtcbiAgICAgIGRlc3RpbmF0aW9uID0gTW92ZS50b1Bvc2l0aW9uKENvbXBvbmVudHMyLkNvbnRyb2xsZXIudG9EZXN0KGRlc3RpbmF0aW9uICUgc2l6ZSkpICsgb2Zmc2V0O1xuICAgIH1cblxuICAgIHZhciBub0Rpc3RhbmNlID0gYXBwcm94aW1hdGVseUVxdWFsKGZyb20sIGRlc3RpbmF0aW9uLCAxKTtcbiAgICBmcmljdGlvbiA9IDE7XG4gICAgZHVyYXRpb24gPSBub0Rpc3RhbmNlID8gMCA6IGR1cmF0aW9uIHx8IG1heChhYnMoZGVzdGluYXRpb24gLSBmcm9tKSAvIEJBU0VfVkVMT0NJVFksIE1JTl9EVVJBVElPTik7XG4gICAgY2FsbGJhY2sgPSBvblNjcm9sbGVkO1xuICAgIGludGVydmFsID0gUmVxdWVzdEludGVydmFsKGR1cmF0aW9uLCBvbkVuZCwgYXBwbHkodXBkYXRlLCBmcm9tLCBkZXN0aW5hdGlvbiwgbm9Db25zdHJhaW4pLCAxKTtcbiAgICBzZXQoU0NST0xMSU5HKTtcbiAgICBlbWl0KEVWRU5UX1NDUk9MTCk7XG4gICAgaW50ZXJ2YWwuc3RhcnQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRW5kKCkge1xuICAgIHNldChJRExFKTtcbiAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpO1xuICAgIGVtaXQoRVZFTlRfU0NST0xMRUQpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlKGZyb20sIHRvLCBub0NvbnN0cmFpbiwgcmF0ZSkge1xuICAgIHZhciBwb3NpdGlvbiA9IGdldFBvc2l0aW9uKCk7XG4gICAgdmFyIHRhcmdldCA9IGZyb20gKyAodG8gLSBmcm9tKSAqIGVhc2luZyhyYXRlKTtcbiAgICB2YXIgZGlmZiA9ICh0YXJnZXQgLSBwb3NpdGlvbikgKiBmcmljdGlvbjtcbiAgICB0cmFuc2xhdGUocG9zaXRpb24gKyBkaWZmKTtcblxuICAgIGlmIChpc1NsaWRlICYmICFub0NvbnN0cmFpbiAmJiBleGNlZWRlZExpbWl0KCkpIHtcbiAgICAgIGZyaWN0aW9uICo9IEZSSUNUSU9OX0ZBQ1RPUjtcblxuICAgICAgaWYgKGFicyhkaWZmKSA8IEJPVU5DRV9ESUZGX1RIUkVTSE9MRCkge1xuICAgICAgICBzY3JvbGwoZ2V0TGltaXQoZXhjZWVkZWRMaW1pdCh0cnVlKSksIEJPVU5DRV9EVVJBVElPTiwgZmFsc2UsIGNhbGxiYWNrLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICBpZiAoaW50ZXJ2YWwpIHtcbiAgICAgIGludGVydmFsLmNhbmNlbCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICBpZiAoaW50ZXJ2YWwgJiYgIWludGVydmFsLmlzUGF1c2VkKCkpIHtcbiAgICAgIGNsZWFyKCk7XG4gICAgICBvbkVuZCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGVhc2luZyh0KSB7XG4gICAgdmFyIGVhc2luZ0Z1bmMgPSBvcHRpb25zLmVhc2luZ0Z1bmM7XG4gICAgcmV0dXJuIGVhc2luZ0Z1bmMgPyBlYXNpbmdGdW5jKHQpIDogMSAtIE1hdGgucG93KDEgLSB0LCA0KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGRlc3Ryb3k6IGNsZWFyLFxuICAgIHNjcm9sbDogc2Nyb2xsLFxuICAgIGNhbmNlbDogY2FuY2VsXG4gIH07XG59XG5cbnZhciBTQ1JPTExfTElTVEVORVJfT1BUSU9OUyA9IHtcbiAgcGFzc2l2ZTogZmFsc2UsXG4gIGNhcHR1cmU6IHRydWVcbn07XG5cbmZ1bmN0aW9uIERyYWcoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIF9FdmVudEludGVyZmFjZTkgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKSxcbiAgICAgIG9uID0gX0V2ZW50SW50ZXJmYWNlOS5vbixcbiAgICAgIGVtaXQgPSBfRXZlbnRJbnRlcmZhY2U5LmVtaXQsXG4gICAgICBiaW5kID0gX0V2ZW50SW50ZXJmYWNlOS5iaW5kLFxuICAgICAgdW5iaW5kID0gX0V2ZW50SW50ZXJmYWNlOS51bmJpbmQ7XG5cbiAgdmFyIHN0YXRlID0gU3BsaWRlMi5zdGF0ZTtcbiAgdmFyIE1vdmUgPSBDb21wb25lbnRzMi5Nb3ZlLFxuICAgICAgU2Nyb2xsID0gQ29tcG9uZW50czIuU2Nyb2xsLFxuICAgICAgQ29udHJvbGxlciA9IENvbXBvbmVudHMyLkNvbnRyb2xsZXIsXG4gICAgICB0cmFjayA9IENvbXBvbmVudHMyLkVsZW1lbnRzLnRyYWNrLFxuICAgICAgcmVkdWNlID0gQ29tcG9uZW50czIuTWVkaWEucmVkdWNlO1xuICB2YXIgX0NvbXBvbmVudHMyJERpcmVjdGlvMiA9IENvbXBvbmVudHMyLkRpcmVjdGlvbixcbiAgICAgIHJlc29sdmUgPSBfQ29tcG9uZW50czIkRGlyZWN0aW8yLnJlc29sdmUsXG4gICAgICBvcmllbnQgPSBfQ29tcG9uZW50czIkRGlyZWN0aW8yLm9yaWVudDtcbiAgdmFyIGdldFBvc2l0aW9uID0gTW92ZS5nZXRQb3NpdGlvbixcbiAgICAgIGV4Y2VlZGVkTGltaXQgPSBNb3ZlLmV4Y2VlZGVkTGltaXQ7XG4gIHZhciBiYXNlUG9zaXRpb247XG4gIHZhciBiYXNlRXZlbnQ7XG4gIHZhciBwcmV2QmFzZUV2ZW50O1xuICB2YXIgaXNGcmVlO1xuICB2YXIgZHJhZ2dpbmc7XG4gIHZhciBleGNlZWRlZCA9IGZhbHNlO1xuICB2YXIgY2xpY2tQcmV2ZW50ZWQ7XG4gIHZhciBkaXNhYmxlZDtcbiAgdmFyIHRhcmdldDtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBiaW5kKHRyYWNrLCBQT0lOVEVSX01PVkVfRVZFTlRTLCBub29wLCBTQ1JPTExfTElTVEVORVJfT1BUSU9OUyk7XG4gICAgYmluZCh0cmFjaywgUE9JTlRFUl9VUF9FVkVOVFMsIG5vb3AsIFNDUk9MTF9MSVNURU5FUl9PUFRJT05TKTtcbiAgICBiaW5kKHRyYWNrLCBQT0lOVEVSX0RPV05fRVZFTlRTLCBvblBvaW50ZXJEb3duLCBTQ1JPTExfTElTVEVORVJfT1BUSU9OUyk7XG4gICAgYmluZCh0cmFjaywgXCJjbGlja1wiLCBvbkNsaWNrLCB7XG4gICAgICBjYXB0dXJlOiB0cnVlXG4gICAgfSk7XG4gICAgYmluZCh0cmFjaywgXCJkcmFnc3RhcnRcIiwgcHJldmVudCk7XG4gICAgb24oW0VWRU5UX01PVU5URUQsIEVWRU5UX1VQREFURURdLCBpbml0KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIGRyYWcgPSBvcHRpb25zLmRyYWc7XG4gICAgZGlzYWJsZSghZHJhZyk7XG4gICAgaXNGcmVlID0gZHJhZyA9PT0gXCJmcmVlXCI7XG4gIH1cblxuICBmdW5jdGlvbiBvblBvaW50ZXJEb3duKGUpIHtcbiAgICBjbGlja1ByZXZlbnRlZCA9IGZhbHNlO1xuXG4gICAgaWYgKCFkaXNhYmxlZCkge1xuICAgICAgdmFyIGlzVG91Y2ggPSBpc1RvdWNoRXZlbnQoZSk7XG5cbiAgICAgIGlmIChpc0RyYWdnYWJsZShlLnRhcmdldCkgJiYgKGlzVG91Y2ggfHwgIWUuYnV0dG9uKSkge1xuICAgICAgICBpZiAoIUNvbnRyb2xsZXIuaXNCdXN5KCkpIHtcbiAgICAgICAgICB0YXJnZXQgPSBpc1RvdWNoID8gdHJhY2sgOiB3aW5kb3c7XG4gICAgICAgICAgZHJhZ2dpbmcgPSBzdGF0ZS5pcyhbTU9WSU5HLCBTQ1JPTExJTkddKTtcbiAgICAgICAgICBwcmV2QmFzZUV2ZW50ID0gbnVsbDtcbiAgICAgICAgICBiaW5kKHRhcmdldCwgUE9JTlRFUl9NT1ZFX0VWRU5UUywgb25Qb2ludGVyTW92ZSwgU0NST0xMX0xJU1RFTkVSX09QVElPTlMpO1xuICAgICAgICAgIGJpbmQodGFyZ2V0LCBQT0lOVEVSX1VQX0VWRU5UUywgb25Qb2ludGVyVXAsIFNDUk9MTF9MSVNURU5FUl9PUFRJT05TKTtcbiAgICAgICAgICBNb3ZlLmNhbmNlbCgpO1xuICAgICAgICAgIFNjcm9sbC5jYW5jZWwoKTtcbiAgICAgICAgICBzYXZlKGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByZXZlbnQoZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvblBvaW50ZXJNb3ZlKGUpIHtcbiAgICBpZiAoIXN0YXRlLmlzKERSQUdHSU5HKSkge1xuICAgICAgc3RhdGUuc2V0KERSQUdHSU5HKTtcbiAgICAgIGVtaXQoRVZFTlRfRFJBRyk7XG4gICAgfVxuXG4gICAgaWYgKGUuY2FuY2VsYWJsZSkge1xuICAgICAgaWYgKGRyYWdnaW5nKSB7XG4gICAgICAgIE1vdmUudHJhbnNsYXRlKGJhc2VQb3NpdGlvbiArIGNvbnN0cmFpbihkaWZmQ29vcmQoZSkpKTtcbiAgICAgICAgdmFyIGV4cGlyZWQgPSBkaWZmVGltZShlKSA+IExPR19JTlRFUlZBTDtcbiAgICAgICAgdmFyIGhhc0V4Y2VlZGVkID0gZXhjZWVkZWQgIT09IChleGNlZWRlZCA9IGV4Y2VlZGVkTGltaXQoKSk7XG5cbiAgICAgICAgaWYgKGV4cGlyZWQgfHwgaGFzRXhjZWVkZWQpIHtcbiAgICAgICAgICBzYXZlKGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xpY2tQcmV2ZW50ZWQgPSB0cnVlO1xuICAgICAgICBlbWl0KEVWRU5UX0RSQUdHSU5HKTtcbiAgICAgICAgcHJldmVudChlKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNTbGlkZXJEaXJlY3Rpb24oZSkpIHtcbiAgICAgICAgZHJhZ2dpbmcgPSBzaG91bGRTdGFydChlKTtcbiAgICAgICAgcHJldmVudChlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvblBvaW50ZXJVcChlKSB7XG4gICAgaWYgKHN0YXRlLmlzKERSQUdHSU5HKSkge1xuICAgICAgc3RhdGUuc2V0KElETEUpO1xuICAgICAgZW1pdChFVkVOVF9EUkFHR0VEKTtcbiAgICB9XG5cbiAgICBpZiAoZHJhZ2dpbmcpIHtcbiAgICAgIG1vdmUoZSk7XG4gICAgICBwcmV2ZW50KGUpO1xuICAgIH1cblxuICAgIHVuYmluZCh0YXJnZXQsIFBPSU5URVJfTU9WRV9FVkVOVFMsIG9uUG9pbnRlck1vdmUpO1xuICAgIHVuYmluZCh0YXJnZXQsIFBPSU5URVJfVVBfRVZFTlRTLCBvblBvaW50ZXJVcCk7XG4gICAgZHJhZ2dpbmcgPSBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgIGlmICghZGlzYWJsZWQgJiYgY2xpY2tQcmV2ZW50ZWQpIHtcbiAgICAgIHByZXZlbnQoZSwgdHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2F2ZShlKSB7XG4gICAgcHJldkJhc2VFdmVudCA9IGJhc2VFdmVudDtcbiAgICBiYXNlRXZlbnQgPSBlO1xuICAgIGJhc2VQb3NpdGlvbiA9IGdldFBvc2l0aW9uKCk7XG4gIH1cblxuICBmdW5jdGlvbiBtb3ZlKGUpIHtcbiAgICB2YXIgdmVsb2NpdHkgPSBjb21wdXRlVmVsb2NpdHkoZSk7XG4gICAgdmFyIGRlc3RpbmF0aW9uID0gY29tcHV0ZURlc3RpbmF0aW9uKHZlbG9jaXR5KTtcbiAgICB2YXIgcmV3aW5kID0gb3B0aW9ucy5yZXdpbmQgJiYgb3B0aW9ucy5yZXdpbmRCeURyYWc7XG4gICAgcmVkdWNlKGZhbHNlKTtcblxuICAgIGlmIChpc0ZyZWUpIHtcbiAgICAgIENvbnRyb2xsZXIuc2Nyb2xsKGRlc3RpbmF0aW9uLCAwLCBvcHRpb25zLnNuYXApO1xuICAgIH0gZWxzZSBpZiAoU3BsaWRlMi5pcyhGQURFKSkge1xuICAgICAgQ29udHJvbGxlci5nbyhvcmllbnQoc2lnbih2ZWxvY2l0eSkpIDwgMCA/IHJld2luZCA/IFwiPFwiIDogXCItXCIgOiByZXdpbmQgPyBcIj5cIiA6IFwiK1wiKTtcbiAgICB9IGVsc2UgaWYgKFNwbGlkZTIuaXMoU0xJREUpICYmIGV4Y2VlZGVkICYmIHJld2luZCkge1xuICAgICAgQ29udHJvbGxlci5nbyhleGNlZWRlZExpbWl0KHRydWUpID8gXCI+XCIgOiBcIjxcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIENvbnRyb2xsZXIuZ28oQ29udHJvbGxlci50b0Rlc3QoZGVzdGluYXRpb24pLCB0cnVlKTtcbiAgICB9XG5cbiAgICByZWR1Y2UodHJ1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBzaG91bGRTdGFydChlKSB7XG4gICAgdmFyIHRocmVzaG9sZHMgPSBvcHRpb25zLmRyYWdNaW5UaHJlc2hvbGQ7XG4gICAgdmFyIGlzT2JqID0gaXNPYmplY3QodGhyZXNob2xkcyk7XG4gICAgdmFyIG1vdXNlID0gaXNPYmogJiYgdGhyZXNob2xkcy5tb3VzZSB8fCAwO1xuICAgIHZhciB0b3VjaCA9IChpc09iaiA/IHRocmVzaG9sZHMudG91Y2ggOiArdGhyZXNob2xkcykgfHwgMTA7XG4gICAgcmV0dXJuIGFicyhkaWZmQ29vcmQoZSkpID4gKGlzVG91Y2hFdmVudChlKSA/IHRvdWNoIDogbW91c2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNTbGlkZXJEaXJlY3Rpb24oZSkge1xuICAgIHJldHVybiBhYnMoZGlmZkNvb3JkKGUpKSA+IGFicyhkaWZmQ29vcmQoZSwgdHJ1ZSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gY29tcHV0ZVZlbG9jaXR5KGUpIHtcbiAgICBpZiAoU3BsaWRlMi5pcyhMT09QKSB8fCAhZXhjZWVkZWQpIHtcbiAgICAgIHZhciB0aW1lID0gZGlmZlRpbWUoZSk7XG5cbiAgICAgIGlmICh0aW1lICYmIHRpbWUgPCBMT0dfSU5URVJWQUwpIHtcbiAgICAgICAgcmV0dXJuIGRpZmZDb29yZChlKSAvIHRpbWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBmdW5jdGlvbiBjb21wdXRlRGVzdGluYXRpb24odmVsb2NpdHkpIHtcbiAgICByZXR1cm4gZ2V0UG9zaXRpb24oKSArIHNpZ24odmVsb2NpdHkpICogbWluKGFicyh2ZWxvY2l0eSkgKiAob3B0aW9ucy5mbGlja1Bvd2VyIHx8IDYwMCksIGlzRnJlZSA/IEluZmluaXR5IDogQ29tcG9uZW50czIuTGF5b3V0Lmxpc3RTaXplKCkgKiAob3B0aW9ucy5mbGlja01heFBhZ2VzIHx8IDEpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpZmZDb29yZChlLCBvcnRob2dvbmFsKSB7XG4gICAgcmV0dXJuIGNvb3JkT2YoZSwgb3J0aG9nb25hbCkgLSBjb29yZE9mKGdldEJhc2VFdmVudChlKSwgb3J0aG9nb25hbCk7XG4gIH1cblxuICBmdW5jdGlvbiBkaWZmVGltZShlKSB7XG4gICAgcmV0dXJuIHRpbWVPZihlKSAtIHRpbWVPZihnZXRCYXNlRXZlbnQoZSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0QmFzZUV2ZW50KGUpIHtcbiAgICByZXR1cm4gYmFzZUV2ZW50ID09PSBlICYmIHByZXZCYXNlRXZlbnQgfHwgYmFzZUV2ZW50O1xuICB9XG5cbiAgZnVuY3Rpb24gY29vcmRPZihlLCBvcnRob2dvbmFsKSB7XG4gICAgcmV0dXJuIChpc1RvdWNoRXZlbnQoZSkgPyBlLmNoYW5nZWRUb3VjaGVzWzBdIDogZSlbXCJwYWdlXCIgKyByZXNvbHZlKG9ydGhvZ29uYWwgPyBcIllcIiA6IFwiWFwiKV07XG4gIH1cblxuICBmdW5jdGlvbiBjb25zdHJhaW4oZGlmZikge1xuICAgIHJldHVybiBkaWZmIC8gKGV4Y2VlZGVkICYmIFNwbGlkZTIuaXMoU0xJREUpID8gRlJJQ1RJT04gOiAxKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzRHJhZ2dhYmxlKHRhcmdldDIpIHtcbiAgICB2YXIgbm9EcmFnID0gb3B0aW9ucy5ub0RyYWc7XG4gICAgcmV0dXJuICFtYXRjaGVzKHRhcmdldDIsIFwiLlwiICsgQ0xBU1NfUEFHSU5BVElPTl9QQUdFICsgXCIsIC5cIiArIENMQVNTX0FSUk9XKSAmJiAoIW5vRHJhZyB8fCAhbWF0Y2hlcyh0YXJnZXQyLCBub0RyYWcpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzVG91Y2hFdmVudChlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBUb3VjaEV2ZW50ICE9PSBcInVuZGVmaW5lZFwiICYmIGUgaW5zdGFuY2VvZiBUb3VjaEV2ZW50O1xuICB9XG5cbiAgZnVuY3Rpb24gaXNEcmFnZ2luZygpIHtcbiAgICByZXR1cm4gZHJhZ2dpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBkaXNhYmxlKHZhbHVlKSB7XG4gICAgZGlzYWJsZWQgPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGRpc2FibGU6IGRpc2FibGUsXG4gICAgaXNEcmFnZ2luZzogaXNEcmFnZ2luZ1xuICB9O1xufVxuXG52YXIgTk9STUFMSVpBVElPTl9NQVAgPSB7XG4gIFNwYWNlYmFyOiBcIiBcIixcbiAgUmlnaHQ6IEFSUk9XX1JJR0hULFxuICBMZWZ0OiBBUlJPV19MRUZULFxuICBVcDogQVJST1dfVVAsXG4gIERvd246IEFSUk9XX0RPV05cbn07XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUtleShrZXkpIHtcbiAga2V5ID0gaXNTdHJpbmcoa2V5KSA/IGtleSA6IGtleS5rZXk7XG4gIHJldHVybiBOT1JNQUxJWkFUSU9OX01BUFtrZXldIHx8IGtleTtcbn1cblxudmFyIEtFWUJPQVJEX0VWRU5UID0gXCJrZXlkb3duXCI7XG5cbmZ1bmN0aW9uIEtleWJvYXJkKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBfRXZlbnRJbnRlcmZhY2UxMCA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpLFxuICAgICAgb24gPSBfRXZlbnRJbnRlcmZhY2UxMC5vbixcbiAgICAgIGJpbmQgPSBfRXZlbnRJbnRlcmZhY2UxMC5iaW5kLFxuICAgICAgdW5iaW5kID0gX0V2ZW50SW50ZXJmYWNlMTAudW5iaW5kO1xuXG4gIHZhciByb290ID0gU3BsaWRlMi5yb290O1xuICB2YXIgcmVzb2x2ZSA9IENvbXBvbmVudHMyLkRpcmVjdGlvbi5yZXNvbHZlO1xuICB2YXIgdGFyZ2V0O1xuICB2YXIgZGlzYWJsZWQ7XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgaW5pdCgpO1xuICAgIG9uKEVWRU5UX1VQREFURUQsIGRlc3Ryb3kpO1xuICAgIG9uKEVWRU5UX1VQREFURUQsIGluaXQpO1xuICAgIG9uKEVWRU5UX01PVkUsIG9uTW92ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBrZXlib2FyZCA9IG9wdGlvbnMua2V5Ym9hcmQ7XG5cbiAgICBpZiAoa2V5Ym9hcmQpIHtcbiAgICAgIHRhcmdldCA9IGtleWJvYXJkID09PSBcImdsb2JhbFwiID8gd2luZG93IDogcm9vdDtcbiAgICAgIGJpbmQodGFyZ2V0LCBLRVlCT0FSRF9FVkVOVCwgb25LZXlkb3duKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgIHVuYmluZCh0YXJnZXQsIEtFWUJPQVJEX0VWRU5UKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc2FibGUodmFsdWUpIHtcbiAgICBkaXNhYmxlZCA9IHZhbHVlO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Nb3ZlKCkge1xuICAgIHZhciBfZGlzYWJsZWQgPSBkaXNhYmxlZDtcbiAgICBkaXNhYmxlZCA9IHRydWU7XG4gICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgZGlzYWJsZWQgPSBfZGlzYWJsZWQ7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBvbktleWRvd24oZSkge1xuICAgIGlmICghZGlzYWJsZWQpIHtcbiAgICAgIHZhciBrZXkgPSBub3JtYWxpemVLZXkoZSk7XG5cbiAgICAgIGlmIChrZXkgPT09IHJlc29sdmUoQVJST1dfTEVGVCkpIHtcbiAgICAgICAgU3BsaWRlMi5nbyhcIjxcIik7XG4gICAgICB9IGVsc2UgaWYgKGtleSA9PT0gcmVzb2x2ZShBUlJPV19SSUdIVCkpIHtcbiAgICAgICAgU3BsaWRlMi5nbyhcIj5cIik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb3VudDogbW91bnQsXG4gICAgZGVzdHJveTogZGVzdHJveSxcbiAgICBkaXNhYmxlOiBkaXNhYmxlXG4gIH07XG59XG5cbnZhciBTUkNfREFUQV9BVFRSSUJVVEUgPSBEQVRBX0FUVFJJQlVURSArIFwiLWxhenlcIjtcbnZhciBTUkNTRVRfREFUQV9BVFRSSUJVVEUgPSBTUkNfREFUQV9BVFRSSUJVVEUgKyBcIi1zcmNzZXRcIjtcbnZhciBJTUFHRV9TRUxFQ1RPUiA9IFwiW1wiICsgU1JDX0RBVEFfQVRUUklCVVRFICsgXCJdLCBbXCIgKyBTUkNTRVRfREFUQV9BVFRSSUJVVEUgKyBcIl1cIjtcblxuZnVuY3Rpb24gTGF6eUxvYWQoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIF9FdmVudEludGVyZmFjZTExID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMiksXG4gICAgICBvbiA9IF9FdmVudEludGVyZmFjZTExLm9uLFxuICAgICAgb2ZmID0gX0V2ZW50SW50ZXJmYWNlMTEub2ZmLFxuICAgICAgYmluZCA9IF9FdmVudEludGVyZmFjZTExLmJpbmQsXG4gICAgICBlbWl0ID0gX0V2ZW50SW50ZXJmYWNlMTEuZW1pdDtcblxuICB2YXIgaXNTZXF1ZW50aWFsID0gb3B0aW9ucy5sYXp5TG9hZCA9PT0gXCJzZXF1ZW50aWFsXCI7XG4gIHZhciBldmVudHMgPSBbRVZFTlRfTU9WRUQsIEVWRU5UX1NDUk9MTEVEXTtcbiAgdmFyIGVudHJpZXMgPSBbXTtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBpZiAob3B0aW9ucy5sYXp5TG9hZCkge1xuICAgICAgaW5pdCgpO1xuICAgICAgb24oRVZFTlRfUkVGUkVTSCwgaW5pdCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICBlbXB0eShlbnRyaWVzKTtcbiAgICByZWdpc3RlcigpO1xuXG4gICAgaWYgKGlzU2VxdWVudGlhbCkge1xuICAgICAgbG9hZE5leHQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2ZmKGV2ZW50cyk7XG4gICAgICBvbihldmVudHMsIGNoZWNrKTtcbiAgICAgIGNoZWNrKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXIoKSB7XG4gICAgQ29tcG9uZW50czIuU2xpZGVzLmZvckVhY2goZnVuY3Rpb24gKFNsaWRlKSB7XG4gICAgICBxdWVyeUFsbChTbGlkZS5zbGlkZSwgSU1BR0VfU0VMRUNUT1IpLmZvckVhY2goZnVuY3Rpb24gKGltZykge1xuICAgICAgICB2YXIgc3JjID0gZ2V0QXR0cmlidXRlKGltZywgU1JDX0RBVEFfQVRUUklCVVRFKTtcbiAgICAgICAgdmFyIHNyY3NldCA9IGdldEF0dHJpYnV0ZShpbWcsIFNSQ1NFVF9EQVRBX0FUVFJJQlVURSk7XG5cbiAgICAgICAgaWYgKHNyYyAhPT0gaW1nLnNyYyB8fCBzcmNzZXQgIT09IGltZy5zcmNzZXQpIHtcbiAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gb3B0aW9ucy5jbGFzc2VzLnNwaW5uZXI7XG4gICAgICAgICAgdmFyIHBhcmVudCA9IGltZy5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgIHZhciBzcGlubmVyID0gY2hpbGQocGFyZW50LCBcIi5cIiArIGNsYXNzTmFtZSkgfHwgY3JlYXRlKFwic3BhblwiLCBjbGFzc05hbWUsIHBhcmVudCk7XG4gICAgICAgICAgZW50cmllcy5wdXNoKFtpbWcsIFNsaWRlLCBzcGlubmVyXSk7XG4gICAgICAgICAgaW1nLnNyYyB8fCBkaXNwbGF5KGltZywgXCJub25lXCIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrKCkge1xuICAgIGVudHJpZXMgPSBlbnRyaWVzLmZpbHRlcihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgdmFyIGRpc3RhbmNlID0gb3B0aW9ucy5wZXJQYWdlICogKChvcHRpb25zLnByZWxvYWRQYWdlcyB8fCAxKSArIDEpIC0gMTtcbiAgICAgIHJldHVybiBkYXRhWzFdLmlzV2l0aGluKFNwbGlkZTIuaW5kZXgsIGRpc3RhbmNlKSA/IGxvYWQoZGF0YSkgOiB0cnVlO1xuICAgIH0pO1xuICAgIGVudHJpZXMubGVuZ3RoIHx8IG9mZihldmVudHMpO1xuICB9XG5cbiAgZnVuY3Rpb24gbG9hZChkYXRhKSB7XG4gICAgdmFyIGltZyA9IGRhdGFbMF07XG4gICAgYWRkQ2xhc3MoZGF0YVsxXS5zbGlkZSwgQ0xBU1NfTE9BRElORyk7XG4gICAgYmluZChpbWcsIFwibG9hZCBlcnJvclwiLCBhcHBseShvbkxvYWQsIGRhdGEpKTtcbiAgICBzZXRBdHRyaWJ1dGUoaW1nLCBcInNyY1wiLCBnZXRBdHRyaWJ1dGUoaW1nLCBTUkNfREFUQV9BVFRSSUJVVEUpKTtcbiAgICBzZXRBdHRyaWJ1dGUoaW1nLCBcInNyY3NldFwiLCBnZXRBdHRyaWJ1dGUoaW1nLCBTUkNTRVRfREFUQV9BVFRSSUJVVEUpKTtcbiAgICByZW1vdmVBdHRyaWJ1dGUoaW1nLCBTUkNfREFUQV9BVFRSSUJVVEUpO1xuICAgIHJlbW92ZUF0dHJpYnV0ZShpbWcsIFNSQ1NFVF9EQVRBX0FUVFJJQlVURSk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkxvYWQoZGF0YSwgZSkge1xuICAgIHZhciBpbWcgPSBkYXRhWzBdLFxuICAgICAgICBTbGlkZSA9IGRhdGFbMV07XG4gICAgcmVtb3ZlQ2xhc3MoU2xpZGUuc2xpZGUsIENMQVNTX0xPQURJTkcpO1xuXG4gICAgaWYgKGUudHlwZSAhPT0gXCJlcnJvclwiKSB7XG4gICAgICByZW1vdmUoZGF0YVsyXSk7XG4gICAgICBkaXNwbGF5KGltZywgXCJcIik7XG4gICAgICBlbWl0KEVWRU5UX0xBWllMT0FEX0xPQURFRCwgaW1nLCBTbGlkZSk7XG4gICAgICBlbWl0KEVWRU5UX1JFU0laRSk7XG4gICAgfVxuXG4gICAgaXNTZXF1ZW50aWFsICYmIGxvYWROZXh0KCk7XG4gIH1cblxuICBmdW5jdGlvbiBsb2FkTmV4dCgpIHtcbiAgICBlbnRyaWVzLmxlbmd0aCAmJiBsb2FkKGVudHJpZXMuc2hpZnQoKSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1vdW50OiBtb3VudCxcbiAgICBkZXN0cm95OiBhcHBseShlbXB0eSwgZW50cmllcyksXG4gICAgY2hlY2s6IGNoZWNrXG4gIH07XG59XG5cbmZ1bmN0aW9uIFBhZ2luYXRpb24oU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIGV2ZW50ID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMik7XG4gIHZhciBvbiA9IGV2ZW50Lm9uLFxuICAgICAgZW1pdCA9IGV2ZW50LmVtaXQsXG4gICAgICBiaW5kID0gZXZlbnQuYmluZDtcbiAgdmFyIFNsaWRlcyA9IENvbXBvbmVudHMyLlNsaWRlcyxcbiAgICAgIEVsZW1lbnRzID0gQ29tcG9uZW50czIuRWxlbWVudHMsXG4gICAgICBDb250cm9sbGVyID0gQ29tcG9uZW50czIuQ29udHJvbGxlcjtcbiAgdmFyIGhhc0ZvY3VzID0gQ29udHJvbGxlci5oYXNGb2N1cyxcbiAgICAgIGdldEluZGV4ID0gQ29udHJvbGxlci5nZXRJbmRleCxcbiAgICAgIGdvID0gQ29udHJvbGxlci5nbztcbiAgdmFyIHJlc29sdmUgPSBDb21wb25lbnRzMi5EaXJlY3Rpb24ucmVzb2x2ZTtcbiAgdmFyIHBsYWNlaG9sZGVyID0gRWxlbWVudHMucGFnaW5hdGlvbjtcbiAgdmFyIGl0ZW1zID0gW107XG4gIHZhciBsaXN0O1xuICB2YXIgcGFnaW5hdGlvbkNsYXNzZXM7XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgZGVzdHJveSgpO1xuICAgIG9uKFtFVkVOVF9VUERBVEVELCBFVkVOVF9SRUZSRVNILCBFVkVOVF9FTkRfSU5ERVhfQ0hBTkdFRF0sIG1vdW50KTtcbiAgICB2YXIgZW5hYmxlZCA9IG9wdGlvbnMucGFnaW5hdGlvbjtcbiAgICBwbGFjZWhvbGRlciAmJiBkaXNwbGF5KHBsYWNlaG9sZGVyLCBlbmFibGVkID8gXCJcIiA6IFwibm9uZVwiKTtcblxuICAgIGlmIChlbmFibGVkKSB7XG4gICAgICBvbihbRVZFTlRfTU9WRSwgRVZFTlRfU0NST0xMLCBFVkVOVF9TQ1JPTExFRF0sIHVwZGF0ZSk7XG4gICAgICBjcmVhdGVQYWdpbmF0aW9uKCk7XG4gICAgICB1cGRhdGUoKTtcbiAgICAgIGVtaXQoRVZFTlRfUEFHSU5BVElPTl9NT1VOVEVELCB7XG4gICAgICAgIGxpc3Q6IGxpc3QsXG4gICAgICAgIGl0ZW1zOiBpdGVtc1xuICAgICAgfSwgZ2V0QXQoU3BsaWRlMi5pbmRleCkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgaWYgKGxpc3QpIHtcbiAgICAgIHJlbW92ZShwbGFjZWhvbGRlciA/IHNsaWNlKGxpc3QuY2hpbGRyZW4pIDogbGlzdCk7XG4gICAgICByZW1vdmVDbGFzcyhsaXN0LCBwYWdpbmF0aW9uQ2xhc3Nlcyk7XG4gICAgICBlbXB0eShpdGVtcyk7XG4gICAgICBsaXN0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBldmVudC5kZXN0cm95KCk7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVQYWdpbmF0aW9uKCkge1xuICAgIHZhciBsZW5ndGggPSBTcGxpZGUyLmxlbmd0aDtcbiAgICB2YXIgY2xhc3NlcyA9IG9wdGlvbnMuY2xhc3NlcyxcbiAgICAgICAgaTE4biA9IG9wdGlvbnMuaTE4bixcbiAgICAgICAgcGVyUGFnZSA9IG9wdGlvbnMucGVyUGFnZTtcbiAgICB2YXIgbWF4ID0gaGFzRm9jdXMoKSA/IENvbnRyb2xsZXIuZ2V0RW5kKCkgKyAxIDogY2VpbChsZW5ndGggLyBwZXJQYWdlKTtcbiAgICBsaXN0ID0gcGxhY2Vob2xkZXIgfHwgY3JlYXRlKFwidWxcIiwgY2xhc3Nlcy5wYWdpbmF0aW9uLCBFbGVtZW50cy50cmFjay5wYXJlbnRFbGVtZW50KTtcbiAgICBhZGRDbGFzcyhsaXN0LCBwYWdpbmF0aW9uQ2xhc3NlcyA9IENMQVNTX1BBR0lOQVRJT04gKyBcIi0tXCIgKyBnZXREaXJlY3Rpb24oKSk7XG4gICAgc2V0QXR0cmlidXRlKGxpc3QsIFJPTEUsIFwidGFibGlzdFwiKTtcbiAgICBzZXRBdHRyaWJ1dGUobGlzdCwgQVJJQV9MQUJFTCwgaTE4bi5zZWxlY3QpO1xuICAgIHNldEF0dHJpYnV0ZShsaXN0LCBBUklBX09SSUVOVEFUSU9OLCBnZXREaXJlY3Rpb24oKSA9PT0gVFRCID8gXCJ2ZXJ0aWNhbFwiIDogXCJcIik7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1heDsgaSsrKSB7XG4gICAgICB2YXIgbGkgPSBjcmVhdGUoXCJsaVwiLCBudWxsLCBsaXN0KTtcbiAgICAgIHZhciBidXR0b24gPSBjcmVhdGUoXCJidXR0b25cIiwge1xuICAgICAgICBjbGFzczogY2xhc3Nlcy5wYWdlLFxuICAgICAgICB0eXBlOiBcImJ1dHRvblwiXG4gICAgICB9LCBsaSk7XG4gICAgICB2YXIgY29udHJvbHMgPSBTbGlkZXMuZ2V0SW4oaSkubWFwKGZ1bmN0aW9uIChTbGlkZSkge1xuICAgICAgICByZXR1cm4gU2xpZGUuc2xpZGUuaWQ7XG4gICAgICB9KTtcbiAgICAgIHZhciB0ZXh0ID0gIWhhc0ZvY3VzKCkgJiYgcGVyUGFnZSA+IDEgPyBpMThuLnBhZ2VYIDogaTE4bi5zbGlkZVg7XG4gICAgICBiaW5kKGJ1dHRvbiwgXCJjbGlja1wiLCBhcHBseShvbkNsaWNrLCBpKSk7XG5cbiAgICAgIGlmIChvcHRpb25zLnBhZ2luYXRpb25LZXlib2FyZCkge1xuICAgICAgICBiaW5kKGJ1dHRvbiwgXCJrZXlkb3duXCIsIGFwcGx5KG9uS2V5ZG93biwgaSkpO1xuICAgICAgfVxuXG4gICAgICBzZXRBdHRyaWJ1dGUobGksIFJPTEUsIFwicHJlc2VudGF0aW9uXCIpO1xuICAgICAgc2V0QXR0cmlidXRlKGJ1dHRvbiwgUk9MRSwgXCJ0YWJcIik7XG4gICAgICBzZXRBdHRyaWJ1dGUoYnV0dG9uLCBBUklBX0NPTlRST0xTLCBjb250cm9scy5qb2luKFwiIFwiKSk7XG4gICAgICBzZXRBdHRyaWJ1dGUoYnV0dG9uLCBBUklBX0xBQkVMLCBmb3JtYXQodGV4dCwgaSArIDEpKTtcbiAgICAgIHNldEF0dHJpYnV0ZShidXR0b24sIFRBQl9JTkRFWCwgLTEpO1xuICAgICAgaXRlbXMucHVzaCh7XG4gICAgICAgIGxpOiBsaSxcbiAgICAgICAgYnV0dG9uOiBidXR0b24sXG4gICAgICAgIHBhZ2U6IGlcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uQ2xpY2socGFnZSkge1xuICAgIGdvKFwiPlwiICsgcGFnZSwgdHJ1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBvbktleWRvd24ocGFnZSwgZSkge1xuICAgIHZhciBsZW5ndGggPSBpdGVtcy5sZW5ndGg7XG4gICAgdmFyIGtleSA9IG5vcm1hbGl6ZUtleShlKTtcbiAgICB2YXIgZGlyID0gZ2V0RGlyZWN0aW9uKCk7XG4gICAgdmFyIG5leHRQYWdlID0gLTE7XG5cbiAgICBpZiAoa2V5ID09PSByZXNvbHZlKEFSUk9XX1JJR0hULCBmYWxzZSwgZGlyKSkge1xuICAgICAgbmV4dFBhZ2UgPSArK3BhZ2UgJSBsZW5ndGg7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09IHJlc29sdmUoQVJST1dfTEVGVCwgZmFsc2UsIGRpcikpIHtcbiAgICAgIG5leHRQYWdlID0gKC0tcGFnZSArIGxlbmd0aCkgJSBsZW5ndGg7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09IFwiSG9tZVwiKSB7XG4gICAgICBuZXh0UGFnZSA9IDA7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09IFwiRW5kXCIpIHtcbiAgICAgIG5leHRQYWdlID0gbGVuZ3RoIC0gMTtcbiAgICB9XG5cbiAgICB2YXIgaXRlbSA9IGl0ZW1zW25leHRQYWdlXTtcblxuICAgIGlmIChpdGVtKSB7XG4gICAgICBmb2N1cyhpdGVtLmJ1dHRvbik7XG4gICAgICBnbyhcIj5cIiArIG5leHRQYWdlKTtcbiAgICAgIHByZXZlbnQoZSwgdHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RGlyZWN0aW9uKCkge1xuICAgIHJldHVybiBvcHRpb25zLnBhZ2luYXRpb25EaXJlY3Rpb24gfHwgb3B0aW9ucy5kaXJlY3Rpb247XG4gIH1cblxuICBmdW5jdGlvbiBnZXRBdChpbmRleCkge1xuICAgIHJldHVybiBpdGVtc1tDb250cm9sbGVyLnRvUGFnZShpbmRleCldO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgIHZhciBwcmV2ID0gZ2V0QXQoZ2V0SW5kZXgodHJ1ZSkpO1xuICAgIHZhciBjdXJyID0gZ2V0QXQoZ2V0SW5kZXgoKSk7XG5cbiAgICBpZiAocHJldikge1xuICAgICAgdmFyIGJ1dHRvbiA9IHByZXYuYnV0dG9uO1xuICAgICAgcmVtb3ZlQ2xhc3MoYnV0dG9uLCBDTEFTU19BQ1RJVkUpO1xuICAgICAgcmVtb3ZlQXR0cmlidXRlKGJ1dHRvbiwgQVJJQV9TRUxFQ1RFRCk7XG4gICAgICBzZXRBdHRyaWJ1dGUoYnV0dG9uLCBUQUJfSU5ERVgsIC0xKTtcbiAgICB9XG5cbiAgICBpZiAoY3Vycikge1xuICAgICAgdmFyIF9idXR0b24gPSBjdXJyLmJ1dHRvbjtcbiAgICAgIGFkZENsYXNzKF9idXR0b24sIENMQVNTX0FDVElWRSk7XG4gICAgICBzZXRBdHRyaWJ1dGUoX2J1dHRvbiwgQVJJQV9TRUxFQ1RFRCwgdHJ1ZSk7XG4gICAgICBzZXRBdHRyaWJ1dGUoX2J1dHRvbiwgVEFCX0lOREVYLCBcIlwiKTtcbiAgICB9XG5cbiAgICBlbWl0KEVWRU5UX1BBR0lOQVRJT05fVVBEQVRFRCwge1xuICAgICAgbGlzdDogbGlzdCxcbiAgICAgIGl0ZW1zOiBpdGVtc1xuICAgIH0sIHByZXYsIGN1cnIpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpdGVtczogaXRlbXMsXG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3ksXG4gICAgZ2V0QXQ6IGdldEF0LFxuICAgIHVwZGF0ZTogdXBkYXRlXG4gIH07XG59XG5cbnZhciBUUklHR0VSX0tFWVMgPSBbXCIgXCIsIFwiRW50ZXJcIl07XG5cbmZ1bmN0aW9uIFN5bmMoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIGlzTmF2aWdhdGlvbiA9IG9wdGlvbnMuaXNOYXZpZ2F0aW9uLFxuICAgICAgc2xpZGVGb2N1cyA9IG9wdGlvbnMuc2xpZGVGb2N1cztcbiAgdmFyIGV2ZW50cyA9IFtdO1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIFNwbGlkZTIuc3BsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgIGlmICghdGFyZ2V0LmlzUGFyZW50KSB7XG4gICAgICAgIHN5bmMoU3BsaWRlMiwgdGFyZ2V0LnNwbGlkZSk7XG4gICAgICAgIHN5bmModGFyZ2V0LnNwbGlkZSwgU3BsaWRlMik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoaXNOYXZpZ2F0aW9uKSB7XG4gICAgICBuYXZpZ2F0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5kZXN0cm95KCk7XG4gICAgfSk7XG4gICAgZW1wdHkoZXZlbnRzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW91bnQoKSB7XG4gICAgZGVzdHJveSgpO1xuICAgIG1vdW50KCk7XG4gIH1cblxuICBmdW5jdGlvbiBzeW5jKHNwbGlkZSwgdGFyZ2V0KSB7XG4gICAgdmFyIGV2ZW50ID0gRXZlbnRJbnRlcmZhY2Uoc3BsaWRlKTtcbiAgICBldmVudC5vbihFVkVOVF9NT1ZFLCBmdW5jdGlvbiAoaW5kZXgsIHByZXYsIGRlc3QpIHtcbiAgICAgIHRhcmdldC5nbyh0YXJnZXQuaXMoTE9PUCkgPyBkZXN0IDogaW5kZXgpO1xuICAgIH0pO1xuICAgIGV2ZW50cy5wdXNoKGV2ZW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5hdmlnYXRlKCkge1xuICAgIHZhciBldmVudCA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpO1xuICAgIHZhciBvbiA9IGV2ZW50Lm9uO1xuICAgIG9uKEVWRU5UX0NMSUNLLCBvbkNsaWNrKTtcbiAgICBvbihFVkVOVF9TTElERV9LRVlET1dOLCBvbktleWRvd24pO1xuICAgIG9uKFtFVkVOVF9NT1VOVEVELCBFVkVOVF9VUERBVEVEXSwgdXBkYXRlKTtcbiAgICBldmVudHMucHVzaChldmVudCk7XG4gICAgZXZlbnQuZW1pdChFVkVOVF9OQVZJR0FUSU9OX01PVU5URUQsIFNwbGlkZTIuc3BsaWRlcyk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgc2V0QXR0cmlidXRlKENvbXBvbmVudHMyLkVsZW1lbnRzLmxpc3QsIEFSSUFfT1JJRU5UQVRJT04sIG9wdGlvbnMuZGlyZWN0aW9uID09PSBUVEIgPyBcInZlcnRpY2FsXCIgOiBcIlwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uQ2xpY2soU2xpZGUpIHtcbiAgICBTcGxpZGUyLmdvKFNsaWRlLmluZGV4KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uS2V5ZG93bihTbGlkZSwgZSkge1xuICAgIGlmIChpbmNsdWRlcyhUUklHR0VSX0tFWVMsIG5vcm1hbGl6ZUtleShlKSkpIHtcbiAgICAgIG9uQ2xpY2soU2xpZGUpO1xuICAgICAgcHJldmVudChlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHNldHVwOiBhcHBseShDb21wb25lbnRzMi5NZWRpYS5zZXQsIHtcbiAgICAgIHNsaWRlRm9jdXM6IGlzVW5kZWZpbmVkKHNsaWRlRm9jdXMpID8gaXNOYXZpZ2F0aW9uIDogc2xpZGVGb2N1c1xuICAgIH0sIHRydWUpLFxuICAgIG1vdW50OiBtb3VudCxcbiAgICBkZXN0cm95OiBkZXN0cm95LFxuICAgIHJlbW91bnQ6IHJlbW91bnRcbiAgfTtcbn1cblxuZnVuY3Rpb24gV2hlZWwoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIF9FdmVudEludGVyZmFjZTEyID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMiksXG4gICAgICBiaW5kID0gX0V2ZW50SW50ZXJmYWNlMTIuYmluZDtcblxuICB2YXIgbGFzdFRpbWUgPSAwO1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIGlmIChvcHRpb25zLndoZWVsKSB7XG4gICAgICBiaW5kKENvbXBvbmVudHMyLkVsZW1lbnRzLnRyYWNrLCBcIndoZWVsXCIsIG9uV2hlZWwsIFNDUk9MTF9MSVNURU5FUl9PUFRJT05TKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbldoZWVsKGUpIHtcbiAgICBpZiAoZS5jYW5jZWxhYmxlKSB7XG4gICAgICB2YXIgZGVsdGFZID0gZS5kZWx0YVk7XG4gICAgICB2YXIgYmFja3dhcmRzID0gZGVsdGFZIDwgMDtcbiAgICAgIHZhciB0aW1lU3RhbXAgPSB0aW1lT2YoZSk7XG5cbiAgICAgIHZhciBfbWluID0gb3B0aW9ucy53aGVlbE1pblRocmVzaG9sZCB8fCAwO1xuXG4gICAgICB2YXIgc2xlZXAgPSBvcHRpb25zLndoZWVsU2xlZXAgfHwgMDtcblxuICAgICAgaWYgKGFicyhkZWx0YVkpID4gX21pbiAmJiB0aW1lU3RhbXAgLSBsYXN0VGltZSA+IHNsZWVwKSB7XG4gICAgICAgIFNwbGlkZTIuZ28oYmFja3dhcmRzID8gXCI8XCIgOiBcIj5cIik7XG4gICAgICAgIGxhc3RUaW1lID0gdGltZVN0YW1wO1xuICAgICAgfVxuXG4gICAgICBzaG91bGRQcmV2ZW50KGJhY2t3YXJkcykgJiYgcHJldmVudChlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzaG91bGRQcmV2ZW50KGJhY2t3YXJkcykge1xuICAgIHJldHVybiAhb3B0aW9ucy5yZWxlYXNlV2hlZWwgfHwgU3BsaWRlMi5zdGF0ZS5pcyhNT1ZJTkcpIHx8IENvbXBvbmVudHMyLkNvbnRyb2xsZXIuZ2V0QWRqYWNlbnQoYmFja3dhcmRzKSAhPT0gLTE7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1vdW50OiBtb3VudFxuICB9O1xufVxuXG52YXIgU1JfUkVNT1ZBTF9ERUxBWSA9IDkwO1xuXG5mdW5jdGlvbiBMaXZlKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBfRXZlbnRJbnRlcmZhY2UxMyA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpLFxuICAgICAgb24gPSBfRXZlbnRJbnRlcmZhY2UxMy5vbjtcblxuICB2YXIgdHJhY2sgPSBDb21wb25lbnRzMi5FbGVtZW50cy50cmFjaztcbiAgdmFyIGVuYWJsZWQgPSBvcHRpb25zLmxpdmUgJiYgIW9wdGlvbnMuaXNOYXZpZ2F0aW9uO1xuICB2YXIgc3IgPSBjcmVhdGUoXCJzcGFuXCIsIENMQVNTX1NSKTtcbiAgdmFyIGludGVydmFsID0gUmVxdWVzdEludGVydmFsKFNSX1JFTU9WQUxfREVMQVksIGFwcGx5KHRvZ2dsZSwgZmFsc2UpKTtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBpZiAoZW5hYmxlZCkge1xuICAgICAgZGlzYWJsZSghQ29tcG9uZW50czIuQXV0b3BsYXkuaXNQYXVzZWQoKSk7XG4gICAgICBzZXRBdHRyaWJ1dGUodHJhY2ssIEFSSUFfQVRPTUlDLCB0cnVlKTtcbiAgICAgIHNyLnRleHRDb250ZW50ID0gXCJcXHUyMDI2XCI7XG4gICAgICBvbihFVkVOVF9BVVRPUExBWV9QTEFZLCBhcHBseShkaXNhYmxlLCB0cnVlKSk7XG4gICAgICBvbihFVkVOVF9BVVRPUExBWV9QQVVTRSwgYXBwbHkoZGlzYWJsZSwgZmFsc2UpKTtcbiAgICAgIG9uKFtFVkVOVF9NT1ZFRCwgRVZFTlRfU0NST0xMRURdLCBhcHBseSh0b2dnbGUsIHRydWUpKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB0b2dnbGUoYWN0aXZlKSB7XG4gICAgc2V0QXR0cmlidXRlKHRyYWNrLCBBUklBX0JVU1ksIGFjdGl2ZSk7XG5cbiAgICBpZiAoYWN0aXZlKSB7XG4gICAgICBhcHBlbmQodHJhY2ssIHNyKTtcbiAgICAgIGludGVydmFsLnN0YXJ0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZShzcik7XG4gICAgICBpbnRlcnZhbC5jYW5jZWwoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgIHJlbW92ZUF0dHJpYnV0ZSh0cmFjaywgW0FSSUFfTElWRSwgQVJJQV9BVE9NSUMsIEFSSUFfQlVTWV0pO1xuICAgIHJlbW92ZShzcik7XG4gIH1cblxuICBmdW5jdGlvbiBkaXNhYmxlKGRpc2FibGVkKSB7XG4gICAgaWYgKGVuYWJsZWQpIHtcbiAgICAgIHNldEF0dHJpYnV0ZSh0cmFjaywgQVJJQV9MSVZFLCBkaXNhYmxlZCA/IFwib2ZmXCIgOiBcInBvbGl0ZVwiKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1vdW50OiBtb3VudCxcbiAgICBkaXNhYmxlOiBkaXNhYmxlLFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3lcbiAgfTtcbn1cblxudmFyIENvbXBvbmVudENvbnN0cnVjdG9ycyA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgX19wcm90b19fOiBudWxsLFxuICBNZWRpYTogTWVkaWEsXG4gIERpcmVjdGlvbjogRGlyZWN0aW9uLFxuICBFbGVtZW50czogRWxlbWVudHMsXG4gIFNsaWRlczogU2xpZGVzLFxuICBMYXlvdXQ6IExheW91dCxcbiAgQ2xvbmVzOiBDbG9uZXMsXG4gIE1vdmU6IE1vdmUsXG4gIENvbnRyb2xsZXI6IENvbnRyb2xsZXIsXG4gIEFycm93czogQXJyb3dzLFxuICBBdXRvcGxheTogQXV0b3BsYXksXG4gIENvdmVyOiBDb3ZlcixcbiAgU2Nyb2xsOiBTY3JvbGwsXG4gIERyYWc6IERyYWcsXG4gIEtleWJvYXJkOiBLZXlib2FyZCxcbiAgTGF6eUxvYWQ6IExhenlMb2FkLFxuICBQYWdpbmF0aW9uOiBQYWdpbmF0aW9uLFxuICBTeW5jOiBTeW5jLFxuICBXaGVlbDogV2hlZWwsXG4gIExpdmU6IExpdmVcbn0pO1xudmFyIEkxOE4gPSB7XG4gIHByZXY6IFwiUHJldmlvdXMgc2xpZGVcIixcbiAgbmV4dDogXCJOZXh0IHNsaWRlXCIsXG4gIGZpcnN0OiBcIkdvIHRvIGZpcnN0IHNsaWRlXCIsXG4gIGxhc3Q6IFwiR28gdG8gbGFzdCBzbGlkZVwiLFxuICBzbGlkZVg6IFwiR28gdG8gc2xpZGUgJXNcIixcbiAgcGFnZVg6IFwiR28gdG8gcGFnZSAlc1wiLFxuICBwbGF5OiBcIlN0YXJ0IGF1dG9wbGF5XCIsXG4gIHBhdXNlOiBcIlBhdXNlIGF1dG9wbGF5XCIsXG4gIGNhcm91c2VsOiBcImNhcm91c2VsXCIsXG4gIHNsaWRlOiBcInNsaWRlXCIsXG4gIHNlbGVjdDogXCJTZWxlY3QgYSBzbGlkZSB0byBzaG93XCIsXG4gIHNsaWRlTGFiZWw6IFwiJXMgb2YgJXNcIlxufTtcbnZhciBERUZBVUxUUyA9IHtcbiAgdHlwZTogXCJzbGlkZVwiLFxuICByb2xlOiBcInJlZ2lvblwiLFxuICBzcGVlZDogNDAwLFxuICBwZXJQYWdlOiAxLFxuICBjbG9uZVN0YXR1czogdHJ1ZSxcbiAgYXJyb3dzOiB0cnVlLFxuICBwYWdpbmF0aW9uOiB0cnVlLFxuICBwYWdpbmF0aW9uS2V5Ym9hcmQ6IHRydWUsXG4gIGludGVydmFsOiA1ZTMsXG4gIHBhdXNlT25Ib3ZlcjogdHJ1ZSxcbiAgcGF1c2VPbkZvY3VzOiB0cnVlLFxuICByZXNldFByb2dyZXNzOiB0cnVlLFxuICBlYXNpbmc6IFwiY3ViaWMtYmV6aWVyKDAuMjUsIDEsIDAuNSwgMSlcIixcbiAgZHJhZzogdHJ1ZSxcbiAgZGlyZWN0aW9uOiBcImx0clwiLFxuICB0cmltU3BhY2U6IHRydWUsXG4gIGZvY3VzYWJsZU5vZGVzOiBcImEsIGJ1dHRvbiwgdGV4dGFyZWEsIGlucHV0LCBzZWxlY3QsIGlmcmFtZVwiLFxuICBsaXZlOiB0cnVlLFxuICBjbGFzc2VzOiBDTEFTU0VTLFxuICBpMThuOiBJMThOLFxuICByZWR1Y2VkTW90aW9uOiB7XG4gICAgc3BlZWQ6IDAsXG4gICAgcmV3aW5kU3BlZWQ6IDAsXG4gICAgYXV0b3BsYXk6IFwicGF1c2VcIlxuICB9XG59O1xuXG5mdW5jdGlvbiBGYWRlKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBTbGlkZXMgPSBDb21wb25lbnRzMi5TbGlkZXM7XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgRXZlbnRJbnRlcmZhY2UoU3BsaWRlMikub24oW0VWRU5UX01PVU5URUQsIEVWRU5UX1JFRlJFU0hdLCBpbml0KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgU2xpZGVzLmZvckVhY2goZnVuY3Rpb24gKFNsaWRlKSB7XG4gICAgICBTbGlkZS5zdHlsZShcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZVgoLVwiICsgMTAwICogU2xpZGUuaW5kZXggKyBcIiUpXCIpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnQoaW5kZXgsIGRvbmUpIHtcbiAgICBTbGlkZXMuc3R5bGUoXCJ0cmFuc2l0aW9uXCIsIFwib3BhY2l0eSBcIiArIG9wdGlvbnMuc3BlZWQgKyBcIm1zIFwiICsgb3B0aW9ucy5lYXNpbmcpO1xuICAgIG5leHRUaWNrKGRvbmUpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb3VudDogbW91bnQsXG4gICAgc3RhcnQ6IHN0YXJ0LFxuICAgIGNhbmNlbDogbm9vcFxuICB9O1xufVxuXG5mdW5jdGlvbiBTbGlkZShTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgTW92ZSA9IENvbXBvbmVudHMyLk1vdmUsXG4gICAgICBDb250cm9sbGVyID0gQ29tcG9uZW50czIuQ29udHJvbGxlcixcbiAgICAgIFNjcm9sbCA9IENvbXBvbmVudHMyLlNjcm9sbDtcbiAgdmFyIGxpc3QgPSBDb21wb25lbnRzMi5FbGVtZW50cy5saXN0O1xuICB2YXIgdHJhbnNpdGlvbiA9IGFwcGx5KHN0eWxlLCBsaXN0LCBcInRyYW5zaXRpb25cIik7XG4gIHZhciBlbmRDYWxsYmFjaztcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBFdmVudEludGVyZmFjZShTcGxpZGUyKS5iaW5kKGxpc3QsIFwidHJhbnNpdGlvbmVuZFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKGUudGFyZ2V0ID09PSBsaXN0ICYmIGVuZENhbGxiYWNrKSB7XG4gICAgICAgIGNhbmNlbCgpO1xuICAgICAgICBlbmRDYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnQoaW5kZXgsIGRvbmUpIHtcbiAgICB2YXIgZGVzdGluYXRpb24gPSBNb3ZlLnRvUG9zaXRpb24oaW5kZXgsIHRydWUpO1xuICAgIHZhciBwb3NpdGlvbiA9IE1vdmUuZ2V0UG9zaXRpb24oKTtcbiAgICB2YXIgc3BlZWQgPSBnZXRTcGVlZChpbmRleCk7XG5cbiAgICBpZiAoYWJzKGRlc3RpbmF0aW9uIC0gcG9zaXRpb24pID49IDEgJiYgc3BlZWQgPj0gMSkge1xuICAgICAgaWYgKG9wdGlvbnMudXNlU2Nyb2xsKSB7XG4gICAgICAgIFNjcm9sbC5zY3JvbGwoZGVzdGluYXRpb24sIHNwZWVkLCBmYWxzZSwgZG9uZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cmFuc2l0aW9uKFwidHJhbnNmb3JtIFwiICsgc3BlZWQgKyBcIm1zIFwiICsgb3B0aW9ucy5lYXNpbmcpO1xuICAgICAgICBNb3ZlLnRyYW5zbGF0ZShkZXN0aW5hdGlvbiwgdHJ1ZSk7XG4gICAgICAgIGVuZENhbGxiYWNrID0gZG9uZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgTW92ZS5qdW1wKGluZGV4KTtcbiAgICAgIGRvbmUoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgdHJhbnNpdGlvbihcIlwiKTtcbiAgICBTY3JvbGwuY2FuY2VsKCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRTcGVlZChpbmRleCkge1xuICAgIHZhciByZXdpbmRTcGVlZCA9IG9wdGlvbnMucmV3aW5kU3BlZWQ7XG5cbiAgICBpZiAoU3BsaWRlMi5pcyhTTElERSkgJiYgcmV3aW5kU3BlZWQpIHtcbiAgICAgIHZhciBwcmV2ID0gQ29udHJvbGxlci5nZXRJbmRleCh0cnVlKTtcbiAgICAgIHZhciBlbmQgPSBDb250cm9sbGVyLmdldEVuZCgpO1xuXG4gICAgICBpZiAocHJldiA9PT0gMCAmJiBpbmRleCA+PSBlbmQgfHwgcHJldiA+PSBlbmQgJiYgaW5kZXggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJld2luZFNwZWVkO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvcHRpb25zLnNwZWVkO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb3VudDogbW91bnQsXG4gICAgc3RhcnQ6IHN0YXJ0LFxuICAgIGNhbmNlbDogY2FuY2VsXG4gIH07XG59XG5cbnZhciBfU3BsaWRlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gX1NwbGlkZSh0YXJnZXQsIG9wdGlvbnMpIHtcbiAgICB0aGlzLmV2ZW50ID0gRXZlbnRJbnRlcmZhY2UoKTtcbiAgICB0aGlzLkNvbXBvbmVudHMgPSB7fTtcbiAgICB0aGlzLnN0YXRlID0gU3RhdGUoQ1JFQVRFRCk7XG4gICAgdGhpcy5zcGxpZGVzID0gW107XG4gICAgdGhpcy5fbyA9IHt9O1xuICAgIHRoaXMuX0UgPSB7fTtcbiAgICB2YXIgcm9vdCA9IGlzU3RyaW5nKHRhcmdldCkgPyBxdWVyeShkb2N1bWVudCwgdGFyZ2V0KSA6IHRhcmdldDtcbiAgICBhc3NlcnQocm9vdCwgcm9vdCArIFwiIGlzIGludmFsaWQuXCIpO1xuICAgIHRoaXMucm9vdCA9IHJvb3Q7XG4gICAgb3B0aW9ucyA9IG1lcmdlKHtcbiAgICAgIGxhYmVsOiBnZXRBdHRyaWJ1dGUocm9vdCwgQVJJQV9MQUJFTCkgfHwgXCJcIixcbiAgICAgIGxhYmVsbGVkYnk6IGdldEF0dHJpYnV0ZShyb290LCBBUklBX0xBQkVMTEVEQlkpIHx8IFwiXCJcbiAgICB9LCBERUZBVUxUUywgX1NwbGlkZS5kZWZhdWx0cywgb3B0aW9ucyB8fCB7fSk7XG5cbiAgICB0cnkge1xuICAgICAgbWVyZ2Uob3B0aW9ucywgSlNPTi5wYXJzZShnZXRBdHRyaWJ1dGUocm9vdCwgREFUQV9BVFRSSUJVVEUpKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgYXNzZXJ0KGZhbHNlLCBcIkludmFsaWQgSlNPTlwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9vID0gT2JqZWN0LmNyZWF0ZShtZXJnZSh7fSwgb3B0aW9ucykpO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IF9TcGxpZGUucHJvdG90eXBlO1xuXG4gIF9wcm90by5tb3VudCA9IGZ1bmN0aW9uIG1vdW50KEV4dGVuc2lvbnMsIFRyYW5zaXRpb24pIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZSxcbiAgICAgICAgQ29tcG9uZW50czIgPSB0aGlzLkNvbXBvbmVudHM7XG4gICAgYXNzZXJ0KHN0YXRlLmlzKFtDUkVBVEVELCBERVNUUk9ZRURdKSwgXCJBbHJlYWR5IG1vdW50ZWQhXCIpO1xuICAgIHN0YXRlLnNldChDUkVBVEVEKTtcbiAgICB0aGlzLl9DID0gQ29tcG9uZW50czI7XG4gICAgdGhpcy5fVCA9IFRyYW5zaXRpb24gfHwgdGhpcy5fVCB8fCAodGhpcy5pcyhGQURFKSA/IEZhZGUgOiBTbGlkZSk7XG4gICAgdGhpcy5fRSA9IEV4dGVuc2lvbnMgfHwgdGhpcy5fRTtcbiAgICB2YXIgQ29uc3RydWN0b3JzID0gYXNzaWduKHt9LCBDb21wb25lbnRDb25zdHJ1Y3RvcnMsIHRoaXMuX0UsIHtcbiAgICAgIFRyYW5zaXRpb246IHRoaXMuX1RcbiAgICB9KTtcbiAgICBmb3JPd24oQ29uc3RydWN0b3JzLCBmdW5jdGlvbiAoQ29tcG9uZW50LCBrZXkpIHtcbiAgICAgIHZhciBjb21wb25lbnQgPSBDb21wb25lbnQoX3RoaXMsIENvbXBvbmVudHMyLCBfdGhpcy5fbyk7XG4gICAgICBDb21wb25lbnRzMltrZXldID0gY29tcG9uZW50O1xuICAgICAgY29tcG9uZW50LnNldHVwICYmIGNvbXBvbmVudC5zZXR1cCgpO1xuICAgIH0pO1xuICAgIGZvck93bihDb21wb25lbnRzMiwgZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgY29tcG9uZW50Lm1vdW50ICYmIGNvbXBvbmVudC5tb3VudCgpO1xuICAgIH0pO1xuICAgIHRoaXMuZW1pdChFVkVOVF9NT1VOVEVEKTtcbiAgICBhZGRDbGFzcyh0aGlzLnJvb3QsIENMQVNTX0lOSVRJQUxJWkVEKTtcbiAgICBzdGF0ZS5zZXQoSURMRSk7XG4gICAgdGhpcy5lbWl0KEVWRU5UX1JFQURZKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBfcHJvdG8uc3luYyA9IGZ1bmN0aW9uIHN5bmMoc3BsaWRlKSB7XG4gICAgdGhpcy5zcGxpZGVzLnB1c2goe1xuICAgICAgc3BsaWRlOiBzcGxpZGVcbiAgICB9KTtcbiAgICBzcGxpZGUuc3BsaWRlcy5wdXNoKHtcbiAgICAgIHNwbGlkZTogdGhpcyxcbiAgICAgIGlzUGFyZW50OiB0cnVlXG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5zdGF0ZS5pcyhJRExFKSkge1xuICAgICAgdGhpcy5fQy5TeW5jLnJlbW91bnQoKTtcblxuICAgICAgc3BsaWRlLkNvbXBvbmVudHMuU3luYy5yZW1vdW50KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgX3Byb3RvLmdvID0gZnVuY3Rpb24gZ28oY29udHJvbCkge1xuICAgIHRoaXMuX0MuQ29udHJvbGxlci5nbyhjb250cm9sKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIF9wcm90by5vbiA9IGZ1bmN0aW9uIG9uKGV2ZW50cywgY2FsbGJhY2spIHtcbiAgICB0aGlzLmV2ZW50Lm9uKGV2ZW50cywgY2FsbGJhY2spO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIF9wcm90by5vZmYgPSBmdW5jdGlvbiBvZmYoZXZlbnRzKSB7XG4gICAgdGhpcy5ldmVudC5vZmYoZXZlbnRzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBfcHJvdG8uZW1pdCA9IGZ1bmN0aW9uIGVtaXQoZXZlbnQpIHtcbiAgICB2YXIgX3RoaXMkZXZlbnQ7XG5cbiAgICAoX3RoaXMkZXZlbnQgPSB0aGlzLmV2ZW50KS5lbWl0LmFwcGx5KF90aGlzJGV2ZW50LCBbZXZlbnRdLmNvbmNhdChzbGljZShhcmd1bWVudHMsIDEpKSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBfcHJvdG8uYWRkID0gZnVuY3Rpb24gYWRkKHNsaWRlcywgaW5kZXgpIHtcbiAgICB0aGlzLl9DLlNsaWRlcy5hZGQoc2xpZGVzLCBpbmRleCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBfcHJvdG8ucmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKG1hdGNoZXIpIHtcbiAgICB0aGlzLl9DLlNsaWRlcy5yZW1vdmUobWF0Y2hlcik7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBfcHJvdG8uaXMgPSBmdW5jdGlvbiBpcyh0eXBlKSB7XG4gICAgcmV0dXJuIHRoaXMuX28udHlwZSA9PT0gdHlwZTtcbiAgfTtcblxuICBfcHJvdG8ucmVmcmVzaCA9IGZ1bmN0aW9uIHJlZnJlc2goKSB7XG4gICAgdGhpcy5lbWl0KEVWRU5UX1JFRlJFU0gpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIF9wcm90by5kZXN0cm95ID0gZnVuY3Rpb24gZGVzdHJveShjb21wbGV0ZWx5KSB7XG4gICAgaWYgKGNvbXBsZXRlbHkgPT09IHZvaWQgMCkge1xuICAgICAgY29tcGxldGVseSA9IHRydWU7XG4gICAgfVxuXG4gICAgdmFyIGV2ZW50ID0gdGhpcy5ldmVudCxcbiAgICAgICAgc3RhdGUgPSB0aGlzLnN0YXRlO1xuXG4gICAgaWYgKHN0YXRlLmlzKENSRUFURUQpKSB7XG4gICAgICBFdmVudEludGVyZmFjZSh0aGlzKS5vbihFVkVOVF9SRUFEWSwgdGhpcy5kZXN0cm95LmJpbmQodGhpcywgY29tcGxldGVseSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3JPd24odGhpcy5fQywgZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgICBjb21wb25lbnQuZGVzdHJveSAmJiBjb21wb25lbnQuZGVzdHJveShjb21wbGV0ZWx5KTtcbiAgICAgIH0sIHRydWUpO1xuICAgICAgZXZlbnQuZW1pdChFVkVOVF9ERVNUUk9ZKTtcbiAgICAgIGV2ZW50LmRlc3Ryb3koKTtcbiAgICAgIGNvbXBsZXRlbHkgJiYgZW1wdHkodGhpcy5zcGxpZGVzKTtcbiAgICAgIHN0YXRlLnNldChERVNUUk9ZRUQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhfU3BsaWRlLCBbe1xuICAgIGtleTogXCJvcHRpb25zXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fbztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuX0MuTWVkaWEuc2V0KG9wdGlvbnMsIHRydWUsIHRydWUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJsZW5ndGhcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9DLlNsaWRlcy5nZXRMZW5ndGgodHJ1ZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluZGV4XCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fQy5Db250cm9sbGVyLmdldEluZGV4KCk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIF9TcGxpZGU7XG59KCk7XG5cbnZhciBTcGxpZGUgPSBfU3BsaWRlO1xuU3BsaWRlLmRlZmF1bHRzID0ge307XG5TcGxpZGUuU1RBVEVTID0gU1RBVEVTO1xudmFyIENMQVNTX1JFTkRFUkVEID0gXCJpcy1yZW5kZXJlZFwiO1xudmFyIFJFTkRFUkVSX0RFRkFVTFRfQ09ORklHID0ge1xuICBsaXN0VGFnOiBcInVsXCIsXG4gIHNsaWRlVGFnOiBcImxpXCJcbn07XG5cbnZhciBTdHlsZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFN0eWxlKGlkLCBvcHRpb25zKSB7XG4gICAgdGhpcy5zdHlsZXMgPSB7fTtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuXG4gIHZhciBfcHJvdG8yID0gU3R5bGUucHJvdG90eXBlO1xuXG4gIF9wcm90bzIucnVsZSA9IGZ1bmN0aW9uIHJ1bGUoc2VsZWN0b3IsIHByb3AsIHZhbHVlLCBicmVha3BvaW50KSB7XG4gICAgYnJlYWtwb2ludCA9IGJyZWFrcG9pbnQgfHwgXCJkZWZhdWx0XCI7XG4gICAgdmFyIHNlbGVjdG9ycyA9IHRoaXMuc3R5bGVzW2JyZWFrcG9pbnRdID0gdGhpcy5zdHlsZXNbYnJlYWtwb2ludF0gfHwge307XG4gICAgdmFyIHN0eWxlcyA9IHNlbGVjdG9yc1tzZWxlY3Rvcl0gPSBzZWxlY3RvcnNbc2VsZWN0b3JdIHx8IHt9O1xuICAgIHN0eWxlc1twcm9wXSA9IHZhbHVlO1xuICB9O1xuXG4gIF9wcm90bzIuYnVpbGQgPSBmdW5jdGlvbiBidWlsZCgpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHZhciBjc3MgPSBcIlwiO1xuXG4gICAgaWYgKHRoaXMuc3R5bGVzLmRlZmF1bHQpIHtcbiAgICAgIGNzcyArPSB0aGlzLmJ1aWxkU2VsZWN0b3JzKHRoaXMuc3R5bGVzLmRlZmF1bHQpO1xuICAgIH1cblxuICAgIE9iamVjdC5rZXlzKHRoaXMuc3R5bGVzKS5zb3J0KGZ1bmN0aW9uIChuLCBtKSB7XG4gICAgICByZXR1cm4gX3RoaXMyLm9wdGlvbnMubWVkaWFRdWVyeSA9PT0gXCJtaW5cIiA/ICtuIC0gK20gOiArbSAtICtuO1xuICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKGJyZWFrcG9pbnQpIHtcbiAgICAgIGlmIChicmVha3BvaW50ICE9PSBcImRlZmF1bHRcIikge1xuICAgICAgICBjc3MgKz0gXCJAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiBcIiArIGJyZWFrcG9pbnQgKyBcInB4KSB7XCI7XG4gICAgICAgIGNzcyArPSBfdGhpczIuYnVpbGRTZWxlY3RvcnMoX3RoaXMyLnN0eWxlc1ticmVha3BvaW50XSk7XG4gICAgICAgIGNzcyArPSBcIn1cIjtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gY3NzO1xuICB9O1xuXG4gIF9wcm90bzIuYnVpbGRTZWxlY3RvcnMgPSBmdW5jdGlvbiBidWlsZFNlbGVjdG9ycyhzZWxlY3RvcnMpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIHZhciBjc3MgPSBcIlwiO1xuICAgIGZvck93bihzZWxlY3RvcnMsIGZ1bmN0aW9uIChzdHlsZXMsIHNlbGVjdG9yKSB7XG4gICAgICBzZWxlY3RvciA9IChcIiNcIiArIF90aGlzMy5pZCArIFwiIFwiICsgc2VsZWN0b3IpLnRyaW0oKTtcbiAgICAgIGNzcyArPSBzZWxlY3RvciArIFwiIHtcIjtcbiAgICAgIGZvck93bihzdHlsZXMsIGZ1bmN0aW9uICh2YWx1ZSwgcHJvcCkge1xuICAgICAgICBpZiAodmFsdWUgfHwgdmFsdWUgPT09IDApIHtcbiAgICAgICAgICBjc3MgKz0gcHJvcCArIFwiOiBcIiArIHZhbHVlICsgXCI7XCI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY3NzICs9IFwifVwiO1xuICAgIH0pO1xuICAgIHJldHVybiBjc3M7XG4gIH07XG5cbiAgcmV0dXJuIFN0eWxlO1xufSgpO1xuXG52YXIgU3BsaWRlUmVuZGVyZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTcGxpZGVSZW5kZXJlcihjb250ZW50cywgb3B0aW9ucywgY29uZmlnLCBkZWZhdWx0cykge1xuICAgIHRoaXMuc2xpZGVzID0gW107XG4gICAgdGhpcy5vcHRpb25zID0ge307XG4gICAgdGhpcy5icmVha3BvaW50cyA9IFtdO1xuICAgIG1lcmdlKERFRkFVTFRTLCBkZWZhdWx0cyB8fCB7fSk7XG4gICAgbWVyZ2UobWVyZ2UodGhpcy5vcHRpb25zLCBERUZBVUxUUyksIG9wdGlvbnMgfHwge30pO1xuICAgIHRoaXMuY29udGVudHMgPSBjb250ZW50cztcbiAgICB0aGlzLmNvbmZpZyA9IGFzc2lnbih7fSwgUkVOREVSRVJfREVGQVVMVF9DT05GSUcsIGNvbmZpZyB8fCB7fSk7XG4gICAgdGhpcy5pZCA9IHRoaXMuY29uZmlnLmlkIHx8IHVuaXF1ZUlkKFwic3BsaWRlXCIpO1xuICAgIHRoaXMuU3R5bGUgPSBuZXcgU3R5bGUodGhpcy5pZCwgdGhpcy5vcHRpb25zKTtcbiAgICB0aGlzLkRpcmVjdGlvbiA9IERpcmVjdGlvbihudWxsLCBudWxsLCB0aGlzLm9wdGlvbnMpO1xuICAgIGFzc2VydCh0aGlzLmNvbnRlbnRzLmxlbmd0aCwgXCJQcm92aWRlIGF0IGxlYXN0IDEgY29udGVudC5cIik7XG4gICAgdGhpcy5pbml0KCk7XG4gIH1cblxuICBTcGxpZGVSZW5kZXJlci5jbGVhbiA9IGZ1bmN0aW9uIGNsZWFuKHNwbGlkZSkge1xuICAgIHZhciBfRXZlbnRJbnRlcmZhY2UxNCA9IEV2ZW50SW50ZXJmYWNlKHNwbGlkZSksXG4gICAgICAgIG9uID0gX0V2ZW50SW50ZXJmYWNlMTQub247XG5cbiAgICB2YXIgcm9vdCA9IHNwbGlkZS5yb290O1xuICAgIHZhciBjbG9uZXMgPSBxdWVyeUFsbChyb290LCBcIi5cIiArIENMQVNTX0NMT05FKTtcbiAgICBvbihFVkVOVF9NT1VOVEVELCBmdW5jdGlvbiAoKSB7XG4gICAgICByZW1vdmUoY2hpbGQocm9vdCwgXCJzdHlsZVwiKSk7XG4gICAgfSk7XG4gICAgcmVtb3ZlKGNsb25lcyk7XG4gIH07XG5cbiAgdmFyIF9wcm90bzMgPSBTcGxpZGVSZW5kZXJlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvMy5pbml0ID0gZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB0aGlzLnBhcnNlQnJlYWtwb2ludHMoKTtcbiAgICB0aGlzLmluaXRTbGlkZXMoKTtcbiAgICB0aGlzLnJlZ2lzdGVyUm9vdFN0eWxlcygpO1xuICAgIHRoaXMucmVnaXN0ZXJUcmFja1N0eWxlcygpO1xuICAgIHRoaXMucmVnaXN0ZXJTbGlkZVN0eWxlcygpO1xuICAgIHRoaXMucmVnaXN0ZXJMaXN0U3R5bGVzKCk7XG4gIH07XG5cbiAgX3Byb3RvMy5pbml0U2xpZGVzID0gZnVuY3Rpb24gaW5pdFNsaWRlcygpIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgIHB1c2godGhpcy5zbGlkZXMsIHRoaXMuY29udGVudHMubWFwKGZ1bmN0aW9uIChjb250ZW50LCBpbmRleCkge1xuICAgICAgY29udGVudCA9IGlzU3RyaW5nKGNvbnRlbnQpID8ge1xuICAgICAgICBodG1sOiBjb250ZW50XG4gICAgICB9IDogY29udGVudDtcbiAgICAgIGNvbnRlbnQuc3R5bGVzID0gY29udGVudC5zdHlsZXMgfHwge307XG4gICAgICBjb250ZW50LmF0dHJzID0gY29udGVudC5hdHRycyB8fCB7fTtcblxuICAgICAgX3RoaXM0LmNvdmVyKGNvbnRlbnQpO1xuXG4gICAgICB2YXIgY2xhc3NlcyA9IF90aGlzNC5vcHRpb25zLmNsYXNzZXMuc2xpZGUgKyBcIiBcIiArIChpbmRleCA9PT0gMCA/IENMQVNTX0FDVElWRSA6IFwiXCIpO1xuICAgICAgYXNzaWduKGNvbnRlbnQuYXR0cnMsIHtcbiAgICAgICAgY2xhc3M6IChjbGFzc2VzICsgXCIgXCIgKyAoY29udGVudC5hdHRycy5jbGFzcyB8fCBcIlwiKSkudHJpbSgpLFxuICAgICAgICBzdHlsZTogX3RoaXM0LmJ1aWxkU3R5bGVzKGNvbnRlbnQuc3R5bGVzKVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KSk7XG5cbiAgICBpZiAodGhpcy5pc0xvb3AoKSkge1xuICAgICAgdGhpcy5nZW5lcmF0ZUNsb25lcyh0aGlzLnNsaWRlcyk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90bzMucmVnaXN0ZXJSb290U3R5bGVzID0gZnVuY3Rpb24gcmVnaXN0ZXJSb290U3R5bGVzKCkge1xuICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgdGhpcy5icmVha3BvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmMikge1xuICAgICAgdmFyIHdpZHRoID0gX3JlZjJbMF0sXG4gICAgICAgICAgb3B0aW9ucyA9IF9yZWYyWzFdO1xuXG4gICAgICBfdGhpczUuU3R5bGUucnVsZShcIiBcIiwgXCJtYXgtd2lkdGhcIiwgdW5pdChvcHRpb25zLndpZHRoKSwgd2lkdGgpO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90bzMucmVnaXN0ZXJUcmFja1N0eWxlcyA9IGZ1bmN0aW9uIHJlZ2lzdGVyVHJhY2tTdHlsZXMoKSB7XG4gICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICB2YXIgU3R5bGUyID0gdGhpcy5TdHlsZTtcbiAgICB2YXIgc2VsZWN0b3IgPSBcIi5cIiArIENMQVNTX1RSQUNLO1xuICAgIHRoaXMuYnJlYWtwb2ludHMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZjMpIHtcbiAgICAgIHZhciB3aWR0aCA9IF9yZWYzWzBdLFxuICAgICAgICAgIG9wdGlvbnMgPSBfcmVmM1sxXTtcbiAgICAgIFN0eWxlMi5ydWxlKHNlbGVjdG9yLCBfdGhpczYucmVzb2x2ZShcInBhZGRpbmdMZWZ0XCIpLCBfdGhpczYuY3NzUGFkZGluZyhvcHRpb25zLCBmYWxzZSksIHdpZHRoKTtcbiAgICAgIFN0eWxlMi5ydWxlKHNlbGVjdG9yLCBfdGhpczYucmVzb2x2ZShcInBhZGRpbmdSaWdodFwiKSwgX3RoaXM2LmNzc1BhZGRpbmcob3B0aW9ucywgdHJ1ZSksIHdpZHRoKTtcbiAgICAgIFN0eWxlMi5ydWxlKHNlbGVjdG9yLCBcImhlaWdodFwiLCBfdGhpczYuY3NzVHJhY2tIZWlnaHQob3B0aW9ucyksIHdpZHRoKTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8zLnJlZ2lzdGVyTGlzdFN0eWxlcyA9IGZ1bmN0aW9uIHJlZ2lzdGVyTGlzdFN0eWxlcygpIHtcbiAgICB2YXIgX3RoaXM3ID0gdGhpcztcblxuICAgIHZhciBTdHlsZTIgPSB0aGlzLlN0eWxlO1xuICAgIHZhciBzZWxlY3RvciA9IFwiLlwiICsgQ0xBU1NfTElTVDtcbiAgICB0aGlzLmJyZWFrcG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKF9yZWY0KSB7XG4gICAgICB2YXIgd2lkdGggPSBfcmVmNFswXSxcbiAgICAgICAgICBvcHRpb25zID0gX3JlZjRbMV07XG4gICAgICBTdHlsZTIucnVsZShzZWxlY3RvciwgXCJ0cmFuc2Zvcm1cIiwgX3RoaXM3LmJ1aWxkVHJhbnNsYXRlKG9wdGlvbnMpLCB3aWR0aCk7XG5cbiAgICAgIGlmICghX3RoaXM3LmNzc1NsaWRlSGVpZ2h0KG9wdGlvbnMpKSB7XG4gICAgICAgIFN0eWxlMi5ydWxlKHNlbGVjdG9yLCBcImFzcGVjdC1yYXRpb1wiLCBfdGhpczcuY3NzQXNwZWN0UmF0aW8ob3B0aW9ucyksIHdpZHRoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8zLnJlZ2lzdGVyU2xpZGVTdHlsZXMgPSBmdW5jdGlvbiByZWdpc3RlclNsaWRlU3R5bGVzKCkge1xuICAgIHZhciBfdGhpczggPSB0aGlzO1xuXG4gICAgdmFyIFN0eWxlMiA9IHRoaXMuU3R5bGU7XG4gICAgdmFyIHNlbGVjdG9yID0gXCIuXCIgKyBDTEFTU19TTElERTtcbiAgICB0aGlzLmJyZWFrcG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKF9yZWY1KSB7XG4gICAgICB2YXIgd2lkdGggPSBfcmVmNVswXSxcbiAgICAgICAgICBvcHRpb25zID0gX3JlZjVbMV07XG4gICAgICBTdHlsZTIucnVsZShzZWxlY3RvciwgXCJ3aWR0aFwiLCBfdGhpczguY3NzU2xpZGVXaWR0aChvcHRpb25zKSwgd2lkdGgpO1xuICAgICAgU3R5bGUyLnJ1bGUoc2VsZWN0b3IsIFwiaGVpZ2h0XCIsIF90aGlzOC5jc3NTbGlkZUhlaWdodChvcHRpb25zKSB8fCBcIjEwMCVcIiwgd2lkdGgpO1xuICAgICAgU3R5bGUyLnJ1bGUoc2VsZWN0b3IsIF90aGlzOC5yZXNvbHZlKFwibWFyZ2luUmlnaHRcIiksIHVuaXQob3B0aW9ucy5nYXApIHx8IFwiMHB4XCIsIHdpZHRoKTtcbiAgICAgIFN0eWxlMi5ydWxlKHNlbGVjdG9yICsgXCIgPiBpbWdcIiwgXCJkaXNwbGF5XCIsIG9wdGlvbnMuY292ZXIgPyBcIm5vbmVcIiA6IFwiaW5saW5lXCIsIHdpZHRoKTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8zLmJ1aWxkVHJhbnNsYXRlID0gZnVuY3Rpb24gYnVpbGRUcmFuc2xhdGUob3B0aW9ucykge1xuICAgIHZhciBfdGhpcyREaXJlY3Rpb24gPSB0aGlzLkRpcmVjdGlvbixcbiAgICAgICAgcmVzb2x2ZSA9IF90aGlzJERpcmVjdGlvbi5yZXNvbHZlLFxuICAgICAgICBvcmllbnQgPSBfdGhpcyREaXJlY3Rpb24ub3JpZW50O1xuICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICB2YWx1ZXMucHVzaCh0aGlzLmNzc09mZnNldENsb25lcyhvcHRpb25zKSk7XG4gICAgdmFsdWVzLnB1c2godGhpcy5jc3NPZmZzZXRHYXBzKG9wdGlvbnMpKTtcblxuICAgIGlmICh0aGlzLmlzQ2VudGVyKG9wdGlvbnMpKSB7XG4gICAgICB2YWx1ZXMucHVzaCh0aGlzLmJ1aWxkQ3NzVmFsdWUob3JpZW50KC01MCksIFwiJVwiKSk7XG4gICAgICB2YWx1ZXMucHVzaC5hcHBseSh2YWx1ZXMsIHRoaXMuY3NzT2Zmc2V0Q2VudGVyKG9wdGlvbnMpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWVzLmZpbHRlcihCb29sZWFuKS5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gXCJ0cmFuc2xhdGVcIiArIHJlc29sdmUoXCJYXCIpICsgXCIoXCIgKyB2YWx1ZSArIFwiKVwiO1xuICAgIH0pLmpvaW4oXCIgXCIpO1xuICB9O1xuXG4gIF9wcm90bzMuY3NzT2Zmc2V0Q2xvbmVzID0gZnVuY3Rpb24gY3NzT2Zmc2V0Q2xvbmVzKG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXMkRGlyZWN0aW9uMiA9IHRoaXMuRGlyZWN0aW9uLFxuICAgICAgICByZXNvbHZlID0gX3RoaXMkRGlyZWN0aW9uMi5yZXNvbHZlLFxuICAgICAgICBvcmllbnQgPSBfdGhpcyREaXJlY3Rpb24yLm9yaWVudDtcbiAgICB2YXIgY2xvbmVDb3VudCA9IHRoaXMuZ2V0Q2xvbmVDb3VudCgpO1xuXG4gICAgaWYgKHRoaXMuaXNGaXhlZFdpZHRoKG9wdGlvbnMpKSB7XG4gICAgICB2YXIgX3RoaXMkcGFyc2VDc3NWYWx1ZSA9IHRoaXMucGFyc2VDc3NWYWx1ZShvcHRpb25zW3Jlc29sdmUoXCJmaXhlZFdpZHRoXCIpXSksXG4gICAgICAgICAgdmFsdWUgPSBfdGhpcyRwYXJzZUNzc1ZhbHVlLnZhbHVlLFxuICAgICAgICAgIHVuaXQyID0gX3RoaXMkcGFyc2VDc3NWYWx1ZS51bml0O1xuXG4gICAgICByZXR1cm4gdGhpcy5idWlsZENzc1ZhbHVlKG9yaWVudCh2YWx1ZSkgKiBjbG9uZUNvdW50LCB1bml0Mik7XG4gICAgfVxuXG4gICAgdmFyIHBlcmNlbnQgPSAxMDAgKiBjbG9uZUNvdW50IC8gb3B0aW9ucy5wZXJQYWdlO1xuICAgIHJldHVybiBvcmllbnQocGVyY2VudCkgKyBcIiVcIjtcbiAgfTtcblxuICBfcHJvdG8zLmNzc09mZnNldENlbnRlciA9IGZ1bmN0aW9uIGNzc09mZnNldENlbnRlcihvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzJERpcmVjdGlvbjMgPSB0aGlzLkRpcmVjdGlvbixcbiAgICAgICAgcmVzb2x2ZSA9IF90aGlzJERpcmVjdGlvbjMucmVzb2x2ZSxcbiAgICAgICAgb3JpZW50ID0gX3RoaXMkRGlyZWN0aW9uMy5vcmllbnQ7XG5cbiAgICBpZiAodGhpcy5pc0ZpeGVkV2lkdGgob3B0aW9ucykpIHtcbiAgICAgIHZhciBfdGhpcyRwYXJzZUNzc1ZhbHVlMiA9IHRoaXMucGFyc2VDc3NWYWx1ZShvcHRpb25zW3Jlc29sdmUoXCJmaXhlZFdpZHRoXCIpXSksXG4gICAgICAgICAgdmFsdWUgPSBfdGhpcyRwYXJzZUNzc1ZhbHVlMi52YWx1ZSxcbiAgICAgICAgICB1bml0MiA9IF90aGlzJHBhcnNlQ3NzVmFsdWUyLnVuaXQ7XG5cbiAgICAgIHJldHVybiBbdGhpcy5idWlsZENzc1ZhbHVlKG9yaWVudCh2YWx1ZSAvIDIpLCB1bml0MildO1xuICAgIH1cblxuICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICB2YXIgcGVyUGFnZSA9IG9wdGlvbnMucGVyUGFnZSxcbiAgICAgICAgZ2FwID0gb3B0aW9ucy5nYXA7XG4gICAgdmFsdWVzLnB1c2gob3JpZW50KDUwIC8gcGVyUGFnZSkgKyBcIiVcIik7XG5cbiAgICBpZiAoZ2FwKSB7XG4gICAgICB2YXIgX3RoaXMkcGFyc2VDc3NWYWx1ZTMgPSB0aGlzLnBhcnNlQ3NzVmFsdWUoZ2FwKSxcbiAgICAgICAgICBfdmFsdWUgPSBfdGhpcyRwYXJzZUNzc1ZhbHVlMy52YWx1ZSxcbiAgICAgICAgICBfdW5pdCA9IF90aGlzJHBhcnNlQ3NzVmFsdWUzLnVuaXQ7XG5cbiAgICAgIHZhciBnYXBPZmZzZXQgPSAoX3ZhbHVlIC8gcGVyUGFnZSAtIF92YWx1ZSkgLyAyO1xuICAgICAgdmFsdWVzLnB1c2godGhpcy5idWlsZENzc1ZhbHVlKG9yaWVudChnYXBPZmZzZXQpLCBfdW5pdCkpO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH07XG5cbiAgX3Byb3RvMy5jc3NPZmZzZXRHYXBzID0gZnVuY3Rpb24gY3NzT2Zmc2V0R2FwcyhvcHRpb25zKSB7XG4gICAgdmFyIGNsb25lQ291bnQgPSB0aGlzLmdldENsb25lQ291bnQoKTtcblxuICAgIGlmIChjbG9uZUNvdW50ICYmIG9wdGlvbnMuZ2FwKSB7XG4gICAgICB2YXIgb3JpZW50ID0gdGhpcy5EaXJlY3Rpb24ub3JpZW50O1xuXG4gICAgICB2YXIgX3RoaXMkcGFyc2VDc3NWYWx1ZTQgPSB0aGlzLnBhcnNlQ3NzVmFsdWUob3B0aW9ucy5nYXApLFxuICAgICAgICAgIHZhbHVlID0gX3RoaXMkcGFyc2VDc3NWYWx1ZTQudmFsdWUsXG4gICAgICAgICAgdW5pdDIgPSBfdGhpcyRwYXJzZUNzc1ZhbHVlNC51bml0O1xuXG4gICAgICBpZiAodGhpcy5pc0ZpeGVkV2lkdGgob3B0aW9ucykpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRDc3NWYWx1ZShvcmllbnQodmFsdWUgKiBjbG9uZUNvdW50KSwgdW5pdDIpO1xuICAgICAgfVxuXG4gICAgICB2YXIgcGVyUGFnZSA9IG9wdGlvbnMucGVyUGFnZTtcbiAgICAgIHZhciBnYXBzID0gY2xvbmVDb3VudCAvIHBlclBhZ2U7XG4gICAgICByZXR1cm4gdGhpcy5idWlsZENzc1ZhbHVlKG9yaWVudChnYXBzICogdmFsdWUpLCB1bml0Mik7XG4gICAgfVxuXG4gICAgcmV0dXJuIFwiXCI7XG4gIH07XG5cbiAgX3Byb3RvMy5yZXNvbHZlID0gZnVuY3Rpb24gcmVzb2x2ZShwcm9wKSB7XG4gICAgcmV0dXJuIGNhbWVsVG9LZWJhYih0aGlzLkRpcmVjdGlvbi5yZXNvbHZlKHByb3ApKTtcbiAgfTtcblxuICBfcHJvdG8zLmNzc1BhZGRpbmcgPSBmdW5jdGlvbiBjc3NQYWRkaW5nKG9wdGlvbnMsIHJpZ2h0KSB7XG4gICAgdmFyIHBhZGRpbmcgPSBvcHRpb25zLnBhZGRpbmc7XG4gICAgdmFyIHByb3AgPSB0aGlzLkRpcmVjdGlvbi5yZXNvbHZlKHJpZ2h0ID8gXCJyaWdodFwiIDogXCJsZWZ0XCIsIHRydWUpO1xuICAgIHJldHVybiBwYWRkaW5nICYmIHVuaXQocGFkZGluZ1twcm9wXSB8fCAoaXNPYmplY3QocGFkZGluZykgPyAwIDogcGFkZGluZykpIHx8IFwiMHB4XCI7XG4gIH07XG5cbiAgX3Byb3RvMy5jc3NUcmFja0hlaWdodCA9IGZ1bmN0aW9uIGNzc1RyYWNrSGVpZ2h0KG9wdGlvbnMpIHtcbiAgICB2YXIgaGVpZ2h0ID0gXCJcIjtcblxuICAgIGlmICh0aGlzLmlzVmVydGljYWwoKSkge1xuICAgICAgaGVpZ2h0ID0gdGhpcy5jc3NIZWlnaHQob3B0aW9ucyk7XG4gICAgICBhc3NlcnQoaGVpZ2h0LCAnXCJoZWlnaHRcIiBpcyBtaXNzaW5nLicpO1xuICAgICAgaGVpZ2h0ID0gXCJjYWxjKFwiICsgaGVpZ2h0ICsgXCIgLSBcIiArIHRoaXMuY3NzUGFkZGluZyhvcHRpb25zLCBmYWxzZSkgKyBcIiAtIFwiICsgdGhpcy5jc3NQYWRkaW5nKG9wdGlvbnMsIHRydWUpICsgXCIpXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhlaWdodDtcbiAgfTtcblxuICBfcHJvdG8zLmNzc0hlaWdodCA9IGZ1bmN0aW9uIGNzc0hlaWdodChvcHRpb25zKSB7XG4gICAgcmV0dXJuIHVuaXQob3B0aW9ucy5oZWlnaHQpO1xuICB9O1xuXG4gIF9wcm90bzMuY3NzU2xpZGVXaWR0aCA9IGZ1bmN0aW9uIGNzc1NsaWRlV2lkdGgob3B0aW9ucykge1xuICAgIHJldHVybiBvcHRpb25zLmF1dG9XaWR0aCA/IFwiXCIgOiB1bml0KG9wdGlvbnMuZml4ZWRXaWR0aCkgfHwgKHRoaXMuaXNWZXJ0aWNhbCgpID8gXCJcIiA6IHRoaXMuY3NzU2xpZGVTaXplKG9wdGlvbnMpKTtcbiAgfTtcblxuICBfcHJvdG8zLmNzc1NsaWRlSGVpZ2h0ID0gZnVuY3Rpb24gY3NzU2xpZGVIZWlnaHQob3B0aW9ucykge1xuICAgIHJldHVybiB1bml0KG9wdGlvbnMuZml4ZWRIZWlnaHQpIHx8ICh0aGlzLmlzVmVydGljYWwoKSA/IG9wdGlvbnMuYXV0b0hlaWdodCA/IFwiXCIgOiB0aGlzLmNzc1NsaWRlU2l6ZShvcHRpb25zKSA6IHRoaXMuY3NzSGVpZ2h0KG9wdGlvbnMpKTtcbiAgfTtcblxuICBfcHJvdG8zLmNzc1NsaWRlU2l6ZSA9IGZ1bmN0aW9uIGNzc1NsaWRlU2l6ZShvcHRpb25zKSB7XG4gICAgdmFyIGdhcCA9IHVuaXQob3B0aW9ucy5nYXApO1xuICAgIHJldHVybiBcImNhbGMoKDEwMCVcIiArIChnYXAgJiYgXCIgKyBcIiArIGdhcCkgKyBcIikvXCIgKyAob3B0aW9ucy5wZXJQYWdlIHx8IDEpICsgKGdhcCAmJiBcIiAtIFwiICsgZ2FwKSArIFwiKVwiO1xuICB9O1xuXG4gIF9wcm90bzMuY3NzQXNwZWN0UmF0aW8gPSBmdW5jdGlvbiBjc3NBc3BlY3RSYXRpbyhvcHRpb25zKSB7XG4gICAgdmFyIGhlaWdodFJhdGlvID0gb3B0aW9ucy5oZWlnaHRSYXRpbztcbiAgICByZXR1cm4gaGVpZ2h0UmF0aW8gPyBcIlwiICsgMSAvIGhlaWdodFJhdGlvIDogXCJcIjtcbiAgfTtcblxuICBfcHJvdG8zLmJ1aWxkQ3NzVmFsdWUgPSBmdW5jdGlvbiBidWlsZENzc1ZhbHVlKHZhbHVlLCB1bml0Mikge1xuICAgIHJldHVybiBcIlwiICsgdmFsdWUgKyB1bml0MjtcbiAgfTtcblxuICBfcHJvdG8zLnBhcnNlQ3NzVmFsdWUgPSBmdW5jdGlvbiBwYXJzZUNzc1ZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKGlzU3RyaW5nKHZhbHVlKSkge1xuICAgICAgdmFyIG51bWJlciA9IHBhcnNlRmxvYXQodmFsdWUpIHx8IDA7XG4gICAgICB2YXIgdW5pdDIgPSB2YWx1ZS5yZXBsYWNlKC9cXGQqKFxcLlxcZCopPy8sIFwiXCIpIHx8IFwicHhcIjtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiBudW1iZXIsXG4gICAgICAgIHVuaXQ6IHVuaXQyXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICB1bml0OiBcInB4XCJcbiAgICB9O1xuICB9O1xuXG4gIF9wcm90bzMucGFyc2VCcmVha3BvaW50cyA9IGZ1bmN0aW9uIHBhcnNlQnJlYWtwb2ludHMoKSB7XG4gICAgdmFyIF90aGlzOSA9IHRoaXM7XG5cbiAgICB2YXIgYnJlYWtwb2ludHMgPSB0aGlzLm9wdGlvbnMuYnJlYWtwb2ludHM7XG4gICAgdGhpcy5icmVha3BvaW50cy5wdXNoKFtcImRlZmF1bHRcIiwgdGhpcy5vcHRpb25zXSk7XG5cbiAgICBpZiAoYnJlYWtwb2ludHMpIHtcbiAgICAgIGZvck93bihicmVha3BvaW50cywgZnVuY3Rpb24gKG9wdGlvbnMsIHdpZHRoKSB7XG4gICAgICAgIF90aGlzOS5icmVha3BvaW50cy5wdXNoKFt3aWR0aCwgbWVyZ2UobWVyZ2Uoe30sIF90aGlzOS5vcHRpb25zKSwgb3B0aW9ucyldKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8zLmlzRml4ZWRXaWR0aCA9IGZ1bmN0aW9uIGlzRml4ZWRXaWR0aChvcHRpb25zKSB7XG4gICAgcmV0dXJuICEhb3B0aW9uc1t0aGlzLkRpcmVjdGlvbi5yZXNvbHZlKFwiZml4ZWRXaWR0aFwiKV07XG4gIH07XG5cbiAgX3Byb3RvMy5pc0xvb3AgPSBmdW5jdGlvbiBpc0xvb3AoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy50eXBlID09PSBMT09QO1xuICB9O1xuXG4gIF9wcm90bzMuaXNDZW50ZXIgPSBmdW5jdGlvbiBpc0NlbnRlcihvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMuZm9jdXMgPT09IFwiY2VudGVyXCIpIHtcbiAgICAgIGlmICh0aGlzLmlzTG9vcCgpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnR5cGUgPT09IFNMSURFKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5vcHRpb25zLnRyaW1TcGFjZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgX3Byb3RvMy5pc1ZlcnRpY2FsID0gZnVuY3Rpb24gaXNWZXJ0aWNhbCgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmRpcmVjdGlvbiA9PT0gVFRCO1xuICB9O1xuXG4gIF9wcm90bzMuYnVpbGRDbGFzc2VzID0gZnVuY3Rpb24gYnVpbGRDbGFzc2VzKCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgIHJldHVybiBbQ0xBU1NfUk9PVCwgQ0xBU1NfUk9PVCArIFwiLS1cIiArIG9wdGlvbnMudHlwZSwgQ0xBU1NfUk9PVCArIFwiLS1cIiArIG9wdGlvbnMuZGlyZWN0aW9uLCBvcHRpb25zLmRyYWcgJiYgQ0xBU1NfUk9PVCArIFwiLS1kcmFnZ2FibGVcIiwgb3B0aW9ucy5pc05hdmlnYXRpb24gJiYgQ0xBU1NfUk9PVCArIFwiLS1uYXZcIiwgQ0xBU1NfQUNUSVZFLCAhdGhpcy5jb25maWcuaGlkZGVuICYmIENMQVNTX1JFTkRFUkVEXS5maWx0ZXIoQm9vbGVhbikuam9pbihcIiBcIik7XG4gIH07XG5cbiAgX3Byb3RvMy5idWlsZEF0dHJzID0gZnVuY3Rpb24gYnVpbGRBdHRycyhhdHRycykge1xuICAgIHZhciBhdHRyID0gXCJcIjtcbiAgICBmb3JPd24oYXR0cnMsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICBhdHRyICs9IHZhbHVlID8gXCIgXCIgKyBjYW1lbFRvS2ViYWIoa2V5KSArIFwiPVxcXCJcIiArIHZhbHVlICsgXCJcXFwiXCIgOiBcIlwiO1xuICAgIH0pO1xuICAgIHJldHVybiBhdHRyLnRyaW0oKTtcbiAgfTtcblxuICBfcHJvdG8zLmJ1aWxkU3R5bGVzID0gZnVuY3Rpb24gYnVpbGRTdHlsZXMoc3R5bGVzKSB7XG4gICAgdmFyIHN0eWxlID0gXCJcIjtcbiAgICBmb3JPd24oc3R5bGVzLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgc3R5bGUgKz0gXCIgXCIgKyBjYW1lbFRvS2ViYWIoa2V5KSArIFwiOlwiICsgdmFsdWUgKyBcIjtcIjtcbiAgICB9KTtcbiAgICByZXR1cm4gc3R5bGUudHJpbSgpO1xuICB9O1xuXG4gIF9wcm90bzMucmVuZGVyU2xpZGVzID0gZnVuY3Rpb24gcmVuZGVyU2xpZGVzKCkge1xuICAgIHZhciBfdGhpczEwID0gdGhpcztcblxuICAgIHZhciB0YWcgPSB0aGlzLmNvbmZpZy5zbGlkZVRhZztcbiAgICByZXR1cm4gdGhpcy5zbGlkZXMubWFwKGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICByZXR1cm4gXCI8XCIgKyB0YWcgKyBcIiBcIiArIF90aGlzMTAuYnVpbGRBdHRycyhjb250ZW50LmF0dHJzKSArIFwiPlwiICsgKGNvbnRlbnQuaHRtbCB8fCBcIlwiKSArIFwiPC9cIiArIHRhZyArIFwiPlwiO1xuICAgIH0pLmpvaW4oXCJcIik7XG4gIH07XG5cbiAgX3Byb3RvMy5jb3ZlciA9IGZ1bmN0aW9uIGNvdmVyKGNvbnRlbnQpIHtcbiAgICB2YXIgc3R5bGVzID0gY29udGVudC5zdHlsZXMsXG4gICAgICAgIF9jb250ZW50JGh0bWwgPSBjb250ZW50Lmh0bWwsXG4gICAgICAgIGh0bWwgPSBfY29udGVudCRodG1sID09PSB2b2lkIDAgPyBcIlwiIDogX2NvbnRlbnQkaHRtbDtcblxuICAgIGlmICh0aGlzLm9wdGlvbnMuY292ZXIgJiYgIXRoaXMub3B0aW9ucy5sYXp5TG9hZCkge1xuICAgICAgdmFyIHNyYyA9IGh0bWwubWF0Y2goLzxpbWcuKj9zcmNcXHMqPVxccyooWydcIl0pKC4rPylcXDEuKj8+Lyk7XG5cbiAgICAgIGlmIChzcmMgJiYgc3JjWzJdKSB7XG4gICAgICAgIHN0eWxlcy5iYWNrZ3JvdW5kID0gXCJjZW50ZXIvY292ZXIgbm8tcmVwZWF0IHVybCgnXCIgKyBzcmNbMl0gKyBcIicpXCI7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIF9wcm90bzMuZ2VuZXJhdGVDbG9uZXMgPSBmdW5jdGlvbiBnZW5lcmF0ZUNsb25lcyhjb250ZW50cykge1xuICAgIHZhciBjbGFzc2VzID0gdGhpcy5vcHRpb25zLmNsYXNzZXM7XG4gICAgdmFyIGNvdW50ID0gdGhpcy5nZXRDbG9uZUNvdW50KCk7XG4gICAgdmFyIHNsaWRlcyA9IGNvbnRlbnRzLnNsaWNlKCk7XG5cbiAgICB3aGlsZSAoc2xpZGVzLmxlbmd0aCA8IGNvdW50KSB7XG4gICAgICBwdXNoKHNsaWRlcywgc2xpZGVzKTtcbiAgICB9XG5cbiAgICBwdXNoKHNsaWRlcy5zbGljZSgtY291bnQpLnJldmVyc2UoKSwgc2xpZGVzLnNsaWNlKDAsIGNvdW50KSkuZm9yRWFjaChmdW5jdGlvbiAoY29udGVudCwgaW5kZXgpIHtcbiAgICAgIHZhciBhdHRycyA9IGFzc2lnbih7fSwgY29udGVudC5hdHRycywge1xuICAgICAgICBjbGFzczogY29udGVudC5hdHRycy5jbGFzcyArIFwiIFwiICsgY2xhc3Nlcy5jbG9uZVxuICAgICAgfSk7XG4gICAgICB2YXIgY2xvbmUgPSBhc3NpZ24oe30sIGNvbnRlbnQsIHtcbiAgICAgICAgYXR0cnM6IGF0dHJzXG4gICAgICB9KTtcbiAgICAgIGluZGV4IDwgY291bnQgPyBjb250ZW50cy51bnNoaWZ0KGNsb25lKSA6IGNvbnRlbnRzLnB1c2goY2xvbmUpO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90bzMuZ2V0Q2xvbmVDb3VudCA9IGZ1bmN0aW9uIGdldENsb25lQ291bnQoKSB7XG4gICAgaWYgKHRoaXMuaXNMb29wKCkpIHtcbiAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXG4gICAgICBpZiAob3B0aW9ucy5jbG9uZXMpIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuY2xvbmVzO1xuICAgICAgfVxuXG4gICAgICB2YXIgcGVyUGFnZSA9IG1heC5hcHBseSh2b2lkIDAsIHRoaXMuYnJlYWtwb2ludHMubWFwKGZ1bmN0aW9uIChfcmVmNikge1xuICAgICAgICB2YXIgb3B0aW9uczIgPSBfcmVmNlsxXTtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMyLnBlclBhZ2U7XG4gICAgICB9KSk7XG4gICAgICByZXR1cm4gcGVyUGFnZSAqICgob3B0aW9ucy5mbGlja01heFBhZ2VzIHx8IDEpICsgMSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIDA7XG4gIH07XG5cbiAgX3Byb3RvMy5yZW5kZXJBcnJvd3MgPSBmdW5jdGlvbiByZW5kZXJBcnJvd3MoKSB7XG4gICAgdmFyIGh0bWwgPSBcIlwiO1xuICAgIGh0bWwgKz0gXCI8ZGl2IGNsYXNzPVxcXCJcIiArIHRoaXMub3B0aW9ucy5jbGFzc2VzLmFycm93cyArIFwiXFxcIj5cIjtcbiAgICBodG1sICs9IHRoaXMucmVuZGVyQXJyb3codHJ1ZSk7XG4gICAgaHRtbCArPSB0aGlzLnJlbmRlckFycm93KGZhbHNlKTtcbiAgICBodG1sICs9IFwiPC9kaXY+XCI7XG4gICAgcmV0dXJuIGh0bWw7XG4gIH07XG5cbiAgX3Byb3RvMy5yZW5kZXJBcnJvdyA9IGZ1bmN0aW9uIHJlbmRlckFycm93KHByZXYpIHtcbiAgICB2YXIgX3RoaXMkb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgY2xhc3NlcyA9IF90aGlzJG9wdGlvbnMuY2xhc3NlcyxcbiAgICAgICAgaTE4biA9IF90aGlzJG9wdGlvbnMuaTE4bjtcbiAgICB2YXIgYXR0cnMgPSB7XG4gICAgICBjbGFzczogY2xhc3Nlcy5hcnJvdyArIFwiIFwiICsgKHByZXYgPyBjbGFzc2VzLnByZXYgOiBjbGFzc2VzLm5leHQpLFxuICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgIGFyaWFMYWJlbDogcHJldiA/IGkxOG4ucHJldiA6IGkxOG4ubmV4dFxuICAgIH07XG4gICAgcmV0dXJuIFwiPGJ1dHRvbiBcIiArIHRoaXMuYnVpbGRBdHRycyhhdHRycykgKyBcIj48c3ZnIHhtbG5zPVxcXCJcIiArIFhNTF9OQU1FX1NQQUNFICsgXCJcXFwiIHZpZXdCb3g9XFxcIjAgMCBcIiArIFNJWkUgKyBcIiBcIiArIFNJWkUgKyBcIlxcXCIgd2lkdGg9XFxcIlwiICsgU0laRSArIFwiXFxcIiBoZWlnaHQ9XFxcIlwiICsgU0laRSArIFwiXFxcIj48cGF0aCBkPVxcXCJcIiArICh0aGlzLm9wdGlvbnMuYXJyb3dQYXRoIHx8IFBBVEgpICsgXCJcXFwiIC8+PC9zdmc+PC9idXR0b24+XCI7XG4gIH07XG5cbiAgX3Byb3RvMy5odG1sID0gZnVuY3Rpb24gaHRtbCgpIHtcbiAgICB2YXIgX3RoaXMkY29uZmlnID0gdGhpcy5jb25maWcsXG4gICAgICAgIHJvb3RDbGFzcyA9IF90aGlzJGNvbmZpZy5yb290Q2xhc3MsXG4gICAgICAgIGxpc3RUYWcgPSBfdGhpcyRjb25maWcubGlzdFRhZyxcbiAgICAgICAgYXJyb3dzID0gX3RoaXMkY29uZmlnLmFycm93cyxcbiAgICAgICAgYmVmb3JlVHJhY2sgPSBfdGhpcyRjb25maWcuYmVmb3JlVHJhY2ssXG4gICAgICAgIGFmdGVyVHJhY2sgPSBfdGhpcyRjb25maWcuYWZ0ZXJUcmFjayxcbiAgICAgICAgc2xpZGVyID0gX3RoaXMkY29uZmlnLnNsaWRlcixcbiAgICAgICAgYmVmb3JlU2xpZGVyID0gX3RoaXMkY29uZmlnLmJlZm9yZVNsaWRlcixcbiAgICAgICAgYWZ0ZXJTbGlkZXIgPSBfdGhpcyRjb25maWcuYWZ0ZXJTbGlkZXI7XG4gICAgdmFyIGh0bWwgPSBcIlwiO1xuICAgIGh0bWwgKz0gXCI8ZGl2IGlkPVxcXCJcIiArIHRoaXMuaWQgKyBcIlxcXCIgY2xhc3M9XFxcIlwiICsgdGhpcy5idWlsZENsYXNzZXMoKSArIFwiIFwiICsgKHJvb3RDbGFzcyB8fCBcIlwiKSArIFwiXFxcIj5cIjtcbiAgICBodG1sICs9IFwiPHN0eWxlPlwiICsgdGhpcy5TdHlsZS5idWlsZCgpICsgXCI8L3N0eWxlPlwiO1xuXG4gICAgaWYgKHNsaWRlcikge1xuICAgICAgaHRtbCArPSBiZWZvcmVTbGlkZXIgfHwgXCJcIjtcbiAgICAgIGh0bWwgKz0gXCI8ZGl2IGNsYXNzPVxcXCJzcGxpZGVfX3NsaWRlclxcXCI+XCI7XG4gICAgfVxuXG4gICAgaHRtbCArPSBiZWZvcmVUcmFjayB8fCBcIlwiO1xuXG4gICAgaWYgKGFycm93cykge1xuICAgICAgaHRtbCArPSB0aGlzLnJlbmRlckFycm93cygpO1xuICAgIH1cblxuICAgIGh0bWwgKz0gXCI8ZGl2IGNsYXNzPVxcXCJzcGxpZGVfX3RyYWNrXFxcIj5cIjtcbiAgICBodG1sICs9IFwiPFwiICsgbGlzdFRhZyArIFwiIGNsYXNzPVxcXCJzcGxpZGVfX2xpc3RcXFwiPlwiO1xuICAgIGh0bWwgKz0gdGhpcy5yZW5kZXJTbGlkZXMoKTtcbiAgICBodG1sICs9IFwiPC9cIiArIGxpc3RUYWcgKyBcIj5cIjtcbiAgICBodG1sICs9IFwiPC9kaXY+XCI7XG4gICAgaHRtbCArPSBhZnRlclRyYWNrIHx8IFwiXCI7XG5cbiAgICBpZiAoc2xpZGVyKSB7XG4gICAgICBodG1sICs9IFwiPC9kaXY+XCI7XG4gICAgICBodG1sICs9IGFmdGVyU2xpZGVyIHx8IFwiXCI7XG4gICAgfVxuXG4gICAgaHRtbCArPSBcIjwvZGl2PlwiO1xuICAgIHJldHVybiBodG1sO1xuICB9O1xuXG4gIHJldHVybiBTcGxpZGVSZW5kZXJlcjtcbn0oKTtcblxuZXhwb3J0IHsgQ0xBU1NFUywgQ0xBU1NfQUNUSVZFLCBDTEFTU19BUlJPVywgQ0xBU1NfQVJST1dTLCBDTEFTU19BUlJPV19ORVhULCBDTEFTU19BUlJPV19QUkVWLCBDTEFTU19DTE9ORSwgQ0xBU1NfQ09OVEFJTkVSLCBDTEFTU19GT0NVU19JTiwgQ0xBU1NfSU5JVElBTElaRUQsIENMQVNTX0xJU1QsIENMQVNTX0xPQURJTkcsIENMQVNTX05FWFQsIENMQVNTX09WRVJGTE9XLCBDTEFTU19QQUdJTkFUSU9OLCBDTEFTU19QQUdJTkFUSU9OX1BBR0UsIENMQVNTX1BSRVYsIENMQVNTX1BST0dSRVNTLCBDTEFTU19QUk9HUkVTU19CQVIsIENMQVNTX1JPT1QsIENMQVNTX1NMSURFLCBDTEFTU19TUElOTkVSLCBDTEFTU19TUiwgQ0xBU1NfVE9HR0xFLCBDTEFTU19UT0dHTEVfUEFVU0UsIENMQVNTX1RPR0dMRV9QTEFZLCBDTEFTU19UUkFDSywgQ0xBU1NfVklTSUJMRSwgREVGQVVMVFMsIEVWRU5UX0FDVElWRSwgRVZFTlRfQVJST1dTX01PVU5URUQsIEVWRU5UX0FSUk9XU19VUERBVEVELCBFVkVOVF9BVVRPUExBWV9QQVVTRSwgRVZFTlRfQVVUT1BMQVlfUExBWSwgRVZFTlRfQVVUT1BMQVlfUExBWUlORywgRVZFTlRfQ0xJQ0ssIEVWRU5UX0RFU1RST1ksIEVWRU5UX0RSQUcsIEVWRU5UX0RSQUdHRUQsIEVWRU5UX0RSQUdHSU5HLCBFVkVOVF9FTkRfSU5ERVhfQ0hBTkdFRCwgRVZFTlRfSElEREVOLCBFVkVOVF9JTkFDVElWRSwgRVZFTlRfTEFaWUxPQURfTE9BREVELCBFVkVOVF9NT1VOVEVELCBFVkVOVF9NT1ZFLCBFVkVOVF9NT1ZFRCwgRVZFTlRfTkFWSUdBVElPTl9NT1VOVEVELCBFVkVOVF9PVkVSRkxPVywgRVZFTlRfUEFHSU5BVElPTl9NT1VOVEVELCBFVkVOVF9QQUdJTkFUSU9OX1VQREFURUQsIEVWRU5UX1JFQURZLCBFVkVOVF9SRUZSRVNILCBFVkVOVF9SRVNJWkUsIEVWRU5UX1JFU0laRUQsIEVWRU5UX1NDUk9MTCwgRVZFTlRfU0NST0xMRUQsIEVWRU5UX1NISUZURUQsIEVWRU5UX1NMSURFX0tFWURPV04sIEVWRU5UX1VQREFURUQsIEVWRU5UX1ZJU0lCTEUsIEV2ZW50QmluZGVyLCBFdmVudEludGVyZmFjZSwgRkFERSwgTE9PUCwgTFRSLCBSVEwsIFJlcXVlc3RJbnRlcnZhbCwgU0xJREUsIFNUQVRVU19DTEFTU0VTLCBTcGxpZGUsIFNwbGlkZVJlbmRlcmVyLCBTdGF0ZSwgVFRCLCBUaHJvdHRsZSwgU3BsaWRlIGFzIGRlZmF1bHQgfTtcbiIsIi8vIENsYXNzIHRoYXQgaGFuZGxlcyB0aGUgcGxheWJhY2sgb2YgdGhlIHdob2xlIGJvb2tcclxuaW1wb3J0IHtcclxuICAgIEJvb2ssXHJcbiAgICBCb29rVHlwZSxcclxuICAgIFBhZ2UsXHJcbiAgICBUZXh0RWxlbWVudCxcclxuICAgIEltYWdlRWxlbWVudCxcclxuICAgIEF1ZGlvRWxlbWVudCxcclxuICAgIEF1ZGlvVGltZXN0YW1wcyxcclxuICAgIFdvcmRUaW1lc3RhbXBFbGVtZW50LFxyXG59IGZyb20gXCIuLi9Nb2RlbHMvTW9kZWxzXCI7XHJcbmltcG9ydCB7IEVWRU5UX0FDVElWRSwgU3BsaWRlIH0gZnJvbSBcIkBzcGxpZGVqcy9zcGxpZGVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQbGF5QmFja0VuZ2luZSB7XHJcbiAgICBjdXJyZW50UGFnZTogbnVtYmVyO1xyXG4gICAgbnVtYmVyT2ZQYWdlczogbnVtYmVyO1xyXG4gICAgdHJhbnNpdGlvbmluZ1RvUGFnZTogYm9vbGVhbjtcclxuXHJcbiAgICBpbWFnZXNQYXRoOiBzdHJpbmc7XHJcbiAgICBhdWRpb1BhdGg6IHN0cmluZztcclxuXHJcbiAgICBlbXB0eUdsb3dJbWFnZVRhZzogc3RyaW5nID0gXCJlbXB0eV9nbG93X2ltYWdlXCI7XHJcblxyXG4gICAgc3BsaWRlSGFuZGxlOiBTcGxpZGU7XHJcblxyXG4gICAgY3VycmVudEJvb2tUeXBlOiBCb29rVHlwZTtcclxuXHJcbiAgICBib29rOiBCb29rO1xyXG5cclxuICAgIGN1cnJlbnRQYWdlQXV0b1BsYXllckludGVydmFsOiBhbnk7XHJcblxyXG4gICAgY3VycmVudGx5UGxheWluZ0F1ZGlvRWxlbWVudDogSFRNTEF1ZGlvRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGN1cnJlbnRXb3JkUGxheWluZ1RpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0O1xyXG5cclxuICAgIGN1cnJlbnRHbG93SW1hZ2VUaW1lb3V0OiBOb2RlSlMuVGltZW91dDtcclxuXHJcbiAgICBjdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzOiBIVE1MRGl2RWxlbWVudFtdID0gW107XHJcblxyXG4gICAgY3VycmVudGx5QWN0aXZlV29yZDogSFRNTERpdkVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihpbWFnZXNQYXRoOiBzdHJpbmcsIGF1ZGlvUGF0aDogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5pbWFnZXNQYXRoID0gaW1hZ2VzUGF0aDtcclxuICAgICAgICB0aGlzLmF1ZGlvUGF0aCA9IGF1ZGlvUGF0aDtcclxuICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMDtcclxuICAgICAgICB0aGlzLnNwbGlkZUhhbmRsZSA9IG5ldyBTcGxpZGUoXCIuc3BsaWRlXCIsIHtcclxuICAgICAgICAgICAgZml4ZWRIZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCAtIDIwLFxyXG4gICAgICAgIH0pLm1vdW50KCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3BsaWRlSGFuZGxlLm9uKFwibW92ZVwiLCAobmV3SW5kZXgsIG9sZEluZGV4LCBkZXN0SW5kZXgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudFBhZ2UgIT09IG5ld0luZGV4KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlN0b3BwaW5nIGF1ZGlvIGZvciBwYWdlIGZyb20gbW92ZTogXCIgKyBvbGRJbmRleCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25pbmdUb1BhZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wUGFnZUF1ZGlvKHRoaXMuYm9vay5wYWdlc1tvbGRJbmRleF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc3BsaWRlSGFuZGxlLm9uKFwibW92ZWRcIiwgKGN1cnJlbnRJbmRleCwgcHJldkluZGV4LCBkZXN0SW5kZXgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudFBhZ2UgIT09IGN1cnJlbnRJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJQbGF5aW5nIGF1ZGlvIGZvciBwYWdlIGZyb20gbW92ZWQ6IFwiICsgY3VycmVudEluZGV4KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBjdXJyZW50SW5kZXg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25pbmdUb1BhZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheVBhZ2VBdWRpbyh0aGlzLmJvb2sucGFnZXNbY3VycmVudEluZGV4XSwgY3VycmVudEluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNwbGlkZUhhbmRsZS5vbihcImRyYWdcIiwgKG5ld0luZGV4LCBvbGRJbmRleCwgZGVzdEluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRQYWdlICE9PSBuZXdJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJTdG9wcGluZyBhdWRpbyBmb3IgcGFnZSBmcm9tIGRyYWc6IFwiICsgb2xkSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uaW5nVG9QYWdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RvcFBhZ2VBdWRpbyh0aGlzLmJvb2sucGFnZXNbb2xkSW5kZXhdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNwbGlkZUhhbmRsZS5vbihcImRyYWdnZWRcIiwgKGN1cnJlbnRJbmRleCwgcHJldkluZGV4LCBkZXN0SW5kZXgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudFBhZ2UgIT09IGN1cnJlbnRJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJQbGF5aW5nIGF1ZGlvIGZvciBwYWdlIGZyb20gZHJhZ2dlZDogXCIgKyBjdXJyZW50SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IGN1cnJlbnRJbmRleDtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvbmluZ1RvUGFnZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5UGFnZUF1ZGlvKHRoaXMuYm9vay5wYWdlc1tjdXJyZW50SW5kZXhdLCBjdXJyZW50SW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkUGFnZVJlc2l6ZUxpc3RlbmVyKCk7XHJcbiAgICAgICAgdGhpcy5hZGRNaW5pbXphdGlvbkxpc3RlbmVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkTWluaW16YXRpb25MaXN0ZW5lcigpIHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09IFwidmlzaWJsZVwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXlQYWdlQXVkaW8odGhpcy5ib29rLnBhZ2VzW3RoaXMuY3VycmVudFBhZ2VdLCB0aGlzLmN1cnJlbnRQYWdlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RvcFBhZ2VBdWRpbyh0aGlzLmJvb2sucGFnZXNbdGhpcy5jdXJyZW50UGFnZV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RvcFBhZ2VBdWRpbyhwYWdlOiBQYWdlKSB7XHJcbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIHBhZ2UncyB2aXN1YWwgZWxlbWVudHMsIGlmIHdlIGZpbmQgYW4gYXVkaW8gb2JqZWN0IGdldCBpdCBieSBpZCBhbmQgc3RvcCBpdFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFnZS52aXN1YWxFbGVtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdmlzdWFsRWxlbWVudCA9IHBhZ2UudmlzdWFsRWxlbWVudHNbaV07XHJcbiAgICAgICAgICAgIGlmICh2aXN1YWxFbGVtZW50LnR5cGUgPT09IFwiYXVkaW9cIikge1xyXG4gICAgICAgICAgICAgICAgbGV0IGF1ZGlvRWxlbWVudDogQXVkaW9FbGVtZW50ID0gdmlzdWFsRWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGxldCBhdWRpb0VsZW1lbnREb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhdWRpb0VsZW1lbnQuZG9tSUQpIGFzIEhUTUxBdWRpb0VsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBhdWRpb0VsZW1lbnREb20ucGF1c2UoKTtcclxuICAgICAgICAgICAgICAgIGF1ZGlvRWxlbWVudERvbS5jdXJyZW50VGltZSA9IDA7XHJcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuY3VycmVudFBhZ2VBdXRvUGxheWVySW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBhdWRpb0VsZW1lbnQuYXVkaW9UaW1lc3RhbXBzLnRpbWVzdGFtcHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgd29yZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhdWRpb0VsZW1lbnQuZG9tSUQgKyBcIl93b3JkX1wiICsgaikgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImNyLWNsaWNrYWJsZS13b3JkLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB3b3JkRWxlbWVudC5zdHlsZS5jb2xvciA9IFwid2hpdGVcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwbGF5UGFnZUF1ZGlvKHBhZ2U6IFBhZ2UsIHBhZ2VJbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIHBhZ2UncyB2aXN1YWwgZWxlbWVudHMsIGlmIHdlIGZpbmQgYW4gYXVkaW8gb2JqZWN0IGdldCBpdCBieSBpZCBhbmQgcGxheSBpdFxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQXR0ZW1wdGluZyB0byBwbGF5IGF1ZGlvIGZvciBwYWdlOiBcIiArIHBhZ2VJbmRleCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJCb29rIGhhczogXCIgKyB0aGlzLmJvb2sucGFnZXMubGVuZ3RoICsgXCIgcGFnZXNcIik7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJUaGUgcGFnZSBoYXMgXCIgKyBwYWdlLnZpc3VhbEVsZW1lbnRzLmxlbmd0aCArIFwiIHZpc3VhbCBlbGVtZW50c1wiKTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZ2UudmlzdWFsRWxlbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHZpc3VhbEVsZW1lbnQgPSBwYWdlLnZpc3VhbEVsZW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBpZiAodmlzdWFsRWxlbWVudC50eXBlID09PSBcImF1ZGlvXCIpIHtcclxuICAgICAgICAgICAgICAgIGxldCBhdWRpb0VsZW1lbnQ6IEF1ZGlvRWxlbWVudCA9IHZpc3VhbEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZvdW5kIHRoZSBhdWRpbyBlbGVtZW50IGluIHBhZ2UncyB2aXN1YWwgZWxlbWVudHM6IFwiICsgYXVkaW9FbGVtZW50LmF1ZGlvU3JjKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRG9lcyB0aGUgYXVkaW8gZWxlbWVudCBoYXZlIHRpbWVzdGFtcHM/IFwiICsgKGF1ZGlvRWxlbWVudC5hdWRpb1RpbWVzdGFtcHMgIT09IHVuZGVmaW5lZCA/IFwiWWVzXCIgOiBcIk5vXCIpKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXVkaW8gZWxlbWVudCBkb21JRDogXCIgKyBhdWRpb0VsZW1lbnQuZG9tSUQpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBsZXQgYXVkaW9FbGVtZW50RG9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYXVkaW9FbGVtZW50LmRvbUlEKSBhcyBIVE1MQXVkaW9FbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBdWRpbyBlbGVtZW50IGRvbSBpcyBudWxsIG9yIHVuZGVmaW5lZD8gXCIgKyAoYXVkaW9FbGVtZW50RG9tID09PSBudWxsIHx8IGF1ZGlvRWxlbWVudERvbSA9PT0gdW5kZWZpbmVkID8gXCJZZXNcIiA6IFwiTm9cIikpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBhdWRpb0VsZW1lbnREb20ucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlQbGF5aW5nQXVkaW9FbGVtZW50ID0gYXVkaW9FbGVtZW50RG9tO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBsYXN0V29yZEluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50SW5kZXggPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU3RhcnRpbmcgdGhlIGF1dG8gcGxheWVyIGludGVydmFsIGZvciB3b3JkIGhpZ2hsaWdodGluZyB3aXRoIDYwbXMgaW50ZXJ2YWxcIik7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2VBdXRvUGxheWVySW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdWRpb0VsZW1lbnQuYXVkaW9UaW1lc3RhbXBzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRUaW1lID0gYXVkaW9FbGVtZW50RG9tLmN1cnJlbnRUaW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGF1ZGlvRWxlbWVudC5hdWRpb1RpbWVzdGFtcHMudGltZXN0YW1wcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRUaW1lID49IGF1ZGlvRWxlbWVudC5hdWRpb1RpbWVzdGFtcHMudGltZXN0YW1wc1tqXS5zdGFydFRpbWVzdGFtcCAmJiBjdXJyZW50VGltZSA8PSBhdWRpb0VsZW1lbnQuYXVkaW9UaW1lc3RhbXBzLnRpbWVzdGFtcHNbal0uZW5kVGltZXN0YW1wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEluZGV4ID0gajtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgd29yZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhdWRpb0VsZW1lbnQuZG9tSUQgKyBcIl93b3JkX1wiICsgY3VycmVudEluZGV4KSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseUFjdGl2ZVdvcmQgPSB3b3JkRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JkRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiY3ItY2xpY2thYmxlLXdvcmQtYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmRFbGVtZW50LnN0eWxlLmNvbG9yID0gYXVkaW9FbGVtZW50Lmdsb3dDb2xvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZUNvbm5lY3RlZEdyYXBoaWNIaWdobGlnaHRpbmcocGFnZUluZGV4LCBjdXJyZW50SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXN0V29yZEluZGV4IDwgY3VycmVudEluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJDdXJyZW50IGluZGV4OiBcIiArIGN1cnJlbnRJbmRleCArIFwiIGxhc3QgaW5kZXg6IFwiICsgbGFzdFdvcmRJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdvcmRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYXVkaW9FbGVtZW50LmRvbUlEICsgXCJfd29yZF9cIiArIGxhc3RXb3JkSW5kZXgpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJjci1jbGlja2FibGUtd29yZC1hY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZEVsZW1lbnQuc3R5bGUuY29sb3IgPSBcIndoaXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFdvcmRJbmRleCA9IGN1cnJlbnRJbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFRpbWUgPj0gYXVkaW9FbGVtZW50LmF1ZGlvVGltZXN0YW1wcy50aW1lc3RhbXBzW2F1ZGlvRWxlbWVudC5hdWRpb1RpbWVzdGFtcHMudGltZXN0YW1wcy5sZW5ndGggLSAxXS5lbmRUaW1lc3RhbXAgLSAwLjEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiRmluaXNoZWQgSGlnaGxpZ2h0aW5nISBDdXJyZW50IGluZGV4OiBcIiArIGN1cnJlbnRJbmRleCArIFwiIGxhc3QgaW5kZXg6IFwiICsgbGFzdFdvcmRJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgd29yZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhdWRpb0VsZW1lbnQuZG9tSUQgKyBcIl93b3JkX1wiICsgY3VycmVudEluZGV4KSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJjci1jbGlja2FibGUtd29yZC1hY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JkRWxlbWVudC5zdHlsZS5jb2xvciA9IFwid2hpdGVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudGx5UGxheWluZ0F1ZGlvRWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuY3VycmVudFBhZ2VBdXRvUGxheWVySW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgNjApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFkZFBhZ2VSZXNpemVMaXN0ZW5lcigpIHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3BsaWRlSGFuZGxlLm9wdGlvbnMuZml4ZWRIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSAyMDtcclxuICAgICAgICAgICAgdGhpcy5zcGxpZGVIYW5kbGUucmVmcmVzaCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVCb29rKGJvb2s6IEJvb2spIHtcclxuICAgICAgICB0aGlzLmJvb2sgPSBib29rO1xyXG4gICAgICAgIHRoaXMuY3VycmVudEJvb2tUeXBlID0gYm9vay5ib29rVHlwZTtcclxuICAgICAgICB0aGlzLm51bWJlck9mUGFnZXMgPSBib29rLnBhZ2VzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEJvb2tUeXBlID09PSBCb29rVHlwZS5DdXJpb3VzUmVhZGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUN1cmlvdXNSZWFkZXJCb29rKGJvb2spO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jdXJyZW50Qm9va1R5cGUgPT09IEJvb2tUeXBlLkdETCkge1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVHRExCb29rKGJvb2spO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplQ3VyaW91c1JlYWRlckJvb2soYm9vazogQm9vaykge1xyXG4gICAgICAgIHRoaXMubnVtYmVyT2ZQYWdlcyA9IGJvb2sucGFnZXMubGVuZ3RoO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvb2sucGFnZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc2xpZGVMaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgICAgICAgY29uc3Qgc2xpZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgICAgICAgICAgc2xpZGVMaS5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgICAgIHNsaWRlTGkuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImNlbnRlclwiO1xyXG4gICAgICAgICAgICBzbGlkZUxpLnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgc2xpZGUuc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XHJcbiAgICAgICAgICAgIHNsaWRlLnN0eWxlLndpZHRoID0gXCI5MCVcIjtcclxuICAgICAgICAgICAgc2xpZGUuc3R5bGUuaGVpZ2h0ID0gXCI5MCVcIjtcclxuICAgICAgICAgICAgc2xpZGUuc3R5bGUudG9wID0gXCItNCVcIjtcclxuXHJcbiAgICAgICAgICAgIHNsaWRlTGkuYXBwZW5kQ2hpbGQoc2xpZGUpO1xyXG5cclxuICAgICAgICAgICAgc2xpZGVMaS5jbGFzc0xpc3QuYWRkKFwic3BsaWRlX19zbGlkZVwiKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBzZW50ZW5jZUluaXRpYWxpemVkQnlBdWRpbyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLy8gRmlyc3Qgd2UgYXJlIGFkZGluZyB0aGUgaW1hZ2UgYW5kIGF1ZGlvIGVsZW1lbnRzIGFuZCB0aGUgdGV4dCBhZnRlclxyXG4gICAgICAgICAgICAvLyB0aGUgcmVhc29uaW5nIGJlaGluZCB0aGlzIGlzIHRoYXQgaWYgdGhlIHBhZ2UgY29udGFpbnMgYW4gYXVkaW9cclxuICAgICAgICAgICAgLy8gZWxlbWVudCBpbiB0aGF0IGNhc2Ugd2Ugc2hvdWxkIGluaXRpYWxpemUgdGV4dCBmcm9tIHRoZSBhdWRpb1xyXG4gICAgICAgICAgICAvLyB0aW1lc3RhbXBzIHRoYXQgd2UgZ2V0IGZyb20gdGhlIGNvbnRlbnQgZmlsZVxyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJvb2sucGFnZXNbaV0udmlzdWFsRWxlbWVudHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCB2aXN1YWxFbGVtZW50ID0gYm9vay5wYWdlc1tpXS52aXN1YWxFbGVtZW50c1tqXTtcclxuICAgICAgICAgICAgICAgIGlmICh2aXN1YWxFbGVtZW50LnR5cGUgPT0gXCJpbWFnZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdlRWxlbWVudDogSW1hZ2VFbGVtZW50ID0gdmlzdWFsRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcGFnZUluZGV4ID0gaTtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZS5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUltYWdlQ29udGFpbmVyKHBhZ2VJbmRleCwgaW1hZ2VFbGVtZW50LCBqKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZpc3VhbEVsZW1lbnQudHlwZSA9PSBcImF1ZGlvXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZUluaXRpYWxpemVkQnlBdWRpbyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGF1ZGlvRWxlbWVudDogQXVkaW9FbGVtZW50ID0gdmlzdWFsRWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRleHRFbGVtZW50OiBUZXh0RWxlbWVudCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYm9vay5wYWdlc1tpXS52aXN1YWxFbGVtZW50cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmlzdWFsRWxlbWVudCA9IGJvb2sucGFnZXNbaV0udmlzdWFsRWxlbWVudHNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2aXN1YWxFbGVtZW50LnR5cGUgPT0gXCJ0ZXh0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50ID0gdmlzdWFsRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW1hZ2VFbGVtZW50OiBJbWFnZUVsZW1lbnQgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJvb2sucGFnZXNbaV0udmlzdWFsRWxlbWVudHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHZpc3VhbEVsZW1lbnQgPSBib29rLnBhZ2VzW2ldLnZpc3VhbEVsZW1lbnRzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmlzdWFsRWxlbWVudC50eXBlID09IFwiaW1hZ2VcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50ID0gdmlzdWFsRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGV4dEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGF1ZGlvQW5kVGV4dERpdnMgPSB0aGlzLmNyZWF0ZUF1ZGlvQW5kVGV4dENvbnRhaW5lcnMoaSwgYXVkaW9FbGVtZW50LCB0ZXh0RWxlbWVudCwgaW1hZ2VFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUuYXBwZW5kQ2hpbGQoYXVkaW9BbmRUZXh0RGl2c1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLmFwcGVuZENoaWxkKGF1ZGlvQW5kVGV4dERpdnNbMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlQXVkaW9Db250YWluZXIoYXVkaW9FbGVtZW50KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc3BsaWRlSGFuZGxlLmFkZChzbGlkZUxpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gSWYgdGhlIHNlbnRlbmNlIHdhc24ndCBub3QgaW5pdGlhbGl6ZWQgYnkgdGhlIGF1ZGlvIG9iamVjdFxyXG4gICAgICAgICAgICAvLyB0aGVuIHdlIGFkZCBpdCBoZXJlXHJcbiAgICAgICAgICAgIGlmICghc2VudGVuY2VJbml0aWFsaXplZEJ5QXVkaW8pIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYm9vay5wYWdlc1tpXS52aXN1YWxFbGVtZW50cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB2aXN1YWxFbGVtZW50ID0gYm9vay5wYWdlc1tpXS52aXN1YWxFbGVtZW50c1tqXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmlzdWFsRWxlbWVudC50eXBlID09IFwidGV4dFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZXh0RWxlbWVudDogVGV4dEVsZW1lbnQgPSB2aXN1YWxFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Q29udGFpbmVyKHRleHRFbGVtZW50KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVRleHRDb250YWluZXIodGV4dEVsZW1lbnQ6IFRleHRFbGVtZW50KTogSFRNTERpdkVsZW1lbnQge1xyXG4gICAgICAgIGxldCB0ZXh0RWxlbWVudERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblxyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LmlkID0gXCJjci10ZXh0XCI7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuY2xhc3NMaXN0LmFkZChcImNyLXRleHRcIik7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUud2Via2l0VGV4dFN0cm9rZSA9IFwiMXB4ICMzMDMwMzBcIjtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5jb2xvciA9IFwiI0ZGRkZGRlwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLnRleHRTaGFkb3cgPSBcIjAuMXJlbSAwLjE1cmVtIDAuMXJlbSAjMzAzMDMwXCI7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUuZm9udEZhbWlseSA9IFwiUXVpY2tzYW5kXCI7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUuZm9udFdlaWdodCA9IFwiODAwXCI7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUuZm9udFNpemUgPSBcImluaGVyaXRcIjtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS50b3AgPSB0ZXh0RWxlbWVudC5wb3NpdGlvblkgKyBcIiVcIjtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5sZWZ0ID0gdGV4dEVsZW1lbnQucG9zaXRpb25YICsgXCIlXCI7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUud2lkdGggPSB0ZXh0RWxlbWVudC53aWR0aCArIFwiJVwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmhlaWdodCA9IHRleHRFbGVtZW50LmhlaWdodCArIFwiJVwiO1xyXG4gICAgICAgIC8vIHRleHRFbGVtZW50RGl2LmlubmVySFRNTCA9IHRleHRFbGVtZW50LnRleHRDb250ZW50QXNIVE1MLnJlcGxhY2UoXCIyLjI1ZW1cIiwgXCJcIik7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuaW5uZXJIVE1MID0gdGV4dEVsZW1lbnQudGV4dENvbnRlbnRBc0hUTUwucmVwbGFjZSgvZm9udC1zaXplOlteO10rOy9nLCBcIlwiKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRleHRFbGVtZW50RGl2O1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUltYWdlQ29udGFpbmVyKHBhZ2VJbmRleDogbnVtYmVyLCBpbWFnZUVsZW1lbnQ6IEltYWdlRWxlbWVudCwgZWxlbWVudEluZGV4OiBudW1iZXIpOiBIVE1MRGl2RWxlbWVudCB7XHJcbiAgICAgICAgbGV0IGltYWdlRWxlbWVudERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblxyXG4gICAgICAgIGltYWdlRWxlbWVudERpdi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuICAgICAgICBpbWFnZUVsZW1lbnREaXYuc3R5bGUudG9wID0gaW1hZ2VFbGVtZW50LnBvc2l0aW9uWSArIFwiJVwiO1xyXG4gICAgICAgIGltYWdlRWxlbWVudERpdi5zdHlsZS5sZWZ0ID0gaW1hZ2VFbGVtZW50LnBvc2l0aW9uWCArIFwiJVwiO1xyXG4gICAgICAgIGltYWdlRWxlbWVudERpdi5zdHlsZS53aWR0aCA9IGltYWdlRWxlbWVudC53aWR0aCArIFwiJVwiO1xyXG4gICAgICAgIGltYWdlRWxlbWVudERpdi5zdHlsZS5oZWlnaHQgPSBpbWFnZUVsZW1lbnQuaGVpZ2h0ICsgXCIlXCI7XHJcblxyXG4gICAgICAgIGlmIChpbWFnZUVsZW1lbnQuaW1hZ2VTb3VyY2UgPT09IHRoaXMuZW1wdHlHbG93SW1hZ2VUYWcpIHtcclxuICAgICAgICAgICAgaW1hZ2VFbGVtZW50RGl2LmNsYXNzTGlzdC5hZGQoXCJjci1pbWFnZS1lbXB0eS1nbG93XCIpO1xyXG4gICAgICAgICAgICAvLyBVc2luZyBjbGFzc2VzIGhlcmUgaW5zdGVhZCBvZiBpZCBhc3NpZ25tZW50LCBiZWNhdXNlIHdlIGNvdWxkIGhhdmUgbXVsdGlwbGUgZ2xvd2luZyBkaXZzXHJcbiAgICAgICAgICAgIC8vIGF0dGFjaGVkIHRvIG9uZSB3b3JkIGluIHRoZSBzZW50ZW5jZSBhbmQgaGF2aW5nIG11bHRpcGxlIGVsZW1lbnRzIHdpdGggdGhlIHNhbWUgaWQgaXMgbm90XHJcbiAgICAgICAgICAgIC8vIGFsbG93ZWQgaW4gSFRNTFxyXG4gICAgICAgICAgICBpZiAoaW1hZ2VFbGVtZW50LmRvbUlEID09PSB1bmRlZmluZWQgfHwgaW1hZ2VFbGVtZW50LmRvbUlEID09PSBudWxsIHx8IGltYWdlRWxlbWVudC5kb21JRCA9PT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBcImltZ1wiICsgcGFnZUluZGV4ICsgXCJfXCIgKyBlbGVtZW50SW5kZXg7XHJcbiAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnREaXYuaWQgPSBpZDtcclxuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudERpdi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgbWVhbnMgdGhhdCB0aGUgZ2xvd2luZyBvYmplY3QgaXNuJ3QgY29ubmVjdGVkIHRvIGFueSB3b3JkIGluIHRoZSBzZW50ZW5jZSwgaXQgc2hvdWxkIHN0aWxsIGhhdmVcclxuICAgICAgICAgICAgICAgICAgICAvLyBhIGdsb3cgZWZmZWN0IHRob3VnaFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlU3RhbmRhbG9uZUdsb3dJbWFnZUNsaWNrKHBhZ2VJbmRleCwgaWQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnREaXYuY2xhc3NMaXN0LmFkZChpbWFnZUVsZW1lbnQuZG9tSUQpO1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50RGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVHbG93SW1hZ2VDbGljayhwYWdlSW5kZXgsIGltYWdlRWxlbWVudC5kb21JRC5zcGxpdChcIl9cIilbMV0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbWFnZUVsZW1lbnREaXYuaWQgPSBpbWFnZUVsZW1lbnQuZG9tSUQ7XHJcbiAgICAgICAgICAgIGltYWdlRWxlbWVudERpdi5jbGFzc0xpc3QuYWRkKFwiY3ItaW1hZ2VcIik7XHJcblxyXG4gICAgICAgICAgICBsZXQgaW1hZ2VFbGVtZW50SW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgICAgICAgICAgaW1hZ2VFbGVtZW50SW1nLnNyYyA9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlc1BhdGggKyBpbWFnZUVsZW1lbnQuaW1hZ2VTb3VyY2UucmVwbGFjZShcImltYWdlcy9cIiwgXCJcIik7XHJcbiAgICAgICAgICAgIGltYWdlRWxlbWVudEltZy5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgICAgICAgICBpbWFnZUVsZW1lbnRJbWcuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgIGltYWdlRWxlbWVudERpdi5hcHBlbmRDaGlsZChpbWFnZUVsZW1lbnRJbWcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGltYWdlRWxlbWVudERpdjtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVBdWRpb0NvbnRhaW5lcihhdWRpb0VsZW1lbnQ6IEF1ZGlvRWxlbWVudCk6IEhUTUxEaXZFbGVtZW50IHtcclxuICAgICAgICBsZXQgYXVkaW9FbGVtZW50RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgYXVkaW9FbGVtZW50RGl2LmNsYXNzTGlzdC5hZGQoXCJjci1hdWRpb1wiKTtcclxuICAgICAgICBhdWRpb0VsZW1lbnREaXYuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcblxyXG4gICAgICAgIGxldCBwYWdlQXVkaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIik7XHJcbiAgICAgICAgcGFnZUF1ZGlvLmlkID0gYXVkaW9FbGVtZW50LmRvbUlEO1xyXG4gICAgICAgIHBhZ2VBdWRpby5zcmMgPSB0aGlzLmF1ZGlvUGF0aCArIGF1ZGlvRWxlbWVudC5hdWRpb1NyYy5yZXBsYWNlKFwiYXVkaW9zL1wiLCBcIlwiKTtcclxuICAgICAgICBwYWdlQXVkaW8uY29udHJvbHMgPSBmYWxzZTtcclxuICAgICAgICBhdWRpb0VsZW1lbnREaXYuYXBwZW5kQ2hpbGQocGFnZUF1ZGlvKTtcclxuXHJcbiAgICAgICAgaWYgKGF1ZGlvRWxlbWVudC5hdWRpb1RpbWVzdGFtcHMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF1ZGlvRWxlbWVudC5hdWRpb1RpbWVzdGFtcHMudGltZXN0YW1wcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHdvcmRUaW1lc3RhbXBFbGVtZW50OiBXb3JkVGltZXN0YW1wRWxlbWVudCA9IGF1ZGlvRWxlbWVudC5hdWRpb1RpbWVzdGFtcHMudGltZXN0YW1wc1tpXTtcclxuICAgICAgICAgICAgICAgIGxldCB3b3JkQXVkaW9FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImF1ZGlvXCIpO1xyXG4gICAgICAgICAgICAgICAgd29yZEF1ZGlvRWxlbWVudC5pZCA9IHdvcmRUaW1lc3RhbXBFbGVtZW50LmRvbUlEO1xyXG4gICAgICAgICAgICAgICAgd29yZEF1ZGlvRWxlbWVudC5zcmMgPSB0aGlzLmF1ZGlvUGF0aCArIHdvcmRUaW1lc3RhbXBFbGVtZW50LmF1ZGlvU3JjLnJlcGxhY2UoXCJhdWRpb3MvXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgd29yZEF1ZGlvRWxlbWVudC5jb250cm9scyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYXVkaW9FbGVtZW50RGl2LmFwcGVuZENoaWxkKHdvcmRBdWRpb0VsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYXVkaW9FbGVtZW50RGl2O1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUF1ZGlvQW5kVGV4dENvbnRhaW5lcnMocGFnZUluZGV4OiBudW1iZXIsIGF1ZGlvRWxlbWVudDogQXVkaW9FbGVtZW50LCB0ZXh0RWxlbWVudDogVGV4dEVsZW1lbnQsIGltYWdlRWxlbWVudDogSW1hZ2VFbGVtZW50KTogSFRNTERpdkVsZW1lbnRbXSB7XHJcbiAgICAgICAgbGV0IGF1ZGlvQW5kVGV4dEFycmF5OiBIVE1MRGl2RWxlbWVudFtdID0gQXJyYXkoKTtcclxuXHJcbiAgICAgICAgbGV0IGF1ZGlvRWxlbWVudERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblxyXG4gICAgICAgIGF1ZGlvRWxlbWVudERpdi5jbGFzc0xpc3QuYWRkKFwiY3ItYXVkaW9cIik7XHJcbiAgICAgICAgYXVkaW9FbGVtZW50RGl2LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG5cclxuICAgICAgICBsZXQgcGFnZUF1ZGlvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImF1ZGlvXCIpO1xyXG4gICAgICAgIHBhZ2VBdWRpby5pZCA9IGF1ZGlvRWxlbWVudC5kb21JRDtcclxuICAgICAgICBwYWdlQXVkaW8uc3JjID0gdGhpcy5hdWRpb1BhdGggKyBhdWRpb0VsZW1lbnQuYXVkaW9TcmMucmVwbGFjZShcImF1ZGlvcy9cIiwgXCJcIik7XHJcbiAgICAgICAgcGFnZUF1ZGlvLmNvbnRyb2xzID0gZmFsc2U7XHJcbiAgICAgICAgYXVkaW9FbGVtZW50RGl2LmFwcGVuZENoaWxkKHBhZ2VBdWRpbyk7XHJcblxyXG4gICAgICAgIGxldCBzZW50ZW5jZUFycmF5VHJpbW1lZDogc3RyaW5nW10gPSBBcnJheSgpO1xyXG5cclxuICAgICAgICBpZiAoYXVkaW9FbGVtZW50LmF1ZGlvVGltZXN0YW1wcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXVkaW9FbGVtZW50LmF1ZGlvVGltZXN0YW1wcy50aW1lc3RhbXBzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgd29yZFRpbWVzdGFtcEVsZW1lbnQ6IFdvcmRUaW1lc3RhbXBFbGVtZW50ID0gYXVkaW9FbGVtZW50LmF1ZGlvVGltZXN0YW1wcy50aW1lc3RhbXBzW2ldO1xyXG4gICAgICAgICAgICAgICAgbGV0IHdvcmRBdWRpb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIik7XHJcbiAgICAgICAgICAgICAgICB3b3JkQXVkaW9FbGVtZW50LmlkID0gd29yZFRpbWVzdGFtcEVsZW1lbnQuZG9tSUQ7XHJcbiAgICAgICAgICAgICAgICB3b3JkQXVkaW9FbGVtZW50LnNyYyA9IHRoaXMuYXVkaW9QYXRoICsgd29yZFRpbWVzdGFtcEVsZW1lbnQuYXVkaW9TcmMucmVwbGFjZShcImF1ZGlvcy9cIiwgXCJcIik7XHJcbiAgICAgICAgICAgICAgICB3b3JkQXVkaW9FbGVtZW50LmNvbnRyb2xzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBzZW50ZW5jZUFycmF5VHJpbW1lZC5wdXNoKHdvcmRUaW1lc3RhbXBFbGVtZW50LndvcmQudHJpbSgpKTtcclxuICAgICAgICAgICAgICAgIGF1ZGlvRWxlbWVudERpdi5hcHBlbmRDaGlsZCh3b3JkQXVkaW9FbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXVkaW9BbmRUZXh0QXJyYXkucHVzaChhdWRpb0VsZW1lbnREaXYpO1xyXG5cclxuICAgICAgICBsZXQgYXVkaW9Db250ZW50RE9NSWQgPSBhdWRpb0VsZW1lbnQuZG9tSUQ7XHJcblxyXG4gICAgICAgIGxldCB0ZXh0RWxlbWVudERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblxyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LmlkID0gXCJjci10ZXh0XCI7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuY2xhc3NMaXN0LmFkZChcImNyLXRleHRcIik7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJjZW50ZXJcIjtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS53ZWJraXRUZXh0U3Ryb2tlID0gXCIxcHggIzMwMzAzMFwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmNvbG9yID0gXCIjRkZGRkZGXCI7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUudGV4dFNoYWRvdyA9IFwiMC4xcmVtIDAuMTVyZW0gMC4xcmVtICMzMDMwMzBcIjtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5mb250RmFtaWx5ID0gXCJRdWlja3NhbmRcIjtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5mb250V2VpZ2h0ID0gXCI4MDBcIjtcclxuICAgICAgICAvLyB0ZXh0RWxlbWVudERpdi5zdHlsZS5mb250U2l6ZSA9IFwiMnJlbVwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLnRvcCA9IHRleHRFbGVtZW50LnBvc2l0aW9uWSArIFwiJVwiO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmhlaWdodCA9IHRleHRFbGVtZW50LmhlaWdodCArIFwiJVwiO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChpbWFnZUVsZW1lbnQucG9zaXRpb25YID4gMjggJiYgdGV4dEVsZW1lbnQud2lkdGggPCA4OCAmJiB0ZXh0RWxlbWVudC5wb3NpdGlvblkgPCA2NSkge1xyXG4gICAgICAgICAgICAvLyBMZWZ0IHNpZGUgb2YgdGhlIGltYWdlLCB0eXBpY2FsbHkgIHRoZSBsZWZ0IGFsaWduZWQgdGV4dCBzdGFydHMgd2F5IGFib3ZlIGNvbXBhcmVkIHRvIHRoZSBtaWRkbGUgdGV4dFxyXG4gICAgICAgICAgICAvLyB3aGljaCB3b3VsZCBoYXZlIHBvc2l0aW9uWSA+IDcwIGlmIGl0J3MgYXQgdGhlIGJvdHRvbSBvZiB0aGUgaW1hZ2VcclxuICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUubGVmdCA9IHRleHRFbGVtZW50LnBvc2l0aW9uWCArIFwiJVwiO1xyXG4gICAgICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS53aWR0aCA9IFwiNDIlXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbWFnZUVsZW1lbnQucG9zaXRpb25YIDw9IDI4ICYmIHRleHRFbGVtZW50LndpZHRoIDwgODgpIHtcclxuICAgICAgICAgICAgLy8gUmlnaHQgc2lkZSBvZiB0aGUgaW1hZ2VcclxuICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUubGVmdCA9IHRleHRFbGVtZW50LnBvc2l0aW9uWCArIDIgKyBcIiVcIjtcclxuICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUud2lkdGggPSB0ZXh0RWxlbWVudC53aWR0aCArIFwiJVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc2VudGVuY2VQYXJhZ3JhcGg6IEhUTUxQYXJhZ3JhcGhFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgICAgICAgaWYgKGF1ZGlvRWxlbWVudC5hdWRpb1RpbWVzdGFtcHMgIT09IHVuZGVmaW5lZCAmJiBhdWRpb0VsZW1lbnQuYXVkaW9UaW1lc3RhbXBzLnRpbWVzdGFtcHMubGVuZ3RoID4gMTUpIHtcclxuICAgICAgICAgICAgc2VudGVuY2VQYXJhZ3JhcGguY2xhc3NMaXN0LmFkZChcImNyLXNlbnRlbmNlLW1pbmktc1wiKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGF1ZGlvRWxlbWVudC5hdWRpb1RpbWVzdGFtcHMgIT09IHVuZGVmaW5lZCAmJiBhdWRpb0VsZW1lbnQuYXVkaW9UaW1lc3RhbXBzLnRpbWVzdGFtcHMubGVuZ3RoID4gMTIgJiZcclxuICAgICAgICAgICAgYXVkaW9FbGVtZW50LmF1ZGlvVGltZXN0YW1wcy50aW1lc3RhbXBzLmxlbmd0aCA8PSAxNSkge1xyXG4gICAgICAgICAgICBzZW50ZW5jZVBhcmFncmFwaC5jbGFzc0xpc3QuYWRkKFwiY3Itc2VudGVuY2UtbWluaVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VudGVuY2VQYXJhZ3JhcGguc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAvLyBzZW50ZW5jZVBhcmFncmFwaC5zdHlsZS5mb250U2l6ZSA9IFwiMnJlbVwiO1xyXG4gICAgXHJcbiAgICAgICAgc2VudGVuY2VQYXJhZ3JhcGguc3R5bGUubWFyZ2luID0gXCIwcHhcIjtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZW50ZW5jZUFycmF5VHJpbW1lZC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgY2xpY2thYmxlV29yZEVsZW1lbnQ6IEhUTUxTcGFuRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGNsaWNrYWJsZVdvcmRFbGVtZW50LmlkID0gYXVkaW9Db250ZW50RE9NSWQgKyBcIl93b3JkX1wiICsgaTtcclxuICAgICAgICAgICAgY2xpY2thYmxlV29yZEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNyLWNsaWNrYWJsZS13b3JkXCIpO1xyXG4gICAgICAgICAgICBjbGlja2FibGVXb3JkRWxlbWVudC5zdHlsZS5tYXJnaW5MZWZ0ID0gXCIxMHB4XCI7XHJcbiAgICAgICAgICAgIGNsaWNrYWJsZVdvcmRFbGVtZW50LnN0eWxlLm1hcmdpblJpZ2h0ID0gXCIxMHB4XCI7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjbGlja2FibGVXb3JkRWxlbWVudC5pbm5lclRleHQgPSBzZW50ZW5jZUFycmF5VHJpbW1lZFtpXTtcclxuICAgICAgICAgICAgY2xpY2thYmxlV29yZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVJbnRlcmFjdGl2ZVdvcmRDbGljayhwYWdlSW5kZXgsIGkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc2VudGVuY2VQYXJhZ3JhcGguYXBwZW5kQ2hpbGQoY2xpY2thYmxlV29yZEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuYXBwZW5kQ2hpbGQoc2VudGVuY2VQYXJhZ3JhcGgpO1xyXG5cclxuICAgICAgICBhdWRpb0FuZFRleHRBcnJheS5wdXNoKHRleHRFbGVtZW50RGl2KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGF1ZGlvQW5kVGV4dEFycmF5O1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVN0YW5kYWxvbmVHbG93SW1hZ2VDbGljayhwYWdlSW5kZXg6IG51bWJlciwgaWQ6IHN0cmluZykge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRseVBsYXlpbmdBdWRpb0VsZW1lbnQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlQbGF5aW5nQXVkaW9FbGVtZW50LnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudGx5UGxheWluZ0F1ZGlvRWxlbWVudC5jdXJyZW50VGltZSA9IDA7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5jdXJyZW50UGFnZUF1dG9QbGF5ZXJJbnRlcnZhbCk7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmN1cnJlbnRXb3JkUGxheWluZ1RpbWVvdXQpO1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jdXJyZW50R2xvd0ltYWdlVGltZW91dCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzW2ldLnN0eWxlLmJveFNoYWRvdyA9IFwidHJhbnNwYXJlbnQgMHB4IDBweCAyMHB4IDIwcHhcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzID0gQXJyYXkoKTtcclxuXHJcbiAgICAgICAgbGV0IGdsb3dEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkgYXMgSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHRoaXMuY3VycmVudGx5QWN0aXZlR2xvd0ltYWdlcy5wdXNoKGdsb3dEaXYpO1xyXG4gICAgICAgIGdsb3dEaXYuc3R5bGUuYm94U2hhZG93ID0gXCJvcmFuZ2UgMHB4IDBweCAyMHB4IDIwcHhcIjtcclxuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50R2xvd0ltYWdlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgZ2xvd0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgICAgICAgZ2xvd0Rpdi5zdHlsZS5ib3hTaGFkb3cgPSBcInRyYW5zcGFyZW50IDBweCAwcHggMjBweCAyMHB4XCI7XHJcbiAgICAgICAgfSwgNjAwKTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVHbG93SW1hZ2VDbGljayhwYWdlSW5kZXg6IG51bWJlciwgd29yZEluZGV4OiBzdHJpbmcpIHtcclxuICAgICAgICAvLyBQYXJzZSB0aGUgbnVtYmVyIGZyb20gdGhlIHdvcmRJbmRleFxyXG4gICAgICAgIGxldCB3b3JkSW5kZXhOdW1iZXIgPSBwYXJzZUludCh3b3JkSW5kZXgpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlSW50ZXJhY3RpdmVXb3JkQ2xpY2socGFnZUluZGV4LCB3b3JkSW5kZXhOdW1iZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZUNvbm5lY3RlZEdyYXBoaWNIaWdobGlnaHRpbmcocGFnZUluZGV4OiBudW1iZXIsIHdvcmRJbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVJbnRlcmFjdGl2ZVdvcmRDbGljayhwYWdlSW5kZXgsIHdvcmRJbmRleCwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlSW50ZXJhY3RpdmVXb3JkQ2xpY2socGFnZUluZGV4OiBudW1iZXIsIHdvcmRJbmRleDogbnVtYmVyLCBnbG93SW1hZ2VPbmx5OiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50bHlQbGF5aW5nQXVkaW9FbGVtZW50ICE9PSBudWxsICYmICFnbG93SW1hZ2VPbmx5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudGx5UGxheWluZ0F1ZGlvRWxlbWVudC5wYXVzZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRseVBsYXlpbmdBdWRpb0VsZW1lbnQuY3VycmVudFRpbWUgPSAwO1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuY3VycmVudFBhZ2VBdXRvUGxheWVySW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jdXJyZW50V29yZFBsYXlpbmdUaW1lb3V0KTtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY3VycmVudEdsb3dJbWFnZVRpbWVvdXQpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50bHlBY3RpdmVXb3JkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseUFjdGl2ZVdvcmQuY2xhc3NMaXN0LnJlbW92ZShcImNyLWNsaWNrYWJsZS13b3JkLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudGx5QWN0aXZlV29yZC5zdHlsZS5jb2xvciA9IFwid2hpdGVcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzW2ldLnN0eWxlLmJveFNoYWRvdyA9IFwidHJhbnNwYXJlbnQgMHB4IDBweCAyMHB4IDIwcHhcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmN1cnJlbnRseUFjdGl2ZUdsb3dJbWFnZXMgPSBBcnJheSgpO1xyXG4gICAgICAgIGxldCBwYWdlID0gdGhpcy5ib29rLnBhZ2VzW3BhZ2VJbmRleF07XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlLnZpc3VhbEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB2aXN1YWxFbGVtZW50ID0gcGFnZS52aXN1YWxFbGVtZW50c1tpXTtcclxuICAgICAgICAgICAgaWYgKHZpc3VhbEVsZW1lbnQudHlwZSA9PT0gXCJhdWRpb1wiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYXVkaW9FbGVtZW50OiBBdWRpb0VsZW1lbnQgPSB2aXN1YWxFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB3b3JkQXVkaW9FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYXVkaW9FbGVtZW50LmF1ZGlvVGltZXN0YW1wcy50aW1lc3RhbXBzW3dvcmRJbmRleF0uZG9tSUQpIGFzIEhUTUxBdWRpb0VsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFnbG93SW1hZ2VPbmx5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSGlnaGxpZ2h0IHRoZSB3b3JkXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHdvcmRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYXVkaW9FbGVtZW50LmRvbUlEICsgXCJfd29yZF9cIiArIHdvcmRJbmRleCkgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlBY3RpdmVXb3JkID0gd29yZEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNyLWNsaWNrYWJsZS13b3JkLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB3b3JkRWxlbWVudC5zdHlsZS5jb2xvciA9IGF1ZGlvRWxlbWVudC5nbG93Q29sb3I7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRXb3JkUGxheWluZ1RpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd29yZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImNyLWNsaWNrYWJsZS13b3JkLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd29yZEVsZW1lbnQuc3R5bGUuY29sb3IgPSBcIndoaXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgNjAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBIaWdobGlnaHQgdGhlIGNvbm5lY3RlZCBnbG93IGltYWdlc1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbm5lY3RlZEdsb3dJbWFnZUNsYXNzID0gXCJpbWdcIiArIGF1ZGlvRWxlbWVudC5kb21JRCArIFwiX1wiICsgd29yZEluZGV4O1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbm5lY3RlZEdsb3dJbWFnZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNvbm5lY3RlZEdsb3dJbWFnZUNsYXNzKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29ubmVjdGVkR2xvd0ltYWdlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBnbG93RGl2ID0gY29ubmVjdGVkR2xvd0ltYWdlc1tpXSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseUFjdGl2ZUdsb3dJbWFnZXMucHVzaChnbG93RGl2KTtcclxuICAgICAgICAgICAgICAgICAgICBnbG93RGl2LnN0eWxlLmJveFNoYWRvdyA9IGF1ZGlvRWxlbWVudC5nbG93Q29sb3IgKyBcIiAwcHggMHB4IDIwcHggMjBweFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEdsb3dJbWFnZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbm5lY3RlZEdsb3dJbWFnZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGdsb3dEaXYgPSBjb25uZWN0ZWRHbG93SW1hZ2VzW2ldIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnbG93RGl2LnN0eWxlLmJveFNoYWRvdyA9IFwidHJhbnNwYXJlbnQgMHB4IDBweCAyMHB4IDIwcHhcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCA2MDApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghZ2xvd0ltYWdlT25seSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudGx5UGxheWluZ0F1ZGlvRWxlbWVudCA9IHdvcmRBdWRpb0VsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZEF1ZGlvRWxlbWVudC5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZUdETEJvb2soYm9vazogQm9vaykge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9vay5wYWdlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzbGlkZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgICAgICAgc2xpZGUuY2xhc3NMaXN0LmFkZChcInNwbGlkZV9fc2xpZGVcIik7XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgYSBmbGV4Ym94IGNvbnRhaW5lciB0byB0aGUgc2xpZGUgd2l0aCBhIGNvbHVtbiBsYXlvdXRcclxuICAgICAgICAgICAgbGV0IGZsZXhDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBmbGV4Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJnZGwtZmxleC1jb250YWluZXJcIik7XHJcbiAgICAgICAgICAgIGZsZXhDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgICAgICBmbGV4Q29udGFpbmVyLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSBcImNvbHVtblwiO1xyXG4gICAgICAgICAgICBmbGV4Q29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgZmxleENvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgZmxleENvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgZmxleENvbnRhaW5lci5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgICAgICAgICBzbGlkZS5hcHBlbmRDaGlsZChmbGV4Q29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGZvcmVhY2ggdmlzdWFsZWxlbWVudCBpbiBwYWdlIGFkZCB0byBzbGlkZVxyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJvb2sucGFnZXNbaV0udmlzdWFsRWxlbWVudHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCB2aXN1YWxFbGVtZW50ID0gYm9vay5wYWdlc1tpXS52aXN1YWxFbGVtZW50c1tqXTtcclxuICAgICAgICAgICAgICAgIGlmICh2aXN1YWxFbGVtZW50LnR5cGUgPT0gXCJ0ZXh0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGV4dEVsZW1lbnQ6IFRleHRFbGVtZW50ID0gdmlzdWFsRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGV4dEVsZW1lbnREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLndpZHRoID0gXCI2MCVcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuY2xhc3NMaXN0LmFkZChcImdkbC10ZXh0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLndlYmtpdFRleHRTdHJva2UgPSBcIjFweCAjMzAzMDMwXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUuY29sb3IgPSBcIiNGRkZGRkZcIjtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS50ZXh0U2hhZG93ID0gXCIwLjFyZW0gMC4xNXJlbSAwLjFyZW0gIzMwMzAzMFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmZvbnRGYW1pbHkgPSBcIlF1aWNrc2FuZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmZvbnRXZWlnaHQgPSBcIjgwMFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmZvbnRTaXplID0gXCIxLjdlbVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LmlubmVySFRNTCA9IHRleHRFbGVtZW50LnRleHRDb250ZW50QXNIVE1MLnJlcGxhY2UoXCIyLjI1ZW1cIiwgXCIyOHB4XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZsZXhDb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dEVsZW1lbnREaXYpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2aXN1YWxFbGVtZW50LnR5cGUgPT0gXCJpbWFnZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdlRWxlbWVudDogSW1hZ2VFbGVtZW50ID0gdmlzdWFsRWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdlRWxlbWVudERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50RGl2LmNsYXNzTGlzdC5hZGQoXCJnZGwtaW1hZ2VcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbWFnZUVsZW1lbnRJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudEltZy5zcmMgPSB0aGlzLmltYWdlc1BhdGggKyBpbWFnZUVsZW1lbnQuaW1hZ2VTb3VyY2UucmVwbGFjZShcImltYWdlcy9cIiwgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50SW1nLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50SW1nLnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudERpdi5hcHBlbmRDaGlsZChpbWFnZUVsZW1lbnRJbWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZsZXhDb250YWluZXIuYXBwZW5kQ2hpbGQoaW1hZ2VFbGVtZW50RGl2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zcGxpZGVIYW5kbGUuYWRkKHNsaWRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ29Ub05leHRQYWdlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRyYW5zaXRpb25pbmdUb1BhZ2UpIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50UGFnZSA8IHRoaXMubnVtYmVyT2ZQYWdlcykge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudHJhbnNpdGlvblRvUGFnZSh0aGlzLmN1cnJlbnRQYWdlKTtcclxuICAgIH1cclxuXHJcbiAgICBnb1RvUHJldmlvdXNQYWdlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRyYW5zaXRpb25pbmdUb1BhZ2UpIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50UGFnZSA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZS0tO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRyYW5zaXRpb25Ub1BhZ2UodGhpcy5jdXJyZW50UGFnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJhbnNpdGlvblRvUGFnZShwYWdlTnVtYmVyOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnRyYW5zaXRpb25pbmdUb1BhZ2UgPSB0cnVlO1xyXG4gICAgfVxyXG59XHJcbiIsInRyeXtzZWxmW1wid29ya2JveDp3aW5kb3c6Ni41LjNcIl0mJl8oKX1jYXRjaChuKXt9ZnVuY3Rpb24gbihuLHQpe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24ocil7dmFyIGU9bmV3IE1lc3NhZ2VDaGFubmVsO2UucG9ydDEub25tZXNzYWdlPWZ1bmN0aW9uKG4pe3Iobi5kYXRhKX0sbi5wb3N0TWVzc2FnZSh0LFtlLnBvcnQyXSl9KSl9ZnVuY3Rpb24gdChuLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgZT10W3JdO2UuZW51bWVyYWJsZT1lLmVudW1lcmFibGV8fCExLGUuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGUmJihlLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobixlLmtleSxlKX19ZnVuY3Rpb24gcihuLHQpeyhudWxsPT10fHx0Pm4ubGVuZ3RoKSYmKHQ9bi5sZW5ndGgpO2Zvcih2YXIgcj0wLGU9bmV3IEFycmF5KHQpO3I8dDtyKyspZVtyXT1uW3JdO3JldHVybiBlfWZ1bmN0aW9uIGUobix0KXt2YXIgZTtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgU3ltYm9sfHxudWxsPT1uW1N5bWJvbC5pdGVyYXRvcl0pe2lmKEFycmF5LmlzQXJyYXkobil8fChlPWZ1bmN0aW9uKG4sdCl7aWYobil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIG4pcmV0dXJuIHIobix0KTt2YXIgZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobikuc2xpY2UoOCwtMSk7cmV0dXJuXCJPYmplY3RcIj09PWUmJm4uY29uc3RydWN0b3ImJihlPW4uY29uc3RydWN0b3IubmFtZSksXCJNYXBcIj09PWV8fFwiU2V0XCI9PT1lP0FycmF5LmZyb20obik6XCJBcmd1bWVudHNcIj09PWV8fC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KGUpP3Iobix0KTp2b2lkIDB9fShuKSl8fHQmJm4mJlwibnVtYmVyXCI9PXR5cGVvZiBuLmxlbmd0aCl7ZSYmKG49ZSk7dmFyIGk9MDtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gaT49bi5sZW5ndGg/e2RvbmU6ITB9Ontkb25lOiExLHZhbHVlOm5baSsrXX19fXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKX1yZXR1cm4oZT1uW1N5bWJvbC5pdGVyYXRvcl0oKSkubmV4dC5iaW5kKGUpfXRyeXtzZWxmW1wid29ya2JveDpjb3JlOjYuNS4zXCJdJiZfKCl9Y2F0Y2gobil7fXZhciBpPWZ1bmN0aW9uKCl7dmFyIG49dGhpczt0aGlzLnByb21pc2U9bmV3IFByb21pc2UoKGZ1bmN0aW9uKHQscil7bi5yZXNvbHZlPXQsbi5yZWplY3Q9cn0pKX07ZnVuY3Rpb24gbyhuLHQpe3ZhciByPWxvY2F0aW9uLmhyZWY7cmV0dXJuIG5ldyBVUkwobixyKS5ocmVmPT09bmV3IFVSTCh0LHIpLmhyZWZ9dmFyIHU9ZnVuY3Rpb24obix0KXt0aGlzLnR5cGU9bixPYmplY3QuYXNzaWduKHRoaXMsdCl9O2Z1bmN0aW9uIGEobix0LHIpe3JldHVybiByP3Q/dChuKTpuOihuJiZuLnRoZW58fChuPVByb21pc2UucmVzb2x2ZShuKSksdD9uLnRoZW4odCk6bil9ZnVuY3Rpb24gYygpe312YXIgZj17dHlwZTpcIlNLSVBfV0FJVElOR1wifTtmdW5jdGlvbiBzKG4sdCl7aWYoIXQpcmV0dXJuIG4mJm4udGhlbj9uLnRoZW4oYyk6UHJvbWlzZS5yZXNvbHZlKCl9dmFyIHY9ZnVuY3Rpb24ocil7dmFyIGUsYztmdW5jdGlvbiB2KG4sdCl7dmFyIGUsYztyZXR1cm4gdm9pZCAwPT09dCYmKHQ9e30pLChlPXIuY2FsbCh0aGlzKXx8dGhpcykubm49e30sZS50bj0wLGUucm49bmV3IGksZS5lbj1uZXcgaSxlLm9uPW5ldyBpLGUudW49MCxlLmFuPW5ldyBTZXQsZS5jbj1mdW5jdGlvbigpe3ZhciBuPWUuZm4sdD1uLmluc3RhbGxpbmc7ZS50bj4wfHwhbyh0LnNjcmlwdFVSTCxlLnNuLnRvU3RyaW5nKCkpfHxwZXJmb3JtYW5jZS5ub3coKT5lLnVuKzZlND8oZS52bj10LG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInVwZGF0ZWZvdW5kXCIsZS5jbikpOihlLmhuPXQsZS5hbi5hZGQodCksZS5ybi5yZXNvbHZlKHQpKSwrK2UudG4sdC5hZGRFdmVudExpc3RlbmVyKFwic3RhdGVjaGFuZ2VcIixlLmxuKX0sZS5sbj1mdW5jdGlvbihuKXt2YXIgdD1lLmZuLHI9bi50YXJnZXQsaT1yLnN0YXRlLG89cj09PWUudm4sYT17c3c6cixpc0V4dGVybmFsOm8sb3JpZ2luYWxFdmVudDpufTshbyYmZS5tbiYmKGEuaXNVcGRhdGU9ITApLGUuZGlzcGF0Y2hFdmVudChuZXcgdShpLGEpKSxcImluc3RhbGxlZFwiPT09aT9lLnduPXNlbGYuc2V0VGltZW91dCgoZnVuY3Rpb24oKXtcImluc3RhbGxlZFwiPT09aSYmdC53YWl0aW5nPT09ciYmZS5kaXNwYXRjaEV2ZW50KG5ldyB1KFwid2FpdGluZ1wiLGEpKX0pLDIwMCk6XCJhY3RpdmF0aW5nXCI9PT1pJiYoY2xlYXJUaW1lb3V0KGUud24pLG98fGUuZW4ucmVzb2x2ZShyKSl9LGUuZG49ZnVuY3Rpb24obil7dmFyIHQ9ZS5obixyPXQhPT1uYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyO2UuZGlzcGF0Y2hFdmVudChuZXcgdShcImNvbnRyb2xsaW5nXCIse2lzRXh0ZXJuYWw6cixvcmlnaW5hbEV2ZW50Om4sc3c6dCxpc1VwZGF0ZTplLm1ufSkpLHJ8fGUub24ucmVzb2x2ZSh0KX0sZS5nbj0oYz1mdW5jdGlvbihuKXt2YXIgdD1uLmRhdGEscj1uLnBvcnRzLGk9bi5zb3VyY2U7cmV0dXJuIGEoZS5nZXRTVygpLChmdW5jdGlvbigpe2UuYW4uaGFzKGkpJiZlLmRpc3BhdGNoRXZlbnQobmV3IHUoXCJtZXNzYWdlXCIse2RhdGE6dCxvcmlnaW5hbEV2ZW50Om4scG9ydHM6cixzdzppfSkpfSkpfSxmdW5jdGlvbigpe2Zvcih2YXIgbj1bXSx0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyluW3RdPWFyZ3VtZW50c1t0XTt0cnl7cmV0dXJuIFByb21pc2UucmVzb2x2ZShjLmFwcGx5KHRoaXMsbikpfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19KSxlLnNuPW4sZS5ubj10LG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsZS5nbiksZX1jPXIsKGU9dikucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5fX3Byb3RvX189Yzt2YXIgaCxsLG0sdz12LnByb3RvdHlwZTtyZXR1cm4gdy5yZWdpc3Rlcj1mdW5jdGlvbihuKXt2YXIgdD0odm9pZCAwPT09bj97fTpuKS5pbW1lZGlhdGUscj12b2lkIDAhPT10JiZ0O3RyeXt2YXIgZT10aGlzO3JldHVybiBmdW5jdGlvbihuLHQpe3ZhciByPW4oKTtpZihyJiZyLnRoZW4pcmV0dXJuIHIudGhlbih0KTtyZXR1cm4gdChyKX0oKGZ1bmN0aW9uKCl7aWYoIXImJlwiY29tcGxldGVcIiE9PWRvY3VtZW50LnJlYWR5U3RhdGUpcmV0dXJuIHMobmV3IFByb21pc2UoKGZ1bmN0aW9uKG4pe3JldHVybiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixuKX0pKSl9KSwoZnVuY3Rpb24oKXtyZXR1cm4gZS5tbj1Cb29sZWFuKG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXIpLGUueW49ZS5wbigpLGEoZS5ibigpLChmdW5jdGlvbihuKXtlLmZuPW4sZS55biYmKGUuaG49ZS55bixlLmVuLnJlc29sdmUoZS55biksZS5vbi5yZXNvbHZlKGUueW4pLGUueW4uYWRkRXZlbnRMaXN0ZW5lcihcInN0YXRlY2hhbmdlXCIsZS5sbix7b25jZTohMH0pKTt2YXIgdD1lLmZuLndhaXRpbmc7cmV0dXJuIHQmJm8odC5zY3JpcHRVUkwsZS5zbi50b1N0cmluZygpKSYmKGUuaG49dCxQcm9taXNlLnJlc29sdmUoKS50aGVuKChmdW5jdGlvbigpe2UuZGlzcGF0Y2hFdmVudChuZXcgdShcIndhaXRpbmdcIix7c3c6dCx3YXNXYWl0aW5nQmVmb3JlUmVnaXN0ZXI6ITB9KSl9KSkudGhlbigoZnVuY3Rpb24oKXt9KSkpLGUuaG4mJihlLnJuLnJlc29sdmUoZS5obiksZS5hbi5hZGQoZS5obikpLGUuZm4uYWRkRXZlbnRMaXN0ZW5lcihcInVwZGF0ZWZvdW5kXCIsZS5jbiksbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRyb2xsZXJjaGFuZ2VcIixlLmRuKSxlLmZufSkpfSkpfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19LHcudXBkYXRlPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmZuP3ModGhpcy5mbi51cGRhdGUoKSk6dm9pZCAwfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19LHcuZ2V0U1c9ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5obj9Qcm9taXNlLnJlc29sdmUodGhpcy5obik6dGhpcy5ybi5wcm9taXNlfSx3Lm1lc3NhZ2VTVz1mdW5jdGlvbih0KXt0cnl7cmV0dXJuIGEodGhpcy5nZXRTVygpLChmdW5jdGlvbihyKXtyZXR1cm4gbihyLHQpfSkpfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19LHcubWVzc2FnZVNraXBXYWl0aW5nPWZ1bmN0aW9uKCl7dGhpcy5mbiYmdGhpcy5mbi53YWl0aW5nJiZuKHRoaXMuZm4ud2FpdGluZyxmKX0sdy5wbj1mdW5jdGlvbigpe3ZhciBuPW5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXI7cmV0dXJuIG4mJm8obi5zY3JpcHRVUkwsdGhpcy5zbi50b1N0cmluZygpKT9uOnZvaWQgMH0sdy5ibj1mdW5jdGlvbigpe3RyeXt2YXIgbj10aGlzO3JldHVybiBmdW5jdGlvbihuLHQpe3RyeXt2YXIgcj1uKCl9Y2F0Y2gobil7cmV0dXJuIHQobil9aWYociYmci50aGVuKXJldHVybiByLnRoZW4odm9pZCAwLHQpO3JldHVybiByfSgoZnVuY3Rpb24oKXtyZXR1cm4gYShuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcihuLnNuLG4ubm4pLChmdW5jdGlvbih0KXtyZXR1cm4gbi51bj1wZXJmb3JtYW5jZS5ub3coKSx0fSkpfSksKGZ1bmN0aW9uKG4pe3Rocm93IG59KSl9Y2F0Y2gobil7cmV0dXJuIFByb21pc2UucmVqZWN0KG4pfX0saD12LChsPVt7a2V5OlwiYWN0aXZlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW4ucHJvbWlzZX19LHtrZXk6XCJjb250cm9sbGluZ1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9uLnByb21pc2V9fV0pJiZ0KGgucHJvdG90eXBlLGwpLG0mJnQoaCxtKSx2fShmdW5jdGlvbigpe2Z1bmN0aW9uIG4oKXt0aGlzLlBuPW5ldyBNYXB9dmFyIHQ9bi5wcm90b3R5cGU7cmV0dXJuIHQuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihuLHQpe3RoaXMuU24obikuYWRkKHQpfSx0LnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24obix0KXt0aGlzLlNuKG4pLmRlbGV0ZSh0KX0sdC5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKG4pe24udGFyZ2V0PXRoaXM7Zm9yKHZhciB0LHI9ZSh0aGlzLlNuKG4udHlwZSkpOyEodD1yKCkpLmRvbmU7KXsoMCx0LnZhbHVlKShuKX19LHQuU249ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuUG4uaGFzKG4pfHx0aGlzLlBuLnNldChuLG5ldyBTZXQpLHRoaXMuUG4uZ2V0KG4pfSxufSgpKTtleHBvcnR7diBhcyBXb3JrYm94LHUgYXMgV29ya2JveEV2ZW50LG4gYXMgbWVzc2FnZVNXfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdvcmtib3gtd2luZG93LnByb2QuZXM1Lm1qcy5tYXBcbiIsIi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IEZpcmViYXNlIGNvbnN0YW50cy4gIFNvbWUgb2YgdGhlc2UgKEBkZWZpbmVzKSBjYW4gYmUgb3ZlcnJpZGRlbiBhdCBjb21waWxlLXRpbWUuXHJcbiAqL1xyXG5jb25zdCBDT05TVEFOVFMgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgY2xpZW50IE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0NMSUVOVDogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgQWRtaW4gTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQURNSU46IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlYmFzZSBTREsgVmVyc2lvblxyXG4gICAgICovXHJcbiAgICBTREtfVkVSU0lPTjogJyR7SlNDT1JFX1ZFUlNJT059J1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBwcm92aWRlZCBhc3NlcnRpb24gaXMgZmFsc3lcclxuICovXHJcbmNvbnN0IGFzc2VydCA9IGZ1bmN0aW9uIChhc3NlcnRpb24sIG1lc3NhZ2UpIHtcclxuICAgIGlmICghYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgdGhyb3cgYXNzZXJ0aW9uRXJyb3IobWVzc2FnZSk7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIEVycm9yIG9iamVjdCBzdWl0YWJsZSBmb3IgdGhyb3dpbmcuXHJcbiAqL1xyXG5jb25zdCBhc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICByZXR1cm4gbmV3IEVycm9yKCdGaXJlYmFzZSBEYXRhYmFzZSAoJyArXHJcbiAgICAgICAgQ09OU1RBTlRTLlNES19WRVJTSU9OICtcclxuICAgICAgICAnKSBJTlRFUk5BTCBBU1NFUlQgRkFJTEVEOiAnICtcclxuICAgICAgICBtZXNzYWdlKTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkkMSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmXHJcbiAgICAgICAgICAgIGkgKyAxIDwgc3RyLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICAoc3RyLmNoYXJDb2RlQXQoaSArIDEpICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKChjICYgMHgwM2ZmKSA8PCAxMCkgKyAoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDB4MDNmZik7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBUdXJucyBhbiBhcnJheSBvZiBudW1iZXJzIGludG8gdGhlIHN0cmluZyBnaXZlbiBieSB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGVcclxuICogY2hhcmFjdGVycyB0byB3aGljaCB0aGUgbnVtYmVycyBjb3JyZXNwb25kLlxyXG4gKiBAcGFyYW0gYnl0ZXMgQXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgY2hhcmFjdGVycy5cclxuICogQHJldHVybiBTdHJpbmdpZmljYXRpb24gb2YgdGhlIGFycmF5LlxyXG4gKi9cclxuY29uc3QgYnl0ZUFycmF5VG9TdHJpbmcgPSBmdW5jdGlvbiAoYnl0ZXMpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwb3MgPSAwLCBjID0gMDtcclxuICAgIHdoaWxlIChwb3MgPCBieXRlcy5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBjMSA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICBpZiAoYzEgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAxOTEgJiYgYzEgPCAyMjQpIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMzEpIDw8IDYpIHwgKGMyICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAyMzkgJiYgYzEgPCAzNjUpIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjNCA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgdSA9ICgoKGMxICYgNykgPDwgMTgpIHwgKChjMiAmIDYzKSA8PCAxMikgfCAoKGMzICYgNjMpIDw8IDYpIHwgKGM0ICYgNjMpKSAtXHJcbiAgICAgICAgICAgICAgICAweDEwMDAwO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkODAwICsgKHUgPj4gMTApKTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZGMwMCArICh1ICYgMTAyMykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDE1KSA8PCAxMikgfCAoKGMyICYgNjMpIDw8IDYpIHwgKGMzICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0LmpvaW4oJycpO1xyXG59O1xyXG4vLyBXZSBkZWZpbmUgaXQgYXMgYW4gb2JqZWN0IGxpdGVyYWwgaW5zdGVhZCBvZiBhIGNsYXNzIGJlY2F1c2UgYSBjbGFzcyBjb21waWxlZCBkb3duIHRvIGVzNSBjYW4ndFxyXG4vLyBiZSB0cmVlc2hha2VkLiBodHRwczovL2dpdGh1Yi5jb20vcm9sbHVwL3JvbGx1cC9pc3N1ZXMvMTY5MVxyXG4vLyBTdGF0aWMgbG9va3VwIG1hcHMsIGxhemlseSBwb3B1bGF0ZWQgYnkgaW5pdF8oKVxyXG5jb25zdCBiYXNlNjQgPSB7XHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gY2hhcmFjdGVycy5cclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqL1xyXG4gICAgY2hhclRvQnl0ZU1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gd2Vic2FmZSBjaGFyYWN0ZXJzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcFdlYlNhZmVfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIHdlYnNhZmUgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQsIHNoYXJlZCBiZXR3ZWVuXHJcbiAgICAgKiBFTkNPREVEX1ZBTFMgYW5kIEVOQ09ERURfVkFMU19XRUJTQUZFXHJcbiAgICAgKi9cclxuICAgIEVOQ09ERURfVkFMU19CQVNFOiAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonICsgJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JyArICcwMTIzNDU2Nzg5JyxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQuIFZhbHVlIDY0ICg9KSBpcyBzcGVjaWFsOyBpdCBtZWFucyBcIm5vdGhpbmcuXCJcclxuICAgICAqL1xyXG4gICAgZ2V0IEVOQ09ERURfVkFMUygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICcrLz0nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIHdlYnNhZmUgYWxwaGFiZXQuXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFNfV0VCU0FGRSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICctXy4nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogV2hldGhlciB0aGlzIGJyb3dzZXIgc3VwcG9ydHMgdGhlIGF0b2IgYW5kIGJ0b2EgZnVuY3Rpb25zLiBUaGlzIGV4dGVuc2lvblxyXG4gICAgICogc3RhcnRlZCBhdCBNb3ppbGxhIGJ1dCBpcyBub3cgaW1wbGVtZW50ZWQgYnkgbWFueSBicm93c2Vycy4gV2UgdXNlIHRoZVxyXG4gICAgICogQVNTVU1FXyogdmFyaWFibGVzIHRvIGF2b2lkIHB1bGxpbmcgaW4gdGhlIGZ1bGwgdXNlcmFnZW50IGRldGVjdGlvbiBsaWJyYXJ5XHJcbiAgICAgKiBidXQgc3RpbGwgYWxsb3dpbmcgdGhlIHN0YW5kYXJkIHBlci1icm93c2VyIGNvbXBpbGF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIEhBU19OQVRJVkVfU1VQUE9SVDogdHlwZW9mIGF0b2IgPT09ICdmdW5jdGlvbicsXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYW4gYXJyYXkgb2YgYnl0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEFuIGFycmF5IG9mIGJ5dGVzIChudW1iZXJzIHdpdGhcclxuICAgICAqICAgICB2YWx1ZSBpbiBbMCwgMjU1XSkgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgQm9vbGVhbiBpbmRpY2F0aW5nIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZUJ5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2VuY29kZUJ5dGVBcnJheSB0YWtlcyBhbiBhcnJheSBhcyBhIHBhcmFtZXRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgY29uc3QgYnl0ZVRvQ2hhck1hcCA9IHdlYlNhZmVcclxuICAgICAgICAgICAgPyB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1xyXG4gICAgICAgICAgICA6IHRoaXMuYnl0ZVRvQ2hhck1hcF87XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkgKz0gMykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGlucHV0W2ldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpICsgMSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBpbnB1dFtpICsgMV0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTMgPSBpICsgMiA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBpbnB1dFtpICsgMl0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IGJ5dGUxID4+IDI7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUyID0gKChieXRlMSAmIDB4MDMpIDw8IDQpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTMgPSAoKGJ5dGUyICYgMHgwZikgPDwgMikgfCAoYnl0ZTMgPj4gNik7XHJcbiAgICAgICAgICAgIGxldCBvdXRCeXRlNCA9IGJ5dGUzICYgMHgzZjtcclxuICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTMpIHtcclxuICAgICAgICAgICAgICAgIG91dEJ5dGU0ID0gNjQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhhdmVCeXRlMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dEJ5dGUzID0gNjQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3V0cHV0LnB1c2goYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMV0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTJdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUzXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlNF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQSBzdHJpbmcgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgSWYgdHJ1ZSwgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBidG9hKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlQnl0ZUFycmF5KHN0cmluZ1RvQnl0ZUFycmF5JDEoaW5wdXQpLCB3ZWJTYWZlKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdG9iKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheVRvU3RyaW5nKHRoaXMuZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogSW4gYmFzZS02NCBkZWNvZGluZywgZ3JvdXBzIG9mIGZvdXIgY2hhcmFjdGVycyBhcmUgY29udmVydGVkIGludG8gdGhyZWVcclxuICAgICAqIGJ5dGVzLiAgSWYgdGhlIGVuY29kZXIgZGlkIG5vdCBhcHBseSBwYWRkaW5nLCB0aGUgaW5wdXQgbGVuZ3RoIG1heSBub3RcclxuICAgICAqIGJlIGEgbXVsdGlwbGUgb2YgNC5cclxuICAgICAqXHJcbiAgICAgKiBJbiB0aGlzIGNhc2UsIHRoZSBsYXN0IGdyb3VwIHdpbGwgaGF2ZSBmZXdlciB0aGFuIDQgY2hhcmFjdGVycywgYW5kXHJcbiAgICAgKiBwYWRkaW5nIHdpbGwgYmUgaW5mZXJyZWQuICBJZiB0aGUgZ3JvdXAgaGFzIG9uZSBvciB0d28gY2hhcmFjdGVycywgaXQgZGVjb2Rlc1xyXG4gICAgICogdG8gb25lIGJ5dGUuICBJZiB0aGUgZ3JvdXAgaGFzIHRocmVlIGNoYXJhY3RlcnMsIGl0IGRlY29kZXMgdG8gdHdvIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBJbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlIHdlYi1zYWZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBieXRlcyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIGNvbnN0IGNoYXJUb0J5dGVNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmNoYXJUb0J5dGVNYXBfO1xyXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkrKyldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMiA9IGhhdmVCeXRlMiA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDA7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTQgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlNCA9IGhhdmVCeXRlNCA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGlmIChieXRlMSA9PSBudWxsIHx8IGJ5dGUyID09IG51bGwgfHwgYnl0ZTMgPT0gbnVsbCB8fCBieXRlNCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IChieXRlMSA8PCAyKSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTEpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTMgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTIgPDwgNCkgJiAweGYwKSB8IChieXRlMyA+PiAyKTtcclxuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUyKTtcclxuICAgICAgICAgICAgICAgIGlmIChieXRlNCAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMyA9ICgoYnl0ZTMgPDwgNikgJiAweGMwKSB8IGJ5dGU0O1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogTGF6eSBzdGF0aWMgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uIENhbGxlZCBiZWZvcmVcclxuICAgICAqIGFjY2Vzc2luZyBhbnkgb2YgdGhlIHN0YXRpYyBtYXAgdmFyaWFibGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgaW5pdF8oKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJ5dGVUb0NoYXJNYXBfKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICAvLyBXZSB3YW50IHF1aWNrIG1hcHBpbmdzIGJhY2sgYW5kIGZvcnRoLCBzbyB3ZSBwcmVjb21wdXRlIHR3byBtYXBzLlxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuRU5DT0RFRF9WQUxTLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIC8vIEJlIGZvcmdpdmluZyB3aGVuIGRlY29kaW5nIGFuZCBjb3JyZWN0bHkgZGVjb2RlIGJvdGggZW5jb2RpbmdzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBBbiBlcnJvciBlbmNvdW50ZXJlZCB3aGlsZSBkZWNvZGluZyBiYXNlNjQgc3RyaW5nLlxyXG4gKi9cclxuY2xhc3MgRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIHRoaXMubmFtZSA9ICdEZWNvZGVCYXNlNjRTdHJpbmdFcnJvcic7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZ1xyXG4gKi9cclxuY29uc3QgYmFzZTY0RW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgY29uc3QgdXRmOEJ5dGVzID0gc3RyaW5nVG9CeXRlQXJyYXkkMShzdHIpO1xyXG4gICAgcmV0dXJuIGJhc2U2NC5lbmNvZGVCeXRlQXJyYXkodXRmOEJ5dGVzLCB0cnVlKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZyAod2l0aG91dCBcIi5cIiBwYWRkaW5nIGluIHRoZSBlbmQpLlxyXG4gKiBlLmcuIFVzZWQgaW4gSlNPTiBXZWIgVG9rZW4gKEpXVCkgcGFydHMuXHJcbiAqL1xyXG5jb25zdCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFVzZSBiYXNlNjR1cmwgZW5jb2RpbmcgYW5kIHJlbW92ZSBwYWRkaW5nIGluIHRoZSBlbmQgKGRvdCBjaGFyYWN0ZXJzKS5cclxuICAgIHJldHVybiBiYXNlNjRFbmNvZGUoc3RyKS5yZXBsYWNlKC9cXC4vZywgJycpO1xyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGRlY29kaW5nXHJcbiAqXHJcbiAqIE5PVEU6IERPIE5PVCB1c2UgdGhlIGdsb2JhbCBhdG9iKCkgZnVuY3Rpb24gLSBpdCBkb2VzIE5PVCBzdXBwb3J0IHRoZVxyXG4gKiBiYXNlNjRVcmwgdmFyaWFudCBlbmNvZGluZy5cclxuICpcclxuICogQHBhcmFtIHN0ciBUbyBiZSBkZWNvZGVkXHJcbiAqIEByZXR1cm4gRGVjb2RlZCByZXN1bHQsIGlmIHBvc3NpYmxlXHJcbiAqL1xyXG5jb25zdCBiYXNlNjREZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBiYXNlNjQuZGVjb2RlU3RyaW5nKHN0ciwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Jhc2U2NERlY29kZSBmYWlsZWQ6ICcsIGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEbyBhIGRlZXAtY29weSBvZiBiYXNpYyBKYXZhU2NyaXB0IE9iamVjdHMgb3IgQXJyYXlzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcENvcHkodmFsdWUpIHtcclxuICAgIHJldHVybiBkZWVwRXh0ZW5kKHVuZGVmaW5lZCwgdmFsdWUpO1xyXG59XHJcbi8qKlxyXG4gKiBDb3B5IHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgdG8gdGFyZ2V0IChyZWN1cnNpdmVseSBhbGxvd3MgZXh0ZW5zaW9uXHJcbiAqIG9mIE9iamVjdHMgYW5kIEFycmF5cykuICBTY2FsYXIgdmFsdWVzIGluIHRoZSB0YXJnZXQgYXJlIG92ZXItd3JpdHRlbi5cclxuICogSWYgdGFyZ2V0IGlzIHVuZGVmaW5lZCwgYW4gb2JqZWN0IG9mIHRoZSBhcHByb3ByaWF0ZSB0eXBlIHdpbGwgYmUgY3JlYXRlZFxyXG4gKiAoYW5kIHJldHVybmVkKS5cclxuICpcclxuICogV2UgcmVjdXJzaXZlbHkgY29weSBhbGwgY2hpbGQgcHJvcGVydGllcyBvZiBwbGFpbiBPYmplY3RzIGluIHRoZSBzb3VyY2UtIHNvXHJcbiAqIHRoYXQgbmFtZXNwYWNlLSBsaWtlIGRpY3Rpb25hcmllcyBhcmUgbWVyZ2VkLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgdGhlIHRhcmdldCBjYW4gYmUgYSBmdW5jdGlvbiwgaW4gd2hpY2ggY2FzZSB0aGUgcHJvcGVydGllcyBpblxyXG4gKiB0aGUgc291cmNlIE9iamVjdCBhcmUgY29waWVkIG9udG8gaXQgYXMgc3RhdGljIHByb3BlcnRpZXMgb2YgdGhlIEZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBOb3RlOiB3ZSBkb24ndCBtZXJnZSBfX3Byb3RvX18gdG8gcHJldmVudCBwcm90b3R5cGUgcG9sbHV0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XHJcbiAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBPYmplY3QpKSB7XHJcbiAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoc291cmNlLmNvbnN0cnVjdG9yKSB7XHJcbiAgICAgICAgY2FzZSBEYXRlOlxyXG4gICAgICAgICAgICAvLyBUcmVhdCBEYXRlcyBsaWtlIHNjYWxhcnM7IGlmIHRoZSB0YXJnZXQgZGF0ZSBvYmplY3QgaGFkIGFueSBjaGlsZFxyXG4gICAgICAgICAgICAvLyBwcm9wZXJ0aWVzIC0gdGhleSB3aWxsIGJlIGxvc3QhXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVWYWx1ZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVWYWx1ZS5nZXRUaW1lKCkpO1xyXG4gICAgICAgIGNhc2UgT2JqZWN0OlxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQXJyYXk6XHJcbiAgICAgICAgICAgIC8vIEFsd2F5cyBjb3B5IHRoZSBhcnJheSBzb3VyY2UgYW5kIG92ZXJ3cml0ZSB0aGUgdGFyZ2V0LlxyXG4gICAgICAgICAgICB0YXJnZXQgPSBbXTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgLy8gTm90IGEgcGxhaW4gT2JqZWN0IC0gdHJlYXQgaXQgYXMgYSBzY2FsYXIuXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IHByb3AgaW4gc291cmNlKSB7XHJcbiAgICAgICAgLy8gdXNlIGlzVmFsaWRLZXkgdG8gZ3VhcmQgYWdhaW5zdCBwcm90b3R5cGUgcG9sbHV0aW9uLiBTZWUgaHR0cHM6Ly9zbnlrLmlvL3Z1bG4vU05ZSy1KUy1MT0RBU0gtNDUwMjAyXHJcbiAgICAgICAgaWYgKCFzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgIWlzVmFsaWRLZXkocHJvcCkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhcmdldFtwcm9wXSA9IGRlZXBFeHRlbmQodGFyZ2V0W3Byb3BdLCBzb3VyY2VbcHJvcF0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhcmdldDtcclxufVxyXG5mdW5jdGlvbiBpc1ZhbGlkS2V5KGtleSkge1xyXG4gICAgcmV0dXJuIGtleSAhPT0gJ19fcHJvdG9fXyc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFBvbHlmaWxsIGZvciBgZ2xvYmFsVGhpc2Agb2JqZWN0LlxyXG4gKiBAcmV0dXJucyB0aGUgYGdsb2JhbFRoaXNgIG9iamVjdCBmb3IgdGhlIGdpdmVuIGVudmlyb25tZW50LlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRHbG9iYWwoKSB7XHJcbiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGY7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93O1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIGdsb2JhbDtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGxvY2F0ZSBnbG9iYWwgb2JqZWN0LicpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUdsb2JhbCA9ICgpID0+IGdldEdsb2JhbCgpLl9fRklSRUJBU0VfREVGQVVMVFNfXztcclxuLyoqXHJcbiAqIEF0dGVtcHQgdG8gcmVhZCBkZWZhdWx0cyBmcm9tIGEgSlNPTiBzdHJpbmcgcHJvdmlkZWQgdG9cclxuICogcHJvY2VzcyguKWVudiguKV9fRklSRUJBU0VfREVGQVVMVFNfXyBvciBhIEpTT04gZmlsZSB3aG9zZSBwYXRoIGlzIGluXHJcbiAqIHByb2Nlc3MoLillbnYoLilfX0ZJUkVCQVNFX0RFRkFVTFRTX1BBVEhfX1xyXG4gKiBUaGUgZG90cyBhcmUgaW4gcGFyZW5zIGJlY2F1c2UgY2VydGFpbiBjb21waWxlcnMgKFZpdGU/KSBjYW5ub3RcclxuICogaGFuZGxlIHNlZWluZyB0aGF0IHZhcmlhYmxlIGluIGNvbW1lbnRzLlxyXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvNjgzOFxyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUgPSAoKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHByb2Nlc3MgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBwcm9jZXNzLmVudiA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWZhdWx0c0pzb25TdHJpbmcgPSBwcm9jZXNzLmVudi5fX0ZJUkVCQVNFX0RFRkFVTFRTX187XHJcbiAgICBpZiAoZGVmYXVsdHNKc29uU3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGVmYXVsdHNKc29uU3RyaW5nKTtcclxuICAgIH1cclxufTtcclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tQ29va2llID0gKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgbWF0Y2g7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKC9fX0ZJUkVCQVNFX0RFRkFVTFRTX189KFteO10rKS8pO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBTb21lIGVudmlyb25tZW50cyBzdWNoIGFzIEFuZ3VsYXIgVW5pdmVyc2FsIFNTUiBoYXZlIGFcclxuICAgICAgICAvLyBgZG9jdW1lbnRgIG9iamVjdCBidXQgZXJyb3Igb24gYWNjZXNzaW5nIGBkb2N1bWVudC5jb29raWVgLlxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGRlY29kZWQgPSBtYXRjaCAmJiBiYXNlNjREZWNvZGUobWF0Y2hbMV0pO1xyXG4gICAgcmV0dXJuIGRlY29kZWQgJiYgSlNPTi5wYXJzZShkZWNvZGVkKTtcclxufTtcclxuLyoqXHJcbiAqIEdldCB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdC4gSXQgY2hlY2tzIGluIG9yZGVyOlxyXG4gKiAoMSkgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGFzIGEgcHJvcGVydHkgb2YgYGdsb2JhbFRoaXNgXHJcbiAqICgyKSBpZiBzdWNoIGFuIG9iamVjdCB3YXMgcHJvdmlkZWQgb24gYSBzaGVsbCBlbnZpcm9ubWVudCB2YXJpYWJsZVxyXG4gKiAoMykgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGluIGEgY29va2llXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzID0gKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKGdldERlZmF1bHRzRnJvbUdsb2JhbCgpIHx8XHJcbiAgICAgICAgICAgIGdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlKCkgfHxcclxuICAgICAgICAgICAgZ2V0RGVmYXVsdHNGcm9tQ29va2llKCkpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXRjaC1hbGwgZm9yIGJlaW5nIHVuYWJsZSB0byBnZXQgX19GSVJFQkFTRV9ERUZBVUxUU19fIGR1ZVxyXG4gICAgICAgICAqIHRvIGFueSBlbnZpcm9ubWVudCBjYXNlIHdlIGhhdmUgbm90IGFjY291bnRlZCBmb3IuIExvZyB0b1xyXG4gICAgICAgICAqIGluZm8gaW5zdGVhZCBvZiBzd2FsbG93aW5nIHNvIHdlIGNhbiBmaW5kIHRoZXNlIHVua25vd24gY2FzZXNcclxuICAgICAgICAgKiBhbmQgYWRkIHBhdGhzIGZvciB0aGVtIGlmIG5lZWRlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zb2xlLmluZm8oYFVuYWJsZSB0byBnZXQgX19GSVJFQkFTRV9ERUZBVUxUU19fIGR1ZSB0bzogJHtlfWApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgZW11bGF0b3IgaG9zdCBzdG9yZWQgaW4gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3RcclxuICogZm9yIHRoZSBnaXZlbiBwcm9kdWN0LlxyXG4gKiBAcmV0dXJucyBhIFVSTCBob3N0IGZvcm1hdHRlZCBsaWtlIGAxMjcuMC4wLjE6OTk5OWAgb3IgYFs6OjFdOjQwMDBgIGlmIGF2YWlsYWJsZVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0RW11bGF0b3JIb3N0ID0gKHByb2R1Y3ROYW1lKSA9PiB7IHZhciBfYSwgX2I7IHJldHVybiAoX2IgPSAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZW11bGF0b3JIb3N0cykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iW3Byb2R1Y3ROYW1lXTsgfTtcclxuLyoqXHJcbiAqIFJldHVybnMgZW11bGF0b3IgaG9zdG5hbWUgYW5kIHBvcnQgc3RvcmVkIGluIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0XHJcbiAqIGZvciB0aGUgZ2l2ZW4gcHJvZHVjdC5cclxuICogQHJldHVybnMgYSBwYWlyIG9mIGhvc3RuYW1lIGFuZCBwb3J0IGxpa2UgYFtcIjo6MVwiLCA0MDAwXWAgaWYgYXZhaWxhYmxlXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCA9IChwcm9kdWN0TmFtZSkgPT4ge1xyXG4gICAgY29uc3QgaG9zdCA9IGdldERlZmF1bHRFbXVsYXRvckhvc3QocHJvZHVjdE5hbWUpO1xyXG4gICAgaWYgKCFob3N0KSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGNvbnN0IHNlcGFyYXRvckluZGV4ID0gaG9zdC5sYXN0SW5kZXhPZignOicpOyAvLyBGaW5kaW5nIHRoZSBsYXN0IHNpbmNlIElQdjYgYWRkciBhbHNvIGhhcyBjb2xvbnMuXHJcbiAgICBpZiAoc2VwYXJhdG9ySW5kZXggPD0gMCB8fCBzZXBhcmF0b3JJbmRleCArIDEgPT09IGhvc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGhvc3QgJHtob3N0fSB3aXRoIG5vIHNlcGFyYXRlIGhvc3RuYW1lIGFuZCBwb3J0IWApO1xyXG4gICAgfVxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xyXG4gICAgY29uc3QgcG9ydCA9IHBhcnNlSW50KGhvc3Quc3Vic3RyaW5nKHNlcGFyYXRvckluZGV4ICsgMSksIDEwKTtcclxuICAgIGlmIChob3N0WzBdID09PSAnWycpIHtcclxuICAgICAgICAvLyBCcmFja2V0LXF1b3RlZCBgW2lwdjZhZGRyXTpwb3J0YCA9PiByZXR1cm4gXCJpcHY2YWRkclwiICh3aXRob3V0IGJyYWNrZXRzKS5cclxuICAgICAgICByZXR1cm4gW2hvc3Quc3Vic3RyaW5nKDEsIHNlcGFyYXRvckluZGV4IC0gMSksIHBvcnRdO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFtob3N0LnN1YnN0cmluZygwLCBzZXBhcmF0b3JJbmRleCksIHBvcnRdO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBGaXJlYmFzZSBhcHAgY29uZmlnIHN0b3JlZCBpbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdC5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdEFwcENvbmZpZyA9ICgpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbmZpZzsgfTtcclxuLyoqXHJcbiAqIFJldHVybnMgYW4gZXhwZXJpbWVudGFsIHNldHRpbmcgb24gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QgKHByb3BlcnRpZXNcclxuICogcHJlZml4ZWQgYnkgXCJfXCIpXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldEV4cGVyaW1lbnRhbFNldHRpbmcgPSAobmFtZSkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbYF8ke25hbWV9YF07IH07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIERlZmVycmVkIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucmVqZWN0ID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZSA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgQVBJIGludGVybmFscyBhcmUgbm90IHByb21pc2VpZmllZCBhbmQgY2Fubm90IGJlY2F1c2Ugb3VyIGNhbGxiYWNrIEFQSXMgaGF2ZSBzdWJ0bGUgZXhwZWN0YXRpb25zIGFyb3VuZFxyXG4gICAgICogaW52b2tpbmcgcHJvbWlzZXMgaW5saW5lLCB3aGljaCBQcm9taXNlcyBhcmUgZm9yYmlkZGVuIHRvIGRvLiBUaGlzIG1ldGhvZCBhY2NlcHRzIGFuIG9wdGlvbmFsIG5vZGUtc3R5bGUgY2FsbGJhY2tcclxuICAgICAqIGFuZCByZXR1cm5zIGEgbm9kZS1zdHlsZSBjYWxsYmFjayB3aGljaCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0IHRoZSBEZWZlcnJlZCdzIHByb21pc2UuXHJcbiAgICAgKi9cclxuICAgIHdyYXBDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybiAoZXJyb3IsIHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2hpbmcgbm9vcCBoYW5kbGVyIGp1c3QgaW4gY2FzZSBkZXZlbG9wZXIgd2Fzbid0IGV4cGVjdGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gcHJvbWlzZXNcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvbWlzZS5jYXRjaCgoKSA9PiB7IH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gU29tZSBvZiBvdXIgY2FsbGJhY2tzIGRvbid0IGV4cGVjdCBhIHZhbHVlIGFuZCBvdXIgb3duIHRlc3RzXHJcbiAgICAgICAgICAgICAgICAvLyBhc3NlcnQgdGhhdCB0aGUgcGFyYW1ldGVyIGxlbmd0aCBpcyAxXHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2subGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlTW9ja1VzZXJUb2tlbih0b2tlbiwgcHJvamVjdElkKSB7XHJcbiAgICBpZiAodG9rZW4udWlkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgXCJ1aWRcIiBmaWVsZCBpcyBubyBsb25nZXIgc3VwcG9ydGVkIGJ5IG1vY2tVc2VyVG9rZW4uIFBsZWFzZSB1c2UgXCJzdWJcIiBpbnN0ZWFkIGZvciBGaXJlYmFzZSBBdXRoIFVzZXIgSUQuJyk7XHJcbiAgICB9XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgXCJub25lXCIgYXMgdGhlIGFsZ29yaXRobS5cclxuICAgIGNvbnN0IGhlYWRlciA9IHtcclxuICAgICAgICBhbGc6ICdub25lJyxcclxuICAgICAgICB0eXBlOiAnSldUJ1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHByb2plY3QgPSBwcm9qZWN0SWQgfHwgJ2RlbW8tcHJvamVjdCc7XHJcbiAgICBjb25zdCBpYXQgPSB0b2tlbi5pYXQgfHwgMDtcclxuICAgIGNvbnN0IHN1YiA9IHRva2VuLnN1YiB8fCB0b2tlbi51c2VyX2lkO1xyXG4gICAgaWYgKCFzdWIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oeyBcclxuICAgICAgICAvLyBTZXQgYWxsIHJlcXVpcmVkIGZpZWxkcyB0byBkZWNlbnQgZGVmYXVsdHNcclxuICAgICAgICBpc3M6IGBodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vJHtwcm9qZWN0fWAsIGF1ZDogcHJvamVjdCwgaWF0LCBleHA6IGlhdCArIDM2MDAsIGF1dGhfdGltZTogaWF0LCBzdWIsIHVzZXJfaWQ6IHN1YiwgZmlyZWJhc2U6IHtcclxuICAgICAgICAgICAgc2lnbl9pbl9wcm92aWRlcjogJ2N1c3RvbScsXHJcbiAgICAgICAgICAgIGlkZW50aXRpZXM6IHt9XHJcbiAgICAgICAgfSB9LCB0b2tlbik7XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgdGhlIGVtcHR5IHN0cmluZyBhcyBhIHNpZ25hdHVyZS5cclxuICAgIGNvbnN0IHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShoZWFkZXIpKSxcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShwYXlsb2FkKSksXHJcbiAgICAgICAgc2lnbmF0dXJlXHJcbiAgICBdLmpvaW4oJy4nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBuYXZpZ2F0b3IudXNlckFnZW50IHN0cmluZyBvciAnJyBpZiBpdCdzIG5vdCBkZWZpbmVkLlxyXG4gKiBAcmV0dXJuIHVzZXIgYWdlbnQgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRVQSgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQ29yZG92YSAvIFBob25lR2FwIC8gSW9uaWMgZnJhbWV3b3JrcyBvbiBhIG1vYmlsZSBkZXZpY2UuXHJcbiAqXHJcbiAqIERlbGliZXJhdGVseSBkb2VzIG5vdCByZWx5IG9uIGNoZWNraW5nIGBmaWxlOi8vYCBVUkxzIChhcyB0aGlzIGZhaWxzIFBob25lR2FwXHJcbiAqIGluIHRoZSBSaXBwbGUgZW11bGF0b3IpIG5vciBDb3Jkb3ZhIGBvbkRldmljZVJlYWR5YCwgd2hpY2ggd291bGQgbm9ybWFsbHlcclxuICogd2FpdCBmb3IgYSBjYWxsYmFjay5cclxuICovXHJcbmZ1bmN0aW9uIGlzTW9iaWxlQ29yZG92YSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFNldHRpbmcgdXAgYW4gYnJvYWRseSBhcHBsaWNhYmxlIGluZGV4IHNpZ25hdHVyZSBmb3IgV2luZG93XHJcbiAgICAgICAgLy8ganVzdCB0byBkZWFsIHdpdGggdGhpcyBjYXNlIHdvdWxkIHByb2JhYmx5IGJlIGEgYmFkIGlkZWEuXHJcbiAgICAgICAgISEod2luZG93Wydjb3Jkb3ZhJ10gfHwgd2luZG93WydwaG9uZWdhcCddIHx8IHdpbmRvd1snUGhvbmVHYXAnXSkgJiZcclxuICAgICAgICAvaW9zfGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZHxibGFja2JlcnJ5fGllbW9iaWxlL2kudGVzdChnZXRVQSgpKSk7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBOb2RlLmpzLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgTm9kZS5qcyBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZCBvciBzcGVjaWZpZWQuXHJcbiAqL1xyXG4vLyBOb2RlIGRldGVjdGlvbiBsb2dpYyBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vaWxpYWthbi9kZXRlY3Qtbm9kZS9cclxuZnVuY3Rpb24gaXNOb2RlKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgZm9yY2VFbnZpcm9ubWVudCA9IChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb3JjZUVudmlyb25tZW50O1xyXG4gICAgaWYgKGZvcmNlRW52aXJvbm1lbnQgPT09ICdub2RlJykge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZm9yY2VFbnZpcm9ubWVudCA9PT0gJ2Jyb3dzZXInKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IEJyb3dzZXIgRW52aXJvbm1lbnRcclxuICovXHJcbmZ1bmN0aW9uIGlzQnJvd3NlcigpIHtcclxuICAgIHJldHVybiB0eXBlb2Ygc2VsZiA9PT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmO1xyXG59XHJcbmZ1bmN0aW9uIGlzQnJvd3NlckV4dGVuc2lvbigpIHtcclxuICAgIGNvbnN0IHJ1bnRpbWUgPSB0eXBlb2YgY2hyb21lID09PSAnb2JqZWN0J1xyXG4gICAgICAgID8gY2hyb21lLnJ1bnRpbWVcclxuICAgICAgICA6IHR5cGVvZiBicm93c2VyID09PSAnb2JqZWN0J1xyXG4gICAgICAgICAgICA/IGJyb3dzZXIucnVudGltZVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgIHJldHVybiB0eXBlb2YgcnVudGltZSA9PT0gJ29iamVjdCcgJiYgcnVudGltZS5pZCAhPT0gdW5kZWZpbmVkO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgUmVhY3QgTmF0aXZlLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgUmVhY3ROYXRpdmUgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1JlYWN0TmF0aXZlKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyAmJiBuYXZpZ2F0b3JbJ3Byb2R1Y3QnXSA9PT0gJ1JlYWN0TmF0aXZlJyk7XHJcbn1cclxuLyoqIERldGVjdHMgRWxlY3Ryb24gYXBwcy4gKi9cclxuZnVuY3Rpb24gaXNFbGVjdHJvbigpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ0VsZWN0cm9uLycpID49IDA7XHJcbn1cclxuLyoqIERldGVjdHMgSW50ZXJuZXQgRXhwbG9yZXIuICovXHJcbmZ1bmN0aW9uIGlzSUUoKSB7XHJcbiAgICBjb25zdCB1YSA9IGdldFVBKCk7XHJcbiAgICByZXR1cm4gdWEuaW5kZXhPZignTVNJRSAnKSA+PSAwIHx8IHVhLmluZGV4T2YoJ1RyaWRlbnQvJykgPj0gMDtcclxufVxyXG4vKiogRGV0ZWN0cyBVbml2ZXJzYWwgV2luZG93cyBQbGF0Zm9ybSBhcHBzLiAqL1xyXG5mdW5jdGlvbiBpc1VXUCgpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ01TQXBwSG9zdC8nKSA+PSAwO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3Qgd2hldGhlciB0aGUgY3VycmVudCBTREsgYnVpbGQgaXMgdGhlIE5vZGUgdmVyc2lvbi5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIGl0J3MgdGhlIE5vZGUgU0RLIGJ1aWxkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNOb2RlU2RrKCkge1xyXG4gICAgcmV0dXJuIENPTlNUQU5UUy5OT0RFX0NMSUVOVCA9PT0gdHJ1ZSB8fCBDT05TVEFOVFMuTk9ERV9BRE1JTiA9PT0gdHJ1ZTtcclxufVxyXG4vKiogUmV0dXJucyB0cnVlIGlmIHdlIGFyZSBydW5uaW5nIGluIFNhZmFyaS4gKi9cclxuZnVuY3Rpb24gaXNTYWZhcmkoKSB7XHJcbiAgICByZXR1cm4gKCFpc05vZGUoKSAmJlxyXG4gICAgICAgICEhbmF2aWdhdG9yLnVzZXJBZ2VudCAmJlxyXG4gICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ1NhZmFyaScpICYmXHJcbiAgICAgICAgIW5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ0Nocm9tZScpKTtcclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICogQHJldHVybiB0cnVlIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICovXHJcbmZ1bmN0aW9uIGlzSW5kZXhlZERCQXZhaWxhYmxlKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIGluZGV4ZWREQiA9PT0gJ29iamVjdCc7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgdmFsaWRhdGVzIGJyb3dzZXIvc3cgY29udGV4dCBmb3IgaW5kZXhlZERCIGJ5IG9wZW5pbmcgYSBkdW1teSBpbmRleGVkREIgZGF0YWJhc2UgYW5kIHJlamVjdFxyXG4gKiBpZiBlcnJvcnMgb2NjdXIgZHVyaW5nIHRoZSBkYXRhYmFzZSBvcGVuIG9wZXJhdGlvbi5cclxuICpcclxuICogQHRocm93cyBleGNlcHRpb24gaWYgY3VycmVudCBicm93c2VyL3N3IGNvbnRleHQgY2FuJ3QgcnVuIGlkYi5vcGVuIChleDogU2FmYXJpIGlmcmFtZSwgRmlyZWZveFxyXG4gKiBwcml2YXRlIGJyb3dzaW5nKVxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IHByZUV4aXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc3QgREJfQ0hFQ0tfTkFNRSA9ICd2YWxpZGF0ZS1icm93c2VyLWNvbnRleHQtZm9yLWluZGV4ZWRkYi1hbmFseXRpY3MtbW9kdWxlJztcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHNlbGYuaW5kZXhlZERCLm9wZW4oREJfQ0hFQ0tfTkFNRSk7XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5yZXN1bHQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBkYXRhYmFzZSBvbmx5IHdoZW4gaXQgZG9lc24ndCBwcmUtZXhpc3RcclxuICAgICAgICAgICAgICAgIGlmICghcHJlRXhpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShEQl9DSEVDS19OQU1FKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcHJlRXhpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KCgoX2EgPSByZXF1ZXN0LmVycm9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWVzc2FnZSkgfHwgJycpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICpcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIHdoZXRoZXIgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxyXG4gKiBAcmV0dXJuIHRydWUgaWYgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxyXG4gKi9cclxuZnVuY3Rpb24gYXJlQ29va2llc0VuYWJsZWQoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcgfHwgIW5hdmlnYXRvci5jb29raWVFbmFibGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU3RhbmRhcmRpemVkIEZpcmViYXNlIEVycm9yLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICpcclxuICogICAvLyBUeXBlc2NyaXB0IHN0cmluZyBsaXRlcmFscyBmb3IgdHlwZS1zYWZlIGNvZGVzXHJcbiAqICAgdHlwZSBFcnIgPVxyXG4gKiAgICAgJ3Vua25vd24nIHxcclxuICogICAgICdvYmplY3Qtbm90LWZvdW5kJ1xyXG4gKiAgICAgO1xyXG4gKlxyXG4gKiAgIC8vIENsb3N1cmUgZW51bSBmb3IgdHlwZS1zYWZlIGVycm9yIGNvZGVzXHJcbiAqICAgLy8gYXQtZW51bSB7c3RyaW5nfVxyXG4gKiAgIHZhciBFcnIgPSB7XHJcbiAqICAgICBVTktOT1dOOiAndW5rbm93bicsXHJcbiAqICAgICBPQkpFQ1RfTk9UX0ZPVU5EOiAnb2JqZWN0LW5vdC1mb3VuZCcsXHJcbiAqICAgfVxyXG4gKlxyXG4gKiAgIGxldCBlcnJvcnM6IE1hcDxFcnIsIHN0cmluZz4gPSB7XHJcbiAqICAgICAnZ2VuZXJpYy1lcnJvcic6IFwiVW5rbm93biBlcnJvclwiLFxyXG4gKiAgICAgJ2ZpbGUtbm90LWZvdW5kJzogXCJDb3VsZCBub3QgZmluZCBmaWxlOiB7JGZpbGV9XCIsXHJcbiAqICAgfTtcclxuICpcclxuICogICAvLyBUeXBlLXNhZmUgZnVuY3Rpb24gLSBtdXN0IHBhc3MgYSB2YWxpZCBlcnJvciBjb2RlIGFzIHBhcmFtLlxyXG4gKiAgIGxldCBlcnJvciA9IG5ldyBFcnJvckZhY3Rvcnk8RXJyPignc2VydmljZScsICdTZXJ2aWNlJywgZXJyb3JzKTtcclxuICpcclxuICogICAuLi5cclxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkdFTkVSSUMpO1xyXG4gKiAgIC4uLlxyXG4gKiAgIHRocm93IGVycm9yLmNyZWF0ZShFcnIuRklMRV9OT1RfRk9VTkQsIHsnZmlsZSc6IGZpbGVOYW1lfSk7XHJcbiAqICAgLi4uXHJcbiAqICAgLy8gU2VydmljZTogQ291bGQgbm90IGZpbGUgZmlsZTogZm9vLnR4dCAoc2VydmljZS9maWxlLW5vdC1mb3VuZCkuXHJcbiAqXHJcbiAqICAgY2F0Y2ggKGUpIHtcclxuICogICAgIGFzc2VydChlLm1lc3NhZ2UgPT09IFwiQ291bGQgbm90IGZpbmQgZmlsZTogZm9vLnR4dC5cIik7XHJcbiAqICAgICBpZiAoKGUgYXMgRmlyZWJhc2VFcnJvcik/LmNvZGUgPT09ICdzZXJ2aWNlL2ZpbGUtbm90LWZvdW5kJykge1xyXG4gKiAgICAgICBjb25zb2xlLmxvZyhcIkNvdWxkIG5vdCByZWFkIGZpbGU6IFwiICsgZVsnZmlsZSddKTtcclxuICogICAgIH1cclxuICogICB9XHJcbiAqL1xyXG5jb25zdCBFUlJPUl9OQU1FID0gJ0ZpcmViYXNlRXJyb3InO1xyXG4vLyBCYXNlZCBvbiBjb2RlIGZyb206XHJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yI0N1c3RvbV9FcnJvcl9UeXBlc1xyXG5jbGFzcyBGaXJlYmFzZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAvKiogVGhlIGVycm9yIGNvZGUgZm9yIHRoaXMgZXJyb3IuICovXHJcbiAgICBjb2RlLCBtZXNzYWdlLCBcclxuICAgIC8qKiBDdXN0b20gZGF0YSBmb3IgdGhpcyBlcnJvci4gKi9cclxuICAgIGN1c3RvbURhdGEpIHtcclxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tRGF0YSA9IGN1c3RvbURhdGE7XHJcbiAgICAgICAgLyoqIFRoZSBjdXN0b20gbmFtZSBmb3IgYWxsIEZpcmViYXNlRXJyb3JzLiAqL1xyXG4gICAgICAgIHRoaXMubmFtZSA9IEVSUk9SX05BTUU7XHJcbiAgICAgICAgLy8gRml4IEZvciBFUzVcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQtd2lraS9ibG9iL21hc3Rlci9CcmVha2luZy1DaGFuZ2VzLm1kI2V4dGVuZGluZy1idWlsdC1pbnMtbGlrZS1lcnJvci1hcnJheS1hbmQtbWFwLW1heS1uby1sb25nZXItd29ya1xyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBGaXJlYmFzZUVycm9yLnByb3RvdHlwZSk7XHJcbiAgICAgICAgLy8gTWFpbnRhaW5zIHByb3BlciBzdGFjayB0cmFjZSBmb3Igd2hlcmUgb3VyIGVycm9yIHdhcyB0aHJvd24uXHJcbiAgICAgICAgLy8gT25seSBhdmFpbGFibGUgb24gVjguXHJcbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XHJcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIEVycm9yRmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgRXJyb3JGYWN0b3J5IHtcclxuICAgIGNvbnN0cnVjdG9yKHNlcnZpY2UsIHNlcnZpY2VOYW1lLCBlcnJvcnMpIHtcclxuICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMuc2VydmljZU5hbWUgPSBzZXJ2aWNlTmFtZTtcclxuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcclxuICAgIH1cclxuICAgIGNyZWF0ZShjb2RlLCAuLi5kYXRhKSB7XHJcbiAgICAgICAgY29uc3QgY3VzdG9tRGF0YSA9IGRhdGFbMF0gfHwge307XHJcbiAgICAgICAgY29uc3QgZnVsbENvZGUgPSBgJHt0aGlzLnNlcnZpY2V9LyR7Y29kZX1gO1xyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy5lcnJvcnNbY29kZV07XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRlbXBsYXRlID8gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBjdXN0b21EYXRhKSA6ICdFcnJvcic7XHJcbiAgICAgICAgLy8gU2VydmljZSBOYW1lOiBFcnJvciBtZXNzYWdlIChzZXJ2aWNlL2NvZGUpLlxyXG4gICAgICAgIGNvbnN0IGZ1bGxNZXNzYWdlID0gYCR7dGhpcy5zZXJ2aWNlTmFtZX06ICR7bWVzc2FnZX0gKCR7ZnVsbENvZGV9KS5gO1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEZpcmViYXNlRXJyb3IoZnVsbENvZGUsIGZ1bGxNZXNzYWdlLCBjdXN0b21EYXRhKTtcclxuICAgICAgICByZXR1cm4gZXJyb3I7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBkYXRhKSB7XHJcbiAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZShQQVRURVJOLCAoXywga2V5KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBkYXRhW2tleV07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGwgPyBTdHJpbmcodmFsdWUpIDogYDwke2tleX0/PmA7XHJcbiAgICB9KTtcclxufVxyXG5jb25zdCBQQVRURVJOID0gL1xce1xcJChbXn1dKyl9L2c7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBFdmFsdWF0ZXMgYSBKU09OIHN0cmluZyBpbnRvIGEgamF2YXNjcmlwdCBvYmplY3QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgQSBzdHJpbmcgY29udGFpbmluZyBKU09OLlxyXG4gKiBAcmV0dXJuIHsqfSBUaGUgamF2YXNjcmlwdCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzcGVjaWZpZWQgSlNPTi5cclxuICovXHJcbmZ1bmN0aW9uIGpzb25FdmFsKHN0cikge1xyXG4gICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBKU09OIHJlcHJlc2VudGluZyBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKiBAcGFyYW0geyp9IGRhdGEgSmF2YXNjcmlwdCBvYmplY3QgdG8gYmUgc3RyaW5naWZpZWQuXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIEpTT04gY29udGVudHMgb2YgdGhlIG9iamVjdC5cclxuICovXHJcbmZ1bmN0aW9uIHN0cmluZ2lmeShkYXRhKSB7XHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBpbnRvIGNvbnN0aXR1ZW50IHBhcnRzLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIHdpdGggaW52YWxpZCAvIGluY29tcGxldGUgY2xhaW1zIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgZGVjb2RlID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBsZXQgaGVhZGVyID0ge30sIGNsYWltcyA9IHt9LCBkYXRhID0ge30sIHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IHRva2VuLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgaGVhZGVyID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzBdKSB8fCAnJyk7XHJcbiAgICAgICAgY2xhaW1zID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzFdKSB8fCAnJyk7XHJcbiAgICAgICAgc2lnbmF0dXJlID0gcGFydHNbMl07XHJcbiAgICAgICAgZGF0YSA9IGNsYWltc1snZCddIHx8IHt9O1xyXG4gICAgICAgIGRlbGV0ZSBjbGFpbXNbJ2QnXTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhZGVyLFxyXG4gICAgICAgIGNsYWltcyxcclxuICAgICAgICBkYXRhLFxyXG4gICAgICAgIHNpZ25hdHVyZVxyXG4gICAgfTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgdGltZS1iYXNlZCBjbGFpbXMuIFdpbGwgcmV0dXJuIHRydWUgaWYgdGhlXHJcbiAqIHRva2VuIGlzIHdpdGhpbiB0aGUgdGltZSB3aW5kb3cgYXV0aG9yaXplZCBieSB0aGUgJ25iZicgKG5vdC1iZWZvcmUpIGFuZCAnaWF0JyAoaXNzdWVkLWF0KSBjbGFpbXMuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzVmFsaWRUaW1lc3RhbXAgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgY29uc3Qgbm93ID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApO1xyXG4gICAgbGV0IHZhbGlkU2luY2UgPSAwLCB2YWxpZFVudGlsID0gMDtcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ25iZicpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ25iZiddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ2lhdCddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdleHAnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gY2xhaW1zWydleHAnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHRva2VuIHdpbGwgZXhwaXJlIGFmdGVyIDI0aCBieSBkZWZhdWx0XHJcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSB2YWxpZFNpbmNlICsgODY0MDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuICghIW5vdyAmJlxyXG4gICAgICAgICEhdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgICEhdmFsaWRVbnRpbCAmJlxyXG4gICAgICAgIG5vdyA+PSB2YWxpZFNpbmNlICYmXHJcbiAgICAgICAgbm93IDw9IHZhbGlkVW50aWwpO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCByZXR1cm5zIGl0cyBpc3N1ZWQgYXQgdGltZSBpZiB2YWxpZCwgbnVsbCBvdGhlcndpc2UuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gbnVsbCBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzc3VlZEF0VGltZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgIHJldHVybiBjbGFpbXNbJ2lhdCddO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIGZvcm1hdC4gRXhwZWN0cyBhIHZhbGlkIGlzc3VlZC1hdCB0aW1lLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc1ZhbGlkRm9ybWF0ID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBkZWNvZGVkID0gZGVjb2RlKHRva2VuKSwgY2xhaW1zID0gZGVjb2RlZC5jbGFpbXM7XHJcbiAgICByZXR1cm4gISFjbGFpbXMgJiYgdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKTtcclxufTtcclxuLyoqXHJcbiAqIEF0dGVtcHRzIHRvIHBlZXIgaW50byBhbiBhdXRoIHRva2VuIGFuZCBkZXRlcm1pbmUgaWYgaXQncyBhbiBhZG1pbiBhdXRoIHRva2VuIGJ5IGxvb2tpbmcgYXQgdGhlIGNsYWltcyBwb3J0aW9uLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc0FkbWluID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIHJldHVybiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXNbJ2FkbWluJ10gPT09IHRydWU7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNvbnRhaW5zKG9iaiwga2V5KSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcclxufVxyXG5mdW5jdGlvbiBzYWZlR2V0KG9iaiwga2V5KSB7XHJcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgIHJldHVybiBvYmpba2V5XTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNFbXB0eShvYmopIHtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBtYXAob2JqLCBmbiwgY29udGV4dE9iaikge1xyXG4gICAgY29uc3QgcmVzID0ge307XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXNba2V5XSA9IGZuLmNhbGwoY29udGV4dE9iaiwgb2JqW2tleV0sIGtleSwgb2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59XHJcbi8qKlxyXG4gKiBEZWVwIGVxdWFsIHR3byBvYmplY3RzLiBTdXBwb3J0IEFycmF5cyBhbmQgT2JqZWN0cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBFcXVhbChhLCBiKSB7XHJcbiAgICBpZiAoYSA9PT0gYikge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYUtleXMgPSBPYmplY3Qua2V5cyhhKTtcclxuICAgIGNvbnN0IGJLZXlzID0gT2JqZWN0LmtleXMoYik7XHJcbiAgICBmb3IgKGNvbnN0IGsgb2YgYUtleXMpIHtcclxuICAgICAgICBpZiAoIWJLZXlzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYVByb3AgPSBhW2tdO1xyXG4gICAgICAgIGNvbnN0IGJQcm9wID0gYltrXTtcclxuICAgICAgICBpZiAoaXNPYmplY3QoYVByb3ApICYmIGlzT2JqZWN0KGJQcm9wKSkge1xyXG4gICAgICAgICAgICBpZiAoIWRlZXBFcXVhbChhUHJvcCwgYlByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYVByb3AgIT09IGJQcm9wKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGsgb2YgYktleXMpIHtcclxuICAgICAgICBpZiAoIWFLZXlzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBpc09iamVjdCh0aGluZykge1xyXG4gICAgcmV0dXJuIHRoaW5nICE9PSBudWxsICYmIHR5cGVvZiB0aGluZyA9PT0gJ29iamVjdCc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJlamVjdHMgaWYgdGhlIGdpdmVuIHByb21pc2UgZG9lc24ndCByZXNvbHZlIGluIHRpbWVJbk1TIG1pbGxpc2Vjb25kcy5cclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBwcm9taXNlV2l0aFRpbWVvdXQocHJvbWlzZSwgdGltZUluTVMgPSAyMDAwKSB7XHJcbiAgICBjb25zdCBkZWZlcnJlZFByb21pc2UgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4gZGVmZXJyZWRQcm9taXNlLnJlamVjdCgndGltZW91dCEnKSwgdGltZUluTVMpO1xyXG4gICAgcHJvbWlzZS50aGVuKGRlZmVycmVkUHJvbWlzZS5yZXNvbHZlLCBkZWZlcnJlZFByb21pc2UucmVqZWN0KTtcclxuICAgIHJldHVybiBkZWZlcnJlZFByb21pc2UucHJvbWlzZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhIHF1ZXJ5c3RyaW5nLWZvcm1hdHRlZCBzdHJpbmcgKGUuZy4gJmFyZz12YWwmYXJnMj12YWwyKSBmcm9tIGFcclxuICogcGFyYW1zIG9iamVjdCAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICogTm90ZTogWW91IG11c3QgcHJlcGVuZCBpdCB3aXRoID8gd2hlbiBhZGRpbmcgaXQgdG8gYSBVUkwuXHJcbiAqL1xyXG5mdW5jdGlvbiBxdWVyeXN0cmluZyhxdWVyeXN0cmluZ1BhcmFtcykge1xyXG4gICAgY29uc3QgcGFyYW1zID0gW107XHJcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhxdWVyeXN0cmluZ1BhcmFtcykpIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdmFsdWUuZm9yRWFjaChhcnJheVZhbCA9PiB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChhcnJheVZhbCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcmFtcy5sZW5ndGggPyAnJicgKyBwYXJhbXMuam9pbignJicpIDogJyc7XHJcbn1cclxuLyoqXHJcbiAqIERlY29kZXMgYSBxdWVyeXN0cmluZyAoZS5nLiA/YXJnPXZhbCZhcmcyPXZhbDIpIGludG8gYSBwYXJhbXMgb2JqZWN0XHJcbiAqIChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmdEZWNvZGUocXVlcnlzdHJpbmcpIHtcclxuICAgIGNvbnN0IG9iaiA9IHt9O1xyXG4gICAgY29uc3QgdG9rZW5zID0gcXVlcnlzdHJpbmcucmVwbGFjZSgvXlxcPy8sICcnKS5zcGxpdCgnJicpO1xyXG4gICAgdG9rZW5zLmZvckVhY2godG9rZW4gPT4ge1xyXG4gICAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSB0b2tlbi5zcGxpdCgnPScpO1xyXG4gICAgICAgICAgICBvYmpbZGVjb2RlVVJJQ29tcG9uZW50KGtleSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBvYmo7XHJcbn1cclxuLyoqXHJcbiAqIEV4dHJhY3QgdGhlIHF1ZXJ5IHN0cmluZyBwYXJ0IG9mIGEgVVJMLCBpbmNsdWRpbmcgdGhlIGxlYWRpbmcgcXVlc3Rpb24gbWFyayAoaWYgcHJlc2VudCkuXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRyYWN0UXVlcnlzdHJpbmcodXJsKSB7XHJcbiAgICBjb25zdCBxdWVyeVN0YXJ0ID0gdXJsLmluZGV4T2YoJz8nKTtcclxuICAgIGlmICghcXVlcnlTdGFydCkge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuICAgIGNvbnN0IGZyYWdtZW50U3RhcnQgPSB1cmwuaW5kZXhPZignIycsIHF1ZXJ5U3RhcnQpO1xyXG4gICAgcmV0dXJuIHVybC5zdWJzdHJpbmcocXVlcnlTdGFydCwgZnJhZ21lbnRTdGFydCA+IDAgPyBmcmFnbWVudFN0YXJ0IDogdW5kZWZpbmVkKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2guXHJcbiAqIFZhcmlhYmxlIG5hbWVzIGZvbGxvdyB0aGUgbm90YXRpb24gaW4gRklQUyBQVUIgMTgwLTM6XHJcbiAqIGh0dHA6Ly9jc3JjLm5pc3QuZ292L3B1YmxpY2F0aW9ucy9maXBzL2ZpcHMxODAtMy9maXBzMTgwLTNfZmluYWwucGRmLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICogICB2YXIgc2hhMSA9IG5ldyBzaGExKCk7XHJcbiAqICAgc2hhMS51cGRhdGUoYnl0ZXMpO1xyXG4gKiAgIHZhciBoYXNoID0gc2hhMS5kaWdlc3QoKTtcclxuICpcclxuICogUGVyZm9ybWFuY2U6XHJcbiAqICAgQ2hyb21lIDIzOiAgIH40MDAgTWJpdC9zXHJcbiAqICAgRmlyZWZveCAxNjogIH4yNTAgTWJpdC9zXHJcbiAqXHJcbiAqL1xyXG4vKipcclxuICogU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoIGNvbnN0cnVjdG9yLlxyXG4gKlxyXG4gKiBUaGUgcHJvcGVydGllcyBkZWNsYXJlZCBoZXJlIGFyZSBkaXNjdXNzZWQgaW4gdGhlIGFib3ZlIGFsZ29yaXRobSBkb2N1bWVudC5cclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBmaW5hbFxyXG4gKiBAc3RydWN0XHJcbiAqL1xyXG5jbGFzcyBTaGExIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhvbGRzIHRoZSBwcmV2aW91cyB2YWx1ZXMgb2YgYWNjdW11bGF0ZWQgdmFyaWFibGVzIGEtZSBpbiB0aGUgY29tcHJlc3NfXHJcbiAgICAgICAgICogZnVuY3Rpb24uXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNoYWluXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgYnVmZmVyIGhvbGRpbmcgdGhlIHBhcnRpYWxseSBjb21wdXRlZCBoYXNoIHJlc3VsdC5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuYnVmXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIGFycmF5IG9mIDgwIGJ5dGVzLCBlYWNoIGEgcGFydCBvZiB0aGUgbWVzc2FnZSB0byBiZSBoYXNoZWQuICBSZWZlcnJlZCB0b1xyXG4gICAgICAgICAqIGFzIHRoZSBtZXNzYWdlIHNjaGVkdWxlIGluIHRoZSBkb2NzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5XXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnRhaW5zIGRhdGEgbmVlZGVkIHRvIHBhZCBtZXNzYWdlcyBsZXNzIHRoYW4gNjQgYnl0ZXMuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBhZF8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgICAgICB0aGlzLmJsb2NrU2l6ZSA9IDUxMiAvIDg7XHJcbiAgICAgICAgdGhpcy5wYWRfWzBdID0gMTI4O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5ibG9ja1NpemU7ICsraSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZF9baV0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9IDB4Njc0NTIzMDE7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAweGVmY2RhYjg5O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gMHg5OGJhZGNmZTtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9IDB4MTAzMjU0NzY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAweGMzZDJlMWYwO1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEludGVybmFsIGNvbXByZXNzIGhlbHBlciBmdW5jdGlvbi5cclxuICAgICAqIEBwYXJhbSBidWYgQmxvY2sgdG8gY29tcHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IE9mZnNldCBvZiB0aGUgYmxvY2sgaW4gdGhlIGJ1ZmZlci5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNvbXByZXNzXyhidWYsIG9mZnNldCkge1xyXG4gICAgICAgIGlmICghb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IFcgPSB0aGlzLldfO1xyXG4gICAgICAgIC8vIGdldCAxNiBiaWcgZW5kaWFuIHdvcmRzXHJcbiAgICAgICAgaWYgKHR5cGVvZiBidWYgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyh1c2VyKTogW2J1ZyA4MTQwMTIyXSBSZWNlbnQgdmVyc2lvbnMgb2YgU2FmYXJpIGZvciBNYWMgT1MgYW5kIGlPU1xyXG4gICAgICAgICAgICAgICAgLy8gaGF2ZSBhIGJ1ZyB0aGF0IHR1cm5zIHRoZSBwb3N0LWluY3JlbWVudCArKyBvcGVyYXRvciBpbnRvIHByZS1pbmNyZW1lbnRcclxuICAgICAgICAgICAgICAgIC8vIGR1cmluZyBKSVQgY29tcGlsYXRpb24uICBXZSBoYXZlIGNvZGUgdGhhdCBkZXBlbmRzIGhlYXZpbHkgb24gU0hBLTEgZm9yXHJcbiAgICAgICAgICAgICAgICAvLyBjb3JyZWN0bmVzcyBhbmQgd2hpY2ggaXMgYWZmZWN0ZWQgYnkgdGhpcyBidWcsIHNvIEkndmUgcmVtb3ZlZCBhbGwgdXNlc1xyXG4gICAgICAgICAgICAgICAgLy8gb2YgcG9zdC1pbmNyZW1lbnQgKysgaW4gd2hpY2ggdGhlIHJlc3VsdCB2YWx1ZSBpcyB1c2VkLiAgV2UgY2FuIHJldmVydFxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBjaGFuZ2Ugb25jZSB0aGUgU2FmYXJpIGJ1Z1xyXG4gICAgICAgICAgICAgICAgLy8gKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMDkwMzYpIGhhcyBiZWVuIGZpeGVkIGFuZFxyXG4gICAgICAgICAgICAgICAgLy8gbW9zdCBjbGllbnRzIGhhdmUgYmVlbiB1cGRhdGVkLlxyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCkgPDwgMjQpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDEpIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAyKSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDMpO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXRdIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAyXSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZltvZmZzZXQgKyAzXTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGV4cGFuZCB0byA4MCB3b3Jkc1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxNjsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgdCA9IFdbaSAtIDNdIF4gV1tpIC0gOF0gXiBXW2kgLSAxNF0gXiBXW2kgLSAxNl07XHJcbiAgICAgICAgICAgIFdbaV0gPSAoKHQgPDwgMSkgfCAodCA+Pj4gMzEpKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhID0gdGhpcy5jaGFpbl9bMF07XHJcbiAgICAgICAgbGV0IGIgPSB0aGlzLmNoYWluX1sxXTtcclxuICAgICAgICBsZXQgYyA9IHRoaXMuY2hhaW5fWzJdO1xyXG4gICAgICAgIGxldCBkID0gdGhpcy5jaGFpbl9bM107XHJcbiAgICAgICAgbGV0IGUgPSB0aGlzLmNoYWluX1s0XTtcclxuICAgICAgICBsZXQgZiwgaztcclxuICAgICAgICAvLyBUT0RPKHVzZXIpOiBUcnkgdG8gdW5yb2xsIHRoaXMgbG9vcCB0byBzcGVlZCB1cCB0aGUgY29tcHV0YXRpb24uXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChpIDwgNDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgMjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gZCBeIChiICYgKGMgXiBkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NWE4Mjc5OTk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDZlZDllYmExO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCA2MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSAoYiAmIGMpIHwgKGQgJiAoYiB8IGMpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg4ZjFiYmNkYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4Y2E2MmMxZDY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgdCA9ICgoKGEgPDwgNSkgfCAoYSA+Pj4gMjcpKSArIGYgKyBlICsgayArIFdbaV0pICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgZSA9IGQ7XHJcbiAgICAgICAgICAgIGQgPSBjO1xyXG4gICAgICAgICAgICBjID0gKChiIDw8IDMwKSB8IChiID4+PiAyKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBiID0gYTtcclxuICAgICAgICAgICAgYSA9IHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gKHRoaXMuY2hhaW5fWzBdICsgYSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gKHRoaXMuY2hhaW5fWzFdICsgYikgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gKHRoaXMuY2hhaW5fWzJdICsgYykgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gKHRoaXMuY2hhaW5fWzNdICsgZCkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gKHRoaXMuY2hhaW5fWzRdICsgZSkgJiAweGZmZmZmZmZmO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlKGJ5dGVzLCBsZW5ndGgpIHtcclxuICAgICAgICAvLyBUT0RPKGpvaG5sZW56KTogdGlnaHRlbiB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlIGFuZCByZW1vdmUgdGhpcyBjaGVja1xyXG4gICAgICAgIGlmIChieXRlcyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbGVuZ3RoTWludXNCbG9jayA9IGxlbmd0aCAtIHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICAvLyBVc2luZyBsb2NhbCBpbnN0ZWFkIG9mIG1lbWJlciB2YXJpYWJsZXMgZ2l2ZXMgfjUlIHNwZWVkdXAgb24gRmlyZWZveCAxNi5cclxuICAgICAgICBjb25zdCBidWYgPSB0aGlzLmJ1Zl87XHJcbiAgICAgICAgbGV0IGluYnVmID0gdGhpcy5pbmJ1Zl87XHJcbiAgICAgICAgLy8gVGhlIG91dGVyIHdoaWxlIGxvb3Agc2hvdWxkIGV4ZWN1dGUgYXQgbW9zdCB0d2ljZS5cclxuICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBXaGVuIHdlIGhhdmUgbm8gZGF0YSBpbiB0aGUgYmxvY2sgdG8gdG9wIHVwLCB3ZSBjYW4gZGlyZWN0bHkgcHJvY2VzcyB0aGVcclxuICAgICAgICAgICAgLy8gaW5wdXQgYnVmZmVyIChhc3N1bWluZyBpdCBjb250YWlucyBzdWZmaWNpZW50IGRhdGEpLiBUaGlzIGdpdmVzIH4yNSVcclxuICAgICAgICAgICAgLy8gc3BlZWR1cCBvbiBDaHJvbWUgMjMgYW5kIH4xNSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LCBidXQgcmVxdWlyZXMgdGhhdFxyXG4gICAgICAgICAgICAvLyB0aGUgZGF0YSBpcyBwcm92aWRlZCBpbiBsYXJnZSBjaHVua3MgKG9yIGluIG11bHRpcGxlcyBvZiA2NCBieXRlcykuXHJcbiAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPD0gbGVuZ3RoTWludXNCbG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ5dGVzLCBuKTtcclxuICAgICAgICAgICAgICAgICAgICBuICs9IHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlcy5jaGFyQ29kZUF0KG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzW25dO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluYnVmXyA9IGluYnVmO1xyXG4gICAgICAgIHRoaXMudG90YWxfICs9IGxlbmd0aDtcclxuICAgIH1cclxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cclxuICAgIGRpZ2VzdCgpIHtcclxuICAgICAgICBjb25zdCBkaWdlc3QgPSBbXTtcclxuICAgICAgICBsZXQgdG90YWxCaXRzID0gdGhpcy50b3RhbF8gKiA4O1xyXG4gICAgICAgIC8vIEFkZCBwYWQgMHg4MCAweDAwKi5cclxuICAgICAgICBpZiAodGhpcy5pbmJ1Zl8gPCA1Nikge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIDU2IC0gdGhpcy5pbmJ1Zl8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCB0aGlzLmJsb2NrU2l6ZSAtICh0aGlzLmluYnVmXyAtIDU2KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFkZCAjIGJpdHMuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuYmxvY2tTaXplIC0gMTsgaSA+PSA1NjsgaS0tKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVmX1tpXSA9IHRvdGFsQml0cyAmIDI1NTtcclxuICAgICAgICAgICAgdG90YWxCaXRzIC89IDI1NjsgLy8gRG9uJ3QgdXNlIGJpdC1zaGlmdGluZyBoZXJlIVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXByZXNzXyh0aGlzLmJ1Zl8pO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMjQ7IGogPj0gMDsgaiAtPSA4KSB7XHJcbiAgICAgICAgICAgICAgICBkaWdlc3Rbbl0gPSAodGhpcy5jaGFpbl9baV0gPj4gaikgJiAyNTU7XHJcbiAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRpZ2VzdDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogSGVscGVyIHRvIG1ha2UgYSBTdWJzY3JpYmUgZnVuY3Rpb24gKGp1c3QgbGlrZSBQcm9taXNlIGhlbHBzIG1ha2UgYVxyXG4gKiBUaGVuYWJsZSkuXHJcbiAqXHJcbiAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gKiAgICAgYXMgYSBwcm94eS5cclxuICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlU3Vic2NyaWJlKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICBjb25zdCBwcm94eSA9IG5ldyBPYnNlcnZlclByb3h5KGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKTtcclxuICAgIHJldHVybiBwcm94eS5zdWJzY3JpYmUuYmluZChwcm94eSk7XHJcbn1cclxuLyoqXHJcbiAqIEltcGxlbWVudCBmYW4tb3V0IGZvciBhbnkgbnVtYmVyIG9mIE9ic2VydmVycyBhdHRhY2hlZCB2aWEgYSBzdWJzY3JpYmVcclxuICogZnVuY3Rpb24uXHJcbiAqL1xyXG5jbGFzcyBPYnNlcnZlclByb3h5IHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXHJcbiAgICAgKiAgICAgYXMgYSBwcm94eS5cclxuICAgICAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVzID0gW107XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50ID0gMDtcclxuICAgICAgICAvLyBNaWNyby10YXNrIHNjaGVkdWxpbmcgYnkgY2FsbGluZyB0YXNrLnRoZW4oKS5cclxuICAgICAgICB0aGlzLnRhc2sgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMub25Ob09ic2VydmVycyA9IG9uTm9PYnNlcnZlcnM7XHJcbiAgICAgICAgLy8gQ2FsbCB0aGUgZXhlY3V0b3IgYXN5bmNocm9ub3VzbHkgc28gc3Vic2NyaWJlcnMgdGhhdCBhcmUgY2FsbGVkXHJcbiAgICAgICAgLy8gc3luY2hyb25vdXNseSBhZnRlciB0aGUgY3JlYXRpb24gb2YgdGhlIHN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICAgIC8vIGNhbiBzdGlsbCByZWNlaXZlIHRoZSB2ZXJ5IGZpcnN0IHZhbHVlIGdlbmVyYXRlZCBpbiB0aGUgZXhlY3V0b3IuXHJcbiAgICAgICAgdGhpcy50YXNrXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZXhlY3V0b3IodGhpcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgbmV4dCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKGVycm9yKTtcclxuICAgIH1cclxuICAgIGNvbXBsZXRlKCkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIGFuIE9ic2VydmVyIHRvIHRoZSBmYW4tb3V0IGxpc3QuXHJcbiAgICAgKlxyXG4gICAgICogLSBXZSByZXF1aXJlIHRoYXQgbm8gZXZlbnQgaXMgc2VudCB0byBhIHN1YnNjcmliZXIgc3ljaHJvbm91c2x5IHRvIHRoZWlyXHJcbiAgICAgKiAgIGNhbGwgdG8gc3Vic2NyaWJlKCkuXHJcbiAgICAgKi9cclxuICAgIHN1YnNjcmliZShuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XHJcbiAgICAgICAgbGV0IG9ic2VydmVyO1xyXG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGVycm9yID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgT2JzZXJ2ZXIuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFzc2VtYmxlIGFuIE9ic2VydmVyIG9iamVjdCB3aGVuIHBhc3NlZCBhcyBjYWxsYmFjayBmdW5jdGlvbnMuXHJcbiAgICAgICAgaWYgKGltcGxlbWVudHNBbnlNZXRob2RzKG5leHRPck9ic2VydmVyLCBbXHJcbiAgICAgICAgICAgICduZXh0JyxcclxuICAgICAgICAgICAgJ2Vycm9yJyxcclxuICAgICAgICAgICAgJ2NvbXBsZXRlJ1xyXG4gICAgICAgIF0pKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0gbmV4dE9yT2JzZXJ2ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgICAgIG5leHQ6IG5leHRPck9ic2VydmVyLFxyXG4gICAgICAgICAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuZXJyb3IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvciA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5jb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdW5zdWIgPSB0aGlzLnVuc3Vic2NyaWJlT25lLmJpbmQodGhpcywgdGhpcy5vYnNlcnZlcnMubGVuZ3RoKTtcclxuICAgICAgICAvLyBBdHRlbXB0IHRvIHN1YnNjcmliZSB0byBhIHRlcm1pbmF0ZWQgT2JzZXJ2YWJsZSAtIHdlXHJcbiAgICAgICAgLy8ganVzdCByZXNwb25kIHRvIHRoZSBPYnNlcnZlciB3aXRoIHRoZSBmaW5hbCBlcnJvciBvciBjb21wbGV0ZVxyXG4gICAgICAgIC8vIGV2ZW50LlxyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluYWxFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcih0aGlzLmZpbmFsRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdGhpbmdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xyXG4gICAgICAgIHJldHVybiB1bnN1YjtcclxuICAgIH1cclxuICAgIC8vIFVuc3Vic2NyaWJlIGlzIHN5bmNocm9ub3VzIC0gd2UgZ3VhcmFudGVlIHRoYXQgbm8gZXZlbnRzIGFyZSBzZW50IHRvXHJcbiAgICAvLyBhbnkgdW5zdWJzY3JpYmVkIE9ic2VydmVyLlxyXG4gICAgdW5zdWJzY3JpYmVPbmUoaSkge1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVycyA9PT0gdW5kZWZpbmVkIHx8IHRoaXMub2JzZXJ2ZXJzW2ldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgdGhpcy5vYnNlcnZlcnNbaV07XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50IC09IDE7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJDb3VudCA9PT0gMCAmJiB0aGlzLm9uTm9PYnNlcnZlcnMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnModGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yRWFjaE9ic2VydmVyKGZuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIEFscmVhZHkgY2xvc2VkIGJ5IHByZXZpb3VzIGV2ZW50Li4uLmp1c3QgZWF0IHRoZSBhZGRpdGlvbmFsIHZhbHVlcy5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTaW5jZSBzZW5kT25lIGNhbGxzIGFzeW5jaHJvbm91c2x5IC0gdGhlcmUgaXMgbm8gY2hhbmNlIHRoYXRcclxuICAgICAgICAvLyB0aGlzLm9ic2VydmVycyB3aWxsIGJlY29tZSB1bmRlZmluZWQuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9ic2VydmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRPbmUoaSwgZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIENhbGwgdGhlIE9ic2VydmVyIHZpYSBvbmUgb2YgaXQncyBjYWxsYmFjayBmdW5jdGlvbi4gV2UgYXJlIGNhcmVmdWwgdG9cclxuICAgIC8vIGNvbmZpcm0gdGhhdCB0aGUgb2JzZXJ2ZSBoYXMgbm90IGJlZW4gdW5zdWJzY3JpYmVkIHNpbmNlIHRoaXMgYXN5bmNocm9ub3VzXHJcbiAgICAvLyBmdW5jdGlvbiBoYWQgYmVlbiBxdWV1ZWQuXHJcbiAgICBzZW5kT25lKGksIGZuKSB7XHJcbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgY2FsbGJhY2sgYXN5bmNocm9ub3VzbHlcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm9ic2VydmVyc1tpXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZuKHRoaXMub2JzZXJ2ZXJzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGV4Y2VwdGlvbnMgcmFpc2VkIGluIE9ic2VydmVycyBvciBtaXNzaW5nIG1ldGhvZHMgb2YgYW5cclxuICAgICAgICAgICAgICAgICAgICAvLyBPYnNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBMb2cgZXJyb3IgdG8gY29uc29sZS4gYi8zMTQwNDgwNlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoZXJyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmFsRXJyb3IgPSBlcnI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFByb3h5IGlzIG5vIGxvbmdlciBuZWVkZWQgLSBnYXJiYWdlIGNvbGxlY3QgcmVmZXJlbmNlc1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqIFR1cm4gc3luY2hyb25vdXMgZnVuY3Rpb24gaW50byBvbmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5LiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xyXG5mdW5jdGlvbiBhc3luYyhmbiwgb25FcnJvcikge1xyXG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZm4oLi4uYXJncyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAob25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybiB0cnVlIGlmIHRoZSBvYmplY3QgcGFzc2VkIGluIGltcGxlbWVudHMgYW55IG9mIHRoZSBuYW1lZCBtZXRob2RzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW1wbGVtZW50c0FueU1ldGhvZHMob2JqLCBtZXRob2RzKSB7XHJcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xyXG4gICAgICAgIGlmIChtZXRob2QgaW4gb2JqICYmIHR5cGVvZiBvYmpbbWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gbm9vcCgpIHtcclxuICAgIC8vIGRvIG5vdGhpbmdcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ2hlY2sgdG8gbWFrZSBzdXJlIHRoZSBhcHByb3ByaWF0ZSBudW1iZXIgb2YgYXJndW1lbnRzIGFyZSBwcm92aWRlZCBmb3IgYSBwdWJsaWMgZnVuY3Rpb24uXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiBpdCBmYWlscy5cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gbWluQ291bnQgVGhlIG1pbmltdW0gbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIG1heENvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBhcmd1bWVudCB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIGFyZ0NvdW50IFRoZSBhY3R1YWwgbnVtYmVyIG9mIGFyZ3VtZW50cyBwcm92aWRlZC5cclxuICovXHJcbmNvbnN0IHZhbGlkYXRlQXJnQ291bnQgPSBmdW5jdGlvbiAoZm5OYW1lLCBtaW5Db3VudCwgbWF4Q291bnQsIGFyZ0NvdW50KSB7XHJcbiAgICBsZXQgYXJnRXJyb3I7XHJcbiAgICBpZiAoYXJnQ291bnQgPCBtaW5Db3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gJ2F0IGxlYXN0ICcgKyBtaW5Db3VudDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFyZ0NvdW50ID4gbWF4Q291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9IG1heENvdW50ID09PSAwID8gJ25vbmUnIDogJ25vIG1vcmUgdGhhbiAnICsgbWF4Q291bnQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYXJnRXJyb3IpIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IGZuTmFtZSArXHJcbiAgICAgICAgICAgICcgZmFpbGVkOiBXYXMgY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgIGFyZ0NvdW50ICtcclxuICAgICAgICAgICAgKGFyZ0NvdW50ID09PSAxID8gJyBhcmd1bWVudC4nIDogJyBhcmd1bWVudHMuJykgK1xyXG4gICAgICAgICAgICAnIEV4cGVjdHMgJyArXHJcbiAgICAgICAgICAgIGFyZ0Vycm9yICtcclxuICAgICAgICAgICAgJy4nO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdG8gcHJlZml4IGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgZmFpbGVkIGFyZ3VtZW50IHZhbGlkYXRpb25cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gYXJnTmFtZSBUaGUgbmFtZSBvZiB0aGUgYXJndW1lbnRcclxuICogQHJldHVybiBUaGUgcHJlZml4IHRvIGFkZCB0byB0aGUgZXJyb3IgdGhyb3duIGZvciB2YWxpZGF0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmdOYW1lKSB7XHJcbiAgICByZXR1cm4gYCR7Zm5OYW1lfSBmYWlsZWQ6ICR7YXJnTmFtZX0gYXJndW1lbnQgYDtcclxufVxyXG4vKipcclxuICogQHBhcmFtIGZuTmFtZVxyXG4gKiBAcGFyYW0gYXJndW1lbnROdW1iZXJcclxuICogQHBhcmFtIG5hbWVzcGFjZVxyXG4gKiBAcGFyYW0gb3B0aW9uYWxcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZXNwYWNlKGZuTmFtZSwgbmFtZXNwYWNlLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFuYW1lc3BhY2UpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAvL1RPRE86IEkgc2hvdWxkIGRvIG1vcmUgdmFsaWRhdGlvbiBoZXJlLiBXZSBvbmx5IGFsbG93IGNlcnRhaW4gY2hhcnMgaW4gbmFtZXNwYWNlcy5cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCAnbmFtZXNwYWNlJykgKyAnbXVzdCBiZSBhIHZhbGlkIGZpcmViYXNlIG5hbWVzcGFjZS4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNhbGxiYWNrKGZuTmFtZSwgYXJndW1lbnROYW1lLCBcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuY2FsbGJhY2ssIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGZ1bmN0aW9uLicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ29udGV4dE9iamVjdChmbk5hbWUsIGFyZ3VtZW50TmFtZSwgY29udGV4dCwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY29udGV4dCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY29udGV4dCAhPT0gJ29iamVjdCcgfHwgY29udGV4dCA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGNvbnRleHQgb2JqZWN0LicpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIENvZGUgb3JpZ2luYWxseSBjYW1lIGZyb20gZ29vZy5jcnlwdC5zdHJpbmdUb1V0ZjhCeXRlQXJyYXksIGJ1dCBmb3Igc29tZSByZWFzb24gdGhleVxyXG4vLyBhdXRvbWF0aWNhbGx5IHJlcGxhY2VkICdcXHJcXG4nIHdpdGggJ1xcbicsIGFuZCB0aGV5IGRpZG4ndCBoYW5kbGUgc3Vycm9nYXRlIHBhaXJzLFxyXG4vLyBzbyBpdCdzIGJlZW4gbW9kaWZpZWQuXHJcbi8vIE5vdGUgdGhhdCBub3QgYWxsIFVuaWNvZGUgY2hhcmFjdGVycyBhcHBlYXIgYXMgc2luZ2xlIGNoYXJhY3RlcnMgaW4gSmF2YVNjcmlwdCBzdHJpbmdzLlxyXG4vLyBmcm9tQ2hhckNvZGUgcmV0dXJucyB0aGUgVVRGLTE2IGVuY29kaW5nIG9mIGEgY2hhcmFjdGVyIC0gc28gc29tZSBVbmljb2RlIGNoYXJhY3RlcnNcclxuLy8gdXNlIDIgY2hhcmFjdGVycyBpbiBKYXZhc2NyaXB0LiAgQWxsIDQtYnl0ZSBVVEYtOCBjaGFyYWN0ZXJzIGJlZ2luIHdpdGggYSBmaXJzdFxyXG4vLyBjaGFyYWN0ZXIgaW4gdGhlIHJhbmdlIDB4RDgwMCAtIDB4REJGRiAodGhlIGZpcnN0IGNoYXJhY3RlciBvZiBhIHNvLWNhbGxlZCBzdXJyb2dhdGVcclxuLy8gcGFpcikuXHJcbi8vIFNlZSBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNS4xLyNzZWMtMTUuMS4zXHJcbi8qKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge0FycmF5fVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAvLyBJcyB0aGlzIHRoZSBsZWFkIHN1cnJvZ2F0ZSBpbiBhIHN1cnJvZ2F0ZSBwYWlyP1xyXG4gICAgICAgIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICBjb25zdCBoaWdoID0gYyAtIDB4ZDgwMDsgLy8gdGhlIGhpZ2ggMTAgYml0cy5cclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICBhc3NlcnQoaSA8IHN0ci5sZW5ndGgsICdTdXJyb2dhdGUgcGFpciBtaXNzaW5nIHRyYWlsIHN1cnJvZ2F0ZS4nKTtcclxuICAgICAgICAgICAgY29uc3QgbG93ID0gc3RyLmNoYXJDb2RlQXQoaSkgLSAweGRjMDA7IC8vIHRoZSBsb3cgMTAgYml0cy5cclxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoaGlnaCA8PCAxMCkgKyBsb3c7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDY1NTM2KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgbGVuZ3RoIHdpdGhvdXQgYWN0dWFsbHkgY29udmVydGluZzsgdXNlZnVsIGZvciBkb2luZyBjaGVhcGVyIHZhbGlkYXRpb24uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICogQHJldHVybiB7bnVtYmVyfVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nTGVuZ3RoID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgcCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBwICs9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIC8vIExlYWQgc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXIuICBUaGUgcGFpciB0b2dldGhlciB3aWxsIHRha2UgNCBieXRlcyB0byByZXByZXNlbnQuXHJcbiAgICAgICAgICAgIHAgKz0gNDtcclxuICAgICAgICAgICAgaSsrOyAvLyBza2lwIHRyYWlsIHN1cnJvZ2F0ZS5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHAgKz0gMztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcDtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvcGllZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMTE3NTIzXHJcbiAqIEdlbmVyYXRlcyBhIG5ldyB1dWlkLlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCB1dWlkdjQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBjID0+IHtcclxuICAgICAgICBjb25zdCByID0gKE1hdGgucmFuZG9tKCkgKiAxNikgfCAwLCB2ID0gYyA9PT0gJ3gnID8gciA6IChyICYgMHgzKSB8IDB4ODtcclxuICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XHJcbiAgICB9KTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBhbW91bnQgb2YgbWlsbGlzZWNvbmRzIHRvIGV4cG9uZW50aWFsbHkgaW5jcmVhc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0lOVEVSVkFMX01JTExJUyA9IDEwMDA7XHJcbi8qKlxyXG4gKiBUaGUgZmFjdG9yIHRvIGJhY2tvZmYgYnkuXHJcbiAqIFNob3VsZCBiZSBhIG51bWJlciBncmVhdGVyIHRoYW4gMS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfQkFDS09GRl9GQUNUT1IgPSAyO1xyXG4vKipcclxuICogVGhlIG1heGltdW0gbWlsbGlzZWNvbmRzIHRvIGluY3JlYXNlIHRvLlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAqL1xyXG5jb25zdCBNQVhfVkFMVUVfTUlMTElTID0gNCAqIDYwICogNjAgKiAxMDAwOyAvLyBGb3VyIGhvdXJzLCBsaWtlIGlPUyBhbmQgQW5kcm9pZC5cclxuLyoqXHJcbiAqIFRoZSBwZXJjZW50YWdlIG9mIGJhY2tvZmYgdGltZSB0byByYW5kb21pemUgYnkuXHJcbiAqIFNlZVxyXG4gKiBodHRwOi8vZ28vc2FmZS1jbGllbnQtYmVoYXZpb3Ijc3RlcC0xLWRldGVybWluZS10aGUtYXBwcm9wcmlhdGUtcmV0cnktaW50ZXJ2YWwtdG8taGFuZGxlLXNwaWtlLXRyYWZmaWNcclxuICogZm9yIGNvbnRleHQuXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbmNvbnN0IFJBTkRPTV9GQUNUT1IgPSAwLjU7XHJcbi8qKlxyXG4gKiBCYXNlZCBvbiB0aGUgYmFja29mZiBtZXRob2QgZnJvbVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtbGlicmFyeS9ibG9iL21hc3Rlci9jbG9zdXJlL2dvb2cvbWF0aC9leHBvbmVudGlhbGJhY2tvZmYuanMuXHJcbiAqIEV4dHJhY3RlZCBoZXJlIHNvIHdlIGRvbid0IG5lZWQgdG8gcGFzcyBtZXRhZGF0YSBhbmQgYSBzdGF0ZWZ1bCBFeHBvbmVudGlhbEJhY2tvZmYgb2JqZWN0IGFyb3VuZC5cclxuICovXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMoYmFja29mZkNvdW50LCBpbnRlcnZhbE1pbGxpcyA9IERFRkFVTFRfSU5URVJWQUxfTUlMTElTLCBiYWNrb2ZmRmFjdG9yID0gREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUikge1xyXG4gICAgLy8gQ2FsY3VsYXRlcyBhbiBleHBvbmVudGlhbGx5IGluY3JlYXNpbmcgdmFsdWUuXHJcbiAgICAvLyBEZXZpYXRpb246IGNhbGN1bGF0ZXMgdmFsdWUgZnJvbSBjb3VudCBhbmQgYSBjb25zdGFudCBpbnRlcnZhbCwgc28gd2Ugb25seSBuZWVkIHRvIHNhdmUgdmFsdWVcclxuICAgIC8vIGFuZCBjb3VudCB0byByZXN0b3JlIHN0YXRlLlxyXG4gICAgY29uc3QgY3VyckJhc2VWYWx1ZSA9IGludGVydmFsTWlsbGlzICogTWF0aC5wb3coYmFja29mZkZhY3RvciwgYmFja29mZkNvdW50KTtcclxuICAgIC8vIEEgcmFuZG9tIFwiZnV6elwiIHRvIGF2b2lkIHdhdmVzIG9mIHJldHJpZXMuXHJcbiAgICAvLyBEZXZpYXRpb246IHJhbmRvbUZhY3RvciBpcyByZXF1aXJlZC5cclxuICAgIGNvbnN0IHJhbmRvbVdhaXQgPSBNYXRoLnJvdW5kKFxyXG4gICAgLy8gQSBmcmFjdGlvbiBvZiB0aGUgYmFja29mZiB2YWx1ZSB0byBhZGQvc3VidHJhY3QuXHJcbiAgICAvLyBEZXZpYXRpb246IGNoYW5nZXMgbXVsdGlwbGljYXRpb24gb3JkZXIgdG8gaW1wcm92ZSByZWFkYWJpbGl0eS5cclxuICAgIFJBTkRPTV9GQUNUT1IgKlxyXG4gICAgICAgIGN1cnJCYXNlVmFsdWUgKlxyXG4gICAgICAgIC8vIEEgcmFuZG9tIGZsb2F0IChyb3VuZGVkIHRvIGludCBieSBNYXRoLnJvdW5kIGFib3ZlKSBpbiB0aGUgcmFuZ2UgWy0xLCAxXS4gRGV0ZXJtaW5lc1xyXG4gICAgICAgIC8vIGlmIHdlIGFkZCBvciBzdWJ0cmFjdC5cclxuICAgICAgICAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKlxyXG4gICAgICAgIDIpO1xyXG4gICAgLy8gTGltaXRzIGJhY2tvZmYgdG8gbWF4IHRvIGF2b2lkIGVmZmVjdGl2ZWx5IHBlcm1hbmVudCBiYWNrb2ZmLlxyXG4gICAgcmV0dXJuIE1hdGgubWluKE1BWF9WQUxVRV9NSUxMSVMsIGN1cnJCYXNlVmFsdWUgKyByYW5kb21XYWl0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZSBFbmdsaXNoIG9yZGluYWwgbGV0dGVycyBhZnRlciBhIG51bWJlclxyXG4gKi9cclxuZnVuY3Rpb24gb3JkaW5hbChpKSB7XHJcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShpKSkge1xyXG4gICAgICAgIHJldHVybiBgJHtpfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaSArIGluZGljYXRvcihpKTtcclxufVxyXG5mdW5jdGlvbiBpbmRpY2F0b3IoaSkge1xyXG4gICAgaSA9IE1hdGguYWJzKGkpO1xyXG4gICAgY29uc3QgY2VudCA9IGkgJSAxMDA7XHJcbiAgICBpZiAoY2VudCA+PSAxMCAmJiBjZW50IDw9IDIwKSB7XHJcbiAgICAgICAgcmV0dXJuICd0aCc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWMgPSBpICUgMTA7XHJcbiAgICBpZiAoZGVjID09PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuICdzdCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAyKSB7XHJcbiAgICAgICAgcmV0dXJuICduZCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAzKSB7XHJcbiAgICAgICAgcmV0dXJuICdyZCc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJ3RoJztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRNb2R1bGFySW5zdGFuY2Uoc2VydmljZSkge1xyXG4gICAgaWYgKHNlcnZpY2UgJiYgc2VydmljZS5fZGVsZWdhdGUpIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZS5fZGVsZWdhdGU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDT05TVEFOVFMsIERlY29kZUJhc2U2NFN0cmluZ0Vycm9yLCBEZWZlcnJlZCwgRXJyb3JGYWN0b3J5LCBGaXJlYmFzZUVycm9yLCBNQVhfVkFMVUVfTUlMTElTLCBSQU5ET01fRkFDVE9SLCBTaGExLCBhcmVDb29raWVzRW5hYmxlZCwgYXNzZXJ0LCBhc3NlcnRpb25FcnJvciwgYXN5bmMsIGJhc2U2NCwgYmFzZTY0RGVjb2RlLCBiYXNlNjRFbmNvZGUsIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nLCBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzLCBjb250YWlucywgY3JlYXRlTW9ja1VzZXJUb2tlbiwgY3JlYXRlU3Vic2NyaWJlLCBkZWNvZGUsIGRlZXBDb3B5LCBkZWVwRXF1YWwsIGRlZXBFeHRlbmQsIGVycm9yUHJlZml4LCBleHRyYWN0UXVlcnlzdHJpbmcsIGdldERlZmF1bHRBcHBDb25maWcsIGdldERlZmF1bHRFbXVsYXRvckhvc3QsIGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCwgZ2V0RGVmYXVsdHMsIGdldEV4cGVyaW1lbnRhbFNldHRpbmcsIGdldEdsb2JhbCwgZ2V0TW9kdWxhckluc3RhbmNlLCBnZXRVQSwgaXNBZG1pbiwgaXNCcm93c2VyLCBpc0Jyb3dzZXJFeHRlbnNpb24sIGlzRWxlY3Ryb24sIGlzRW1wdHksIGlzSUUsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCBpc01vYmlsZUNvcmRvdmEsIGlzTm9kZSwgaXNOb2RlU2RrLCBpc1JlYWN0TmF0aXZlLCBpc1NhZmFyaSwgaXNVV1AsIGlzVmFsaWRGb3JtYXQsIGlzVmFsaWRUaW1lc3RhbXAsIGlzc3VlZEF0VGltZSwganNvbkV2YWwsIG1hcCwgb3JkaW5hbCwgcHJvbWlzZVdpdGhUaW1lb3V0LCBxdWVyeXN0cmluZywgcXVlcnlzdHJpbmdEZWNvZGUsIHNhZmVHZXQsIHN0cmluZ0xlbmd0aCwgc3RyaW5nVG9CeXRlQXJyYXksIHN0cmluZ2lmeSwgdXVpZHY0LCB2YWxpZGF0ZUFyZ0NvdW50LCB2YWxpZGF0ZUNhbGxiYWNrLCB2YWxpZGF0ZUNvbnRleHRPYmplY3QsIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUsIHZhbGlkYXRlTmFtZXNwYWNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgRGVmZXJyZWQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8qKlxyXG4gKiBDb21wb25lbnQgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG5jbGFzcyBDb21wb25lbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIHB1YmxpYyBzZXJ2aWNlIG5hbWUsIGUuZy4gYXBwLCBhdXRoLCBmaXJlc3RvcmUsIGRhdGFiYXNlXHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2VGYWN0b3J5IFNlcnZpY2UgZmFjdG9yeSByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIHB1YmxpYyBpbnRlcmZhY2VcclxuICAgICAqIEBwYXJhbSB0eXBlIHdoZXRoZXIgdGhlIHNlcnZpY2UgcHJvdmlkZWQgYnkgdGhlIGNvbXBvbmVudCBpcyBwdWJsaWMgb3IgcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBpbnN0YW5jZUZhY3RvcnksIHR5cGUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VGYWN0b3J5ID0gaW5zdGFuY2VGYWN0b3J5O1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFByb3BlcnRpZXMgdG8gYmUgYWRkZWQgdG8gdGhlIHNlcnZpY2UgbmFtZXNwYWNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSB7fTtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gXCJMQVpZXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuTEFaWSAqLztcclxuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gbnVsbDtcclxuICAgIH1cclxuICAgIHNldEluc3RhbnRpYXRpb25Nb2RlKG1vZGUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gbW9kZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldE11bHRpcGxlSW5zdGFuY2VzKG11bHRpcGxlSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IG11bHRpcGxlSW5zdGFuY2VzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0U2VydmljZVByb3BzKHByb3BzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSBwcm9wcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGluc3RhbmNlIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiAnYXV0aCcsICdhdXRoLWludGVybmFsJ1xyXG4gKiBOYW1lU2VydmljZU1hcHBpbmdbVF0gaXMgYW4gYWxpYXMgZm9yIHRoZSB0eXBlIG9mIHRoZSBpbnN0YW5jZVxyXG4gKi9cclxuY2xhc3MgUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZCA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3MgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEEgcHJvdmlkZXIgY2FuIHByb3ZpZGUgbXVsaXRwbGUgaW5zdGFuY2VzIG9mIGEgc2VydmljZVxyXG4gICAgICogaWYgdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgaXMgdHJ1ZS5cclxuICAgICAqL1xyXG4gICAgZ2V0KGlkZW50aWZpZXIpIHtcclxuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlc0RlZmVycmVkLmhhcyhub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGRlZmVycmVkKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgc2VydmljZSBpZiBpdCBjYW4gYmUgYXV0by1pbml0aWFsaXplZFxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIGdldCgpLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCByZXR1cm4gdGhlIHVucmVzb2x2ZWQgcHJvbWlzZSBpbiB0aGlzIGNhc2UuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKS5wcm9taXNlO1xyXG4gICAgfVxyXG4gICAgZ2V0SW1tZWRpYXRlKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pZGVudGlmaWVyKTtcclxuICAgICAgICBjb25zdCBvcHRpb25hbCA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5vcHRpb25hbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBJbiBjYXNlIGEgY29tcG9uZW50IGlzIG5vdCBpbml0aWFsaXplZCBhbmQgc2hvdWxkL2NhbiBub3QgYmUgYXV0by1pbml0aWFsaXplZCBhdCB0aGUgbW9tZW50LCByZXR1cm4gbnVsbCBpZiB0aGUgb3B0aW9uYWwgZmxhZyBpcyBzZXQsIG9yIHRocm93XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihgU2VydmljZSAke3RoaXMubmFtZX0gaXMgbm90IGF2YWlsYWJsZWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0Q29tcG9uZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudDtcclxuICAgIH1cclxuICAgIHNldENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBpZiAoY29tcG9uZW50Lm5hbWUgIT09IHRoaXMubmFtZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgTWlzbWF0Y2hpbmcgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGZvciBQcm92aWRlciAke3RoaXMubmFtZX0uYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50IGZvciAke3RoaXMubmFtZX0gaGFzIGFscmVhZHkgYmVlbiBwcm92aWRlZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcclxuICAgICAgICAvLyByZXR1cm4gZWFybHkgd2l0aG91dCBhdHRlbXB0aW5nIHRvIGluaXRpYWxpemUgdGhlIGNvbXBvbmVudCBpZiB0aGUgY29tcG9uZW50IHJlcXVpcmVzIGV4cGxpY2l0IGluaXRpYWxpemF0aW9uIChjYWxsaW5nIGBQcm92aWRlci5pbml0aWFsaXplKClgKVxyXG4gICAgICAgIGlmICghdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgdGhlIHNlcnZpY2UgaXMgZWFnZXIsIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgaW5zdGFuY2VcclxuICAgICAgICBpZiAoaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoeyBpbnN0YW5jZUlkZW50aWZpZXI6IERFRkFVTFRfRU5UUllfTkFNRSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSBmb3IgYW4gZWFnZXIgQ29tcG9uZW50IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIHRoZSBlYWdlclxyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6YXRpb24sIGl0IHNob3VsZCBub3QgY2F1c2UgYSBmYXRhbCBlcnJvci5cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IEludmVzdGlnYXRlIGlmIHdlIG5lZWQgdG8gbWFrZSBpdCBjb25maWd1cmFibGUsIGJlY2F1c2Ugc29tZSBjb21wb25lbnQgbWF5IHdhbnQgdG8gY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IgaW4gdGhpcyBjYXNlP1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENyZWF0ZSBzZXJ2aWNlIGluc3RhbmNlcyBmb3IgdGhlIHBlbmRpbmcgcHJvbWlzZXMgYW5kIHJlc29sdmUgdGhlbVxyXG4gICAgICAgIC8vIE5PVEU6IGlmIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgaXMgZmFsc2UsIG9ubHkgdGhlIGRlZmF1bHQgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkXHJcbiAgICAgICAgLy8gYW5kIGFsbCBwcm9taXNlcyB3aXRoIHJlc29sdmUgd2l0aCBpdCByZWdhcmRsZXNzIG9mIHRoZSBpZGVudGlmaWVyLlxyXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gYGdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoKWAgc2hvdWxkIGFsd2F5cyByZXR1cm4gYSB2YWxpZCBpbnN0YW5jZSBzaW5jZSBhIGNvbXBvbmVudCBpcyBndWFyYW50ZWVkLiB1c2UgISB0byBtYWtlIHR5cGVzY3JpcHQgaGFwcHkuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24sIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgbGVhdmUgdGhlIHByb21pc2UgdW5yZXNvbHZlZC5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNsZWFySW5zdGFuY2UoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgfVxyXG4gICAgLy8gYXBwLmRlbGV0ZSgpIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBvbiBldmVyeSBwcm92aWRlciB0byBkZWxldGUgdGhlIHNlcnZpY2VzXHJcbiAgICAvLyBUT0RPOiBzaG91bGQgd2UgbWFyayB0aGUgcHJvdmlkZXIgYXMgZGVsZXRlZD9cclxuICAgIGFzeW5jIGRlbGV0ZSgpIHtcclxuICAgICAgICBjb25zdCBzZXJ2aWNlcyA9IEFycmF5LmZyb20odGhpcy5pbnN0YW5jZXMudmFsdWVzKCkpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnSU5URVJOQUwnIGluIHNlcnZpY2UpIC8vIGxlZ2FjeSBzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIC5tYXAoc2VydmljZSA9PiBzZXJ2aWNlLklOVEVSTkFMLmRlbGV0ZSgpKSxcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnX2RlbGV0ZScgaW4gc2VydmljZSkgLy8gbW9kdWxhcml6ZWQgc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5fZGVsZXRlKCkpXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbiAgICBpc0NvbXBvbmVudFNldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQgIT0gbnVsbDtcclxuICAgIH1cclxuICAgIGlzSW5pdGlhbGl6ZWQoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlcy5oYXMoaWRlbnRpZmllcik7XHJcbiAgICB9XHJcbiAgICBnZXRPcHRpb25zKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXNPcHRpb25zLmdldChpZGVudGlmaWVyKSB8fCB7fTtcclxuICAgIH1cclxuICAgIGluaXRpYWxpemUob3B0cyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgeyBvcHRpb25zID0ge30gfSA9IG9wdHM7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRzLmluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYCR7dGhpcy5uYW1lfSgke25vcm1hbGl6ZWRJZGVudGlmaWVyfSkgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50ICR7dGhpcy5uYW1lfSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZCB5ZXRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyLFxyXG4gICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gcmVzb2x2ZSBhbnkgcGVuZGluZyBwcm9taXNlIHdhaXRpbmcgZm9yIHRoZSBzZXJ2aWNlIGluc3RhbmNlXHJcbiAgICAgICAgZm9yIChjb25zdCBbaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZURlZmVycmVkXSBvZiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRJZGVudGlmaWVyID09PSBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGludm9rZWQgIGFmdGVyIHRoZSBwcm92aWRlciBoYXMgYmVlbiBpbml0aWFsaXplZCBieSBjYWxsaW5nIHByb3ZpZGVyLmluaXRpYWxpemUoKS5cclxuICAgICAqIFRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIFNZTkNIUk9OT1VTTFksIHNvIGl0IHNob3VsZCBub3QgZXhlY3V0ZSBhbnkgbG9uZ3J1bm5pbmcgdGFza3MgaW4gb3JkZXIgdG8gbm90IGJsb2NrIHRoZSBwcm9ncmFtLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEFuIG9wdGlvbmFsIGluc3RhbmNlIGlkZW50aWZpZXJcclxuICAgICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gdG8gdW5yZWdpc3RlciB0aGUgY2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgb25Jbml0KGNhbGxiYWNrLCBpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdDYWxsYmFja3MgPSAoX2EgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBuZXcgU2V0KCk7XHJcbiAgICAgICAgZXhpc3RpbmdDYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcy5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGV4aXN0aW5nQ2FsbGJhY2tzKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0luc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBjYWxsYmFjayhleGlzdGluZ0luc3RhbmNlLCBub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjayk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW52b2tlIG9uSW5pdCBjYWxsYmFja3Mgc3luY2hyb25vdXNseVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlIHRoZSBzZXJ2aWNlIGluc3RhbmNlYFxyXG4gICAgICovXHJcbiAgICBpbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGlkZW50aWZpZXIpIHtcclxuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCFjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soaW5zdGFuY2UsIGlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25Jbml0IGNhbGxiYWNrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zID0ge30gfSkge1xyXG4gICAgICAgIGxldCBpbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghaW5zdGFuY2UgJiYgdGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UgPSB0aGlzLmNvbXBvbmVudC5pbnN0YW5jZUZhY3RvcnkodGhpcy5jb250YWluZXIsIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplSWRlbnRpZmllckZvckZhY3RvcnkoaW5zdGFuY2VJZGVudGlmaWVyKSxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogSW52b2tlIG9uSW5pdCBsaXN0ZW5lcnMuXHJcbiAgICAgICAgICAgICAqIE5vdGUgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQgaXMgZGlmZmVyZW50LCB3aGljaCBpcyB1c2VkIGJ5IHRoZSBjb21wb25lbnQgY3JlYXRvcixcclxuICAgICAgICAgICAgICogd2hpbGUgb25Jbml0IGxpc3RlbmVycyBhcmUgcmVnaXN0ZXJlZCBieSBjb25zdW1lcnMgb2YgdGhlIHByb3ZpZGVyLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5pbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBPcmRlciBpcyBpbXBvcnRhbnRcclxuICAgICAgICAgICAgICogb25JbnN0YW5jZUNyZWF0ZWQoKSBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTsgd2hpY2hcclxuICAgICAgICAgICAgICogbWFrZXMgYGlzSW5pdGlhbGl6ZWQoKWAgcmV0dXJuIHRydWUuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQodGhpcy5jb250YWluZXIsIGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25JbnN0YW5jZUNyZWF0ZWRDYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgbm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzID8gaWRlbnRpZmllciA6IERFRkFVTFRfRU5UUllfTkFNRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZGVudGlmaWVyOyAvLyBhc3N1bWUgbXVsdGlwbGUgaW5zdGFuY2VzIGFyZSBzdXBwb3J0ZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgcHJvdmlkZWQuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2hvdWxkQXV0b0luaXRpYWxpemUoKSB7XHJcbiAgICAgICAgcmV0dXJuICghIXRoaXMuY29tcG9uZW50ICYmXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlICE9PSBcIkVYUExJQ0lUXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuRVhQTElDSVQgKi8pO1xyXG4gICAgfVxyXG59XHJcbi8vIHVuZGVmaW5lZCBzaG91bGQgYmUgcGFzc2VkIHRvIHRoZSBzZXJ2aWNlIGZhY3RvcnkgZm9yIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGlkZW50aWZpZXIpIHtcclxuICAgIHJldHVybiBpZGVudGlmaWVyID09PSBERUZBVUxUX0VOVFJZX05BTUUgPyB1bmRlZmluZWQgOiBpZGVudGlmaWVyO1xyXG59XHJcbmZ1bmN0aW9uIGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSB7XHJcbiAgICByZXR1cm4gY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlID09PSBcIkVBR0VSXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuRUFHRVIgKi87XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvbXBvbmVudENvbnRhaW5lciB0aGF0IHByb3ZpZGVzIFByb3ZpZGVycyBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcclxuICovXHJcbmNsYXNzIENvbXBvbmVudENvbnRhaW5lciB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgQ29tcG9uZW50IGJlaW5nIGFkZGVkXHJcbiAgICAgKiBAcGFyYW0gb3ZlcndyaXRlIFdoZW4gYSBjb21wb25lbnQgd2l0aCB0aGUgc2FtZSBuYW1lIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCxcclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyB0cnVlOiBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIGNvbXBvbmVudCB3aXRoIHRoZSBuZXcgY29tcG9uZW50IGFuZCBjcmVhdGUgYSBuZXdcclxuICAgICAqIHByb3ZpZGVyIHdpdGggdGhlIG5ldyBjb21wb25lbnQuIEl0IGNhbiBiZSB1c2VmdWwgaW4gdGVzdHMgd2hlcmUgeW91IHdhbnQgdG8gdXNlIGRpZmZlcmVudCBtb2Nrc1xyXG4gICAgICogZm9yIGRpZmZlcmVudCB0ZXN0cy5cclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyBmYWxzZTogdGhyb3cgYW4gZXhjZXB0aW9uXHJcbiAgICAgKi9cclxuICAgIGFkZENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCB3aXRoICR7dGhpcy5uYW1lfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm92aWRlci5zZXRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSBleGlzdGluZyBwcm92aWRlciBmcm9tIHRoZSBjb250YWluZXIsIHNvIHdlIGNhbiByZWdpc3RlciB0aGUgbmV3IGNvbXBvbmVudFxyXG4gICAgICAgICAgICB0aGlzLnByb3ZpZGVycy5kZWxldGUoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBnZXRQcm92aWRlciBwcm92aWRlcyBhIHR5cGUgc2FmZSBpbnRlcmZhY2Ugd2hlcmUgaXQgY2FuIG9ubHkgYmUgY2FsbGVkIHdpdGggYSBmaWVsZCBuYW1lXHJcbiAgICAgKiBwcmVzZW50IGluIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UuXHJcbiAgICAgKlxyXG4gICAgICogRmlyZWJhc2UgU0RLcyBwcm92aWRpbmcgc2VydmljZXMgc2hvdWxkIGV4dGVuZCBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlIHRvIHJlZ2lzdGVyXHJcbiAgICAgKiB0aGVtc2VsdmVzLlxyXG4gICAgICovXHJcbiAgICBnZXRQcm92aWRlcihuYW1lKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvdmlkZXJzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjcmVhdGUgYSBQcm92aWRlciBmb3IgYSBzZXJ2aWNlIHRoYXQgaGFzbid0IHJlZ2lzdGVyZWQgd2l0aCBGaXJlYmFzZVxyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IFByb3ZpZGVyKG5hbWUsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJzLnNldChuYW1lLCBwcm92aWRlcik7XHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyO1xyXG4gICAgfVxyXG4gICAgZ2V0UHJvdmlkZXJzKCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucHJvdmlkZXJzLnZhbHVlcygpKTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbnRhaW5lciwgUHJvdmlkZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCIvKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBjb250YWluZXIgZm9yIGFsbCBvZiB0aGUgTG9nZ2VyIGluc3RhbmNlc1xyXG4gKi9cclxuY29uc3QgaW5zdGFuY2VzID0gW107XHJcbi8qKlxyXG4gKiBUaGUgSlMgU0RLIHN1cHBvcnRzIDUgbG9nIGxldmVscyBhbmQgYWxzbyBhbGxvd3MgYSB1c2VyIHRoZSBhYmlsaXR5IHRvXHJcbiAqIHNpbGVuY2UgdGhlIGxvZ3MgYWx0b2dldGhlci5cclxuICpcclxuICogVGhlIG9yZGVyIGlzIGEgZm9sbG93czpcclxuICogREVCVUcgPCBWRVJCT1NFIDwgSU5GTyA8IFdBUk4gPCBFUlJPUlxyXG4gKlxyXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgd2lsbCBiZSBjYXB0dXJlZCAoaS5lLiBpZlxyXG4gKiB5b3Ugc2V0IHRoZSBsb2cgbGV2ZWwgdG8gYElORk9gLCBlcnJvcnMgd2lsbCBzdGlsbCBiZSBsb2dnZWQsIGJ1dCBgREVCVUdgIGFuZFxyXG4gKiBgVkVSQk9TRWAgbG9ncyB3aWxsIG5vdClcclxuICovXHJcbnZhciBMb2dMZXZlbDtcclxuKGZ1bmN0aW9uIChMb2dMZXZlbCkge1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJERUJVR1wiXSA9IDBdID0gXCJERUJVR1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJWRVJCT1NFXCJdID0gMV0gPSBcIlZFUkJPU0VcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiSU5GT1wiXSA9IDJdID0gXCJJTkZPXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIldBUk5cIl0gPSAzXSA9IFwiV0FSTlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJFUlJPUlwiXSA9IDRdID0gXCJFUlJPUlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJTSUxFTlRcIl0gPSA1XSA9IFwiU0lMRU5UXCI7XHJcbn0pKExvZ0xldmVsIHx8IChMb2dMZXZlbCA9IHt9KSk7XHJcbmNvbnN0IGxldmVsU3RyaW5nVG9FbnVtID0ge1xyXG4gICAgJ2RlYnVnJzogTG9nTGV2ZWwuREVCVUcsXHJcbiAgICAndmVyYm9zZSc6IExvZ0xldmVsLlZFUkJPU0UsXHJcbiAgICAnaW5mbyc6IExvZ0xldmVsLklORk8sXHJcbiAgICAnd2Fybic6IExvZ0xldmVsLldBUk4sXHJcbiAgICAnZXJyb3InOiBMb2dMZXZlbC5FUlJPUixcclxuICAgICdzaWxlbnQnOiBMb2dMZXZlbC5TSUxFTlRcclxufTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBsZXZlbFxyXG4gKi9cclxuY29uc3QgZGVmYXVsdExvZ0xldmVsID0gTG9nTGV2ZWwuSU5GTztcclxuLyoqXHJcbiAqIEJ5IGRlZmF1bHQsIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgZGlzcGxheWVkIGluIHRoZSBkZXZlbG9wZXIgY29uc29sZSAoaW5cclxuICogY2hyb21lKS4gVG8gYXZvaWQgZm9yY2luZyB1c2VycyB0byBoYXZlIHRvIG9wdC1pbiB0byB0aGVzZSBsb2dzIHR3aWNlXHJcbiAqIChpLmUuIG9uY2UgZm9yIGZpcmViYXNlLCBhbmQgb25jZSBpbiB0aGUgY29uc29sZSksIHdlIGFyZSBzZW5kaW5nIGBERUJVR2BcclxuICogbG9ncyB0byB0aGUgYGNvbnNvbGUubG9nYCBmdW5jdGlvbi5cclxuICovXHJcbmNvbnN0IENvbnNvbGVNZXRob2QgPSB7XHJcbiAgICBbTG9nTGV2ZWwuREVCVUddOiAnbG9nJyxcclxuICAgIFtMb2dMZXZlbC5WRVJCT1NFXTogJ2xvZycsXHJcbiAgICBbTG9nTGV2ZWwuSU5GT106ICdpbmZvJyxcclxuICAgIFtMb2dMZXZlbC5XQVJOXTogJ3dhcm4nLFxyXG4gICAgW0xvZ0xldmVsLkVSUk9SXTogJ2Vycm9yJ1xyXG59O1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgbG9nIGhhbmRsZXIgd2lsbCBmb3J3YXJkIERFQlVHLCBWRVJCT1NFLCBJTkZPLCBXQVJOLCBhbmQgRVJST1JcclxuICogbWVzc2FnZXMgb24gdG8gdGhlaXIgY29ycmVzcG9uZGluZyBjb25zb2xlIGNvdW50ZXJwYXJ0cyAoaWYgdGhlIGxvZyBtZXRob2RcclxuICogaXMgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IGxvZyBsZXZlbClcclxuICovXHJcbmNvbnN0IGRlZmF1bHRMb2dIYW5kbGVyID0gKGluc3RhbmNlLCBsb2dUeXBlLCAuLi5hcmdzKSA9PiB7XHJcbiAgICBpZiAobG9nVHlwZSA8IGluc3RhbmNlLmxvZ0xldmVsKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgY29uc3QgbWV0aG9kID0gQ29uc29sZU1ldGhvZFtsb2dUeXBlXTtcclxuICAgIGlmIChtZXRob2QpIHtcclxuICAgICAgICBjb25zb2xlW21ldGhvZF0oYFske25vd31dICAke2luc3RhbmNlLm5hbWV9OmAsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gbG9nIGEgbWVzc2FnZSB3aXRoIGFuIGludmFsaWQgbG9nVHlwZSAodmFsdWU6ICR7bG9nVHlwZX0pYCk7XHJcbiAgICB9XHJcbn07XHJcbmNsYXNzIExvZ2dlciB7XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVzIHlvdSBhbiBpbnN0YW5jZSBvZiBhIExvZ2dlciB0byBjYXB0dXJlIG1lc3NhZ2VzIGFjY29yZGluZyB0b1xyXG4gICAgICogRmlyZWJhc2UncyBsb2dnaW5nIHNjaGVtZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0aGF0IHRoZSBsb2dzIHdpbGwgYmUgYXNzb2NpYXRlZCB3aXRoXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBsb2cgbGV2ZWwgb2YgdGhlIGdpdmVuIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IGRlZmF1bHRMb2dMZXZlbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbWFpbiAoaW50ZXJuYWwpIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqIENhbiBiZSBzZXQgdG8gYSBuZXcgZnVuY3Rpb24gaW4gaW50ZXJuYWwgcGFja2FnZSBjb2RlIGJ1dCBub3QgYnkgdXNlci5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gZGVmYXVsdExvZ0hhbmRsZXI7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG9wdGlvbmFsLCBhZGRpdGlvbmFsLCB1c2VyLWRlZmluZWQgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhcHR1cmUgdGhlIGN1cnJlbnQgaW5zdGFuY2UgZm9yIGxhdGVyIHVzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGluc3RhbmNlcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGxvZ0xldmVsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dMZXZlbDtcclxuICAgIH1cclxuICAgIHNldCBsb2dMZXZlbCh2YWwpIHtcclxuICAgICAgICBpZiAoISh2YWwgaW4gTG9nTGV2ZWwpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgdmFsdWUgXCIke3ZhbH1cIiBhc3NpZ25lZCB0byBcXGBsb2dMZXZlbFxcYGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHZhbDtcclxuICAgIH1cclxuICAgIC8vIFdvcmthcm91bmQgZm9yIHNldHRlci9nZXR0ZXIgaGF2aW5nIHRvIGJlIHRoZSBzYW1lIHR5cGUuXHJcbiAgICBzZXRMb2dMZXZlbCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnID8gbGV2ZWxTdHJpbmdUb0VudW1bdmFsXSA6IHZhbDtcclxuICAgIH1cclxuICAgIGdldCBsb2dIYW5kbGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dIYW5kbGVyO1xyXG4gICAgfVxyXG4gICAgc2V0IGxvZ0hhbmRsZXIodmFsKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgYXNzaWduZWQgdG8gYGxvZ0hhbmRsZXJgIG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IHVzZXJMb2dIYW5kbGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyTG9nSGFuZGxlcjtcclxuICAgIH1cclxuICAgIHNldCB1c2VyTG9nSGFuZGxlcih2YWwpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciA9IHZhbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZ1bmN0aW9ucyBiZWxvdyBhcmUgYWxsIGJhc2VkIG9uIHRoZSBgY29uc29sZWAgaW50ZXJmYWNlXHJcbiAgICAgKi9cclxuICAgIGRlYnVnKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5ERUJVRywgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5ERUJVRywgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBsb2coLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmXHJcbiAgICAgICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuVkVSQk9TRSwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBpbmZvKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5JTkZPLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLklORk8sIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgd2FybiguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5XQVJOLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGVycm9yKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5FUlJPUiwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5FUlJPUiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobGV2ZWwpIHtcclxuICAgIGluc3RhbmNlcy5mb3JFYWNoKGluc3QgPT4ge1xyXG4gICAgICAgIGluc3Quc2V0TG9nTGV2ZWwobGV2ZWwpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGZvciAoY29uc3QgaW5zdGFuY2Ugb2YgaW5zdGFuY2VzKSB7XHJcbiAgICAgICAgbGV0IGN1c3RvbUxvZ0xldmVsID0gbnVsbDtcclxuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxldmVsKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUxvZ0xldmVsID0gbGV2ZWxTdHJpbmdUb0VudW1bb3B0aW9ucy5sZXZlbF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsb2dDYWxsYmFjayA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS51c2VyTG9nSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS51c2VyTG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbGV2ZWwsIC4uLmFyZ3MpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhcmdzXHJcbiAgICAgICAgICAgICAgICAgICAgLm1hcChhcmcgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmcgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChpZ25vcmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihhcmcgPT4gYXJnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCcgJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPj0gKGN1c3RvbUxvZ0xldmVsICE9PSBudWxsICYmIGN1c3RvbUxvZ0xldmVsICE9PSB2b2lkIDAgPyBjdXN0b21Mb2dMZXZlbCA6IGluc3RhbmNlLmxvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ0NhbGxiYWNrKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IExvZ0xldmVsW2xldmVsXS50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBpbnN0YW5jZS5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IExvZ0xldmVsLCBMb2dnZXIsIHNldExvZ0xldmVsLCBzZXRVc2VyTG9nSGFuZGxlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImNvbnN0IGluc3RhbmNlT2ZBbnkgPSAob2JqZWN0LCBjb25zdHJ1Y3RvcnMpID0+IGNvbnN0cnVjdG9ycy5zb21lKChjKSA9PiBvYmplY3QgaW5zdGFuY2VvZiBjKTtcblxubGV0IGlkYlByb3h5YWJsZVR5cGVzO1xubGV0IGN1cnNvckFkdmFuY2VNZXRob2RzO1xuLy8gVGhpcyBpcyBhIGZ1bmN0aW9uIHRvIHByZXZlbnQgaXQgdGhyb3dpbmcgdXAgaW4gbm9kZSBlbnZpcm9ubWVudHMuXG5mdW5jdGlvbiBnZXRJZGJQcm94eWFibGVUeXBlcygpIHtcbiAgICByZXR1cm4gKGlkYlByb3h5YWJsZVR5cGVzIHx8XG4gICAgICAgIChpZGJQcm94eWFibGVUeXBlcyA9IFtcbiAgICAgICAgICAgIElEQkRhdGFiYXNlLFxuICAgICAgICAgICAgSURCT2JqZWN0U3RvcmUsXG4gICAgICAgICAgICBJREJJbmRleCxcbiAgICAgICAgICAgIElEQkN1cnNvcixcbiAgICAgICAgICAgIElEQlRyYW5zYWN0aW9uLFxuICAgICAgICBdKSk7XG59XG4vLyBUaGlzIGlzIGEgZnVuY3Rpb24gdG8gcHJldmVudCBpdCB0aHJvd2luZyB1cCBpbiBub2RlIGVudmlyb25tZW50cy5cbmZ1bmN0aW9uIGdldEN1cnNvckFkdmFuY2VNZXRob2RzKCkge1xuICAgIHJldHVybiAoY3Vyc29yQWR2YW5jZU1ldGhvZHMgfHxcbiAgICAgICAgKGN1cnNvckFkdmFuY2VNZXRob2RzID0gW1xuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5hZHZhbmNlLFxuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5jb250aW51ZSxcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuY29udGludWVQcmltYXJ5S2V5LFxuICAgICAgICBdKSk7XG59XG5jb25zdCBjdXJzb3JSZXF1ZXN0TWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zYWN0aW9uRG9uZU1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNmb3JtQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCkge1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHVubGlzdGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgc3VjY2Vzcyk7XG4gICAgICAgICAgICByZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSh3cmFwKHJlcXVlc3QucmVzdWx0KSk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlamVjdChyZXF1ZXN0LmVycm9yKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIHN1Y2Nlc3MpO1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgIH0pO1xuICAgIHByb21pc2VcbiAgICAgICAgLnRoZW4oKHZhbHVlKSA9PiB7XG4gICAgICAgIC8vIFNpbmNlIGN1cnNvcmluZyByZXVzZXMgdGhlIElEQlJlcXVlc3QgKCpzaWdoKiksIHdlIGNhY2hlIGl0IGZvciBsYXRlciByZXRyaWV2YWxcbiAgICAgICAgLy8gKHNlZSB3cmFwRnVuY3Rpb24pLlxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJDdXJzb3IpIHtcbiAgICAgICAgICAgIGN1cnNvclJlcXVlc3RNYXAuc2V0KHZhbHVlLCByZXF1ZXN0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDYXRjaGluZyB0byBhdm9pZCBcIlVuY2F1Z2h0IFByb21pc2UgZXhjZXB0aW9uc1wiXG4gICAgfSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgLy8gVGhpcyBtYXBwaW5nIGV4aXN0cyBpbiByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgYnV0IGRvZXNuJ3QgZG9lc24ndCBleGlzdCBpbiB0cmFuc2Zvcm1DYWNoZS4gVGhpc1xuICAgIC8vIGlzIGJlY2F1c2Ugd2UgY3JlYXRlIG1hbnkgcHJvbWlzZXMgZnJvbSBhIHNpbmdsZSBJREJSZXF1ZXN0LlxuICAgIHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5zZXQocHJvbWlzZSwgcmVxdWVzdCk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5mdW5jdGlvbiBjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24odHgpIHtcbiAgICAvLyBFYXJseSBiYWlsIGlmIHdlJ3ZlIGFscmVhZHkgY3JlYXRlZCBhIGRvbmUgcHJvbWlzZSBmb3IgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICBpZiAodHJhbnNhY3Rpb25Eb25lTWFwLmhhcyh0eCkpXG4gICAgICAgIHJldHVybjtcbiAgICBjb25zdCBkb25lID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCB1bmxpc3RlbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgY29tcGxldGUpO1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIGVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlamVjdCh0eC5lcnJvciB8fCBuZXcgRE9NRXhjZXB0aW9uKCdBYm9ydEVycm9yJywgJ0Fib3J0RXJyb3InKSk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGNvbXBsZXRlKTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZXJyb3IpO1xuICAgIH0pO1xuICAgIC8vIENhY2hlIGl0IGZvciBsYXRlciByZXRyaWV2YWwuXG4gICAgdHJhbnNhY3Rpb25Eb25lTWFwLnNldCh0eCwgZG9uZSk7XG59XG5sZXQgaWRiUHJveHlUcmFwcyA9IHtcbiAgICBnZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikge1xuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIHRyYW5zYWN0aW9uLmRvbmUuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ2RvbmUnKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbkRvbmVNYXAuZ2V0KHRhcmdldCk7XG4gICAgICAgICAgICAvLyBQb2x5ZmlsbCBmb3Igb2JqZWN0U3RvcmVOYW1lcyBiZWNhdXNlIG9mIEVkZ2UuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ29iamVjdFN0b3JlTmFtZXMnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5vYmplY3RTdG9yZU5hbWVzIHx8IHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcC5nZXQodGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE1ha2UgdHguc3RvcmUgcmV0dXJuIHRoZSBvbmx5IHN0b3JlIGluIHRoZSB0cmFuc2FjdGlvbiwgb3IgdW5kZWZpbmVkIGlmIHRoZXJlIGFyZSBtYW55LlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdzdG9yZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjZWl2ZXIub2JqZWN0U3RvcmVOYW1lc1sxXVxuICAgICAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA6IHJlY2VpdmVyLm9iamVjdFN0b3JlKHJlY2VpdmVyLm9iamVjdFN0b3JlTmFtZXNbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEVsc2UgdHJhbnNmb3JtIHdoYXRldmVyIHdlIGdldCBiYWNrLlxuICAgICAgICByZXR1cm4gd3JhcCh0YXJnZXRbcHJvcF0pO1xuICAgIH0sXG4gICAgc2V0KHRhcmdldCwgcHJvcCwgdmFsdWUpIHtcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgaGFzKHRhcmdldCwgcHJvcCkge1xuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24gJiZcbiAgICAgICAgICAgIChwcm9wID09PSAnZG9uZScgfHwgcHJvcCA9PT0gJ3N0b3JlJykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm9wIGluIHRhcmdldDtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIHJlcGxhY2VUcmFwcyhjYWxsYmFjaykge1xuICAgIGlkYlByb3h5VHJhcHMgPSBjYWxsYmFjayhpZGJQcm94eVRyYXBzKTtcbn1cbmZ1bmN0aW9uIHdyYXBGdW5jdGlvbihmdW5jKSB7XG4gICAgLy8gRHVlIHRvIGV4cGVjdGVkIG9iamVjdCBlcXVhbGl0eSAod2hpY2ggaXMgZW5mb3JjZWQgYnkgdGhlIGNhY2hpbmcgaW4gYHdyYXBgKSwgd2VcbiAgICAvLyBvbmx5IGNyZWF0ZSBvbmUgbmV3IGZ1bmMgcGVyIGZ1bmMuXG4gICAgLy8gRWRnZSBkb2Vzbid0IHN1cHBvcnQgb2JqZWN0U3RvcmVOYW1lcyAoYm9vbyksIHNvIHdlIHBvbHlmaWxsIGl0IGhlcmUuXG4gICAgaWYgKGZ1bmMgPT09IElEQkRhdGFiYXNlLnByb3RvdHlwZS50cmFuc2FjdGlvbiAmJlxuICAgICAgICAhKCdvYmplY3RTdG9yZU5hbWVzJyBpbiBJREJUcmFuc2FjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoc3RvcmVOYW1lcywgLi4uYXJncykge1xuICAgICAgICAgICAgY29uc3QgdHggPSBmdW5jLmNhbGwodW53cmFwKHRoaXMpLCBzdG9yZU5hbWVzLCAuLi5hcmdzKTtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcC5zZXQodHgsIHN0b3JlTmFtZXMuc29ydCA/IHN0b3JlTmFtZXMuc29ydCgpIDogW3N0b3JlTmFtZXNdKTtcbiAgICAgICAgICAgIHJldHVybiB3cmFwKHR4KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gQ3Vyc29yIG1ldGhvZHMgYXJlIHNwZWNpYWwsIGFzIHRoZSBiZWhhdmlvdXIgaXMgYSBsaXR0bGUgbW9yZSBkaWZmZXJlbnQgdG8gc3RhbmRhcmQgSURCLiBJblxuICAgIC8vIElEQiwgeW91IGFkdmFuY2UgdGhlIGN1cnNvciBhbmQgd2FpdCBmb3IgYSBuZXcgJ3N1Y2Nlc3MnIG9uIHRoZSBJREJSZXF1ZXN0IHRoYXQgZ2F2ZSB5b3UgdGhlXG4gICAgLy8gY3Vyc29yLiBJdCdzIGtpbmRhIGxpa2UgYSBwcm9taXNlIHRoYXQgY2FuIHJlc29sdmUgd2l0aCBtYW55IHZhbHVlcy4gVGhhdCBkb2Vzbid0IG1ha2Ugc2Vuc2VcbiAgICAvLyB3aXRoIHJlYWwgcHJvbWlzZXMsIHNvIGVhY2ggYWR2YW5jZSBtZXRob2RzIHJldHVybnMgYSBuZXcgcHJvbWlzZSBmb3IgdGhlIGN1cnNvciBvYmplY3QsIG9yXG4gICAgLy8gdW5kZWZpbmVkIGlmIHRoZSBlbmQgb2YgdGhlIGN1cnNvciBoYXMgYmVlbiByZWFjaGVkLlxuICAgIGlmIChnZXRDdXJzb3JBZHZhbmNlTWV0aG9kcygpLmluY2x1ZGVzKGZ1bmMpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgLy8gQ2FsbGluZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJveHkgYXMgJ3RoaXMnIGNhdXNlcyBJTExFR0FMIElOVk9DQVRJT04sIHNvIHdlIHVzZVxuICAgICAgICAgICAgLy8gdGhlIG9yaWdpbmFsIG9iamVjdC5cbiAgICAgICAgICAgIGZ1bmMuYXBwbHkodW53cmFwKHRoaXMpLCBhcmdzKTtcbiAgICAgICAgICAgIHJldHVybiB3cmFwKGN1cnNvclJlcXVlc3RNYXAuZ2V0KHRoaXMpKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgIC8vIENhbGxpbmcgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHdpdGggdGhlIHByb3h5IGFzICd0aGlzJyBjYXVzZXMgSUxMRUdBTCBJTlZPQ0FUSU9OLCBzbyB3ZSB1c2VcbiAgICAgICAgLy8gdGhlIG9yaWdpbmFsIG9iamVjdC5cbiAgICAgICAgcmV0dXJuIHdyYXAoZnVuYy5hcHBseSh1bndyYXAodGhpcyksIGFyZ3MpKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gdHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpXG4gICAgICAgIHJldHVybiB3cmFwRnVuY3Rpb24odmFsdWUpO1xuICAgIC8vIFRoaXMgZG9lc24ndCByZXR1cm4sIGl0IGp1c3QgY3JlYXRlcyBhICdkb25lJyBwcm9taXNlIGZvciB0aGUgdHJhbnNhY3Rpb24sXG4gICAgLy8gd2hpY2ggaXMgbGF0ZXIgcmV0dXJuZWQgZm9yIHRyYW5zYWN0aW9uLmRvbmUgKHNlZSBpZGJPYmplY3RIYW5kbGVyKS5cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbilcbiAgICAgICAgY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uKHZhbHVlKTtcbiAgICBpZiAoaW5zdGFuY2VPZkFueSh2YWx1ZSwgZ2V0SWRiUHJveHlhYmxlVHlwZXMoKSkpXG4gICAgICAgIHJldHVybiBuZXcgUHJveHkodmFsdWUsIGlkYlByb3h5VHJhcHMpO1xuICAgIC8vIFJldHVybiB0aGUgc2FtZSB2YWx1ZSBiYWNrIGlmIHdlJ3JlIG5vdCBnb2luZyB0byB0cmFuc2Zvcm0gaXQuXG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gd3JhcCh2YWx1ZSkge1xuICAgIC8vIFdlIHNvbWV0aW1lcyBnZW5lcmF0ZSBtdWx0aXBsZSBwcm9taXNlcyBmcm9tIGEgc2luZ2xlIElEQlJlcXVlc3QgKGVnIHdoZW4gY3Vyc29yaW5nKSwgYmVjYXVzZVxuICAgIC8vIElEQiBpcyB3ZWlyZCBhbmQgYSBzaW5nbGUgSURCUmVxdWVzdCBjYW4geWllbGQgbWFueSByZXNwb25zZXMsIHNvIHRoZXNlIGNhbid0IGJlIGNhY2hlZC5cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJSZXF1ZXN0KVxuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdCh2YWx1ZSk7XG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSB0cmFuc2Zvcm1lZCB0aGlzIHZhbHVlIGJlZm9yZSwgcmV1c2UgdGhlIHRyYW5zZm9ybWVkIHZhbHVlLlxuICAgIC8vIFRoaXMgaXMgZmFzdGVyLCBidXQgaXQgYWxzbyBwcm92aWRlcyBvYmplY3QgZXF1YWxpdHkuXG4gICAgaWYgKHRyYW5zZm9ybUNhY2hlLmhhcyh2YWx1ZSkpXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1DYWNoZS5nZXQodmFsdWUpO1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gdHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSh2YWx1ZSk7XG4gICAgLy8gTm90IGFsbCB0eXBlcyBhcmUgdHJhbnNmb3JtZWQuXG4gICAgLy8gVGhlc2UgbWF5IGJlIHByaW1pdGl2ZSB0eXBlcywgc28gdGhleSBjYW4ndCBiZSBXZWFrTWFwIGtleXMuXG4gICAgaWYgKG5ld1ZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICB0cmFuc2Zvcm1DYWNoZS5zZXQodmFsdWUsIG5ld1ZhbHVlKTtcbiAgICAgICAgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLnNldChuZXdWYWx1ZSwgdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3VmFsdWU7XG59XG5jb25zdCB1bndyYXAgPSAodmFsdWUpID0+IHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5nZXQodmFsdWUpO1xuXG5leHBvcnQgeyByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgYXMgYSwgaW5zdGFuY2VPZkFueSBhcyBpLCByZXBsYWNlVHJhcHMgYXMgciwgdW53cmFwIGFzIHUsIHdyYXAgYXMgdyB9O1xuIiwiaW1wb3J0IHsgdyBhcyB3cmFwLCByIGFzIHJlcGxhY2VUcmFwcyB9IGZyb20gJy4vd3JhcC1pZGItdmFsdWUuanMnO1xuZXhwb3J0IHsgdSBhcyB1bndyYXAsIHcgYXMgd3JhcCB9IGZyb20gJy4vd3JhcC1pZGItdmFsdWUuanMnO1xuXG4vKipcbiAqIE9wZW4gYSBkYXRhYmFzZS5cbiAqXG4gKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBkYXRhYmFzZS5cbiAqIEBwYXJhbSB2ZXJzaW9uIFNjaGVtYSB2ZXJzaW9uLlxuICogQHBhcmFtIGNhbGxiYWNrcyBBZGRpdGlvbmFsIGNhbGxiYWNrcy5cbiAqL1xuZnVuY3Rpb24gb3BlbkRCKG5hbWUsIHZlcnNpb24sIHsgYmxvY2tlZCwgdXBncmFkZSwgYmxvY2tpbmcsIHRlcm1pbmF0ZWQgfSA9IHt9KSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKG5hbWUsIHZlcnNpb24pO1xuICAgIGNvbnN0IG9wZW5Qcm9taXNlID0gd3JhcChyZXF1ZXN0KTtcbiAgICBpZiAodXBncmFkZSkge1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3VwZ3JhZGVuZWVkZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHVwZ3JhZGUod3JhcChyZXF1ZXN0LnJlc3VsdCksIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50Lm5ld1ZlcnNpb24sIHdyYXAocmVxdWVzdC50cmFuc2FjdGlvbiksIGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChibG9ja2VkKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignYmxvY2tlZCcsIChldmVudCkgPT4gYmxvY2tlZChcbiAgICAgICAgLy8gQ2FzdGluZyBkdWUgdG8gaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0LURPTS1saWItZ2VuZXJhdG9yL3B1bGwvMTQwNVxuICAgICAgICBldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCBldmVudCkpO1xuICAgIH1cbiAgICBvcGVuUHJvbWlzZVxuICAgICAgICAudGhlbigoZGIpID0+IHtcbiAgICAgICAgaWYgKHRlcm1pbmF0ZWQpXG4gICAgICAgICAgICBkYi5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsICgpID0+IHRlcm1pbmF0ZWQoKSk7XG4gICAgICAgIGlmIChibG9ja2luZykge1xuICAgICAgICAgICAgZGIuYWRkRXZlbnRMaXN0ZW5lcigndmVyc2lvbmNoYW5nZScsIChldmVudCkgPT4gYmxvY2tpbmcoZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQubmV3VmVyc2lvbiwgZXZlbnQpKTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIHJldHVybiBvcGVuUHJvbWlzZTtcbn1cbi8qKlxuICogRGVsZXRlIGEgZGF0YWJhc2UuXG4gKlxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgZGF0YWJhc2UuXG4gKi9cbmZ1bmN0aW9uIGRlbGV0ZURCKG5hbWUsIHsgYmxvY2tlZCB9ID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKG5hbWUpO1xuICAgIGlmIChibG9ja2VkKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignYmxvY2tlZCcsIChldmVudCkgPT4gYmxvY2tlZChcbiAgICAgICAgLy8gQ2FzdGluZyBkdWUgdG8gaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0LURPTS1saWItZ2VuZXJhdG9yL3B1bGwvMTQwNVxuICAgICAgICBldmVudC5vbGRWZXJzaW9uLCBldmVudCkpO1xuICAgIH1cbiAgICByZXR1cm4gd3JhcChyZXF1ZXN0KS50aGVuKCgpID0+IHVuZGVmaW5lZCk7XG59XG5cbmNvbnN0IHJlYWRNZXRob2RzID0gWydnZXQnLCAnZ2V0S2V5JywgJ2dldEFsbCcsICdnZXRBbGxLZXlzJywgJ2NvdW50J107XG5jb25zdCB3cml0ZU1ldGhvZHMgPSBbJ3B1dCcsICdhZGQnLCAnZGVsZXRlJywgJ2NsZWFyJ107XG5jb25zdCBjYWNoZWRNZXRob2RzID0gbmV3IE1hcCgpO1xuZnVuY3Rpb24gZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkge1xuICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIElEQkRhdGFiYXNlICYmXG4gICAgICAgICEocHJvcCBpbiB0YXJnZXQpICYmXG4gICAgICAgIHR5cGVvZiBwcm9wID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2FjaGVkTWV0aG9kcy5nZXQocHJvcCkpXG4gICAgICAgIHJldHVybiBjYWNoZWRNZXRob2RzLmdldChwcm9wKTtcbiAgICBjb25zdCB0YXJnZXRGdW5jTmFtZSA9IHByb3AucmVwbGFjZSgvRnJvbUluZGV4JC8sICcnKTtcbiAgICBjb25zdCB1c2VJbmRleCA9IHByb3AgIT09IHRhcmdldEZ1bmNOYW1lO1xuICAgIGNvbnN0IGlzV3JpdGUgPSB3cml0ZU1ldGhvZHMuaW5jbHVkZXModGFyZ2V0RnVuY05hbWUpO1xuICAgIGlmIChcbiAgICAvLyBCYWlsIGlmIHRoZSB0YXJnZXQgZG9lc24ndCBleGlzdCBvbiB0aGUgdGFyZ2V0LiBFZywgZ2V0QWxsIGlzbid0IGluIEVkZ2UuXG4gICAgISh0YXJnZXRGdW5jTmFtZSBpbiAodXNlSW5kZXggPyBJREJJbmRleCA6IElEQk9iamVjdFN0b3JlKS5wcm90b3R5cGUpIHx8XG4gICAgICAgICEoaXNXcml0ZSB8fCByZWFkTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbWV0aG9kID0gYXN5bmMgZnVuY3Rpb24gKHN0b3JlTmFtZSwgLi4uYXJncykge1xuICAgICAgICAvLyBpc1dyaXRlID8gJ3JlYWR3cml0ZScgOiB1bmRlZmluZWQgZ3ppcHBzIGJldHRlciwgYnV0IGZhaWxzIGluIEVkZ2UgOihcbiAgICAgICAgY29uc3QgdHggPSB0aGlzLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgaXNXcml0ZSA/ICdyZWFkd3JpdGUnIDogJ3JlYWRvbmx5Jyk7XG4gICAgICAgIGxldCB0YXJnZXQgPSB0eC5zdG9yZTtcbiAgICAgICAgaWYgKHVzZUluZGV4KVxuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LmluZGV4KGFyZ3Muc2hpZnQoKSk7XG4gICAgICAgIC8vIE11c3QgcmVqZWN0IGlmIG9wIHJlamVjdHMuXG4gICAgICAgIC8vIElmIGl0J3MgYSB3cml0ZSBvcGVyYXRpb24sIG11c3QgcmVqZWN0IGlmIHR4LmRvbmUgcmVqZWN0cy5cbiAgICAgICAgLy8gTXVzdCByZWplY3Qgd2l0aCBvcCByZWplY3Rpb24gZmlyc3QuXG4gICAgICAgIC8vIE11c3QgcmVzb2x2ZSB3aXRoIG9wIHZhbHVlLlxuICAgICAgICAvLyBNdXN0IGhhbmRsZSBib3RoIHByb21pc2VzIChubyB1bmhhbmRsZWQgcmVqZWN0aW9ucylcbiAgICAgICAgcmV0dXJuIChhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICB0YXJnZXRbdGFyZ2V0RnVuY05hbWVdKC4uLmFyZ3MpLFxuICAgICAgICAgICAgaXNXcml0ZSAmJiB0eC5kb25lLFxuICAgICAgICBdKSlbMF07XG4gICAgfTtcbiAgICBjYWNoZWRNZXRob2RzLnNldChwcm9wLCBtZXRob2QpO1xuICAgIHJldHVybiBtZXRob2Q7XG59XG5yZXBsYWNlVHJhcHMoKG9sZFRyYXBzKSA9PiAoe1xuICAgIC4uLm9sZFRyYXBzLFxuICAgIGdldDogKHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpID0+IGdldE1ldGhvZCh0YXJnZXQsIHByb3ApIHx8IG9sZFRyYXBzLmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSxcbiAgICBoYXM6ICh0YXJnZXQsIHByb3ApID0+ICEhZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuaGFzKHRhcmdldCwgcHJvcCksXG59KSk7XG5cbmV4cG9ydCB7IGRlbGV0ZURCLCBvcGVuREIgfTtcbiIsImltcG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyIH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBMb2dnZXIsIHNldFVzZXJMb2dIYW5kbGVyLCBzZXRMb2dMZXZlbCBhcyBzZXRMb2dMZXZlbCQxIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIGdldERlZmF1bHRBcHBDb25maWcsIGRlZXBFcXVhbCwgRmlyZWJhc2VFcnJvciwgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuZXhwb3J0IHsgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IG9wZW5EQiB9IGZyb20gJ2lkYic7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB9XHJcbiAgICAvLyBJbiBpbml0aWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdpbGwgYmUgY2FsbGVkIGJ5IGluc3RhbGxhdGlvbnMgb25cclxuICAgIC8vIGF1dGggdG9rZW4gcmVmcmVzaCwgYW5kIGluc3RhbGxhdGlvbnMgd2lsbCBzZW5kIHRoaXMgc3RyaW5nLlxyXG4gICAgZ2V0UGxhdGZvcm1JbmZvU3RyaW5nKCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVycyA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVycygpO1xyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBwcm92aWRlcnMgYW5kIGdldCBsaWJyYXJ5L3ZlcnNpb24gcGFpcnMgZnJvbSBhbnkgdGhhdCBhcmVcclxuICAgICAgICAvLyB2ZXJzaW9uIGNvbXBvbmVudHMuXHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyc1xyXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHtcclxuICAgICAgICAgICAgaWYgKGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBgJHtzZXJ2aWNlLmxpYnJhcnl9LyR7c2VydmljZS52ZXJzaW9ufWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIobG9nU3RyaW5nID0+IGxvZ1N0cmluZylcclxuICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIHByb3ZpZGVyIGNoZWNrIGlmIHRoaXMgcHJvdmlkZXIgcHJvdmlkZXMgYSBWZXJzaW9uU2VydmljZVxyXG4gKlxyXG4gKiBOT1RFOiBVc2luZyBQcm92aWRlcjwnYXBwLXZlcnNpb24nPiBpcyBhIGhhY2sgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcHJvdmlkZXJcclxuICogcHJvdmlkZXMgVmVyc2lvblNlcnZpY2UuIFRoZSBwcm92aWRlciBpcyBub3QgbmVjZXNzYXJpbHkgYSAnYXBwLXZlcnNpb24nXHJcbiAqIHByb3ZpZGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSB7XHJcbiAgICBjb25zdCBjb21wb25lbnQgPSBwcm92aWRlci5nZXRDb21wb25lbnQoKTtcclxuICAgIHJldHVybiAoY29tcG9uZW50ID09PSBudWxsIHx8IGNvbXBvbmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29tcG9uZW50LnR5cGUpID09PSBcIlZFUlNJT05cIiAvKiBDb21wb25lbnRUeXBlLlZFUlNJT04gKi87XHJcbn1cblxuY29uc3QgbmFtZSRvID0gXCJAZmlyZWJhc2UvYXBwXCI7XG5jb25zdCB2ZXJzaW9uJDEgPSBcIjAuOS4yN1wiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYXBwJyk7XG5cbmNvbnN0IG5hbWUkbiA9IFwiQGZpcmViYXNlL2FwcC1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRtID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGwgPSBcIkBmaXJlYmFzZS9hbmFseXRpY3NcIjtcblxuY29uc3QgbmFtZSRrID0gXCJAZmlyZWJhc2UvYXBwLWNoZWNrLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGogPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2tcIjtcblxuY29uc3QgbmFtZSRpID0gXCJAZmlyZWJhc2UvYXV0aFwiO1xuXG5jb25zdCBuYW1lJGggPSBcIkBmaXJlYmFzZS9hdXRoLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGcgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZVwiO1xuXG5jb25zdCBuYW1lJGYgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRlID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zXCI7XG5cbmNvbnN0IG5hbWUkZCA9IFwiQGZpcmViYXNlL2Z1bmN0aW9ucy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRjID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9uc1wiO1xuXG5jb25zdCBuYW1lJGIgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGEgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmdcIjtcblxuY29uc3QgbmFtZSQ5ID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDggPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZVwiO1xuXG5jb25zdCBuYW1lJDcgPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ2ID0gXCJAZmlyZWJhc2UvcmVtb3RlLWNvbmZpZ1wiO1xuXG5jb25zdCBuYW1lJDUgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDQgPSBcIkBmaXJlYmFzZS9zdG9yYWdlXCI7XG5cbmNvbnN0IG5hbWUkMyA9IFwiQGZpcmViYXNlL3N0b3JhZ2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkMiA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5jb25zdCBuYW1lJDEgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmUtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUgPSBcImZpcmViYXNlXCI7XG5jb25zdCB2ZXJzaW9uID0gXCIxMC44LjBcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGFwcCBuYW1lXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XHJcbmNvbnN0IFBMQVRGT1JNX0xPR19TVFJJTkcgPSB7XHJcbiAgICBbbmFtZSRvXTogJ2ZpcmUtY29yZScsXHJcbiAgICBbbmFtZSRuXTogJ2ZpcmUtY29yZS1jb21wYXQnLFxyXG4gICAgW25hbWUkbF06ICdmaXJlLWFuYWx5dGljcycsXHJcbiAgICBbbmFtZSRtXTogJ2ZpcmUtYW5hbHl0aWNzLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRqXTogJ2ZpcmUtYXBwLWNoZWNrJyxcclxuICAgIFtuYW1lJGtdOiAnZmlyZS1hcHAtY2hlY2stY29tcGF0JyxcclxuICAgIFtuYW1lJGldOiAnZmlyZS1hdXRoJyxcclxuICAgIFtuYW1lJGhdOiAnZmlyZS1hdXRoLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRnXTogJ2ZpcmUtcnRkYicsXHJcbiAgICBbbmFtZSRmXTogJ2ZpcmUtcnRkYi1jb21wYXQnLFxyXG4gICAgW25hbWUkZV06ICdmaXJlLWZuJyxcclxuICAgIFtuYW1lJGRdOiAnZmlyZS1mbi1jb21wYXQnLFxyXG4gICAgW25hbWUkY106ICdmaXJlLWlpZCcsXHJcbiAgICBbbmFtZSRiXTogJ2ZpcmUtaWlkLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRhXTogJ2ZpcmUtZmNtJyxcclxuICAgIFtuYW1lJDldOiAnZmlyZS1mY20tY29tcGF0JyxcclxuICAgIFtuYW1lJDhdOiAnZmlyZS1wZXJmJyxcclxuICAgIFtuYW1lJDddOiAnZmlyZS1wZXJmLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ2XTogJ2ZpcmUtcmMnLFxyXG4gICAgW25hbWUkNV06ICdmaXJlLXJjLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ0XTogJ2ZpcmUtZ2NzJyxcclxuICAgIFtuYW1lJDNdOiAnZmlyZS1nY3MtY29tcGF0JyxcclxuICAgIFtuYW1lJDJdOiAnZmlyZS1mc3QnLFxyXG4gICAgW25hbWUkMV06ICdmaXJlLWZzdC1jb21wYXQnLFxyXG4gICAgJ2ZpcmUtanMnOiAnZmlyZS1qcycsXHJcbiAgICBbbmFtZV06ICdmaXJlLWpzLWFsbCdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgX2FwcHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBSZWdpc3RlcmVkIGNvbXBvbmVudHMuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuY29uc3QgX2NvbXBvbmVudHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCBiZWluZyBhZGRlZCB0byB0aGlzIGFwcCdzIGNvbnRhaW5lclxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXBwLmNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gZmFpbGVkIHRvIHJlZ2lzdGVyIHdpdGggRmlyZWJhc2VBcHAgJHthcHAubmFtZX1gLCBlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIGFwcC5jb250YWluZXIuYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoY29tcG9uZW50KTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNvbXBvbmVudCAtIHRoZSBjb21wb25lbnQgdG8gcmVnaXN0ZXJcclxuICogQHJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGNvbXBvbmVudCBpcyByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9yZWdpc3RlckNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQubmFtZTtcclxuICAgIGlmIChfY29tcG9uZW50cy5oYXMoY29tcG9uZW50TmFtZSkpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYFRoZXJlIHdlcmUgbXVsdGlwbGUgYXR0ZW1wdHMgdG8gcmVnaXN0ZXIgY29tcG9uZW50ICR7Y29tcG9uZW50TmFtZX0uYCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgX2NvbXBvbmVudHMuc2V0KGNvbXBvbmVudE5hbWUsIGNvbXBvbmVudCk7XHJcbiAgICAvLyBhZGQgdGhlIGNvbXBvbmVudCB0byBleGlzdGluZyBhcHAgaW5zdGFuY2VzXHJcbiAgICBmb3IgKGNvbnN0IGFwcCBvZiBfYXBwcy52YWx1ZXMoKSkge1xyXG4gICAgICAgIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBGaXJlYmFzZUFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gbmFtZSAtIHNlcnZpY2UgbmFtZVxyXG4gKlxyXG4gKiBAcmV0dXJucyB0aGUgcHJvdmlkZXIgZm9yIHRoZSBzZXJ2aWNlIHdpdGggdGhlIG1hdGNoaW5nIG5hbWVcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKSB7XHJcbiAgICBjb25zdCBoZWFydGJlYXRDb250cm9sbGVyID0gYXBwLmNvbnRhaW5lclxyXG4gICAgICAgIC5nZXRQcm92aWRlcignaGVhcnRiZWF0JylcclxuICAgICAgICAuZ2V0SW1tZWRpYXRlKHsgb3B0aW9uYWw6IHRydWUgfSk7XHJcbiAgICBpZiAoaGVhcnRiZWF0Q29udHJvbGxlcikge1xyXG4gICAgICAgIHZvaWQgaGVhcnRiZWF0Q29udHJvbGxlci50cmlnZ2VySGVhcnRiZWF0KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXBwLmNvbnRhaW5lci5nZXRQcm92aWRlcihuYW1lKTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXHJcbiAqIEBwYXJhbSBpbnN0YW5jZUlkZW50aWZpZXIgLSBzZXJ2aWNlIGluc3RhbmNlIGlkZW50aWZpZXIgaW4gY2FzZSB0aGUgc2VydmljZSBzdXBwb3J0cyBtdWx0aXBsZSBpbnN0YW5jZXNcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfcmVtb3ZlU2VydmljZUluc3RhbmNlKGFwcCwgbmFtZSwgaW5zdGFuY2VJZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKS5jbGVhckluc3RhbmNlKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbn1cclxuLyoqXHJcbiAqIFRlc3Qgb25seVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9jbGVhckNvbXBvbmVudHMoKSB7XHJcbiAgICBfY29tcG9uZW50cy5jbGVhcigpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEVSUk9SUyA9IHtcclxuICAgIFtcIm5vLWFwcFwiIC8qIEFwcEVycm9yLk5PX0FQUCAqL106IFwiTm8gRmlyZWJhc2UgQXBwICd7JGFwcE5hbWV9JyBoYXMgYmVlbiBjcmVhdGVkIC0gXCIgK1xyXG4gICAgICAgICdjYWxsIGluaXRpYWxpemVBcHAoKSBmaXJzdCcsXHJcbiAgICBbXCJiYWQtYXBwLW5hbWVcIiAvKiBBcHBFcnJvci5CQURfQVBQX05BTUUgKi9dOiBcIklsbGVnYWwgQXBwIG5hbWU6ICd7JGFwcE5hbWV9XCIsXHJcbiAgICBbXCJkdXBsaWNhdGUtYXBwXCIgLyogQXBwRXJyb3IuRFVQTElDQVRFX0FQUCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGV4aXN0cyB3aXRoIGRpZmZlcmVudCBvcHRpb25zIG9yIGNvbmZpZ1wiLFxyXG4gICAgW1wiYXBwLWRlbGV0ZWRcIiAvKiBBcHBFcnJvci5BUFBfREVMRVRFRCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGRlbGV0ZWRcIixcclxuICAgIFtcIm5vLW9wdGlvbnNcIiAvKiBBcHBFcnJvci5OT19PUFRJT05TICovXTogJ05lZWQgdG8gcHJvdmlkZSBvcHRpb25zLCB3aGVuIG5vdCBiZWluZyBkZXBsb3llZCB0byBob3N0aW5nIHZpYSBzb3VyY2UuJyxcclxuICAgIFtcImludmFsaWQtYXBwLWFyZ3VtZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9BUFBfQVJHVU1FTlQgKi9dOiAnZmlyZWJhc2UueyRhcHBOYW1lfSgpIHRha2VzIGVpdGhlciBubyBhcmd1bWVudCBvciBhICcgK1xyXG4gICAgICAgICdGaXJlYmFzZSBBcHAgaW5zdGFuY2UuJyxcclxuICAgIFtcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi9dOiAnRmlyc3QgYXJndW1lbnQgdG8gYG9uTG9nYCBtdXN0IGJlIG51bGwgb3IgYSBmdW5jdGlvbi4nLFxyXG4gICAgW1wiaWRiLW9wZW5cIiAvKiBBcHBFcnJvci5JREJfT1BFTiAqL106ICdFcnJvciB0aHJvd24gd2hlbiBvcGVuaW5nIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXHJcbiAgICBbXCJpZGItZ2V0XCIgLyogQXBwRXJyb3IuSURCX0dFVCAqL106ICdFcnJvciB0aHJvd24gd2hlbiByZWFkaW5nIGZyb20gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcclxuICAgIFtcImlkYi1zZXRcIiAvKiBBcHBFcnJvci5JREJfV1JJVEUgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gd3JpdGluZyB0byBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxyXG4gICAgW1wiaWRiLWRlbGV0ZVwiIC8qIEFwcEVycm9yLklEQl9ERUxFVEUgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gZGVsZXRpbmcgZnJvbSBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nXHJcbn07XHJcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhcHAnLCAnRmlyZWJhc2UnLCBFUlJPUlMpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBGaXJlYmFzZUFwcEltcGwge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5fY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnKTtcclxuICAgICAgICB0aGlzLl9uYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID1cclxuICAgICAgICAgICAgY29uZmlnLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2FwcCcsICgpID0+IHRoaXMsIFwiUFVCTElDXCIgLyogQ29tcG9uZW50VHlwZS5QVUJMSUMgKi8pKTtcclxuICAgIH1cclxuICAgIGdldCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ7XHJcbiAgICB9XHJcbiAgICBzZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKHZhbCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPSB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbmFtZSgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XHJcbiAgICB9XHJcbiAgICBnZXQgb3B0aW9ucygpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XHJcbiAgICB9XHJcbiAgICBnZXQgY29uZmlnKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbnRhaW5lcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgZ2V0IGlzRGVsZXRlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNEZWxldGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGlzRGVsZXRlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgZnVuY3Rpb24gd2lsbCB0aHJvdyBhbiBFcnJvciBpZiB0aGUgQXBwIGhhcyBhbHJlYWR5IGJlZW4gZGVsZXRlZCAtXHJcbiAgICAgKiB1c2UgYmVmb3JlIHBlcmZvcm1pbmcgQVBJIGFjdGlvbnMgb24gdGhlIEFwcC5cclxuICAgICAqL1xyXG4gICAgY2hlY2tEZXN0cm95ZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLWRlbGV0ZWRcIiAvKiBBcHBFcnJvci5BUFBfREVMRVRFRCAqLywgeyBhcHBOYW1lOiB0aGlzLl9uYW1lIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGN1cnJlbnQgU0RLIHZlcnNpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IFNES19WRVJTSU9OID0gdmVyc2lvbjtcclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUFwcChfb3B0aW9ucywgcmF3Q29uZmlnID0ge30pIHtcclxuICAgIGxldCBvcHRpb25zID0gX29wdGlvbnM7XHJcbiAgICBpZiAodHlwZW9mIHJhd0NvbmZpZyAhPT0gJ29iamVjdCcpIHtcclxuICAgICAgICBjb25zdCBuYW1lID0gcmF3Q29uZmlnO1xyXG4gICAgICAgIHJhd0NvbmZpZyA9IHsgbmFtZSB9O1xyXG4gICAgfVxyXG4gICAgY29uc3QgY29uZmlnID0gT2JqZWN0LmFzc2lnbih7IG5hbWU6IERFRkFVTFRfRU5UUllfTkFNRSwgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkOiBmYWxzZSB9LCByYXdDb25maWcpO1xyXG4gICAgY29uc3QgbmFtZSA9IGNvbmZpZy5uYW1lO1xyXG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJyB8fCAhbmFtZSkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYmFkLWFwcC1uYW1lXCIgLyogQXBwRXJyb3IuQkFEX0FQUF9OQU1FICovLCB7XHJcbiAgICAgICAgICAgIGFwcE5hbWU6IFN0cmluZyhuYW1lKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IGdldERlZmF1bHRBcHBDb25maWcoKSk7XHJcbiAgICBpZiAoIW9wdGlvbnMpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLW9wdGlvbnNcIiAvKiBBcHBFcnJvci5OT19PUFRJT05TICovKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGV4aXN0aW5nQXBwID0gX2FwcHMuZ2V0KG5hbWUpO1xyXG4gICAgaWYgKGV4aXN0aW5nQXBwKSB7XHJcbiAgICAgICAgLy8gcmV0dXJuIHRoZSBleGlzdGluZyBhcHAgaWYgb3B0aW9ucyBhbmQgY29uZmlnIGRlZXAgZXF1YWwgdGhlIG9uZXMgaW4gdGhlIGV4aXN0aW5nIGFwcC5cclxuICAgICAgICBpZiAoZGVlcEVxdWFsKG9wdGlvbnMsIGV4aXN0aW5nQXBwLm9wdGlvbnMpICYmXHJcbiAgICAgICAgICAgIGRlZXBFcXVhbChjb25maWcsIGV4aXN0aW5nQXBwLmNvbmZpZykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nQXBwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJkdXBsaWNhdGUtYXBwXCIgLyogQXBwRXJyb3IuRFVQTElDQVRFX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IG5ldyBDb21wb25lbnRDb250YWluZXIobmFtZSk7XHJcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBfY29tcG9uZW50cy52YWx1ZXMoKSkge1xyXG4gICAgICAgIGNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGNvbnN0IG5ld0FwcCA9IG5ldyBGaXJlYmFzZUFwcEltcGwob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpO1xyXG4gICAgX2FwcHMuc2V0KG5hbWUsIG5ld0FwcCk7XHJcbiAgICByZXR1cm4gbmV3QXBwO1xyXG59XHJcbi8qKlxyXG4gKiBSZXRyaWV2ZXMgYSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIFdoZW4gY2FsbGVkIHdpdGggbm8gYXJndW1lbnRzLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuIFdoZW4gYW4gYXBwIG5hbWVcclxuICogaXMgcHJvdmlkZWQsIHRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGF0IG5hbWUgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gaWYgdGhlIGFwcCBiZWluZyByZXRyaWV2ZWQgaGFzIG5vdCB5ZXQgYmVlblxyXG4gKiBpbml0aWFsaXplZC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBSZXR1cm4gdGhlIGRlZmF1bHQgYXBwXHJcbiAqIGNvbnN0IGFwcCA9IGdldEFwcCgpO1xyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBSZXR1cm4gYSBuYW1lZCBhcHBcclxuICogY29uc3Qgb3RoZXJBcHAgPSBnZXRBcHAoXCJvdGhlckFwcFwiKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBuYW1lIC0gT3B0aW9uYWwgbmFtZSBvZiB0aGUgYXBwIHRvIHJldHVybi4gSWYgbm8gbmFtZSBpc1xyXG4gKiAgIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBpcyBgXCJbREVGQVVMVF1cImAuXHJcbiAqXHJcbiAqIEByZXR1cm5zIFRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGUgcHJvdmlkZWQgYXBwIG5hbWUuXHJcbiAqICAgSWYgbm8gYXBwIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBkZWZhdWx0IGFwcCBpcyByZXR1cm5lZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXBwKG5hbWUgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgIGNvbnN0IGFwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmICghYXBwICYmIG5hbWUgPT09IERFRkFVTFRfRU5UUllfTkFNRSAmJiBnZXREZWZhdWx0QXBwQ29uZmlnKCkpIHtcclxuICAgICAgICByZXR1cm4gaW5pdGlhbGl6ZUFwcCgpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcHApIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwcFwiIC8qIEFwcEVycm9yLk5PX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFwcDtcclxufVxyXG4vKipcclxuICogQSAocmVhZC1vbmx5KSBhcnJheSBvZiBhbGwgaW5pdGlhbGl6ZWQgYXBwcy5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXBwcygpIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKF9hcHBzLnZhbHVlcygpKTtcclxufVxyXG4vKipcclxuICogUmVuZGVycyB0aGlzIGFwcCB1bnVzYWJsZSBhbmQgZnJlZXMgdGhlIHJlc291cmNlcyBvZiBhbGwgYXNzb2NpYXRlZFxyXG4gKiBzZXJ2aWNlcy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBkZWxldGVBcHAoYXBwKVxyXG4gKiAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgY29uc29sZS5sb2coXCJBcHAgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIik7XHJcbiAqICAgfSlcclxuICogICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcclxuICogICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgZGVsZXRpbmcgYXBwOlwiLCBlcnJvcik7XHJcbiAqICAgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVBcHAoYXBwKSB7XHJcbiAgICBjb25zdCBuYW1lID0gYXBwLm5hbWU7XHJcbiAgICBpZiAoX2FwcHMuaGFzKG5hbWUpKSB7XHJcbiAgICAgICAgX2FwcHMuZGVsZXRlKG5hbWUpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGFwcC5jb250YWluZXJcclxuICAgICAgICAgICAgLmdldFByb3ZpZGVycygpXHJcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4gcHJvdmlkZXIuZGVsZXRlKCkpKTtcclxuICAgICAgICBhcHAuaXNEZWxldGVkID0gdHJ1ZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUmVnaXN0ZXJzIGEgbGlicmFyeSdzIG5hbWUgYW5kIHZlcnNpb24gZm9yIHBsYXRmb3JtIGxvZ2dpbmcgcHVycG9zZXMuXHJcbiAqIEBwYXJhbSBsaWJyYXJ5IC0gTmFtZSBvZiAxcCBvciAzcCBsaWJyYXJ5IChlLmcuIGZpcmVzdG9yZSwgYW5ndWxhcmZpcmUpXHJcbiAqIEBwYXJhbSB2ZXJzaW9uIC0gQ3VycmVudCB2ZXJzaW9uIG9mIHRoYXQgbGlicmFyeS5cclxuICogQHBhcmFtIHZhcmlhbnQgLSBCdW5kbGUgdmFyaWFudCwgZS5nLiwgbm9kZSwgcm4sIGV0Yy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJWZXJzaW9uKGxpYnJhcnlLZXlPck5hbWUsIHZlcnNpb24sIHZhcmlhbnQpIHtcclxuICAgIHZhciBfYTtcclxuICAgIC8vIFRPRE86IFdlIGNhbiB1c2UgdGhpcyBjaGVjayB0byB3aGl0ZWxpc3Qgc3RyaW5ncyB3aGVuL2lmIHdlIHNldCB1cFxyXG4gICAgLy8gYSBnb29kIHdoaXRlbGlzdCBzeXN0ZW0uXHJcbiAgICBsZXQgbGlicmFyeSA9IChfYSA9IFBMQVRGT1JNX0xPR19TVFJJTkdbbGlicmFyeUtleU9yTmFtZV0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGxpYnJhcnlLZXlPck5hbWU7XHJcbiAgICBpZiAodmFyaWFudCkge1xyXG4gICAgICAgIGxpYnJhcnkgKz0gYC0ke3ZhcmlhbnR9YDtcclxuICAgIH1cclxuICAgIGNvbnN0IGxpYnJhcnlNaXNtYXRjaCA9IGxpYnJhcnkubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGNvbnN0IHZlcnNpb25NaXNtYXRjaCA9IHZlcnNpb24ubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggfHwgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgY29uc3Qgd2FybmluZyA9IFtcclxuICAgICAgICAgICAgYFVuYWJsZSB0byByZWdpc3RlciBsaWJyYXJ5IFwiJHtsaWJyYXJ5fVwiIHdpdGggdmVyc2lvbiBcIiR7dmVyc2lvbn1cIjpgXHJcbiAgICAgICAgXTtcclxuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaChgbGlicmFyeSBuYW1lIFwiJHtsaWJyYXJ5fVwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcIi9cIilgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCAmJiB2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKCdhbmQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYHZlcnNpb24gbmFtZSBcIiR7dmVyc2lvbn1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxvZ2dlci53YXJuKHdhcm5pbmcuam9pbignICcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChgJHtsaWJyYXJ5fS12ZXJzaW9uYCwgKCkgPT4gKHsgbGlicmFyeSwgdmVyc2lvbiB9KSwgXCJWRVJTSU9OXCIgLyogQ29tcG9uZW50VHlwZS5WRVJTSU9OICovKSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgbG9nIGhhbmRsZXIgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxyXG4gKiBAcGFyYW0gbG9nQ2FsbGJhY2sgLSBBbiBvcHRpb25hbCBjdXN0b20gbG9nIGhhbmRsZXIgdGhhdCBleGVjdXRlcyB1c2VyIGNvZGUgd2hlbmV2ZXJcclxuICogdGhlIEZpcmViYXNlIFNESyBtYWtlcyBhIGxvZ2dpbmcgY2FsbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gb25Mb2cobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGlmIChsb2dDYWxsYmFjayAhPT0gbnVsbCAmJiB0eXBlb2YgbG9nQ2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi8pO1xyXG4gICAgfVxyXG4gICAgc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIGxvZyBsZXZlbCBmb3IgYWxsIEZpcmViYXNlIFNES3MuXHJcbiAqXHJcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCBhcmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBpbmZvYCwgZXJyb3JzIGFyZSBsb2dnZWQsIGJ1dCBgZGVidWdgIGFuZFxyXG4gKiBgdmVyYm9zZWAgbG9ncyBhcmUgbm90KS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobG9nTGV2ZWwpIHtcclxuICAgIHNldExvZ0xldmVsJDEobG9nTGV2ZWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERCX05BTUUgPSAnZmlyZWJhc2UtaGVhcnRiZWF0LWRhdGFiYXNlJztcclxuY29uc3QgREJfVkVSU0lPTiA9IDE7XHJcbmNvbnN0IFNUT1JFX05BTUUgPSAnZmlyZWJhc2UtaGVhcnRiZWF0LXN0b3JlJztcclxubGV0IGRiUHJvbWlzZSA9IG51bGw7XHJcbmZ1bmN0aW9uIGdldERiUHJvbWlzZSgpIHtcclxuICAgIGlmICghZGJQcm9taXNlKSB7XHJcbiAgICAgICAgZGJQcm9taXNlID0gb3BlbkRCKERCX05BTUUsIERCX1ZFUlNJT04sIHtcclxuICAgICAgICAgICAgdXBncmFkZTogKGRiLCBvbGRWZXJzaW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCB1c2UgJ2JyZWFrJyBpbiB0aGlzIHN3aXRjaCBzdGF0ZW1lbnQsIHRoZSBmYWxsLXRocm91Z2hcclxuICAgICAgICAgICAgICAgIC8vIGJlaGF2aW9yIGlzIHdoYXQgd2Ugd2FudCwgYmVjYXVzZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgdmVyc2lvbnMgYmV0d2VlblxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIG9sZCB2ZXJzaW9uIGFuZCB0aGUgY3VycmVudCB2ZXJzaW9uLCB3ZSB3YW50IEFMTCB0aGUgbWlncmF0aW9uc1xyXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBjb3JyZXNwb25kIHRvIHRob3NlIHZlcnNpb25zIHRvIHJ1biwgbm90IG9ubHkgdGhlIGxhc3Qgb25lLlxyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlZmF1bHQtY2FzZVxyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChvbGRWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNhZmFyaS9pT1MgYnJvd3NlcnMgdGhyb3cgb2NjYXNpb25hbCBleGNlcHRpb25zIG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkYi5jcmVhdGVPYmplY3RTdG9yZSgpIHRoYXQgbWF5IGJlIGEgYnVnLiBBdm9pZCBibG9ja2luZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHJlc3Qgb2YgdGhlIGFwcCBmdW5jdGlvbmFsaXR5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItb3BlblwiIC8qIEFwcEVycm9yLklEQl9PUEVOICovLCB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yTWVzc2FnZTogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRiUHJvbWlzZTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiByZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIoYXBwKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICAgICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihTVE9SRV9OQU1FKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0eC5vYmplY3RTdG9yZShTVE9SRV9OQU1FKS5nZXQoY29tcHV0ZUtleShhcHApKTtcclxuICAgICAgICAvLyBXZSBhbHJlYWR5IGhhdmUgdGhlIHZhbHVlIGJ1dCB0eC5kb25lIGNhbiB0aHJvdyxcclxuICAgICAgICAvLyBzbyB3ZSBuZWVkIHRvIGF3YWl0IGl0IGhlcmUgdG8gY2F0Y2ggZXJyb3JzXHJcbiAgICAgICAgYXdhaXQgdHguZG9uZTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oZS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkYkdldEVycm9yID0gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItZ2V0XCIgLyogQXBwRXJyb3IuSURCX0dFVCAqLywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihpZGJHZXRFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gd3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIoYXBwLCBoZWFydGJlYXRPYmplY3QpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcclxuICAgICAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHR4Lm9iamVjdFN0b3JlKFNUT1JFX05BTUUpO1xyXG4gICAgICAgIGF3YWl0IG9iamVjdFN0b3JlLnB1dChoZWFydGJlYXRPYmplY3QsIGNvbXB1dGVLZXkoYXBwKSk7XHJcbiAgICAgICAgYXdhaXQgdHguZG9uZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGUubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpZGJHZXRFcnJvciA9IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaWRiLXNldFwiIC8qIEFwcEVycm9yLklEQl9XUklURSAqLywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihpZGJHZXRFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY29tcHV0ZUtleShhcHApIHtcclxuICAgIHJldHVybiBgJHthcHAubmFtZX0hJHthcHAub3B0aW9ucy5hcHBJZH1gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IE1BWF9IRUFERVJfQllURVMgPSAxMDI0O1xyXG4vLyAzMCBkYXlzXHJcbmNvbnN0IFNUT1JFRF9IRUFSVEJFQVRfUkVURU5USU9OX01BWF9NSUxMSVMgPSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XHJcbmNsYXNzIEhlYXJ0YmVhdFNlcnZpY2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEluLW1lbW9yeSBjYWNoZSBmb3IgaGVhcnRiZWF0cywgdXNlZCBieSBnZXRIZWFydGJlYXRzSGVhZGVyKCkgdG8gZ2VuZXJhdGVcclxuICAgICAgICAgKiB0aGUgaGVhZGVyIHN0cmluZy5cclxuICAgICAgICAgKiBTdG9yZXMgb25lIHJlY29yZCBwZXIgZGF0ZS4gVGhpcyB3aWxsIGJlIGNvbnNvbGlkYXRlZCBpbnRvIHRoZSBzdGFuZGFyZFxyXG4gICAgICAgICAqIGZvcm1hdCBvZiBvbmUgcmVjb3JkIHBlciB1c2VyIGFnZW50IHN0cmluZyBiZWZvcmUgYmVpbmcgc2VudCBhcyBhIGhlYWRlci5cclxuICAgICAgICAgKiBQb3B1bGF0ZWQgZnJvbSBpbmRleGVkREIgd2hlbiB0aGUgY29udHJvbGxlciBpcyBpbnN0YW50aWF0ZWQgYW5kIHNob3VsZFxyXG4gICAgICAgICAqIGJlIGtlcHQgaW4gc3luYyB3aXRoIGluZGV4ZWREQi5cclxuICAgICAgICAgKiBMZWF2ZSBwdWJsaWMgZm9yIGVhc2llciB0ZXN0aW5nLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9IG51bGw7XHJcbiAgICAgICAgY29uc3QgYXBwID0gdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX3N0b3JhZ2UgPSBuZXcgSGVhcnRiZWF0U3RvcmFnZUltcGwoYXBwKTtcclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlID0gdGhpcy5fc3RvcmFnZS5yZWFkKCkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENhbGxlZCB0byByZXBvcnQgYSBoZWFydGJlYXQuIFRoZSBmdW5jdGlvbiB3aWxsIGdlbmVyYXRlXHJcbiAgICAgKiBhIEhlYXJ0YmVhdHNCeVVzZXJBZ2VudCBvYmplY3QsIHVwZGF0ZSBoZWFydGJlYXRzQ2FjaGUsIGFuZCBwZXJzaXN0IGl0XHJcbiAgICAgKiB0byBJbmRleGVkREIuXHJcbiAgICAgKiBOb3RlIHRoYXQgd2Ugb25seSBzdG9yZSBvbmUgaGVhcnRiZWF0IHBlciBkYXkuIFNvIGlmIGEgaGVhcnRiZWF0IGZvciB0b2RheSBpc1xyXG4gICAgICogYWxyZWFkeSBsb2dnZWQsIHN1YnNlcXVlbnQgY2FsbHMgdG8gdGhpcyBmdW5jdGlvbiBpbiB0aGUgc2FtZSBkYXkgd2lsbCBiZSBpZ25vcmVkLlxyXG4gICAgICovXHJcbiAgICBhc3luYyB0cmlnZ2VySGVhcnRiZWF0KCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgY29uc3QgcGxhdGZvcm1Mb2dnZXIgPSB0aGlzLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXIoJ3BsYXRmb3JtLWxvZ2dlcicpXHJcbiAgICAgICAgICAgIC5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBcIkZpcmViYXNlIHVzZXIgYWdlbnRcIiBzdHJpbmcgZnJvbSB0aGUgcGxhdGZvcm0gbG9nZ2VyXHJcbiAgICAgICAgLy8gc2VydmljZSwgbm90IHRoZSBicm93c2VyIHVzZXIgYWdlbnQuXHJcbiAgICAgICAgY29uc3QgYWdlbnQgPSBwbGF0Zm9ybUxvZ2dlci5nZXRQbGF0Zm9ybUluZm9TdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBkYXRlID0gZ2V0VVRDRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIGlmICgoKF9hID0gdGhpcy5faGVhcnRiZWF0c0NhY2hlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaGVhcnRiZWF0cykgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgICAgICAvLyBJZiB3ZSBmYWlsZWQgdG8gY29uc3RydWN0IGEgaGVhcnRiZWF0cyBjYWNoZSwgdGhlbiByZXR1cm4gaW1tZWRpYXRlbHkuXHJcbiAgICAgICAgICAgIGlmICgoKF9iID0gdGhpcy5faGVhcnRiZWF0c0NhY2hlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaGVhcnRiZWF0cykgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERvIG5vdCBzdG9yZSBhIGhlYXJ0YmVhdCBpZiBvbmUgaXMgYWxyZWFkeSBzdG9yZWQgZm9yIHRoaXMgZGF5XHJcbiAgICAgICAgLy8gb3IgaWYgYSBoZWFkZXIgaGFzIGFscmVhZHkgYmVlbiBzZW50IHRvZGF5LlxyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUubGFzdFNlbnRIZWFydGJlYXREYXRlID09PSBkYXRlIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLnNvbWUoc2luZ2xlRGF0ZUhlYXJ0YmVhdCA9PiBzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGUgPT09IGRhdGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRoZXJlIGlzIG5vIGVudHJ5IGZvciB0aGlzIGRhdGUuIENyZWF0ZSBvbmUuXHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLnB1c2goeyBkYXRlLCBhZ2VudCB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUmVtb3ZlIGVudHJpZXMgb2xkZXIgdGhhbiAzMCBkYXlzLlxyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzID0gdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMuZmlsdGVyKHNpbmdsZURhdGVIZWFydGJlYXQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBoYlRpbWVzdGFtcCA9IG5ldyBEYXRlKHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSkudmFsdWVPZigpO1xyXG4gICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICByZXR1cm4gbm93IC0gaGJUaW1lc3RhbXAgPD0gU1RPUkVEX0hFQVJUQkVBVF9SRVRFTlRJT05fTUFYX01JTExJUztcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3RvcmFnZS5vdmVyd3JpdGUodGhpcy5faGVhcnRiZWF0c0NhY2hlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIGJhc2U2NCBlbmNvZGVkIHN0cmluZyB3aGljaCBjYW4gYmUgYXR0YWNoZWQgdG8gdGhlIGhlYXJ0YmVhdC1zcGVjaWZpYyBoZWFkZXIgZGlyZWN0bHkuXHJcbiAgICAgKiBJdCBhbHNvIGNsZWFycyBhbGwgaGVhcnRiZWF0cyBmcm9tIG1lbW9yeSBhcyB3ZWxsIGFzIGluIEluZGV4ZWREQi5cclxuICAgICAqXHJcbiAgICAgKiBOT1RFOiBDb25zdW1pbmcgcHJvZHVjdCBTREtzIHNob3VsZCBub3Qgc2VuZCB0aGUgaGVhZGVyIGlmIHRoaXMgbWV0aG9kXHJcbiAgICAgKiByZXR1cm5zIGFuIGVtcHR5IHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0SGVhcnRiZWF0c0hlYWRlcigpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiBpdCdzIHN0aWxsIG51bGwgb3IgdGhlIGFycmF5IGlzIGVtcHR5LCB0aGVyZSBpcyBubyBkYXRhIHRvIHNlbmQuXHJcbiAgICAgICAgaWYgKCgoX2EgPSB0aGlzLl9oZWFydGJlYXRzQ2FjaGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5oZWFydGJlYXRzKSA9PSBudWxsIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBnZXRVVENEYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgLy8gRXh0cmFjdCBhcyBtYW55IGhlYXJ0YmVhdHMgZnJvbSB0aGUgY2FjaGUgYXMgd2lsbCBmaXQgdW5kZXIgdGhlIHNpemUgbGltaXQuXHJcbiAgICAgICAgY29uc3QgeyBoZWFydGJlYXRzVG9TZW5kLCB1bnNlbnRFbnRyaWVzIH0gPSBleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlcih0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyU3RyaW5nID0gYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzVG9TZW5kIH0pKTtcclxuICAgICAgICAvLyBTdG9yZSBsYXN0IHNlbnQgZGF0ZSB0byBwcmV2ZW50IGFub3RoZXIgYmVpbmcgbG9nZ2VkL3NlbnQgZm9yIHRoZSBzYW1lIGRheS5cclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUubGFzdFNlbnRIZWFydGJlYXREYXRlID0gZGF0ZTtcclxuICAgICAgICBpZiAodW5zZW50RW50cmllcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN0b3JlIGFueSB1bnNlbnQgZW50cmllcyBpZiB0aGV5IGV4aXN0LlxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IHVuc2VudEVudHJpZXM7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgc2VlbXMgbW9yZSBsaWtlbHkgdGhhbiBlbXB0eWluZyB0aGUgYXJyYXkgKGJlbG93KSB0byBsZWFkIHRvIHNvbWUgb2RkIHN0YXRlXHJcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZSBjYWNoZSBpc24ndCBlbXB0eSBhbmQgdGhpcyB3aWxsIGJlIGNhbGxlZCBhZ2FpbiBvbiB0aGUgbmV4dCByZXF1ZXN0LFxyXG4gICAgICAgICAgICAvLyBhbmQgaXMgcHJvYmFibHkgc2FmZXN0IGlmIHdlIGF3YWl0IGl0LlxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMgPSBbXTtcclxuICAgICAgICAgICAgLy8gRG8gbm90IHdhaXQgZm9yIHRoaXMsIHRvIHJlZHVjZSBsYXRlbmN5LlxyXG4gICAgICAgICAgICB2b2lkIHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoZWFkZXJTdHJpbmc7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0VVRDRGF0ZVN0cmluZygpIHtcclxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICAgIC8vIFJldHVybnMgZGF0ZSBmb3JtYXQgJ1lZWVktTU0tREQnXHJcbiAgICByZXR1cm4gdG9kYXkudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwgMTApO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyKGhlYXJ0YmVhdHNDYWNoZSwgbWF4U2l6ZSA9IE1BWF9IRUFERVJfQllURVMpIHtcclxuICAgIC8vIEhlYXJ0YmVhdHMgZ3JvdXBlZCBieSB1c2VyIGFnZW50IGluIHRoZSBzdGFuZGFyZCBmb3JtYXQgdG8gYmUgc2VudCBpblxyXG4gICAgLy8gdGhlIGhlYWRlci5cclxuICAgIGNvbnN0IGhlYXJ0YmVhdHNUb1NlbmQgPSBbXTtcclxuICAgIC8vIFNpbmdsZSBkYXRlIGZvcm1hdCBoZWFydGJlYXRzIHRoYXQgYXJlIG5vdCBzZW50LlxyXG4gICAgbGV0IHVuc2VudEVudHJpZXMgPSBoZWFydGJlYXRzQ2FjaGUuc2xpY2UoKTtcclxuICAgIGZvciAoY29uc3Qgc2luZ2xlRGF0ZUhlYXJ0YmVhdCBvZiBoZWFydGJlYXRzQ2FjaGUpIHtcclxuICAgICAgICAvLyBMb29rIGZvciBhbiBleGlzdGluZyBlbnRyeSB3aXRoIHRoZSBzYW1lIHVzZXIgYWdlbnQuXHJcbiAgICAgICAgY29uc3QgaGVhcnRiZWF0RW50cnkgPSBoZWFydGJlYXRzVG9TZW5kLmZpbmQoaGIgPT4gaGIuYWdlbnQgPT09IHNpbmdsZURhdGVIZWFydGJlYXQuYWdlbnQpO1xyXG4gICAgICAgIGlmICghaGVhcnRiZWF0RW50cnkpIHtcclxuICAgICAgICAgICAgLy8gSWYgbm8gZW50cnkgZm9yIHRoaXMgdXNlciBhZ2VudCBleGlzdHMsIGNyZWF0ZSBvbmUuXHJcbiAgICAgICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBhZ2VudDogc2luZ2xlRGF0ZUhlYXJ0YmVhdC5hZ2VudCxcclxuICAgICAgICAgICAgICAgIGRhdGVzOiBbc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGNvdW50Qnl0ZXMoaGVhcnRiZWF0c1RvU2VuZCkgPiBtYXhTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgaGVhZGVyIHdvdWxkIGV4Y2VlZCBtYXggc2l6ZSwgcmVtb3ZlIHRoZSBhZGRlZCBoZWFydGJlYXRcclxuICAgICAgICAgICAgICAgIC8vIGVudHJ5IGFuZCBzdG9wIGFkZGluZyB0byB0aGUgaGVhZGVyLlxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0c1RvU2VuZC5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBoZWFydGJlYXRFbnRyeS5kYXRlcy5wdXNoKHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSk7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBoZWFkZXIgd291bGQgZXhjZWVkIG1heCBzaXplLCByZW1vdmUgdGhlIGFkZGVkIGRhdGVcclxuICAgICAgICAgICAgLy8gYW5kIHN0b3AgYWRkaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICAgICAgICAgIGlmIChjb3VudEJ5dGVzKGhlYXJ0YmVhdHNUb1NlbmQpID4gbWF4U2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0RW50cnkuZGF0ZXMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQb3AgdW5zZW50IGVudHJ5IGZyb20gcXVldWUuIChTa2lwcGVkIGlmIGFkZGluZyB0aGUgZW50cnkgZXhjZWVkZWRcclxuICAgICAgICAvLyBxdW90YSBhbmQgdGhlIGxvb3AgYnJlYWtzIGVhcmx5LilcclxuICAgICAgICB1bnNlbnRFbnRyaWVzID0gdW5zZW50RW50cmllcy5zbGljZSgxKTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhcnRiZWF0c1RvU2VuZCxcclxuICAgICAgICB1bnNlbnRFbnRyaWVzXHJcbiAgICB9O1xyXG59XHJcbmNsYXNzIEhlYXJ0YmVhdFN0b3JhZ2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2UgPSB0aGlzLnJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2soKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2soKSB7XHJcbiAgICAgICAgaWYgKCFpc0luZGV4ZWREQkF2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKClcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRydWUpXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4gZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmVhZCBhbGwgaGVhcnRiZWF0cy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmVhZCgpIHtcclxuICAgICAgICBjb25zdCBjYW5Vc2VJbmRleGVkREIgPSBhd2FpdCB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlO1xyXG4gICAgICAgIGlmICghY2FuVXNlSW5kZXhlZERCKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGhlYXJ0YmVhdHM6IFtdIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpZGJIZWFydGJlYXRPYmplY3QgPSBhd2FpdCByZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIodGhpcy5hcHApO1xyXG4gICAgICAgICAgICBpZiAoaWRiSGVhcnRiZWF0T2JqZWN0ID09PSBudWxsIHx8IGlkYkhlYXJ0YmVhdE9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogaWRiSGVhcnRiZWF0T2JqZWN0LmhlYXJ0YmVhdHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpZGJIZWFydGJlYXRPYmplY3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBoZWFydGJlYXRzOiBbXSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gb3ZlcndyaXRlIHRoZSBzdG9yYWdlIHdpdGggdGhlIHByb3ZpZGVkIGhlYXJ0YmVhdHNcclxuICAgIGFzeW5jIG92ZXJ3cml0ZShoZWFydGJlYXRzT2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0ID0gYXdhaXQgdGhpcy5yZWFkKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQih0aGlzLmFwcCwge1xyXG4gICAgICAgICAgICAgICAgbGFzdFNlbnRIZWFydGJlYXREYXRlOiAoX2EgPSBoZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSxcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBhZGQgaGVhcnRiZWF0c1xyXG4gICAgYXN5bmMgYWRkKGhlYXJ0YmVhdHNPYmplY3QpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcclxuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QgPSBhd2FpdCB0aGlzLnJlYWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKHRoaXMuYXBwLCB7XHJcbiAgICAgICAgICAgICAgICBsYXN0U2VudEhlYXJ0YmVhdERhdGU6IChfYSA9IGhlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlLFxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0czogW1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nSGVhcnRiZWF0c09iamVjdC5oZWFydGJlYXRzLFxyXG4gICAgICAgICAgICAgICAgICAgIC4uLmhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBieXRlcyBvZiBhIEhlYXJ0YmVhdHNCeVVzZXJBZ2VudCBhcnJheSBhZnRlciBiZWluZyB3cmFwcGVkXHJcbiAqIGluIGEgcGxhdGZvcm0gbG9nZ2luZyBoZWFkZXIgSlNPTiBvYmplY3QsIHN0cmluZ2lmaWVkLCBhbmQgY29udmVydGVkXHJcbiAqIHRvIGJhc2UgNjQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb3VudEJ5dGVzKGhlYXJ0YmVhdHNDYWNoZSkge1xyXG4gICAgLy8gYmFzZTY0IGhhcyBhIHJlc3RyaWN0ZWQgc2V0IG9mIGNoYXJhY3RlcnMsIGFsbCBvZiB3aGljaCBzaG91bGQgYmUgMSBieXRlLlxyXG4gICAgcmV0dXJuIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKFxyXG4gICAgLy8gaGVhcnRiZWF0c0NhY2hlIHdyYXBwZXIgcHJvcGVydGllc1xyXG4gICAgSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzQ2FjaGUgfSkpLmxlbmd0aDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckNvcmVDb21wb25lbnRzKHZhcmlhbnQpIHtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdwbGF0Zm9ybS1sb2dnZXInLCBjb250YWluZXIgPT4gbmV3IFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwoY29udGFpbmVyKSwgXCJQUklWQVRFXCIgLyogQ29tcG9uZW50VHlwZS5QUklWQVRFICovKSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgnaGVhcnRiZWF0JywgY29udGFpbmVyID0+IG5ldyBIZWFydGJlYXRTZXJ2aWNlSW1wbChjb250YWluZXIpLCBcIlBSSVZBVEVcIiAvKiBDb21wb25lbnRUeXBlLlBSSVZBVEUgKi8pKTtcclxuICAgIC8vIFJlZ2lzdGVyIGBhcHBgIHBhY2thZ2UuXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRvLCB2ZXJzaW9uJDEsIHZhcmlhbnQpO1xyXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJG8sIHZlcnNpb24kMSwgJ2VzbTIwMTcnKTtcclxuICAgIC8vIFJlZ2lzdGVyIHBsYXRmb3JtIFNESyBpZGVudGlmaWVyIChubyB2ZXJzaW9uKS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbignZmlyZS1qcycsICcnKTtcclxufVxuXG4vKipcclxuICogRmlyZWJhc2UgQXBwXHJcbiAqXHJcbiAqIEByZW1hcmtzIFRoaXMgcGFja2FnZSBjb29yZGluYXRlcyB0aGUgY29tbXVuaWNhdGlvbiBiZXR3ZWVuIHRoZSBkaWZmZXJlbnQgRmlyZWJhc2UgY29tcG9uZW50c1xyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbnJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoJycpO1xuXG5leHBvcnQgeyBTREtfVkVSU0lPTiwgREVGQVVMVF9FTlRSWV9OQU1FIGFzIF9ERUZBVUxUX0VOVFJZX05BTUUsIF9hZGRDb21wb25lbnQsIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCwgX2FwcHMsIF9jbGVhckNvbXBvbmVudHMsIF9jb21wb25lbnRzLCBfZ2V0UHJvdmlkZXIsIF9yZWdpc3RlckNvbXBvbmVudCwgX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSwgZGVsZXRlQXBwLCBnZXRBcHAsIGdldEFwcHMsIGluaXRpYWxpemVBcHAsIG9uTG9nLCByZWdpc3RlclZlcnNpb24sIHNldExvZ0xldmVsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgcmVnaXN0ZXJWZXJzaW9uIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5leHBvcnQgKiBmcm9tICdAZmlyZWJhc2UvYXBwJztcblxudmFyIG5hbWUgPSBcImZpcmViYXNlXCI7XG52YXIgdmVyc2lvbiA9IFwiMTAuOC4wXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnYXBwJyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJpbXBvcnQgeyBfZ2V0UHJvdmlkZXIsIGdldEFwcCwgX3JlZ2lzdGVyQ29tcG9uZW50LCByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgb3BlbkRCIH0gZnJvbSAnaWRiJztcblxuY29uc3QgbmFtZSA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnNcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjAuNi41XCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFBFTkRJTkdfVElNRU9VVF9NUyA9IDEwMDAwO1xyXG5jb25zdCBQQUNLQUdFX1ZFUlNJT04gPSBgdzoke3ZlcnNpb259YDtcclxuY29uc3QgSU5URVJOQUxfQVVUSF9WRVJTSU9OID0gJ0ZJU192Mic7XHJcbmNvbnN0IElOU1RBTExBVElPTlNfQVBJX1VSTCA9ICdodHRwczovL2ZpcmViYXNlaW5zdGFsbGF0aW9ucy5nb29nbGVhcGlzLmNvbS92MSc7XHJcbmNvbnN0IFRPS0VOX0VYUElSQVRJT05fQlVGRkVSID0gNjAgKiA2MCAqIDEwMDA7IC8vIE9uZSBob3VyXHJcbmNvbnN0IFNFUlZJQ0UgPSAnaW5zdGFsbGF0aW9ucyc7XHJcbmNvbnN0IFNFUlZJQ0VfTkFNRSA9ICdJbnN0YWxsYXRpb25zJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgRVJST1JfREVTQ1JJUFRJT05fTUFQID0ge1xyXG4gICAgW1wibWlzc2luZy1hcHAtY29uZmlnLXZhbHVlc1wiIC8qIEVycm9yQ29kZS5NSVNTSU5HX0FQUF9DT05GSUdfVkFMVUVTICovXTogJ01pc3NpbmcgQXBwIGNvbmZpZ3VyYXRpb24gdmFsdWU6IFwieyR2YWx1ZU5hbWV9XCInLFxyXG4gICAgW1wibm90LXJlZ2lzdGVyZWRcIiAvKiBFcnJvckNvZGUuTk9UX1JFR0lTVEVSRUQgKi9dOiAnRmlyZWJhc2UgSW5zdGFsbGF0aW9uIGlzIG5vdCByZWdpc3RlcmVkLicsXHJcbiAgICBbXCJpbnN0YWxsYXRpb24tbm90LWZvdW5kXCIgLyogRXJyb3JDb2RlLklOU1RBTExBVElPTl9OT1RfRk9VTkQgKi9dOiAnRmlyZWJhc2UgSW5zdGFsbGF0aW9uIG5vdCBmb3VuZC4nLFxyXG4gICAgW1wicmVxdWVzdC1mYWlsZWRcIiAvKiBFcnJvckNvZGUuUkVRVUVTVF9GQUlMRUQgKi9dOiAneyRyZXF1ZXN0TmFtZX0gcmVxdWVzdCBmYWlsZWQgd2l0aCBlcnJvciBcInskc2VydmVyQ29kZX0geyRzZXJ2ZXJTdGF0dXN9OiB7JHNlcnZlck1lc3NhZ2V9XCInLFxyXG4gICAgW1wiYXBwLW9mZmxpbmVcIiAvKiBFcnJvckNvZGUuQVBQX09GRkxJTkUgKi9dOiAnQ291bGQgbm90IHByb2Nlc3MgcmVxdWVzdC4gQXBwbGljYXRpb24gb2ZmbGluZS4nLFxyXG4gICAgW1wiZGVsZXRlLXBlbmRpbmctcmVnaXN0cmF0aW9uXCIgLyogRXJyb3JDb2RlLkRFTEVURV9QRU5ESU5HX1JFR0lTVFJBVElPTiAqL106IFwiQ2FuJ3QgZGVsZXRlIGluc3RhbGxhdGlvbiB3aGlsZSB0aGVyZSBpcyBhIHBlbmRpbmcgcmVnaXN0cmF0aW9uIHJlcXVlc3QuXCJcclxufTtcclxuY29uc3QgRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3RvcnkoU0VSVklDRSwgU0VSVklDRV9OQU1FLCBFUlJPUl9ERVNDUklQVElPTl9NQVApO1xyXG4vKiogUmV0dXJucyB0cnVlIGlmIGVycm9yIGlzIGEgRmlyZWJhc2VFcnJvciB0aGF0IGlzIGJhc2VkIG9uIGFuIGVycm9yIGZyb20gdGhlIHNlcnZlci4gKi9cclxuZnVuY3Rpb24gaXNTZXJ2ZXJFcnJvcihlcnJvcikge1xyXG4gICAgcmV0dXJuIChlcnJvciBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IgJiZcclxuICAgICAgICBlcnJvci5jb2RlLmluY2x1ZGVzKFwicmVxdWVzdC1mYWlsZWRcIiAvKiBFcnJvckNvZGUuUkVRVUVTVF9GQUlMRUQgKi8pKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQoeyBwcm9qZWN0SWQgfSkge1xyXG4gICAgcmV0dXJuIGAke0lOU1RBTExBVElPTlNfQVBJX1VSTH0vcHJvamVjdHMvJHtwcm9qZWN0SWR9L2luc3RhbGxhdGlvbnNgO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RBdXRoVG9rZW5JbmZvRnJvbVJlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRva2VuOiByZXNwb25zZS50b2tlbixcclxuICAgICAgICByZXF1ZXN0U3RhdHVzOiAyIC8qIFJlcXVlc3RTdGF0dXMuQ09NUExFVEVEICovLFxyXG4gICAgICAgIGV4cGlyZXNJbjogZ2V0RXhwaXJlc0luRnJvbVJlc3BvbnNlRXhwaXJlc0luKHJlc3BvbnNlLmV4cGlyZXNJbiksXHJcbiAgICAgICAgY3JlYXRpb25UaW1lOiBEYXRlLm5vdygpXHJcbiAgICB9O1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGdldEVycm9yRnJvbVJlc3BvbnNlKHJlcXVlc3ROYW1lLCByZXNwb25zZSkge1xyXG4gICAgY29uc3QgcmVzcG9uc2VKc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgY29uc3QgZXJyb3JEYXRhID0gcmVzcG9uc2VKc29uLmVycm9yO1xyXG4gICAgcmV0dXJuIEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwicmVxdWVzdC1mYWlsZWRcIiAvKiBFcnJvckNvZGUuUkVRVUVTVF9GQUlMRUQgKi8sIHtcclxuICAgICAgICByZXF1ZXN0TmFtZSxcclxuICAgICAgICBzZXJ2ZXJDb2RlOiBlcnJvckRhdGEuY29kZSxcclxuICAgICAgICBzZXJ2ZXJNZXNzYWdlOiBlcnJvckRhdGEubWVzc2FnZSxcclxuICAgICAgICBzZXJ2ZXJTdGF0dXM6IGVycm9yRGF0YS5zdGF0dXNcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEhlYWRlcnMoeyBhcGlLZXkgfSkge1xyXG4gICAgcmV0dXJuIG5ldyBIZWFkZXJzKHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICd4LWdvb2ctYXBpLWtleSc6IGFwaUtleVxyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0SGVhZGVyc1dpdGhBdXRoKGFwcENvbmZpZywgeyByZWZyZXNoVG9rZW4gfSkge1xyXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnMoYXBwQ29uZmlnKTtcclxuICAgIGhlYWRlcnMuYXBwZW5kKCdBdXRob3JpemF0aW9uJywgZ2V0QXV0aG9yaXphdGlvbkhlYWRlcihyZWZyZXNoVG9rZW4pKTtcclxuICAgIHJldHVybiBoZWFkZXJzO1xyXG59XHJcbi8qKlxyXG4gKiBDYWxscyB0aGUgcGFzc2VkIGluIGZldGNoIHdyYXBwZXIgYW5kIHJldHVybnMgdGhlIHJlc3BvbnNlLlxyXG4gKiBJZiB0aGUgcmV0dXJuZWQgcmVzcG9uc2UgaGFzIGEgc3RhdHVzIG9mIDV4eCwgcmUtcnVucyB0aGUgZnVuY3Rpb24gb25jZSBhbmRcclxuICogcmV0dXJucyB0aGUgcmVzcG9uc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZXRyeUlmU2VydmVyRXJyb3IoZm4pIHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuKCk7XHJcbiAgICBpZiAocmVzdWx0LnN0YXR1cyA+PSA1MDAgJiYgcmVzdWx0LnN0YXR1cyA8IDYwMCkge1xyXG4gICAgICAgIC8vIEludGVybmFsIFNlcnZlciBFcnJvci4gUmV0cnkgcmVxdWVzdC5cclxuICAgICAgICByZXR1cm4gZm4oKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuZnVuY3Rpb24gZ2V0RXhwaXJlc0luRnJvbVJlc3BvbnNlRXhwaXJlc0luKHJlc3BvbnNlRXhwaXJlc0luKSB7XHJcbiAgICAvLyBUaGlzIHdvcmtzIGJlY2F1c2UgdGhlIHNlcnZlciB3aWxsIG5ldmVyIHJlc3BvbmQgd2l0aCBmcmFjdGlvbnMgb2YgYSBzZWNvbmQuXHJcbiAgICByZXR1cm4gTnVtYmVyKHJlc3BvbnNlRXhwaXJlc0luLnJlcGxhY2UoJ3MnLCAnMDAwJykpO1xyXG59XHJcbmZ1bmN0aW9uIGdldEF1dGhvcml6YXRpb25IZWFkZXIocmVmcmVzaFRva2VuKSB7XHJcbiAgICByZXR1cm4gYCR7SU5URVJOQUxfQVVUSF9WRVJTSU9OfSAke3JlZnJlc2hUb2tlbn1gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUluc3RhbGxhdGlvblJlcXVlc3QoeyBhcHBDb25maWcsIGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciB9LCB7IGZpZCB9KSB7XHJcbiAgICBjb25zdCBlbmRwb2ludCA9IGdldEluc3RhbGxhdGlvbnNFbmRwb2ludChhcHBDb25maWcpO1xyXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnMoYXBwQ29uZmlnKTtcclxuICAgIC8vIElmIGhlYXJ0YmVhdCBzZXJ2aWNlIGV4aXN0cywgYWRkIHRoZSBoZWFydGJlYXQgc3RyaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICBjb25zdCBoZWFydGJlYXRTZXJ2aWNlID0gaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyLmdldEltbWVkaWF0ZSh7XHJcbiAgICAgICAgb3B0aW9uYWw6IHRydWVcclxuICAgIH0pO1xyXG4gICAgaWYgKGhlYXJ0YmVhdFNlcnZpY2UpIHtcclxuICAgICAgICBjb25zdCBoZWFydGJlYXRzSGVhZGVyID0gYXdhaXQgaGVhcnRiZWF0U2VydmljZS5nZXRIZWFydGJlYXRzSGVhZGVyKCk7XHJcbiAgICAgICAgaWYgKGhlYXJ0YmVhdHNIZWFkZXIpIHtcclxuICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoJ3gtZmlyZWJhc2UtY2xpZW50JywgaGVhcnRiZWF0c0hlYWRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICBmaWQsXHJcbiAgICAgICAgYXV0aFZlcnNpb246IElOVEVSTkFMX0FVVEhfVkVSU0lPTixcclxuICAgICAgICBhcHBJZDogYXBwQ29uZmlnLmFwcElkLFxyXG4gICAgICAgIHNka1ZlcnNpb246IFBBQ0tBR0VfVkVSU0lPTlxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlJZlNlcnZlckVycm9yKCgpID0+IGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KSk7XHJcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCByZXNwb25zZVZhbHVlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIGNvbnN0IHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSA9IHtcclxuICAgICAgICAgICAgZmlkOiByZXNwb25zZVZhbHVlLmZpZCB8fCBmaWQsXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogMiAvKiBSZXF1ZXN0U3RhdHVzLkNPTVBMRVRFRCAqLyxcclxuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiByZXNwb25zZVZhbHVlLnJlZnJlc2hUb2tlbixcclxuICAgICAgICAgICAgYXV0aFRva2VuOiBleHRyYWN0QXV0aFRva2VuSW5mb0Zyb21SZXNwb25zZShyZXNwb25zZVZhbHVlLmF1dGhUb2tlbilcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aHJvdyBhd2FpdCBnZXRFcnJvckZyb21SZXNwb25zZSgnQ3JlYXRlIEluc3RhbGxhdGlvbicsIHJlc3BvbnNlKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKiogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciBnaXZlbiB0aW1lIHBhc3Nlcy4gKi9cclxuZnVuY3Rpb24gc2xlZXAobXMpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGJ1ZmZlclRvQmFzZTY0VXJsU2FmZShhcnJheSkge1xyXG4gICAgY29uc3QgYjY0ID0gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLmFycmF5KSk7XHJcbiAgICByZXR1cm4gYjY0LnJlcGxhY2UoL1xcKy9nLCAnLScpLnJlcGxhY2UoL1xcLy9nLCAnXycpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFZBTElEX0ZJRF9QQVRURVJOID0gL15bY2RlZl1bXFx3LV17MjF9JC87XHJcbmNvbnN0IElOVkFMSURfRklEID0gJyc7XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBuZXcgRklEIHVzaW5nIHJhbmRvbSB2YWx1ZXMgZnJvbSBXZWIgQ3J5cHRvIEFQSS5cclxuICogUmV0dXJucyBhbiBlbXB0eSBzdHJpbmcgaWYgRklEIGdlbmVyYXRpb24gZmFpbHMgZm9yIGFueSByZWFzb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBnZW5lcmF0ZUZpZCgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gQSB2YWxpZCBGSUQgaGFzIGV4YWN0bHkgMjIgYmFzZTY0IGNoYXJhY3RlcnMsIHdoaWNoIGlzIDEzMiBiaXRzLCBvciAxNi41XHJcbiAgICAgICAgLy8gYnl0ZXMuIG91ciBpbXBsZW1lbnRhdGlvbiBnZW5lcmF0ZXMgYSAxNyBieXRlIGFycmF5IGluc3RlYWQuXHJcbiAgICAgICAgY29uc3QgZmlkQnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoMTcpO1xyXG4gICAgICAgIGNvbnN0IGNyeXB0byA9IHNlbGYuY3J5cHRvIHx8IHNlbGYubXNDcnlwdG87XHJcbiAgICAgICAgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhmaWRCeXRlQXJyYXkpO1xyXG4gICAgICAgIC8vIFJlcGxhY2UgdGhlIGZpcnN0IDQgcmFuZG9tIGJpdHMgd2l0aCB0aGUgY29uc3RhbnQgRklEIGhlYWRlciBvZiAwYjAxMTEuXHJcbiAgICAgICAgZmlkQnl0ZUFycmF5WzBdID0gMGIwMTExMDAwMCArIChmaWRCeXRlQXJyYXlbMF0gJSAwYjAwMDEwMDAwKTtcclxuICAgICAgICBjb25zdCBmaWQgPSBlbmNvZGUoZmlkQnl0ZUFycmF5KTtcclxuICAgICAgICByZXR1cm4gVkFMSURfRklEX1BBVFRFUk4udGVzdChmaWQpID8gZmlkIDogSU5WQUxJRF9GSUQ7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAvLyBGSUQgZ2VuZXJhdGlvbiBlcnJvcmVkXHJcbiAgICAgICAgcmV0dXJuIElOVkFMSURfRklEO1xyXG4gICAgfVxyXG59XHJcbi8qKiBDb252ZXJ0cyBhIEZJRCBVaW50OEFycmF5IHRvIGEgYmFzZTY0IHN0cmluZyByZXByZXNlbnRhdGlvbi4gKi9cclxuZnVuY3Rpb24gZW5jb2RlKGZpZEJ5dGVBcnJheSkge1xyXG4gICAgY29uc3QgYjY0U3RyaW5nID0gYnVmZmVyVG9CYXNlNjRVcmxTYWZlKGZpZEJ5dGVBcnJheSk7XHJcbiAgICAvLyBSZW1vdmUgdGhlIDIzcmQgY2hhcmFjdGVyIHRoYXQgd2FzIGFkZGVkIGJlY2F1c2Ugb2YgdGhlIGV4dHJhIDQgYml0cyBhdCB0aGVcclxuICAgIC8vIGVuZCBvZiBvdXIgMTcgYnl0ZSBhcnJheSwgYW5kIHRoZSAnPScgcGFkZGluZy5cclxuICAgIHJldHVybiBiNjRTdHJpbmcuc3Vic3RyKDAsIDIyKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKiogUmV0dXJucyBhIHN0cmluZyBrZXkgdGhhdCBjYW4gYmUgdXNlZCB0byBpZGVudGlmeSB0aGUgYXBwLiAqL1xyXG5mdW5jdGlvbiBnZXRLZXkoYXBwQ29uZmlnKSB7XHJcbiAgICByZXR1cm4gYCR7YXBwQ29uZmlnLmFwcE5hbWV9ISR7YXBwQ29uZmlnLmFwcElkfWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgZmlkQ2hhbmdlQ2FsbGJhY2tzID0gbmV3IE1hcCgpO1xyXG4vKipcclxuICogQ2FsbHMgdGhlIG9uSWRDaGFuZ2UgY2FsbGJhY2tzIHdpdGggdGhlIG5ldyBGSUQgdmFsdWUsIGFuZCBicm9hZGNhc3RzIHRoZVxyXG4gKiBjaGFuZ2UgdG8gb3RoZXIgdGFicy5cclxuICovXHJcbmZ1bmN0aW9uIGZpZENoYW5nZWQoYXBwQ29uZmlnLCBmaWQpIHtcclxuICAgIGNvbnN0IGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgY2FsbEZpZENoYW5nZUNhbGxiYWNrcyhrZXksIGZpZCk7XHJcbiAgICBicm9hZGNhc3RGaWRDaGFuZ2Uoa2V5LCBmaWQpO1xyXG59XHJcbmZ1bmN0aW9uIGFkZENhbGxiYWNrKGFwcENvbmZpZywgY2FsbGJhY2spIHtcclxuICAgIC8vIE9wZW4gdGhlIGJyb2FkY2FzdCBjaGFubmVsIGlmIGl0J3Mgbm90IGFscmVhZHkgb3BlbixcclxuICAgIC8vIHRvIGJlIGFibGUgdG8gbGlzdGVuIHRvIGNoYW5nZSBldmVudHMgZnJvbSBvdGhlciB0YWJzLlxyXG4gICAgZ2V0QnJvYWRjYXN0Q2hhbm5lbCgpO1xyXG4gICAgY29uc3Qga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICBsZXQgY2FsbGJhY2tTZXQgPSBmaWRDaGFuZ2VDYWxsYmFja3MuZ2V0KGtleSk7XHJcbiAgICBpZiAoIWNhbGxiYWNrU2V0KSB7XHJcbiAgICAgICAgY2FsbGJhY2tTZXQgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgZmlkQ2hhbmdlQ2FsbGJhY2tzLnNldChrZXksIGNhbGxiYWNrU2V0KTtcclxuICAgIH1cclxuICAgIGNhbGxiYWNrU2V0LmFkZChjYWxsYmFjayk7XHJcbn1cclxuZnVuY3Rpb24gcmVtb3ZlQ2FsbGJhY2soYXBwQ29uZmlnLCBjYWxsYmFjaykge1xyXG4gICAgY29uc3Qga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICBjb25zdCBjYWxsYmFja1NldCA9IGZpZENoYW5nZUNhbGxiYWNrcy5nZXQoa2V5KTtcclxuICAgIGlmICghY2FsbGJhY2tTZXQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjYWxsYmFja1NldC5kZWxldGUoY2FsbGJhY2spO1xyXG4gICAgaWYgKGNhbGxiYWNrU2V0LnNpemUgPT09IDApIHtcclxuICAgICAgICBmaWRDaGFuZ2VDYWxsYmFja3MuZGVsZXRlKGtleSk7XHJcbiAgICB9XHJcbiAgICAvLyBDbG9zZSBicm9hZGNhc3QgY2hhbm5lbCBpZiB0aGVyZSBhcmUgbm8gbW9yZSBjYWxsYmFja3MuXHJcbiAgICBjbG9zZUJyb2FkY2FzdENoYW5uZWwoKTtcclxufVxyXG5mdW5jdGlvbiBjYWxsRmlkQ2hhbmdlQ2FsbGJhY2tzKGtleSwgZmlkKSB7XHJcbiAgICBjb25zdCBjYWxsYmFja3MgPSBmaWRDaGFuZ2VDYWxsYmFja3MuZ2V0KGtleSk7XHJcbiAgICBpZiAoIWNhbGxiYWNrcykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgY2FsbGJhY2soZmlkKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBicm9hZGNhc3RGaWRDaGFuZ2Uoa2V5LCBmaWQpIHtcclxuICAgIGNvbnN0IGNoYW5uZWwgPSBnZXRCcm9hZGNhc3RDaGFubmVsKCk7XHJcbiAgICBpZiAoY2hhbm5lbCkge1xyXG4gICAgICAgIGNoYW5uZWwucG9zdE1lc3NhZ2UoeyBrZXksIGZpZCB9KTtcclxuICAgIH1cclxuICAgIGNsb3NlQnJvYWRjYXN0Q2hhbm5lbCgpO1xyXG59XHJcbmxldCBicm9hZGNhc3RDaGFubmVsID0gbnVsbDtcclxuLyoqIE9wZW5zIGFuZCByZXR1cm5zIGEgQnJvYWRjYXN0Q2hhbm5lbCBpZiBpdCBpcyBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIuICovXHJcbmZ1bmN0aW9uIGdldEJyb2FkY2FzdENoYW5uZWwoKSB7XHJcbiAgICBpZiAoIWJyb2FkY2FzdENoYW5uZWwgJiYgJ0Jyb2FkY2FzdENoYW5uZWwnIGluIHNlbGYpIHtcclxuICAgICAgICBicm9hZGNhc3RDaGFubmVsID0gbmV3IEJyb2FkY2FzdENoYW5uZWwoJ1tGaXJlYmFzZV0gRklEIENoYW5nZScpO1xyXG4gICAgICAgIGJyb2FkY2FzdENoYW5uZWwub25tZXNzYWdlID0gZSA9PiB7XHJcbiAgICAgICAgICAgIGNhbGxGaWRDaGFuZ2VDYWxsYmFja3MoZS5kYXRhLmtleSwgZS5kYXRhLmZpZCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBicm9hZGNhc3RDaGFubmVsO1xyXG59XHJcbmZ1bmN0aW9uIGNsb3NlQnJvYWRjYXN0Q2hhbm5lbCgpIHtcclxuICAgIGlmIChmaWRDaGFuZ2VDYWxsYmFja3Muc2l6ZSA9PT0gMCAmJiBicm9hZGNhc3RDaGFubmVsKSB7XHJcbiAgICAgICAgYnJvYWRjYXN0Q2hhbm5lbC5jbG9zZSgpO1xyXG4gICAgICAgIGJyb2FkY2FzdENoYW5uZWwgPSBudWxsO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERBVEFCQVNFX05BTUUgPSAnZmlyZWJhc2UtaW5zdGFsbGF0aW9ucy1kYXRhYmFzZSc7XHJcbmNvbnN0IERBVEFCQVNFX1ZFUlNJT04gPSAxO1xyXG5jb25zdCBPQkpFQ1RfU1RPUkVfTkFNRSA9ICdmaXJlYmFzZS1pbnN0YWxsYXRpb25zLXN0b3JlJztcclxubGV0IGRiUHJvbWlzZSA9IG51bGw7XHJcbmZ1bmN0aW9uIGdldERiUHJvbWlzZSgpIHtcclxuICAgIGlmICghZGJQcm9taXNlKSB7XHJcbiAgICAgICAgZGJQcm9taXNlID0gb3BlbkRCKERBVEFCQVNFX05BTUUsIERBVEFCQVNFX1ZFUlNJT04sIHtcclxuICAgICAgICAgICAgdXBncmFkZTogKGRiLCBvbGRWZXJzaW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCB1c2UgJ2JyZWFrJyBpbiB0aGlzIHN3aXRjaCBzdGF0ZW1lbnQsIHRoZSBmYWxsLXRocm91Z2hcclxuICAgICAgICAgICAgICAgIC8vIGJlaGF2aW9yIGlzIHdoYXQgd2Ugd2FudCwgYmVjYXVzZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgdmVyc2lvbnMgYmV0d2VlblxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIG9sZCB2ZXJzaW9uIGFuZCB0aGUgY3VycmVudCB2ZXJzaW9uLCB3ZSB3YW50IEFMTCB0aGUgbWlncmF0aW9uc1xyXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBjb3JyZXNwb25kIHRvIHRob3NlIHZlcnNpb25zIHRvIHJ1biwgbm90IG9ubHkgdGhlIGxhc3Qgb25lLlxyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlZmF1bHQtY2FzZVxyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChvbGRWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBkYlByb21pc2U7XHJcbn1cclxuLyoqIEFzc2lnbnMgb3Igb3ZlcndyaXRlcyB0aGUgcmVjb3JkIGZvciB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlIGdpdmVuIHZhbHVlLiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZXQoYXBwQ29uZmlnLCB2YWx1ZSkge1xyXG4gICAgY29uc3Qga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xyXG4gICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihPQkpFQ1RfU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0eC5vYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSk7XHJcbiAgICBjb25zdCBvbGRWYWx1ZSA9IChhd2FpdCBvYmplY3RTdG9yZS5nZXQoa2V5KSk7XHJcbiAgICBhd2FpdCBvYmplY3RTdG9yZS5wdXQodmFsdWUsIGtleSk7XHJcbiAgICBhd2FpdCB0eC5kb25lO1xyXG4gICAgaWYgKCFvbGRWYWx1ZSB8fCBvbGRWYWx1ZS5maWQgIT09IHZhbHVlLmZpZCkge1xyXG4gICAgICAgIGZpZENoYW5nZWQoYXBwQ29uZmlnLCB2YWx1ZS5maWQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcbi8qKiBSZW1vdmVzIHJlY29yZChzKSBmcm9tIHRoZSBvYmplY3RTdG9yZSB0aGF0IG1hdGNoIHRoZSBnaXZlbiBrZXkuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlbW92ZShhcHBDb25maWcpIHtcclxuICAgIGNvbnN0IGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcclxuICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgIGF3YWl0IHR4Lm9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKS5kZWxldGUoa2V5KTtcclxuICAgIGF3YWl0IHR4LmRvbmU7XHJcbn1cclxuLyoqXHJcbiAqIEF0b21pY2FsbHkgdXBkYXRlcyBhIHJlY29yZCB3aXRoIHRoZSByZXN1bHQgb2YgdXBkYXRlRm4sIHdoaWNoIGdldHNcclxuICogY2FsbGVkIHdpdGggdGhlIGN1cnJlbnQgdmFsdWUuIElmIG5ld1ZhbHVlIGlzIHVuZGVmaW5lZCwgdGhlIHJlY29yZCBpc1xyXG4gKiBkZWxldGVkIGluc3RlYWQuXHJcbiAqIEByZXR1cm4gVXBkYXRlZCB2YWx1ZVxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlKGFwcENvbmZpZywgdXBkYXRlRm4pIHtcclxuICAgIGNvbnN0IGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcclxuICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgIGNvbnN0IHN0b3JlID0gdHgub2JqZWN0U3RvcmUoT0JKRUNUX1NUT1JFX05BTUUpO1xyXG4gICAgY29uc3Qgb2xkVmFsdWUgPSAoYXdhaXQgc3RvcmUuZ2V0KGtleSkpO1xyXG4gICAgY29uc3QgbmV3VmFsdWUgPSB1cGRhdGVGbihvbGRWYWx1ZSk7XHJcbiAgICBpZiAobmV3VmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGF3YWl0IHN0b3JlLmRlbGV0ZShrZXkpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgYXdhaXQgc3RvcmUucHV0KG5ld1ZhbHVlLCBrZXkpO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgdHguZG9uZTtcclxuICAgIGlmIChuZXdWYWx1ZSAmJiAoIW9sZFZhbHVlIHx8IG9sZFZhbHVlLmZpZCAhPT0gbmV3VmFsdWUuZmlkKSkge1xyXG4gICAgICAgIGZpZENoYW5nZWQoYXBwQ29uZmlnLCBuZXdWYWx1ZS5maWQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ld1ZhbHVlO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBVcGRhdGVzIGFuZCByZXR1cm5zIHRoZSBJbnN0YWxsYXRpb25FbnRyeSBmcm9tIHRoZSBkYXRhYmFzZS5cclxuICogQWxzbyB0cmlnZ2VycyBhIHJlZ2lzdHJhdGlvbiByZXF1ZXN0IGlmIGl0IGlzIG5lY2Vzc2FyeSBhbmQgcG9zc2libGUuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRJbnN0YWxsYXRpb25FbnRyeShpbnN0YWxsYXRpb25zKSB7XHJcbiAgICBsZXQgcmVnaXN0cmF0aW9uUHJvbWlzZTtcclxuICAgIGNvbnN0IGluc3RhbGxhdGlvbkVudHJ5ID0gYXdhaXQgdXBkYXRlKGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnLCBvbGRFbnRyeSA9PiB7XHJcbiAgICAgICAgY29uc3QgaW5zdGFsbGF0aW9uRW50cnkgPSB1cGRhdGVPckNyZWF0ZUluc3RhbGxhdGlvbkVudHJ5KG9sZEVudHJ5KTtcclxuICAgICAgICBjb25zdCBlbnRyeVdpdGhQcm9taXNlID0gdHJpZ2dlclJlZ2lzdHJhdGlvbklmTmVjZXNzYXJ5KGluc3RhbGxhdGlvbnMsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlID0gZW50cnlXaXRoUHJvbWlzZS5yZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgICAgIHJldHVybiBlbnRyeVdpdGhQcm9taXNlLmluc3RhbGxhdGlvbkVudHJ5O1xyXG4gICAgfSk7XHJcbiAgICBpZiAoaW5zdGFsbGF0aW9uRW50cnkuZmlkID09PSBJTlZBTElEX0ZJRCkge1xyXG4gICAgICAgIC8vIEZJRCBnZW5lcmF0aW9uIGZhaWxlZC4gV2FpdGluZyBmb3IgdGhlIEZJRCBmcm9tIHRoZSBzZXJ2ZXIuXHJcbiAgICAgICAgcmV0dXJuIHsgaW5zdGFsbGF0aW9uRW50cnk6IGF3YWl0IHJlZ2lzdHJhdGlvblByb21pc2UgfTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaW5zdGFsbGF0aW9uRW50cnksXHJcbiAgICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZVxyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyBJbnN0YWxsYXRpb24gRW50cnkgaWYgb25lIGRvZXMgbm90IGV4aXN0LlxyXG4gKiBBbHNvIGNsZWFycyB0aW1lZCBvdXQgcGVuZGluZyByZXF1ZXN0cy5cclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZU9yQ3JlYXRlSW5zdGFsbGF0aW9uRW50cnkob2xkRW50cnkpIHtcclxuICAgIGNvbnN0IGVudHJ5ID0gb2xkRW50cnkgfHwge1xyXG4gICAgICAgIGZpZDogZ2VuZXJhdGVGaWQoKSxcclxuICAgICAgICByZWdpc3RyYXRpb25TdGF0dXM6IDAgLyogUmVxdWVzdFN0YXR1cy5OT1RfU1RBUlRFRCAqL1xyXG4gICAgfTtcclxuICAgIHJldHVybiBjbGVhclRpbWVkT3V0UmVxdWVzdChlbnRyeSk7XHJcbn1cclxuLyoqXHJcbiAqIElmIHRoZSBGaXJlYmFzZSBJbnN0YWxsYXRpb24gaXMgbm90IHJlZ2lzdGVyZWQgeWV0LCB0aGlzIHdpbGwgdHJpZ2dlciB0aGVcclxuICogcmVnaXN0cmF0aW9uIGFuZCByZXR1cm4gYW4gSW5Qcm9ncmVzc0luc3RhbGxhdGlvbkVudHJ5LlxyXG4gKlxyXG4gKiBJZiByZWdpc3RyYXRpb25Qcm9taXNlIGRvZXMgbm90IGV4aXN0LCB0aGUgaW5zdGFsbGF0aW9uRW50cnkgaXMgZ3VhcmFudGVlZFxyXG4gKiB0byBiZSByZWdpc3RlcmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gdHJpZ2dlclJlZ2lzdHJhdGlvbklmTmVjZXNzYXJ5KGluc3RhbGxhdGlvbnMsIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICBpZiAoaW5zdGFsbGF0aW9uRW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAwIC8qIFJlcXVlc3RTdGF0dXMuTk9UX1NUQVJURUQgKi8pIHtcclxuICAgICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHtcclxuICAgICAgICAgICAgLy8gUmVnaXN0cmF0aW9uIHJlcXVpcmVkIGJ1dCBhcHAgaXMgb2ZmbGluZS5cclxuICAgICAgICAgICAgY29uc3QgcmVnaXN0cmF0aW9uUHJvbWlzZVdpdGhFcnJvciA9IFByb21pc2UucmVqZWN0KEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLW9mZmxpbmVcIiAvKiBFcnJvckNvZGUuQVBQX09GRkxJTkUgKi8pKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbGxhdGlvbkVudHJ5LFxyXG4gICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZTogcmVnaXN0cmF0aW9uUHJvbWlzZVdpdGhFcnJvclxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUcnkgcmVnaXN0ZXJpbmcuIENoYW5nZSBzdGF0dXMgdG8gSU5fUFJPR1JFU1MuXHJcbiAgICAgICAgY29uc3QgaW5Qcm9ncmVzc0VudHJ5ID0ge1xyXG4gICAgICAgICAgICBmaWQ6IGluc3RhbGxhdGlvbkVudHJ5LmZpZCxcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAxIC8qIFJlcXVlc3RTdGF0dXMuSU5fUFJPR1JFU1MgKi8sXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblRpbWU6IERhdGUubm93KClcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvblByb21pc2UgPSByZWdpc3Rlckluc3RhbGxhdGlvbihpbnN0YWxsYXRpb25zLCBpblByb2dyZXNzRW50cnkpO1xyXG4gICAgICAgIHJldHVybiB7IGluc3RhbGxhdGlvbkVudHJ5OiBpblByb2dyZXNzRW50cnksIHJlZ2lzdHJhdGlvblByb21pc2UgfTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMSAvKiBSZXF1ZXN0U3RhdHVzLklOX1BST0dSRVNTICovKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5zdGFsbGF0aW9uRW50cnksXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2U6IHdhaXRVbnRpbEZpZFJlZ2lzdHJhdGlvbihpbnN0YWxsYXRpb25zKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4geyBpbnN0YWxsYXRpb25FbnRyeSB9O1xyXG4gICAgfVxyXG59XHJcbi8qKiBUaGlzIHdpbGwgYmUgZXhlY3V0ZWQgb25seSBvbmNlIGZvciBlYWNoIG5ldyBGaXJlYmFzZSBJbnN0YWxsYXRpb24uICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVySW5zdGFsbGF0aW9uKGluc3RhbGxhdGlvbnMsIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSA9IGF3YWl0IGNyZWF0ZUluc3RhbGxhdGlvblJlcXVlc3QoaW5zdGFsbGF0aW9ucywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgICAgIHJldHVybiBzZXQoaW5zdGFsbGF0aW9ucy5hcHBDb25maWcsIHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChpc1NlcnZlckVycm9yKGUpICYmIGUuY3VzdG9tRGF0YS5zZXJ2ZXJDb2RlID09PSA0MDkpIHtcclxuICAgICAgICAgICAgLy8gU2VydmVyIHJldHVybmVkIGEgXCJGSUQgY2FuIG5vdCBiZSB1c2VkXCIgZXJyb3IuXHJcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IElEIG5leHQgdGltZS5cclxuICAgICAgICAgICAgYXdhaXQgcmVtb3ZlKGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFJlZ2lzdHJhdGlvbiBmYWlsZWQuIFNldCBGSUQgYXMgbm90IHJlZ2lzdGVyZWQuXHJcbiAgICAgICAgICAgIGF3YWl0IHNldChpbnN0YWxsYXRpb25zLmFwcENvbmZpZywge1xyXG4gICAgICAgICAgICAgICAgZmlkOiBpbnN0YWxsYXRpb25FbnRyeS5maWQsXHJcbiAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25TdGF0dXM6IDAgLyogUmVxdWVzdFN0YXR1cy5OT1RfU1RBUlRFRCAqL1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxufVxyXG4vKiogQ2FsbCBpZiBGSUQgcmVnaXN0cmF0aW9uIGlzIHBlbmRpbmcgaW4gYW5vdGhlciByZXF1ZXN0LiAqL1xyXG5hc3luYyBmdW5jdGlvbiB3YWl0VW50aWxGaWRSZWdpc3RyYXRpb24oaW5zdGFsbGF0aW9ucykge1xyXG4gICAgLy8gVW5mb3J0dW5hdGVseSwgdGhlcmUgaXMgbm8gd2F5IG9mIHJlbGlhYmx5IG9ic2VydmluZyB3aGVuIGEgdmFsdWUgaW5cclxuICAgIC8vIEluZGV4ZWREQiBjaGFuZ2VzICh5ZXQsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vV0lDRy9pbmRleGVkLWRiLW9ic2VydmVycyksXHJcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHBvbGwuXHJcbiAgICBsZXQgZW50cnkgPSBhd2FpdCB1cGRhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgIHdoaWxlIChlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogUmVxdWVzdFN0YXR1cy5JTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgIC8vIGNyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0IHN0aWxsIGluIHByb2dyZXNzLlxyXG4gICAgICAgIGF3YWl0IHNsZWVwKDEwMCk7XHJcbiAgICAgICAgZW50cnkgPSBhd2FpdCB1cGRhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgIH1cclxuICAgIGlmIChlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDAgLyogUmVxdWVzdFN0YXR1cy5OT1RfU1RBUlRFRCAqLykge1xyXG4gICAgICAgIC8vIFRoZSByZXF1ZXN0IHRpbWVkIG91dCBvciBmYWlsZWQgaW4gYSBkaWZmZXJlbnQgY2FsbC4gVHJ5IGFnYWluLlxyXG4gICAgICAgIGNvbnN0IHsgaW5zdGFsbGF0aW9uRW50cnksIHJlZ2lzdHJhdGlvblByb21pc2UgfSA9IGF3YWl0IGdldEluc3RhbGxhdGlvbkVudHJ5KGluc3RhbGxhdGlvbnMpO1xyXG4gICAgICAgIGlmIChyZWdpc3RyYXRpb25Qcm9taXNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gcmVnaXN0cmF0aW9uUHJvbWlzZSwgZW50cnkgaXMgcmVnaXN0ZXJlZC5cclxuICAgICAgICAgICAgcmV0dXJuIGluc3RhbGxhdGlvbkVudHJ5O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBlbnRyeTtcclxufVxyXG4vKipcclxuICogQ2FsbGVkIG9ubHkgaWYgdGhlcmUgaXMgYSBDcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdCBpbiBwcm9ncmVzcy5cclxuICpcclxuICogVXBkYXRlcyB0aGUgSW5zdGFsbGF0aW9uRW50cnkgaW4gdGhlIERCIGJhc2VkIG9uIHRoZSBzdGF0dXMgb2YgdGhlXHJcbiAqIENyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0LlxyXG4gKlxyXG4gKiBSZXR1cm5zIHRoZSB1cGRhdGVkIEluc3RhbGxhdGlvbkVudHJ5LlxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlSW5zdGFsbGF0aW9uUmVxdWVzdChhcHBDb25maWcpIHtcclxuICAgIHJldHVybiB1cGRhdGUoYXBwQ29uZmlnLCBvbGRFbnRyeSA9PiB7XHJcbiAgICAgICAgaWYgKCFvbGRFbnRyeSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImluc3RhbGxhdGlvbi1ub3QtZm91bmRcIiAvKiBFcnJvckNvZGUuSU5TVEFMTEFUSU9OX05PVF9GT1VORCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVkT3V0UmVxdWVzdChvbGRFbnRyeSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBjbGVhclRpbWVkT3V0UmVxdWVzdChlbnRyeSkge1xyXG4gICAgaWYgKGhhc0luc3RhbGxhdGlvblJlcXVlc3RUaW1lZE91dChlbnRyeSkpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBmaWQ6IGVudHJ5LmZpZCxcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAwIC8qIFJlcXVlc3RTdGF0dXMuTk9UX1NUQVJURUQgKi9cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVudHJ5O1xyXG59XHJcbmZ1bmN0aW9uIGhhc0luc3RhbGxhdGlvblJlcXVlc3RUaW1lZE91dChpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgcmV0dXJuIChpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogUmVxdWVzdFN0YXR1cy5JTl9QUk9HUkVTUyAqLyAmJlxyXG4gICAgICAgIGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblRpbWUgKyBQRU5ESU5HX1RJTUVPVVRfTVMgPCBEYXRlLm5vdygpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUF1dGhUb2tlblJlcXVlc3QoeyBhcHBDb25maWcsIGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciB9LCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgY29uc3QgZW5kcG9pbnQgPSBnZXRHZW5lcmF0ZUF1dGhUb2tlbkVuZHBvaW50KGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnNXaXRoQXV0aChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgIC8vIElmIGhlYXJ0YmVhdCBzZXJ2aWNlIGV4aXN0cywgYWRkIHRoZSBoZWFydGJlYXQgc3RyaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICBjb25zdCBoZWFydGJlYXRTZXJ2aWNlID0gaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyLmdldEltbWVkaWF0ZSh7XHJcbiAgICAgICAgb3B0aW9uYWw6IHRydWVcclxuICAgIH0pO1xyXG4gICAgaWYgKGhlYXJ0YmVhdFNlcnZpY2UpIHtcclxuICAgICAgICBjb25zdCBoZWFydGJlYXRzSGVhZGVyID0gYXdhaXQgaGVhcnRiZWF0U2VydmljZS5nZXRIZWFydGJlYXRzSGVhZGVyKCk7XHJcbiAgICAgICAgaWYgKGhlYXJ0YmVhdHNIZWFkZXIpIHtcclxuICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoJ3gtZmlyZWJhc2UtY2xpZW50JywgaGVhcnRiZWF0c0hlYWRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICBpbnN0YWxsYXRpb246IHtcclxuICAgICAgICAgICAgc2RrVmVyc2lvbjogUEFDS0FHRV9WRVJTSU9OLFxyXG4gICAgICAgICAgICBhcHBJZDogYXBwQ29uZmlnLmFwcElkXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlJZlNlcnZlckVycm9yKCgpID0+IGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KSk7XHJcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCByZXNwb25zZVZhbHVlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIGNvbnN0IGNvbXBsZXRlZEF1dGhUb2tlbiA9IGV4dHJhY3RBdXRoVG9rZW5JbmZvRnJvbVJlc3BvbnNlKHJlc3BvbnNlVmFsdWUpO1xyXG4gICAgICAgIHJldHVybiBjb21wbGV0ZWRBdXRoVG9rZW47XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aHJvdyBhd2FpdCBnZXRFcnJvckZyb21SZXNwb25zZSgnR2VuZXJhdGUgQXV0aCBUb2tlbicsIHJlc3BvbnNlKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRHZW5lcmF0ZUF1dGhUb2tlbkVuZHBvaW50KGFwcENvbmZpZywgeyBmaWQgfSkge1xyXG4gICAgcmV0dXJuIGAke2dldEluc3RhbGxhdGlvbnNFbmRwb2ludChhcHBDb25maWcpfS8ke2ZpZH0vYXV0aFRva2VuczpnZW5lcmF0ZWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSB2YWxpZCBhdXRoZW50aWNhdGlvbiB0b2tlbiBmb3IgdGhlIGluc3RhbGxhdGlvbi4gR2VuZXJhdGVzIGEgbmV3XHJcbiAqIHRva2VuIGlmIG9uZSBkb2Vzbid0IGV4aXN0LCBpcyBleHBpcmVkIG9yIGFib3V0IHRvIGV4cGlyZS5cclxuICpcclxuICogU2hvdWxkIG9ubHkgYmUgY2FsbGVkIGlmIHRoZSBGaXJlYmFzZSBJbnN0YWxsYXRpb24gaXMgcmVnaXN0ZXJlZC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlZnJlc2hBdXRoVG9rZW4oaW5zdGFsbGF0aW9ucywgZm9yY2VSZWZyZXNoID0gZmFsc2UpIHtcclxuICAgIGxldCB0b2tlblByb21pc2U7XHJcbiAgICBjb25zdCBlbnRyeSA9IGF3YWl0IHVwZGF0ZShpbnN0YWxsYXRpb25zLmFwcENvbmZpZywgb2xkRW50cnkgPT4ge1xyXG4gICAgICAgIGlmICghaXNFbnRyeVJlZ2lzdGVyZWQob2xkRW50cnkpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm90LXJlZ2lzdGVyZWRcIiAvKiBFcnJvckNvZGUuTk9UX1JFR0lTVEVSRUQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBvbGRBdXRoVG9rZW4gPSBvbGRFbnRyeS5hdXRoVG9rZW47XHJcbiAgICAgICAgaWYgKCFmb3JjZVJlZnJlc2ggJiYgaXNBdXRoVG9rZW5WYWxpZChvbGRBdXRoVG9rZW4pKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZXJlIGlzIGEgdmFsaWQgdG9rZW4gaW4gdGhlIERCLlxyXG4gICAgICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG9sZEF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSAxIC8qIFJlcXVlc3RTdGF0dXMuSU5fUFJPR1JFU1MgKi8pIHtcclxuICAgICAgICAgICAgLy8gVGhlcmUgYWxyZWFkeSBpcyBhIHRva2VuIHJlcXVlc3QgaW4gcHJvZ3Jlc3MuXHJcbiAgICAgICAgICAgIHRva2VuUHJvbWlzZSA9IHdhaXRVbnRpbEF1dGhUb2tlblJlcXVlc3QoaW5zdGFsbGF0aW9ucywgZm9yY2VSZWZyZXNoKTtcclxuICAgICAgICAgICAgcmV0dXJuIG9sZEVudHJ5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gTm8gdG9rZW4gb3IgdG9rZW4gZXhwaXJlZC5cclxuICAgICAgICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1vZmZsaW5lXCIgLyogRXJyb3JDb2RlLkFQUF9PRkZMSU5FICovKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBpblByb2dyZXNzRW50cnkgPSBtYWtlQXV0aFRva2VuUmVxdWVzdEluUHJvZ3Jlc3NFbnRyeShvbGRFbnRyeSk7XHJcbiAgICAgICAgICAgIHRva2VuUHJvbWlzZSA9IGZldGNoQXV0aFRva2VuRnJvbVNlcnZlcihpbnN0YWxsYXRpb25zLCBpblByb2dyZXNzRW50cnkpO1xyXG4gICAgICAgICAgICByZXR1cm4gaW5Qcm9ncmVzc0VudHJ5O1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgY29uc3QgYXV0aFRva2VuID0gdG9rZW5Qcm9taXNlXHJcbiAgICAgICAgPyBhd2FpdCB0b2tlblByb21pc2VcclxuICAgICAgICA6IGVudHJ5LmF1dGhUb2tlbjtcclxuICAgIHJldHVybiBhdXRoVG9rZW47XHJcbn1cclxuLyoqXHJcbiAqIENhbGwgb25seSBpZiBGSUQgaXMgcmVnaXN0ZXJlZCBhbmQgQXV0aCBUb2tlbiByZXF1ZXN0IGlzIGluIHByb2dyZXNzLlxyXG4gKlxyXG4gKiBXYWl0cyB1bnRpbCB0aGUgY3VycmVudCBwZW5kaW5nIHJlcXVlc3QgZmluaXNoZXMuIElmIHRoZSByZXF1ZXN0IHRpbWVzIG91dCxcclxuICogdHJpZXMgb25jZSBpbiB0aGlzIHRocmVhZCBhcyB3ZWxsLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gd2FpdFVudGlsQXV0aFRva2VuUmVxdWVzdChpbnN0YWxsYXRpb25zLCBmb3JjZVJlZnJlc2gpIHtcclxuICAgIC8vIFVuZm9ydHVuYXRlbHksIHRoZXJlIGlzIG5vIHdheSBvZiByZWxpYWJseSBvYnNlcnZpbmcgd2hlbiBhIHZhbHVlIGluXHJcbiAgICAvLyBJbmRleGVkREIgY2hhbmdlcyAoeWV0LCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL1dJQ0cvaW5kZXhlZC1kYi1vYnNlcnZlcnMpLFxyXG4gICAgLy8gc28gd2UgbmVlZCB0byBwb2xsLlxyXG4gICAgbGV0IGVudHJ5ID0gYXdhaXQgdXBkYXRlQXV0aFRva2VuUmVxdWVzdChpbnN0YWxsYXRpb25zLmFwcENvbmZpZyk7XHJcbiAgICB3aGlsZSAoZW50cnkuYXV0aFRva2VuLnJlcXVlc3RTdGF0dXMgPT09IDEgLyogUmVxdWVzdFN0YXR1cy5JTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgIC8vIGdlbmVyYXRlQXV0aFRva2VuIHN0aWxsIGluIHByb2dyZXNzLlxyXG4gICAgICAgIGF3YWl0IHNsZWVwKDEwMCk7XHJcbiAgICAgICAgZW50cnkgPSBhd2FpdCB1cGRhdGVBdXRoVG9rZW5SZXF1ZXN0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGF1dGhUb2tlbiA9IGVudHJ5LmF1dGhUb2tlbjtcclxuICAgIGlmIChhdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMCAvKiBSZXF1ZXN0U3RhdHVzLk5PVF9TVEFSVEVEICovKSB7XHJcbiAgICAgICAgLy8gVGhlIHJlcXVlc3QgdGltZWQgb3V0IG9yIGZhaWxlZCBpbiBhIGRpZmZlcmVudCBjYWxsLiBUcnkgYWdhaW4uXHJcbiAgICAgICAgcmV0dXJuIHJlZnJlc2hBdXRoVG9rZW4oaW5zdGFsbGF0aW9ucywgZm9yY2VSZWZyZXNoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBhdXRoVG9rZW47XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENhbGxlZCBvbmx5IGlmIHRoZXJlIGlzIGEgR2VuZXJhdGVBdXRoVG9rZW4gcmVxdWVzdCBpbiBwcm9ncmVzcy5cclxuICpcclxuICogVXBkYXRlcyB0aGUgSW5zdGFsbGF0aW9uRW50cnkgaW4gdGhlIERCIGJhc2VkIG9uIHRoZSBzdGF0dXMgb2YgdGhlXHJcbiAqIEdlbmVyYXRlQXV0aFRva2VuIHJlcXVlc3QuXHJcbiAqXHJcbiAqIFJldHVybnMgdGhlIHVwZGF0ZWQgSW5zdGFsbGF0aW9uRW50cnkuXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVBdXRoVG9rZW5SZXF1ZXN0KGFwcENvbmZpZykge1xyXG4gICAgcmV0dXJuIHVwZGF0ZShhcHBDb25maWcsIG9sZEVudHJ5ID0+IHtcclxuICAgICAgICBpZiAoIWlzRW50cnlSZWdpc3RlcmVkKG9sZEVudHJ5KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vdC1yZWdpc3RlcmVkXCIgLyogRXJyb3JDb2RlLk5PVF9SRUdJU1RFUkVEICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb2xkQXV0aFRva2VuID0gb2xkRW50cnkuYXV0aFRva2VuO1xyXG4gICAgICAgIGlmIChoYXNBdXRoVG9rZW5SZXF1ZXN0VGltZWRPdXQob2xkQXV0aFRva2VuKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvbGRFbnRyeSksIHsgYXV0aFRva2VuOiB7IHJlcXVlc3RTdGF0dXM6IDAgLyogUmVxdWVzdFN0YXR1cy5OT1RfU1RBUlRFRCAqLyB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICB9KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBmZXRjaEF1dGhUb2tlbkZyb21TZXJ2ZXIoaW5zdGFsbGF0aW9ucywgaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgYXV0aFRva2VuID0gYXdhaXQgZ2VuZXJhdGVBdXRoVG9rZW5SZXF1ZXN0KGluc3RhbGxhdGlvbnMsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICBjb25zdCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGluc3RhbGxhdGlvbkVudHJ5KSwgeyBhdXRoVG9rZW4gfSk7XHJcbiAgICAgICAgYXdhaXQgc2V0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnLCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgICAgIHJldHVybiBhdXRoVG9rZW47XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChpc1NlcnZlckVycm9yKGUpICYmXHJcbiAgICAgICAgICAgIChlLmN1c3RvbURhdGEuc2VydmVyQ29kZSA9PT0gNDAxIHx8IGUuY3VzdG9tRGF0YS5zZXJ2ZXJDb2RlID09PSA0MDQpKSB7XHJcbiAgICAgICAgICAgIC8vIFNlcnZlciByZXR1cm5lZCBhIFwiRklEIG5vdCBmb3VuZFwiIG9yIGEgXCJJbnZhbGlkIGF1dGhlbnRpY2F0aW9uXCIgZXJyb3IuXHJcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IElEIG5leHQgdGltZS5cclxuICAgICAgICAgICAgYXdhaXQgcmVtb3ZlKGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgaW5zdGFsbGF0aW9uRW50cnkpLCB7IGF1dGhUb2tlbjogeyByZXF1ZXN0U3RhdHVzOiAwIC8qIFJlcXVlc3RTdGF0dXMuTk9UX1NUQVJURUQgKi8gfSB9KTtcclxuICAgICAgICAgICAgYXdhaXQgc2V0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnLCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzRW50cnlSZWdpc3RlcmVkKGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICByZXR1cm4gKGluc3RhbGxhdGlvbkVudHJ5ICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICBpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDIgLyogUmVxdWVzdFN0YXR1cy5DT01QTEVURUQgKi8pO1xyXG59XHJcbmZ1bmN0aW9uIGlzQXV0aFRva2VuVmFsaWQoYXV0aFRva2VuKSB7XHJcbiAgICByZXR1cm4gKGF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSAyIC8qIFJlcXVlc3RTdGF0dXMuQ09NUExFVEVEICovICYmXHJcbiAgICAgICAgIWlzQXV0aFRva2VuRXhwaXJlZChhdXRoVG9rZW4pKTtcclxufVxyXG5mdW5jdGlvbiBpc0F1dGhUb2tlbkV4cGlyZWQoYXV0aFRva2VuKSB7XHJcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgcmV0dXJuIChub3cgPCBhdXRoVG9rZW4uY3JlYXRpb25UaW1lIHx8XHJcbiAgICAgICAgYXV0aFRva2VuLmNyZWF0aW9uVGltZSArIGF1dGhUb2tlbi5leHBpcmVzSW4gPCBub3cgKyBUT0tFTl9FWFBJUkFUSU9OX0JVRkZFUik7XHJcbn1cclxuLyoqIFJldHVybnMgYW4gdXBkYXRlZCBJbnN0YWxsYXRpb25FbnRyeSB3aXRoIGFuIEluUHJvZ3Jlc3NBdXRoVG9rZW4uICovXHJcbmZ1bmN0aW9uIG1ha2VBdXRoVG9rZW5SZXF1ZXN0SW5Qcm9ncmVzc0VudHJ5KG9sZEVudHJ5KSB7XHJcbiAgICBjb25zdCBpblByb2dyZXNzQXV0aFRva2VuID0ge1xyXG4gICAgICAgIHJlcXVlc3RTdGF0dXM6IDEgLyogUmVxdWVzdFN0YXR1cy5JTl9QUk9HUkVTUyAqLyxcclxuICAgICAgICByZXF1ZXN0VGltZTogRGF0ZS5ub3coKVxyXG4gICAgfTtcclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9sZEVudHJ5KSwgeyBhdXRoVG9rZW46IGluUHJvZ3Jlc3NBdXRoVG9rZW4gfSk7XHJcbn1cclxuZnVuY3Rpb24gaGFzQXV0aFRva2VuUmVxdWVzdFRpbWVkT3V0KGF1dGhUb2tlbikge1xyXG4gICAgcmV0dXJuIChhdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMSAvKiBSZXF1ZXN0U3RhdHVzLklOX1BST0dSRVNTICovICYmXHJcbiAgICAgICAgYXV0aFRva2VuLnJlcXVlc3RUaW1lICsgUEVORElOR19USU1FT1VUX01TIDwgRGF0ZS5ub3coKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBGaXJlYmFzZSBJbnN0YWxsYXRpb24gaWYgdGhlcmUgaXNuJ3Qgb25lIGZvciB0aGUgYXBwIGFuZFxyXG4gKiByZXR1cm5zIHRoZSBJbnN0YWxsYXRpb24gSUQuXHJcbiAqIEBwYXJhbSBpbnN0YWxsYXRpb25zIC0gVGhlIGBJbnN0YWxsYXRpb25zYCBpbnN0YW5jZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0SWQoaW5zdGFsbGF0aW9ucykge1xyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9uc0ltcGwgPSBpbnN0YWxsYXRpb25zO1xyXG4gICAgY29uc3QgeyBpbnN0YWxsYXRpb25FbnRyeSwgcmVnaXN0cmF0aW9uUHJvbWlzZSB9ID0gYXdhaXQgZ2V0SW5zdGFsbGF0aW9uRW50cnkoaW5zdGFsbGF0aW9uc0ltcGwpO1xyXG4gICAgaWYgKHJlZ2lzdHJhdGlvblByb21pc2UpIHtcclxuICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gSWYgdGhlIGluc3RhbGxhdGlvbiBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQsIHVwZGF0ZSB0aGUgYXV0aGVudGljYXRpb25cclxuICAgICAgICAvLyB0b2tlbiBpZiBuZWVkZWQuXHJcbiAgICAgICAgcmVmcmVzaEF1dGhUb2tlbihpbnN0YWxsYXRpb25zSW1wbCkuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5zdGFsbGF0aW9uRW50cnkuZmlkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgRmlyZWJhc2UgSW5zdGFsbGF0aW9ucyBhdXRoIHRva2VuLCBpZGVudGlmeWluZyB0aGUgY3VycmVudFxyXG4gKiBGaXJlYmFzZSBJbnN0YWxsYXRpb24uXHJcbiAqIEBwYXJhbSBpbnN0YWxsYXRpb25zIC0gVGhlIGBJbnN0YWxsYXRpb25zYCBpbnN0YW5jZS5cclxuICogQHBhcmFtIGZvcmNlUmVmcmVzaCAtIEZvcmNlIHJlZnJlc2ggcmVnYXJkbGVzcyBvZiB0b2tlbiBleHBpcmF0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRUb2tlbihpbnN0YWxsYXRpb25zLCBmb3JjZVJlZnJlc2ggPSBmYWxzZSkge1xyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9uc0ltcGwgPSBpbnN0YWxsYXRpb25zO1xyXG4gICAgYXdhaXQgY29tcGxldGVJbnN0YWxsYXRpb25SZWdpc3RyYXRpb24oaW5zdGFsbGF0aW9uc0ltcGwpO1xyXG4gICAgLy8gQXQgdGhpcyBwb2ludCB3ZSBlaXRoZXIgaGF2ZSBhIFJlZ2lzdGVyZWQgSW5zdGFsbGF0aW9uIGluIHRoZSBEQiwgb3Igd2UndmVcclxuICAgIC8vIGFscmVhZHkgdGhyb3duIGFuIGVycm9yLlxyXG4gICAgY29uc3QgYXV0aFRva2VuID0gYXdhaXQgcmVmcmVzaEF1dGhUb2tlbihpbnN0YWxsYXRpb25zSW1wbCwgZm9yY2VSZWZyZXNoKTtcclxuICAgIHJldHVybiBhdXRoVG9rZW4udG9rZW47XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gY29tcGxldGVJbnN0YWxsYXRpb25SZWdpc3RyYXRpb24oaW5zdGFsbGF0aW9ucykge1xyXG4gICAgY29uc3QgeyByZWdpc3RyYXRpb25Qcm9taXNlIH0gPSBhd2FpdCBnZXRJbnN0YWxsYXRpb25FbnRyeShpbnN0YWxsYXRpb25zKTtcclxuICAgIGlmIChyZWdpc3RyYXRpb25Qcm9taXNlKSB7XHJcbiAgICAgICAgLy8gQSBjcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdCBpcyBpbiBwcm9ncmVzcy4gV2FpdCB1bnRpbCBpdCBmaW5pc2hlcy5cclxuICAgICAgICBhd2FpdCByZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgY29uc3QgZW5kcG9pbnQgPSBnZXREZWxldGVFbmRwb2ludChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgIGNvbnN0IGhlYWRlcnMgPSBnZXRIZWFkZXJzV2l0aEF1dGgoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgaGVhZGVyc1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlJZlNlcnZlckVycm9yKCgpID0+IGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KSk7XHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgdGhyb3cgYXdhaXQgZ2V0RXJyb3JGcm9tUmVzcG9uc2UoJ0RlbGV0ZSBJbnN0YWxsYXRpb24nLCByZXNwb25zZSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0RGVsZXRlRW5kcG9pbnQoYXBwQ29uZmlnLCB7IGZpZCB9KSB7XHJcbiAgICByZXR1cm4gYCR7Z2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50KGFwcENvbmZpZyl9LyR7ZmlkfWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERlbGV0ZXMgdGhlIEZpcmViYXNlIEluc3RhbGxhdGlvbiBhbmQgYWxsIGFzc29jaWF0ZWQgZGF0YS5cclxuICogQHBhcmFtIGluc3RhbGxhdGlvbnMgLSBUaGUgYEluc3RhbGxhdGlvbnNgIGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVJbnN0YWxsYXRpb25zKGluc3RhbGxhdGlvbnMpIHtcclxuICAgIGNvbnN0IHsgYXBwQ29uZmlnIH0gPSBpbnN0YWxsYXRpb25zO1xyXG4gICAgY29uc3QgZW50cnkgPSBhd2FpdCB1cGRhdGUoYXBwQ29uZmlnLCBvbGRFbnRyeSA9PiB7XHJcbiAgICAgICAgaWYgKG9sZEVudHJ5ICYmIG9sZEVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMCAvKiBSZXF1ZXN0U3RhdHVzLk5PVF9TVEFSVEVEICovKSB7XHJcbiAgICAgICAgICAgIC8vIERlbGV0ZSB0aGUgdW5yZWdpc3RlcmVkIGVudHJ5IHdpdGhvdXQgc2VuZGluZyBhIGRlbGV0ZUluc3RhbGxhdGlvbiByZXF1ZXN0LlxyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICB9KTtcclxuICAgIGlmIChlbnRyeSkge1xyXG4gICAgICAgIGlmIChlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogUmVxdWVzdFN0YXR1cy5JTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgICAgICAvLyBDYW4ndCBkZWxldGUgd2hpbGUgdHJ5aW5nIHRvIHJlZ2lzdGVyLlxyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImRlbGV0ZS1wZW5kaW5nLXJlZ2lzdHJhdGlvblwiIC8qIEVycm9yQ29kZS5ERUxFVEVfUEVORElOR19SRUdJU1RSQVRJT04gKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDIgLyogUmVxdWVzdFN0YXR1cy5DT01QTEVURUQgKi8pIHtcclxuICAgICAgICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1vZmZsaW5lXCIgLyogRXJyb3JDb2RlLkFQUF9PRkZMSU5FICovKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGRlbGV0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnLCBlbnRyeSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZW1vdmUoYXBwQ29uZmlnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU2V0cyBhIG5ldyBjYWxsYmFjayB0aGF0IHdpbGwgZ2V0IGNhbGxlZCB3aGVuIEluc3RhbGxhdGlvbiBJRCBjaGFuZ2VzLlxyXG4gKiBSZXR1cm5zIGFuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgd2lsbCByZW1vdmUgdGhlIGNhbGxiYWNrIHdoZW4gY2FsbGVkLlxyXG4gKiBAcGFyYW0gaW5zdGFsbGF0aW9ucyAtIFRoZSBgSW5zdGFsbGF0aW9uc2AgaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBjYWxsYmFjayAtIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IGlzIGludm9rZWQgd2hlbiBGSUQgY2hhbmdlcy5cclxuICogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IGNhbiBiZSBjYWxsZWQgdG8gdW5zdWJzY3JpYmUuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG9uSWRDaGFuZ2UoaW5zdGFsbGF0aW9ucywgY2FsbGJhY2spIHtcclxuICAgIGNvbnN0IHsgYXBwQ29uZmlnIH0gPSBpbnN0YWxsYXRpb25zO1xyXG4gICAgYWRkQ2FsbGJhY2soYXBwQ29uZmlnLCBjYWxsYmFjayk7XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgIHJlbW92ZUNhbGxiYWNrKGFwcENvbmZpZywgY2FsbGJhY2spO1xyXG4gICAgfTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhbiBpbnN0YW5jZSBvZiB7QGxpbmsgSW5zdGFsbGF0aW9uc30gYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlblxyXG4gKiB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBhcHAgLSBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRJbnN0YWxsYXRpb25zKGFwcCA9IGdldEFwcCgpKSB7XHJcbiAgICBjb25zdCBpbnN0YWxsYXRpb25zSW1wbCA9IF9nZXRQcm92aWRlcihhcHAsICdpbnN0YWxsYXRpb25zJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICByZXR1cm4gaW5zdGFsbGF0aW9uc0ltcGw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZXh0cmFjdEFwcENvbmZpZyhhcHApIHtcclxuICAgIGlmICghYXBwIHx8ICFhcHAub3B0aW9ucykge1xyXG4gICAgICAgIHRocm93IGdldE1pc3NpbmdWYWx1ZUVycm9yKCdBcHAgQ29uZmlndXJhdGlvbicpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcHAubmFtZSkge1xyXG4gICAgICAgIHRocm93IGdldE1pc3NpbmdWYWx1ZUVycm9yKCdBcHAgTmFtZScpO1xyXG4gICAgfVxyXG4gICAgLy8gUmVxdWlyZWQgYXBwIGNvbmZpZyBrZXlzXHJcbiAgICBjb25zdCBjb25maWdLZXlzID0gW1xyXG4gICAgICAgICdwcm9qZWN0SWQnLFxyXG4gICAgICAgICdhcGlLZXknLFxyXG4gICAgICAgICdhcHBJZCdcclxuICAgIF07XHJcbiAgICBmb3IgKGNvbnN0IGtleU5hbWUgb2YgY29uZmlnS2V5cykge1xyXG4gICAgICAgIGlmICghYXBwLm9wdGlvbnNba2V5TmFtZV0pIHtcclxuICAgICAgICAgICAgdGhyb3cgZ2V0TWlzc2luZ1ZhbHVlRXJyb3Ioa2V5TmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBhcHBOYW1lOiBhcHAubmFtZSxcclxuICAgICAgICBwcm9qZWN0SWQ6IGFwcC5vcHRpb25zLnByb2plY3RJZCxcclxuICAgICAgICBhcGlLZXk6IGFwcC5vcHRpb25zLmFwaUtleSxcclxuICAgICAgICBhcHBJZDogYXBwLm9wdGlvbnMuYXBwSWRcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gZ2V0TWlzc2luZ1ZhbHVlRXJyb3IodmFsdWVOYW1lKSB7XHJcbiAgICByZXR1cm4gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJtaXNzaW5nLWFwcC1jb25maWctdmFsdWVzXCIgLyogRXJyb3JDb2RlLk1JU1NJTkdfQVBQX0NPTkZJR19WQUxVRVMgKi8sIHtcclxuICAgICAgICB2YWx1ZU5hbWVcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IElOU1RBTExBVElPTlNfTkFNRSA9ICdpbnN0YWxsYXRpb25zJztcclxuY29uc3QgSU5TVEFMTEFUSU9OU19OQU1FX0lOVEVSTkFMID0gJ2luc3RhbGxhdGlvbnMtaW50ZXJuYWwnO1xyXG5jb25zdCBwdWJsaWNGYWN0b3J5ID0gKGNvbnRhaW5lcikgPT4ge1xyXG4gICAgY29uc3QgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgIC8vIFRocm93cyBpZiBhcHAgaXNuJ3QgY29uZmlndXJlZCBwcm9wZXJseS5cclxuICAgIGNvbnN0IGFwcENvbmZpZyA9IGV4dHJhY3RBcHBDb25maWcoYXBwKTtcclxuICAgIGNvbnN0IGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciA9IF9nZXRQcm92aWRlcihhcHAsICdoZWFydGJlYXQnKTtcclxuICAgIGNvbnN0IGluc3RhbGxhdGlvbnNJbXBsID0ge1xyXG4gICAgICAgIGFwcCxcclxuICAgICAgICBhcHBDb25maWcsXHJcbiAgICAgICAgaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyLFxyXG4gICAgICAgIF9kZWxldGU6ICgpID0+IFByb21pc2UucmVzb2x2ZSgpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGluc3RhbGxhdGlvbnNJbXBsO1xyXG59O1xyXG5jb25zdCBpbnRlcm5hbEZhY3RvcnkgPSAoY29udGFpbmVyKSA9PiB7XHJcbiAgICBjb25zdCBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgLy8gSW50ZXJuYWwgRklTIGluc3RhbmNlIHJlbGllcyBvbiBwdWJsaWMgRklTIGluc3RhbmNlLlxyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9ucyA9IF9nZXRQcm92aWRlcihhcHAsIElOU1RBTExBVElPTlNfTkFNRSkuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICBjb25zdCBpbnN0YWxsYXRpb25zSW50ZXJuYWwgPSB7XHJcbiAgICAgICAgZ2V0SWQ6ICgpID0+IGdldElkKGluc3RhbGxhdGlvbnMpLFxyXG4gICAgICAgIGdldFRva2VuOiAoZm9yY2VSZWZyZXNoKSA9PiBnZXRUb2tlbihpbnN0YWxsYXRpb25zLCBmb3JjZVJlZnJlc2gpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGluc3RhbGxhdGlvbnNJbnRlcm5hbDtcclxufTtcclxuZnVuY3Rpb24gcmVnaXN0ZXJJbnN0YWxsYXRpb25zKCkge1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoSU5TVEFMTEFUSU9OU19OQU1FLCBwdWJsaWNGYWN0b3J5LCBcIlBVQkxJQ1wiIC8qIENvbXBvbmVudFR5cGUuUFVCTElDICovKSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChJTlNUQUxMQVRJT05TX05BTUVfSU5URVJOQUwsIGludGVybmFsRmFjdG9yeSwgXCJQUklWQVRFXCIgLyogQ29tcG9uZW50VHlwZS5QUklWQVRFICovKSk7XHJcbn1cblxuLyoqXHJcbiAqIFRoZSBGaXJlYmFzZSBJbnN0YWxsYXRpb25zIFdlYiBTREsuXHJcbiAqIFRoaXMgU0RLIGRvZXMgbm90IHdvcmsgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50LlxyXG4gKlxyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbnJlZ2lzdGVySW5zdGFsbGF0aW9ucygpO1xyXG5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbik7XHJcbi8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXHJcbnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnZXNtMjAxNycpO1xuXG5leHBvcnQgeyBkZWxldGVJbnN0YWxsYXRpb25zLCBnZXRJZCwgZ2V0SW5zdGFsbGF0aW9ucywgZ2V0VG9rZW4sIG9uSWRDaGFuZ2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBfZ2V0UHJvdmlkZXIsIGdldEFwcCwgX3JlZ2lzdGVyQ29tcG9uZW50LCByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzLCBGaXJlYmFzZUVycm9yLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSwgaXNCcm93c2VyRXh0ZW5zaW9uLCBhcmVDb29raWVzRW5hYmxlZCwgZ2V0TW9kdWxhckluc3RhbmNlLCBkZWVwRXF1YWwgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCAnQGZpcmViYXNlL2luc3RhbGxhdGlvbnMnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVHlwZSBjb25zdGFudCBmb3IgRmlyZWJhc2UgQW5hbHl0aWNzLlxyXG4gKi9cclxuY29uc3QgQU5BTFlUSUNTX1RZUEUgPSAnYW5hbHl0aWNzJztcclxuLy8gS2V5IHRvIGF0dGFjaCBGSUQgdG8gaW4gZ3RhZyBwYXJhbXMuXHJcbmNvbnN0IEdBX0ZJRF9LRVkgPSAnZmlyZWJhc2VfaWQnO1xyXG5jb25zdCBPUklHSU5fS0VZID0gJ29yaWdpbic7XHJcbmNvbnN0IEZFVENIX1RJTUVPVVRfTUlMTElTID0gNjAgKiAxMDAwO1xyXG5jb25zdCBEWU5BTUlDX0NPTkZJR19VUkwgPSAnaHR0cHM6Ly9maXJlYmFzZS5nb29nbGVhcGlzLmNvbS92MWFscGhhL3Byb2plY3RzLy0vYXBwcy97YXBwLWlkfS93ZWJDb25maWcnO1xyXG5jb25zdCBHVEFHX1VSTCA9ICdodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbS9ndGFnL2pzJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcignQGZpcmViYXNlL2FuYWx5dGljcycpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBFUlJPUlMgPSB7XHJcbiAgICBbXCJhbHJlYWR5LWV4aXN0c1wiIC8qIEFuYWx5dGljc0Vycm9yLkFMUkVBRFlfRVhJU1RTICovXTogJ0EgRmlyZWJhc2UgQW5hbHl0aWNzIGluc3RhbmNlIHdpdGggdGhlIGFwcElkIHskaWR9ICcgK1xyXG4gICAgICAgICcgYWxyZWFkeSBleGlzdHMuICcgK1xyXG4gICAgICAgICdPbmx5IG9uZSBGaXJlYmFzZSBBbmFseXRpY3MgaW5zdGFuY2UgY2FuIGJlIGNyZWF0ZWQgZm9yIGVhY2ggYXBwSWQuJyxcclxuICAgIFtcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBbmFseXRpY3NFcnJvci5BTFJFQURZX0lOSVRJQUxJWkVEICovXTogJ2luaXRpYWxpemVBbmFseXRpY3MoKSBjYW5ub3QgYmUgY2FsbGVkIGFnYWluIHdpdGggZGlmZmVyZW50IG9wdGlvbnMgdGhhbiB0aG9zZSAnICtcclxuICAgICAgICAnaXQgd2FzIGluaXRpYWxseSBjYWxsZWQgd2l0aC4gSXQgY2FuIGJlIGNhbGxlZCBhZ2FpbiB3aXRoIHRoZSBzYW1lIG9wdGlvbnMgdG8gJyArXHJcbiAgICAgICAgJ3JldHVybiB0aGUgZXhpc3RpbmcgaW5zdGFuY2UsIG9yIGdldEFuYWx5dGljcygpIGNhbiBiZSB1c2VkICcgK1xyXG4gICAgICAgICd0byBnZXQgYSByZWZlcmVuY2UgdG8gdGhlIGFscmVhZHktaW50aWFsaXplZCBpbnN0YW5jZS4nLFxyXG4gICAgW1wiYWxyZWFkeS1pbml0aWFsaXplZC1zZXR0aW5nc1wiIC8qIEFuYWx5dGljc0Vycm9yLkFMUkVBRFlfSU5JVElBTElaRURfU0VUVElOR1MgKi9dOiAnRmlyZWJhc2UgQW5hbHl0aWNzIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWQuJyArXHJcbiAgICAgICAgJ3NldHRpbmdzKCkgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIGluaXRpYWxpemluZyBhbnkgQW5hbHl0aWNzIGluc3RhbmNlJyArXHJcbiAgICAgICAgJ29yIGl0IHdpbGwgaGF2ZSBubyBlZmZlY3QuJyxcclxuICAgIFtcImludGVyb3AtY29tcG9uZW50LXJlZy1mYWlsZWRcIiAvKiBBbmFseXRpY3NFcnJvci5JTlRFUk9QX0NPTVBPTkVOVF9SRUdfRkFJTEVEICovXTogJ0ZpcmViYXNlIEFuYWx5dGljcyBJbnRlcm9wIENvbXBvbmVudCBmYWlsZWQgdG8gaW5zdGFudGlhdGU6IHskcmVhc29ufScsXHJcbiAgICBbXCJpbnZhbGlkLWFuYWx5dGljcy1jb250ZXh0XCIgLyogQW5hbHl0aWNzRXJyb3IuSU5WQUxJRF9BTkFMWVRJQ1NfQ09OVEVYVCAqL106ICdGaXJlYmFzZSBBbmFseXRpY3MgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50LiAnICtcclxuICAgICAgICAnV3JhcCBpbml0aWFsaXphdGlvbiBvZiBhbmFseXRpY3MgaW4gYW5hbHl0aWNzLmlzU3VwcG9ydGVkKCkgJyArXHJcbiAgICAgICAgJ3RvIHByZXZlbnQgaW5pdGlhbGl6YXRpb24gaW4gdW5zdXBwb3J0ZWQgZW52aXJvbm1lbnRzLiBEZXRhaWxzOiB7JGVycm9ySW5mb30nLFxyXG4gICAgW1wiaW5kZXhlZGRiLXVuYXZhaWxhYmxlXCIgLyogQW5hbHl0aWNzRXJyb3IuSU5ERVhFRERCX1VOQVZBSUxBQkxFICovXTogJ0luZGV4ZWREQiB1bmF2YWlsYWJsZSBvciByZXN0cmljdGVkIGluIHRoaXMgZW52aXJvbm1lbnQuICcgK1xyXG4gICAgICAgICdXcmFwIGluaXRpYWxpemF0aW9uIG9mIGFuYWx5dGljcyBpbiBhbmFseXRpY3MuaXNTdXBwb3J0ZWQoKSAnICtcclxuICAgICAgICAndG8gcHJldmVudCBpbml0aWFsaXphdGlvbiBpbiB1bnN1cHBvcnRlZCBlbnZpcm9ubWVudHMuIERldGFpbHM6IHskZXJyb3JJbmZvfScsXHJcbiAgICBbXCJmZXRjaC10aHJvdHRsZVwiIC8qIEFuYWx5dGljc0Vycm9yLkZFVENIX1RIUk9UVExFICovXTogJ1RoZSBjb25maWcgZmV0Y2ggcmVxdWVzdCB0aW1lZCBvdXQgd2hpbGUgaW4gYW4gZXhwb25lbnRpYWwgYmFja29mZiBzdGF0ZS4nICtcclxuICAgICAgICAnIFVuaXggdGltZXN0YW1wIGluIG1pbGxpc2Vjb25kcyB3aGVuIGZldGNoIHJlcXVlc3QgdGhyb3R0bGluZyBlbmRzOiB7JHRocm90dGxlRW5kVGltZU1pbGxpc30uJyxcclxuICAgIFtcImNvbmZpZy1mZXRjaC1mYWlsZWRcIiAvKiBBbmFseXRpY3NFcnJvci5DT05GSUdfRkVUQ0hfRkFJTEVEICovXTogJ0R5bmFtaWMgY29uZmlnIGZldGNoIGZhaWxlZDogW3skaHR0cFN0YXR1c31dIHskcmVzcG9uc2VNZXNzYWdlfScsXHJcbiAgICBbXCJuby1hcGkta2V5XCIgLyogQW5hbHl0aWNzRXJyb3IuTk9fQVBJX0tFWSAqL106ICdUaGUgXCJhcGlLZXlcIiBmaWVsZCBpcyBlbXB0eSBpbiB0aGUgbG9jYWwgRmlyZWJhc2UgY29uZmlnLiBGaXJlYmFzZSBBbmFseXRpY3MgcmVxdWlyZXMgdGhpcyBmaWVsZCB0bycgK1xyXG4gICAgICAgICdjb250YWluIGEgdmFsaWQgQVBJIGtleS4nLFxyXG4gICAgW1wibm8tYXBwLWlkXCIgLyogQW5hbHl0aWNzRXJyb3IuTk9fQVBQX0lEICovXTogJ1RoZSBcImFwcElkXCIgZmllbGQgaXMgZW1wdHkgaW4gdGhlIGxvY2FsIEZpcmViYXNlIGNvbmZpZy4gRmlyZWJhc2UgQW5hbHl0aWNzIHJlcXVpcmVzIHRoaXMgZmllbGQgdG8nICtcclxuICAgICAgICAnY29udGFpbiBhIHZhbGlkIGFwcCBJRC4nLFxyXG4gICAgW1wibm8tY2xpZW50LWlkXCIgLyogQW5hbHl0aWNzRXJyb3IuTk9fQ0xJRU5UX0lEICovXTogJ1RoZSBcImNsaWVudF9pZFwiIGZpZWxkIGlzIGVtcHR5LicsXHJcbiAgICBbXCJpbnZhbGlkLWd0YWctcmVzb3VyY2VcIiAvKiBBbmFseXRpY3NFcnJvci5JTlZBTElEX0dUQUdfUkVTT1VSQ0UgKi9dOiAnVHJ1c3RlZCBUeXBlcyBkZXRlY3RlZCBhbiBpbnZhbGlkIGd0YWcgcmVzb3VyY2U6IHskZ3RhZ1VSTH0uJ1xyXG59O1xyXG5jb25zdCBFUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeSgnYW5hbHl0aWNzJywgJ0FuYWx5dGljcycsIEVSUk9SUyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBWZXJpZmllcyBhbmQgY3JlYXRlcyBhIFRydXN0ZWRTY3JpcHRVUkwuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVHdGFnVHJ1c3RlZFR5cGVzU2NyaXB0VVJMKHVybCkge1xyXG4gICAgaWYgKCF1cmwuc3RhcnRzV2l0aChHVEFHX1VSTCkpIHtcclxuICAgICAgICBjb25zdCBlcnIgPSBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtZ3RhZy1yZXNvdXJjZVwiIC8qIEFuYWx5dGljc0Vycm9yLklOVkFMSURfR1RBR19SRVNPVVJDRSAqLywge1xyXG4gICAgICAgICAgICBndGFnVVJMOiB1cmxcclxuICAgICAgICB9KTtcclxuICAgICAgICBsb2dnZXIud2FybihlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVybDtcclxufVxyXG4vKipcclxuICogTWFrZXNoaWZ0IHBvbHlmaWxsIGZvciBQcm9taXNlLmFsbFNldHRsZWQoKS4gUmVzb2x2ZXMgd2hlbiBhbGwgcHJvbWlzZXNcclxuICogaGF2ZSBlaXRoZXIgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBwcm9taXNlcyBBcnJheSBvZiBwcm9taXNlcyB0byB3YWl0IGZvci5cclxuICovXHJcbmZ1bmN0aW9uIHByb21pc2VBbGxTZXR0bGVkKHByb21pc2VzKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMubWFwKHByb21pc2UgPT4gcHJvbWlzZS5jYXRjaChlID0+IGUpKSk7XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBUcnVzdGVkVHlwZVBvbGljeSBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIHRoZSBydWxlcyBwYXNzZWQgYXMgcG9saWN5T3B0aW9ucy5cclxuICpcclxuICogQHBhcmFtIHBvbGljeU5hbWUgQSBzdHJpbmcgY29udGFpbmluZyB0aGUgbmFtZSBvZiB0aGUgcG9saWN5XHJcbiAqIEBwYXJhbSBwb2xpY3lPcHRpb25zIE9iamVjdCBjb250YWluaW5nIGltcGxlbWVudGF0aW9ucyBvZiBpbnN0YW5jZSBtZXRob2RzIGZvciBUcnVzdGVkVHlwZXNQb2xpY3ksIHNlZSB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1RydXN0ZWRUeXBlUG9saWN5I2luc3RhbmNlX21ldGhvZHNcclxuICogfCB0aGUgVHJ1c3RlZFR5cGVQb2xpY3kgcmVmZXJlbmNlIGRvY3VtZW50YXRpb259LlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlVHJ1c3RlZFR5cGVzUG9saWN5KHBvbGljeU5hbWUsIHBvbGljeU9wdGlvbnMpIHtcclxuICAgIC8vIENyZWF0ZSBhIFRydXN0ZWRUeXBlcyBwb2xpY3kgdGhhdCB3ZSBjYW4gdXNlIGZvciB1cGRhdGluZyBzcmNcclxuICAgIC8vIHByb3BlcnRpZXNcclxuICAgIGxldCB0cnVzdGVkVHlwZXNQb2xpY3k7XHJcbiAgICBpZiAod2luZG93LnRydXN0ZWRUeXBlcykge1xyXG4gICAgICAgIHRydXN0ZWRUeXBlc1BvbGljeSA9IHdpbmRvdy50cnVzdGVkVHlwZXMuY3JlYXRlUG9saWN5KHBvbGljeU5hbWUsIHBvbGljeU9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydXN0ZWRUeXBlc1BvbGljeTtcclxufVxyXG4vKipcclxuICogSW5zZXJ0cyBndGFnIHNjcmlwdCB0YWcgaW50byB0aGUgcGFnZSB0byBhc3luY2hyb25vdXNseSBkb3dubG9hZCBndGFnLlxyXG4gKiBAcGFyYW0gZGF0YUxheWVyTmFtZSBOYW1lIG9mIGRhdGFsYXllciAobW9zdCBvZnRlbiB0aGUgZGVmYXVsdCwgXCJfZGF0YUxheWVyXCIpLlxyXG4gKi9cclxuZnVuY3Rpb24gaW5zZXJ0U2NyaXB0VGFnKGRhdGFMYXllck5hbWUsIG1lYXN1cmVtZW50SWQpIHtcclxuICAgIGNvbnN0IHRydXN0ZWRUeXBlc1BvbGljeSA9IGNyZWF0ZVRydXN0ZWRUeXBlc1BvbGljeSgnZmlyZWJhc2UtanMtc2RrLXBvbGljeScsIHtcclxuICAgICAgICBjcmVhdGVTY3JpcHRVUkw6IGNyZWF0ZUd0YWdUcnVzdGVkVHlwZXNTY3JpcHRVUkxcclxuICAgIH0pO1xyXG4gICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAvLyBXZSBhcmUgbm90IHByb3ZpZGluZyBhbiBhbmFseXRpY3NJZCBpbiB0aGUgVVJMIGJlY2F1c2UgaXQgd291bGQgdHJpZ2dlciBhIGBwYWdlX3ZpZXdgXHJcbiAgICAvLyB3aXRob3V0IGZpZC4gV2Ugd2lsbCBpbml0aWFsaXplIGdhLWlkIHVzaW5nIGd0YWcgKGNvbmZpZykgY29tbWFuZCB0b2dldGhlciB3aXRoIGZpZC5cclxuICAgIGNvbnN0IGd0YWdTY3JpcHRVUkwgPSBgJHtHVEFHX1VSTH0/bD0ke2RhdGFMYXllck5hbWV9JmlkPSR7bWVhc3VyZW1lbnRJZH1gO1xyXG4gICAgc2NyaXB0LnNyYyA9IHRydXN0ZWRUeXBlc1BvbGljeVxyXG4gICAgICAgID8gdHJ1c3RlZFR5cGVzUG9saWN5ID09PSBudWxsIHx8IHRydXN0ZWRUeXBlc1BvbGljeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdHJ1c3RlZFR5cGVzUG9saWN5LmNyZWF0ZVNjcmlwdFVSTChndGFnU2NyaXB0VVJMKVxyXG4gICAgICAgIDogZ3RhZ1NjcmlwdFVSTDtcclxuICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XHJcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbn1cclxuLyoqXHJcbiAqIEdldCByZWZlcmVuY2UgdG8sIG9yIGNyZWF0ZSwgZ2xvYmFsIGRhdGFsYXllci5cclxuICogQHBhcmFtIGRhdGFMYXllck5hbWUgTmFtZSBvZiBkYXRhbGF5ZXIgKG1vc3Qgb2Z0ZW4gdGhlIGRlZmF1bHQsIFwiX2RhdGFMYXllclwiKS5cclxuICovXHJcbmZ1bmN0aW9uIGdldE9yQ3JlYXRlRGF0YUxheWVyKGRhdGFMYXllck5hbWUpIHtcclxuICAgIC8vIENoZWNrIGZvciBleGlzdGluZyBkYXRhTGF5ZXIgYW5kIGNyZWF0ZSBpZiBuZWVkZWQuXHJcbiAgICBsZXQgZGF0YUxheWVyID0gW107XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh3aW5kb3dbZGF0YUxheWVyTmFtZV0pKSB7XHJcbiAgICAgICAgZGF0YUxheWVyID0gd2luZG93W2RhdGFMYXllck5hbWVdO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgd2luZG93W2RhdGFMYXllck5hbWVdID0gZGF0YUxheWVyO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGFMYXllcjtcclxufVxyXG4vKipcclxuICogV3JhcHBlZCBndGFnIGxvZ2ljIHdoZW4gZ3RhZyBpcyBjYWxsZWQgd2l0aCAnY29uZmlnJyBjb21tYW5kLlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0NvcmUgQmFzaWMgZ3RhZyBmdW5jdGlvbiB0aGF0IGp1c3QgYXBwZW5kcyB0byBkYXRhTGF5ZXIuXHJcbiAqIEBwYXJhbSBpbml0aWFsaXphdGlvblByb21pc2VzTWFwIE1hcCBvZiBhcHBJZHMgdG8gdGhlaXIgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMuXHJcbiAqIEBwYXJhbSBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0IEFycmF5IG9mIGR5bmFtaWMgY29uZmlnIGZldGNoIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gbWVhc3VyZW1lbnRJZFRvQXBwSWQgTWFwIG9mIEdBIG1lYXN1cmVtZW50SURzIHRvIGNvcnJlc3BvbmRpbmcgRmlyZWJhc2UgYXBwSWQuXHJcbiAqIEBwYXJhbSBtZWFzdXJlbWVudElkIEdBIE1lYXN1cmVtZW50IElEIHRvIHNldCBjb25maWcgZm9yLlxyXG4gKiBAcGFyYW0gZ3RhZ1BhcmFtcyBHdGFnIGNvbmZpZyBwYXJhbXMgdG8gc2V0LlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ3RhZ09uQ29uZmlnKGd0YWdDb3JlLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkVG9BcHBJZCwgbWVhc3VyZW1lbnRJZCwgZ3RhZ1BhcmFtcykge1xyXG4gICAgLy8gSWYgY29uZmlnIGlzIGFscmVhZHkgZmV0Y2hlZCwgd2Uga25vdyB0aGUgYXBwSWQgYW5kIGNhbiB1c2UgaXQgdG8gbG9vayB1cCB3aGF0IEZJRCBwcm9taXNlIHdlXHJcbiAgICAvLy8gYXJlIHdhaXRpbmcgZm9yLCBhbmQgd2FpdCBvbmx5IG9uIHRoYXQgb25lLlxyXG4gICAgY29uc3QgY29ycmVzcG9uZGluZ0FwcElkID0gbWVhc3VyZW1lbnRJZFRvQXBwSWRbbWVhc3VyZW1lbnRJZF07XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGlmIChjb3JyZXNwb25kaW5nQXBwSWQpIHtcclxuICAgICAgICAgICAgYXdhaXQgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFtjb3JyZXNwb25kaW5nQXBwSWRdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSWYgY29uZmlnIGlzIG5vdCBmZXRjaGVkIHlldCwgd2FpdCBmb3IgYWxsIGNvbmZpZ3MgKHdlIGRvbid0IGtub3cgd2hpY2ggb25lIHdlIG5lZWQpIGFuZFxyXG4gICAgICAgICAgICAvLyBmaW5kIHRoZSBhcHBJZCAoaWYgYW55KSBjb3JyZXNwb25kaW5nIHRvIHRoaXMgbWVhc3VyZW1lbnRJZC4gSWYgdGhlcmUgaXMgb25lLCB3YWl0IG9uXHJcbiAgICAgICAgICAgIC8vIHRoYXQgYXBwSWQncyBpbml0aWFsaXphdGlvbiBwcm9taXNlLiBJZiB0aGVyZSBpcyBub25lLCBwcm9taXNlIHJlc29sdmVzIGFuZCBndGFnXHJcbiAgICAgICAgICAgIC8vIGNhbGwgZ29lcyB0aHJvdWdoLlxyXG4gICAgICAgICAgICBjb25zdCBkeW5hbWljQ29uZmlnUmVzdWx0cyA9IGF3YWl0IHByb21pc2VBbGxTZXR0bGVkKGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QpO1xyXG4gICAgICAgICAgICBjb25zdCBmb3VuZENvbmZpZyA9IGR5bmFtaWNDb25maWdSZXN1bHRzLmZpbmQoY29uZmlnID0+IGNvbmZpZy5tZWFzdXJlbWVudElkID09PSBtZWFzdXJlbWVudElkKTtcclxuICAgICAgICAgICAgaWYgKGZvdW5kQ29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2ZvdW5kQ29uZmlnLmFwcElkXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgbG9nZ2VyLmVycm9yKGUpO1xyXG4gICAgfVxyXG4gICAgZ3RhZ0NvcmUoXCJjb25maWdcIiAvKiBHdGFnQ29tbWFuZC5DT05GSUcgKi8sIG1lYXN1cmVtZW50SWQsIGd0YWdQYXJhbXMpO1xyXG59XHJcbi8qKlxyXG4gKiBXcmFwcGVkIGd0YWcgbG9naWMgd2hlbiBndGFnIGlzIGNhbGxlZCB3aXRoICdldmVudCcgY29tbWFuZC5cclxuICpcclxuICogQHBhcmFtIGd0YWdDb3JlIEJhc2ljIGd0YWcgZnVuY3Rpb24gdGhhdCBqdXN0IGFwcGVuZHMgdG8gZGF0YUxheWVyLlxyXG4gKiBAcGFyYW0gaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCBNYXAgb2YgYXBwSWRzIHRvIHRoZWlyIGluaXRpYWxpemF0aW9uIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCBBcnJheSBvZiBkeW5hbWljIGNvbmZpZyBmZXRjaCBwcm9taXNlcy5cclxuICogQHBhcmFtIG1lYXN1cmVtZW50SWQgR0EgTWVhc3VyZW1lbnQgSUQgdG8gbG9nIGV2ZW50IHRvLlxyXG4gKiBAcGFyYW0gZ3RhZ1BhcmFtcyBQYXJhbXMgdG8gbG9nIHdpdGggdGhpcyBldmVudC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGd0YWdPbkV2ZW50KGd0YWdDb3JlLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkLCBndGFnUGFyYW1zKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGxldCBpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yID0gW107XHJcbiAgICAgICAgLy8gSWYgdGhlcmUncyBhICdzZW5kX3RvJyBwYXJhbSwgY2hlY2sgaWYgYW55IElEIHNwZWNpZmllZCBtYXRjaGVzXHJcbiAgICAgICAgLy8gYW4gaW5pdGlhbGl6ZUlkcygpIHByb21pc2Ugd2UgYXJlIHdhaXRpbmcgZm9yLlxyXG4gICAgICAgIGlmIChndGFnUGFyYW1zICYmIGd0YWdQYXJhbXNbJ3NlbmRfdG8nXSkge1xyXG4gICAgICAgICAgICBsZXQgZ2FTZW5kVG9MaXN0ID0gZ3RhZ1BhcmFtc1snc2VuZF90byddO1xyXG4gICAgICAgICAgICAvLyBNYWtlIGl0IGFuIGFycmF5IGlmIGlzIGlzbid0LCBzbyBpdCBjYW4gYmUgZGVhbHQgd2l0aCB0aGUgc2FtZSB3YXkuXHJcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShnYVNlbmRUb0xpc3QpKSB7XHJcbiAgICAgICAgICAgICAgICBnYVNlbmRUb0xpc3QgPSBbZ2FTZW5kVG9MaXN0XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBDaGVja2luZyAnc2VuZF90bycgZmllbGRzIHJlcXVpcmVzIGhhdmluZyBhbGwgbWVhc3VyZW1lbnQgSUQgcmVzdWx0cyBiYWNrIGZyb21cclxuICAgICAgICAgICAgLy8gdGhlIGR5bmFtaWMgY29uZmlnIGZldGNoLlxyXG4gICAgICAgICAgICBjb25zdCBkeW5hbWljQ29uZmlnUmVzdWx0cyA9IGF3YWl0IHByb21pc2VBbGxTZXR0bGVkKGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNlbmRUb0lkIG9mIGdhU2VuZFRvTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQW55IGZldGNoZWQgZHluYW1pYyBtZWFzdXJlbWVudCBJRCB0aGF0IG1hdGNoZXMgdGhpcyAnc2VuZF90bycgSURcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kQ29uZmlnID0gZHluYW1pY0NvbmZpZ1Jlc3VsdHMuZmluZChjb25maWcgPT4gY29uZmlnLm1lYXN1cmVtZW50SWQgPT09IHNlbmRUb0lkKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluaXRpYWxpemF0aW9uUHJvbWlzZSA9IGZvdW5kQ29uZmlnICYmIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbZm91bmRDb25maWcuYXBwSWRdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluaXRpYWxpemF0aW9uUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IucHVzaChpbml0aWFsaXphdGlvblByb21pc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRm91bmQgYW4gaXRlbSBpbiAnc2VuZF90bycgdGhhdCBpcyBub3QgYXNzb2NpYXRlZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRpcmVjdGx5IHdpdGggYW4gRklELCBwb3NzaWJseSBhIGdyb3VwLiAgRW1wdHkgdGhpcyBhcnJheSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBleGl0IHRoZSBsb29wIGVhcmx5LCBhbmQgbGV0IGl0IGdldCBwb3B1bGF0ZWQgYmVsb3cuXHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRoaXMgd2lsbCBiZSB1bnBvcHVsYXRlZCBpZiB0aGVyZSB3YXMgbm8gJ3NlbmRfdG8nIGZpZWxkICwgb3JcclxuICAgICAgICAvLyBpZiBub3QgYWxsIGVudHJpZXMgaW4gdGhlICdzZW5kX3RvJyBmaWVsZCBjb3VsZCBiZSBtYXBwZWQgdG9cclxuICAgICAgICAvLyBhIEZJRC4gSW4gdGhlc2UgY2FzZXMsIHdhaXQgb24gYWxsIHBlbmRpbmcgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMuXHJcbiAgICAgICAgaWYgKGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IgPSBPYmplY3QudmFsdWVzKGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSdW4gY29yZSBndGFnIGZ1bmN0aW9uIHdpdGggYXJncyBhZnRlciBhbGwgcmVsZXZhbnQgaW5pdGlhbGl6YXRpb25cclxuICAgICAgICAvLyBwcm9taXNlcyBoYXZlIGJlZW4gcmVzb2x2ZWQuXHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvcik7XHJcbiAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgaHR0cDovL2IvMTQxMzcwNDQ5IC0gdGhpcmQgYXJndW1lbnQgY2Fubm90IGJlIHVuZGVmaW5lZC5cclxuICAgICAgICBndGFnQ29yZShcImV2ZW50XCIgLyogR3RhZ0NvbW1hbmQuRVZFTlQgKi8sIG1lYXN1cmVtZW50SWQsIGd0YWdQYXJhbXMgfHwge30pO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBsb2dnZXIuZXJyb3IoZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFdyYXBzIGEgc3RhbmRhcmQgZ3RhZyBmdW5jdGlvbiB3aXRoIGV4dHJhIGNvZGUgdG8gd2FpdCBmb3IgY29tcGxldGlvbiBvZlxyXG4gKiByZWxldmFudCBpbml0aWFsaXphdGlvbiBwcm9taXNlcyBiZWZvcmUgc2VuZGluZyByZXF1ZXN0cy5cclxuICpcclxuICogQHBhcmFtIGd0YWdDb3JlIEJhc2ljIGd0YWcgZnVuY3Rpb24gdGhhdCBqdXN0IGFwcGVuZHMgdG8gZGF0YUxheWVyLlxyXG4gKiBAcGFyYW0gaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCBNYXAgb2YgYXBwSWRzIHRvIHRoZWlyIGluaXRpYWxpemF0aW9uIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCBBcnJheSBvZiBkeW5hbWljIGNvbmZpZyBmZXRjaCBwcm9taXNlcy5cclxuICogQHBhcmFtIG1lYXN1cmVtZW50SWRUb0FwcElkIE1hcCBvZiBHQSBtZWFzdXJlbWVudElEcyB0byBjb3JyZXNwb25kaW5nIEZpcmViYXNlIGFwcElkLlxyXG4gKi9cclxuZnVuY3Rpb24gd3JhcEd0YWcoZ3RhZ0NvcmUsIFxyXG4vKipcclxuICogQWxsb3dzIHdyYXBwZWQgZ3RhZyBjYWxscyB0byB3YWl0IG9uIHdoaWNoZXZlciBpbnRpYWxpemF0aW9uIHByb21pc2VzIGFyZSByZXF1aXJlZCxcclxuICogZGVwZW5kaW5nIG9uIHRoZSBjb250ZW50cyBvZiB0aGUgZ3RhZyBwYXJhbXMnIGBzZW5kX3RvYCBmaWVsZCwgaWYgYW55LlxyXG4gKi9cclxuaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCwgXHJcbi8qKlxyXG4gKiBXcmFwcGVkIGd0YWcgY2FsbHMgc29tZXRpbWVzIHJlcXVpcmUgYWxsIGR5bmFtaWMgY29uZmlnIGZldGNoZXMgdG8gaGF2ZSByZXR1cm5lZFxyXG4gKiBiZWZvcmUgZGV0ZXJtaW5pbmcgd2hhdCBpbml0aWFsaXphdGlvbiBwcm9taXNlcyAod2hpY2ggaW5jbHVkZSBGSURzKSB0byB3YWl0IGZvci5cclxuICovXHJcbmR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIFxyXG4vKipcclxuICogV3JhcHBlZCBndGFnIGNvbmZpZyBjYWxscyBjYW4gbmFycm93IGRvd24gd2hpY2ggaW5pdGlhbGl6YXRpb24gcHJvbWlzZSAod2l0aCBGSUQpXHJcbiAqIHRvIHdhaXQgZm9yIGlmIHRoZSBtZWFzdXJlbWVudElkIGlzIGFscmVhZHkgZmV0Y2hlZCwgYnkgZ2V0dGluZyB0aGUgY29ycmVzcG9uZGluZyBhcHBJZCxcclxuICogd2hpY2ggaXMgdGhlIGtleSBmb3IgdGhlIGluaXRpYWxpemF0aW9uIHByb21pc2VzIG1hcC5cclxuICovXHJcbm1lYXN1cmVtZW50SWRUb0FwcElkKSB7XHJcbiAgICAvKipcclxuICAgICAqIFdyYXBwZXIgYXJvdW5kIGd0YWcgdGhhdCBlbnN1cmVzIEZJRCBpcyBzZW50IHdpdGggZ3RhZyBjYWxscy5cclxuICAgICAqIEBwYXJhbSBjb21tYW5kIEd0YWcgY29tbWFuZCB0eXBlLlxyXG4gICAgICogQHBhcmFtIGlkT3JOYW1lT3JQYXJhbXMgTWVhc3VyZW1lbnQgSUQgaWYgY29tbWFuZCBpcyBFVkVOVC9DT05GSUcsIHBhcmFtcyBpZiBjb21tYW5kIGlzIFNFVC5cclxuICAgICAqIEBwYXJhbSBndGFnUGFyYW1zIFBhcmFtcyBpZiBldmVudCBpcyBFVkVOVC9DT05GSUcuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGZ1bmN0aW9uIGd0YWdXcmFwcGVyKGNvbW1hbmQsIC4uLmFyZ3MpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBJZiBldmVudCwgY2hlY2sgdGhhdCByZWxldmFudCBpbml0aWFsaXphdGlvbiBwcm9taXNlcyBoYXZlIGNvbXBsZXRlZC5cclxuICAgICAgICAgICAgaWYgKGNvbW1hbmQgPT09IFwiZXZlbnRcIiAvKiBHdGFnQ29tbWFuZC5FVkVOVCAqLykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW21lYXN1cmVtZW50SWQsIGd0YWdQYXJhbXNdID0gYXJncztcclxuICAgICAgICAgICAgICAgIC8vIElmIEVWRU5ULCBzZWNvbmQgYXJnIG11c3QgYmUgbWVhc3VyZW1lbnRJZC5cclxuICAgICAgICAgICAgICAgIGF3YWl0IGd0YWdPbkV2ZW50KGd0YWdDb3JlLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkLCBndGFnUGFyYW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjb21tYW5kID09PSBcImNvbmZpZ1wiIC8qIEd0YWdDb21tYW5kLkNPTkZJRyAqLykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW21lYXN1cmVtZW50SWQsIGd0YWdQYXJhbXNdID0gYXJncztcclxuICAgICAgICAgICAgICAgIC8vIElmIENPTkZJRywgc2Vjb25kIGFyZyBtdXN0IGJlIG1lYXN1cmVtZW50SWQuXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBndGFnT25Db25maWcoZ3RhZ0NvcmUsIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAsIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIG1lYXN1cmVtZW50SWRUb0FwcElkLCBtZWFzdXJlbWVudElkLCBndGFnUGFyYW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjb21tYW5kID09PSBcImNvbnNlbnRcIiAvKiBHdGFnQ29tbWFuZC5DT05TRU5UICovKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbZ3RhZ1BhcmFtc10gPSBhcmdzO1xyXG4gICAgICAgICAgICAgICAgZ3RhZ0NvcmUoXCJjb25zZW50XCIgLyogR3RhZ0NvbW1hbmQuQ09OU0VOVCAqLywgJ3VwZGF0ZScsIGd0YWdQYXJhbXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbW1hbmQgPT09IFwiZ2V0XCIgLyogR3RhZ0NvbW1hbmQuR0VUICovKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbbWVhc3VyZW1lbnRJZCwgZmllbGROYW1lLCBjYWxsYmFja10gPSBhcmdzO1xyXG4gICAgICAgICAgICAgICAgZ3RhZ0NvcmUoXCJnZXRcIiAvKiBHdGFnQ29tbWFuZC5HRVQgKi8sIG1lYXN1cmVtZW50SWQsIGZpZWxkTmFtZSwgY2FsbGJhY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbW1hbmQgPT09IFwic2V0XCIgLyogR3RhZ0NvbW1hbmQuU0VUICovKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbY3VzdG9tUGFyYW1zXSA9IGFyZ3M7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiBTRVQsIHNlY29uZCBhcmcgbXVzdCBiZSBwYXJhbXMuXHJcbiAgICAgICAgICAgICAgICBndGFnQ29yZShcInNldFwiIC8qIEd0YWdDb21tYW5kLlNFVCAqLywgY3VzdG9tUGFyYW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGd0YWdDb3JlKGNvbW1hbmQsIC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZ3RhZ1dyYXBwZXI7XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgZ2xvYmFsIGd0YWcgZnVuY3Rpb24gb3Igd3JhcHMgZXhpc3Rpbmcgb25lIGlmIGZvdW5kLlxyXG4gKiBUaGlzIHdyYXBwZWQgZnVuY3Rpb24gYXR0YWNoZXMgRmlyZWJhc2UgaW5zdGFuY2UgSUQgKEZJRCkgdG8gZ3RhZyAnY29uZmlnJyBhbmRcclxuICogJ2V2ZW50JyBjYWxscyB0aGF0IGJlbG9uZyB0byB0aGUgR0FJRCBhc3NvY2lhdGVkIHdpdGggdGhpcyBGaXJlYmFzZSBpbnN0YW5jZS5cclxuICpcclxuICogQHBhcmFtIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAgTWFwIG9mIGFwcElkcyB0byB0aGVpciBpbml0aWFsaXphdGlvbiBwcm9taXNlcy5cclxuICogQHBhcmFtIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QgQXJyYXkgb2YgZHluYW1pYyBjb25maWcgZmV0Y2ggcHJvbWlzZXMuXHJcbiAqIEBwYXJhbSBtZWFzdXJlbWVudElkVG9BcHBJZCBNYXAgb2YgR0EgbWVhc3VyZW1lbnRJRHMgdG8gY29ycmVzcG9uZGluZyBGaXJlYmFzZSBhcHBJZC5cclxuICogQHBhcmFtIGRhdGFMYXllck5hbWUgTmFtZSBvZiBnbG9iYWwgR0EgZGF0YWxheWVyIGFycmF5LlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uTmFtZSBOYW1lIG9mIGdsb2JhbCBndGFnIGZ1bmN0aW9uIChcImd0YWdcIiBpZiBub3QgdXNlci1zcGVjaWZpZWQpLlxyXG4gKi9cclxuZnVuY3Rpb24gd3JhcE9yQ3JlYXRlR3RhZyhpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkVG9BcHBJZCwgZGF0YUxheWVyTmFtZSwgZ3RhZ0Z1bmN0aW9uTmFtZSkge1xyXG4gICAgLy8gQ3JlYXRlIGEgYmFzaWMgY29yZSBndGFnIGZ1bmN0aW9uXHJcbiAgICBsZXQgZ3RhZ0NvcmUgPSBmdW5jdGlvbiAoLi4uX2FyZ3MpIHtcclxuICAgICAgICAvLyBNdXN0IHB1c2ggSUFyZ3VtZW50cyBvYmplY3QsIG5vdCBhbiBhcnJheS5cclxuICAgICAgICB3aW5kb3dbZGF0YUxheWVyTmFtZV0ucHVzaChhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuICAgIC8vIFJlcGxhY2UgaXQgd2l0aCBleGlzdGluZyBvbmUgaWYgZm91bmRcclxuICAgIGlmICh3aW5kb3dbZ3RhZ0Z1bmN0aW9uTmFtZV0gJiZcclxuICAgICAgICB0eXBlb2Ygd2luZG93W2d0YWdGdW5jdGlvbk5hbWVdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGd0YWdDb3JlID0gd2luZG93W2d0YWdGdW5jdGlvbk5hbWVdO1xyXG4gICAgfVxyXG4gICAgd2luZG93W2d0YWdGdW5jdGlvbk5hbWVdID0gd3JhcEd0YWcoZ3RhZ0NvcmUsIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAsIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIG1lYXN1cmVtZW50SWRUb0FwcElkKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ3RhZ0NvcmUsXHJcbiAgICAgICAgd3JhcHBlZEd0YWc6IHdpbmRvd1tndGFnRnVuY3Rpb25OYW1lXVxyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyB0aGUgc2NyaXB0IHRhZyBpbiB0aGUgRE9NIG1hdGNoaW5nIGJvdGggdGhlIGd0YWcgdXJsIHBhdHRlcm5cclxuICogYW5kIHRoZSBwcm92aWRlZCBkYXRhIGxheWVyIG5hbWUuXHJcbiAqL1xyXG5mdW5jdGlvbiBmaW5kR3RhZ1NjcmlwdE9uUGFnZShkYXRhTGF5ZXJOYW1lKSB7XHJcbiAgICBjb25zdCBzY3JpcHRUYWdzID0gd2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKTtcclxuICAgIGZvciAoY29uc3QgdGFnIG9mIE9iamVjdC52YWx1ZXMoc2NyaXB0VGFncykpIHtcclxuICAgICAgICBpZiAodGFnLnNyYyAmJlxyXG4gICAgICAgICAgICB0YWcuc3JjLmluY2x1ZGVzKEdUQUdfVVJMKSAmJlxyXG4gICAgICAgICAgICB0YWcuc3JjLmluY2x1ZGVzKGRhdGFMYXllck5hbWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0YWc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEJhY2tvZmYgZmFjdG9yIGZvciA1MDMgZXJyb3JzLCB3aGljaCB3ZSB3YW50IHRvIGJlIGNvbnNlcnZhdGl2ZSBhYm91dFxyXG4gKiB0byBhdm9pZCBvdmVybG9hZGluZyBzZXJ2ZXJzLiBFYWNoIHJldHJ5IGludGVydmFsIHdpbGwgYmVcclxuICogQkFTRV9JTlRFUlZBTF9NSUxMSVMgKiBMT05HX1JFVFJZX0ZBQ1RPUiBeIHJldHJ5Q291bnQsIHNvIHRoZSBzZWNvbmQgb25lXHJcbiAqIHdpbGwgYmUgfjMwIHNlY29uZHMgKHdpdGggZnV6emluZykuXHJcbiAqL1xyXG5jb25zdCBMT05HX1JFVFJZX0ZBQ1RPUiA9IDMwO1xyXG4vKipcclxuICogQmFzZSB3YWl0IGludGVydmFsIHRvIG11bHRpcGxpZWQgYnkgYmFja29mZkZhY3Rvcl5iYWNrb2ZmQ291bnQuXHJcbiAqL1xyXG5jb25zdCBCQVNFX0lOVEVSVkFMX01JTExJUyA9IDEwMDA7XHJcbi8qKlxyXG4gKiBTdHViYmFibGUgcmV0cnkgZGF0YSBzdG9yYWdlIGNsYXNzLlxyXG4gKi9cclxuY2xhc3MgUmV0cnlEYXRhIHtcclxuICAgIGNvbnN0cnVjdG9yKHRocm90dGxlTWV0YWRhdGEgPSB7fSwgaW50ZXJ2YWxNaWxsaXMgPSBCQVNFX0lOVEVSVkFMX01JTExJUykge1xyXG4gICAgICAgIHRoaXMudGhyb3R0bGVNZXRhZGF0YSA9IHRocm90dGxlTWV0YWRhdGE7XHJcbiAgICAgICAgdGhpcy5pbnRlcnZhbE1pbGxpcyA9IGludGVydmFsTWlsbGlzO1xyXG4gICAgfVxyXG4gICAgZ2V0VGhyb3R0bGVNZXRhZGF0YShhcHBJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRocm90dGxlTWV0YWRhdGFbYXBwSWRdO1xyXG4gICAgfVxyXG4gICAgc2V0VGhyb3R0bGVNZXRhZGF0YShhcHBJZCwgbWV0YWRhdGEpIHtcclxuICAgICAgICB0aGlzLnRocm90dGxlTWV0YWRhdGFbYXBwSWRdID0gbWV0YWRhdGE7XHJcbiAgICB9XHJcbiAgICBkZWxldGVUaHJvdHRsZU1ldGFkYXRhKGFwcElkKSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMudGhyb3R0bGVNZXRhZGF0YVthcHBJZF07XHJcbiAgICB9XHJcbn1cclxuY29uc3QgZGVmYXVsdFJldHJ5RGF0YSA9IG5ldyBSZXRyeURhdGEoKTtcclxuLyoqXHJcbiAqIFNldCBHRVQgcmVxdWVzdCBoZWFkZXJzLlxyXG4gKiBAcGFyYW0gYXBpS2V5IEFwcCBBUEkga2V5LlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0SGVhZGVycyhhcGlLZXkpIHtcclxuICAgIHJldHVybiBuZXcgSGVhZGVycyh7XHJcbiAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgJ3gtZ29vZy1hcGkta2V5JzogYXBpS2V5XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogRmV0Y2hlcyBkeW5hbWljIGNvbmZpZyBmcm9tIGJhY2tlbmQuXHJcbiAqIEBwYXJhbSBhcHAgRmlyZWJhc2UgYXBwIHRvIGZldGNoIGNvbmZpZyBmb3IuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBmZXRjaER5bmFtaWNDb25maWcoYXBwRmllbGRzKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCB7IGFwcElkLCBhcGlLZXkgfSA9IGFwcEZpZWxkcztcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICBoZWFkZXJzOiBnZXRIZWFkZXJzKGFwaUtleSlcclxuICAgIH07XHJcbiAgICBjb25zdCBhcHBVcmwgPSBEWU5BTUlDX0NPTkZJR19VUkwucmVwbGFjZSgne2FwcC1pZH0nLCBhcHBJZCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwcFVybCwgcmVxdWVzdCk7XHJcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDAgJiYgcmVzcG9uc2Uuc3RhdHVzICE9PSAzMDQpIHtcclxuICAgICAgICBsZXQgZXJyb3JNZXNzYWdlID0gJyc7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gVHJ5IHRvIGdldCBhbnkgZXJyb3IgbWVzc2FnZSB0ZXh0IGZyb20gc2VydmVyIHJlc3BvbnNlLlxyXG4gICAgICAgICAgICBjb25zdCBqc29uUmVzcG9uc2UgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcclxuICAgICAgICAgICAgaWYgKChfYSA9IGpzb25SZXNwb25zZS5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGpzb25SZXNwb25zZS5lcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfaWdub3JlZCkgeyB9XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJjb25maWctZmV0Y2gtZmFpbGVkXCIgLyogQW5hbHl0aWNzRXJyb3IuQ09ORklHX0ZFVENIX0ZBSUxFRCAqLywge1xyXG4gICAgICAgICAgICBodHRwU3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXHJcbiAgICAgICAgICAgIHJlc3BvbnNlTWVzc2FnZTogZXJyb3JNZXNzYWdlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG59XHJcbi8qKlxyXG4gKiBGZXRjaGVzIGR5bmFtaWMgY29uZmlnIGZyb20gYmFja2VuZCwgcmV0cnlpbmcgaWYgZmFpbGVkLlxyXG4gKiBAcGFyYW0gYXBwIEZpcmViYXNlIGFwcCB0byBmZXRjaCBjb25maWcgZm9yLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hEeW5hbWljQ29uZmlnV2l0aFJldHJ5KGFwcCwgXHJcbi8vIHJldHJ5RGF0YSBhbmQgdGltZW91dE1pbGxpcyBhcmUgcGFyYW1ldGVyaXplZCB0byBhbGxvdyBwYXNzaW5nIGEgZGlmZmVyZW50IHZhbHVlIGZvciB0ZXN0aW5nLlxyXG5yZXRyeURhdGEgPSBkZWZhdWx0UmV0cnlEYXRhLCB0aW1lb3V0TWlsbGlzKSB7XHJcbiAgICBjb25zdCB7IGFwcElkLCBhcGlLZXksIG1lYXN1cmVtZW50SWQgfSA9IGFwcC5vcHRpb25zO1xyXG4gICAgaWYgKCFhcHBJZCkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBwLWlkXCIgLyogQW5hbHl0aWNzRXJyb3IuTk9fQVBQX0lEICovKTtcclxuICAgIH1cclxuICAgIGlmICghYXBpS2V5KSB7XHJcbiAgICAgICAgaWYgKG1lYXN1cmVtZW50SWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIG1lYXN1cmVtZW50SWQsXHJcbiAgICAgICAgICAgICAgICBhcHBJZFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwaS1rZXlcIiAvKiBBbmFseXRpY3NFcnJvci5OT19BUElfS0VZICovKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHRocm90dGxlTWV0YWRhdGEgPSByZXRyeURhdGEuZ2V0VGhyb3R0bGVNZXRhZGF0YShhcHBJZCkgfHwge1xyXG4gICAgICAgIGJhY2tvZmZDb3VudDogMCxcclxuICAgICAgICB0aHJvdHRsZUVuZFRpbWVNaWxsaXM6IERhdGUubm93KClcclxuICAgIH07XHJcbiAgICBjb25zdCBzaWduYWwgPSBuZXcgQW5hbHl0aWNzQWJvcnRTaWduYWwoKTtcclxuICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIC8vIE5vdGUgYSB2ZXJ5IGxvdyBkZWxheSwgZWcgPCAxMG1zLCBjYW4gZWxhcHNlIGJlZm9yZSBsaXN0ZW5lcnMgYXJlIGluaXRpYWxpemVkLlxyXG4gICAgICAgIHNpZ25hbC5hYm9ydCgpO1xyXG4gICAgfSwgdGltZW91dE1pbGxpcyAhPT0gdW5kZWZpbmVkID8gdGltZW91dE1pbGxpcyA6IEZFVENIX1RJTUVPVVRfTUlMTElTKTtcclxuICAgIHJldHVybiBhdHRlbXB0RmV0Y2hEeW5hbWljQ29uZmlnV2l0aFJldHJ5KHsgYXBwSWQsIGFwaUtleSwgbWVhc3VyZW1lbnRJZCB9LCB0aHJvdHRsZU1ldGFkYXRhLCBzaWduYWwsIHJldHJ5RGF0YSk7XHJcbn1cclxuLyoqXHJcbiAqIFJ1bnMgb25lIHJldHJ5IGF0dGVtcHQuXHJcbiAqIEBwYXJhbSBhcHBGaWVsZHMgTmVjZXNzYXJ5IGFwcCBjb25maWcgZmllbGRzLlxyXG4gKiBAcGFyYW0gdGhyb3R0bGVNZXRhZGF0YSBPbmdvaW5nIG1ldGFkYXRhIHRvIGRldGVybWluZSB0aHJvdHRsaW5nIHRpbWVzLlxyXG4gKiBAcGFyYW0gc2lnbmFsIEFib3J0IHNpZ25hbC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGF0dGVtcHRGZXRjaER5bmFtaWNDb25maWdXaXRoUmV0cnkoYXBwRmllbGRzLCB7IHRocm90dGxlRW5kVGltZU1pbGxpcywgYmFja29mZkNvdW50IH0sIHNpZ25hbCwgcmV0cnlEYXRhID0gZGVmYXVsdFJldHJ5RGF0YSAvLyBmb3IgdGVzdGluZ1xyXG4pIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IHsgYXBwSWQsIG1lYXN1cmVtZW50SWQgfSA9IGFwcEZpZWxkcztcclxuICAgIC8vIFN0YXJ0cyB3aXRoIGEgKHBvdGVudGlhbGx5IHplcm8pIHRpbWVvdXQgdG8gc3VwcG9ydCByZXN1bXB0aW9uIGZyb20gc3RvcmVkIHN0YXRlLlxyXG4gICAgLy8gRW5zdXJlcyB0aGUgdGhyb3R0bGUgZW5kIHRpbWUgaXMgaG9ub3JlZCBpZiB0aGUgbGFzdCBhdHRlbXB0IHRpbWVkIG91dC5cclxuICAgIC8vIE5vdGUgdGhlIFNESyB3aWxsIG5ldmVyIG1ha2UgYSByZXF1ZXN0IGlmIHRoZSBmZXRjaCB0aW1lb3V0IGV4cGlyZXMgYXQgdGhpcyBwb2ludC5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgc2V0QWJvcnRhYmxlVGltZW91dChzaWduYWwsIHRocm90dGxlRW5kVGltZU1pbGxpcyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChtZWFzdXJlbWVudElkKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGBUaW1lZCBvdXQgZmV0Y2hpbmcgdGhpcyBGaXJlYmFzZSBhcHAncyBtZWFzdXJlbWVudCBJRCBmcm9tIHRoZSBzZXJ2ZXIuYCArXHJcbiAgICAgICAgICAgICAgICBgIEZhbGxpbmcgYmFjayB0byB0aGUgbWVhc3VyZW1lbnQgSUQgJHttZWFzdXJlbWVudElkfWAgK1xyXG4gICAgICAgICAgICAgICAgYCBwcm92aWRlZCBpbiB0aGUgXCJtZWFzdXJlbWVudElkXCIgZmllbGQgaW4gdGhlIGxvY2FsIEZpcmViYXNlIGNvbmZpZy4gWyR7ZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLm1lc3NhZ2V9XWApO1xyXG4gICAgICAgICAgICByZXR1cm4geyBhcHBJZCwgbWVhc3VyZW1lbnRJZCB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoRHluYW1pY0NvbmZpZyhhcHBGaWVsZHMpO1xyXG4gICAgICAgIC8vIE5vdGUgdGhlIFNESyBvbmx5IGNsZWFycyB0aHJvdHRsZSBzdGF0ZSBpZiByZXNwb25zZSBpcyBzdWNjZXNzIG9yIG5vbi1yZXRyaWFibGUuXHJcbiAgICAgICAgcmV0cnlEYXRhLmRlbGV0ZVRocm90dGxlTWV0YWRhdGEoYXBwSWQpO1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBlO1xyXG4gICAgICAgIGlmICghaXNSZXRyaWFibGVFcnJvcihlcnJvcikpIHtcclxuICAgICAgICAgICAgcmV0cnlEYXRhLmRlbGV0ZVRocm90dGxlTWV0YWRhdGEoYXBwSWQpO1xyXG4gICAgICAgICAgICBpZiAobWVhc3VyZW1lbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oYEZhaWxlZCB0byBmZXRjaCB0aGlzIEZpcmViYXNlIGFwcCdzIG1lYXN1cmVtZW50IElEIGZyb20gdGhlIHNlcnZlci5gICtcclxuICAgICAgICAgICAgICAgICAgICBgIEZhbGxpbmcgYmFjayB0byB0aGUgbWVhc3VyZW1lbnQgSUQgJHttZWFzdXJlbWVudElkfWAgK1xyXG4gICAgICAgICAgICAgICAgICAgIGAgcHJvdmlkZWQgaW4gdGhlIFwibWVhc3VyZW1lbnRJZFwiIGZpZWxkIGluIHRoZSBsb2NhbCBGaXJlYmFzZSBjb25maWcuIFske2Vycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5tZXNzYWdlfV1gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IGFwcElkLCBtZWFzdXJlbWVudElkIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGJhY2tvZmZNaWxsaXMgPSBOdW1iZXIoKF9hID0gZXJyb3IgPT09IG51bGwgfHwgZXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9yLmN1c3RvbURhdGEpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5odHRwU3RhdHVzKSA9PT0gNTAzXHJcbiAgICAgICAgICAgID8gY2FsY3VsYXRlQmFja29mZk1pbGxpcyhiYWNrb2ZmQ291bnQsIHJldHJ5RGF0YS5pbnRlcnZhbE1pbGxpcywgTE9OR19SRVRSWV9GQUNUT1IpXHJcbiAgICAgICAgICAgIDogY2FsY3VsYXRlQmFja29mZk1pbGxpcyhiYWNrb2ZmQ291bnQsIHJldHJ5RGF0YS5pbnRlcnZhbE1pbGxpcyk7XHJcbiAgICAgICAgLy8gSW5jcmVtZW50cyBiYWNrb2ZmIHN0YXRlLlxyXG4gICAgICAgIGNvbnN0IHRocm90dGxlTWV0YWRhdGEgPSB7XHJcbiAgICAgICAgICAgIHRocm90dGxlRW5kVGltZU1pbGxpczogRGF0ZS5ub3coKSArIGJhY2tvZmZNaWxsaXMsXHJcbiAgICAgICAgICAgIGJhY2tvZmZDb3VudDogYmFja29mZkNvdW50ICsgMVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gUGVyc2lzdHMgc3RhdGUuXHJcbiAgICAgICAgcmV0cnlEYXRhLnNldFRocm90dGxlTWV0YWRhdGEoYXBwSWQsIHRocm90dGxlTWV0YWRhdGEpO1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgQ2FsbGluZyBhdHRlbXB0RmV0Y2ggYWdhaW4gaW4gJHtiYWNrb2ZmTWlsbGlzfSBtaWxsaXNgKTtcclxuICAgICAgICByZXR1cm4gYXR0ZW1wdEZldGNoRHluYW1pY0NvbmZpZ1dpdGhSZXRyeShhcHBGaWVsZHMsIHRocm90dGxlTWV0YWRhdGEsIHNpZ25hbCwgcmV0cnlEYXRhKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU3VwcG9ydHMgd2FpdGluZyBvbiBhIGJhY2tvZmYgYnk6XHJcbiAqXHJcbiAqIDx1bD5cclxuICogICA8bGk+UHJvbWlzaWZ5aW5nIHNldFRpbWVvdXQsIHNvIHdlIGNhbiBzZXQgYSB0aW1lb3V0IGluIG91ciBQcm9taXNlIGNoYWluPC9saT5cclxuICogICA8bGk+TGlzdGVuaW5nIG9uIGEgc2lnbmFsIGJ1cyBmb3IgYWJvcnQgZXZlbnRzLCBqdXN0IGxpa2UgdGhlIEZldGNoIEFQSTwvbGk+XHJcbiAqICAgPGxpPkZhaWxpbmcgaW4gdGhlIHNhbWUgd2F5IHRoZSBGZXRjaCBBUEkgZmFpbHMsIHNvIHRpbWluZyBvdXQgYSBsaXZlIHJlcXVlc3QgYW5kIGEgdGhyb3R0bGVkXHJcbiAqICAgICAgIHJlcXVlc3QgYXBwZWFyIHRoZSBzYW1lLjwvbGk+XHJcbiAqIDwvdWw+XHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmcuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRBYm9ydGFibGVUaW1lb3V0KHNpZ25hbCwgdGhyb3R0bGVFbmRUaW1lTWlsbGlzKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIC8vIERlcml2ZXMgYmFja29mZiBmcm9tIGdpdmVuIGVuZCB0aW1lLCBub3JtYWxpemluZyBuZWdhdGl2ZSBudW1iZXJzIHRvIHplcm8uXHJcbiAgICAgICAgY29uc3QgYmFja29mZk1pbGxpcyA9IE1hdGgubWF4KHRocm90dGxlRW5kVGltZU1pbGxpcyAtIERhdGUubm93KCksIDApO1xyXG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KHJlc29sdmUsIGJhY2tvZmZNaWxsaXMpO1xyXG4gICAgICAgIC8vIEFkZHMgbGlzdGVuZXIsIHJhdGhlciB0aGFuIHNldHMgb25hYm9ydCwgYmVjYXVzZSBzaWduYWwgaXMgYSBzaGFyZWQgb2JqZWN0LlxyXG4gICAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCgpID0+IHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBjb21wbGV0ZXMgYmVmb3JlIHRoaXMgdGltZW91dCwgdGhlIHJlamVjdGlvbiBoYXMgbm8gZWZmZWN0LlxyXG4gICAgICAgICAgICByZWplY3QoRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJmZXRjaC10aHJvdHRsZVwiIC8qIEFuYWx5dGljc0Vycm9yLkZFVENIX1RIUk9UVExFICovLCB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdHRsZUVuZFRpbWVNaWxsaXNcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUge0BsaW5rIEVycm9yfSBpbmRpY2F0ZXMgYSBmZXRjaCByZXF1ZXN0IG1heSBzdWNjZWVkIGxhdGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNSZXRyaWFibGVFcnJvcihlKSB7XHJcbiAgICBpZiAoIShlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikgfHwgIWUuY3VzdG9tRGF0YSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8vIFVzZXMgc3RyaW5nIGluZGV4IGRlZmluZWQgYnkgRXJyb3JEYXRhLCB3aGljaCBGaXJlYmFzZUVycm9yIGltcGxlbWVudHMuXHJcbiAgICBjb25zdCBodHRwU3RhdHVzID0gTnVtYmVyKGUuY3VzdG9tRGF0YVsnaHR0cFN0YXR1cyddKTtcclxuICAgIHJldHVybiAoaHR0cFN0YXR1cyA9PT0gNDI5IHx8XHJcbiAgICAgICAgaHR0cFN0YXR1cyA9PT0gNTAwIHx8XHJcbiAgICAgICAgaHR0cFN0YXR1cyA9PT0gNTAzIHx8XHJcbiAgICAgICAgaHR0cFN0YXR1cyA9PT0gNTA0KTtcclxufVxyXG4vKipcclxuICogU2hpbXMgYSBtaW5pbWFsIEFib3J0U2lnbmFsIChjb3BpZWQgZnJvbSBSZW1vdGUgQ29uZmlnKS5cclxuICpcclxuICogPHA+QWJvcnRDb250cm9sbGVyJ3MgQWJvcnRTaWduYWwgY29udmVuaWVudGx5IGRlY291cGxlcyBmZXRjaCB0aW1lb3V0IGxvZ2ljIGZyb20gb3RoZXIgYXNwZWN0c1xyXG4gKiBvZiBuZXR3b3JraW5nLCBzdWNoIGFzIHJldHJpZXMuIEZpcmViYXNlIGRvZXNuJ3QgdXNlIEFib3J0Q29udHJvbGxlciBlbm91Z2ggdG8ganVzdGlmeSBhXHJcbiAqIHBvbHlmaWxsIHJlY29tbWVuZGF0aW9uLCBsaWtlIHdlIGRvIHdpdGggdGhlIEZldGNoIEFQSSwgYnV0IHRoaXMgbWluaW1hbCBzaGltIGNhbiBlYXNpbHkgYmVcclxuICogc3dhcHBlZCBvdXQgaWYvd2hlbiB3ZSBkby5cclxuICovXHJcbmNsYXNzIEFuYWx5dGljc0Fib3J0U2lnbmFsIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gW107XHJcbiAgICB9XHJcbiAgICBhZGRFdmVudExpc3RlbmVyKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XHJcbiAgICB9XHJcbiAgICBhYm9ydCgpIHtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyKCkpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBFdmVudCBwYXJhbWV0ZXJzIHRvIHNldCBvbiAnZ3RhZycgZHVyaW5nIGluaXRpYWxpemF0aW9uLlxyXG4gKi9cclxubGV0IGRlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0O1xyXG4vKipcclxuICogTG9ncyBhbiBhbmFseXRpY3MgZXZlbnQgdGhyb3VnaCB0aGUgRmlyZWJhc2UgU0RLLlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBldmVudE5hbWUgR29vZ2xlIEFuYWx5dGljcyBldmVudCBuYW1lLCBjaG9vc2UgZnJvbSBzdGFuZGFyZCBsaXN0IG9yIHVzZSBhIGN1c3RvbSBzdHJpbmcuXHJcbiAqIEBwYXJhbSBldmVudFBhcmFtcyBBbmFseXRpY3MgZXZlbnQgcGFyYW1ldGVycy5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGxvZ0V2ZW50JDEoZ3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2UsIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2xvYmFsKSB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwiZXZlbnRcIiAvKiBHdGFnQ29tbWFuZC5FVkVOVCAqLywgZXZlbnROYW1lLCBldmVudFBhcmFtcyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBjb25zdCBwYXJhbXMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGV2ZW50UGFyYW1zKSwgeyAnc2VuZF90byc6IG1lYXN1cmVtZW50SWQgfSk7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwiZXZlbnRcIiAvKiBHdGFnQ29tbWFuZC5FVkVOVCAqLywgZXZlbnROYW1lLCBwYXJhbXMpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBTZXQgc2NyZWVuX25hbWUgcGFyYW1ldGVyIGZvciB0aGlzIEdvb2dsZSBBbmFseXRpY3MgSUQuXHJcbiAqXHJcbiAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgbG9nRXZlbnR9IHdpdGggYGV2ZW50TmFtZWAgYXMgJ3NjcmVlbl92aWV3JyBhbmQgYWRkIHJlbGV2YW50IGBldmVudFBhcmFtc2AuXHJcbiAqIFNlZSB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvYW5hbHl0aWNzL3NjcmVlbnZpZXdzIHwgVHJhY2sgU2NyZWVudmlld3N9LlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBzY3JlZW5OYW1lIFNjcmVlbiBuYW1lIHN0cmluZyB0byBzZXQuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZXRDdXJyZW50U2NyZWVuJDEoZ3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2UsIHNjcmVlbk5hbWUsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2xvYmFsKSB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwic2V0XCIgLyogR3RhZ0NvbW1hbmQuU0VUICovLCB7ICdzY3JlZW5fbmFtZSc6IHNjcmVlbk5hbWUgfSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBndGFnRnVuY3Rpb24oXCJjb25maWdcIiAvKiBHdGFnQ29tbWFuZC5DT05GSUcgKi8sIG1lYXN1cmVtZW50SWQsIHtcclxuICAgICAgICAgICAgdXBkYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAnc2NyZWVuX25hbWUnOiBzY3JlZW5OYW1lXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFNldCB1c2VyX2lkIHBhcmFtZXRlciBmb3IgdGhpcyBHb29nbGUgQW5hbHl0aWNzIElELlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBpZCBVc2VyIElEIHN0cmluZyB0byBzZXRcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNldFVzZXJJZCQxKGd0YWdGdW5jdGlvbiwgaW5pdGlhbGl6YXRpb25Qcm9taXNlLCBpZCwgb3B0aW9ucykge1xyXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5nbG9iYWwpIHtcclxuICAgICAgICBndGFnRnVuY3Rpb24oXCJzZXRcIiAvKiBHdGFnQ29tbWFuZC5TRVQgKi8sIHsgJ3VzZXJfaWQnOiBpZCB9KTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBtZWFzdXJlbWVudElkID0gYXdhaXQgaW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgICAgIGd0YWdGdW5jdGlvbihcImNvbmZpZ1wiIC8qIEd0YWdDb21tYW5kLkNPTkZJRyAqLywgbWVhc3VyZW1lbnRJZCwge1xyXG4gICAgICAgICAgICB1cGRhdGU6IHRydWUsXHJcbiAgICAgICAgICAgICd1c2VyX2lkJzogaWRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2V0IGFsbCBvdGhlciB1c2VyIHByb3BlcnRpZXMgb3RoZXIgdGhhbiB1c2VyX2lkIGFuZCBzY3JlZW5fbmFtZS5cclxuICpcclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbiBXcmFwcGVkIGd0YWcgZnVuY3Rpb24gdGhhdCB3YWl0cyBmb3IgZmlkIHRvIGJlIHNldCBiZWZvcmUgc2VuZGluZyBhbiBldmVudFxyXG4gKiBAcGFyYW0gcHJvcGVydGllcyBNYXAgb2YgdXNlciBwcm9wZXJ0aWVzIHRvIHNldFxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2V0VXNlclByb3BlcnRpZXMkMShndGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZSwgcHJvcGVydGllcywgb3B0aW9ucykge1xyXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5nbG9iYWwpIHtcclxuICAgICAgICBjb25zdCBmbGF0UHJvcGVydGllcyA9IHt9O1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHByb3BlcnRpZXMpKSB7XHJcbiAgICAgICAgICAgIC8vIHVzZSBkb3Qgbm90YXRpb24gZm9yIG1lcmdlIGJlaGF2aW9yIGluIGd0YWcuanNcclxuICAgICAgICAgICAgZmxhdFByb3BlcnRpZXNbYHVzZXJfcHJvcGVydGllcy4ke2tleX1gXSA9IHByb3BlcnRpZXNba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwic2V0XCIgLyogR3RhZ0NvbW1hbmQuU0VUICovLCBmbGF0UHJvcGVydGllcyk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBndGFnRnVuY3Rpb24oXCJjb25maWdcIiAvKiBHdGFnQ29tbWFuZC5DT05GSUcgKi8sIG1lYXN1cmVtZW50SWQsIHtcclxuICAgICAgICAgICAgdXBkYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAndXNlcl9wcm9wZXJ0aWVzJzogcHJvcGVydGllc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZXRyaWV2ZXMgYSB1bmlxdWUgR29vZ2xlIEFuYWx5dGljcyBpZGVudGlmaWVyIGZvciB0aGUgd2ViIGNsaWVudC5cclxuICogU2VlIHtAbGluayBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vZ2E0L3JlZmVyZW5jZS9jb25maWcjY2xpZW50X2lkIHwgY2xpZW50X2lkfS5cclxuICpcclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbiBXcmFwcGVkIGd0YWcgZnVuY3Rpb24gdGhhdCB3YWl0cyBmb3IgZmlkIHRvIGJlIHNldCBiZWZvcmUgc2VuZGluZyBhbiBldmVudFxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gaW50ZXJuYWxHZXRHb29nbGVBbmFseXRpY3NDbGllbnRJZChndGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZSkge1xyXG4gICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwiZ2V0XCIgLyogR3RhZ0NvbW1hbmQuR0VUICovLCBtZWFzdXJlbWVudElkLCAnY2xpZW50X2lkJywgKGNsaWVudElkKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghY2xpZW50SWQpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWNsaWVudC1pZFwiIC8qIEFuYWx5dGljc0Vycm9yLk5PX0NMSUVOVF9JRCAqLykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlc29sdmUoY2xpZW50SWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldCB3aGV0aGVyIGNvbGxlY3Rpb24gaXMgZW5hYmxlZCBmb3IgdGhpcyBJRC5cclxuICpcclxuICogQHBhcmFtIGVuYWJsZWQgSWYgdHJ1ZSwgY29sbGVjdGlvbiBpcyBlbmFibGVkIGZvciB0aGlzIElELlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2V0QW5hbHl0aWNzQ29sbGVjdGlvbkVuYWJsZWQkMShpbml0aWFsaXphdGlvblByb21pc2UsIGVuYWJsZWQpIHtcclxuICAgIGNvbnN0IG1lYXN1cmVtZW50SWQgPSBhd2FpdCBpbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICB3aW5kb3dbYGdhLWRpc2FibGUtJHttZWFzdXJlbWVudElkfWBdID0gIWVuYWJsZWQ7XHJcbn1cclxuLyoqXHJcbiAqIENvbnNlbnQgcGFyYW1ldGVycyB0byBkZWZhdWx0IHRvIGR1cmluZyAnZ3RhZycgaW5pdGlhbGl6YXRpb24uXHJcbiAqL1xyXG5sZXQgZGVmYXVsdENvbnNlbnRTZXR0aW5nc0ZvckluaXQ7XHJcbi8qKlxyXG4gKiBTZXRzIHRoZSB2YXJpYWJsZSB7QGxpbmsgZGVmYXVsdENvbnNlbnRTZXR0aW5nc0ZvckluaXR9IGZvciB1c2UgaW4gdGhlIGluaXRpYWxpemF0aW9uIG9mXHJcbiAqIGFuYWx5dGljcy5cclxuICpcclxuICogQHBhcmFtIGNvbnNlbnRTZXR0aW5ncyBNYXBzIHRoZSBhcHBsaWNhYmxlIGVuZCB1c2VyIGNvbnNlbnQgc3RhdGUgZm9yIGd0YWcuanMuXHJcbiAqL1xyXG5mdW5jdGlvbiBfc2V0Q29uc2VudERlZmF1bHRGb3JJbml0KGNvbnNlbnRTZXR0aW5ncykge1xyXG4gICAgZGVmYXVsdENvbnNlbnRTZXR0aW5nc0ZvckluaXQgPSBjb25zZW50U2V0dGluZ3M7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgdGhlIHZhcmlhYmxlIGBkZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdGAgZm9yIHVzZSBpbiB0aGUgaW5pdGlhbGl6YXRpb24gb2ZcclxuICogYW5hbHl0aWNzLlxyXG4gKlxyXG4gKiBAcGFyYW0gY3VzdG9tUGFyYW1zIEFueSBjdXN0b20gcGFyYW1zIHRoZSB1c2VyIG1heSBwYXNzIHRvIGd0YWcuanMuXHJcbiAqL1xyXG5mdW5jdGlvbiBfc2V0RGVmYXVsdEV2ZW50UGFyYW1ldGVyc0ZvckluaXQoY3VzdG9tUGFyYW1zKSB7XHJcbiAgICBkZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdCA9IGN1c3RvbVBhcmFtcztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZUluZGV4ZWREQigpIHtcclxuICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkge1xyXG4gICAgICAgIGxvZ2dlci53YXJuKEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW5kZXhlZGRiLXVuYXZhaWxhYmxlXCIgLyogQW5hbHl0aWNzRXJyb3IuSU5ERVhFRERCX1VOQVZBSUxBQkxFICovLCB7XHJcbiAgICAgICAgICAgIGVycm9ySW5mbzogJ0luZGV4ZWREQiBpcyBub3QgYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQuJ1xyXG4gICAgICAgIH0pLm1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbmRleGVkZGItdW5hdmFpbGFibGVcIiAvKiBBbmFseXRpY3NFcnJvci5JTkRFWEVEREJfVU5BVkFJTEFCTEUgKi8sIHtcclxuICAgICAgICAgICAgICAgIGVycm9ySW5mbzogZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgfSkubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vKipcclxuICogSW5pdGlhbGl6ZSB0aGUgYW5hbHl0aWNzIGluc3RhbmNlIGluIGd0YWcuanMgYnkgY2FsbGluZyBjb25maWcgY29tbWFuZCB3aXRoIGZpZC5cclxuICpcclxuICogTk9URTogV2UgY29tYmluZSBhbmFseXRpY3MgaW5pdGlhbGl6YXRpb24gYW5kIHNldHRpbmcgZmlkIHRvZ2V0aGVyIGJlY2F1c2Ugd2Ugd2FudCBmaWQgdG8gYmVcclxuICogcGFydCBvZiB0aGUgYHBhZ2Vfdmlld2AgZXZlbnQgdGhhdCdzIHNlbnQgZHVyaW5nIHRoZSBpbml0aWFsaXphdGlvblxyXG4gKiBAcGFyYW0gYXBwIEZpcmViYXNlIGFwcFxyXG4gKiBAcGFyYW0gZ3RhZ0NvcmUgVGhlIGd0YWcgZnVuY3Rpb24gdGhhdCdzIG5vdCB3cmFwcGVkLlxyXG4gKiBAcGFyYW0gZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCBBcnJheSBvZiBhbGwgZHluYW1pYyBjb25maWcgcHJvbWlzZXMuXHJcbiAqIEBwYXJhbSBtZWFzdXJlbWVudElkVG9BcHBJZCBNYXBzIG1lYXN1cmVtZW50SUQgdG8gYXBwSUQuXHJcbiAqIEBwYXJhbSBpbnN0YWxsYXRpb25zIF9GaXJlYmFzZUluc3RhbGxhdGlvbnNJbnRlcm5hbCBpbnN0YW5jZS5cclxuICpcclxuICogQHJldHVybnMgTWVhc3VyZW1lbnQgSUQuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfaW5pdGlhbGl6ZUFuYWx5dGljcyhhcHAsIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIG1lYXN1cmVtZW50SWRUb0FwcElkLCBpbnN0YWxsYXRpb25zLCBndGFnQ29yZSwgZGF0YUxheWVyTmFtZSwgb3B0aW9ucykge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgZHluYW1pY0NvbmZpZ1Byb21pc2UgPSBmZXRjaER5bmFtaWNDb25maWdXaXRoUmV0cnkoYXBwKTtcclxuICAgIC8vIE9uY2UgZmV0Y2hlZCwgbWFwIG1lYXN1cmVtZW50SWRzIHRvIGFwcElkLCBmb3IgZWFzZSBvZiBsb29rdXAgaW4gd3JhcHBlZCBndGFnIGZ1bmN0aW9uLlxyXG4gICAgZHluYW1pY0NvbmZpZ1Byb21pc2VcclxuICAgICAgICAudGhlbihjb25maWcgPT4ge1xyXG4gICAgICAgIG1lYXN1cmVtZW50SWRUb0FwcElkW2NvbmZpZy5tZWFzdXJlbWVudElkXSA9IGNvbmZpZy5hcHBJZDtcclxuICAgICAgICBpZiAoYXBwLm9wdGlvbnMubWVhc3VyZW1lbnRJZCAmJlxyXG4gICAgICAgICAgICBjb25maWcubWVhc3VyZW1lbnRJZCAhPT0gYXBwLm9wdGlvbnMubWVhc3VyZW1lbnRJZCkge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihgVGhlIG1lYXN1cmVtZW50IElEIGluIHRoZSBsb2NhbCBGaXJlYmFzZSBjb25maWcgKCR7YXBwLm9wdGlvbnMubWVhc3VyZW1lbnRJZH0pYCArXHJcbiAgICAgICAgICAgICAgICBgIGRvZXMgbm90IG1hdGNoIHRoZSBtZWFzdXJlbWVudCBJRCBmZXRjaGVkIGZyb20gdGhlIHNlcnZlciAoJHtjb25maWcubWVhc3VyZW1lbnRJZH0pLmAgK1xyXG4gICAgICAgICAgICAgICAgYCBUbyBlbnN1cmUgYW5hbHl0aWNzIGV2ZW50cyBhcmUgYWx3YXlzIHNlbnQgdG8gdGhlIGNvcnJlY3QgQW5hbHl0aWNzIHByb3BlcnR5LGAgK1xyXG4gICAgICAgICAgICAgICAgYCB1cGRhdGUgdGhlYCArXHJcbiAgICAgICAgICAgICAgICBgIG1lYXN1cmVtZW50IElEIGZpZWxkIGluIHRoZSBsb2NhbCBjb25maWcgb3IgcmVtb3ZlIGl0IGZyb20gdGhlIGxvY2FsIGNvbmZpZy5gKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlID0+IGxvZ2dlci5lcnJvcihlKSk7XHJcbiAgICAvLyBBZGQgdG8gbGlzdCB0byB0cmFjayBzdGF0ZSBvZiBhbGwgZHluYW1pYyBjb25maWcgcHJvbWlzZXMuXHJcbiAgICBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LnB1c2goZHluYW1pY0NvbmZpZ1Byb21pc2UpO1xyXG4gICAgY29uc3QgZmlkUHJvbWlzZSA9IHZhbGlkYXRlSW5kZXhlZERCKCkudGhlbihlbnZJc1ZhbGlkID0+IHtcclxuICAgICAgICBpZiAoZW52SXNWYWxpZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gaW5zdGFsbGF0aW9ucy5nZXRJZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGNvbnN0IFtkeW5hbWljQ29uZmlnLCBmaWRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgIGR5bmFtaWNDb25maWdQcm9taXNlLFxyXG4gICAgICAgIGZpZFByb21pc2VcclxuICAgIF0pO1xyXG4gICAgLy8gRGV0ZWN0IGlmIHVzZXIgaGFzIGFscmVhZHkgcHV0IHRoZSBndGFnIDxzY3JpcHQ+IHRhZyBvbiB0aGlzIHBhZ2Ugd2l0aCB0aGUgcGFzc2VkIGluXHJcbiAgICAvLyBkYXRhIGxheWVyIG5hbWUuXHJcbiAgICBpZiAoIWZpbmRHdGFnU2NyaXB0T25QYWdlKGRhdGFMYXllck5hbWUpKSB7XHJcbiAgICAgICAgaW5zZXJ0U2NyaXB0VGFnKGRhdGFMYXllck5hbWUsIGR5bmFtaWNDb25maWcubWVhc3VyZW1lbnRJZCk7XHJcbiAgICB9XHJcbiAgICAvLyBEZXRlY3RzIGlmIHRoZXJlIGFyZSBjb25zZW50IHNldHRpbmdzIHRoYXQgbmVlZCB0byBiZSBjb25maWd1cmVkLlxyXG4gICAgaWYgKGRlZmF1bHRDb25zZW50U2V0dGluZ3NGb3JJbml0KSB7XHJcbiAgICAgICAgZ3RhZ0NvcmUoXCJjb25zZW50XCIgLyogR3RhZ0NvbW1hbmQuQ09OU0VOVCAqLywgJ2RlZmF1bHQnLCBkZWZhdWx0Q29uc2VudFNldHRpbmdzRm9ySW5pdCk7XHJcbiAgICAgICAgX3NldENvbnNlbnREZWZhdWx0Rm9ySW5pdCh1bmRlZmluZWQpO1xyXG4gICAgfVxyXG4gICAgLy8gVGhpcyBjb21tYW5kIGluaXRpYWxpemVzIGd0YWcuanMgYW5kIG9ubHkgbmVlZHMgdG8gYmUgY2FsbGVkIG9uY2UgZm9yIHRoZSBlbnRpcmUgd2ViIGFwcCxcclxuICAgIC8vIGJ1dCBzaW5jZSBpdCBpcyBpZGVtcG90ZW50LCB3ZSBjYW4gY2FsbCBpdCBtdWx0aXBsZSB0aW1lcy5cclxuICAgIC8vIFdlIGtlZXAgaXQgdG9nZXRoZXIgd2l0aCBvdGhlciBpbml0aWFsaXphdGlvbiBsb2dpYyBmb3IgYmV0dGVyIGNvZGUgc3RydWN0dXJlLlxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgIGd0YWdDb3JlKCdqcycsIG5ldyBEYXRlKCkpO1xyXG4gICAgLy8gVXNlciBjb25maWcgYWRkZWQgZmlyc3QuIFdlIGRvbid0IHdhbnQgdXNlcnMgdG8gYWNjaWRlbnRhbGx5IG92ZXJ3cml0ZVxyXG4gICAgLy8gYmFzZSBGaXJlYmFzZSBjb25maWcgcHJvcGVydGllcy5cclxuICAgIGNvbnN0IGNvbmZpZ1Byb3BlcnRpZXMgPSAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuY29uZmlnKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fTtcclxuICAgIC8vIGd1YXJkIGFnYWluc3QgZGV2ZWxvcGVycyBhY2NpZGVudGFsbHkgc2V0dGluZyBwcm9wZXJ0aWVzIHdpdGggcHJlZml4IGBmaXJlYmFzZV9gXHJcbiAgICBjb25maWdQcm9wZXJ0aWVzW09SSUdJTl9LRVldID0gJ2ZpcmViYXNlJztcclxuICAgIGNvbmZpZ1Byb3BlcnRpZXMudXBkYXRlID0gdHJ1ZTtcclxuICAgIGlmIChmaWQgIT0gbnVsbCkge1xyXG4gICAgICAgIGNvbmZpZ1Byb3BlcnRpZXNbR0FfRklEX0tFWV0gPSBmaWQ7XHJcbiAgICB9XHJcbiAgICAvLyBJdCBzaG91bGQgYmUgdGhlIGZpcnN0IGNvbmZpZyBjb21tYW5kIGNhbGxlZCBvbiB0aGlzIEdBLUlEXHJcbiAgICAvLyBJbml0aWFsaXplIHRoaXMgR0EtSUQgYW5kIHNldCBGSUQgb24gaXQgdXNpbmcgdGhlIGd0YWcgY29uZmlnIEFQSS5cclxuICAgIC8vIE5vdGU6IFRoaXMgd2lsbCB0cmlnZ2VyIGEgcGFnZV92aWV3IGV2ZW50IHVubGVzcyAnc2VuZF9wYWdlX3ZpZXcnIGlzIHNldCB0byBmYWxzZSBpblxyXG4gICAgLy8gYGNvbmZpZ1Byb3BlcnRpZXNgLlxyXG4gICAgZ3RhZ0NvcmUoXCJjb25maWdcIiAvKiBHdGFnQ29tbWFuZC5DT05GSUcgKi8sIGR5bmFtaWNDb25maWcubWVhc3VyZW1lbnRJZCwgY29uZmlnUHJvcGVydGllcyk7XHJcbiAgICAvLyBEZXRlY3RzIGlmIHRoZXJlIGlzIGRhdGEgdGhhdCB3aWxsIGJlIHNldCBvbiBldmVyeSBldmVudCBsb2dnZWQgZnJvbSB0aGUgU0RLLlxyXG4gICAgaWYgKGRlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0KSB7XHJcbiAgICAgICAgZ3RhZ0NvcmUoXCJzZXRcIiAvKiBHdGFnQ29tbWFuZC5TRVQgKi8sIGRlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0KTtcclxuICAgICAgICBfc2V0RGVmYXVsdEV2ZW50UGFyYW1ldGVyc0ZvckluaXQodW5kZWZpbmVkKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkeW5hbWljQ29uZmlnLm1lYXN1cmVtZW50SWQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFuYWx5dGljcyBTZXJ2aWNlIGNsYXNzLlxyXG4gKi9cclxuY2xhc3MgQW5hbHl0aWNzU2VydmljZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgIH1cclxuICAgIF9kZWxldGUoKSB7XHJcbiAgICAgICAgZGVsZXRlIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbdGhpcy5hcHAub3B0aW9ucy5hcHBJZF07XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBNYXBzIGFwcElkIHRvIGZ1bGwgaW5pdGlhbGl6YXRpb24gcHJvbWlzZS4gV3JhcHBlZCBndGFnIGNhbGxzIG11c3Qgd2FpdCBvblxyXG4gKiBhbGwgb3Igc29tZSBvZiB0aGVzZSwgZGVwZW5kaW5nIG9uIHRoZSBjYWxsJ3MgYHNlbmRfdG9gIHBhcmFtIGFuZCB0aGUgc3RhdHVzXHJcbiAqIG9mIHRoZSBkeW5hbWljIGNvbmZpZyBmZXRjaGVzIChzZWUgYmVsb3cpLlxyXG4gKi9cclxubGV0IGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAgPSB7fTtcclxuLyoqXHJcbiAqIExpc3Qgb2YgZHluYW1pYyBjb25maWcgZmV0Y2ggcHJvbWlzZXMuIEluIGNlcnRhaW4gY2FzZXMsIHdyYXBwZWQgZ3RhZyBjYWxsc1xyXG4gKiB3YWl0IG9uIGFsbCB0aGVzZSB0byBiZSBjb21wbGV0ZSBpbiBvcmRlciB0byBkZXRlcm1pbmUgaWYgaXQgY2FuIHNlbGVjdGl2ZWx5XHJcbiAqIHdhaXQgZm9yIG9ubHkgY2VydGFpbiBpbml0aWFsaXphdGlvbiAoRklEKSBwcm9taXNlcyBvciBpZiBpdCBtdXN0IHdhaXQgZm9yIGFsbC5cclxuICovXHJcbmxldCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0ID0gW107XHJcbi8qKlxyXG4gKiBNYXBzIGZldGNoZWQgbWVhc3VyZW1lbnRJZHMgdG8gYXBwSWQuIFBvcHVsYXRlZCB3aGVuIHRoZSBhcHAncyBkeW5hbWljIGNvbmZpZ1xyXG4gKiBmZXRjaCBjb21wbGV0ZXMuIElmIGFscmVhZHkgcG9wdWxhdGVkLCBndGFnIGNvbmZpZyBjYWxscyBjYW4gdXNlIHRoaXMgdG9cclxuICogc2VsZWN0aXZlbHkgd2FpdCBmb3Igb25seSB0aGlzIGFwcCdzIGluaXRpYWxpemF0aW9uIHByb21pc2UgKEZJRCkgaW5zdGVhZCBvZiBhbGxcclxuICogaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMuXHJcbiAqL1xyXG5jb25zdCBtZWFzdXJlbWVudElkVG9BcHBJZCA9IHt9O1xyXG4vKipcclxuICogTmFtZSBmb3Igd2luZG93IGdsb2JhbCBkYXRhIGxheWVyIGFycmF5IHVzZWQgYnkgR0E6IGRlZmF1bHRzIHRvICdkYXRhTGF5ZXInLlxyXG4gKi9cclxubGV0IGRhdGFMYXllck5hbWUgPSAnZGF0YUxheWVyJztcclxuLyoqXHJcbiAqIE5hbWUgZm9yIHdpbmRvdyBnbG9iYWwgZ3RhZyBmdW5jdGlvbiB1c2VkIGJ5IEdBOiBkZWZhdWx0cyB0byAnZ3RhZycuXHJcbiAqL1xyXG5sZXQgZ3RhZ05hbWUgPSAnZ3RhZyc7XHJcbi8qKlxyXG4gKiBSZXByb2R1Y3Rpb24gb2Ygc3RhbmRhcmQgZ3RhZyBmdW5jdGlvbiBvciByZWZlcmVuY2UgdG8gZXhpc3RpbmdcclxuICogZ3RhZyBmdW5jdGlvbiBvbiB3aW5kb3cgb2JqZWN0LlxyXG4gKi9cclxubGV0IGd0YWdDb3JlRnVuY3Rpb247XHJcbi8qKlxyXG4gKiBXcmFwcGVyIGFyb3VuZCBndGFnIGZ1bmN0aW9uIHRoYXQgZW5zdXJlcyBGSUQgaXMgc2VudCB3aXRoIGFsbFxyXG4gKiByZWxldmFudCBldmVudCBhbmQgY29uZmlnIGNhbGxzLlxyXG4gKi9cclxubGV0IHdyYXBwZWRHdGFnRnVuY3Rpb247XHJcbi8qKlxyXG4gKiBGbGFnIHRvIGVuc3VyZSBwYWdlIGluaXRpYWxpemF0aW9uIHN0ZXBzIChjcmVhdGlvbiBvciB3cmFwcGluZyBvZlxyXG4gKiBkYXRhTGF5ZXIgYW5kIGd0YWcgc2NyaXB0KSBhcmUgb25seSBydW4gb25jZSBwZXIgcGFnZSBsb2FkLlxyXG4gKi9cclxubGV0IGdsb2JhbEluaXREb25lID0gZmFsc2U7XHJcbi8qKlxyXG4gKiBDb25maWd1cmVzIEZpcmViYXNlIEFuYWx5dGljcyB0byB1c2UgY3VzdG9tIGBndGFnYCBvciBgZGF0YUxheWVyYCBuYW1lcy5cclxuICogSW50ZW5kZWQgdG8gYmUgdXNlZCBpZiBgZ3RhZy5qc2Agc2NyaXB0IGhhcyBiZWVuIGluc3RhbGxlZCBvblxyXG4gKiB0aGlzIHBhZ2UgaW5kZXBlbmRlbnRseSBvZiBGaXJlYmFzZSBBbmFseXRpY3MsIGFuZCBpcyB1c2luZyBub24tZGVmYXVsdFxyXG4gKiBuYW1lcyBmb3IgZWl0aGVyIHRoZSBgZ3RhZ2AgZnVuY3Rpb24gb3IgZm9yIGBkYXRhTGF5ZXJgLlxyXG4gKiBNdXN0IGJlIGNhbGxlZCBiZWZvcmUgY2FsbGluZyBgZ2V0QW5hbHl0aWNzKClgIG9yIGl0IHdvbid0XHJcbiAqIGhhdmUgYW55IGVmZmVjdC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKlxyXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEN1c3RvbSBndGFnIGFuZCBkYXRhTGF5ZXIgbmFtZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXR0aW5ncyhvcHRpb25zKSB7XHJcbiAgICBpZiAoZ2xvYmFsSW5pdERvbmUpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBbmFseXRpY3NFcnJvci5BTFJFQURZX0lOSVRJQUxJWkVEICovKTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmRhdGFMYXllck5hbWUpIHtcclxuICAgICAgICBkYXRhTGF5ZXJOYW1lID0gb3B0aW9ucy5kYXRhTGF5ZXJOYW1lO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMuZ3RhZ05hbWUpIHtcclxuICAgICAgICBndGFnTmFtZSA9IG9wdGlvbnMuZ3RhZ05hbWU7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgdHJ1ZSBpZiBubyBlbnZpcm9ubWVudCBtaXNtYXRjaCBpcyBmb3VuZC5cclxuICogSWYgZW52aXJvbm1lbnQgbWlzbWF0Y2hlcyBhcmUgZm91bmQsIHRocm93cyBhbiBJTlZBTElEX0FOQUxZVElDU19DT05URVhUXHJcbiAqIGVycm9yIHRoYXQgYWxzbyBsaXN0cyBkZXRhaWxzIGZvciBlYWNoIG1pc21hdGNoIGZvdW5kLlxyXG4gKi9cclxuZnVuY3Rpb24gd2Fybk9uQnJvd3NlckNvbnRleHRNaXNtYXRjaCgpIHtcclxuICAgIGNvbnN0IG1pc21hdGNoZWRFbnZNZXNzYWdlcyA9IFtdO1xyXG4gICAgaWYgKGlzQnJvd3NlckV4dGVuc2lvbigpKSB7XHJcbiAgICAgICAgbWlzbWF0Y2hlZEVudk1lc3NhZ2VzLnB1c2goJ1RoaXMgaXMgYSBicm93c2VyIGV4dGVuc2lvbiBlbnZpcm9ubWVudC4nKTtcclxuICAgIH1cclxuICAgIGlmICghYXJlQ29va2llc0VuYWJsZWQoKSkge1xyXG4gICAgICAgIG1pc21hdGNoZWRFbnZNZXNzYWdlcy5wdXNoKCdDb29raWVzIGFyZSBub3QgYXZhaWxhYmxlLicpO1xyXG4gICAgfVxyXG4gICAgaWYgKG1pc21hdGNoZWRFbnZNZXNzYWdlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZGV0YWlscyA9IG1pc21hdGNoZWRFbnZNZXNzYWdlc1xyXG4gICAgICAgICAgICAubWFwKChtZXNzYWdlLCBpbmRleCkgPT4gYCgke2luZGV4ICsgMX0pICR7bWVzc2FnZX1gKVxyXG4gICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgICAgIGNvbnN0IGVyciA9IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC1hbmFseXRpY3MtY29udGV4dFwiIC8qIEFuYWx5dGljc0Vycm9yLklOVkFMSURfQU5BTFlUSUNTX0NPTlRFWFQgKi8sIHtcclxuICAgICAgICAgICAgZXJyb3JJbmZvOiBkZXRhaWxzXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbG9nZ2VyLndhcm4oZXJyLm1lc3NhZ2UpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBBbmFseXRpY3MgaW5zdGFuY2UgZmFjdG9yeS5cclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBmYWN0b3J5KGFwcCwgaW5zdGFsbGF0aW9ucywgb3B0aW9ucykge1xyXG4gICAgd2Fybk9uQnJvd3NlckNvbnRleHRNaXNtYXRjaCgpO1xyXG4gICAgY29uc3QgYXBwSWQgPSBhcHAub3B0aW9ucy5hcHBJZDtcclxuICAgIGlmICghYXBwSWQpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwcC1pZFwiIC8qIEFuYWx5dGljc0Vycm9yLk5PX0FQUF9JRCAqLyk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWFwcC5vcHRpb25zLmFwaUtleSkge1xyXG4gICAgICAgIGlmIChhcHAub3B0aW9ucy5tZWFzdXJlbWVudElkKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGBUaGUgXCJhcGlLZXlcIiBmaWVsZCBpcyBlbXB0eSBpbiB0aGUgbG9jYWwgRmlyZWJhc2UgY29uZmlnLiBUaGlzIGlzIG5lZWRlZCB0byBmZXRjaCB0aGUgbGF0ZXN0YCArXHJcbiAgICAgICAgICAgICAgICBgIG1lYXN1cmVtZW50IElEIGZvciB0aGlzIEZpcmViYXNlIGFwcC4gRmFsbGluZyBiYWNrIHRvIHRoZSBtZWFzdXJlbWVudCBJRCAke2FwcC5vcHRpb25zLm1lYXN1cmVtZW50SWR9YCArXHJcbiAgICAgICAgICAgICAgICBgIHByb3ZpZGVkIGluIHRoZSBcIm1lYXN1cmVtZW50SWRcIiBmaWVsZCBpbiB0aGUgbG9jYWwgRmlyZWJhc2UgY29uZmlnLmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcGkta2V5XCIgLyogQW5hbHl0aWNzRXJyb3IuTk9fQVBJX0tFWSAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYXBwSWRdICE9IG51bGwpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFscmVhZHktZXhpc3RzXCIgLyogQW5hbHl0aWNzRXJyb3IuQUxSRUFEWV9FWElTVFMgKi8sIHtcclxuICAgICAgICAgICAgaWQ6IGFwcElkXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWdsb2JhbEluaXREb25lKSB7XHJcbiAgICAgICAgLy8gU3RlcHMgaGVyZSBzaG91bGQgb25seSBiZSBkb25lIG9uY2UgcGVyIHBhZ2U6IGNyZWF0aW9uIG9yIHdyYXBwaW5nXHJcbiAgICAgICAgLy8gb2YgZGF0YUxheWVyIGFuZCBnbG9iYWwgZ3RhZyBmdW5jdGlvbi5cclxuICAgICAgICBnZXRPckNyZWF0ZURhdGFMYXllcihkYXRhTGF5ZXJOYW1lKTtcclxuICAgICAgICBjb25zdCB7IHdyYXBwZWRHdGFnLCBndGFnQ29yZSB9ID0gd3JhcE9yQ3JlYXRlR3RhZyhpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkVG9BcHBJZCwgZGF0YUxheWVyTmFtZSwgZ3RhZ05hbWUpO1xyXG4gICAgICAgIHdyYXBwZWRHdGFnRnVuY3Rpb24gPSB3cmFwcGVkR3RhZztcclxuICAgICAgICBndGFnQ29yZUZ1bmN0aW9uID0gZ3RhZ0NvcmU7XHJcbiAgICAgICAgZ2xvYmFsSW5pdERvbmUgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgLy8gQXN5bmMgYnV0IG5vbi1ibG9ja2luZy5cclxuICAgIC8vIFRoaXMgbWFwIHJlZmxlY3RzIHRoZSBjb21wbGV0aW9uIHN0YXRlIG9mIGFsbCBwcm9taXNlcyBmb3IgZWFjaCBhcHBJZC5cclxuICAgIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYXBwSWRdID0gX2luaXRpYWxpemVBbmFseXRpY3MoYXBwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkVG9BcHBJZCwgaW5zdGFsbGF0aW9ucywgZ3RhZ0NvcmVGdW5jdGlvbiwgZGF0YUxheWVyTmFtZSwgb3B0aW9ucyk7XHJcbiAgICBjb25zdCBhbmFseXRpY3NJbnN0YW5jZSA9IG5ldyBBbmFseXRpY3NTZXJ2aWNlKGFwcCk7XHJcbiAgICByZXR1cm4gYW5hbHl0aWNzSW5zdGFuY2U7XHJcbn1cblxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xyXG4vKipcclxuICogUmV0dXJucyBhbiB7QGxpbmsgQW5hbHl0aWNzfSBpbnN0YW5jZSBmb3IgdGhlIGdpdmVuIGFwcC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSB0byB1c2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBbmFseXRpY3MoYXBwID0gZ2V0QXBwKCkpIHtcclxuICAgIGFwcCA9IGdldE1vZHVsYXJJbnN0YW5jZShhcHApO1xyXG4gICAgLy8gRGVwZW5kZW5jaWVzXHJcbiAgICBjb25zdCBhbmFseXRpY3NQcm92aWRlciA9IF9nZXRQcm92aWRlcihhcHAsIEFOQUxZVElDU19UWVBFKTtcclxuICAgIGlmIChhbmFseXRpY3NQcm92aWRlci5pc0luaXRpYWxpemVkKCkpIHtcclxuICAgICAgICByZXR1cm4gYW5hbHl0aWNzUHJvdmlkZXIuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5pdGlhbGl6ZUFuYWx5dGljcyhhcHApO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIHtAbGluayBBbmFseXRpY3N9IGluc3RhbmNlIGZvciB0aGUgZ2l2ZW4gYXBwLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IHRvIHVzZS5cclxuICovXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVBbmFseXRpY3MoYXBwLCBvcHRpb25zID0ge30pIHtcclxuICAgIC8vIERlcGVuZGVuY2llc1xyXG4gICAgY29uc3QgYW5hbHl0aWNzUHJvdmlkZXIgPSBfZ2V0UHJvdmlkZXIoYXBwLCBBTkFMWVRJQ1NfVFlQRSk7XHJcbiAgICBpZiAoYW5hbHl0aWNzUHJvdmlkZXIuaXNJbml0aWFsaXplZCgpKSB7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbnN0YW5jZSA9IGFuYWx5dGljc1Byb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIGlmIChkZWVwRXF1YWwob3B0aW9ucywgYW5hbHl0aWNzUHJvdmlkZXIuZ2V0T3B0aW9ucygpKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdJbnN0YW5jZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYWxyZWFkeS1pbml0aWFsaXplZFwiIC8qIEFuYWx5dGljc0Vycm9yLkFMUkVBRFlfSU5JVElBTElaRUQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGFuYWx5dGljc0luc3RhbmNlID0gYW5hbHl0aWNzUHJvdmlkZXIuaW5pdGlhbGl6ZSh7IG9wdGlvbnMgfSk7XHJcbiAgICByZXR1cm4gYW5hbHl0aWNzSW5zdGFuY2U7XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgaXMgYSBwdWJsaWMgc3RhdGljIG1ldGhvZCBwcm92aWRlZCB0byB1c2VycyB0aGF0IHdyYXBzIGZvdXIgZGlmZmVyZW50IGNoZWNrczpcclxuICpcclxuICogMS4gQ2hlY2sgaWYgaXQncyBub3QgYSBicm93c2VyIGV4dGVuc2lvbiBlbnZpcm9ubWVudC5cclxuICogMi4gQ2hlY2sgaWYgY29va2llcyBhcmUgZW5hYmxlZCBpbiBjdXJyZW50IGJyb3dzZXIuXHJcbiAqIDMuIENoZWNrIGlmIEluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIgZW52aXJvbm1lbnQuXHJcbiAqIDQuIENoZWNrIGlmIHRoZSBjdXJyZW50IGJyb3dzZXIgY29udGV4dCBpcyB2YWxpZCBmb3IgdXNpbmcgYEluZGV4ZWREQi5vcGVuKClgLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBpc1N1cHBvcnRlZCgpIHtcclxuICAgIGlmIChpc0Jyb3dzZXJFeHRlbnNpb24oKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICghYXJlQ29va2llc0VuYWJsZWQoKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgaXNEQk9wZW5hYmxlID0gYXdhaXQgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpO1xyXG4gICAgICAgIHJldHVybiBpc0RCT3BlbmFibGU7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVzZSBndGFnIGBjb25maWdgIGNvbW1hbmQgdG8gc2V0IGBzY3JlZW5fbmFtZWAuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBsb2dFdmVudH0gd2l0aCBgZXZlbnROYW1lYCBhcyAnc2NyZWVuX3ZpZXcnIGFuZCBhZGQgcmVsZXZhbnQgYGV2ZW50UGFyYW1zYC5cclxuICogU2VlIHtAbGluayBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9hbmFseXRpY3Mvc2NyZWVudmlld3MgfCBUcmFjayBTY3JlZW52aWV3c30uXHJcbiAqXHJcbiAqIEBwYXJhbSBhbmFseXRpY3NJbnN0YW5jZSAtIFRoZSB7QGxpbmsgQW5hbHl0aWNzfSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHNjcmVlbk5hbWUgLSBTY3JlZW4gbmFtZSB0byBzZXQuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRDdXJyZW50U2NyZWVuKGFuYWx5dGljc0luc3RhbmNlLCBzY3JlZW5OYW1lLCBvcHRpb25zKSB7XHJcbiAgICBhbmFseXRpY3NJbnN0YW5jZSA9IGdldE1vZHVsYXJJbnN0YW5jZShhbmFseXRpY3NJbnN0YW5jZSk7XHJcbiAgICBzZXRDdXJyZW50U2NyZWVuJDEod3JhcHBlZEd0YWdGdW5jdGlvbiwgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFthbmFseXRpY3NJbnN0YW5jZS5hcHAub3B0aW9ucy5hcHBJZF0sIHNjcmVlbk5hbWUsIG9wdGlvbnMpLmNhdGNoKGUgPT4gbG9nZ2VyLmVycm9yKGUpKTtcclxufVxyXG4vKipcclxuICogUmV0cmlldmVzIGEgdW5pcXVlIEdvb2dsZSBBbmFseXRpY3MgaWRlbnRpZmllciBmb3IgdGhlIHdlYiBjbGllbnQuXHJcbiAqIFNlZSB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2dhNC9yZWZlcmVuY2UvY29uZmlnI2NsaWVudF9pZCB8IGNsaWVudF9pZH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gdG8gdXNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0R29vZ2xlQW5hbHl0aWNzQ2xpZW50SWQoYW5hbHl0aWNzSW5zdGFuY2UpIHtcclxuICAgIGFuYWx5dGljc0luc3RhbmNlID0gZ2V0TW9kdWxhckluc3RhbmNlKGFuYWx5dGljc0luc3RhbmNlKTtcclxuICAgIHJldHVybiBpbnRlcm5hbEdldEdvb2dsZUFuYWx5dGljc0NsaWVudElkKHdyYXBwZWRHdGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYW5hbHl0aWNzSW5zdGFuY2UuYXBwLm9wdGlvbnMuYXBwSWRdKTtcclxufVxyXG4vKipcclxuICogVXNlIGd0YWcgYGNvbmZpZ2AgY29tbWFuZCB0byBzZXQgYHVzZXJfaWRgLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqIEBwYXJhbSBhbmFseXRpY3NJbnN0YW5jZSAtIFRoZSB7QGxpbmsgQW5hbHl0aWNzfSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGlkIC0gVXNlciBJRCB0byBzZXQuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRVc2VySWQoYW5hbHl0aWNzSW5zdGFuY2UsIGlkLCBvcHRpb25zKSB7XHJcbiAgICBhbmFseXRpY3NJbnN0YW5jZSA9IGdldE1vZHVsYXJJbnN0YW5jZShhbmFseXRpY3NJbnN0YW5jZSk7XHJcbiAgICBzZXRVc2VySWQkMSh3cmFwcGVkR3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2FuYWx5dGljc0luc3RhbmNlLmFwcC5vcHRpb25zLmFwcElkXSwgaWQsIG9wdGlvbnMpLmNhdGNoKGUgPT4gbG9nZ2VyLmVycm9yKGUpKTtcclxufVxyXG4vKipcclxuICogVXNlIGd0YWcgYGNvbmZpZ2AgY29tbWFuZCB0byBzZXQgYWxsIHBhcmFtcyBzcGVjaWZpZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNldFVzZXJQcm9wZXJ0aWVzKGFuYWx5dGljc0luc3RhbmNlLCBwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XHJcbiAgICBhbmFseXRpY3NJbnN0YW5jZSA9IGdldE1vZHVsYXJJbnN0YW5jZShhbmFseXRpY3NJbnN0YW5jZSk7XHJcbiAgICBzZXRVc2VyUHJvcGVydGllcyQxKHdyYXBwZWRHdGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYW5hbHl0aWNzSW5zdGFuY2UuYXBwLm9wdGlvbnMuYXBwSWRdLCBwcm9wZXJ0aWVzLCBvcHRpb25zKS5jYXRjaChlID0+IGxvZ2dlci5lcnJvcihlKSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgd2hldGhlciBHb29nbGUgQW5hbHl0aWNzIGNvbGxlY3Rpb24gaXMgZW5hYmxlZCBmb3IgdGhpcyBhcHAgb24gdGhpcyBkZXZpY2UuXHJcbiAqIFNldHMgZ2xvYmFsIGB3aW5kb3dbJ2dhLWRpc2FibGUtYW5hbHl0aWNzSWQnXSA9IHRydWU7YFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqIEBwYXJhbSBhbmFseXRpY3NJbnN0YW5jZSAtIFRoZSB7QGxpbmsgQW5hbHl0aWNzfSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVuYWJsZWQgLSBJZiB0cnVlLCBlbmFibGVzIGNvbGxlY3Rpb24sIGlmIGZhbHNlLCBkaXNhYmxlcyBpdC5cclxuICovXHJcbmZ1bmN0aW9uIHNldEFuYWx5dGljc0NvbGxlY3Rpb25FbmFibGVkKGFuYWx5dGljc0luc3RhbmNlLCBlbmFibGVkKSB7XHJcbiAgICBhbmFseXRpY3NJbnN0YW5jZSA9IGdldE1vZHVsYXJJbnN0YW5jZShhbmFseXRpY3NJbnN0YW5jZSk7XHJcbiAgICBzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZCQxKGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYW5hbHl0aWNzSW5zdGFuY2UuYXBwLm9wdGlvbnMuYXBwSWRdLCBlbmFibGVkKS5jYXRjaChlID0+IGxvZ2dlci5lcnJvcihlKSk7XHJcbn1cclxuLyoqXHJcbiAqIEFkZHMgZGF0YSB0aGF0IHdpbGwgYmUgc2V0IG9uIGV2ZXJ5IGV2ZW50IGxvZ2dlZCBmcm9tIHRoZSBTREssIGluY2x1ZGluZyBhdXRvbWF0aWMgb25lcy5cclxuICogV2l0aCBndGFnJ3MgXCJzZXRcIiBjb21tYW5kLCB0aGUgdmFsdWVzIHBhc3NlZCBwZXJzaXN0IG9uIHRoZSBjdXJyZW50IHBhZ2UgYW5kIGFyZSBwYXNzZWQgd2l0aFxyXG4gKiBhbGwgc3Vic2VxdWVudCBldmVudHMuXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIGN1c3RvbVBhcmFtcyAtIEFueSBjdXN0b20gcGFyYW1zIHRoZSB1c2VyIG1heSBwYXNzIHRvIGd0YWcuanMuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXREZWZhdWx0RXZlbnRQYXJhbWV0ZXJzKGN1c3RvbVBhcmFtcykge1xyXG4gICAgLy8gQ2hlY2sgaWYgcmVmZXJlbmNlIHRvIGV4aXN0aW5nIGd0YWcgZnVuY3Rpb24gb24gd2luZG93IG9iamVjdCBleGlzdHNcclxuICAgIGlmICh3cmFwcGVkR3RhZ0Z1bmN0aW9uKSB7XHJcbiAgICAgICAgd3JhcHBlZEd0YWdGdW5jdGlvbihcInNldFwiIC8qIEd0YWdDb21tYW5kLlNFVCAqLywgY3VzdG9tUGFyYW1zKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIF9zZXREZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdChjdXN0b21QYXJhbXMpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBTZW5kcyBhIEdvb2dsZSBBbmFseXRpY3MgZXZlbnQgd2l0aCBnaXZlbiBgZXZlbnRQYXJhbXNgLiBUaGlzIG1ldGhvZFxyXG4gKiBhdXRvbWF0aWNhbGx5IGFzc29jaWF0ZXMgdGhpcyBsb2dnZWQgZXZlbnQgd2l0aCB0aGlzIEZpcmViYXNlIHdlYlxyXG4gKiBhcHAgaW5zdGFuY2Ugb24gdGhpcyBkZXZpY2UuXHJcbiAqIExpc3Qgb2Ygb2ZmaWNpYWwgZXZlbnQgcGFyYW1ldGVycyBjYW4gYmUgZm91bmQgaW4gdGhlIGd0YWcuanNcclxuICogcmVmZXJlbmNlIGRvY3VtZW50YXRpb246XHJcbiAqIHtAbGluayBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9ndGFnanMvcmVmZXJlbmNlL2dhNC1ldmVudHNcclxuICogfCB0aGUgR0E0IHJlZmVyZW5jZSBkb2N1bWVudGF0aW9ufS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gbG9nRXZlbnQoYW5hbHl0aWNzSW5zdGFuY2UsIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpIHtcclxuICAgIGFuYWx5dGljc0luc3RhbmNlID0gZ2V0TW9kdWxhckluc3RhbmNlKGFuYWx5dGljc0luc3RhbmNlKTtcclxuICAgIGxvZ0V2ZW50JDEod3JhcHBlZEd0YWdGdW5jdGlvbiwgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFthbmFseXRpY3NJbnN0YW5jZS5hcHAub3B0aW9ucy5hcHBJZF0sIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpLmNhdGNoKGUgPT4gbG9nZ2VyLmVycm9yKGUpKTtcclxufVxyXG4vKipcclxuICogU2V0cyB0aGUgYXBwbGljYWJsZSBlbmQgdXNlciBjb25zZW50IHN0YXRlIGZvciB0aGlzIHdlYiBhcHAgYWNyb3NzIGFsbCBndGFnIHJlZmVyZW5jZXMgb25jZVxyXG4gKiBGaXJlYmFzZSBBbmFseXRpY3MgaXMgaW5pdGlhbGl6ZWQuXHJcbiAqXHJcbiAqIFVzZSB0aGUge0BsaW5rIENvbnNlbnRTZXR0aW5nc30gdG8gc3BlY2lmeSBpbmRpdmlkdWFsIGNvbnNlbnQgdHlwZSB2YWx1ZXMuIEJ5IGRlZmF1bHQgY29uc2VudFxyXG4gKiB0eXBlcyBhcmUgc2V0IHRvIFwiZ3JhbnRlZFwiLlxyXG4gKiBAcHVibGljXHJcbiAqIEBwYXJhbSBjb25zZW50U2V0dGluZ3MgLSBNYXBzIHRoZSBhcHBsaWNhYmxlIGVuZCB1c2VyIGNvbnNlbnQgc3RhdGUgZm9yIGd0YWcuanMuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRDb25zZW50KGNvbnNlbnRTZXR0aW5ncykge1xyXG4gICAgLy8gQ2hlY2sgaWYgcmVmZXJlbmNlIHRvIGV4aXN0aW5nIGd0YWcgZnVuY3Rpb24gb24gd2luZG93IG9iamVjdCBleGlzdHNcclxuICAgIGlmICh3cmFwcGVkR3RhZ0Z1bmN0aW9uKSB7XHJcbiAgICAgICAgd3JhcHBlZEd0YWdGdW5jdGlvbihcImNvbnNlbnRcIiAvKiBHdGFnQ29tbWFuZC5DT05TRU5UICovLCAndXBkYXRlJywgY29uc2VudFNldHRpbmdzKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIF9zZXRDb25zZW50RGVmYXVsdEZvckluaXQoY29uc2VudFNldHRpbmdzKTtcclxuICAgIH1cclxufVxuXG5jb25zdCBuYW1lID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzXCI7XG5jb25zdCB2ZXJzaW9uID0gXCIwLjEwLjFcIjtcblxuLyoqXHJcbiAqIFRoZSBGaXJlYmFzZSBBbmFseXRpY3MgV2ViIFNESy5cclxuICogVGhpcyBTREsgZG9lcyBub3Qgd29yayBpbiBhIE5vZGUuanMgZW52aXJvbm1lbnQuXHJcbiAqXHJcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJBbmFseXRpY3MoKSB7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChBTkFMWVRJQ1NfVFlQRSwgKGNvbnRhaW5lciwgeyBvcHRpb25zOiBhbmFseXRpY3NPcHRpb25zIH0pID0+IHtcclxuICAgICAgICAvLyBnZXRJbW1lZGlhdGUgZm9yIEZpcmViYXNlQXBwIHdpbGwgYWx3YXlzIHN1Y2NlZWRcclxuICAgICAgICBjb25zdCBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IGluc3RhbGxhdGlvbnMgPSBjb250YWluZXJcclxuICAgICAgICAgICAgLmdldFByb3ZpZGVyKCdpbnN0YWxsYXRpb25zLWludGVybmFsJylcclxuICAgICAgICAgICAgLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIHJldHVybiBmYWN0b3J5KGFwcCwgaW5zdGFsbGF0aW9ucywgYW5hbHl0aWNzT3B0aW9ucyk7XHJcbiAgICB9LCBcIlBVQkxJQ1wiIC8qIENvbXBvbmVudFR5cGUuUFVCTElDICovKSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgnYW5hbHl0aWNzLWludGVybmFsJywgaW50ZXJuYWxGYWN0b3J5LCBcIlBSSVZBVEVcIiAvKiBDb21wb25lbnRUeXBlLlBSSVZBVEUgKi8pKTtcclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uKTtcclxuICAgIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ2VzbTIwMTcnKTtcclxuICAgIGZ1bmN0aW9uIGludGVybmFsRmFjdG9yeShjb250YWluZXIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBhbmFseXRpY3MgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoQU5BTFlUSUNTX1RZUEUpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbG9nRXZlbnQ6IChldmVudE5hbWUsIGV2ZW50UGFyYW1zLCBvcHRpb25zKSA9PiBsb2dFdmVudChhbmFseXRpY3MsIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW50ZXJvcC1jb21wb25lbnQtcmVnLWZhaWxlZFwiIC8qIEFuYWx5dGljc0Vycm9yLklOVEVST1BfQ09NUE9ORU5UX1JFR19GQUlMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgIHJlYXNvbjogZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxucmVnaXN0ZXJBbmFseXRpY3MoKTtcblxuZXhwb3J0IHsgZ2V0QW5hbHl0aWNzLCBnZXRHb29nbGVBbmFseXRpY3NDbGllbnRJZCwgaW5pdGlhbGl6ZUFuYWx5dGljcywgaXNTdXBwb3J0ZWQsIGxvZ0V2ZW50LCBzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZCwgc2V0Q29uc2VudCwgc2V0Q3VycmVudFNjcmVlbiwgc2V0RGVmYXVsdEV2ZW50UGFyYW1ldGVycywgc2V0VXNlcklkLCBzZXRVc2VyUHJvcGVydGllcywgc2V0dGluZ3MgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJleHBvcnQgY29uc3QgZmlyZWJhc2VDb25maWcgPSB7XHJcbiAgYXBpS2V5OiBcIkFJemFTeUI4YzJsQlZpMjZ1N1lSTDlzeE9QOTdVYXEzeU44aFRsNFwiLFxyXG4gIGF1dGhEb21haW46IFwiZnRtLWI5ZDk5LmZpcmViYXNlYXBwLmNvbVwiLFxyXG4gIGRhdGFiYXNlVVJMOiBcImh0dHBzOi8vZnRtLWI5ZDk5LmZpcmViYXNlaW8uY29tXCIsXHJcbiAgcHJvamVjdElkOiBcImZ0bS1iOWQ5OVwiLFxyXG4gIHN0b3JhZ2VCdWNrZXQ6IFwiZnRtLWI5ZDk5LmFwcHNwb3QuY29tXCIsXHJcbiAgbWVzc2FnaW5nU2VuZGVySWQ6IFwiNjAyNDAyMzg3OTQxXCIsXHJcbiAgYXBwSWQ6IFwiMTo2MDI0MDIzODc5NDE6d2ViOjNiZGQ1MDJiMGU3Y2U2Nzg5ZGUxMGNcIixcclxuICBtZWFzdXJlbWVudElkOiBcIkctWE5FN1kyNDM5VlwiLFxyXG59O1xyXG4iLCJpbXBvcnQgeyBpbml0aWFsaXplQXBwLCBGaXJlYmFzZUFwcCB9IGZyb20gXCJmaXJlYmFzZS9hcHBcIjtcclxuaW1wb3J0IHsgZ2V0QW5hbHl0aWNzLCBsb2dFdmVudCwgQW5hbHl0aWNzIH0gZnJvbSBcImZpcmViYXNlL2FuYWx5dGljc1wiO1xyXG5pbXBvcnQgeyBmaXJlYmFzZUNvbmZpZyB9IGZyb20gXCIuL2NvbmZpZ1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZpcmViYXNlQW5hbHl0aWNzTWFuYWdlciB7XHJcbiAgcHVibGljIHN0YXRpYyBpbnN0YW5jZTogRmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyO1xyXG4gIHB1YmxpYyBmaXJlYmFzZUFwcDogRmlyZWJhc2VBcHA7XHJcbiAgcHVibGljIGZpcmViYXNlQW5hbHl0aWNzOiBBbmFseXRpY3M7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHRoaXMuZmlyZWJhc2VBcHAgPSBpbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcclxuICAgICAgdGhpcy5maXJlYmFzZUFuYWx5dGljcyA9IGdldEFuYWx5dGljcyh0aGlzLmZpcmViYXNlQXBwKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB3aGlsZSBpbml0aWFsaXppbmcgRmlyZWJhc2U6XCIsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogRmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyIHtcclxuICAgIGlmICghRmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyLmluc3RhbmNlKSB7XHJcbiAgICAgIEZpcmViYXNlQW5hbHl0aWNzTWFuYWdlci5pbnN0YW5jZSA9IG5ldyBGaXJlYmFzZUFuYWx5dGljc01hbmFnZXIoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBGaXJlYmFzZUFuYWx5dGljc01hbmFnZXIuaW5zdGFuY2U7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgbG9nRXZlbnRzKGV2ZW50TmFtZTogc3RyaW5nLCBldmVudDogb2JqZWN0KTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZyhgU2VuZGluZyBjdXN0b20gZXZlbnQgJHtldmVudE5hbWV9IHdpdGggZGF0YTpgLCBldmVudCk7XHJcbiAgICAgIGxvZ0V2ZW50KHRoaXMuZmlyZWJhc2VBbmFseXRpY3MsIGV2ZW50TmFtZSwgZXZlbnQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHdoaWxlIGxvZ2dpbmcgY3VzdG9tIGV2ZW50OlwiLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIi8vIE1haW4gRW50cnkgZm9yIHRoZSBDdXJpb3VzIFJlYWRlciBXZWIgUGxheWVyIEFwcFxyXG5pbXBvcnQgeyBDb250ZW50UGFyc2VyIH0gZnJvbSBcIi4vUGFyc2VyL0NvbnRlbnRQYXJzZXJcIjtcclxuaW1wb3J0IHsgUGxheUJhY2tFbmdpbmUgfSBmcm9tIFwiLi9QbGF5QmFja0VuZ2luZS9QbGF5QmFja0VuZ2luZVwiO1xyXG5pbXBvcnQgeyBXb3JrYm94LCBXb3JrYm94RXZlbnRNYXAgfSBmcm9tIFwid29ya2JveC13aW5kb3dcIjtcclxuaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuL01vZGVscy9Nb2RlbHNcIjtcclxuaW1wb3J0IHsgRmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyIH0gZnJvbSBcIi4vQW5hbHl0aWNzL0ZpcmViYXNlL0ZpcmViYXNlTWFuYWdlclwiO1xyXG5cclxubGV0IGFwcFZlcnNpb246IHN0cmluZyA9IFwidjAuMy41XCI7XHJcblxyXG5jb25zdCBjaGFubmVsID0gbmV3IEJyb2FkY2FzdENoYW5uZWwoXCJteS1jaGFubmVsXCIpO1xyXG5cclxubGV0IGxvYWRpbmdTY3JlZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvYWRpbmdTY3JlZW5cIik7XHJcblxyXG5leHBvcnQgY2xhc3MgQXBwIHtcclxuXHJcbiAgICBwdWJsaWMgYm9va05hbWU6IHN0cmluZztcclxuICAgIHB1YmxpYyBjb250ZW50UGFyc2VyOiBDb250ZW50UGFyc2VyO1xyXG4gICAgcHVibGljIHBsYXlCYWNrRW5naW5lOiBQbGF5QmFja0VuZ2luZTtcclxuICAgIHB1YmxpYyBjb250ZW50RmlsZVBhdGg6IHN0cmluZztcclxuICAgIHB1YmxpYyBpbWFnZXNQYXRoOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgYXVkaW9QYXRoOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgYnJvYWRjYXN0Q2hhbm5lbDogQnJvYWRjYXN0Q2hhbm5lbDtcclxuICAgIHB1YmxpYyBsYW5nOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgZmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyOiBGaXJlYmFzZUFuYWx5dGljc01hbmFnZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYm9va05hbWU6IHN0cmluZywgY29udGVudEZpbGVQYXRoOiBzdHJpbmcsIGltYWdlc1BhdGg6IHN0cmluZywgYXVkaW9QYXRoOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkN1cmlvdXMgUmVhZGVyIEFwcCBcIiArIGFwcFZlcnNpb24gKyBcIiBpbml0aWFsaXppbmchXCIpO1xyXG4gICAgICAgIHRoaXMuYm9va05hbWUgPSBib29rTmFtZTtcclxuICAgICAgICB0aGlzLmNvbnRlbnRGaWxlUGF0aCA9IGNvbnRlbnRGaWxlUGF0aDtcclxuICAgICAgICB0aGlzLmltYWdlc1BhdGggPSBpbWFnZXNQYXRoO1xyXG4gICAgICAgIHRoaXMuYXVkaW9QYXRoID0gYXVkaW9QYXRoO1xyXG4gICAgICAgIHRoaXMuZmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyID0gRmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyLmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgdGhpcy5jb250ZW50UGFyc2VyID0gbmV3IENvbnRlbnRQYXJzZXIoY29udGVudEZpbGVQYXRoKTtcclxuICAgICAgICB0aGlzLnBsYXlCYWNrRW5naW5lID0gbmV3IFBsYXlCYWNrRW5naW5lKGltYWdlc1BhdGgsIGF1ZGlvUGF0aCk7XHJcbiAgICAgICAgdGhpcy5icm9hZGNhc3RDaGFubmVsID0gbmV3IEJyb2FkY2FzdENoYW5uZWwoXCJjci1tZXNzYWdlLWNoYW5uZWxcIik7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBMb2FkIGFuZCBwYXJzZSB0aGUgYm9vayBkYXRhXHJcbiAgICAgICAgICAgIGNvbnN0IGJvb2sgPSBhd2FpdCB0aGlzLmNvbnRlbnRQYXJzZXIucGFyc2VCb29rKCk7XHJcbiAgICAgICAgICAgIGJvb2suYm9va05hbWUgPSB0aGlzLmJvb2tOYW1lO1xyXG5cclxuICAgICAgICAgICAgLy8gTG9nIGJvb2sgaW5mb3JtYXRpb24gZm9yIGRlYnVnZ2luZ1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFwcCBpbml0aWFsaXplZCB3aXRoIGJvb2s6XCIsIGJvb2spO1xyXG5cclxuICAgICAgICAgICAgLy8gRW5mb3JjZSBsYW5kc2NhcGUgbW9kZSAoaWYgc3VwcG9ydGVkKVxyXG4gICAgICAgICAgICB0aGlzLmVuZm9yY2VMYW5kc2NhcGVNb2RlKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZWdpc3RlciBhIHNlcnZpY2Ugd29ya2VyIGZvciBjYWNoaW5nXHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJlZ2lzdGVyU2VydmljZVdvcmtlcihib29rKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHBsYXliYWNrIGVuZ2luZSB3aXRoIHRoZSBwYXJzZWQgYm9vayBkYXRhXHJcbiAgICAgICAgICAgIHRoaXMucGxheUJhY2tFbmdpbmUuaW5pdGlhbGl6ZUJvb2soYm9vayk7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkluaXRpYWxpemF0aW9uIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkhXCIpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIC8vIEhhbmRsZSBhbnkgZXJyb3JzIHRoYXQgbWF5IG9jY3VyIGR1cmluZyBpbml0aWFsaXphdGlvblxyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiSW5pdGlhbGl6YXRpb24gZXJyb3I6XCIsIGVycm9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGVuZm9yY2VMYW5kc2NhcGVNb2RlKCkge1xyXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gZW5mb3JjZSBsYW5kc2NhcGUgbW9kZSB0aHJvdWdoIEFuZHJvaWQgYnJpZGdlIGNhbGxcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgaWYgKHdpbmRvdy5BbmRyb2lkICYmIHR5cGVvZiB3aW5kb3cuQW5kcm9pZC5zZXRDb250YWluZXJBcHBPcmllbnRhdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgICAgd2luZG93LkFuZHJvaWQuc2V0Q29udGFpbmVyQXBwT3JpZW50YXRpb24oXCJsYW5kc2NhcGVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJlZ2lzdGVyU2VydmljZVdvcmtlcihib29rOiBCb29rKSB7XHJcbiAgICAgICAgaWYgKFwic2VydmljZVdvcmtlclwiIGluIG5hdmlnYXRvcikge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHdiID0gbmV3IFdvcmtib3goXCIvc3cuanNcIiwge30pO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgd2IucmVnaXN0ZXIoKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlYWR5O1xyXG4gICAgICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGJvb2suYm9va05hbWUpID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkaW5nU2NyZWVuIS5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RDaGFubmVsLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogXCJDYWNoZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5nOiB0aGlzLmxhbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29rRGF0YTogYm9vayxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRGaWxlOiB0aGlzLmNvbnRlbnRGaWxlUGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkaW5nU2NyZWVuIS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RDaGFubmVsLm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ1JhcHA6IE1lc3NhZ2UgUmVjZWl2ZWQhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2ZW50LmRhdGEuY29tbWFuZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEuY29tbWFuZCA9PSBcIkFjdGl2YXRlZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnJvYWRjYXN0Q2hhbm5lbC5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNhY2hlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFuZzogdGhpcy5sYW5nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2tEYXRhOiBib29rLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRGaWxlOiB0aGlzLmNvbnRlbnRGaWxlUGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGhhbmRsZVNlcnZpY2VXb3JrZXJNZXNzYWdlKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgUmVnaXN0ZXJpbmcgU2VydmljZSBXb3JrZXJcIiwgZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmNoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgaGFuZGxlU2VydmljZVdvcmtlck1lc3NhZ2UpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlU2VydmljZVdvcmtlck1lc3NhZ2UoZXZlbnQpOiB2b2lkIHtcclxuICAgIGlmIChldmVudC5kYXRhLm1zZyA9PSBcIkxvYWRpbmdcIikge1xyXG4gICAgICAgIGxldCBwcm9ncmVzc1ZhbHVlID0gcGFyc2VJbnQoZXZlbnQuZGF0YS5kYXRhLnByb2dyZXNzKTtcclxuICAgICAgICBoYW5kbGVMb2FkaW5nTWVzc2FnZShldmVudCwgcHJvZ3Jlc3NWYWx1ZSk7XHJcblxyXG4gICAgfVxyXG4gICAgaWYgKGV2ZW50LmRhdGEubXNnID09IFwiVXBkYXRlRm91bmRcIikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiPj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4uLHVwZGF0ZSBGb3VuZFwiKTtcclxuICAgICAgICBoYW5kbGVVcGRhdGVGb3VuZE1lc3NhZ2UoKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTG9hZGluZ01lc3NhZ2UoZXZlbnQsIHByb2dyZXNzVmFsdWUpOiB2b2lkIHtcclxuICAgIGxldCBwcm9ncmVzc0JhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZ3Jlc3NCYXJcIik7XHJcbiAgICBpZiAocHJvZ3Jlc3NWYWx1ZSA8IDEwMCkge1xyXG4gICAgICAgIHByb2dyZXNzQmFyIS5zdHlsZS53aWR0aCA9IHByb2dyZXNzVmFsdWUgKyBcIiVcIjtcclxuICAgIH0gZWxzZSBpZiAocHJvZ3Jlc3NWYWx1ZSA+PSAxMDApIHtcclxuICAgICAgICBsb2FkaW5nU2NyZWVuIS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgLy8gYWRkIGJvb2sgd2l0aCBhIG5hbWUgdG8gbG9jYWwgc3RvcmFnZSBhcyBjYWNoZWRcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShldmVudC5kYXRhLmRhdGEuYm9va05hbWUsIFwidHJ1ZVwiKTtcclxuICAgICAgICByZWFkTGFuZ3VhZ2VEYXRhRnJvbUNhY2hlQW5kTm90aWZ5QW5kcm9pZEFwcChldmVudC5kYXRhLmRhdGEuYm9va05hbWUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZWFkTGFuZ3VhZ2VEYXRhRnJvbUNhY2hlQW5kTm90aWZ5QW5kcm9pZEFwcChib29rTmFtZTogc3RyaW5nKSB7XHJcbiAgICAvL0B0cy1pZ25vcmVcclxuICAgIGlmICh3aW5kb3cuQW5kcm9pZCkge1xyXG4gICAgICAgIGxldCBpc0NvbnRlbnRDYWNoZWQ6IGJvb2xlYW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShib29rTmFtZSkgIT09IG51bGw7XHJcbiAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgd2luZG93LkFuZHJvaWQuY2FjaGVkU3RhdHVzKGlzQ29udGVudENhY2hlZCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVVwZGF0ZUZvdW5kTWVzc2FnZSgpOiB2b2lkIHtcclxuICAgIGxldCB0ZXh0ID0gXCJVcGRhdGUgRm91bmQuXFxuUGxlYXNlIGFjY2VwdCB0aGUgdXBkYXRlIGJ5IHByZXNzaW5nIE9rLlwiO1xyXG4gICAgaWYgKGNvbmZpcm0odGV4dCkgPT0gdHJ1ZSkge1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGV4dCA9IFwiVXBkYXRlIHdpbGwgaGFwcGVuIG9uIHRoZSBuZXh0IGxhdW5jaC5cIjtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgcXVlcnlTdHJpbmcgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoO1xyXG5jb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHF1ZXJ5U3RyaW5nKTtcclxubGV0IGJvb2tOYW1lID0gdXJsUGFyYW1zLmdldChcImJvb2tcIik7XHJcblxyXG5jb25zdCBkZWZhdWx0Qm9va05hbWU6IHN0cmluZyA9IFwiTGV0c0ZseUxldmVsMkVuXCI7XHJcblxyXG5pZiAoYm9va05hbWUgPT0gbnVsbCkge1xyXG4gICAgYm9va05hbWUgPSBkZWZhdWx0Qm9va05hbWU7XHJcbn1cclxuXHJcbmNvbnNvbGUubG9nKFwiQm9vayBOYW1lOiBcIiArIGJvb2tOYW1lKTsgIFxyXG5cclxubGV0IGFwcDogQXBwID0gbmV3IEFwcChib29rTmFtZSwgYC9Cb29rQ29udGVudC8ke2Jvb2tOYW1lfS9jb250ZW50L2NvbnRlbnQuanNvbmAsXHJcbiAgICBgL0Jvb2tDb250ZW50LyR7Ym9va05hbWV9L2NvbnRlbnQvaW1hZ2VzL2AsXHJcbiAgICBgL0Jvb2tDb250ZW50LyR7Ym9va05hbWV9L2NvbnRlbnQvYXVkaW9zL2ApO1xyXG5cclxuYXBwLmluaXRpYWxpemUoKSJdLCJuYW1lcyI6WyJCb29rVHlwZSIsIl9fd2VicGFja19yZXF1aXJlX18iLCJnIiwiZ2xvYmFsVGhpcyIsInRoaXMiLCJGdW5jdGlvbiIsImUiLCJ3aW5kb3ciLCJDb250ZW50UGFyc2VyIiwiY29uc3RydWN0b3IiLCJjb250ZW50RmlsZVBhdGgiLCJlbXB0eUdsb3dJbWFnZVRhZyIsInBhcnNlQm9vayIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicGFyc2VDb250ZW50SlNPTkZpbGUiLCJ0aGVuIiwiY29udGVudEpTT04iLCJjb25zb2xlIiwibG9nIiwiYm9vayIsImJvb2tOYW1lIiwicGFnZXMiLCJib29rVHlwZSIsImRldGVybWluZUJvb2tUeXBlIiwicGFyc2VQYWdlcyIsImNhdGNoIiwiZXJyb3IiLCJ1bmRlZmluZWQiLCJDdXJpb3VzUmVhZGVyIiwiR0RMIiwiVW5rbm93biIsInBhZ2VzSlNPTiIsImdsb2JhbEZpbGxDb2xvciIsImkiLCJsZW5ndGgiLCJwYWdlSlNPTiIsInBhZ2UiLCJ2aXN1YWxFbGVtZW50cyIsImJhY2tncm91bmRDb2xvciIsInBhcnNlUGFnZUNSIiwicHVzaCIsInBhcnNlUGFnZUdETCIsImVsZW1lbnRzSlNPTiIsImxpYnJhcnlTdHJpbmciLCJpbmNsdWRlcyIsInRleHRFbGVtZW50IiwicGFyc2VUZXh0RWxlbWVudENSIiwiaW1hZ2VFbGVtZW50IiwicGFyc2VJbWFnZUVsZW1lbnRDUiIsImF1ZGlvRWxlbWVudCIsInBhcnNlQXVkaW9FbGVtZW50Q1IiLCJlbGVtZW50c0pTT05BcnJheSIsInBhcnNlVGV4dEVsZW1lbnRHREwiLCJwYXJzZUltYWdlRWxlbWVudEdETCIsImVsZW1lbnRKU09OIiwidHlwZSIsInBvc2l0aW9uWCIsInBvc2l0aW9uWSIsIndpZHRoIiwiaGVpZ2h0IiwidGV4dENvbnRlbnRBc0hUTUwiLCJOYU4iLCJwYXRoIiwiZG9tSUQiLCJpbWFnZVNvdXJjZSIsImF1ZGlvVGltZXN0YW1wcyIsInRpbWVzdGFtcHMiLCJ0aW1lc3RhbXBzSlNPTkFycmF5IiwidGltZXN0YW1wSW5kZXgiLCJ0aW1lc3RhbXBKU09OIiwidGltZXN0YW1wIiwidG9TdHJpbmciLCJ3b3JkIiwicmVwbGFjZSIsInN0YXJ0VGltZXN0YW1wIiwiZW5kVGltZXN0YW1wIiwiYXVkaW9TcmMiLCJnbG93Q29sb3IiLCJzdHlsZXMiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJyZXNwb25zZVR5cGUiLCJvbmxvYWQiLCJzdGF0dXMiLCJyZXNwb25zZSIsInNlbmQiLCJfZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwiTUVESUFfUFJFRkVSU19SRURVQ0VEX01PVElPTiIsImVtcHR5IiwiYXJyYXkiLCJzbGljZSIsImFycmF5TGlrZSIsInN0YXJ0IiwiZW5kIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJjYWxsIiwiYXBwbHkiLCJmdW5jIiwiYmluZCIsImNvbmNhdCIsImFyZ3VtZW50cyIsIm5leHRUaWNrIiwic2V0VGltZW91dCIsIm5vb3AiLCJyYWYiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ0eXBlT2YiLCJzdWJqZWN0IiwiaXNPYmplY3QiLCJpc051bGwiLCJpc0FycmF5IiwiaXNGdW5jdGlvbiIsImlzU3RyaW5nIiwiaXNVbmRlZmluZWQiLCJpc0hUTUxFbGVtZW50Iiwib3duZXJEb2N1bWVudCIsImRlZmF1bHRWaWV3IiwiSFRNTEVsZW1lbnQiLCJ0b0FycmF5IiwidmFsdWUiLCJmb3JFYWNoIiwidmFsdWVzIiwiaXRlcmF0ZWUiLCJpbmRleE9mIiwiaXRlbXMiLCJ0b2dnbGVDbGFzcyIsImVsbSIsImNsYXNzZXMiLCJhZGQiLCJuYW1lIiwiY2xhc3NMaXN0IiwiYWRkQ2xhc3MiLCJzcGxpdCIsImFwcGVuZCIsInBhcmVudCIsImNoaWxkcmVuIiwiYXBwZW5kQ2hpbGQiLCJiZWZvcmUiLCJub2RlcyIsInJlZiIsIm5vZGUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwibWF0Y2hlcyIsInNlbGVjdG9yIiwiY2hpbGRyZW4yIiwiZmlsdGVyIiwiY2hpbGQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsIm93bktleXMiLCJrZXlzIiwiZm9yT3duIiwib2JqZWN0IiwicmlnaHQiLCJyZXZlcnNlIiwic291cmNlIiwibWVyZ2UiLCJvbWl0IiwicmVtb3ZlQXR0cmlidXRlIiwiZWxtcyIsImF0dHJzIiwiYXR0ciIsInNldEF0dHJpYnV0ZSIsInZhbHVlMiIsIlN0cmluZyIsImNyZWF0ZSIsInRhZyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwicHJvcCIsImdldENvbXB1dGVkU3R5bGUiLCJkaXNwbGF5IiwiZGlzcGxheTIiLCJmb2N1cyIsInByZXZlbnRTY3JvbGwiLCJnZXRBdHRyaWJ1dGUiLCJoYXNDbGFzcyIsImNsYXNzTmFtZSIsImNvbnRhaW5zIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInJlbW92ZSIsInJlbW92ZUNoaWxkIiwicGFyc2VIdG1sIiwiaHRtbCIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsImJvZHkiLCJwcmV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwicHJldmVudERlZmF1bHQiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJxdWVyeSIsInF1ZXJ5U2VsZWN0b3IiLCJxdWVyeUFsbCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJyZW1vdmVDbGFzcyIsInRpbWVPZiIsInRpbWVTdGFtcCIsInVuaXQiLCJQUk9KRUNUX0NPREUiLCJEQVRBX0FUVFJJQlVURSIsImFzc2VydCIsImNvbmRpdGlvbiIsIm1lc3NhZ2UiLCJFcnJvciIsIm1pbiIsIk1hdGgiLCJtYXgiLCJmbG9vciIsImNlaWwiLCJhYnMiLCJhcHByb3hpbWF0ZWx5RXF1YWwiLCJ4IiwieSIsImVwc2lsb24iLCJiZXR3ZWVuIiwibnVtYmVyIiwiZXhjbHVzaXZlIiwibWluaW11bSIsIm1heGltdW0iLCJjbGFtcCIsInNpZ24iLCJmb3JtYXQiLCJzdHJpbmciLCJyZXBsYWNlbWVudHMiLCJyZXBsYWNlbWVudCIsInBhZCIsImlkcyIsIkV2ZW50QmluZGVyIiwibGlzdGVuZXJzIiwiZm9yRWFjaEV2ZW50IiwidGFyZ2V0cyIsImV2ZW50cyIsImV2ZW50czIiLCJldmVudE5TIiwiZnJhZ21lbnQiLCJjYWxsYmFjayIsIm9wdGlvbnMiLCJldmVudCIsIm5hbWVzcGFjZSIsImlzRXZlbnRUYXJnZXQiLCJyZW1vdmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJ1bmJpbmQiLCJsaXN0ZW5lciIsImRpc3BhdGNoIiwiZGV0YWlsIiwiYnViYmxlcyIsIkN1c3RvbUV2ZW50IiwiY3JlYXRlRXZlbnQiLCJpbml0Q3VzdG9tRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwiZGVzdHJveSIsImRhdGEiLCJFVkVOVF9NT1VOVEVEIiwiRVZFTlRfUkVBRFkiLCJFVkVOVF9NT1ZFIiwiRVZFTlRfTU9WRUQiLCJFVkVOVF9DTElDSyIsIkVWRU5UX1JFRlJFU0giLCJFVkVOVF9VUERBVEVEIiwiRVZFTlRfUkVTSVpFIiwiRVZFTlRfUkVTSVpFRCIsIkVWRU5UX1NDUk9MTCIsIkVWRU5UX1NDUk9MTEVEIiwiRVZFTlRfREVTVFJPWSIsIkVWRU5UX05BVklHQVRJT05fTU9VTlRFRCIsIkVWRU5UX0FVVE9QTEFZX1BMQVkiLCJFVkVOVF9BVVRPUExBWV9QQVVTRSIsIkVWRU5UX0xBWllMT0FEX0xPQURFRCIsIkVWRU5UX0VORF9JTkRFWF9DSEFOR0VEIiwiRXZlbnRJbnRlcmZhY2UiLCJTcGxpZGUyIiwiYnVzIiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImJpbmRlciIsIm9uIiwiam9pbiIsIm9mZiIsImVtaXQiLCJSZXF1ZXN0SW50ZXJ2YWwiLCJpbnRlcnZhbCIsIm9uSW50ZXJ2YWwiLCJvblVwZGF0ZSIsImxpbWl0Iiwic3RhcnRUaW1lIiwiaWQiLCJub3ciLCJEYXRlIiwicmF0ZSIsInBhdXNlZCIsImNvdW50IiwidXBkYXRlIiwicGF1c2UiLCJjYW5jZWwiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsInJlc3VtZSIsInJld2luZCIsInNldCIsInRpbWUiLCJpc1BhdXNlZCIsIkFSUk9XIiwiQVJST1dfTEVGVCIsIkFSUk9XX1JJR0hUIiwiQVJST1dfVVAiLCJBUlJPV19ET1dOIiwiVFRCIiwiT1JJRU5UQVRJT05fTUFQIiwibGVmdCIsIlgiLCJZIiwiQXJyb3dMZWZ0IiwiQXJyb3dSaWdodCIsIlJPTEUiLCJUQUJfSU5ERVgiLCJBUklBX1BSRUZJWCIsIkFSSUFfQ09OVFJPTFMiLCJBUklBX0NVUlJFTlQiLCJBUklBX1NFTEVDVEVEIiwiQVJJQV9MQUJFTCIsIkFSSUFfTEFCRUxMRURCWSIsIkFSSUFfSElEREVOIiwiQVJJQV9PUklFTlRBVElPTiIsIkFSSUFfUk9MRURFU0NSSVBUSU9OIiwiQVJJQV9MSVZFIiwiQVJJQV9CVVNZIiwiQVJJQV9BVE9NSUMiLCJBTExfQVRUUklCVVRFUyIsIkNMQVNTX1BSRUZJWCIsIlNUQVRVU19DTEFTU19QUkVGSVgiLCJDTEFTU19ST09UIiwiQ0xBU1NfVFJBQ0siLCJDTEFTU19MSVNUIiwiQ0xBU1NfU0xJREUiLCJDTEFTU19DTE9ORSIsIkNMQVNTX0NPTlRBSU5FUiIsIkNMQVNTX0FSUk9XUyIsIkNMQVNTX0FSUk9XIiwiQ0xBU1NfQVJST1dfUFJFViIsIkNMQVNTX0FSUk9XX05FWFQiLCJDTEFTU19QQUdJTkFUSU9OIiwiQ0xBU1NfUEFHSU5BVElPTl9QQUdFIiwiQ0xBU1NfUFJPR1JFU1NfQkFSIiwiQ0xBU1NfUFJPR1JFU1MiLCJDTEFTU19UT0dHTEUiLCJDTEFTU19TUiIsIkNMQVNTX0lOSVRJQUxJWkVEIiwiQ0xBU1NfQUNUSVZFIiwiQ0xBU1NfUFJFViIsIkNMQVNTX05FWFQiLCJDTEFTU19WSVNJQkxFIiwiQ0xBU1NfTE9BRElORyIsIkNMQVNTX0ZPQ1VTX0lOIiwiQ0xBU1NfT1ZFUkZMT1ciLCJTVEFUVVNfQ0xBU1NFUyIsIkNMQVNTRVMiLCJzbGlkZSIsImNsb25lIiwiYXJyb3dzIiwiYXJyb3ciLCJwcmV2IiwibmV4dCIsInBhZ2luYXRpb24iLCJzcGlubmVyIiwiUE9JTlRFUl9ET1dOX0VWRU5UUyIsIlBPSU5URVJfTU9WRV9FVkVOVFMiLCJQT0lOVEVSX1VQX0VWRU5UUyIsIlNMSURFIiwiTE9PUCIsIkZBREUiLCJJTlRFUlZBTF9EQVRBX0FUVFJJQlVURSIsIlNDUk9MTF9MSVNURU5FUl9PUFRJT05TIiwicGFzc2l2ZSIsImNhcHR1cmUiLCJOT1JNQUxJWkFUSU9OX01BUCIsIlNwYWNlYmFyIiwiUmlnaHQiLCJMZWZ0IiwiVXAiLCJEb3duIiwibm9ybWFsaXplS2V5IiwiS0VZQk9BUkRfRVZFTlQiLCJTUkNfREFUQV9BVFRSSUJVVEUiLCJTUkNTRVRfREFUQV9BVFRSSUJVVEUiLCJJTUFHRV9TRUxFQ1RPUiIsIlRSSUdHRVJfS0VZUyIsIkNvbXBvbmVudENvbnN0cnVjdG9ycyIsImZyZWV6ZSIsIl9fcHJvdG9fXyIsIk1lZGlhIiwiQ29tcG9uZW50czIiLCJzdGF0ZSIsImJyZWFrcG9pbnRzIiwicmVkdWNlZE1vdGlvbiIsInF1ZXJpZXMiLCJjb21wbGV0ZWx5IiwicmVnaXN0ZXIiLCJvcHRpb25zMiIsInF1ZXJ5TGlzdCIsIm1hdGNoTWVkaWEiLCJkZXN0cm95ZWQiLCJpcyIsImRpcmVjdGlvbiIsIm1lcmdlZCIsInJlZHVjZSIsIm1lcmdlZDIiLCJlbnRyeSIsIm1vdW50IiwicmVmcmVzaCIsIm9wdHMiLCJiYXNlIiwibm90aWZ5IiwiZ2V0UHJvdG90eXBlT2YiLCJzZXR1cCIsImlzTWluIiwibWVkaWFRdWVyeSIsInNvcnQiLCJuIiwibSIsImVuYWJsZSIsIkRpcmVjdGlvbiIsImF4aXNPbmx5IiwiaW5kZXgiLCJtYXRjaCIsIm9mZnNldCIsInRvTG93ZXJDYXNlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJvcmllbnQiLCJFbGVtZW50cyIsInRyYWNrIiwibGlzdCIsImlzVXNpbmdLZXkiLCJfRXZlbnRJbnRlcmZhY2UiLCJyb290IiwiaTE4biIsImVsZW1lbnRzIiwic2xpZGVzIiwicm9vdENsYXNzZXMiLCJ0cmFja0NsYXNzZXMiLCJwcmVmaXgiLCJyb2xlIiwiZmluZCIsImJhciIsInRvZ2dsZSIsInRhZ05hbWUiLCJjYXJvdXNlbCIsImdldENsYXNzZXMiLCJsYWJlbCIsImxhYmVsbGVkYnkiLCJmcm9tIiwiY2xvc2VzdCIsIm5vZGVUeXBlIiwicGFyZW50RWxlbWVudCIsImRyYWciLCJpc05hdmlnYXRpb24iLCJTbGlkZXMiLCJfRXZlbnRJbnRlcmZhY2UyIiwiX0NvbXBvbmVudHMyJEVsZW1lbnRzIiwiU2xpZGVzMiIsImluaXQiLCJmb3JFYWNoJDEiLCJTbGlkZTIiLCJzbGlkZUluZGV4IiwiQ29tcG9uZW50cyIsInVwZGF0ZU9uTW92ZSIsInNsaWRlRm9jdXMiLCJpc0Nsb25lIiwiY29udGFpbmVyIiwiaW5pdE5hdmlnYXRpb24iLCJjb250cm9scyIsInNwbGlkZXMiLCJtYXAiLCJzcGxpZGUiLCJnZXRBdCIsInNsaWRlWCIsIm9uTW92ZSIsImN1cnIiLCJhY3RpdmUiLCJpc0FjdGl2ZSIsInNlbGYiLCJ2aXNpYmxlIiwidHJhY2tSZWN0Iiwic2xpZGVSZWN0IiwiaXNWaXNpYmxlIiwiaGlkZGVuIiwiZm9jdXNhYmxlTm9kZXMiLCJhY3RpdmVFbGVtZW50IiwidXBkYXRlVmlzaWJpbGl0eSIsImNsb25lU3RhdHVzIiwic2xpZGVMYWJlbCIsInVzZUNvbnRhaW5lciIsImlzV2l0aGluIiwiZGlzdGFuY2UiLCJkaWZmIiwiU2xpZGUkMSIsIlNsaWRlMSIsImdldCIsImV4Y2x1ZGVDbG9uZXMiLCJtYXRjaGVyIiwiZ2V0SW4iLCJDb250cm9sbGVyIiwidG9JbmRleCIsImhhc0ZvY3VzIiwicGVyUGFnZSIsImltYWdlcyIsImltZyIsImdldExlbmd0aCIsImlzRW5vdWdoIiwiTGF5b3V0IiwidmVydGljYWwiLCJyb290UmVjdCIsIm92ZXJmbG93IiwiX0V2ZW50SW50ZXJmYWNlMyIsIl9Db21wb25lbnRzMiRFbGVtZW50czIiLCJzdHlsZVNsaWRlcyIsImNzc1BhZGRpbmciLCJyZXNpemUiLCJmb3JjZSIsIm5ld1JlY3QiLCJjc3NIZWlnaHQiLCJnYXAiLCJhdXRvV2lkdGgiLCJmaXhlZFdpZHRoIiwiY3NzU2xpZGVTaXplIiwiZml4ZWRIZWlnaHQiLCJhdXRvSGVpZ2h0IiwiaXNPdmVyZmxvdyIsInBhZGRpbmciLCJoZWlnaHRSYXRpbyIsImxpc3RTaXplIiwic2xpZGVTaXplIiwid2l0aG91dEdhcCIsIlNsaWRlIiwiZ2V0R2FwIiwidG90YWxTaXplIiwic2xpZGVyU2l6ZSIsInBhcnNlRmxvYXQiLCJnZXRQYWRkaW5nIiwiQ2xvbmVzIiwiY2xvbmVDb3VudCIsImNsb25lcyIsInJlbW91bnQiLCJvYnNlcnZlIiwiY29tcHV0ZUNsb25lQ291bnQiLCJpc0hlYWQiLCJjbG9uZU5vZGUiLCJjbG9uZURlZXAiLCJnZW5lcmF0ZSIsImNsb25lczIiLCJmaXhlZFNpemUiLCJNb3ZlIiwiVHJhbnNpdGlvbiIsIl9FdmVudEludGVyZmFjZTQiLCJfQ29tcG9uZW50czIkTGF5b3V0IiwiX0NvbXBvbmVudHMyJERpcmVjdGlvIiwiX0NvbXBvbmVudHMyJEVsZW1lbnRzMyIsInJlcG9zaXRpb24iLCJpc0J1c3kiLCJTY3JvbGwiLCJqdW1wIiwidHJhbnNsYXRlIiwidG9Qb3NpdGlvbiIsInBvc2l0aW9uIiwicHJldmVudExvb3AiLCJkZXN0aW5hdGlvbiIsImV4Y2VlZGVkTWF4IiwiZ2V0RW5kIiwic2hpZnQiLCJsb29wIiwiYmFja3dhcmRzIiwiZXhjZXNzIiwiZ2V0TGltaXQiLCJzaXplIiwiZ2V0UG9zaXRpb24iLCJtaW5EaXN0YW5jZSIsIkluZmluaXR5IiwidHJpbW1pbmciLCJ0cmltU3BhY2UiLCJ0cmltIiwibW92ZSIsImRlc3QiLCJzaGlmdGVkIiwiZXhjZWVkZWRMaW1pdCIsImV4Y2VlZGVkTWluIiwiZW5kSW5kZXgiLCJzbGlkZUNvdW50IiwicGVyTW92ZSIsIl9FdmVudEludGVyZmFjZTUiLCJfQ29tcG9uZW50czIkU2xpZGVzIiwib21pdEVuZCIsImlzTG9vcCIsImlzU2xpZGUiLCJnZXROZXh0IiwiZ2V0QWRqYWNlbnQiLCJnZXRQcmV2IiwiY3VyckluZGV4IiwicHJldkluZGV4Iiwib25SZXNpemVkIiwiY29tcHV0ZURlc3RJbmRleCIsInNuYXBQYWdlIiwiY29tcHV0ZU1vdmFibGVEZXN0SW5kZXgiLCJ0b1BhZ2UiLCJzZXRJbmRleCIsIndhaXRGb3JUcmFuc2l0aW9uIiwiZ28iLCJjb250cm9sIiwiYWxsb3dTYW1lSW5kZXgiLCJfcmVmIiwiaW5kaWNhdG9yIiwicGFyc2UiLCJzY3JvbGwiLCJkdXJhdGlvbiIsInNuYXAiLCJnZXRJbmRleCIsInRvRGVzdCIsIkFycm93cyIsImNyZWF0ZWQiLCJ3cmFwcGVyQ2xhc3NlcyIsInBsYWNlaG9sZGVyIiwid3JhcHBlciIsImVuYWJsZWQiLCJjcmVhdGVBcnJvdyIsInByZXYyIiwiYXJyb3dQYXRoIiwibmV4dEluZGV4IiwicHJldkxhYmVsIiwibGFzdCIsIm5leHRMYWJlbCIsImZpcnN0IiwiZGlzYWJsZWQiLCJBdXRvcGxheSIsImhvdmVyZWQiLCJmb2N1c2VkIiwiX0V2ZW50SW50ZXJmYWNlNiIsIl9Db21wb25lbnRzMiRFbGVtZW50czQiLCJhdXRvcGxheSIsInN0b3BwZWQiLCJwbGF5IiwicmVzZXRQcm9ncmVzcyIsInN0b3AiLCJhdXRvVG9nZ2xlIiwicGF1c2VPbkhvdmVyIiwicGF1c2VPbkZvY3VzIiwiQ292ZXIiLCJjb3ZlciIsImNvdmVyMiIsInNyYyIsIl9FdmVudEludGVyZmFjZTgiLCJmcmljdGlvbiIsIm9uU2Nyb2xsZWQiLCJub0NvbnN0cmFpbiIsImNsZWFyIiwibm9EaXN0YW5jZSIsIm9uRW5kIiwidG8iLCJ0IiwiZWFzaW5nRnVuYyIsInBvdyIsImVhc2luZyIsIkRyYWciLCJiYXNlUG9zaXRpb24iLCJiYXNlRXZlbnQiLCJwcmV2QmFzZUV2ZW50IiwiaXNGcmVlIiwiZHJhZ2dpbmciLCJjbGlja1ByZXZlbnRlZCIsIl9FdmVudEludGVyZmFjZTkiLCJfQ29tcG9uZW50czIkRGlyZWN0aW8yIiwiZXhjZWVkZWQiLCJkaXNhYmxlIiwib25Qb2ludGVyRG93biIsImlzVG91Y2giLCJpc1RvdWNoRXZlbnQiLCJ0YXJnZXQyIiwibm9EcmFnIiwiYnV0dG9uIiwib25Qb2ludGVyTW92ZSIsIm9uUG9pbnRlclVwIiwic2F2ZSIsImNhbmNlbGFibGUiLCJkaWZmQ29vcmQiLCJleHBpcmVkIiwiZGlmZlRpbWUiLCJoYXNFeGNlZWRlZCIsImlzU2xpZGVyRGlyZWN0aW9uIiwidGhyZXNob2xkcyIsImRyYWdNaW5UaHJlc2hvbGQiLCJpc09iaiIsIm1vdXNlIiwidG91Y2giLCJzaG91bGRTdGFydCIsInZlbG9jaXR5IiwiY29tcHV0ZVZlbG9jaXR5IiwiZmxpY2tQb3dlciIsImZsaWNrTWF4UGFnZXMiLCJjb21wdXRlRGVzdGluYXRpb24iLCJyZXdpbmRCeURyYWciLCJvbkNsaWNrIiwib3J0aG9nb25hbCIsImNvb3JkT2YiLCJnZXRCYXNlRXZlbnQiLCJjaGFuZ2VkVG91Y2hlcyIsIlRvdWNoRXZlbnQiLCJpc0RyYWdnaW5nIiwiS2V5Ym9hcmQiLCJfRXZlbnRJbnRlcmZhY2UxMCIsImtleWJvYXJkIiwib25LZXlkb3duIiwiX2Rpc2FibGVkIiwiTGF6eUxvYWQiLCJfRXZlbnRJbnRlcmZhY2UxMSIsImlzU2VxdWVudGlhbCIsImxhenlMb2FkIiwiZW50cmllcyIsInNyY3NldCIsImxvYWROZXh0IiwiY2hlY2siLCJwcmVsb2FkUGFnZXMiLCJsb2FkIiwib25Mb2FkIiwiUGFnaW5hdGlvbiIsInBhZ2luYXRpb25DbGFzc2VzIiwiZGlyIiwiZ2V0RGlyZWN0aW9uIiwibmV4dFBhZ2UiLCJpdGVtIiwicGFnaW5hdGlvbkRpcmVjdGlvbiIsIl9idXR0b24iLCJzZWxlY3QiLCJsaSIsImNsYXNzIiwidGV4dCIsInBhZ2VYIiwicGFnaW5hdGlvbktleWJvYXJkIiwiY3JlYXRlUGFnaW5hdGlvbiIsIlN5bmMiLCJpc1BhcmVudCIsInN5bmMiLCJXaGVlbCIsImxhc3RUaW1lIiwib25XaGVlbCIsImRlbHRhWSIsIl9taW4iLCJ3aGVlbE1pblRocmVzaG9sZCIsInNsZWVwIiwid2hlZWxTbGVlcCIsInJlbGVhc2VXaGVlbCIsInNob3VsZFByZXZlbnQiLCJ3aGVlbCIsIkxpdmUiLCJsaXZlIiwic3IiLCJ0ZXh0Q29udGVudCIsIkRFRkFVTFRTIiwic3BlZWQiLCJyZXdpbmRTcGVlZCIsIkZhZGUiLCJkb25lIiwiZW5kQ2FsbGJhY2siLCJ0cmFuc2l0aW9uIiwiZ2V0U3BlZWQiLCJ1c2VTY3JvbGwiLCJfU3BsaWRlIiwic3RhdGVzIiwiX28iLCJfRSIsImRlZmF1bHRzIiwiSlNPTiIsIkNvbnN0cnVjdG9yIiwicHJvdG9Qcm9wcyIsIl9wcm90byIsIkV4dGVuc2lvbnMiLCJfdGhpcyIsIl9DIiwiX1QiLCJDb21wb25lbnQiLCJjb21wb25lbnQiLCJfdGhpcyRldmVudCIsIlNwbGlkZSIsIlNUQVRFUyIsIkNSRUFURUQiLCJNT1VOVEVEIiwiSURMRSIsIk1PVklORyIsIlNDUk9MTElORyIsIkRSQUdHSU5HIiwiREVTVFJPWUVEIiwiUGxheUJhY2tFbmdpbmUiLCJpbWFnZXNQYXRoIiwiYXVkaW9QYXRoIiwiY3VycmVudGx5UGxheWluZ0F1ZGlvRWxlbWVudCIsImN1cnJlbnRseUFjdGl2ZUdsb3dJbWFnZXMiLCJjdXJyZW50bHlBY3RpdmVXb3JkIiwiY3VycmVudFBhZ2UiLCJzcGxpZGVIYW5kbGUiLCJpbm5lckhlaWdodCIsIm5ld0luZGV4Iiwib2xkSW5kZXgiLCJkZXN0SW5kZXgiLCJ0cmFuc2l0aW9uaW5nVG9QYWdlIiwic3RvcFBhZ2VBdWRpbyIsImN1cnJlbnRJbmRleCIsInBsYXlQYWdlQXVkaW8iLCJhZGRQYWdlUmVzaXplTGlzdGVuZXIiLCJhZGRNaW5pbXphdGlvbkxpc3RlbmVyIiwidmlzaWJpbGl0eVN0YXRlIiwidmlzdWFsRWxlbWVudCIsImF1ZGlvRWxlbWVudERvbSIsImdldEVsZW1lbnRCeUlkIiwiY3VycmVudFRpbWUiLCJjbGVhckludGVydmFsIiwiY3VycmVudFBhZ2VBdXRvUGxheWVySW50ZXJ2YWwiLCJqIiwid29yZEVsZW1lbnQiLCJjb2xvciIsInBhZ2VJbmRleCIsImxhc3RXb3JkSW5kZXgiLCJzZXRJbnRlcnZhbCIsImVuYWJsZUNvbm5lY3RlZEdyYXBoaWNIaWdobGlnaHRpbmciLCJpbml0aWFsaXplQm9vayIsImN1cnJlbnRCb29rVHlwZSIsIm51bWJlck9mUGFnZXMiLCJpbml0aWFsaXplQ3VyaW91c1JlYWRlckJvb2siLCJpbml0aWFsaXplR0RMQm9vayIsInNsaWRlTGkiLCJqdXN0aWZ5Q29udGVudCIsImFsaWduSXRlbXMiLCJ0b3AiLCJzZW50ZW5jZUluaXRpYWxpemVkQnlBdWRpbyIsImNyZWF0ZUltYWdlQ29udGFpbmVyIiwiYXVkaW9BbmRUZXh0RGl2cyIsImNyZWF0ZUF1ZGlvQW5kVGV4dENvbnRhaW5lcnMiLCJjcmVhdGVBdWRpb0NvbnRhaW5lciIsImNyZWF0ZVRleHRDb250YWluZXIiLCJ0ZXh0RWxlbWVudERpdiIsIndlYmtpdFRleHRTdHJva2UiLCJ0ZXh0U2hhZG93IiwiZm9udEZhbWlseSIsImZvbnRXZWlnaHQiLCJmb250U2l6ZSIsImlubmVySFRNTCIsImVsZW1lbnRJbmRleCIsImltYWdlRWxlbWVudERpdiIsImhhbmRsZVN0YW5kYWxvbmVHbG93SW1hZ2VDbGljayIsImhhbmRsZUdsb3dJbWFnZUNsaWNrIiwiaW1hZ2VFbGVtZW50SW1nIiwiYXVkaW9FbGVtZW50RGl2IiwicGFnZUF1ZGlvIiwid29yZFRpbWVzdGFtcEVsZW1lbnQiLCJ3b3JkQXVkaW9FbGVtZW50IiwiYXVkaW9BbmRUZXh0QXJyYXkiLCJzZW50ZW5jZUFycmF5VHJpbW1lZCIsImF1ZGlvQ29udGVudERPTUlkIiwic2VudGVuY2VQYXJhZ3JhcGgiLCJ0ZXh0QWxpZ24iLCJtYXJnaW4iLCJjbGlja2FibGVXb3JkRWxlbWVudCIsIm1hcmdpbkxlZnQiLCJtYXJnaW5SaWdodCIsImlubmVyVGV4dCIsImV2IiwiaGFuZGxlSW50ZXJhY3RpdmVXb3JkQ2xpY2siLCJjbGVhclRpbWVvdXQiLCJjdXJyZW50V29yZFBsYXlpbmdUaW1lb3V0IiwiY3VycmVudEdsb3dJbWFnZVRpbWVvdXQiLCJib3hTaGFkb3ciLCJnbG93RGl2Iiwid29yZEluZGV4Iiwid29yZEluZGV4TnVtYmVyIiwicGFyc2VJbnQiLCJnbG93SW1hZ2VPbmx5IiwiY29ubmVjdGVkR2xvd0ltYWdlQ2xhc3MiLCJjb25uZWN0ZWRHbG93SW1hZ2VzIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImZsZXhDb250YWluZXIiLCJmbGV4RGlyZWN0aW9uIiwiZ29Ub05leHRQYWdlIiwidHJhbnNpdGlvblRvUGFnZSIsImdvVG9QcmV2aW91c1BhZ2UiLCJwYWdlTnVtYmVyIiwiXyIsInIiLCJNZXNzYWdlQ2hhbm5lbCIsInBvcnQxIiwib25tZXNzYWdlIiwicG9zdE1lc3NhZ2UiLCJwb3J0MiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwidGVzdCIsIlR5cGVFcnJvciIsInByb21pc2UiLCJvIiwibG9jYXRpb24iLCJocmVmIiwiVVJMIiwidSIsImFzc2lnbiIsImEiLCJjIiwiZiIsInMiLCJ2Iiwibm4iLCJ0biIsInJuIiwiZW4iLCJ1biIsImFuIiwiU2V0IiwiY24iLCJmbiIsImluc3RhbGxpbmciLCJzY3JpcHRVUkwiLCJzbiIsInBlcmZvcm1hbmNlIiwidm4iLCJobiIsImxuIiwic3ciLCJpc0V4dGVybmFsIiwib3JpZ2luYWxFdmVudCIsIm1uIiwiaXNVcGRhdGUiLCJ3biIsIndhaXRpbmciLCJkbiIsIm5hdmlnYXRvciIsInNlcnZpY2VXb3JrZXIiLCJjb250cm9sbGVyIiwiZ24iLCJwb3J0cyIsImdldFNXIiwiaGFzIiwibCIsInciLCJpbW1lZGlhdGUiLCJyZWFkeVN0YXRlIiwiQm9vbGVhbiIsInluIiwicG4iLCJibiIsIm9uY2UiLCJ3YXNXYWl0aW5nQmVmb3JlUmVnaXN0ZXIiLCJtZXNzYWdlU1ciLCJtZXNzYWdlU2tpcFdhaXRpbmciLCJQbiIsIk1hcCIsIlNuIiwiZGVsZXRlIiwic3RyaW5nVG9CeXRlQXJyYXkkMSIsInN0ciIsIm91dCIsInAiLCJjaGFyQ29kZUF0IiwiYmFzZTY0IiwiYnl0ZVRvQ2hhck1hcF8iLCJjaGFyVG9CeXRlTWFwXyIsImJ5dGVUb0NoYXJNYXBXZWJTYWZlXyIsImNoYXJUb0J5dGVNYXBXZWJTYWZlXyIsIkVOQ09ERURfVkFMU19CQVNFIiwiRU5DT0RFRF9WQUxTIiwiRU5DT0RFRF9WQUxTX1dFQlNBRkUiLCJIQVNfTkFUSVZFX1NVUFBPUlQiLCJhdG9iIiwiZW5jb2RlQnl0ZUFycmF5IiwiaW5wdXQiLCJ3ZWJTYWZlIiwiaW5pdF8iLCJieXRlVG9DaGFyTWFwIiwib3V0cHV0IiwiYnl0ZTEiLCJoYXZlQnl0ZTIiLCJieXRlMiIsImhhdmVCeXRlMyIsImJ5dGUzIiwib3V0Qnl0ZTEiLCJvdXRCeXRlMiIsIm91dEJ5dGUzIiwib3V0Qnl0ZTQiLCJlbmNvZGVTdHJpbmciLCJidG9hIiwiZGVjb2RlU3RyaW5nIiwiYnl0ZXMiLCJwb3MiLCJjMSIsImZyb21DaGFyQ29kZSIsImMyIiwiYzMiLCJieXRlQXJyYXlUb1N0cmluZyIsImRlY29kZVN0cmluZ1RvQnl0ZUFycmF5IiwiY2hhclRvQnl0ZU1hcCIsImJ5dGU0IiwiRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3IiLCJzdXBlciIsImJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nIiwidXRmOEJ5dGVzIiwiYmFzZTY0RW5jb2RlIiwiZ2V0RGVmYXVsdHMiLCJnZXRHbG9iYWwiLCJfX0ZJUkVCQVNFX0RFRkFVTFRTX18iLCJwcm9jZXNzIiwiZW52IiwiZGVmYXVsdHNKc29uU3RyaW5nIiwiZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUiLCJjb29raWUiLCJkZWNvZGVkIiwiYmFzZTY0RGVjb2RlIiwiZ2V0RGVmYXVsdHNGcm9tQ29va2llIiwiaW5mbyIsImdldERlZmF1bHRBcHBDb25maWciLCJfYSIsImNvbmZpZyIsIkRlZmVycmVkIiwid3JhcENhbGxiYWNrIiwiaW5kZXhlZERCIiwicHJlRXhpc3QiLCJEQl9DSEVDS19OQU1FIiwicmVxdWVzdCIsIm9uc3VjY2VzcyIsInJlc3VsdCIsImNsb3NlIiwiZGVsZXRlRGF0YWJhc2UiLCJvbnVwZ3JhZGVuZWVkZWQiLCJvbmVycm9yIiwiRmlyZWJhc2VFcnJvciIsImNvZGUiLCJjdXN0b21EYXRhIiwic2V0UHJvdG90eXBlT2YiLCJjYXB0dXJlU3RhY2tUcmFjZSIsIkVycm9yRmFjdG9yeSIsInNlcnZpY2UiLCJzZXJ2aWNlTmFtZSIsImVycm9ycyIsImZ1bGxDb2RlIiwidGVtcGxhdGUiLCJQQVRURVJOIiwicmVwbGFjZVRlbXBsYXRlIiwiZnVsbE1lc3NhZ2UiLCJkZWVwRXF1YWwiLCJiIiwiYUtleXMiLCJiS2V5cyIsImsiLCJhUHJvcCIsImJQcm9wIiwidGhpbmciLCJjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzIiwiYmFja29mZkNvdW50IiwiaW50ZXJ2YWxNaWxsaXMiLCJiYWNrb2ZmRmFjdG9yIiwiY3VyckJhc2VWYWx1ZSIsInJhbmRvbVdhaXQiLCJyb3VuZCIsInJhbmRvbSIsIl9kZWxlZ2F0ZSIsImluc3RhbmNlRmFjdG9yeSIsIm11bHRpcGxlSW5zdGFuY2VzIiwic2VydmljZVByb3BzIiwiaW5zdGFudGlhdGlvbk1vZGUiLCJvbkluc3RhbmNlQ3JlYXRlZCIsInNldEluc3RhbnRpYXRpb25Nb2RlIiwibW9kZSIsInNldE11bHRpcGxlSW5zdGFuY2VzIiwic2V0U2VydmljZVByb3BzIiwic2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2siLCJERUZBVUxUX0VOVFJZX05BTUUiLCJQcm92aWRlciIsImluc3RhbmNlcyIsImluc3RhbmNlc0RlZmVycmVkIiwiaW5zdGFuY2VzT3B0aW9ucyIsIm9uSW5pdENhbGxiYWNrcyIsImlkZW50aWZpZXIiLCJub3JtYWxpemVkSWRlbnRpZmllciIsIm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllciIsImRlZmVycmVkIiwiaXNJbml0aWFsaXplZCIsInNob3VsZEF1dG9Jbml0aWFsaXplIiwiaW5zdGFuY2UiLCJnZXRPckluaXRpYWxpemVTZXJ2aWNlIiwiaW5zdGFuY2VJZGVudGlmaWVyIiwiZ2V0SW1tZWRpYXRlIiwib3B0aW9uYWwiLCJnZXRDb21wb25lbnQiLCJzZXRDb21wb25lbnQiLCJpc0NvbXBvbmVudEVhZ2VyIiwiaW5zdGFuY2VEZWZlcnJlZCIsImNsZWFySW5zdGFuY2UiLCJzZXJ2aWNlcyIsImFsbCIsIklOVEVSTkFMIiwiX2RlbGV0ZSIsImlzQ29tcG9uZW50U2V0IiwiZ2V0T3B0aW9ucyIsImluaXRpYWxpemUiLCJvbkluaXQiLCJleGlzdGluZ0NhbGxiYWNrcyIsImV4aXN0aW5nSW5zdGFuY2UiLCJpbnZva2VPbkluaXRDYWxsYmFja3MiLCJjYWxsYmFja3MiLCJDb21wb25lbnRDb250YWluZXIiLCJwcm92aWRlcnMiLCJhZGRDb21wb25lbnQiLCJwcm92aWRlciIsImdldFByb3ZpZGVyIiwiYWRkT3JPdmVyd3JpdGVDb21wb25lbnQiLCJnZXRQcm92aWRlcnMiLCJMb2dMZXZlbCIsImxldmVsU3RyaW5nVG9FbnVtIiwiREVCVUciLCJWRVJCT1NFIiwiSU5GTyIsIldBUk4iLCJFUlJPUiIsIlNJTEVOVCIsImRlZmF1bHRMb2dMZXZlbCIsIkNvbnNvbGVNZXRob2QiLCJkZWZhdWx0TG9nSGFuZGxlciIsImxvZ1R5cGUiLCJhcmdzIiwibG9nTGV2ZWwiLCJ0b0lTT1N0cmluZyIsIm1ldGhvZCIsIkxvZ2dlciIsIl9sb2dMZXZlbCIsIl9sb2dIYW5kbGVyIiwiX3VzZXJMb2dIYW5kbGVyIiwidmFsIiwic2V0TG9nTGV2ZWwiLCJsb2dIYW5kbGVyIiwidXNlckxvZ0hhbmRsZXIiLCJkZWJ1ZyIsIndhcm4iLCJpZGJQcm94eWFibGVUeXBlcyIsImN1cnNvckFkdmFuY2VNZXRob2RzIiwiY3Vyc29yUmVxdWVzdE1hcCIsIldlYWtNYXAiLCJ0cmFuc2FjdGlvbkRvbmVNYXAiLCJ0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAiLCJ0cmFuc2Zvcm1DYWNoZSIsInJldmVyc2VUcmFuc2Zvcm1DYWNoZSIsImlkYlByb3h5VHJhcHMiLCJyZWNlaXZlciIsIklEQlRyYW5zYWN0aW9uIiwib2JqZWN0U3RvcmVOYW1lcyIsIm9iamVjdFN0b3JlIiwidHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSIsIklEQkRhdGFiYXNlIiwidHJhbnNhY3Rpb24iLCJJREJDdXJzb3IiLCJhZHZhbmNlIiwiY29udGludWUiLCJjb250aW51ZVByaW1hcnlLZXkiLCJ1bndyYXAiLCJzdG9yZU5hbWVzIiwidHgiLCJ1bmxpc3RlbiIsImNvbXBsZXRlIiwiRE9NRXhjZXB0aW9uIiwiY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uIiwiSURCT2JqZWN0U3RvcmUiLCJJREJJbmRleCIsInNvbWUiLCJQcm94eSIsIklEQlJlcXVlc3QiLCJzdWNjZXNzIiwicHJvbWlzaWZ5UmVxdWVzdCIsIm5ld1ZhbHVlIiwib3BlbkRCIiwidmVyc2lvbiIsImJsb2NrZWQiLCJ1cGdyYWRlIiwiYmxvY2tpbmciLCJ0ZXJtaW5hdGVkIiwib3BlblByb21pc2UiLCJvbGRWZXJzaW9uIiwibmV3VmVyc2lvbiIsImRiIiwicmVhZE1ldGhvZHMiLCJ3cml0ZU1ldGhvZHMiLCJjYWNoZWRNZXRob2RzIiwiZ2V0TWV0aG9kIiwidGFyZ2V0RnVuY05hbWUiLCJ1c2VJbmRleCIsImlzV3JpdGUiLCJhc3luYyIsInN0b3JlTmFtZSIsInN0b3JlIiwib2xkVHJhcHMiLCJQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsIiwiZ2V0UGxhdGZvcm1JbmZvU3RyaW5nIiwiaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyIiwibGlicmFyeSIsImxvZ1N0cmluZyIsIm5hbWUkbyIsInZlcnNpb24kMSIsImxvZ2dlciIsIm5hbWUkbiIsIm5hbWUkbSIsIm5hbWUkbCIsIm5hbWUkayIsIm5hbWUkaiIsIm5hbWUkaSIsIm5hbWUkaCIsIm5hbWUkZyIsIm5hbWUkZiIsIm5hbWUkZSIsIm5hbWUkZCIsIm5hbWUkYyIsIm5hbWUkYiIsIm5hbWUkYSIsIm5hbWUkOSIsIm5hbWUkOCIsIm5hbWUkNyIsIm5hbWUkNiIsIm5hbWUkNSIsIm5hbWUkNCIsIm5hbWUkMyIsIm5hbWUkMiIsIm5hbWUkMSIsIlBMQVRGT1JNX0xPR19TVFJJTkciLCJfYXBwcyIsIl9jb21wb25lbnRzIiwiX2FkZENvbXBvbmVudCIsImFwcCIsIl9yZWdpc3RlckNvbXBvbmVudCIsImNvbXBvbmVudE5hbWUiLCJoZWFydGJlYXRDb250cm9sbGVyIiwidHJpZ2dlckhlYXJ0YmVhdCIsIkVSUk9SX0ZBQ1RPUlkiLCJGaXJlYmFzZUFwcEltcGwiLCJfaXNEZWxldGVkIiwiX29wdGlvbnMiLCJfY29uZmlnIiwiX25hbWUiLCJfYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiX2NvbnRhaW5lciIsImNoZWNrRGVzdHJveWVkIiwiaXNEZWxldGVkIiwiYXBwTmFtZSIsImluaXRpYWxpemVBcHAiLCJyYXdDb25maWciLCJleGlzdGluZ0FwcCIsIm5ld0FwcCIsInJlZ2lzdGVyVmVyc2lvbiIsImxpYnJhcnlLZXlPck5hbWUiLCJ2YXJpYW50IiwibGlicmFyeU1pc21hdGNoIiwidmVyc2lvbk1pc21hdGNoIiwid2FybmluZyIsIlNUT1JFX05BTUUiLCJkYlByb21pc2UiLCJnZXREYlByb21pc2UiLCJjcmVhdGVPYmplY3RTdG9yZSIsIm9yaWdpbmFsRXJyb3JNZXNzYWdlIiwid3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIiLCJoZWFydGJlYXRPYmplY3QiLCJwdXQiLCJjb21wdXRlS2V5IiwiaWRiR2V0RXJyb3IiLCJhcHBJZCIsIkhlYXJ0YmVhdFNlcnZpY2VJbXBsIiwiX2hlYXJ0YmVhdHNDYWNoZSIsIl9zdG9yYWdlIiwiSGVhcnRiZWF0U3RvcmFnZUltcGwiLCJfaGVhcnRiZWF0c0NhY2hlUHJvbWlzZSIsInJlYWQiLCJfYiIsImFnZW50IiwiZGF0ZSIsImdldFVUQ0RhdGVTdHJpbmciLCJoZWFydGJlYXRzIiwibGFzdFNlbnRIZWFydGJlYXREYXRlIiwic2luZ2xlRGF0ZUhlYXJ0YmVhdCIsImhiVGltZXN0YW1wIiwidmFsdWVPZiIsIm92ZXJ3cml0ZSIsImdldEhlYXJ0YmVhdHNIZWFkZXIiLCJoZWFydGJlYXRzVG9TZW5kIiwidW5zZW50RW50cmllcyIsImhlYXJ0YmVhdHNDYWNoZSIsIm1heFNpemUiLCJoZWFydGJlYXRFbnRyeSIsImhiIiwiZGF0ZXMiLCJjb3VudEJ5dGVzIiwicG9wIiwiZXh0cmFjdEhlYXJ0YmVhdHNGb3JIZWFkZXIiLCJoZWFkZXJTdHJpbmciLCJzdHJpbmdpZnkiLCJzdWJzdHJpbmciLCJfY2FuVXNlSW5kZXhlZERCUHJvbWlzZSIsInJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2siLCJpZGJIZWFydGJlYXRPYmplY3QiLCJyZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIiLCJoZWFydGJlYXRzT2JqZWN0IiwiZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0IiwiUEFDS0FHRV9WRVJTSU9OIiwiSU5URVJOQUxfQVVUSF9WRVJTSU9OIiwiaXNTZXJ2ZXJFcnJvciIsImdldEluc3RhbGxhdGlvbnNFbmRwb2ludCIsInByb2plY3RJZCIsImV4dHJhY3RBdXRoVG9rZW5JbmZvRnJvbVJlc3BvbnNlIiwidG9rZW4iLCJyZXF1ZXN0U3RhdHVzIiwiZXhwaXJlc0luIiwicmVzcG9uc2VFeHBpcmVzSW4iLCJOdW1iZXIiLCJjcmVhdGlvblRpbWUiLCJnZXRFcnJvckZyb21SZXNwb25zZSIsInJlcXVlc3ROYW1lIiwiZXJyb3JEYXRhIiwianNvbiIsInNlcnZlckNvZGUiLCJzZXJ2ZXJNZXNzYWdlIiwic2VydmVyU3RhdHVzIiwiZ2V0SGVhZGVycyIsImFwaUtleSIsIkhlYWRlcnMiLCJBY2NlcHQiLCJyZXRyeUlmU2VydmVyRXJyb3IiLCJtcyIsIlZBTElEX0ZJRF9QQVRURVJOIiwiZ2VuZXJhdGVGaWQiLCJmaWRCeXRlQXJyYXkiLCJVaW50OEFycmF5IiwiY3J5cHRvIiwibXNDcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJmaWQiLCJzdWJzdHIiLCJlbmNvZGUiLCJnZXRLZXkiLCJhcHBDb25maWciLCJmaWRDaGFuZ2VDYWxsYmFja3MiLCJmaWRDaGFuZ2VkIiwiY2FsbEZpZENoYW5nZUNhbGxiYWNrcyIsImNoYW5uZWwiLCJicm9hZGNhc3RDaGFubmVsIiwiQnJvYWRjYXN0Q2hhbm5lbCIsImJyb2FkY2FzdEZpZENoYW5nZSIsIk9CSkVDVF9TVE9SRV9OQU1FIiwib2xkVmFsdWUiLCJ1cGRhdGVGbiIsImdldEluc3RhbGxhdGlvbkVudHJ5IiwiaW5zdGFsbGF0aW9ucyIsInJlZ2lzdHJhdGlvblByb21pc2UiLCJpbnN0YWxsYXRpb25FbnRyeSIsIm9sZEVudHJ5IiwiY2xlYXJUaW1lZE91dFJlcXVlc3QiLCJyZWdpc3RyYXRpb25TdGF0dXMiLCJ1cGRhdGVPckNyZWF0ZUluc3RhbGxhdGlvbkVudHJ5IiwiZW50cnlXaXRoUHJvbWlzZSIsIm9uTGluZSIsImluUHJvZ3Jlc3NFbnRyeSIsInJlZ2lzdHJhdGlvblRpbWUiLCJyZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnkiLCJoZWFydGJlYXRTZXJ2aWNlUHJvdmlkZXIiLCJlbmRwb2ludCIsImhlYWRlcnMiLCJoZWFydGJlYXRTZXJ2aWNlIiwiaGVhcnRiZWF0c0hlYWRlciIsImF1dGhWZXJzaW9uIiwic2RrVmVyc2lvbiIsImZldGNoIiwib2siLCJyZXNwb25zZVZhbHVlIiwicmVmcmVzaFRva2VuIiwiYXV0aFRva2VuIiwiY3JlYXRlSW5zdGFsbGF0aW9uUmVxdWVzdCIsInJlZ2lzdGVySW5zdGFsbGF0aW9uIiwid2FpdFVudGlsRmlkUmVnaXN0cmF0aW9uIiwidHJpZ2dlclJlZ2lzdHJhdGlvbklmTmVjZXNzYXJ5IiwidXBkYXRlSW5zdGFsbGF0aW9uUmVxdWVzdCIsImdlbmVyYXRlQXV0aFRva2VuUmVxdWVzdCIsImdldEdlbmVyYXRlQXV0aFRva2VuRW5kcG9pbnQiLCJnZXRBdXRob3JpemF0aW9uSGVhZGVyIiwiZ2V0SGVhZGVyc1dpdGhBdXRoIiwiaW5zdGFsbGF0aW9uIiwicmVmcmVzaEF1dGhUb2tlbiIsImZvcmNlUmVmcmVzaCIsInRva2VuUHJvbWlzZSIsImlzRW50cnlSZWdpc3RlcmVkIiwib2xkQXV0aFRva2VuIiwiaXNBdXRoVG9rZW5FeHBpcmVkIiwidXBkYXRlQXV0aFRva2VuUmVxdWVzdCIsIndhaXRVbnRpbEF1dGhUb2tlblJlcXVlc3QiLCJpblByb2dyZXNzQXV0aFRva2VuIiwicmVxdWVzdFRpbWUiLCJtYWtlQXV0aFRva2VuUmVxdWVzdEluUHJvZ3Jlc3NFbnRyeSIsInVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSIsImZldGNoQXV0aFRva2VuRnJvbVNlcnZlciIsImdldE1pc3NpbmdWYWx1ZUVycm9yIiwidmFsdWVOYW1lIiwiSU5TVEFMTEFUSU9OU19OQU1FIiwiY29uZmlnS2V5cyIsImtleU5hbWUiLCJleHRyYWN0QXBwQ29uZmlnIiwiZ2V0SWQiLCJpbnN0YWxsYXRpb25zSW1wbCIsImdldFRva2VuIiwiY29tcGxldGVJbnN0YWxsYXRpb25SZWdpc3RyYXRpb24iLCJBTkFMWVRJQ1NfVFlQRSIsIkdUQUdfVVJMIiwiY3JlYXRlR3RhZ1RydXN0ZWRUeXBlc1NjcmlwdFVSTCIsInVybCIsInN0YXJ0c1dpdGgiLCJlcnIiLCJndGFnVVJMIiwicHJvbWlzZUFsbFNldHRsZWQiLCJwcm9taXNlcyIsImRlZmF1bHRSZXRyeURhdGEiLCJ0aHJvdHRsZU1ldGFkYXRhIiwiZ2V0VGhyb3R0bGVNZXRhZGF0YSIsInNldFRocm90dGxlTWV0YWRhdGEiLCJtZXRhZGF0YSIsImRlbGV0ZVRocm90dGxlTWV0YWRhdGEiLCJmZXRjaER5bmFtaWNDb25maWdXaXRoUmV0cnkiLCJyZXRyeURhdGEiLCJ0aW1lb3V0TWlsbGlzIiwibWVhc3VyZW1lbnRJZCIsInRocm90dGxlRW5kVGltZU1pbGxpcyIsInNpZ25hbCIsIkFuYWx5dGljc0Fib3J0U2lnbmFsIiwiYWJvcnQiLCJhdHRlbXB0RmV0Y2hEeW5hbWljQ29uZmlnV2l0aFJldHJ5IiwiYXBwRmllbGRzIiwiYmFja29mZk1pbGxpcyIsInRpbWVvdXQiLCJzZXRBYm9ydGFibGVUaW1lb3V0IiwiYXBwVXJsIiwiZXJyb3JNZXNzYWdlIiwianNvblJlc3BvbnNlIiwiX2lnbm9yZWQiLCJodHRwU3RhdHVzIiwicmVzcG9uc2VNZXNzYWdlIiwiZmV0Y2hEeW5hbWljQ29uZmlnIiwiaXNSZXRyaWFibGVFcnJvciIsImRlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0IiwiZGVmYXVsdENvbnNlbnRTZXR0aW5nc0ZvckluaXQiLCJfaW5pdGlhbGl6ZUFuYWx5dGljcyIsImR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QiLCJtZWFzdXJlbWVudElkVG9BcHBJZCIsImd0YWdDb3JlIiwiZGF0YUxheWVyTmFtZSIsImR5bmFtaWNDb25maWdQcm9taXNlIiwiZmlkUHJvbWlzZSIsImVycm9ySW5mbyIsInZhbGlkYXRlSW5kZXhlZERCIiwiZW52SXNWYWxpZCIsImR5bmFtaWNDb25maWciLCJzY3JpcHRUYWdzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJmaW5kR3RhZ1NjcmlwdE9uUGFnZSIsInRydXN0ZWRUeXBlc1BvbGljeSIsInBvbGljeU5hbWUiLCJwb2xpY3lPcHRpb25zIiwidHJ1c3RlZFR5cGVzIiwiY3JlYXRlUG9saWN5IiwiY3JlYXRlVHJ1c3RlZFR5cGVzUG9saWN5IiwiY3JlYXRlU2NyaXB0VVJMIiwic2NyaXB0IiwiZ3RhZ1NjcmlwdFVSTCIsImhlYWQiLCJpbnNlcnRTY3JpcHRUYWciLCJjb25maWdQcm9wZXJ0aWVzIiwiQW5hbHl0aWNzU2VydmljZSIsImluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAiLCJndGFnQ29yZUZ1bmN0aW9uIiwid3JhcHBlZEd0YWdGdW5jdGlvbiIsImdsb2JhbEluaXREb25lIiwiZmFjdG9yeSIsIm1pc21hdGNoZWRFbnZNZXNzYWdlcyIsInJ1bnRpbWUiLCJjaHJvbWUiLCJicm93c2VyIiwiY29va2llRW5hYmxlZCIsImRldGFpbHMiLCJ3YXJuT25Ccm93c2VyQ29udGV4dE1pc21hdGNoIiwiZGF0YUxheWVyIiwiZ2V0T3JDcmVhdGVEYXRhTGF5ZXIiLCJ3cmFwcGVkR3RhZyIsImd0YWdGdW5jdGlvbk5hbWUiLCJfYXJncyIsImNvbW1hbmQiLCJndGFnUGFyYW1zIiwiaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvciIsImdhU2VuZFRvTGlzdCIsImR5bmFtaWNDb25maWdSZXN1bHRzIiwic2VuZFRvSWQiLCJmb3VuZENvbmZpZyIsImluaXRpYWxpemF0aW9uUHJvbWlzZSIsImd0YWdPbkV2ZW50IiwiY29ycmVzcG9uZGluZ0FwcElkIiwiZ3RhZ09uQ29uZmlnIiwiZmllbGROYW1lIiwiY3VzdG9tUGFyYW1zIiwid3JhcEd0YWciLCJ3cmFwT3JDcmVhdGVHdGFnIiwibG9nRXZlbnQiLCJhbmFseXRpY3NJbnN0YW5jZSIsImV2ZW50TmFtZSIsImV2ZW50UGFyYW1zIiwiZ3RhZ0Z1bmN0aW9uIiwiZ2xvYmFsIiwibG9nRXZlbnQkMSIsImFuYWx5dGljc09wdGlvbnMiLCJhbmFseXRpY3MiLCJyZWFzb24iLCJmaXJlYmFzZUNvbmZpZyIsImF1dGhEb21haW4iLCJkYXRhYmFzZVVSTCIsInN0b3JhZ2VCdWNrZXQiLCJtZXNzYWdpbmdTZW5kZXJJZCIsIkZpcmViYXNlQW5hbHl0aWNzTWFuYWdlciIsImZpcmViYXNlQXBwIiwiZmlyZWJhc2VBbmFseXRpY3MiLCJhbmFseXRpY3NQcm92aWRlciIsImluaXRpYWxpemVBbmFseXRpY3MiLCJnZXRBbmFseXRpY3MiLCJnZXRJbnN0YW5jZSIsImxvZ0V2ZW50cyIsImxvYWRpbmdTY3JlZW4iLCJoYW5kbGVTZXJ2aWNlV29ya2VyTWVzc2FnZSIsIm1zZyIsInByb2dyZXNzVmFsdWUiLCJwcm9ncmVzc0JhciIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJBbmRyb2lkIiwiaXNDb250ZW50Q2FjaGVkIiwiZ2V0SXRlbSIsImNhY2hlZFN0YXR1cyIsInJlYWRMYW5ndWFnZURhdGFGcm9tQ2FjaGVBbmROb3RpZnlBbmRyb2lkQXBwIiwiaGFuZGxlTG9hZGluZ01lc3NhZ2UiLCJwcm9ncmVzcyIsImNvbmZpcm0iLCJyZWxvYWQiLCJoYW5kbGVVcGRhdGVGb3VuZE1lc3NhZ2UiLCJxdWVyeVN0cmluZyIsInNlYXJjaCIsIlVSTFNlYXJjaFBhcmFtcyIsImZpcmViYXNlQW5hbHl0aWNzTWFuYWdlciIsImNvbnRlbnRQYXJzZXIiLCJwbGF5QmFja0VuZ2luZSIsImVuZm9yY2VMYW5kc2NhcGVNb2RlIiwicmVnaXN0ZXJTZXJ2aWNlV29ya2VyIiwic2V0Q29udGFpbmVyQXBwT3JpZW50YXRpb24iLCJ3YiIsInJlYWR5IiwibGFuZyIsImJvb2tEYXRhIiwiY29udGVudEZpbGUiXSwic291cmNlUm9vdCI6IiJ9