/*! For license information please see app.js.LICENSE.txt */
(()=>{"use strict";var e={913:()=>{try{self["workbox:core:6.5.3"]&&_()}catch(e){}},550:()=>{try{self["workbox:expiration:6.5.3"]&&_()}catch(e){}},80:()=>{try{self["workbox:routing:6.5.3"]&&_()}catch(e){}},873:()=>{try{self["workbox:strategies:6.5.3"]&&_()}catch(e){}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}(()=>{var e;!function(e){e.CuriousReader="CuriousReader",e.GDL="GDL",e.Unknown="Unknown"}(e||(e={}));var t=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class i{constructor(e){this.emptyGlowImageTag="empty_glow_image",this.contentFilePath=e}parseBook(){return t(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{this.parseContentJSONFile().then((t=>{this.contentJSON=t,console.log("Content JSON file parsed!"),console.log(this.contentJSON);let n={pages:[],bookType:this.determineBookType()};n.pages=this.parsePages(n),e(n)})).catch((e=>{t(e)}))}))}))}determineBookType(){return void 0!==this.contentJSON.presentation?e.CuriousReader:void 0!==this.contentJSON.chapters?e.GDL:e.Unknown}parsePages(t){let n=[];if(t.bookType===e.CuriousReader){let e=this.contentJSON.presentation.slides,t=this.contentJSON.presentation.globalBackgroundSelector.fillGlobalBackground;for(let i=0;i<e.length;i++){let r=e[i],o={visualElements:[],backgroundColor:t};o.visualElements=this.parsePageCR(r),n.push(o)}}else if(t.bookType===e.GDL){let e=this.contentJSON.chapters,t="#FCFCF2";for(let i=0;i<e.length;i++){let r=e[i],o={visualElements:[],backgroundColor:t};o.visualElements=this.parsePageGDL(r),n.push(o)}}else console.log("Unknown book type!");return n}parsePageCR(e){let t=[],n=e.elements;for(let e=0;e<n.length;e++){let i=n[e].action.library;if(i.includes("AdvancedText")){let i=this.parseTextElementCR(n[e]);t.push(i)}else if(i.includes("Image")){let i=this.parseImageElementCR(n[e]);t.push(i)}}return t}parsePageGDL(e){let t=[],n=e.params.content;for(let e=0;e<n.length;e++){let i=n[e].content.library;if(i.includes("AdvancedText")){let i=this.parseTextElementGDL(n[e].content.params);t.push(i)}else if(i.includes("Image")){let i=this.parseImageElementGDL(n[e].content.params);t.push(i)}}return t}parseTextElementCR(e){return{type:"text",positionX:e.x,positionY:e.y,width:e.width,height:e.height,textContentAsHTML:e.action.params.text}}parseTextElementGDL(e){return{type:"text",positionX:NaN,positionY:NaN,width:NaN,height:NaN,textContentAsHTML:e.text}}parseImageElementCR(e){let t="";return t=void 0===e.action.params.file?this.emptyGlowImageTag:e.action.params.file.path,{type:"image",positionX:e.x,positionY:e.y,width:e.width,height:e.height,imageSource:t}}parseImageElementGDL(e){return{type:"image",positionX:NaN,positionY:NaN,width:e.width,height:e.height,imageSource:e.file.path}}parseAudioElementCR(e){return{type:"audio",positionX:e.position.x,positionY:e.position.y,width:e.size.width,height:e.size.height,audioSrc:e.action.audioSrc,styles:e.styles}}parseContentJSONFile(){return t(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{let n=new XMLHttpRequest;n.open("GET",this.contentFilePath,!0),n.responseType="json",n.onload=function(){if(200===n.status){let t=n.response;delete t.l10n,delete t.override,e(t)}else t(n.response)},n.send()}))}))}}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o="(prefers-reduced-motion: reduce)";function s(e){e.length=0}function a(e,t,n){return Array.prototype.slice.call(e,t,n)}function c(e){return e.bind.apply(e,[null].concat(a(arguments,1)))}var u=setTimeout,l=function(){};function d(e){return requestAnimationFrame(e)}function h(e,t){return typeof t===e}function f(e){return!y(e)&&h("object",e)}var p=Array.isArray,g=c(h,"function"),m=c(h,"string"),v=c(h,"undefined");function y(e){return null===e}function w(e){try{return e instanceof(e.ownerDocument.defaultView||window).HTMLElement}catch(e){return!1}}function b(e){return p(e)?e:[e]}function _(e,t){b(e).forEach(t)}function x(e,t){return e.indexOf(t)>-1}function E(e,t){return e.push.apply(e,b(t)),e}function C(e,t,n){e&&_(t,(function(t){t&&e.classList[n?"add":"remove"](t)}))}function S(e,t){C(e,m(t)?t.split(" "):t,!0)}function k(e,t){_(t,e.appendChild.bind(e))}function L(e,t){_(e,(function(e){var n=(t||e).parentNode;n&&n.insertBefore(e,t)}))}function P(e,t){return w(e)&&(e.msMatchesSelector||e.matches).call(e,t)}function D(e,t){var n=e?a(e.children):[];return t?n.filter((function(e){return P(e,t)})):n}function N(e,t){return t?D(e,t)[0]:e.firstElementChild}var T=Object.keys;function R(e,t,n){return e&&(n?T(e).reverse():T(e)).forEach((function(n){"__proto__"!==n&&t(e[n],n)})),e}function A(e){return a(arguments,1).forEach((function(t){R(t,(function(n,i){e[i]=t[i]}))})),e}function M(e){return a(arguments,1).forEach((function(t){R(t,(function(t,n){p(t)?e[n]=t.slice():f(t)?e[n]=M({},f(e[n])?e[n]:{},t):e[n]=t}))})),e}function O(e,t){_(t||T(e),(function(t){delete e[t]}))}function I(e,t){_(e,(function(e){_(t,(function(t){e&&e.removeAttribute(t)}))}))}function F(e,t,n){f(t)?R(t,(function(t,n){F(e,n,t)})):_(e,(function(e){y(n)||""===n?I(e,t):e.setAttribute(t,String(n))}))}function q(e,t,n){var i=document.createElement(e);return t&&(m(t)?S(i,t):F(i,t)),n&&k(n,i),i}function B(e,t,n){if(v(n))return getComputedStyle(e)[t];y(n)||(e.style[t]=""+n)}function W(e,t){B(e,"display",t)}function z(e){e.setActive&&e.setActive()||e.focus({preventScroll:!0})}function j(e,t){return e.getAttribute(t)}function H(e,t){return e&&e.classList.contains(t)}function U(e){return e.getBoundingClientRect()}function G(e){_(e,(function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}))}function X(e){return N((new DOMParser).parseFromString(e,"text/html").body)}function J(e,t){e.preventDefault(),t&&(e.stopPropagation(),e.stopImmediatePropagation())}function K(e,t){return e&&e.querySelector(t)}function $(e,t){return t?a(e.querySelectorAll(t)):[]}function Y(e,t){C(e,t,!1)}function V(e){return e.timeStamp}function Q(e){return m(e)?e:e?e+"px":""}var Z="splide";function ee(e,t){if(!e)throw new Error("[splide] "+(t||""))}var te=Math.min,ne=Math.max,ie=Math.floor,re=Math.ceil,oe=Math.abs;function se(e,t,n){return oe(e-t)<n}function ae(e,t,n,i){var r=te(t,n),o=ne(t,n);return i?r<e&&e<o:r<=e&&e<=o}function ce(e,t,n){var i=te(t,n),r=ne(t,n);return te(ne(i,e),r)}function ue(e){return+(e>0)-+(e<0)}function le(e,t){return _(t,(function(t){e=e.replace("%s",""+t)})),e}function de(e){return e<10?"0"+e:""+e}var he={};function fe(){var e=[];function t(e,t,n){_(e,(function(e){e&&_(t,(function(t){t.split(" ").forEach((function(t){var i=t.split(".");n(e,i[0],i[1])}))}))}))}return{bind:function(n,i,r,o){t(n,i,(function(t,n,i){var s="addEventListener"in t,a=s?t.removeEventListener.bind(t,n,r,o):t.removeListener.bind(t,r);s?t.addEventListener(n,r,o):t.addListener(r),e.push([t,n,i,r,a])}))},unbind:function(n,i,r){t(n,i,(function(t,n,i){e=e.filter((function(e){return!!(e[0]!==t||e[1]!==n||e[2]!==i||r&&e[3]!==r)||(e[4](),!1)}))}))},dispatch:function(e,t,n){var i;return"function"==typeof CustomEvent?i=new CustomEvent(t,{bubbles:!0,detail:n}):(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!1,n),e.dispatchEvent(i),i},destroy:function(){e.forEach((function(e){e[4]()})),s(e)}}}var pe="mounted",ge="ready",me="move",ve="moved",ye="click",we="refresh",be="updated",_e="resize",xe="resized",Ee="scroll",Ce="scrolled",Se="destroy",ke="navigation:mounted",Le="autoplay:play",Pe="autoplay:pause",De="lazyload:loaded",Ne="ei";function Te(e){var t=e?e.event.bus:document.createDocumentFragment(),n=fe();return e&&e.event.on(Se,n.destroy),A(n,{bus:t,on:function(e,i){n.bind(t,b(e).join(" "),(function(e){i.apply(i,p(e.detail)?e.detail:[])}))},off:c(n.unbind,t),emit:function(e){n.dispatch(t,e,a(arguments,1))}})}function Re(e,t,n,i){var r,o,s=Date.now,a=0,c=!0,u=0;function l(){if(!c){if(a=e?te((s()-r)/e,1):1,n&&n(a),a>=1&&(t(),r=s(),i&&++u>=i))return h();o=d(l)}}function h(){c=!0}function f(){o&&cancelAnimationFrame(o),a=0,o=0,c=!0}return{start:function(t){t||f(),r=s()-(t?a*e:0),c=!1,o=d(l)},rewind:function(){r=s(),a=0,n&&n(a)},pause:h,cancel:f,set:function(t){e=t},isPaused:function(){return c}}}var Ae="ArrowLeft",Me="ArrowRight",Oe="ArrowUp",Ie="ArrowDown",Fe="ttb",qe={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[Oe,Me],ArrowRight:[Ie,Ae]};var Be="role",We="tabindex",ze="aria-controls",je="aria-current",He="aria-selected",Ue="aria-label",Ge="aria-labelledby",Xe="aria-hidden",Je="aria-orientation",Ke="aria-roledescription",$e="aria-live",Ye="aria-busy",Ve="aria-atomic",Qe=[Be,We,"disabled",ze,je,Ue,Ge,Xe,Je,Ke],Ze=Z,et="splide__track",tt="splide__slide",nt=tt+"--clone",it="splide__arrows",rt="splide__arrow",ot=rt+"--prev",st=rt+"--next",at="splide__pagination",ct="is-active",ut="is-prev",lt="is-next",dt="is-visible",ht="is-loading",ft="is-focus-in",pt="is-overflow",gt=[ct,dt,ut,lt,ht,ft,pt],mt={slide:tt,clone:nt,arrows:it,arrow:rt,prev:ot,next:st,pagination:at,page:"splide__pagination__page",spinner:"splide__spinner"},vt="touchmove mousemove",yt="touchend touchcancel mouseup click",wt="slide",bt="loop",_t="fade";var xt={passive:!1,capture:!0},Et={Spacebar:" ",Right:Me,Left:Ae,Up:Oe,Down:Ie};function Ct(e){return e=m(e)?e:e.key,Et[e]||e}var St="keydown",kt="data-splide-lazy",Lt="data-splide-lazy-srcset",Pt=[" ","Enter"],Dt=Object.freeze({__proto__:null,Media:function(e,t,n){var i=e.state,r=n.breakpoints||{},s=n.reducedMotion||{},a=fe(),c=[];function u(e){e&&a.destroy()}function l(e,t){var n=matchMedia(t);a.bind(n,"change",d),c.push([e,n])}function d(){var t=i.is(7),r=n.direction,o=c.reduce((function(e,t){return M(e,t[1].matches?t[0]:{})}),{});O(n),h(o),n.destroy?e.destroy("completely"===n.destroy):t?(u(!0),e.mount()):r!==n.direction&&e.refresh()}function h(t,r,o){M(n,t),r&&M(Object.getPrototypeOf(n),t),!o&&i.is(1)||e.emit(be,n)}return{setup:function(){var e="min"===n.mediaQuery;T(r).sort((function(t,n){return e?+t-+n:+n-+t})).forEach((function(t){l(r[t],"("+(e?"min":"max")+"-width:"+t+"px)")})),l(s,o),d()},destroy:u,reduce:function(e){matchMedia(o).matches&&(e?M(n,s):O(n,T(s)))},set:h}},Direction:function(e,t,n){return{resolve:function(e,t,i){var r="rtl"!==(i=i||n.direction)||t?i===Fe?0:-1:1;return qe[e]&&qe[e][r]||e.replace(/width|left|right/i,(function(e,t){var n=qe[e.toLowerCase()][r]||e;return t>0?n.charAt(0).toUpperCase()+n.slice(1):n}))},orient:function(e){return e*("rtl"===n.direction?1:-1)}}},Elements:function(e,t,n){var i,r,o,a=Te(e),c=a.on,u=a.bind,l=e.root,d=n.i18n,h={},f=[],p=[],m=[];function v(){var e,t,o;i=b("."+et),r=N(i,".splide__list"),ee(i&&r,"A track/list element is missing."),E(f,D(r,".splide__slide:not(."+nt+")")),R({arrows:it,pagination:at,prev:ot,next:st,bar:"splide__progress__bar",toggle:"splide__toggle"},(function(e,t){h[t]=b("."+e)})),A(h,{root:l,track:i,list:r,slides:f}),t=l.id||""+(e=Z)+de(he[e]=(he[e]||0)+1),o=n.role,l.id=t,i.id=i.id||t+"-track",r.id=r.id||t+"-list",!j(l,Be)&&"SECTION"!==l.tagName&&o&&F(l,Be,o),F(l,Ke,d.carousel),F(r,Be,"presentation"),w()}function y(e){var t=Qe.concat("style");s(f),Y(l,p),Y(i,m),I([i,r],t),I(l,e?t:["style",Ke])}function w(){Y(l,p),Y(i,m),p=_(Ze),m=_(et),S(l,p),S(i,m),F(l,Ue,n.label),F(l,Ge,n.labelledby)}function b(e){var t=K(l,e);return t&&function(e,t){if(g(e.closest))return e.closest(t);for(var n=e;n&&1===n.nodeType&&!P(n,t);)n=n.parentElement;return n}(t,".splide")===l?t:void 0}function _(e){return[e+"--"+n.type,e+"--"+n.direction,n.drag&&e+"--draggable",n.isNavigation&&e+"--nav",e===Ze&&ct]}return A(h,{setup:v,mount:function(){c(we,y),c(we,v),c(be,w),u(document,"touchstart mousedown keydown",(function(e){o="keydown"===e.type}),{capture:!0}),u(l,"focusin",(function(){C(l,ft,!!o)}))},destroy:y})},Slides:function(e,t,n){var i=Te(e),r=i.on,o=i.emit,a=i.bind,u=t.Elements,l=u.slides,d=u.list,h=[];function f(){l.forEach((function(e,t){v(e,t,-1)}))}function p(){E((function(e){e.destroy()})),s(h)}function v(t,n,i){var r=function(e,t,n,i){var r,o=Te(e),s=o.on,a=o.emit,u=o.bind,l=e.Components,d=e.root,h=e.options,f=h.isNavigation,p=h.updateOnMove,g=h.i18n,m=h.pagination,v=h.slideFocus,y=l.Direction.resolve,w=j(i,"style"),b=j(i,Ue),_=n>-1,x=N(i,".splide__slide__container");function E(){var r=e.splides.map((function(e){var n=e.splide.Components.Slides.getAt(t);return n?n.slide.id:""})).join(" ");F(i,Ue,le(g.slideX,(_?n:t)+1)),F(i,ze,r),F(i,Be,v?"button":""),v&&I(i,Ke)}function S(){r||k()}function k(){if(!r){var n=e.index;(o=L())!==H(i,ct)&&(C(i,ct,o),F(i,je,f&&o||""),a(o?"active":"inactive",P)),function(){var t=function(){if(e.is(_t))return L();var t=U(l.Elements.track),n=U(i),r=y("left",!0),o=y("right",!0);return ie(t[r])<=re(n[r])&&ie(n[o])<=re(t[o])}(),n=!t&&(!L()||_);if(e.state.is([4,5])||F(i,Xe,n||""),F($(i,h.focusableNodes||""),We,n?-1:""),v&&F(i,We,n?-1:0),t!==H(i,dt)&&(C(i,dt,t),a(t?"visible":"hidden",P)),!t&&document.activeElement===i){var r=l.Slides.getAt(e.index);r&&z(r.slide)}}(),C(i,ut,t===n-1),C(i,lt,t===n+1)}var o}function L(){var i=e.index;return i===t||h.cloneStatus&&i===n}var P={index:t,slideIndex:n,slide:i,container:x,isClone:_,mount:function(){_||(i.id=d.id+"-slide"+de(t+1),F(i,Be,m?"tabpanel":"group"),F(i,Ke,g.slide),F(i,Ue,b||le(g.slideLabel,[t+1,e.length]))),u(i,"click",c(a,ye,P)),u(i,"keydown",c(a,"sk",P)),s([ve,"sh",Ce],k),s(ke,E),p&&s(me,S)},destroy:function(){r=!0,o.destroy(),Y(i,gt),I(i,Qe),F(i,"style",w),F(i,Ue,b||"")},update:k,style:function(e,t,n){B(n&&x||i,e,t)},isWithin:function(n,i){var r=oe(n-t);return _||!h.rewind&&!e.is(bt)||(r=te(r,e.length-r)),r<=i}};return P}(e,n,i,t);r.mount(),h.push(r),h.sort((function(e,t){return e.index-t.index}))}function y(e){return e?D((function(e){return!e.isClone})):h}function E(e,t){y(t).forEach(e)}function D(e){return h.filter(g(e)?e:function(t){return m(e)?P(t.slide,e):x(b(e),t.index)})}return{mount:function(){f(),r(we,p),r(we,f)},destroy:p,update:function(){E((function(e){e.update()}))},register:v,get:y,getIn:function(e){var i=t.Controller,r=i.toIndex(e),o=i.hasFocus()?1:n.perPage;return D((function(e){return ae(e.index,r,r+o-1)}))},getAt:function(e){return D(e)[0]},add:function(e,t){_(e,(function(e){if(m(e)&&(e=X(e)),w(e)){var i=l[t];i?L(e,i):k(d,e),S(e,n.classes.slide),r=e,s=c(o,_e),u=$(r,"img"),(h=u.length)?u.forEach((function(e){a(e,"load error",(function(){--h||s()}))})):s()}var r,s,u,h})),o(we)},remove:function(e){G(D(e).map((function(e){return e.slide}))),o(we)},forEach:E,filter:D,style:function(e,t,n){E((function(i){i.style(e,t,n)}))},getLength:function(e){return e?l.length:h.length},isEnough:function(){return h.length>n.perPage}}},Layout:function(e,t,n){var i,r,o,s=Te(e),a=s.on,u=s.bind,l=s.emit,d=t.Slides,h=t.Direction.resolve,p=t.Elements,g=p.root,m=p.track,v=p.list,y=d.getAt,w=d.style;function b(){i=n.direction===Fe,B(g,"maxWidth",Q(n.width)),B(m,h("paddingLeft"),x(!1)),B(m,h("paddingRight"),x(!0)),_(!0)}function _(e){var t,s=U(g);(e||r.width!==s.width||r.height!==s.height)&&(B(m,"height",(t="",i&&(ee(t=E(),"height or heightRatio is missing."),t="calc("+t+" - "+x(!1)+" - "+x(!0)+")"),t)),w(h("marginRight"),Q(n.gap)),w("width",n.autoWidth?null:Q(n.fixedWidth)||(i?"":S())),w("height",Q(n.fixedHeight)||(i?n.autoHeight?null:S():E()),!0),r=s,l(xe),o!==(o=T())&&(C(g,pt,o),l("overflow",o)))}function x(e){var t=n.padding,i=h(e?"right":"left");return t&&Q(t[i]||(f(t)?0:t))||"0px"}function E(){return Q(n.height||U(v).width*n.heightRatio)}function S(){var e=Q(n.gap);return"calc((100%"+(e&&" + "+e)+")/"+(n.perPage||1)+(e&&" - "+e)+")"}function k(){return U(v)[h("width")]}function L(e,t){var n=y(e||0);return n?U(n.slide)[h("width")]+(t?0:N()):0}function P(e,t){var n=y(e);if(n){var i=U(n.slide)[h("right")],r=U(v)[h("left")];return oe(i-r)+(t?0:N())}return 0}function D(t){return P(e.length-1)-P(0)+L(0,t)}function N(){var e=y(0);return e&&parseFloat(B(e.slide,h("marginRight")))||0}function T(){return e.is(_t)||D(!0)>k()}return{mount:function(){var e,t;b(),u(window,"resize load",(e=c(l,_e),t=Re(0,e,null,1),function(){t.isPaused()&&t.start()})),a([be,we],b),a(_e,_)},resize:_,listSize:k,slideSize:L,sliderSize:D,totalSize:P,getPadding:function(e){return parseFloat(B(m,h("padding"+(e?"Right":"Left"))))||0},isOverflow:T}},Clones:function(e,t,n){var i,r=Te(e),o=r.on,a=t.Elements,c=t.Slides,u=t.Direction.resolve,l=[];function d(){o(we,h),o([be,_e],p),(i=g())&&(function(t){var i=c.get().slice(),r=i.length;if(r){for(;i.length<t;)E(i,i);E(i.slice(-t),i.slice(0,t)).forEach((function(o,s){var u=s<t,d=function(t,i){var r=t.cloneNode(!0);return S(r,n.classes.clone),r.id=e.root.id+"-clone"+de(i+1),r}(o.slide,s);u?L(d,i[0].slide):k(a.list,d),E(l,d),c.register(d,s-t+(u?0:r),o.index)}))}}(i),t.Layout.resize(!0))}function h(){f(),d()}function f(){G(l),s(l),r.destroy()}function p(){var e=g();i!==e&&(i<e||!e)&&r.emit(we)}function g(){var i=n.clones;if(e.is(bt)){if(v(i)){var r=n[u("fixedWidth")]&&t.Layout.slideSize(0);i=r&&re(U(a.track)[u("width")]/r)||n[u("autoWidth")]&&e.length||2*n.perPage}}else i=0;return i}return{mount:d,destroy:f}},Move:function(e,t,n){var i,r=Te(e),o=r.on,s=r.emit,a=e.state.set,c=t.Layout,u=c.slideSize,l=c.getPadding,d=c.totalSize,h=c.listSize,f=c.sliderSize,p=t.Direction,g=p.resolve,m=p.orient,y=t.Elements,w=y.list,b=y.track;function _(){t.Controller.isBusy()||(t.Scroll.cancel(),x(e.index),t.Slides.update())}function x(e){E(L(e,!0))}function E(n,i){if(!e.is(_t)){var r=i?n:function(n){if(e.is(bt)){var i=k(n),r=i>t.Controller.getEnd();(i<0||r)&&(n=C(n,r))}return n}(n);B(w,"transform","translate"+g("X")+"("+r+"px)"),n!==r&&s("sh")}}function C(e,t){var n=e-D(t),i=f();return e-m(i*(re(oe(n)/i)||1))*(t?1:-1)}function S(){E(P(),!0),i.cancel()}function k(e){for(var n=t.Slides.get(),i=0,r=1/0,o=0;o<n.length;o++){var s=n[o].index,a=oe(L(s,!0)-e);if(!(a<=r))break;r=a,i=s}return i}function L(t,i){var r=m(d(t-1)-function(e){var t=n.focus;return"center"===t?(h()-u(e,!0))/2:+t*u(e)||0}(t));return i?function(t){return n.trimSpace&&e.is(wt)&&(t=ce(t,0,m(f(!0)-h()))),t}(r):r}function P(){var e=g("left");return U(w)[e]-U(b)[e]+m(l(!1))}function D(e){return L(e?t.Controller.getEnd():0,!!n.trimSpace)}return{mount:function(){i=t.Transition,o([pe,xe,be,we],_)},move:function(e,t,n,r){var o,c;e!==t&&(o=e>n,c=m(C(P(),o)),o?c>=0:c<=w[g("scrollWidth")]-U(b)[g("width")])&&(S(),E(C(P(),e>n),!0)),a(4),s(me,t,n,e),i.start(t,(function(){a(3),s(ve,t,n,e),r&&r()}))},jump:x,translate:E,shift:C,cancel:S,toIndex:k,toPosition:L,getPosition:P,getLimit:D,exceededLimit:function(e,t){t=v(t)?P():t;var n=!0!==e&&m(t)<m(D(!1)),i=!1!==e&&m(t)>m(D(!0));return n||i},reposition:_}},Controller:function(e,t,n){var i,r,o,s,a=Te(e),u=a.on,l=a.emit,d=t.Move,h=d.getPosition,f=d.getLimit,p=d.toPosition,g=t.Slides,y=g.isEnough,w=g.getLength,b=n.omitEnd,_=e.is(bt),x=e.is(wt),E=c(D,!1),C=c(D,!0),S=n.start||0,k=S;function L(){r=w(!0),o=n.perMove,s=n.perPage,i=R();var e=ce(S,0,b?i:r-1);e!==S&&(S=e,d.reposition())}function P(){i!==R()&&l(Ne)}function D(e,t){var n=o||(I()?1:s),r=N(S+n*(e?-1:1),S,!(o||I()));return-1===r&&x&&!se(h(),f(!e),1)?e?0:i:t?r:T(r)}function N(t,a,c){if(y()||I()){var u=function(t){if(x&&"move"===n.trimSpace&&t!==S)for(var i=h();i===p(t,!0)&&ae(t,0,e.length-1,!n.rewind);)t<S?--t:++t;return t}(t);u!==t&&(a=t,t=u,c=!1),t<0||t>i?t=o||!ae(0,t,a,!0)&&!ae(i,a,t,!0)?_?c?t<0?-(r%s||s):r:t:n.rewind?t<0?i:0:-1:A(M(t)):c&&t!==a&&(t=A(M(a)+(t<a?-1:1)))}else t=-1;return t}function T(e){return _?(e+r)%r||0:e}function R(){for(var e=r-(I()||_&&o?1:s);b&&e-- >0;)if(p(r-1,!0)!==p(e,!0)){e++;break}return ce(e,0,r-1)}function A(e){return ce(I()?e:s*e,0,i)}function M(e){return I()?te(e,i):ie((e>=i?r-1:e)/s)}function O(e){e!==S&&(k=S,S=e)}function I(){return!v(n.focus)||n.isNavigation}function F(){return e.state.is([4,5])&&!!n.waitForTransition}return{mount:function(){L(),u([be,we,Ne],L),u(xe,P)},go:function(e,t,n){if(!F()){var r=function(e){var t=S;if(m(e)){var n=e.match(/([+\-<>])(\d+)?/)||[],r=n[1],o=n[2];"+"===r||"-"===r?t=N(S+ +(""+r+(+o||1)),S):">"===r?t=o?A(+o):E(!0):"<"===r&&(t=C(!0))}else t=_?e:ce(e,0,i);return t}(e),o=T(r);o>-1&&(t||o!==S)&&(O(o),d.move(r,o,k,n))}},scroll:function(e,n,r,o){t.Scroll.scroll(e,n,r,(function(){var e=T(d.toIndex(h()));O(b?te(e,i):e),o&&o()}))},getNext:E,getPrev:C,getAdjacent:D,getEnd:R,setIndex:O,getIndex:function(e){return e?k:S},toIndex:A,toPage:M,toDest:function(e){var t=d.toIndex(e);return x?ce(t,0,i):t},hasFocus:I,isBusy:F}},Arrows:function(e,t,n){var i,r,o=Te(e),s=o.on,a=o.bind,u=o.emit,l=n.classes,d=n.i18n,h=t.Elements,f=t.Controller,p=h.arrows,g=h.track,m=p,v=h.prev,y=h.next,w={};function b(){var e;!(e=n.arrows)||v&&y||(m=p||q("div",l.arrows),v=C(!0),y=C(!1),i=!0,k(m,[v,y]),!p&&L(m,g)),v&&y&&(A(w,{prev:v,next:y}),W(m,e?"":"none"),S(m,r=it+"--"+n.direction),e&&(s([pe,ve,we,Ce,Ne],P),a(y,"click",c(E,">")),a(v,"click",c(E,"<")),P(),F([v,y],ze,g.id),u("arrows:mounted",v,y))),s(be,_)}function _(){x(),b()}function x(){o.destroy(),Y(m,r),i?(G(p?[v,y]:m),v=y=null):I([v,y],Qe)}function E(e){f.go(e,!0)}function C(e){return X('<button class="'+l.arrow+" "+(e?l.prev:l.next)+'" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="40" height="40" focusable="false"><path d="'+(n.arrowPath||"m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z")+'" />')}function P(){if(v&&y){var t=e.index,n=f.getPrev(),i=f.getNext(),r=n>-1&&t<n?d.last:d.prev,o=i>-1&&t>i?d.first:d.next;v.disabled=n<0,y.disabled=i<0,F(v,Ue,r),F(y,Ue,o),u("arrows:updated",v,y,n,i)}}return{arrows:w,mount:b,destroy:x,update:P}},Autoplay:function(e,t,n){var i,r,o=Te(e),s=o.on,a=o.bind,c=o.emit,u=Re(n.interval,e.go.bind(e,">"),(function(e){var t=d.bar;t&&B(t,"width",100*e+"%"),c("autoplay:playing",e)})),l=u.isPaused,d=t.Elements,h=t.Elements,f=h.root,p=h.toggle,g=n.autoplay,m="pause"===g;function v(){l()&&t.Slides.isEnough()&&(u.start(!n.resetProgress),r=i=m=!1,b(),c(Le))}function y(e){void 0===e&&(e=!0),m=!!e,b(),l()||(u.pause(),c(Pe))}function w(){m||(i||r?y(!1):v())}function b(){p&&(C(p,ct,!m),F(p,Ue,n.i18n[m?"play":"pause"]))}function _(e){var i=t.Slides.getAt(e);u.set(i&&+j(i.slide,"data-splide-interval")||n.interval)}return{mount:function(){g&&(n.pauseOnHover&&a(f,"mouseenter mouseleave",(function(e){i="mouseenter"===e.type,w()})),n.pauseOnFocus&&a(f,"focusin focusout",(function(e){r="focusin"===e.type,w()})),p&&a(p,"click",(function(){m?v():y(!0)})),s([me,Ee,we],u.rewind),s(me,_),p&&F(p,ze,d.track.id),m||v(),b())},destroy:u.cancel,play:v,pause:y,isPaused:l}},Cover:function(e,t,n){var i=Te(e).on;function r(e){t.Slides.forEach((function(t){var n=N(t.container||t.slide,"img");n&&n.src&&o(e,n,t)}))}function o(e,t,n){n.style("background",e?'center/cover no-repeat url("'+t.src+'")':"",!0),W(t,e?"none":"")}return{mount:function(){n.cover&&(i(De,c(o,!0)),i([pe,be,we],c(r,!0)))},destroy:c(r,!1)}},Scroll:function(e,t,n){var i,r,o=Te(e),s=o.on,a=o.emit,u=e.state.set,l=t.Move,d=l.getPosition,h=l.getLimit,f=l.exceededLimit,p=l.translate,g=e.is(wt),m=1;function v(e,n,o,s,h){var p=d();if(b(),o&&(!g||!f())){var v=t.Layout.sliderSize(),_=ue(e)*v*ie(oe(e)/v)||0;e=l.toPosition(t.Controller.toDest(e%v))+_}var x=se(p,e,1);m=1,n=x?0:n||ne(oe(e-p)/1.5,800),r=s,i=Re(n,y,c(w,p,e,h),1),u(5),a(Ee),i.start()}function y(){u(3),r&&r(),a(Ce)}function w(e,t,i,o){var s,a,c=d(),u=(e+(t-e)*(s=o,(a=n.easingFunc)?a(s):1-Math.pow(1-s,4))-c)*m;p(c+u),g&&!i&&f()&&(m*=.6,oe(u)<10&&v(h(f(!0)),600,!1,r,!0))}function b(){i&&i.cancel()}function _(){i&&!i.isPaused()&&(b(),y())}return{mount:function(){s(me,b),s([be,we],_)},destroy:b,scroll:v,cancel:_}},Drag:function(e,t,n){var i,r,o,s,a,c,u,d,h=Te(e),p=h.on,g=h.emit,m=h.bind,v=h.unbind,y=e.state,w=t.Move,b=t.Scroll,_=t.Controller,x=t.Elements.track,E=t.Media.reduce,C=t.Direction,S=C.resolve,k=C.orient,L=w.getPosition,D=w.exceededLimit,N=!1;function T(){var e=n.drag;j(!e),s="free"===e}function R(e){if(c=!1,!u){var t=z(e);i=e.target,r=n.noDrag,P(i,".splide__pagination__page, ."+rt)||r&&P(i,r)||!t&&e.button||(_.isBusy()?J(e,!0):(d=t?x:window,a=y.is([4,5]),o=null,m(d,vt,A,xt),m(d,yt,M,xt),w.cancel(),b.cancel(),I(e)))}var i,r}function A(t){if(y.is(6)||(y.set(6),g("drag")),t.cancelable)if(a){w.translate(i+F(t)/(N&&e.is(wt)?5:1));var r=q(t)>200,o=N!==(N=D());(r||o)&&I(t),c=!0,g("dragging"),J(t)}else(function(e){return oe(F(e))>oe(F(e,!0))})(t)&&(a=function(e){var t=n.dragMinThreshold,i=f(t),r=i&&t.mouse||0,o=(i?t.touch:+t)||10;return oe(F(e))>(z(e)?o:r)}(t),J(t))}function M(i){y.is(6)&&(y.set(3),g("dragged")),a&&(function(i){var r=function(t){if(e.is(bt)||!N){var n=q(t);if(n&&n<200)return F(t)/n}return 0}(i),o=function(e){return L()+ue(e)*te(oe(e)*(n.flickPower||600),s?1/0:t.Layout.listSize()*(n.flickMaxPages||1))}(r),a=n.rewind&&n.rewindByDrag;E(!1),s?_.scroll(o,0,n.snap):e.is(_t)?_.go(k(ue(r))<0?a?"<":"-":a?">":"+"):e.is(wt)&&N&&a?_.go(D(!0)?">":"<"):_.go(_.toDest(o),!0),E(!0)}(i),J(i)),v(d,vt,A),v(d,yt,M),a=!1}function O(e){!u&&c&&J(e,!0)}function I(e){o=r,r=e,i=L()}function F(e,t){return W(e,t)-W(B(e),t)}function q(e){return V(e)-V(B(e))}function B(e){return r===e&&o||r}function W(e,t){return(z(e)?e.changedTouches[0]:e)["page"+S(t?"Y":"X")]}function z(e){return"undefined"!=typeof TouchEvent&&e instanceof TouchEvent}function j(e){u=e}return{mount:function(){m(x,vt,l,xt),m(x,yt,l,xt),m(x,"touchstart mousedown",R,xt),m(x,"click",O,{capture:!0}),m(x,"dragstart",J),p([pe,be],T)},disable:j,isDragging:function(){return a}}},Keyboard:function(e,t,n){var i,r,o=Te(e),s=o.on,a=o.bind,c=o.unbind,l=e.root,d=t.Direction.resolve;function h(){var e=n.keyboard;e&&(i="global"===e?window:l,a(i,St,g))}function f(){c(i,St)}function p(){var e=r;r=!0,u((function(){r=e}))}function g(t){if(!r){var n=Ct(t);n===d(Ae)?e.go("<"):n===d(Me)&&e.go(">")}}return{mount:function(){h(),s(be,f),s(be,h),s(me,p)},destroy:f,disable:function(e){r=e}}},LazyLoad:function(e,t,n){var i=Te(e),r=i.on,o=i.off,a=i.bind,u=i.emit,l="sequential"===n.lazyLoad,d=[ve,Ce],h=[];function f(){s(h),t.Slides.forEach((function(e){$(e.slide,"[data-splide-lazy], [data-splide-lazy-srcset]").forEach((function(t){var i=j(t,kt),r=j(t,Lt);if(i!==t.src||r!==t.srcset){var o=n.classes.spinner,s=t.parentElement,a=N(s,"."+o)||q("span",o,s);h.push([t,e,a]),t.src||W(t,"none")}}))})),l?v():(o(d),r(d,p),p())}function p(){(h=h.filter((function(t){var i=n.perPage*((n.preloadPages||1)+1)-1;return!t[1].isWithin(e.index,i)||g(t)}))).length||o(d)}function g(e){var t=e[0];S(e[1].slide,ht),a(t,"load error",c(m,e)),F(t,"src",j(t,kt)),F(t,"srcset",j(t,Lt)),I(t,kt),I(t,Lt)}function m(e,t){var n=e[0],i=e[1];Y(i.slide,ht),"error"!==t.type&&(G(e[2]),W(n,""),u(De,n,i),u(_e)),l&&v()}function v(){h.length&&g(h.shift())}return{mount:function(){n.lazyLoad&&(f(),r(we,f))},destroy:c(s,h),check:p}},Pagination:function(e,t,n){var i,r,o=Te(e),u=o.on,l=o.emit,d=o.bind,h=t.Slides,f=t.Elements,p=t.Controller,g=p.hasFocus,m=p.getIndex,v=p.go,y=t.Direction.resolve,w=f.pagination,b=[];function _(){i&&(G(w?a(i.children):i),Y(i,r),s(b),i=null),o.destroy()}function x(e){v(">"+e,!0)}function E(e,t){var n=b.length,i=Ct(t),r=C(),o=-1;i===y(Me,!1,r)?o=++e%n:i===y(Ae,!1,r)?o=(--e+n)%n:"Home"===i?o=0:"End"===i&&(o=n-1);var s=b[o];s&&(z(s.button),v(">"+o),J(t,!0))}function C(){return n.paginationDirection||n.direction}function k(e){return b[p.toPage(e)]}function L(){var e=k(m(!0)),t=k(m());if(e){var n=e.button;Y(n,ct),I(n,He),F(n,We,-1)}if(t){var r=t.button;S(r,ct),F(r,He,!0),F(r,We,"")}l("pagination:updated",{list:i,items:b},e,t)}return{items:b,mount:function t(){_(),u([be,we,Ne],t);var o=n.pagination;w&&W(w,o?"":"none"),o&&(u([me,Ee,Ce],L),function(){var t=e.length,o=n.classes,s=n.i18n,a=n.perPage,u=g()?p.getEnd()+1:re(t/a);S(i=w||q("ul",o.pagination,f.track.parentElement),r=at+"--"+C()),F(i,Be,"tablist"),F(i,Ue,s.select),F(i,Je,C()===Fe?"vertical":"");for(var l=0;l<u;l++){var m=q("li",null,i),v=q("button",{class:o.page,type:"button"},m),y=h.getIn(l).map((function(e){return e.slide.id})),_=!g()&&a>1?s.pageX:s.slideX;d(v,"click",c(x,l)),n.paginationKeyboard&&d(v,"keydown",c(E,l)),F(m,Be,"presentation"),F(v,Be,"tab"),F(v,ze,y.join(" ")),F(v,Ue,le(_,l+1)),F(v,We,-1),b.push({li:m,button:v,page:l})}}(),L(),l("pagination:mounted",{list:i,items:b},k(e.index)))},destroy:_,getAt:k,update:L}},Sync:function(e,t,n){var i=n.isNavigation,r=n.slideFocus,o=[];function a(){var t,n;e.splides.forEach((function(t){t.isParent||(l(e,t.splide),l(t.splide,e))})),i&&((n=(t=Te(e)).on)(ye,h),n("sk",f),n([pe,be],d),o.push(t),t.emit(ke,e.splides))}function u(){o.forEach((function(e){e.destroy()})),s(o)}function l(e,t){var n=Te(e);n.on(me,(function(e,n,i){t.go(t.is(bt)?i:e)})),o.push(n)}function d(){F(t.Elements.list,Je,n.direction===Fe?"vertical":"")}function h(t){e.go(t.index)}function f(e,t){x(Pt,Ct(t))&&(h(e),J(t))}return{setup:c(t.Media.set,{slideFocus:v(r)?i:r},!0),mount:a,destroy:u,remount:function(){u(),a()}}},Wheel:function(e,t,n){var i=Te(e).bind,r=0;function o(i){if(i.cancelable){var o=i.deltaY,s=o<0,a=V(i),c=n.wheelMinThreshold||0,u=n.wheelSleep||0;oe(o)>c&&a-r>u&&(e.go(s?"<":">"),r=a),function(i){return!n.releaseWheel||e.state.is(4)||-1!==t.Controller.getAdjacent(i)}(s)&&J(i)}}return{mount:function(){n.wheel&&i(t.Elements.track,"wheel",o,xt)}}},Live:function(e,t,n){var i=Te(e).on,r=t.Elements.track,o=n.live&&!n.isNavigation,s=q("span","splide__sr"),a=Re(90,c(u,!1));function u(e){F(r,Ye,e),e?(k(r,s),a.start()):(G(s),a.cancel())}function l(e){o&&F(r,$e,e?"off":"polite")}return{mount:function(){o&&(l(!t.Autoplay.isPaused()),F(r,Ve,!0),s.textContent="â€¦",i(Le,c(l,!0)),i(Pe,c(l,!1)),i([ve,Ce],c(u,!0)))},disable:l,destroy:function(){I(r,[$e,Ve,Ye]),G(s)}}}}),Nt={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:mt,i18n:{prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function Tt(e,t,n){var i=t.Slides;function r(){i.forEach((function(e){e.style("transform","translateX(-"+100*e.index+"%)")}))}return{mount:function(){Te(e).on([pe,we],r)},start:function(e,t){i.style("transition","opacity "+n.speed+"ms "+n.easing),u(t)},cancel:l}}function Rt(e,t,n){var i,r=t.Move,o=t.Controller,s=t.Scroll,a=t.Elements.list,u=c(B,a,"transition");function l(){u(""),s.cancel()}return{mount:function(){Te(e).bind(a,"transitionend",(function(e){e.target===a&&i&&(l(),i())}))},start:function(t,a){var c=r.toPosition(t,!0),l=r.getPosition(),d=function(t){var i=n.rewindSpeed;if(e.is(wt)&&i){var r=o.getIndex(!0),s=o.getEnd();if(0===r&&t>=s||r>=s&&0===t)return i}return n.speed}(t);oe(c-l)>=1&&d>=1?n.useScroll?s.scroll(c,d,!1,a):(u("transform "+d+"ms "+n.easing),r.translate(c,!0),i=a):(r.jump(t),a())},cancel:l}}var At=function(){function e(t,n){var i;this.event=Te(),this.Components={},this.state=(i=1,{set:function(e){i=e},is:function(e){return x(b(e),i)}}),this.splides=[],this._o={},this._E={};var r=m(t)?K(document,t):t;ee(r,r+" is invalid."),this.root=r,n=M({label:j(r,Ue)||"",labelledby:j(r,Ge)||""},Nt,e.defaults,n||{});try{M(n,JSON.parse(j(r,"data-splide")))}catch(e){ee(!1,"Invalid JSON")}this._o=Object.create(M({},n))}var t,n,i=e.prototype;return i.mount=function(e,t){var n=this,i=this.state,r=this.Components;return ee(i.is([1,7]),"Already mounted!"),i.set(1),this._C=r,this._T=t||this._T||(this.is(_t)?Tt:Rt),this._E=e||this._E,R(A({},Dt,this._E,{Transition:this._T}),(function(e,t){var i=e(n,r,n._o);r[t]=i,i.setup&&i.setup()})),R(r,(function(e){e.mount&&e.mount()})),this.emit(pe),S(this.root,"is-initialized"),i.set(3),this.emit(ge),this},i.sync=function(e){return this.splides.push({splide:e}),e.splides.push({splide:this,isParent:!0}),this.state.is(3)&&(this._C.Sync.remount(),e.Components.Sync.remount()),this},i.go=function(e){return this._C.Controller.go(e),this},i.on=function(e,t){return this.event.on(e,t),this},i.off=function(e){return this.event.off(e),this},i.emit=function(e){var t;return(t=this.event).emit.apply(t,[e].concat(a(arguments,1))),this},i.add=function(e,t){return this._C.Slides.add(e,t),this},i.remove=function(e){return this._C.Slides.remove(e),this},i.is=function(e){return this._o.type===e},i.refresh=function(){return this.emit(we),this},i.destroy=function(e){void 0===e&&(e=!0);var t=this.event,n=this.state;return n.is(1)?Te(this).on(ge,this.destroy.bind(this,e)):(R(this._C,(function(t){t.destroy&&t.destroy(e)}),!0),t.emit(Se),t.destroy(),e&&s(this.splides),n.set(7)),this},t=e,(n=[{key:"options",get:function(){return this._o},set:function(e){this._C.Media.set(e,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();At.defaults={},At.STATES={CREATED:1,MOUNTED:2,IDLE:3,MOVING:4,SCROLLING:5,DRAGGING:6,DESTROYED:7};class Mt{constructor(e,t){this.emptyGlowImageTag="empty_glow_image",this.imagesPath=e,this.audioPath=t,this.currentPage=0,this.splideHandle=new At(".splide",{fixedHeight:window.innerHeight-20}).mount()}initializeBook(t){this.currentBookType=t.bookType,this.numberOfPages=t.pages.length,this.currentBookType===e.CuriousReader?this.initializeCuriousReaderBook(t):this.currentBookType===e.GDL&&this.initializeGDLBook(t)}initializeCuriousReaderBook(e){for(let t=0;t<e.pages.length;t++){const n=document.createElement("li");n.classList.add("splide__slide");for(let i=0;i<e.pages[t].visualElements.length;i++){let r=e.pages[t].visualElements[i];if("text"==r.type){let e=r,t=document.createElement("div");t.classList.add("cr-text"),t.style.position="absolute",t.style.webkitTextStroke="1px #303030",t.style.color="#FFFFFF",t.style.textShadow="0.1rem 0.15rem 0.1rem #303030",t.style.fontFamily="Quicksand",t.style.fontWeight="800",t.style.fontSize="1.7em",t.style.top=e.positionY+"%",t.style.left=e.positionX+"%",t.style.width=e.width+"%",t.style.height=e.height+"%",t.innerHTML=e.textContentAsHTML,n.appendChild(t)}else if("image"==r.type){let e=r;if(e.imageSource===this.emptyGlowImageTag)continue;let t=document.createElement("div");t.classList.add("cr-image"),t.style.position="absolute",t.style.top=e.positionY+"%",t.style.left=e.positionX+"%",t.style.width=e.width+"%",t.style.height=e.height+"%";let i=document.createElement("img");i.src=this.imagesPath+e.imageSource.replace("images/",""),i.style.width="100%",i.style.height="100%",t.appendChild(i),n.appendChild(t)}this.splideHandle.add(n)}}}initializeGDLBook(e){for(let t=0;t<e.pages.length;t++){const n=document.createElement("li");n.classList.add("splide__slide");let i=document.createElement("div");i.classList.add("gdl-flex-container"),i.style.display="flex",i.style.flexDirection="column",i.style.justifyContent="center",i.style.alignItems="center",i.style.height="100%",i.style.width="100%",n.appendChild(i);for(let n=0;n<e.pages[t].visualElements.length;n++){let r=e.pages[t].visualElements[n];if("text"==r.type){let e=r,t=document.createElement("div");t.style.width="60%",t.classList.add("gdl-text"),t.style.webkitTextStroke="1px #303030",t.style.color="#FFFFFF",t.style.textShadow="0.1rem 0.15rem 0.1rem #303030",t.style.fontFamily="Quicksand",t.style.fontWeight="800",t.style.fontSize="1.7em",t.innerHTML=e.textContentAsHTML,i.appendChild(t)}else if("image"==r.type){let e=r,t=document.createElement("div");t.classList.add("gdl-image");let n=document.createElement("img");n.src=this.imagesPath+e.imageSource.replace("images/",""),n.style.width="100%",n.style.height="100%",t.appendChild(n),i.appendChild(t)}}this.splideHandle.add(n)}}goToNextPage(){this.transitioningToPage||(this.currentPage<this.numberOfPages&&this.currentPage++,this.transitionToPage(this.currentPage))}goToPreviousPage(){this.transitioningToPage||(this.currentPage>0&&this.currentPage--,this.transitionToPage(this.currentPage))}transitionToPage(e){this.transitioningToPage=!0}}n(913);class Ot extends Error{constructor(e,t){super(((e,...t)=>{let n=e;return t.length>0&&(n+=` :: ${JSON.stringify(t)}`),n})(e,t)),this.name=e,this.details=t}}n(80);const It=e=>e&&"object"==typeof e?e:{handle:e};class Ft{constructor(e,t,n="GET"){this.handler=It(t),this.match=e,this.method=n}setCatchHandler(e){this.catchHandler=It(e)}}class qt extends Ft{constructor(e,t,n){super((({url:t})=>{const n=e.exec(t.href);if(n&&(t.origin===location.origin||0===n.index))return n.slice(1)}),t,n)}}class Bt{constructor(){this._routes=new Map,this._defaultHandlerMap=new Map}get routes(){return this._routes}addFetchListener(){self.addEventListener("fetch",(e=>{const{request:t}=e,n=this.handleRequest({request:t,event:e});n&&e.respondWith(n)}))}addCacheListener(){self.addEventListener("message",(e=>{if(e.data&&"CACHE_URLS"===e.data.type){const{payload:t}=e.data,n=Promise.all(t.urlsToCache.map((t=>{"string"==typeof t&&(t=[t]);const n=new Request(...t);return this.handleRequest({request:n,event:e})})));e.waitUntil(n),e.ports&&e.ports[0]&&n.then((()=>e.ports[0].postMessage(!0)))}}))}handleRequest({request:e,event:t}){const n=new URL(e.url,location.href);if(!n.protocol.startsWith("http"))return;const i=n.origin===location.origin,{params:r,route:o}=this.findMatchingRoute({event:t,request:e,sameOrigin:i,url:n});let s=o&&o.handler;const a=e.method;if(!s&&this._defaultHandlerMap.has(a)&&(s=this._defaultHandlerMap.get(a)),!s)return;let c;try{c=s.handle({url:n,request:e,event:t,params:r})}catch(e){c=Promise.reject(e)}const u=o&&o.catchHandler;return c instanceof Promise&&(this._catchHandler||u)&&(c=c.catch((async i=>{if(u)try{return await u.handle({url:n,request:e,event:t,params:r})}catch(e){e instanceof Error&&(i=e)}if(this._catchHandler)return this._catchHandler.handle({url:n,request:e,event:t});throw i}))),c}findMatchingRoute({url:e,sameOrigin:t,request:n,event:i}){const r=this._routes.get(n.method)||[];for(const o of r){let r;const s=o.match({url:e,sameOrigin:t,request:n,event:i});if(s)return r=s,(Array.isArray(r)&&0===r.length||s.constructor===Object&&0===Object.keys(s).length||"boolean"==typeof s)&&(r=void 0),{route:o,params:r}}return{}}setDefaultHandler(e,t="GET"){this._defaultHandlerMap.set(t,It(e))}setCatchHandler(e){this._catchHandler=It(e)}registerRoute(e){this._routes.has(e.method)||this._routes.set(e.method,[]),this._routes.get(e.method).push(e)}unregisterRoute(e){if(!this._routes.has(e.method))throw new Ot("unregister-route-but-not-found-with-method",{method:e.method});const t=this._routes.get(e.method).indexOf(e);if(!(t>-1))throw new Ot("unregister-route-route-not-registered");this._routes.get(e.method).splice(t,1)}}let Wt;const zt={googleAnalytics:"googleAnalytics",precache:"precache-v2",prefix:"workbox",runtime:"runtime",suffix:"undefined"!=typeof registration?registration.scope:""},jt=e=>{return e||(t=zt.runtime,[zt.prefix,t,zt.suffix].filter((e=>e&&e.length>0)).join("-"));var t};function Ht(e,t){const n=new URL(e);for(const e of t)n.searchParams.delete(e);return n.href}class Ut{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}const Gt=new Set;function Xt(e){return"string"==typeof e?new Request(e):e}n(873);class Jt{constructor(e,t){this._cacheKeys={},Object.assign(this,t),this.event=t.event,this._strategy=e,this._handlerDeferred=new Ut,this._extendLifetimePromises=[],this._plugins=[...e.plugins],this._pluginStateMap=new Map;for(const e of this._plugins)this._pluginStateMap.set(e,{});this.event.waitUntil(this._handlerDeferred.promise)}async fetch(e){const{event:t}=this;let n=Xt(e);if("navigate"===n.mode&&t instanceof FetchEvent&&t.preloadResponse){const e=await t.preloadResponse;if(e)return e}const i=this.hasCallback("fetchDidFail")?n.clone():null;try{for(const e of this.iterateCallbacks("requestWillFetch"))n=await e({request:n.clone(),event:t})}catch(e){if(e instanceof Error)throw new Ot("plugin-error-request-will-fetch",{thrownErrorMessage:e.message})}const r=n.clone();try{let e;e=await fetch(n,"navigate"===n.mode?void 0:this._strategy.fetchOptions);for(const n of this.iterateCallbacks("fetchDidSucceed"))e=await n({event:t,request:r,response:e});return e}catch(e){throw i&&await this.runCallbacks("fetchDidFail",{error:e,event:t,originalRequest:i.clone(),request:r.clone()}),e}}async fetchAndCachePut(e){const t=await this.fetch(e),n=t.clone();return this.waitUntil(this.cachePut(e,n)),t}async cacheMatch(e){const t=Xt(e);let n;const{cacheName:i,matchOptions:r}=this._strategy,o=await this.getCacheKey(t,"read"),s=Object.assign(Object.assign({},r),{cacheName:i});n=await caches.match(o,s);for(const e of this.iterateCallbacks("cachedResponseWillBeUsed"))n=await e({cacheName:i,matchOptions:r,cachedResponse:n,request:o,event:this.event})||void 0;return n}async cachePut(e,t){const n=Xt(e);await(0,new Promise((e=>setTimeout(e,0))));const i=await this.getCacheKey(n,"write");if(!t)throw new Ot("cache-put-with-no-response",{url:(r=i.url,new URL(String(r),location.href).href.replace(new RegExp(`^${location.origin}`),""))});var r;const o=await this._ensureResponseSafeToCache(t);if(!o)return!1;const{cacheName:s,matchOptions:a}=this._strategy,c=await self.caches.open(s),u=this.hasCallback("cacheDidUpdate"),l=u?await async function(e,t,n,i){const r=Ht(t.url,n);if(t.url===r)return e.match(t,i);const o=Object.assign(Object.assign({},i),{ignoreSearch:!0}),s=await e.keys(t,o);for(const t of s)if(r===Ht(t.url,n))return e.match(t,i)}(c,i.clone(),["__WB_REVISION__"],a):null;try{await c.put(i,u?o.clone():o)}catch(e){if(e instanceof Error)throw"QuotaExceededError"===e.name&&await async function(){for(const e of Gt)await e()}(),e}for(const e of this.iterateCallbacks("cacheDidUpdate"))await e({cacheName:s,oldResponse:l,newResponse:o.clone(),request:i,event:this.event});return!0}async getCacheKey(e,t){const n=`${e.url} | ${t}`;if(!this._cacheKeys[n]){let i=e;for(const e of this.iterateCallbacks("cacheKeyWillBeUsed"))i=Xt(await e({mode:t,request:i,event:this.event,params:this.params}));this._cacheKeys[n]=i}return this._cacheKeys[n]}hasCallback(e){for(const t of this._strategy.plugins)if(e in t)return!0;return!1}async runCallbacks(e,t){for(const n of this.iterateCallbacks(e))await n(t)}*iterateCallbacks(e){for(const t of this._strategy.plugins)if("function"==typeof t[e]){const n=this._pluginStateMap.get(t),i=i=>{const r=Object.assign(Object.assign({},i),{state:n});return t[e](r)};yield i}}waitUntil(e){return this._extendLifetimePromises.push(e),e}async doneWaiting(){let e;for(;e=this._extendLifetimePromises.shift();)await e}destroy(){this._handlerDeferred.resolve(null)}async _ensureResponseSafeToCache(e){let t=e,n=!1;for(const e of this.iterateCallbacks("cacheWillUpdate"))if(t=await e({request:this.request,response:t,event:this.event})||void 0,n=!0,!t)break;return n||t&&200!==t.status&&(t=void 0),t}}class Kt extends class{constructor(e={}){this.cacheName=jt(e.cacheName),this.plugins=e.plugins||[],this.fetchOptions=e.fetchOptions,this.matchOptions=e.matchOptions}handle(e){const[t]=this.handleAll(e);return t}handleAll(e){e instanceof FetchEvent&&(e={event:e,request:e.request});const t=e.event,n="string"==typeof e.request?new Request(e.request):e.request,i="params"in e?e.params:void 0,r=new Jt(this,{event:t,request:n,params:i}),o=this._getResponse(r,n,t);return[o,this._awaitComplete(o,r,n,t)]}async _getResponse(e,t,n){let i;await e.runCallbacks("handlerWillStart",{event:n,request:t});try{if(i=await this._handle(t,e),!i||"error"===i.type)throw new Ot("no-response",{url:t.url})}catch(r){if(r instanceof Error)for(const o of e.iterateCallbacks("handlerDidError"))if(i=await o({error:r,event:n,request:t}),i)break;if(!i)throw r}for(const r of e.iterateCallbacks("handlerWillRespond"))i=await r({event:n,request:t,response:i});return i}async _awaitComplete(e,t,n,i){let r,o;try{r=await e}catch(o){}try{await t.runCallbacks("handlerDidRespond",{event:i,request:n,response:r}),await t.doneWaiting()}catch(e){e instanceof Error&&(o=e)}if(await t.runCallbacks("handlerDidComplete",{event:i,request:n,response:r,error:o}),t.destroy(),o)throw o}}{async _handle(e,t){let n,i=await t.cacheMatch(e);if(i);else try{i=await t.fetchAndCachePut(e)}catch(e){e instanceof Error&&(n=e)}if(!i)throw new Ot("no-response",{url:e.url,error:n});return i}}function $t(e){e.then((()=>{}))}let Yt,Vt;const Qt=new WeakMap,Zt=new WeakMap,en=new WeakMap,tn=new WeakMap,nn=new WeakMap;let rn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Zt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||en.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function on(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Vt||(Vt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(an(this),e),sn(Qt.get(this))}:function(...e){return sn(t.apply(an(this),e))}:function(e,...n){const i=t.call(an(this),e,...n);return en.set(i,e.sort?e.sort():[e]),sn(i)}:(e instanceof IDBTransaction&&function(e){if(Zt.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{t(),i()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)}));Zt.set(e,t)}(e),n=e,(Yt||(Yt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>n instanceof e))?new Proxy(e,rn):e);var t,n}function sn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{t(sn(e.result)),i()},o=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&Qt.set(t,e)})).catch((()=>{})),nn.set(t,e),t}(e);if(tn.has(e))return tn.get(e);const t=on(e);return t!==e&&(tn.set(e,t),nn.set(t,e)),t}const an=e=>nn.get(e),cn=["get","getKey","getAll","getAllKeys","count"],un=["put","add","delete","clear"],ln=new Map;function dn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(ln.get(t))return ln.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=un.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!cn.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,r?"readwrite":"readonly");let s=o.store;return i&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),r&&o.done]))[0]};return ln.set(t,o),o}var hn;hn=rn,rn={...hn,get:(e,t,n)=>dn(e,t)||hn.get(e,t,n),has:(e,t)=>!!dn(e,t)||hn.has(e,t)},n(550);const fn="cache-entries",pn=e=>{const t=new URL(e,location.href);return t.hash="",t.href};class gn{constructor(e){this._db=null,this._cacheName=e}_upgradeDb(e){const t=e.createObjectStore(fn,{keyPath:"id"});t.createIndex("cacheName","cacheName",{unique:!1}),t.createIndex("timestamp","timestamp",{unique:!1})}_upgradeDbAndDeleteOldDbs(e){this._upgradeDb(e),this._cacheName&&function(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);t&&n.addEventListener("blocked",(e=>t(e.oldVersion,e))),sn(n).then((()=>{}))}(this._cacheName)}async setTimestamp(e,t){const n={url:e=pn(e),timestamp:t,cacheName:this._cacheName,id:this._getId(e)},i=(await this.getDb()).transaction(fn,"readwrite",{durability:"relaxed"});await i.store.put(n),await i.done}async getTimestamp(e){const t=await this.getDb(),n=await t.get(fn,this._getId(e));return null==n?void 0:n.timestamp}async expireEntries(e,t){const n=await this.getDb();let i=await n.transaction(fn).store.index("timestamp").openCursor(null,"prev");const r=[];let o=0;for(;i;){const n=i.value;n.cacheName===this._cacheName&&(e&&n.timestamp<e||t&&o>=t?r.push(i.value):o++),i=await i.continue()}const s=[];for(const e of r)await n.delete(fn,e.id),s.push(e.url);return s}_getId(e){return this._cacheName+"|"+pn(e)}async getDb(){return this._db||(this._db=await function(e,t,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const s=indexedDB.open(e,t),a=sn(s);return i&&s.addEventListener("upgradeneeded",(e=>{i(sn(s.result),e.oldVersion,e.newVersion,sn(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("workbox-expiration",1,{upgrade:this._upgradeDbAndDeleteOldDbs.bind(this)})),this._db}}class mn{constructor(e,t={}){this._isRunning=!1,this._rerunRequested=!1,this._maxEntries=t.maxEntries,this._maxAgeSeconds=t.maxAgeSeconds,this._matchOptions=t.matchOptions,this._cacheName=e,this._timestampModel=new gn(e)}async expireEntries(){if(this._isRunning)return void(this._rerunRequested=!0);this._isRunning=!0;const e=this._maxAgeSeconds?Date.now()-1e3*this._maxAgeSeconds:0,t=await this._timestampModel.expireEntries(e,this._maxEntries),n=await self.caches.open(this._cacheName);for(const e of t)await n.delete(e,this._matchOptions);this._isRunning=!1,this._rerunRequested&&(this._rerunRequested=!1,$t(this.expireEntries()))}async updateTimestamp(e){await this._timestampModel.setTimestamp(e,Date.now())}async isURLExpired(e){if(this._maxAgeSeconds){const t=await this._timestampModel.getTimestamp(e),n=Date.now()-1e3*this._maxAgeSeconds;return void 0===t||t<n}return!1}async delete(){this._rerunRequested=!1,await this._timestampModel.expireEntries(1/0)}}class vn{constructor(e={}){var t;this.cachedResponseWillBeUsed=async({event:e,request:t,cacheName:n,cachedResponse:i})=>{if(!i)return null;const r=this._isResponseDateFresh(i),o=this._getCacheExpiration(n);$t(o.expireEntries());const s=o.updateTimestamp(t.url);if(e)try{e.waitUntil(s)}catch(e){}return r?i:null},this.cacheDidUpdate=async({cacheName:e,request:t})=>{const n=this._getCacheExpiration(e);await n.updateTimestamp(t.url),await n.expireEntries()},this._config=e,this._maxAgeSeconds=e.maxAgeSeconds,this._cacheExpirations=new Map,e.purgeOnQuotaError&&(t=()=>this.deleteCacheAndMetadata(),Gt.add(t))}_getCacheExpiration(e){if(e===jt())throw new Ot("expire-custom-caches-only");let t=this._cacheExpirations.get(e);return t||(t=new mn(e,this._config),this._cacheExpirations.set(e,t)),t}_isResponseDateFresh(e){if(!this._maxAgeSeconds)return!0;const t=this._getDateHeaderTimestamp(e);return null===t||t>=Date.now()-1e3*this._maxAgeSeconds}_getDateHeaderTimestamp(e){if(!e.headers.has("date"))return null;const t=e.headers.get("date"),n=new Date(t).getTime();return isNaN(n)?null:n}async deleteCacheAndMetadata(){for(const[e,t]of this._cacheExpirations)await self.caches.delete(e),await t.delete();this._cacheExpirations=new Map}}var yn=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const{clients:wn,addEventListener:bn,skipWaiting:_n,registration:xn}=self;class En{constructor(){this.cacheNameTag="CRCache",this.version="v0.0.1",this.imagesCacheName=`${this.cacheNameTag}-${this.version}-images`,this.fontsCacheName=`${this.cacheNameTag}-${this.version}-fonts`,this.stylesScriptsCacheName=`${this.cacheNameTag}-${this.version}-stylesScripts`,this.documentCacheName=`${this.cacheNameTag}-${this.version}-document`,this.stylesScriptsExpirationPlugin=new vn({maxEntries:20,maxAgeSeconds:1296e3,purgeOnQuotaError:!0}),this.fontsExpirationPlugin=new vn({maxEntries:5,maxAgeSeconds:15552e3}),this.imagesExpirationPlugin=new vn({maxEntries:150,maxAgeSeconds:5184e3}),this.documentExpirationPlugin=new vn({maxEntries:50,maxAgeSeconds:5184e3})}InitializeAndRegister(){"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sw.js").then((e=>{console.log("ServiceWorker registration successful with scope: ",e.scope)}),(e=>{console.log("ServiceWorker registration failed: ",e)})),this.registerCacheFirstRouteUsing("image",this.imagesCacheName,this.imagesExpirationPlugin),this.registerCacheFirstRouteUsing("font",this.fontsCacheName,this.fontsExpirationPlugin),this.registerCacheFirstRouteUsing("script",this.stylesScriptsCacheName,this.stylesScriptsExpirationPlugin),this.registerCacheFirstRouteUsing("style",this.stylesScriptsCacheName,this.stylesScriptsExpirationPlugin),this.registerCacheFirstRouteUsing("document",this.documentCacheName,this.documentExpirationPlugin),navigator.serviceWorker.addEventListener("install",(e=>yn(this,void 0,void 0,(function*(){console.log("ServiceWorker installed!"),e.waitUntil(Promise.all([caches.delete(this.imagesCacheName),caches.delete(this.fontsCacheName),caches.delete(this.stylesScriptsCacheName),caches.delete(this.documentCacheName)])),_n()})))),navigator.serviceWorker.addEventListener("activate",(e=>yn(this,void 0,void 0,(function*(){console.log("ServiceWorker activated!"),e.waitUntil(self.clients.claim())})))),navigator.serviceWorker.addEventListener("fetch",(e=>{console.log("ServiceWorker fetch: ",e),e.respondWith(caches.match(e.request).then((function(t){return t||fetch(e.request)})))})),self.clients.matchAll().then((e=>{e.forEach((e=>{e.postMessage({msg:"Loading",data:100})}))}))}))}handleServiceWorkerMessage(e){"Loading"==e.data.msg&&this.handleLoadingMessage(e.data)}handleLoadingMessage(e){}registerCacheFirstRouteUsing(e,t,n){!function(e,t,n){let i;i=e instanceof RegExp?new qt(e,t,n):new Ft(e,t,n),(Wt||(Wt=new Bt,Wt.addFetchListener(),Wt.addCacheListener()),Wt).registerRoute(i)}((({request:t})=>t.destination===e),new Kt({cacheName:t,plugins:[n]}))}}var Cn=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};new class{constructor(e,t,n){if(this.cachedLanguages=new Map,this.lang="english",this.isCached="is_cached",this.contentFilePath=e,this.imagesPath=t,this.audioPath=n,this.contentParser=new i(e),this.playBackEngine=new Mt(t,n),this.serviceWorker=new En,this.serviceWorker.InitializeAndRegister(),null==localStorage.getItem(this.isCached))this.cachedLanguages=new Map;else{let e=localStorage.getItem(this.isCached);this.cachedLanguages=new Map(JSON.parse(e))}}initialize(){return Cn(this,void 0,void 0,(function*(){let e=yield this.contentParser.parseBook();console.log("Dev App initialized!"),console.log(e),this.enforceLandscapeMode(),window.addEventListener("load",(()=>Cn(this,void 0,void 0,(function*(){"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",(e=>{var t;"Loading"==e.data.msg&&100==e.data.data&&(null===(t=this.cachedLanguages)||void 0===t||t.set(this.lang,"true"),localStorage.setItem(this.isCached,JSON.stringify(this.cachedLanguages)),this.readLanguageDataFromCacheAndNotifyAndroidApp())}))})))),this.playBackEngine.initializeBook(e)}))}readLanguageDataFromCacheAndNotifyAndroidApp(){window.Android&&window.Android.receiveData(cachedLanguages.has(lang)?cachedLanguages.get(lang):null)}enforceLandscapeMode(){screen.orientation&&screen.orientation.lock?screen.orientation.lock("landscape").then((()=>{console.log("Screen orientation locked to landscape!")})).catch((e=>{console.error("Failed to lock screen orientation: ",e)})):console.warn("Screen orientation lock not supported! Interface may not work as expected on mobile devices!")}}("/BookContent/TalkingBagEn/content/content.json","/BookContent/TalkingBagEn/content/images/","/BookContent/TalkingBagEn/content/audio/").initialize()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBQXBCLEVBQUFuUCxLQUFLaWtDLHVCQUFlLFNBQUVqeUIsSUFBSWhTLEtBQUtra0MsS0FBTSxRQUNyQ0ksYUFBYUssUUFDVDNrQyxLQUFLbWtDLFNBQ0xyVixLQUFLMEQsVUFBVXh5QixLQUFLaWtDLGtCQUV4QmprQyxLQUFLNGtDLGtEQUt6QixNQUVBNWtDLEtBQUtxa0MsZUFBZTlULGVBQWU3dkIsRUFDdkMsSUFFQWtrQywrQ0FFUXIrQixPQUFPcytCLFNBRVB0K0IsT0FBT3MrQixRQUFRQyxZQUFZYixnQkFBZ0IvTyxJQUFJZ1AsTUFBUUQsZ0JBQWdCbm1CLElBQUlvbUIsTUFBUSxLQUUzRixDQUVBUSx1QkFDUUssT0FBT0MsYUFBZUQsT0FBT0MsWUFBWUMsS0FDekNGLE9BQU9DLFlBQVlDLEtBQUssYUFDdkIza0MsTUFBSyxLQUNGRSxRQUFRQyxJQUFJLDBDQUEwQyxJQUV6RE0sT0FBT0MsSUFDSlIsUUFBUVEsTUFBTSxzQ0FBdUNBLEVBQU0sSUFHL0RSLFFBQVEwa0MsS0FBSywrRkFFckIsR0FXbUIsaURBQ25CLDRDQUNBLDRDQUdBVCIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93b3JrYm94LWNvcmUvX3ZlcnNpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dvcmtib3gtZXhwaXJhdGlvbi9fdmVyc2lvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd29ya2JveC1yb3V0aW5nL192ZXJzaW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93b3JrYm94LXN0cmF0ZWdpZXMvX3ZlcnNpb24uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovLy8uL01vZGVscy9Cb29rLnRzIiwid2VicGFjazovLy8uL1BhcnNlci9Db250ZW50UGFyc2VyLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9Ac3BsaWRlanMvc3BsaWRlL2Rpc3QvanMvc3BsaWRlLmVzbS5qcyIsIndlYnBhY2s6Ly8vLi9QbGF5QmFja0VuZ2luZS9QbGF5QmFja0VuZ2luZS50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd29ya2JveC1jb3JlL19wcml2YXRlL1dvcmtib3hFcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd29ya2JveC1jb3JlL21vZGVscy9tZXNzYWdlcy9tZXNzYWdlR2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93b3JrYm94LXJvdXRpbmcvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93b3JrYm94LXJvdXRpbmcvdXRpbHMvbm9ybWFsaXplSGFuZGxlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd29ya2JveC1yb3V0aW5nL1JvdXRlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93b3JrYm94LXJvdXRpbmcvUmVnRXhwUm91dGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dvcmtib3gtcm91dGluZy9Sb3V0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dvcmtib3gtcm91dGluZy91dGlscy9nZXRPckNyZWF0ZURlZmF1bHRSb3V0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dvcmtib3gtY29yZS9fcHJpdmF0ZS9jYWNoZU5hbWVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93b3JrYm94LWNvcmUvX3ByaXZhdGUvY2FjaGVNYXRjaElnbm9yZVBhcmFtcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd29ya2JveC1jb3JlL19wcml2YXRlL0RlZmVycmVkLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93b3JrYm94LWNvcmUvbW9kZWxzL3F1b3RhRXJyb3JDYWxsYmFja3MuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dvcmtib3gtc3RyYXRlZ2llcy9TdHJhdGVneUhhbmRsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dvcmtib3gtY29yZS9fcHJpdmF0ZS90aW1lb3V0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93b3JrYm94LWNvcmUvX3ByaXZhdGUvZ2V0RnJpZW5kbHlVUkwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dvcmtib3gtY29yZS9fcHJpdmF0ZS9leGVjdXRlUXVvdGFFcnJvckNhbGxiYWNrcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd29ya2JveC1zdHJhdGVnaWVzL0NhY2hlRmlyc3QuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dvcmtib3gtc3RyYXRlZ2llcy9TdHJhdGVneS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd29ya2JveC1jb3JlL19wcml2YXRlL2RvbnRXYWl0Rm9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvd3JhcC1pZGItdmFsdWUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2lkYi9idWlsZC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd29ya2JveC1leHBpcmF0aW9uL21vZGVscy9DYWNoZVRpbWVzdGFtcHNNb2RlbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd29ya2JveC1leHBpcmF0aW9uL0NhY2hlRXhwaXJhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd29ya2JveC1leHBpcmF0aW9uL0V4cGlyYXRpb25QbHVnaW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dvcmtib3gtY29yZS9yZWdpc3RlclF1b3RhRXJyb3JDYWxsYmFjay5qcyIsIndlYnBhY2s6Ly8vLi9IZWxwZXJzL1NlcnZpY2VXb3JrZXIvU2VydmljZVdvcmtlci50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd29ya2JveC1yb3V0aW5nL3JlZ2lzdGVyUm91dGUuanMiLCJ3ZWJwYWNrOi8vLy4vQXBwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLy8gQHRzLWlnbm9yZVxudHJ5IHtcbiAgICBzZWxmWyd3b3JrYm94OmNvcmU6Ni41LjMnXSAmJiBfKCk7XG59XG5jYXRjaCAoZSkgeyB9XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIEB0cy1pZ25vcmVcbnRyeSB7XG4gICAgc2VsZlsnd29ya2JveDpleHBpcmF0aW9uOjYuNS4zJ10gJiYgXygpO1xufVxuY2F0Y2ggKGUpIHsgfVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBAdHMtaWdub3JlXG50cnkge1xuICAgIHNlbGZbJ3dvcmtib3g6cm91dGluZzo2LjUuMyddICYmIF8oKTtcbn1cbmNhdGNoIChlKSB7IH1cbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQHRzLWlnbm9yZVxudHJ5IHtcbiAgICBzZWxmWyd3b3JrYm94OnN0cmF0ZWdpZXM6Ni41LjMnXSAmJiBfKCk7XG59XG5jYXRjaCAoZSkgeyB9XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gUGFnZSB0eXBlIHRoYXQgZGVcclxuXHJcbmltcG9ydCB7IFBhZ2UgfSBmcm9tIFwiLi9QYWdlXCI7XHJcblxyXG5leHBvcnQgZW51bSBCb29rVHlwZSB7XHJcbiAgICBDdXJpb3VzUmVhZGVyID0gXCJDdXJpb3VzUmVhZGVyXCIsXHJcbiAgICBHREwgPSBcIkdETFwiLFxyXG4gICAgVW5rbm93biA9IFwiVW5rbm93blwiLFxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBCb29rID0ge1xyXG4gICAgcGFnZXM6IFBhZ2VbXTtcclxuICAgIGJvb2tUeXBlOiBCb29rVHlwZTtcclxufSIsImltcG9ydCB7IEJvb2ssIEJvb2tUeXBlLCBQYWdlLCBUZXh0RWxlbWVudCwgSW1hZ2VFbGVtZW50LCBBdWRpb0VsZW1lbnQgfSBmcm9tIFwiLi4vTW9kZWxzL01vZGVsc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbnRlbnRQYXJzZXIge1xyXG5cclxuICAgIGltYWdlc1BhdGg6IHN0cmluZztcclxuICAgIGF1ZGlvUGF0aDogc3RyaW5nO1xyXG4gICAgY29udGVudEZpbGVQYXRoOiBzdHJpbmc7XHJcblxyXG4gICAgY29udGVudEpTT046IGFueTtcclxuXHJcbiAgICBlbXB0eUdsb3dJbWFnZVRhZzogc3RyaW5nID0gXCJlbXB0eV9nbG93X2ltYWdlXCI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29udGVudEZpbGVQYXRoOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmNvbnRlbnRGaWxlUGF0aCA9IGNvbnRlbnRGaWxlUGF0aDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBwYXJzZUJvb2sgKCk6IFByb21pc2U8Qm9vaz4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGFyc2VDb250ZW50SlNPTkZpbGUoKS50aGVuKChjb250ZW50SlNPTikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50SlNPTiA9IGNvbnRlbnRKU09OO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb250ZW50IEpTT04gZmlsZSBwYXJzZWQhXCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5jb250ZW50SlNPTik7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGJvb2s6IEJvb2sgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGJvb2tUeXBlOiB0aGlzLmRldGVybWluZUJvb2tUeXBlKCksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGJvb2sucGFnZXMgPSB0aGlzLnBhcnNlUGFnZXMoYm9vayk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShib29rKTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkZXRlcm1pbmVCb29rVHlwZSgpOiBCb29rVHlwZSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29udGVudEpTT05bXCJwcmVzZW50YXRpb25cIl0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gQm9va1R5cGUuQ3VyaW91c1JlYWRlcjtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29udGVudEpTT05bXCJjaGFwdGVyc1wiXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBCb29rVHlwZS5HREw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIEJvb2tUeXBlLlVua25vd247XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlUGFnZXMoYm9vazogQm9vayk6IFBhZ2VbXSB7XHJcbiAgICAgICAgbGV0IHBhZ2VzOiBQYWdlW10gPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKGJvb2suYm9va1R5cGUgPT09IEJvb2tUeXBlLkN1cmlvdXNSZWFkZXIpIHtcclxuICAgICAgICAgICAgbGV0IHBhZ2VzSlNPTiA9IHRoaXMuY29udGVudEpTT05bXCJwcmVzZW50YXRpb25cIl1bXCJzbGlkZXNcIl07XHJcbiAgICAgICAgICAgIGxldCBnbG9iYWxGaWxsQ29sb3IgPSB0aGlzLmNvbnRlbnRKU09OW1wicHJlc2VudGF0aW9uXCJdW1wiZ2xvYmFsQmFja2dyb3VuZFNlbGVjdG9yXCJdW1wiZmlsbEdsb2JhbEJhY2tncm91bmRcIl07XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFnZXNKU09OLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFnZUpTT04gPSBwYWdlc0pTT05baV07XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFnZTogUGFnZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50czogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBnbG9iYWxGaWxsQ29sb3IsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcGFnZS52aXN1YWxFbGVtZW50cyA9IHRoaXMucGFyc2VQYWdlQ1IocGFnZUpTT04pO1xyXG4gICAgICAgICAgICAgICAgcGFnZXMucHVzaChwYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoYm9vay5ib29rVHlwZSA9PT0gQm9va1R5cGUuR0RMKSB7XHJcbiAgICAgICAgICAgIGxldCBwYWdlc0pTT04gPSB0aGlzLmNvbnRlbnRKU09OW1wiY2hhcHRlcnNcIl07XHJcbiAgICAgICAgICAgIGxldCBnbG9iYWxGaWxsQ29sb3IgPSBcIiNGQ0ZDRjJcIjtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlc0pTT04ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBwYWdlSlNPTiA9IHBhZ2VzSlNPTltpXTtcclxuICAgICAgICAgICAgICAgIGxldCBwYWdlOiBQYWdlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnRzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGdsb2JhbEZpbGxDb2xvcixcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHBhZ2UudmlzdWFsRWxlbWVudHMgPSB0aGlzLnBhcnNlUGFnZUdETChwYWdlSlNPTik7XHJcbiAgICAgICAgICAgICAgICBwYWdlcy5wdXNoKHBhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJVbmtub3duIGJvb2sgdHlwZSFcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcGFnZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VQYWdlQ1IocGFnZUpTT046IGFueSk6IGFueVtdIHtcclxuICAgICAgICBsZXQgdmlzdWFsRWxlbWVudHM6IGFueVtdID0gW107XHJcbiAgICAgICAgbGV0IGVsZW1lbnRzSlNPTiA9IHBhZ2VKU09OW1wiZWxlbWVudHNcIl07XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50c0pTT04ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGxpYnJhcnlTdHJpbmc6IHN0cmluZyA9IGVsZW1lbnRzSlNPTltpXVtcImFjdGlvblwiXVtcImxpYnJhcnlcIl07XHJcbiAgICAgICAgICAgIGlmIChsaWJyYXJ5U3RyaW5nLmluY2x1ZGVzKFwiQWR2YW5jZWRUZXh0XCIpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGV4dEVsZW1lbnQ6IFRleHRFbGVtZW50ID0gdGhpcy5wYXJzZVRleHRFbGVtZW50Q1IoZWxlbWVudHNKU09OW2ldKTtcclxuICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnRzLnB1c2godGV4dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpYnJhcnlTdHJpbmcuaW5jbHVkZXMoXCJJbWFnZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGltYWdlRWxlbWVudDogSW1hZ2VFbGVtZW50ID0gdGhpcy5wYXJzZUltYWdlRWxlbWVudENSKGVsZW1lbnRzSlNPTltpXSk7XHJcbiAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50cy5wdXNoKGltYWdlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gZWxzZSBpZiAobGlicmFyeVN0cmluZy5pbmNsdWRlcyhcIkF1ZGlvXCIpKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBsZXQgYXVkaW9FbGVtZW50OiBBdWRpb0VsZW1lbnQgPSB0aGlzLnBhcnNlQXVkaW9FbGVtZW50KGVsZW1lbnRzSlNPTltpXSk7XHJcbiAgICAgICAgICAgIC8vICAgICB2aXN1YWxFbGVtZW50cy5wdXNoKGF1ZGlvRWxlbWVudCk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB2aXN1YWxFbGVtZW50cztcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZVBhZ2VHREwocGFnZUpTT046IGFueSk6IGFueVtdIHtcclxuICAgICAgICBsZXQgdmlzdWFsRWxlbWVudHM6IGFueVtdID0gW107XHJcbiAgICAgICAgbGV0IGVsZW1lbnRzSlNPTkFycmF5ID0gcGFnZUpTT05bXCJwYXJhbXNcIl1bXCJjb250ZW50XCJdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzSlNPTkFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBsaWJyYXJ5U3RyaW5nOiBzdHJpbmcgPSBlbGVtZW50c0pTT05BcnJheVtpXVtcImNvbnRlbnRcIl1bXCJsaWJyYXJ5XCJdO1xyXG4gICAgICAgICAgICBpZiAobGlicmFyeVN0cmluZy5pbmNsdWRlcyhcIkFkdmFuY2VkVGV4dFwiKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRleHRFbGVtZW50OiBUZXh0RWxlbWVudCA9IHRoaXMucGFyc2VUZXh0RWxlbWVudEdETChlbGVtZW50c0pTT05BcnJheVtpXVtcImNvbnRlbnRcIl1bXCJwYXJhbXNcIl0pO1xyXG4gICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudHMucHVzaCh0ZXh0RWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGlicmFyeVN0cmluZy5pbmNsdWRlcyhcIkltYWdlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW1hZ2VFbGVtZW50OiBJbWFnZUVsZW1lbnQgPSB0aGlzLnBhcnNlSW1hZ2VFbGVtZW50R0RMKGVsZW1lbnRzSlNPTkFycmF5W2ldW1wiY29udGVudFwiXVtcInBhcmFtc1wiXSk7XHJcbiAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50cy5wdXNoKGltYWdlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB2aXN1YWxFbGVtZW50cztcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZVRleHRFbGVtZW50Q1IoZWxlbWVudEpTT046IGFueSk6IFRleHRFbGVtZW50IHtcclxuICAgICAgICBsZXQgdGV4dEVsZW1lbnQ6IFRleHRFbGVtZW50ID0ge1xyXG4gICAgICAgICAgICB0eXBlOiBcInRleHRcIixcclxuICAgICAgICAgICAgcG9zaXRpb25YOiBlbGVtZW50SlNPTltcInhcIl0sXHJcbiAgICAgICAgICAgIHBvc2l0aW9uWTogZWxlbWVudEpTT05bXCJ5XCJdLFxyXG4gICAgICAgICAgICB3aWR0aDogZWxlbWVudEpTT05bXCJ3aWR0aFwiXSxcclxuICAgICAgICAgICAgaGVpZ2h0OiBlbGVtZW50SlNPTltcImhlaWdodFwiXSxcclxuICAgICAgICAgICAgdGV4dENvbnRlbnRBc0hUTUw6IGVsZW1lbnRKU09OW1wiYWN0aW9uXCJdW1wicGFyYW1zXCJdW1widGV4dFwiXSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gdGV4dEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VUZXh0RWxlbWVudEdETChlbGVtZW50SlNPTjogYW55KTogVGV4dEVsZW1lbnQge1xyXG4gICAgICAgIGxldCB0ZXh0RWxlbWVudDogVGV4dEVsZW1lbnQgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICBwb3NpdGlvblg6IE5hTixcclxuICAgICAgICAgICAgcG9zaXRpb25ZOiBOYU4sXHJcbiAgICAgICAgICAgIHdpZHRoOiBOYU4sXHJcbiAgICAgICAgICAgIGhlaWdodDogTmFOLFxyXG4gICAgICAgICAgICB0ZXh0Q29udGVudEFzSFRNTDogZWxlbWVudEpTT05bXCJ0ZXh0XCJdLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRleHRFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlSW1hZ2VFbGVtZW50Q1IoZWxlbWVudEpTT046IGFueSk6IEltYWdlRWxlbWVudCB7XHJcbiAgICAgICAgbGV0IHBhdGg6IHN0cmluZyA9IFwiXCI7IDtcclxuICAgICAgICBpZiAoZWxlbWVudEpTT05bXCJhY3Rpb25cIl1bXCJwYXJhbXNcIl1bXCJmaWxlXCJdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcGF0aCA9IHRoaXMuZW1wdHlHbG93SW1hZ2VUYWc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGF0aCA9IGVsZW1lbnRKU09OW1wiYWN0aW9uXCJdW1wicGFyYW1zXCJdW1wiZmlsZVwiXVtcInBhdGhcIl07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBpbWFnZUVsZW1lbnQ6IEltYWdlRWxlbWVudCA9IHtcclxuICAgICAgICAgICAgdHlwZTogXCJpbWFnZVwiLFxyXG4gICAgICAgICAgICBwb3NpdGlvblg6IGVsZW1lbnRKU09OW1wieFwiXSxcclxuICAgICAgICAgICAgcG9zaXRpb25ZOiBlbGVtZW50SlNPTltcInlcIl0sXHJcbiAgICAgICAgICAgIHdpZHRoOiBlbGVtZW50SlNPTltcIndpZHRoXCJdLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGVsZW1lbnRKU09OW1wiaGVpZ2h0XCJdLFxyXG4gICAgICAgICAgICBpbWFnZVNvdXJjZTogcGF0aCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gaW1hZ2VFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlSW1hZ2VFbGVtZW50R0RMKGVsZW1lbnRKU09OOiBhbnkpOiBJbWFnZUVsZW1lbnQge1xyXG4gICAgICAgIGxldCBpbWFnZUVsZW1lbnQ6IEltYWdlRWxlbWVudCA9IHtcclxuICAgICAgICAgICAgdHlwZTogXCJpbWFnZVwiLFxyXG4gICAgICAgICAgICBwb3NpdGlvblg6IE5hTixcclxuICAgICAgICAgICAgcG9zaXRpb25ZOiBOYU4sXHJcbiAgICAgICAgICAgIHdpZHRoOiBlbGVtZW50SlNPTltcIndpZHRoXCJdLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGVsZW1lbnRKU09OW1wiaGVpZ2h0XCJdLFxyXG4gICAgICAgICAgICBpbWFnZVNvdXJjZTogZWxlbWVudEpTT05bXCJmaWxlXCJdW1wicGF0aFwiXSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBpbWFnZUVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VBdWRpb0VsZW1lbnRDUihlbGVtZW50SlNPTjogYW55KTogQXVkaW9FbGVtZW50IHtcclxuICAgICAgICBsZXQgYXVkaW9FbGVtZW50OiBBdWRpb0VsZW1lbnQgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiYXVkaW9cIixcclxuICAgICAgICAgICAgcG9zaXRpb25YOiBlbGVtZW50SlNPTltcInBvc2l0aW9uXCJdW1wieFwiXSxcclxuICAgICAgICAgICAgcG9zaXRpb25ZOiBlbGVtZW50SlNPTltcInBvc2l0aW9uXCJdW1wieVwiXSxcclxuICAgICAgICAgICAgd2lkdGg6IGVsZW1lbnRKU09OW1wic2l6ZVwiXVtcIndpZHRoXCJdLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGVsZW1lbnRKU09OW1wic2l6ZVwiXVtcImhlaWdodFwiXSxcclxuICAgICAgICAgICAgYXVkaW9TcmM6IGVsZW1lbnRKU09OW1wiYWN0aW9uXCJdW1wiYXVkaW9TcmNcIl0sXHJcbiAgICAgICAgICAgIHN0eWxlczogZWxlbWVudEpTT05bXCJzdHlsZXNcIl0sXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGF1ZGlvRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBwYXJzZUNvbnRlbnRKU09ORmlsZSgpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHRoaXMuY29udGVudEZpbGVQYXRoLCB0cnVlKTtcclxuICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcclxuICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdGF0dXMgPSB4aHIuc3RhdHVzO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0geGhyLnJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSByZXNwb25zZVtcImwxMG5cIl07XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJlc3BvbnNlW1wib3ZlcnJpZGVcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCh4aHIucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIuc2VuZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxufVxyXG4iLCJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbi8qIVxuICogU3BsaWRlLmpzXG4gKiBWZXJzaW9uICA6IDQuMS40XG4gKiBMaWNlbnNlICA6IE1JVFxuICogQ29weXJpZ2h0OiAyMDIyIE5hb3Rvc2hpIEZ1aml0YVxuICovXG52YXIgTUVESUFfUFJFRkVSU19SRURVQ0VEX01PVElPTiA9IFwiKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSlcIjtcbnZhciBDUkVBVEVEID0gMTtcbnZhciBNT1VOVEVEID0gMjtcbnZhciBJRExFID0gMztcbnZhciBNT1ZJTkcgPSA0O1xudmFyIFNDUk9MTElORyA9IDU7XG52YXIgRFJBR0dJTkcgPSA2O1xudmFyIERFU1RST1lFRCA9IDc7XG52YXIgU1RBVEVTID0ge1xuICBDUkVBVEVEOiBDUkVBVEVELFxuICBNT1VOVEVEOiBNT1VOVEVELFxuICBJRExFOiBJRExFLFxuICBNT1ZJTkc6IE1PVklORyxcbiAgU0NST0xMSU5HOiBTQ1JPTExJTkcsXG4gIERSQUdHSU5HOiBEUkFHR0lORyxcbiAgREVTVFJPWUVEOiBERVNUUk9ZRURcbn07XG5cbmZ1bmN0aW9uIGVtcHR5KGFycmF5KSB7XG4gIGFycmF5Lmxlbmd0aCA9IDA7XG59XG5cbmZ1bmN0aW9uIHNsaWNlKGFycmF5TGlrZSwgc3RhcnQsIGVuZCkge1xuICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJyYXlMaWtlLCBzdGFydCwgZW5kKTtcbn1cblxuZnVuY3Rpb24gYXBwbHkoZnVuYykge1xuICByZXR1cm4gZnVuYy5iaW5kLmFwcGx5KGZ1bmMsIFtudWxsXS5jb25jYXQoc2xpY2UoYXJndW1lbnRzLCAxKSkpO1xufVxuXG52YXIgbmV4dFRpY2sgPSBzZXRUaW1lb3V0O1xuXG52YXIgbm9vcCA9IGZ1bmN0aW9uIG5vb3AoKSB7fTtcblxuZnVuY3Rpb24gcmFmKGZ1bmMpIHtcbiAgcmV0dXJuIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jKTtcbn1cblxuZnVuY3Rpb24gdHlwZU9mKHR5cGUsIHN1YmplY3QpIHtcbiAgcmV0dXJuIHR5cGVvZiBzdWJqZWN0ID09PSB0eXBlO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdChzdWJqZWN0KSB7XG4gIHJldHVybiAhaXNOdWxsKHN1YmplY3QpICYmIHR5cGVPZihcIm9iamVjdFwiLCBzdWJqZWN0KTtcbn1cblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xudmFyIGlzRnVuY3Rpb24gPSBhcHBseSh0eXBlT2YsIFwiZnVuY3Rpb25cIik7XG52YXIgaXNTdHJpbmcgPSBhcHBseSh0eXBlT2YsIFwic3RyaW5nXCIpO1xudmFyIGlzVW5kZWZpbmVkID0gYXBwbHkodHlwZU9mLCBcInVuZGVmaW5lZFwiKTtcblxuZnVuY3Rpb24gaXNOdWxsKHN1YmplY3QpIHtcbiAgcmV0dXJuIHN1YmplY3QgPT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzSFRNTEVsZW1lbnQoc3ViamVjdCkge1xuICB0cnkge1xuICAgIHJldHVybiBzdWJqZWN0IGluc3RhbmNlb2YgKHN1YmplY3Qub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyB8fCB3aW5kb3cpLkhUTUxFbGVtZW50O1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRvQXJyYXkodmFsdWUpIHtcbiAgcmV0dXJuIGlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdO1xufVxuXG5mdW5jdGlvbiBmb3JFYWNoKHZhbHVlcywgaXRlcmF0ZWUpIHtcbiAgdG9BcnJheSh2YWx1ZXMpLmZvckVhY2goaXRlcmF0ZWUpO1xufVxuXG5mdW5jdGlvbiBpbmNsdWRlcyhhcnJheSwgdmFsdWUpIHtcbiAgcmV0dXJuIGFycmF5LmluZGV4T2YodmFsdWUpID4gLTE7XG59XG5cbmZ1bmN0aW9uIHB1c2goYXJyYXksIGl0ZW1zKSB7XG4gIGFycmF5LnB1c2guYXBwbHkoYXJyYXksIHRvQXJyYXkoaXRlbXMpKTtcbiAgcmV0dXJuIGFycmF5O1xufVxuXG5mdW5jdGlvbiB0b2dnbGVDbGFzcyhlbG0sIGNsYXNzZXMsIGFkZCkge1xuICBpZiAoZWxtKSB7XG4gICAgZm9yRWFjaChjbGFzc2VzLCBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgZWxtLmNsYXNzTGlzdFthZGQgPyBcImFkZFwiIDogXCJyZW1vdmVcIl0obmFtZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYWRkQ2xhc3MoZWxtLCBjbGFzc2VzKSB7XG4gIHRvZ2dsZUNsYXNzKGVsbSwgaXNTdHJpbmcoY2xhc3NlcykgPyBjbGFzc2VzLnNwbGl0KFwiIFwiKSA6IGNsYXNzZXMsIHRydWUpO1xufVxuXG5mdW5jdGlvbiBhcHBlbmQocGFyZW50LCBjaGlsZHJlbikge1xuICBmb3JFYWNoKGNoaWxkcmVuLCBwYXJlbnQuYXBwZW5kQ2hpbGQuYmluZChwYXJlbnQpKTtcbn1cblxuZnVuY3Rpb24gYmVmb3JlKG5vZGVzLCByZWYpIHtcbiAgZm9yRWFjaChub2RlcywgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICB2YXIgcGFyZW50ID0gKHJlZiB8fCBub2RlKS5wYXJlbnROb2RlO1xuXG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShub2RlLCByZWYpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG1hdGNoZXMoZWxtLCBzZWxlY3Rvcikge1xuICByZXR1cm4gaXNIVE1MRWxlbWVudChlbG0pICYmIChlbG1bXCJtc01hdGNoZXNTZWxlY3RvclwiXSB8fCBlbG0ubWF0Y2hlcykuY2FsbChlbG0sIHNlbGVjdG9yKTtcbn1cblxuZnVuY3Rpb24gY2hpbGRyZW4ocGFyZW50LCBzZWxlY3Rvcikge1xuICB2YXIgY2hpbGRyZW4yID0gcGFyZW50ID8gc2xpY2UocGFyZW50LmNoaWxkcmVuKSA6IFtdO1xuICByZXR1cm4gc2VsZWN0b3IgPyBjaGlsZHJlbjIuZmlsdGVyKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgIHJldHVybiBtYXRjaGVzKGNoaWxkLCBzZWxlY3Rvcik7XG4gIH0pIDogY2hpbGRyZW4yO1xufVxuXG5mdW5jdGlvbiBjaGlsZChwYXJlbnQsIHNlbGVjdG9yKSB7XG4gIHJldHVybiBzZWxlY3RvciA/IGNoaWxkcmVuKHBhcmVudCwgc2VsZWN0b3IpWzBdIDogcGFyZW50LmZpcnN0RWxlbWVudENoaWxkO1xufVxuXG52YXIgb3duS2V5cyA9IE9iamVjdC5rZXlzO1xuXG5mdW5jdGlvbiBmb3JPd24ob2JqZWN0LCBpdGVyYXRlZSwgcmlnaHQpIHtcbiAgaWYgKG9iamVjdCkge1xuICAgIChyaWdodCA/IG93bktleXMob2JqZWN0KS5yZXZlcnNlKCkgOiBvd25LZXlzKG9iamVjdCkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAga2V5ICE9PSBcIl9fcHJvdG9fX1wiICYmIGl0ZXJhdGVlKG9iamVjdFtrZXldLCBrZXkpO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIG9iamVjdDtcbn1cblxuZnVuY3Rpb24gYXNzaWduKG9iamVjdCkge1xuICBzbGljZShhcmd1bWVudHMsIDEpLmZvckVhY2goZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgIGZvck93bihzb3VyY2UsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICBvYmplY3Rba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIG9iamVjdDtcbn1cblxuZnVuY3Rpb24gbWVyZ2Uob2JqZWN0KSB7XG4gIHNsaWNlKGFyZ3VtZW50cywgMSkuZm9yRWFjaChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgZm9yT3duKHNvdXJjZSwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBvYmplY3Rba2V5XSA9IHZhbHVlLnNsaWNlKCk7XG4gICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICBvYmplY3Rba2V5XSA9IG1lcmdlKHt9LCBpc09iamVjdChvYmplY3Rba2V5XSkgPyBvYmplY3Rba2V5XSA6IHt9LCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvYmplY3Rba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIG9iamVjdDtcbn1cblxuZnVuY3Rpb24gb21pdChvYmplY3QsIGtleXMpIHtcbiAgZm9yRWFjaChrZXlzIHx8IG93bktleXMob2JqZWN0KSwgZnVuY3Rpb24gKGtleSkge1xuICAgIGRlbGV0ZSBvYmplY3Rba2V5XTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUF0dHJpYnV0ZShlbG1zLCBhdHRycykge1xuICBmb3JFYWNoKGVsbXMsIGZ1bmN0aW9uIChlbG0pIHtcbiAgICBmb3JFYWNoKGF0dHJzLCBmdW5jdGlvbiAoYXR0cikge1xuICAgICAgZWxtICYmIGVsbS5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBzZXRBdHRyaWJ1dGUoZWxtcywgYXR0cnMsIHZhbHVlKSB7XG4gIGlmIChpc09iamVjdChhdHRycykpIHtcbiAgICBmb3JPd24oYXR0cnMsIGZ1bmN0aW9uICh2YWx1ZTIsIG5hbWUpIHtcbiAgICAgIHNldEF0dHJpYnV0ZShlbG1zLCBuYW1lLCB2YWx1ZTIpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGZvckVhY2goZWxtcywgZnVuY3Rpb24gKGVsbSkge1xuICAgICAgaXNOdWxsKHZhbHVlKSB8fCB2YWx1ZSA9PT0gXCJcIiA/IHJlbW92ZUF0dHJpYnV0ZShlbG0sIGF0dHJzKSA6IGVsbS5zZXRBdHRyaWJ1dGUoYXR0cnMsIFN0cmluZyh2YWx1ZSkpO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZSh0YWcsIGF0dHJzLCBwYXJlbnQpIHtcbiAgdmFyIGVsbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcblxuICBpZiAoYXR0cnMpIHtcbiAgICBpc1N0cmluZyhhdHRycykgPyBhZGRDbGFzcyhlbG0sIGF0dHJzKSA6IHNldEF0dHJpYnV0ZShlbG0sIGF0dHJzKTtcbiAgfVxuXG4gIHBhcmVudCAmJiBhcHBlbmQocGFyZW50LCBlbG0pO1xuICByZXR1cm4gZWxtO1xufVxuXG5mdW5jdGlvbiBzdHlsZShlbG0sIHByb3AsIHZhbHVlKSB7XG4gIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZ2V0Q29tcHV0ZWRTdHlsZShlbG0pW3Byb3BdO1xuICB9XG5cbiAgaWYgKCFpc051bGwodmFsdWUpKSB7XG4gICAgZWxtLnN0eWxlW3Byb3BdID0gXCJcIiArIHZhbHVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRpc3BsYXkoZWxtLCBkaXNwbGF5Mikge1xuICBzdHlsZShlbG0sIFwiZGlzcGxheVwiLCBkaXNwbGF5Mik7XG59XG5cbmZ1bmN0aW9uIGZvY3VzKGVsbSkge1xuICBlbG1bXCJzZXRBY3RpdmVcIl0gJiYgZWxtW1wic2V0QWN0aXZlXCJdKCkgfHwgZWxtLmZvY3VzKHtcbiAgICBwcmV2ZW50U2Nyb2xsOiB0cnVlXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRBdHRyaWJ1dGUoZWxtLCBhdHRyKSB7XG4gIHJldHVybiBlbG0uZ2V0QXR0cmlidXRlKGF0dHIpO1xufVxuXG5mdW5jdGlvbiBoYXNDbGFzcyhlbG0sIGNsYXNzTmFtZSkge1xuICByZXR1cm4gZWxtICYmIGVsbS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtcbn1cblxuZnVuY3Rpb24gcmVjdCh0YXJnZXQpIHtcbiAgcmV0dXJuIHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlKG5vZGVzKSB7XG4gIGZvckVhY2gobm9kZXMsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgaWYgKG5vZGUgJiYgbm9kZS5wYXJlbnROb2RlKSB7XG4gICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcGFyc2VIdG1sKGh0bWwpIHtcbiAgcmV0dXJuIGNoaWxkKG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoaHRtbCwgXCJ0ZXh0L2h0bWxcIikuYm9keSk7XG59XG5cbmZ1bmN0aW9uIHByZXZlbnQoZSwgc3RvcFByb3BhZ2F0aW9uKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcblxuICBpZiAoc3RvcFByb3BhZ2F0aW9uKSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5KHBhcmVudCwgc2VsZWN0b3IpIHtcbiAgcmV0dXJuIHBhcmVudCAmJiBwYXJlbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5QWxsKHBhcmVudCwgc2VsZWN0b3IpIHtcbiAgcmV0dXJuIHNlbGVjdG9yID8gc2xpY2UocGFyZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKSA6IFtdO1xufVxuXG5mdW5jdGlvbiByZW1vdmVDbGFzcyhlbG0sIGNsYXNzZXMpIHtcbiAgdG9nZ2xlQ2xhc3MoZWxtLCBjbGFzc2VzLCBmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIHRpbWVPZihlKSB7XG4gIHJldHVybiBlLnRpbWVTdGFtcDtcbn1cblxuZnVuY3Rpb24gdW5pdCh2YWx1ZSkge1xuICByZXR1cm4gaXNTdHJpbmcodmFsdWUpID8gdmFsdWUgOiB2YWx1ZSA/IHZhbHVlICsgXCJweFwiIDogXCJcIjtcbn1cblxudmFyIFBST0pFQ1RfQ09ERSA9IFwic3BsaWRlXCI7XG52YXIgREFUQV9BVFRSSUJVVEUgPSBcImRhdGEtXCIgKyBQUk9KRUNUX0NPREU7XG5cbmZ1bmN0aW9uIGFzc2VydChjb25kaXRpb24sIG1lc3NhZ2UpIHtcbiAgaWYgKCFjb25kaXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJbXCIgKyBQUk9KRUNUX0NPREUgKyBcIl0gXCIgKyAobWVzc2FnZSB8fCBcIlwiKSk7XG4gIH1cbn1cblxudmFyIG1pbiA9IE1hdGgubWluLFxuICAgIG1heCA9IE1hdGgubWF4LFxuICAgIGZsb29yID0gTWF0aC5mbG9vcixcbiAgICBjZWlsID0gTWF0aC5jZWlsLFxuICAgIGFicyA9IE1hdGguYWJzO1xuXG5mdW5jdGlvbiBhcHByb3hpbWF0ZWx5RXF1YWwoeCwgeSwgZXBzaWxvbikge1xuICByZXR1cm4gYWJzKHggLSB5KSA8IGVwc2lsb247XG59XG5cbmZ1bmN0aW9uIGJldHdlZW4obnVtYmVyLCB4LCB5LCBleGNsdXNpdmUpIHtcbiAgdmFyIG1pbmltdW0gPSBtaW4oeCwgeSk7XG4gIHZhciBtYXhpbXVtID0gbWF4KHgsIHkpO1xuICByZXR1cm4gZXhjbHVzaXZlID8gbWluaW11bSA8IG51bWJlciAmJiBudW1iZXIgPCBtYXhpbXVtIDogbWluaW11bSA8PSBudW1iZXIgJiYgbnVtYmVyIDw9IG1heGltdW07XG59XG5cbmZ1bmN0aW9uIGNsYW1wKG51bWJlciwgeCwgeSkge1xuICB2YXIgbWluaW11bSA9IG1pbih4LCB5KTtcbiAgdmFyIG1heGltdW0gPSBtYXgoeCwgeSk7XG4gIHJldHVybiBtaW4obWF4KG1pbmltdW0sIG51bWJlciksIG1heGltdW0pO1xufVxuXG5mdW5jdGlvbiBzaWduKHgpIHtcbiAgcmV0dXJuICsoeCA+IDApIC0gKyh4IDwgMCk7XG59XG5cbmZ1bmN0aW9uIGNhbWVsVG9LZWJhYihzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8oW2EtejAtOV0pKFtBLVpdKS9nLCBcIiQxLSQyXCIpLnRvTG93ZXJDYXNlKCk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdChzdHJpbmcsIHJlcGxhY2VtZW50cykge1xuICBmb3JFYWNoKHJlcGxhY2VtZW50cywgZnVuY3Rpb24gKHJlcGxhY2VtZW50KSB7XG4gICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoXCIlc1wiLCBcIlwiICsgcmVwbGFjZW1lbnQpO1xuICB9KTtcbiAgcmV0dXJuIHN0cmluZztcbn1cblxuZnVuY3Rpb24gcGFkKG51bWJlcikge1xuICByZXR1cm4gbnVtYmVyIDwgMTAgPyBcIjBcIiArIG51bWJlciA6IFwiXCIgKyBudW1iZXI7XG59XG5cbnZhciBpZHMgPSB7fTtcblxuZnVuY3Rpb24gdW5pcXVlSWQocHJlZml4KSB7XG4gIHJldHVybiBcIlwiICsgcHJlZml4ICsgcGFkKGlkc1twcmVmaXhdID0gKGlkc1twcmVmaXhdIHx8IDApICsgMSk7XG59XG5cbmZ1bmN0aW9uIEV2ZW50QmluZGVyKCkge1xuICB2YXIgbGlzdGVuZXJzID0gW107XG5cbiAgZnVuY3Rpb24gYmluZCh0YXJnZXRzLCBldmVudHMsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgZm9yRWFjaEV2ZW50KHRhcmdldHMsIGV2ZW50cywgZnVuY3Rpb24gKHRhcmdldCwgZXZlbnQsIG5hbWVzcGFjZSkge1xuICAgICAgdmFyIGlzRXZlbnRUYXJnZXQgPSAoXCJhZGRFdmVudExpc3RlbmVyXCIgaW4gdGFyZ2V0KTtcbiAgICAgIHZhciByZW1vdmVyID0gaXNFdmVudFRhcmdldCA/IHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyLmJpbmQodGFyZ2V0LCBldmVudCwgY2FsbGJhY2ssIG9wdGlvbnMpIDogdGFyZ2V0W1wicmVtb3ZlTGlzdGVuZXJcIl0uYmluZCh0YXJnZXQsIGNhbGxiYWNrKTtcbiAgICAgIGlzRXZlbnRUYXJnZXQgPyB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgY2FsbGJhY2ssIG9wdGlvbnMpIDogdGFyZ2V0W1wiYWRkTGlzdGVuZXJcIl0oY2FsbGJhY2spO1xuICAgICAgbGlzdGVuZXJzLnB1c2goW3RhcmdldCwgZXZlbnQsIG5hbWVzcGFjZSwgY2FsbGJhY2ssIHJlbW92ZXJdKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVuYmluZCh0YXJnZXRzLCBldmVudHMsIGNhbGxiYWNrKSB7XG4gICAgZm9yRWFjaEV2ZW50KHRhcmdldHMsIGV2ZW50cywgZnVuY3Rpb24gKHRhcmdldCwgZXZlbnQsIG5hbWVzcGFjZSkge1xuICAgICAgbGlzdGVuZXJzID0gbGlzdGVuZXJzLmZpbHRlcihmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKGxpc3RlbmVyWzBdID09PSB0YXJnZXQgJiYgbGlzdGVuZXJbMV0gPT09IGV2ZW50ICYmIGxpc3RlbmVyWzJdID09PSBuYW1lc3BhY2UgJiYgKCFjYWxsYmFjayB8fCBsaXN0ZW5lclszXSA9PT0gY2FsbGJhY2spKSB7XG4gICAgICAgICAgbGlzdGVuZXJbNF0oKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlzcGF0Y2godGFyZ2V0LCB0eXBlLCBkZXRhaWwpIHtcbiAgICB2YXIgZTtcbiAgICB2YXIgYnViYmxlcyA9IHRydWU7XG5cbiAgICBpZiAodHlwZW9mIEN1c3RvbUV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGUgPSBuZXcgQ3VzdG9tRXZlbnQodHlwZSwge1xuICAgICAgICBidWJibGVzOiBidWJibGVzLFxuICAgICAgICBkZXRhaWw6IGRldGFpbFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIkN1c3RvbUV2ZW50XCIpO1xuICAgICAgZS5pbml0Q3VzdG9tRXZlbnQodHlwZSwgYnViYmxlcywgZmFsc2UsIGRldGFpbCk7XG4gICAgfVxuXG4gICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQoZSk7XG4gICAgcmV0dXJuIGU7XG4gIH1cblxuICBmdW5jdGlvbiBmb3JFYWNoRXZlbnQodGFyZ2V0cywgZXZlbnRzLCBpdGVyYXRlZSkge1xuICAgIGZvckVhY2godGFyZ2V0cywgZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgdGFyZ2V0ICYmIGZvckVhY2goZXZlbnRzLCBmdW5jdGlvbiAoZXZlbnRzMikge1xuICAgICAgICBldmVudHMyLnNwbGl0KFwiIFwiKS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudE5TKSB7XG4gICAgICAgICAgdmFyIGZyYWdtZW50ID0gZXZlbnROUy5zcGxpdChcIi5cIik7XG4gICAgICAgICAgaXRlcmF0ZWUodGFyZ2V0LCBmcmFnbWVudFswXSwgZnJhZ21lbnRbMV0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICBsaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgZGF0YVs0XSgpO1xuICAgIH0pO1xuICAgIGVtcHR5KGxpc3RlbmVycyk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGJpbmQ6IGJpbmQsXG4gICAgdW5iaW5kOiB1bmJpbmQsXG4gICAgZGlzcGF0Y2g6IGRpc3BhdGNoLFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3lcbiAgfTtcbn1cblxudmFyIEVWRU5UX01PVU5URUQgPSBcIm1vdW50ZWRcIjtcbnZhciBFVkVOVF9SRUFEWSA9IFwicmVhZHlcIjtcbnZhciBFVkVOVF9NT1ZFID0gXCJtb3ZlXCI7XG52YXIgRVZFTlRfTU9WRUQgPSBcIm1vdmVkXCI7XG52YXIgRVZFTlRfQ0xJQ0sgPSBcImNsaWNrXCI7XG52YXIgRVZFTlRfQUNUSVZFID0gXCJhY3RpdmVcIjtcbnZhciBFVkVOVF9JTkFDVElWRSA9IFwiaW5hY3RpdmVcIjtcbnZhciBFVkVOVF9WSVNJQkxFID0gXCJ2aXNpYmxlXCI7XG52YXIgRVZFTlRfSElEREVOID0gXCJoaWRkZW5cIjtcbnZhciBFVkVOVF9SRUZSRVNIID0gXCJyZWZyZXNoXCI7XG52YXIgRVZFTlRfVVBEQVRFRCA9IFwidXBkYXRlZFwiO1xudmFyIEVWRU5UX1JFU0laRSA9IFwicmVzaXplXCI7XG52YXIgRVZFTlRfUkVTSVpFRCA9IFwicmVzaXplZFwiO1xudmFyIEVWRU5UX0RSQUcgPSBcImRyYWdcIjtcbnZhciBFVkVOVF9EUkFHR0lORyA9IFwiZHJhZ2dpbmdcIjtcbnZhciBFVkVOVF9EUkFHR0VEID0gXCJkcmFnZ2VkXCI7XG52YXIgRVZFTlRfU0NST0xMID0gXCJzY3JvbGxcIjtcbnZhciBFVkVOVF9TQ1JPTExFRCA9IFwic2Nyb2xsZWRcIjtcbnZhciBFVkVOVF9PVkVSRkxPVyA9IFwib3ZlcmZsb3dcIjtcbnZhciBFVkVOVF9ERVNUUk9ZID0gXCJkZXN0cm95XCI7XG52YXIgRVZFTlRfQVJST1dTX01PVU5URUQgPSBcImFycm93czptb3VudGVkXCI7XG52YXIgRVZFTlRfQVJST1dTX1VQREFURUQgPSBcImFycm93czp1cGRhdGVkXCI7XG52YXIgRVZFTlRfUEFHSU5BVElPTl9NT1VOVEVEID0gXCJwYWdpbmF0aW9uOm1vdW50ZWRcIjtcbnZhciBFVkVOVF9QQUdJTkFUSU9OX1VQREFURUQgPSBcInBhZ2luYXRpb246dXBkYXRlZFwiO1xudmFyIEVWRU5UX05BVklHQVRJT05fTU9VTlRFRCA9IFwibmF2aWdhdGlvbjptb3VudGVkXCI7XG52YXIgRVZFTlRfQVVUT1BMQVlfUExBWSA9IFwiYXV0b3BsYXk6cGxheVwiO1xudmFyIEVWRU5UX0FVVE9QTEFZX1BMQVlJTkcgPSBcImF1dG9wbGF5OnBsYXlpbmdcIjtcbnZhciBFVkVOVF9BVVRPUExBWV9QQVVTRSA9IFwiYXV0b3BsYXk6cGF1c2VcIjtcbnZhciBFVkVOVF9MQVpZTE9BRF9MT0FERUQgPSBcImxhenlsb2FkOmxvYWRlZFwiO1xudmFyIEVWRU5UX1NMSURFX0tFWURPV04gPSBcInNrXCI7XG52YXIgRVZFTlRfU0hJRlRFRCA9IFwic2hcIjtcbnZhciBFVkVOVF9FTkRfSU5ERVhfQ0hBTkdFRCA9IFwiZWlcIjtcblxuZnVuY3Rpb24gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMikge1xuICB2YXIgYnVzID0gU3BsaWRlMiA/IFNwbGlkZTIuZXZlbnQuYnVzIDogZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICB2YXIgYmluZGVyID0gRXZlbnRCaW5kZXIoKTtcblxuICBmdW5jdGlvbiBvbihldmVudHMsIGNhbGxiYWNrKSB7XG4gICAgYmluZGVyLmJpbmQoYnVzLCB0b0FycmF5KGV2ZW50cykuam9pbihcIiBcIiksIGZ1bmN0aW9uIChlKSB7XG4gICAgICBjYWxsYmFjay5hcHBseShjYWxsYmFjaywgaXNBcnJheShlLmRldGFpbCkgPyBlLmRldGFpbCA6IFtdKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVtaXQoZXZlbnQpIHtcbiAgICBiaW5kZXIuZGlzcGF0Y2goYnVzLCBldmVudCwgc2xpY2UoYXJndW1lbnRzLCAxKSk7XG4gIH1cblxuICBpZiAoU3BsaWRlMikge1xuICAgIFNwbGlkZTIuZXZlbnQub24oRVZFTlRfREVTVFJPWSwgYmluZGVyLmRlc3Ryb3kpO1xuICB9XG5cbiAgcmV0dXJuIGFzc2lnbihiaW5kZXIsIHtcbiAgICBidXM6IGJ1cyxcbiAgICBvbjogb24sXG4gICAgb2ZmOiBhcHBseShiaW5kZXIudW5iaW5kLCBidXMpLFxuICAgIGVtaXQ6IGVtaXRcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIFJlcXVlc3RJbnRlcnZhbChpbnRlcnZhbCwgb25JbnRlcnZhbCwgb25VcGRhdGUsIGxpbWl0KSB7XG4gIHZhciBub3cgPSBEYXRlLm5vdztcbiAgdmFyIHN0YXJ0VGltZTtcbiAgdmFyIHJhdGUgPSAwO1xuICB2YXIgaWQ7XG4gIHZhciBwYXVzZWQgPSB0cnVlO1xuICB2YXIgY291bnQgPSAwO1xuXG4gIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICBpZiAoIXBhdXNlZCkge1xuICAgICAgcmF0ZSA9IGludGVydmFsID8gbWluKChub3coKSAtIHN0YXJ0VGltZSkgLyBpbnRlcnZhbCwgMSkgOiAxO1xuICAgICAgb25VcGRhdGUgJiYgb25VcGRhdGUocmF0ZSk7XG5cbiAgICAgIGlmIChyYXRlID49IDEpIHtcbiAgICAgICAgb25JbnRlcnZhbCgpO1xuICAgICAgICBzdGFydFRpbWUgPSBub3coKTtcblxuICAgICAgICBpZiAobGltaXQgJiYgKytjb3VudCA+PSBsaW1pdCkge1xuICAgICAgICAgIHJldHVybiBwYXVzZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlkID0gcmFmKHVwZGF0ZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnQocmVzdW1lKSB7XG4gICAgcmVzdW1lIHx8IGNhbmNlbCgpO1xuICAgIHN0YXJ0VGltZSA9IG5vdygpIC0gKHJlc3VtZSA/IHJhdGUgKiBpbnRlcnZhbCA6IDApO1xuICAgIHBhdXNlZCA9IGZhbHNlO1xuICAgIGlkID0gcmFmKHVwZGF0ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBwYXVzZWQgPSB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gcmV3aW5kKCkge1xuICAgIHN0YXJ0VGltZSA9IG5vdygpO1xuICAgIHJhdGUgPSAwO1xuXG4gICAgaWYgKG9uVXBkYXRlKSB7XG4gICAgICBvblVwZGF0ZShyYXRlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgaWQgJiYgY2FuY2VsQW5pbWF0aW9uRnJhbWUoaWQpO1xuICAgIHJhdGUgPSAwO1xuICAgIGlkID0gMDtcbiAgICBwYXVzZWQgPSB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0KHRpbWUpIHtcbiAgICBpbnRlcnZhbCA9IHRpbWU7XG4gIH1cblxuICBmdW5jdGlvbiBpc1BhdXNlZCgpIHtcbiAgICByZXR1cm4gcGF1c2VkO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzdGFydDogc3RhcnQsXG4gICAgcmV3aW5kOiByZXdpbmQsXG4gICAgcGF1c2U6IHBhdXNlLFxuICAgIGNhbmNlbDogY2FuY2VsLFxuICAgIHNldDogc2V0LFxuICAgIGlzUGF1c2VkOiBpc1BhdXNlZFxuICB9O1xufVxuXG5mdW5jdGlvbiBTdGF0ZShpbml0aWFsU3RhdGUpIHtcbiAgdmFyIHN0YXRlID0gaW5pdGlhbFN0YXRlO1xuXG4gIGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgIHN0YXRlID0gdmFsdWU7XG4gIH1cblxuICBmdW5jdGlvbiBpcyhzdGF0ZXMpIHtcbiAgICByZXR1cm4gaW5jbHVkZXModG9BcnJheShzdGF0ZXMpLCBzdGF0ZSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHNldDogc2V0LFxuICAgIGlzOiBpc1xuICB9O1xufVxuXG5mdW5jdGlvbiBUaHJvdHRsZShmdW5jLCBkdXJhdGlvbikge1xuICB2YXIgaW50ZXJ2YWwgPSBSZXF1ZXN0SW50ZXJ2YWwoZHVyYXRpb24gfHwgMCwgZnVuYywgbnVsbCwgMSk7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaW50ZXJ2YWwuaXNQYXVzZWQoKSAmJiBpbnRlcnZhbC5zdGFydCgpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBNZWRpYShTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgc3RhdGUgPSBTcGxpZGUyLnN0YXRlO1xuICB2YXIgYnJlYWtwb2ludHMgPSBvcHRpb25zLmJyZWFrcG9pbnRzIHx8IHt9O1xuICB2YXIgcmVkdWNlZE1vdGlvbiA9IG9wdGlvbnMucmVkdWNlZE1vdGlvbiB8fCB7fTtcbiAgdmFyIGJpbmRlciA9IEV2ZW50QmluZGVyKCk7XG4gIHZhciBxdWVyaWVzID0gW107XG5cbiAgZnVuY3Rpb24gc2V0dXAoKSB7XG4gICAgdmFyIGlzTWluID0gb3B0aW9ucy5tZWRpYVF1ZXJ5ID09PSBcIm1pblwiO1xuICAgIG93bktleXMoYnJlYWtwb2ludHMpLnNvcnQoZnVuY3Rpb24gKG4sIG0pIHtcbiAgICAgIHJldHVybiBpc01pbiA/ICtuIC0gK20gOiArbSAtICtuO1xuICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmVnaXN0ZXIoYnJlYWtwb2ludHNba2V5XSwgXCIoXCIgKyAoaXNNaW4gPyBcIm1pblwiIDogXCJtYXhcIikgKyBcIi13aWR0aDpcIiArIGtleSArIFwicHgpXCIpO1xuICAgIH0pO1xuICAgIHJlZ2lzdGVyKHJlZHVjZWRNb3Rpb24sIE1FRElBX1BSRUZFUlNfUkVEVUNFRF9NT1RJT04pO1xuICAgIHVwZGF0ZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveShjb21wbGV0ZWx5KSB7XG4gICAgaWYgKGNvbXBsZXRlbHkpIHtcbiAgICAgIGJpbmRlci5kZXN0cm95KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXIob3B0aW9uczIsIHF1ZXJ5KSB7XG4gICAgdmFyIHF1ZXJ5TGlzdCA9IG1hdGNoTWVkaWEocXVlcnkpO1xuICAgIGJpbmRlci5iaW5kKHF1ZXJ5TGlzdCwgXCJjaGFuZ2VcIiwgdXBkYXRlKTtcbiAgICBxdWVyaWVzLnB1c2goW29wdGlvbnMyLCBxdWVyeUxpc3RdKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICB2YXIgZGVzdHJveWVkID0gc3RhdGUuaXMoREVTVFJPWUVEKTtcbiAgICB2YXIgZGlyZWN0aW9uID0gb3B0aW9ucy5kaXJlY3Rpb247XG4gICAgdmFyIG1lcmdlZCA9IHF1ZXJpZXMucmVkdWNlKGZ1bmN0aW9uIChtZXJnZWQyLCBlbnRyeSkge1xuICAgICAgcmV0dXJuIG1lcmdlKG1lcmdlZDIsIGVudHJ5WzFdLm1hdGNoZXMgPyBlbnRyeVswXSA6IHt9KTtcbiAgICB9LCB7fSk7XG4gICAgb21pdChvcHRpb25zKTtcbiAgICBzZXQobWVyZ2VkKTtcblxuICAgIGlmIChvcHRpb25zLmRlc3Ryb3kpIHtcbiAgICAgIFNwbGlkZTIuZGVzdHJveShvcHRpb25zLmRlc3Ryb3kgPT09IFwiY29tcGxldGVseVwiKTtcbiAgICB9IGVsc2UgaWYgKGRlc3Ryb3llZCkge1xuICAgICAgZGVzdHJveSh0cnVlKTtcbiAgICAgIFNwbGlkZTIubW91bnQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGlyZWN0aW9uICE9PSBvcHRpb25zLmRpcmVjdGlvbiAmJiBTcGxpZGUyLnJlZnJlc2goKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWR1Y2UoZW5hYmxlKSB7XG4gICAgaWYgKG1hdGNoTWVkaWEoTUVESUFfUFJFRkVSU19SRURVQ0VEX01PVElPTikubWF0Y2hlcykge1xuICAgICAgZW5hYmxlID8gbWVyZ2Uob3B0aW9ucywgcmVkdWNlZE1vdGlvbikgOiBvbWl0KG9wdGlvbnMsIG93bktleXMocmVkdWNlZE1vdGlvbikpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNldChvcHRzLCBiYXNlLCBub3RpZnkpIHtcbiAgICBtZXJnZShvcHRpb25zLCBvcHRzKTtcbiAgICBiYXNlICYmIG1lcmdlKE9iamVjdC5nZXRQcm90b3R5cGVPZihvcHRpb25zKSwgb3B0cyk7XG5cbiAgICBpZiAobm90aWZ5IHx8ICFzdGF0ZS5pcyhDUkVBVEVEKSkge1xuICAgICAgU3BsaWRlMi5lbWl0KEVWRU5UX1VQREFURUQsIG9wdGlvbnMpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc2V0dXA6IHNldHVwLFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3ksXG4gICAgcmVkdWNlOiByZWR1Y2UsXG4gICAgc2V0OiBzZXRcbiAgfTtcbn1cblxudmFyIEFSUk9XID0gXCJBcnJvd1wiO1xudmFyIEFSUk9XX0xFRlQgPSBBUlJPVyArIFwiTGVmdFwiO1xudmFyIEFSUk9XX1JJR0hUID0gQVJST1cgKyBcIlJpZ2h0XCI7XG52YXIgQVJST1dfVVAgPSBBUlJPVyArIFwiVXBcIjtcbnZhciBBUlJPV19ET1dOID0gQVJST1cgKyBcIkRvd25cIjtcbnZhciBMVFIgPSBcImx0clwiO1xudmFyIFJUTCA9IFwicnRsXCI7XG52YXIgVFRCID0gXCJ0dGJcIjtcbnZhciBPUklFTlRBVElPTl9NQVAgPSB7XG4gIHdpZHRoOiBbXCJoZWlnaHRcIl0sXG4gIGxlZnQ6IFtcInRvcFwiLCBcInJpZ2h0XCJdLFxuICByaWdodDogW1wiYm90dG9tXCIsIFwibGVmdFwiXSxcbiAgeDogW1wieVwiXSxcbiAgWDogW1wiWVwiXSxcbiAgWTogW1wiWFwiXSxcbiAgQXJyb3dMZWZ0OiBbQVJST1dfVVAsIEFSUk9XX1JJR0hUXSxcbiAgQXJyb3dSaWdodDogW0FSUk9XX0RPV04sIEFSUk9XX0xFRlRdXG59O1xuXG5mdW5jdGlvbiBEaXJlY3Rpb24oU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgZnVuY3Rpb24gcmVzb2x2ZShwcm9wLCBheGlzT25seSwgZGlyZWN0aW9uKSB7XG4gICAgZGlyZWN0aW9uID0gZGlyZWN0aW9uIHx8IG9wdGlvbnMuZGlyZWN0aW9uO1xuICAgIHZhciBpbmRleCA9IGRpcmVjdGlvbiA9PT0gUlRMICYmICFheGlzT25seSA/IDEgOiBkaXJlY3Rpb24gPT09IFRUQiA/IDAgOiAtMTtcbiAgICByZXR1cm4gT1JJRU5UQVRJT05fTUFQW3Byb3BdICYmIE9SSUVOVEFUSU9OX01BUFtwcm9wXVtpbmRleF0gfHwgcHJvcC5yZXBsYWNlKC93aWR0aHxsZWZ0fHJpZ2h0L2ksIGZ1bmN0aW9uIChtYXRjaCwgb2Zmc2V0KSB7XG4gICAgICB2YXIgcmVwbGFjZW1lbnQgPSBPUklFTlRBVElPTl9NQVBbbWF0Y2gudG9Mb3dlckNhc2UoKV1baW5kZXhdIHx8IG1hdGNoO1xuICAgICAgcmV0dXJuIG9mZnNldCA+IDAgPyByZXBsYWNlbWVudC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHJlcGxhY2VtZW50LnNsaWNlKDEpIDogcmVwbGFjZW1lbnQ7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBvcmllbnQodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgKiAob3B0aW9ucy5kaXJlY3Rpb24gPT09IFJUTCA/IDEgOiAtMSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHJlc29sdmU6IHJlc29sdmUsXG4gICAgb3JpZW50OiBvcmllbnRcbiAgfTtcbn1cblxudmFyIFJPTEUgPSBcInJvbGVcIjtcbnZhciBUQUJfSU5ERVggPSBcInRhYmluZGV4XCI7XG52YXIgRElTQUJMRUQgPSBcImRpc2FibGVkXCI7XG52YXIgQVJJQV9QUkVGSVggPSBcImFyaWEtXCI7XG52YXIgQVJJQV9DT05UUk9MUyA9IEFSSUFfUFJFRklYICsgXCJjb250cm9sc1wiO1xudmFyIEFSSUFfQ1VSUkVOVCA9IEFSSUFfUFJFRklYICsgXCJjdXJyZW50XCI7XG52YXIgQVJJQV9TRUxFQ1RFRCA9IEFSSUFfUFJFRklYICsgXCJzZWxlY3RlZFwiO1xudmFyIEFSSUFfTEFCRUwgPSBBUklBX1BSRUZJWCArIFwibGFiZWxcIjtcbnZhciBBUklBX0xBQkVMTEVEQlkgPSBBUklBX1BSRUZJWCArIFwibGFiZWxsZWRieVwiO1xudmFyIEFSSUFfSElEREVOID0gQVJJQV9QUkVGSVggKyBcImhpZGRlblwiO1xudmFyIEFSSUFfT1JJRU5UQVRJT04gPSBBUklBX1BSRUZJWCArIFwib3JpZW50YXRpb25cIjtcbnZhciBBUklBX1JPTEVERVNDUklQVElPTiA9IEFSSUFfUFJFRklYICsgXCJyb2xlZGVzY3JpcHRpb25cIjtcbnZhciBBUklBX0xJVkUgPSBBUklBX1BSRUZJWCArIFwibGl2ZVwiO1xudmFyIEFSSUFfQlVTWSA9IEFSSUFfUFJFRklYICsgXCJidXN5XCI7XG52YXIgQVJJQV9BVE9NSUMgPSBBUklBX1BSRUZJWCArIFwiYXRvbWljXCI7XG52YXIgQUxMX0FUVFJJQlVURVMgPSBbUk9MRSwgVEFCX0lOREVYLCBESVNBQkxFRCwgQVJJQV9DT05UUk9MUywgQVJJQV9DVVJSRU5ULCBBUklBX0xBQkVMLCBBUklBX0xBQkVMTEVEQlksIEFSSUFfSElEREVOLCBBUklBX09SSUVOVEFUSU9OLCBBUklBX1JPTEVERVNDUklQVElPTl07XG52YXIgQ0xBU1NfUFJFRklYID0gUFJPSkVDVF9DT0RFICsgXCJfX1wiO1xudmFyIFNUQVRVU19DTEFTU19QUkVGSVggPSBcImlzLVwiO1xudmFyIENMQVNTX1JPT1QgPSBQUk9KRUNUX0NPREU7XG52YXIgQ0xBU1NfVFJBQ0sgPSBDTEFTU19QUkVGSVggKyBcInRyYWNrXCI7XG52YXIgQ0xBU1NfTElTVCA9IENMQVNTX1BSRUZJWCArIFwibGlzdFwiO1xudmFyIENMQVNTX1NMSURFID0gQ0xBU1NfUFJFRklYICsgXCJzbGlkZVwiO1xudmFyIENMQVNTX0NMT05FID0gQ0xBU1NfU0xJREUgKyBcIi0tY2xvbmVcIjtcbnZhciBDTEFTU19DT05UQUlORVIgPSBDTEFTU19TTElERSArIFwiX19jb250YWluZXJcIjtcbnZhciBDTEFTU19BUlJPV1MgPSBDTEFTU19QUkVGSVggKyBcImFycm93c1wiO1xudmFyIENMQVNTX0FSUk9XID0gQ0xBU1NfUFJFRklYICsgXCJhcnJvd1wiO1xudmFyIENMQVNTX0FSUk9XX1BSRVYgPSBDTEFTU19BUlJPVyArIFwiLS1wcmV2XCI7XG52YXIgQ0xBU1NfQVJST1dfTkVYVCA9IENMQVNTX0FSUk9XICsgXCItLW5leHRcIjtcbnZhciBDTEFTU19QQUdJTkFUSU9OID0gQ0xBU1NfUFJFRklYICsgXCJwYWdpbmF0aW9uXCI7XG52YXIgQ0xBU1NfUEFHSU5BVElPTl9QQUdFID0gQ0xBU1NfUEFHSU5BVElPTiArIFwiX19wYWdlXCI7XG52YXIgQ0xBU1NfUFJPR1JFU1MgPSBDTEFTU19QUkVGSVggKyBcInByb2dyZXNzXCI7XG52YXIgQ0xBU1NfUFJPR1JFU1NfQkFSID0gQ0xBU1NfUFJPR1JFU1MgKyBcIl9fYmFyXCI7XG52YXIgQ0xBU1NfVE9HR0xFID0gQ0xBU1NfUFJFRklYICsgXCJ0b2dnbGVcIjtcbnZhciBDTEFTU19UT0dHTEVfUExBWSA9IENMQVNTX1RPR0dMRSArIFwiX19wbGF5XCI7XG52YXIgQ0xBU1NfVE9HR0xFX1BBVVNFID0gQ0xBU1NfVE9HR0xFICsgXCJfX3BhdXNlXCI7XG52YXIgQ0xBU1NfU1BJTk5FUiA9IENMQVNTX1BSRUZJWCArIFwic3Bpbm5lclwiO1xudmFyIENMQVNTX1NSID0gQ0xBU1NfUFJFRklYICsgXCJzclwiO1xudmFyIENMQVNTX0lOSVRJQUxJWkVEID0gU1RBVFVTX0NMQVNTX1BSRUZJWCArIFwiaW5pdGlhbGl6ZWRcIjtcbnZhciBDTEFTU19BQ1RJVkUgPSBTVEFUVVNfQ0xBU1NfUFJFRklYICsgXCJhY3RpdmVcIjtcbnZhciBDTEFTU19QUkVWID0gU1RBVFVTX0NMQVNTX1BSRUZJWCArIFwicHJldlwiO1xudmFyIENMQVNTX05FWFQgPSBTVEFUVVNfQ0xBU1NfUFJFRklYICsgXCJuZXh0XCI7XG52YXIgQ0xBU1NfVklTSUJMRSA9IFNUQVRVU19DTEFTU19QUkVGSVggKyBcInZpc2libGVcIjtcbnZhciBDTEFTU19MT0FESU5HID0gU1RBVFVTX0NMQVNTX1BSRUZJWCArIFwibG9hZGluZ1wiO1xudmFyIENMQVNTX0ZPQ1VTX0lOID0gU1RBVFVTX0NMQVNTX1BSRUZJWCArIFwiZm9jdXMtaW5cIjtcbnZhciBDTEFTU19PVkVSRkxPVyA9IFNUQVRVU19DTEFTU19QUkVGSVggKyBcIm92ZXJmbG93XCI7XG52YXIgU1RBVFVTX0NMQVNTRVMgPSBbQ0xBU1NfQUNUSVZFLCBDTEFTU19WSVNJQkxFLCBDTEFTU19QUkVWLCBDTEFTU19ORVhULCBDTEFTU19MT0FESU5HLCBDTEFTU19GT0NVU19JTiwgQ0xBU1NfT1ZFUkZMT1ddO1xudmFyIENMQVNTRVMgPSB7XG4gIHNsaWRlOiBDTEFTU19TTElERSxcbiAgY2xvbmU6IENMQVNTX0NMT05FLFxuICBhcnJvd3M6IENMQVNTX0FSUk9XUyxcbiAgYXJyb3c6IENMQVNTX0FSUk9XLFxuICBwcmV2OiBDTEFTU19BUlJPV19QUkVWLFxuICBuZXh0OiBDTEFTU19BUlJPV19ORVhULFxuICBwYWdpbmF0aW9uOiBDTEFTU19QQUdJTkFUSU9OLFxuICBwYWdlOiBDTEFTU19QQUdJTkFUSU9OX1BBR0UsXG4gIHNwaW5uZXI6IENMQVNTX1NQSU5ORVJcbn07XG5cbmZ1bmN0aW9uIGNsb3Nlc3QoZnJvbSwgc2VsZWN0b3IpIHtcbiAgaWYgKGlzRnVuY3Rpb24oZnJvbS5jbG9zZXN0KSkge1xuICAgIHJldHVybiBmcm9tLmNsb3Nlc3Qoc2VsZWN0b3IpO1xuICB9XG5cbiAgdmFyIGVsbSA9IGZyb207XG5cbiAgd2hpbGUgKGVsbSAmJiBlbG0ubm9kZVR5cGUgPT09IDEpIHtcbiAgICBpZiAobWF0Y2hlcyhlbG0sIHNlbGVjdG9yKSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgZWxtID0gZWxtLnBhcmVudEVsZW1lbnQ7XG4gIH1cblxuICByZXR1cm4gZWxtO1xufVxuXG52YXIgRlJJQ1RJT04gPSA1O1xudmFyIExPR19JTlRFUlZBTCA9IDIwMDtcbnZhciBQT0lOVEVSX0RPV05fRVZFTlRTID0gXCJ0b3VjaHN0YXJ0IG1vdXNlZG93blwiO1xudmFyIFBPSU5URVJfTU9WRV9FVkVOVFMgPSBcInRvdWNobW92ZSBtb3VzZW1vdmVcIjtcbnZhciBQT0lOVEVSX1VQX0VWRU5UUyA9IFwidG91Y2hlbmQgdG91Y2hjYW5jZWwgbW91c2V1cCBjbGlja1wiO1xuXG5mdW5jdGlvbiBFbGVtZW50cyhTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgX0V2ZW50SW50ZXJmYWNlID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMiksXG4gICAgICBvbiA9IF9FdmVudEludGVyZmFjZS5vbixcbiAgICAgIGJpbmQgPSBfRXZlbnRJbnRlcmZhY2UuYmluZDtcblxuICB2YXIgcm9vdCA9IFNwbGlkZTIucm9vdDtcbiAgdmFyIGkxOG4gPSBvcHRpb25zLmkxOG47XG4gIHZhciBlbGVtZW50cyA9IHt9O1xuICB2YXIgc2xpZGVzID0gW107XG4gIHZhciByb290Q2xhc3NlcyA9IFtdO1xuICB2YXIgdHJhY2tDbGFzc2VzID0gW107XG4gIHZhciB0cmFjaztcbiAgdmFyIGxpc3Q7XG4gIHZhciBpc1VzaW5nS2V5O1xuXG4gIGZ1bmN0aW9uIHNldHVwKCkge1xuICAgIGNvbGxlY3QoKTtcbiAgICBpbml0KCk7XG4gICAgdXBkYXRlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBvbihFVkVOVF9SRUZSRVNILCBkZXN0cm95KTtcbiAgICBvbihFVkVOVF9SRUZSRVNILCBzZXR1cCk7XG4gICAgb24oRVZFTlRfVVBEQVRFRCwgdXBkYXRlKTtcbiAgICBiaW5kKGRvY3VtZW50LCBQT0lOVEVSX0RPV05fRVZFTlRTICsgXCIga2V5ZG93blwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaXNVc2luZ0tleSA9IGUudHlwZSA9PT0gXCJrZXlkb3duXCI7XG4gICAgfSwge1xuICAgICAgY2FwdHVyZTogdHJ1ZVxuICAgIH0pO1xuICAgIGJpbmQocm9vdCwgXCJmb2N1c2luXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRvZ2dsZUNsYXNzKHJvb3QsIENMQVNTX0ZPQ1VTX0lOLCAhIWlzVXNpbmdLZXkpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveShjb21wbGV0ZWx5KSB7XG4gICAgdmFyIGF0dHJzID0gQUxMX0FUVFJJQlVURVMuY29uY2F0KFwic3R5bGVcIik7XG4gICAgZW1wdHkoc2xpZGVzKTtcbiAgICByZW1vdmVDbGFzcyhyb290LCByb290Q2xhc3Nlcyk7XG4gICAgcmVtb3ZlQ2xhc3ModHJhY2ssIHRyYWNrQ2xhc3Nlcyk7XG4gICAgcmVtb3ZlQXR0cmlidXRlKFt0cmFjaywgbGlzdF0sIGF0dHJzKTtcbiAgICByZW1vdmVBdHRyaWJ1dGUocm9vdCwgY29tcGxldGVseSA/IGF0dHJzIDogW1wic3R5bGVcIiwgQVJJQV9ST0xFREVTQ1JJUFRJT05dKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICByZW1vdmVDbGFzcyhyb290LCByb290Q2xhc3Nlcyk7XG4gICAgcmVtb3ZlQ2xhc3ModHJhY2ssIHRyYWNrQ2xhc3Nlcyk7XG4gICAgcm9vdENsYXNzZXMgPSBnZXRDbGFzc2VzKENMQVNTX1JPT1QpO1xuICAgIHRyYWNrQ2xhc3NlcyA9IGdldENsYXNzZXMoQ0xBU1NfVFJBQ0spO1xuICAgIGFkZENsYXNzKHJvb3QsIHJvb3RDbGFzc2VzKTtcbiAgICBhZGRDbGFzcyh0cmFjaywgdHJhY2tDbGFzc2VzKTtcbiAgICBzZXRBdHRyaWJ1dGUocm9vdCwgQVJJQV9MQUJFTCwgb3B0aW9ucy5sYWJlbCk7XG4gICAgc2V0QXR0cmlidXRlKHJvb3QsIEFSSUFfTEFCRUxMRURCWSwgb3B0aW9ucy5sYWJlbGxlZGJ5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbGxlY3QoKSB7XG4gICAgdHJhY2sgPSBmaW5kKFwiLlwiICsgQ0xBU1NfVFJBQ0spO1xuICAgIGxpc3QgPSBjaGlsZCh0cmFjaywgXCIuXCIgKyBDTEFTU19MSVNUKTtcbiAgICBhc3NlcnQodHJhY2sgJiYgbGlzdCwgXCJBIHRyYWNrL2xpc3QgZWxlbWVudCBpcyBtaXNzaW5nLlwiKTtcbiAgICBwdXNoKHNsaWRlcywgY2hpbGRyZW4obGlzdCwgXCIuXCIgKyBDTEFTU19TTElERSArIFwiOm5vdCguXCIgKyBDTEFTU19DTE9ORSArIFwiKVwiKSk7XG4gICAgZm9yT3duKHtcbiAgICAgIGFycm93czogQ0xBU1NfQVJST1dTLFxuICAgICAgcGFnaW5hdGlvbjogQ0xBU1NfUEFHSU5BVElPTixcbiAgICAgIHByZXY6IENMQVNTX0FSUk9XX1BSRVYsXG4gICAgICBuZXh0OiBDTEFTU19BUlJPV19ORVhULFxuICAgICAgYmFyOiBDTEFTU19QUk9HUkVTU19CQVIsXG4gICAgICB0b2dnbGU6IENMQVNTX1RPR0dMRVxuICAgIH0sIGZ1bmN0aW9uIChjbGFzc05hbWUsIGtleSkge1xuICAgICAgZWxlbWVudHNba2V5XSA9IGZpbmQoXCIuXCIgKyBjbGFzc05hbWUpO1xuICAgIH0pO1xuICAgIGFzc2lnbihlbGVtZW50cywge1xuICAgICAgcm9vdDogcm9vdCxcbiAgICAgIHRyYWNrOiB0cmFjayxcbiAgICAgIGxpc3Q6IGxpc3QsXG4gICAgICBzbGlkZXM6IHNsaWRlc1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIgaWQgPSByb290LmlkIHx8IHVuaXF1ZUlkKFBST0pFQ1RfQ09ERSk7XG4gICAgdmFyIHJvbGUgPSBvcHRpb25zLnJvbGU7XG4gICAgcm9vdC5pZCA9IGlkO1xuICAgIHRyYWNrLmlkID0gdHJhY2suaWQgfHwgaWQgKyBcIi10cmFja1wiO1xuICAgIGxpc3QuaWQgPSBsaXN0LmlkIHx8IGlkICsgXCItbGlzdFwiO1xuXG4gICAgaWYgKCFnZXRBdHRyaWJ1dGUocm9vdCwgUk9MRSkgJiYgcm9vdC50YWdOYW1lICE9PSBcIlNFQ1RJT05cIiAmJiByb2xlKSB7XG4gICAgICBzZXRBdHRyaWJ1dGUocm9vdCwgUk9MRSwgcm9sZSk7XG4gICAgfVxuXG4gICAgc2V0QXR0cmlidXRlKHJvb3QsIEFSSUFfUk9MRURFU0NSSVBUSU9OLCBpMThuLmNhcm91c2VsKTtcbiAgICBzZXRBdHRyaWJ1dGUobGlzdCwgUk9MRSwgXCJwcmVzZW50YXRpb25cIik7XG4gIH1cblxuICBmdW5jdGlvbiBmaW5kKHNlbGVjdG9yKSB7XG4gICAgdmFyIGVsbSA9IHF1ZXJ5KHJvb3QsIHNlbGVjdG9yKTtcbiAgICByZXR1cm4gZWxtICYmIGNsb3Nlc3QoZWxtLCBcIi5cIiArIENMQVNTX1JPT1QpID09PSByb290ID8gZWxtIDogdm9pZCAwO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q2xhc3NlcyhiYXNlKSB7XG4gICAgcmV0dXJuIFtiYXNlICsgXCItLVwiICsgb3B0aW9ucy50eXBlLCBiYXNlICsgXCItLVwiICsgb3B0aW9ucy5kaXJlY3Rpb24sIG9wdGlvbnMuZHJhZyAmJiBiYXNlICsgXCItLWRyYWdnYWJsZVwiLCBvcHRpb25zLmlzTmF2aWdhdGlvbiAmJiBiYXNlICsgXCItLW5hdlwiLCBiYXNlID09PSBDTEFTU19ST09UICYmIENMQVNTX0FDVElWRV07XG4gIH1cblxuICByZXR1cm4gYXNzaWduKGVsZW1lbnRzLCB7XG4gICAgc2V0dXA6IHNldHVwLFxuICAgIG1vdW50OiBtb3VudCxcbiAgICBkZXN0cm95OiBkZXN0cm95XG4gIH0pO1xufVxuXG52YXIgU0xJREUgPSBcInNsaWRlXCI7XG52YXIgTE9PUCA9IFwibG9vcFwiO1xudmFyIEZBREUgPSBcImZhZGVcIjtcblxuZnVuY3Rpb24gU2xpZGUkMShTcGxpZGUyLCBpbmRleCwgc2xpZGVJbmRleCwgc2xpZGUpIHtcbiAgdmFyIGV2ZW50ID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMik7XG4gIHZhciBvbiA9IGV2ZW50Lm9uLFxuICAgICAgZW1pdCA9IGV2ZW50LmVtaXQsXG4gICAgICBiaW5kID0gZXZlbnQuYmluZDtcbiAgdmFyIENvbXBvbmVudHMgPSBTcGxpZGUyLkNvbXBvbmVudHMsXG4gICAgICByb290ID0gU3BsaWRlMi5yb290LFxuICAgICAgb3B0aW9ucyA9IFNwbGlkZTIub3B0aW9ucztcbiAgdmFyIGlzTmF2aWdhdGlvbiA9IG9wdGlvbnMuaXNOYXZpZ2F0aW9uLFxuICAgICAgdXBkYXRlT25Nb3ZlID0gb3B0aW9ucy51cGRhdGVPbk1vdmUsXG4gICAgICBpMThuID0gb3B0aW9ucy5pMThuLFxuICAgICAgcGFnaW5hdGlvbiA9IG9wdGlvbnMucGFnaW5hdGlvbixcbiAgICAgIHNsaWRlRm9jdXMgPSBvcHRpb25zLnNsaWRlRm9jdXM7XG4gIHZhciByZXNvbHZlID0gQ29tcG9uZW50cy5EaXJlY3Rpb24ucmVzb2x2ZTtcbiAgdmFyIHN0eWxlcyA9IGdldEF0dHJpYnV0ZShzbGlkZSwgXCJzdHlsZVwiKTtcbiAgdmFyIGxhYmVsID0gZ2V0QXR0cmlidXRlKHNsaWRlLCBBUklBX0xBQkVMKTtcbiAgdmFyIGlzQ2xvbmUgPSBzbGlkZUluZGV4ID4gLTE7XG4gIHZhciBjb250YWluZXIgPSBjaGlsZChzbGlkZSwgXCIuXCIgKyBDTEFTU19DT05UQUlORVIpO1xuICB2YXIgZGVzdHJveWVkO1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIGlmICghaXNDbG9uZSkge1xuICAgICAgc2xpZGUuaWQgPSByb290LmlkICsgXCItc2xpZGVcIiArIHBhZChpbmRleCArIDEpO1xuICAgICAgc2V0QXR0cmlidXRlKHNsaWRlLCBST0xFLCBwYWdpbmF0aW9uID8gXCJ0YWJwYW5lbFwiIDogXCJncm91cFwiKTtcbiAgICAgIHNldEF0dHJpYnV0ZShzbGlkZSwgQVJJQV9ST0xFREVTQ1JJUFRJT04sIGkxOG4uc2xpZGUpO1xuICAgICAgc2V0QXR0cmlidXRlKHNsaWRlLCBBUklBX0xBQkVMLCBsYWJlbCB8fCBmb3JtYXQoaTE4bi5zbGlkZUxhYmVsLCBbaW5kZXggKyAxLCBTcGxpZGUyLmxlbmd0aF0pKTtcbiAgICB9XG5cbiAgICBsaXN0ZW4oKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxpc3RlbigpIHtcbiAgICBiaW5kKHNsaWRlLCBcImNsaWNrXCIsIGFwcGx5KGVtaXQsIEVWRU5UX0NMSUNLLCBzZWxmKSk7XG4gICAgYmluZChzbGlkZSwgXCJrZXlkb3duXCIsIGFwcGx5KGVtaXQsIEVWRU5UX1NMSURFX0tFWURPV04sIHNlbGYpKTtcbiAgICBvbihbRVZFTlRfTU9WRUQsIEVWRU5UX1NISUZURUQsIEVWRU5UX1NDUk9MTEVEXSwgdXBkYXRlKTtcbiAgICBvbihFVkVOVF9OQVZJR0FUSU9OX01PVU5URUQsIGluaXROYXZpZ2F0aW9uKTtcblxuICAgIGlmICh1cGRhdGVPbk1vdmUpIHtcbiAgICAgIG9uKEVWRU5UX01PVkUsIG9uTW92ZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICBkZXN0cm95ZWQgPSB0cnVlO1xuICAgIGV2ZW50LmRlc3Ryb3koKTtcbiAgICByZW1vdmVDbGFzcyhzbGlkZSwgU1RBVFVTX0NMQVNTRVMpO1xuICAgIHJlbW92ZUF0dHJpYnV0ZShzbGlkZSwgQUxMX0FUVFJJQlVURVMpO1xuICAgIHNldEF0dHJpYnV0ZShzbGlkZSwgXCJzdHlsZVwiLCBzdHlsZXMpO1xuICAgIHNldEF0dHJpYnV0ZShzbGlkZSwgQVJJQV9MQUJFTCwgbGFiZWwgfHwgXCJcIik7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0TmF2aWdhdGlvbigpIHtcbiAgICB2YXIgY29udHJvbHMgPSBTcGxpZGUyLnNwbGlkZXMubWFwKGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgIHZhciBTbGlkZTIgPSB0YXJnZXQuc3BsaWRlLkNvbXBvbmVudHMuU2xpZGVzLmdldEF0KGluZGV4KTtcbiAgICAgIHJldHVybiBTbGlkZTIgPyBTbGlkZTIuc2xpZGUuaWQgOiBcIlwiO1xuICAgIH0pLmpvaW4oXCIgXCIpO1xuICAgIHNldEF0dHJpYnV0ZShzbGlkZSwgQVJJQV9MQUJFTCwgZm9ybWF0KGkxOG4uc2xpZGVYLCAoaXNDbG9uZSA/IHNsaWRlSW5kZXggOiBpbmRleCkgKyAxKSk7XG4gICAgc2V0QXR0cmlidXRlKHNsaWRlLCBBUklBX0NPTlRST0xTLCBjb250cm9scyk7XG4gICAgc2V0QXR0cmlidXRlKHNsaWRlLCBST0xFLCBzbGlkZUZvY3VzID8gXCJidXR0b25cIiA6IFwiXCIpO1xuICAgIHNsaWRlRm9jdXMgJiYgcmVtb3ZlQXR0cmlidXRlKHNsaWRlLCBBUklBX1JPTEVERVNDUklQVElPTik7XG4gIH1cblxuICBmdW5jdGlvbiBvbk1vdmUoKSB7XG4gICAgaWYgKCFkZXN0cm95ZWQpIHtcbiAgICAgIHVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICBpZiAoIWRlc3Ryb3llZCkge1xuICAgICAgdmFyIGN1cnIgPSBTcGxpZGUyLmluZGV4O1xuICAgICAgdXBkYXRlQWN0aXZpdHkoKTtcbiAgICAgIHVwZGF0ZVZpc2liaWxpdHkoKTtcbiAgICAgIHRvZ2dsZUNsYXNzKHNsaWRlLCBDTEFTU19QUkVWLCBpbmRleCA9PT0gY3VyciAtIDEpO1xuICAgICAgdG9nZ2xlQ2xhc3Moc2xpZGUsIENMQVNTX05FWFQsIGluZGV4ID09PSBjdXJyICsgMSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlQWN0aXZpdHkoKSB7XG4gICAgdmFyIGFjdGl2ZSA9IGlzQWN0aXZlKCk7XG5cbiAgICBpZiAoYWN0aXZlICE9PSBoYXNDbGFzcyhzbGlkZSwgQ0xBU1NfQUNUSVZFKSkge1xuICAgICAgdG9nZ2xlQ2xhc3Moc2xpZGUsIENMQVNTX0FDVElWRSwgYWN0aXZlKTtcbiAgICAgIHNldEF0dHJpYnV0ZShzbGlkZSwgQVJJQV9DVVJSRU5ULCBpc05hdmlnYXRpb24gJiYgYWN0aXZlIHx8IFwiXCIpO1xuICAgICAgZW1pdChhY3RpdmUgPyBFVkVOVF9BQ1RJVkUgOiBFVkVOVF9JTkFDVElWRSwgc2VsZik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlVmlzaWJpbGl0eSgpIHtcbiAgICB2YXIgdmlzaWJsZSA9IGlzVmlzaWJsZSgpO1xuICAgIHZhciBoaWRkZW4gPSAhdmlzaWJsZSAmJiAoIWlzQWN0aXZlKCkgfHwgaXNDbG9uZSk7XG5cbiAgICBpZiAoIVNwbGlkZTIuc3RhdGUuaXMoW01PVklORywgU0NST0xMSU5HXSkpIHtcbiAgICAgIHNldEF0dHJpYnV0ZShzbGlkZSwgQVJJQV9ISURERU4sIGhpZGRlbiB8fCBcIlwiKTtcbiAgICB9XG5cbiAgICBzZXRBdHRyaWJ1dGUocXVlcnlBbGwoc2xpZGUsIG9wdGlvbnMuZm9jdXNhYmxlTm9kZXMgfHwgXCJcIiksIFRBQl9JTkRFWCwgaGlkZGVuID8gLTEgOiBcIlwiKTtcblxuICAgIGlmIChzbGlkZUZvY3VzKSB7XG4gICAgICBzZXRBdHRyaWJ1dGUoc2xpZGUsIFRBQl9JTkRFWCwgaGlkZGVuID8gLTEgOiAwKTtcbiAgICB9XG5cbiAgICBpZiAodmlzaWJsZSAhPT0gaGFzQ2xhc3Moc2xpZGUsIENMQVNTX1ZJU0lCTEUpKSB7XG4gICAgICB0b2dnbGVDbGFzcyhzbGlkZSwgQ0xBU1NfVklTSUJMRSwgdmlzaWJsZSk7XG4gICAgICBlbWl0KHZpc2libGUgPyBFVkVOVF9WSVNJQkxFIDogRVZFTlRfSElEREVOLCBzZWxmKTtcbiAgICB9XG5cbiAgICBpZiAoIXZpc2libGUgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gc2xpZGUpIHtcbiAgICAgIHZhciBTbGlkZTIgPSBDb21wb25lbnRzLlNsaWRlcy5nZXRBdChTcGxpZGUyLmluZGV4KTtcbiAgICAgIFNsaWRlMiAmJiBmb2N1cyhTbGlkZTIuc2xpZGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0eWxlJDEocHJvcCwgdmFsdWUsIHVzZUNvbnRhaW5lcikge1xuICAgIHN0eWxlKHVzZUNvbnRhaW5lciAmJiBjb250YWluZXIgfHwgc2xpZGUsIHByb3AsIHZhbHVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzQWN0aXZlKCkge1xuICAgIHZhciBjdXJyID0gU3BsaWRlMi5pbmRleDtcbiAgICByZXR1cm4gY3VyciA9PT0gaW5kZXggfHwgb3B0aW9ucy5jbG9uZVN0YXR1cyAmJiBjdXJyID09PSBzbGlkZUluZGV4O1xuICB9XG5cbiAgZnVuY3Rpb24gaXNWaXNpYmxlKCkge1xuICAgIGlmIChTcGxpZGUyLmlzKEZBREUpKSB7XG4gICAgICByZXR1cm4gaXNBY3RpdmUoKTtcbiAgICB9XG5cbiAgICB2YXIgdHJhY2tSZWN0ID0gcmVjdChDb21wb25lbnRzLkVsZW1lbnRzLnRyYWNrKTtcbiAgICB2YXIgc2xpZGVSZWN0ID0gcmVjdChzbGlkZSk7XG4gICAgdmFyIGxlZnQgPSByZXNvbHZlKFwibGVmdFwiLCB0cnVlKTtcbiAgICB2YXIgcmlnaHQgPSByZXNvbHZlKFwicmlnaHRcIiwgdHJ1ZSk7XG4gICAgcmV0dXJuIGZsb29yKHRyYWNrUmVjdFtsZWZ0XSkgPD0gY2VpbChzbGlkZVJlY3RbbGVmdF0pICYmIGZsb29yKHNsaWRlUmVjdFtyaWdodF0pIDw9IGNlaWwodHJhY2tSZWN0W3JpZ2h0XSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc1dpdGhpbihmcm9tLCBkaXN0YW5jZSkge1xuICAgIHZhciBkaWZmID0gYWJzKGZyb20gLSBpbmRleCk7XG5cbiAgICBpZiAoIWlzQ2xvbmUgJiYgKG9wdGlvbnMucmV3aW5kIHx8IFNwbGlkZTIuaXMoTE9PUCkpKSB7XG4gICAgICBkaWZmID0gbWluKGRpZmYsIFNwbGlkZTIubGVuZ3RoIC0gZGlmZik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRpZmYgPD0gZGlzdGFuY2U7XG4gIH1cblxuICB2YXIgc2VsZiA9IHtcbiAgICBpbmRleDogaW5kZXgsXG4gICAgc2xpZGVJbmRleDogc2xpZGVJbmRleCxcbiAgICBzbGlkZTogc2xpZGUsXG4gICAgY29udGFpbmVyOiBjb250YWluZXIsXG4gICAgaXNDbG9uZTogaXNDbG9uZSxcbiAgICBtb3VudDogbW91bnQsXG4gICAgZGVzdHJveTogZGVzdHJveSxcbiAgICB1cGRhdGU6IHVwZGF0ZSxcbiAgICBzdHlsZTogc3R5bGUkMSxcbiAgICBpc1dpdGhpbjogaXNXaXRoaW5cbiAgfTtcbiAgcmV0dXJuIHNlbGY7XG59XG5cbmZ1bmN0aW9uIFNsaWRlcyhTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgX0V2ZW50SW50ZXJmYWNlMiA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpLFxuICAgICAgb24gPSBfRXZlbnRJbnRlcmZhY2UyLm9uLFxuICAgICAgZW1pdCA9IF9FdmVudEludGVyZmFjZTIuZW1pdCxcbiAgICAgIGJpbmQgPSBfRXZlbnRJbnRlcmZhY2UyLmJpbmQ7XG5cbiAgdmFyIF9Db21wb25lbnRzMiRFbGVtZW50cyA9IENvbXBvbmVudHMyLkVsZW1lbnRzLFxuICAgICAgc2xpZGVzID0gX0NvbXBvbmVudHMyJEVsZW1lbnRzLnNsaWRlcyxcbiAgICAgIGxpc3QgPSBfQ29tcG9uZW50czIkRWxlbWVudHMubGlzdDtcbiAgdmFyIFNsaWRlczIgPSBbXTtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBpbml0KCk7XG4gICAgb24oRVZFTlRfUkVGUkVTSCwgZGVzdHJveSk7XG4gICAgb24oRVZFTlRfUkVGUkVTSCwgaW5pdCk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChzbGlkZSwgaW5kZXgpIHtcbiAgICAgIHJlZ2lzdGVyKHNsaWRlLCBpbmRleCwgLTEpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICBmb3JFYWNoJDEoZnVuY3Rpb24gKFNsaWRlMikge1xuICAgICAgU2xpZGUyLmRlc3Ryb3koKTtcbiAgICB9KTtcbiAgICBlbXB0eShTbGlkZXMyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICBmb3JFYWNoJDEoZnVuY3Rpb24gKFNsaWRlMikge1xuICAgICAgU2xpZGUyLnVwZGF0ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXIoc2xpZGUsIGluZGV4LCBzbGlkZUluZGV4KSB7XG4gICAgdmFyIG9iamVjdCA9IFNsaWRlJDEoU3BsaWRlMiwgaW5kZXgsIHNsaWRlSW5kZXgsIHNsaWRlKTtcbiAgICBvYmplY3QubW91bnQoKTtcbiAgICBTbGlkZXMyLnB1c2gob2JqZWN0KTtcbiAgICBTbGlkZXMyLnNvcnQoZnVuY3Rpb24gKFNsaWRlMSwgU2xpZGUyKSB7XG4gICAgICByZXR1cm4gU2xpZGUxLmluZGV4IC0gU2xpZGUyLmluZGV4O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0KGV4Y2x1ZGVDbG9uZXMpIHtcbiAgICByZXR1cm4gZXhjbHVkZUNsb25lcyA/IGZpbHRlcihmdW5jdGlvbiAoU2xpZGUyKSB7XG4gICAgICByZXR1cm4gIVNsaWRlMi5pc0Nsb25lO1xuICAgIH0pIDogU2xpZGVzMjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEluKHBhZ2UpIHtcbiAgICB2YXIgQ29udHJvbGxlciA9IENvbXBvbmVudHMyLkNvbnRyb2xsZXI7XG4gICAgdmFyIGluZGV4ID0gQ29udHJvbGxlci50b0luZGV4KHBhZ2UpO1xuICAgIHZhciBtYXggPSBDb250cm9sbGVyLmhhc0ZvY3VzKCkgPyAxIDogb3B0aW9ucy5wZXJQYWdlO1xuICAgIHJldHVybiBmaWx0ZXIoZnVuY3Rpb24gKFNsaWRlMikge1xuICAgICAgcmV0dXJuIGJldHdlZW4oU2xpZGUyLmluZGV4LCBpbmRleCwgaW5kZXggKyBtYXggLSAxKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEF0KGluZGV4KSB7XG4gICAgcmV0dXJuIGZpbHRlcihpbmRleClbMF07XG4gIH1cblxuICBmdW5jdGlvbiBhZGQoaXRlbXMsIGluZGV4KSB7XG4gICAgZm9yRWFjaChpdGVtcywgZnVuY3Rpb24gKHNsaWRlKSB7XG4gICAgICBpZiAoaXNTdHJpbmcoc2xpZGUpKSB7XG4gICAgICAgIHNsaWRlID0gcGFyc2VIdG1sKHNsaWRlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzSFRNTEVsZW1lbnQoc2xpZGUpKSB7XG4gICAgICAgIHZhciByZWYgPSBzbGlkZXNbaW5kZXhdO1xuICAgICAgICByZWYgPyBiZWZvcmUoc2xpZGUsIHJlZikgOiBhcHBlbmQobGlzdCwgc2xpZGUpO1xuICAgICAgICBhZGRDbGFzcyhzbGlkZSwgb3B0aW9ucy5jbGFzc2VzLnNsaWRlKTtcbiAgICAgICAgb2JzZXJ2ZUltYWdlcyhzbGlkZSwgYXBwbHkoZW1pdCwgRVZFTlRfUkVTSVpFKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgZW1pdChFVkVOVF9SRUZSRVNIKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZSQxKG1hdGNoZXIpIHtcbiAgICByZW1vdmUoZmlsdGVyKG1hdGNoZXIpLm1hcChmdW5jdGlvbiAoU2xpZGUyKSB7XG4gICAgICByZXR1cm4gU2xpZGUyLnNsaWRlO1xuICAgIH0pKTtcbiAgICBlbWl0KEVWRU5UX1JFRlJFU0gpO1xuICB9XG5cbiAgZnVuY3Rpb24gZm9yRWFjaCQxKGl0ZXJhdGVlLCBleGNsdWRlQ2xvbmVzKSB7XG4gICAgZ2V0KGV4Y2x1ZGVDbG9uZXMpLmZvckVhY2goaXRlcmF0ZWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmlsdGVyKG1hdGNoZXIpIHtcbiAgICByZXR1cm4gU2xpZGVzMi5maWx0ZXIoaXNGdW5jdGlvbihtYXRjaGVyKSA/IG1hdGNoZXIgOiBmdW5jdGlvbiAoU2xpZGUyKSB7XG4gICAgICByZXR1cm4gaXNTdHJpbmcobWF0Y2hlcikgPyBtYXRjaGVzKFNsaWRlMi5zbGlkZSwgbWF0Y2hlcikgOiBpbmNsdWRlcyh0b0FycmF5KG1hdGNoZXIpLCBTbGlkZTIuaW5kZXgpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gc3R5bGUocHJvcCwgdmFsdWUsIHVzZUNvbnRhaW5lcikge1xuICAgIGZvckVhY2gkMShmdW5jdGlvbiAoU2xpZGUyKSB7XG4gICAgICBTbGlkZTIuc3R5bGUocHJvcCwgdmFsdWUsIHVzZUNvbnRhaW5lcik7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBvYnNlcnZlSW1hZ2VzKGVsbSwgY2FsbGJhY2spIHtcbiAgICB2YXIgaW1hZ2VzID0gcXVlcnlBbGwoZWxtLCBcImltZ1wiKTtcbiAgICB2YXIgbGVuZ3RoID0gaW1hZ2VzLmxlbmd0aDtcblxuICAgIGlmIChsZW5ndGgpIHtcbiAgICAgIGltYWdlcy5mb3JFYWNoKGZ1bmN0aW9uIChpbWcpIHtcbiAgICAgICAgYmluZChpbWcsIFwibG9hZCBlcnJvclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKCEgLS1sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldExlbmd0aChleGNsdWRlQ2xvbmVzKSB7XG4gICAgcmV0dXJuIGV4Y2x1ZGVDbG9uZXMgPyBzbGlkZXMubGVuZ3RoIDogU2xpZGVzMi5sZW5ndGg7XG4gIH1cblxuICBmdW5jdGlvbiBpc0Vub3VnaCgpIHtcbiAgICByZXR1cm4gU2xpZGVzMi5sZW5ndGggPiBvcHRpb25zLnBlclBhZ2U7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1vdW50OiBtb3VudCxcbiAgICBkZXN0cm95OiBkZXN0cm95LFxuICAgIHVwZGF0ZTogdXBkYXRlLFxuICAgIHJlZ2lzdGVyOiByZWdpc3RlcixcbiAgICBnZXQ6IGdldCxcbiAgICBnZXRJbjogZ2V0SW4sXG4gICAgZ2V0QXQ6IGdldEF0LFxuICAgIGFkZDogYWRkLFxuICAgIHJlbW92ZTogcmVtb3ZlJDEsXG4gICAgZm9yRWFjaDogZm9yRWFjaCQxLFxuICAgIGZpbHRlcjogZmlsdGVyLFxuICAgIHN0eWxlOiBzdHlsZSxcbiAgICBnZXRMZW5ndGg6IGdldExlbmd0aCxcbiAgICBpc0Vub3VnaDogaXNFbm91Z2hcbiAgfTtcbn1cblxuZnVuY3Rpb24gTGF5b3V0KFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBfRXZlbnRJbnRlcmZhY2UzID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMiksXG4gICAgICBvbiA9IF9FdmVudEludGVyZmFjZTMub24sXG4gICAgICBiaW5kID0gX0V2ZW50SW50ZXJmYWNlMy5iaW5kLFxuICAgICAgZW1pdCA9IF9FdmVudEludGVyZmFjZTMuZW1pdDtcblxuICB2YXIgU2xpZGVzID0gQ29tcG9uZW50czIuU2xpZGVzO1xuICB2YXIgcmVzb2x2ZSA9IENvbXBvbmVudHMyLkRpcmVjdGlvbi5yZXNvbHZlO1xuICB2YXIgX0NvbXBvbmVudHMyJEVsZW1lbnRzMiA9IENvbXBvbmVudHMyLkVsZW1lbnRzLFxuICAgICAgcm9vdCA9IF9Db21wb25lbnRzMiRFbGVtZW50czIucm9vdCxcbiAgICAgIHRyYWNrID0gX0NvbXBvbmVudHMyJEVsZW1lbnRzMi50cmFjayxcbiAgICAgIGxpc3QgPSBfQ29tcG9uZW50czIkRWxlbWVudHMyLmxpc3Q7XG4gIHZhciBnZXRBdCA9IFNsaWRlcy5nZXRBdCxcbiAgICAgIHN0eWxlU2xpZGVzID0gU2xpZGVzLnN0eWxlO1xuICB2YXIgdmVydGljYWw7XG4gIHZhciByb290UmVjdDtcbiAgdmFyIG92ZXJmbG93O1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIGluaXQoKTtcbiAgICBiaW5kKHdpbmRvdywgXCJyZXNpemUgbG9hZFwiLCBUaHJvdHRsZShhcHBseShlbWl0LCBFVkVOVF9SRVNJWkUpKSk7XG4gICAgb24oW0VWRU5UX1VQREFURUQsIEVWRU5UX1JFRlJFU0hdLCBpbml0KTtcbiAgICBvbihFVkVOVF9SRVNJWkUsIHJlc2l6ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZlcnRpY2FsID0gb3B0aW9ucy5kaXJlY3Rpb24gPT09IFRUQjtcbiAgICBzdHlsZShyb290LCBcIm1heFdpZHRoXCIsIHVuaXQob3B0aW9ucy53aWR0aCkpO1xuICAgIHN0eWxlKHRyYWNrLCByZXNvbHZlKFwicGFkZGluZ0xlZnRcIiksIGNzc1BhZGRpbmcoZmFsc2UpKTtcbiAgICBzdHlsZSh0cmFjaywgcmVzb2x2ZShcInBhZGRpbmdSaWdodFwiKSwgY3NzUGFkZGluZyh0cnVlKSk7XG4gICAgcmVzaXplKHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzaXplKGZvcmNlKSB7XG4gICAgdmFyIG5ld1JlY3QgPSByZWN0KHJvb3QpO1xuXG4gICAgaWYgKGZvcmNlIHx8IHJvb3RSZWN0LndpZHRoICE9PSBuZXdSZWN0LndpZHRoIHx8IHJvb3RSZWN0LmhlaWdodCAhPT0gbmV3UmVjdC5oZWlnaHQpIHtcbiAgICAgIHN0eWxlKHRyYWNrLCBcImhlaWdodFwiLCBjc3NUcmFja0hlaWdodCgpKTtcbiAgICAgIHN0eWxlU2xpZGVzKHJlc29sdmUoXCJtYXJnaW5SaWdodFwiKSwgdW5pdChvcHRpb25zLmdhcCkpO1xuICAgICAgc3R5bGVTbGlkZXMoXCJ3aWR0aFwiLCBjc3NTbGlkZVdpZHRoKCkpO1xuICAgICAgc3R5bGVTbGlkZXMoXCJoZWlnaHRcIiwgY3NzU2xpZGVIZWlnaHQoKSwgdHJ1ZSk7XG4gICAgICByb290UmVjdCA9IG5ld1JlY3Q7XG4gICAgICBlbWl0KEVWRU5UX1JFU0laRUQpO1xuXG4gICAgICBpZiAob3ZlcmZsb3cgIT09IChvdmVyZmxvdyA9IGlzT3ZlcmZsb3coKSkpIHtcbiAgICAgICAgdG9nZ2xlQ2xhc3Mocm9vdCwgQ0xBU1NfT1ZFUkZMT1csIG92ZXJmbG93KTtcbiAgICAgICAgZW1pdChFVkVOVF9PVkVSRkxPVywgb3ZlcmZsb3cpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNzc1BhZGRpbmcocmlnaHQpIHtcbiAgICB2YXIgcGFkZGluZyA9IG9wdGlvbnMucGFkZGluZztcbiAgICB2YXIgcHJvcCA9IHJlc29sdmUocmlnaHQgPyBcInJpZ2h0XCIgOiBcImxlZnRcIik7XG4gICAgcmV0dXJuIHBhZGRpbmcgJiYgdW5pdChwYWRkaW5nW3Byb3BdIHx8IChpc09iamVjdChwYWRkaW5nKSA/IDAgOiBwYWRkaW5nKSkgfHwgXCIwcHhcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNzc1RyYWNrSGVpZ2h0KCkge1xuICAgIHZhciBoZWlnaHQgPSBcIlwiO1xuXG4gICAgaWYgKHZlcnRpY2FsKSB7XG4gICAgICBoZWlnaHQgPSBjc3NIZWlnaHQoKTtcbiAgICAgIGFzc2VydChoZWlnaHQsIFwiaGVpZ2h0IG9yIGhlaWdodFJhdGlvIGlzIG1pc3NpbmcuXCIpO1xuICAgICAgaGVpZ2h0ID0gXCJjYWxjKFwiICsgaGVpZ2h0ICsgXCIgLSBcIiArIGNzc1BhZGRpbmcoZmFsc2UpICsgXCIgLSBcIiArIGNzc1BhZGRpbmcodHJ1ZSkgKyBcIilcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gaGVpZ2h0O1xuICB9XG5cbiAgZnVuY3Rpb24gY3NzSGVpZ2h0KCkge1xuICAgIHJldHVybiB1bml0KG9wdGlvbnMuaGVpZ2h0IHx8IHJlY3QobGlzdCkud2lkdGggKiBvcHRpb25zLmhlaWdodFJhdGlvKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNzc1NsaWRlV2lkdGgoKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMuYXV0b1dpZHRoID8gbnVsbCA6IHVuaXQob3B0aW9ucy5maXhlZFdpZHRoKSB8fCAodmVydGljYWwgPyBcIlwiIDogY3NzU2xpZGVTaXplKCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3NzU2xpZGVIZWlnaHQoKSB7XG4gICAgcmV0dXJuIHVuaXQob3B0aW9ucy5maXhlZEhlaWdodCkgfHwgKHZlcnRpY2FsID8gb3B0aW9ucy5hdXRvSGVpZ2h0ID8gbnVsbCA6IGNzc1NsaWRlU2l6ZSgpIDogY3NzSGVpZ2h0KCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3NzU2xpZGVTaXplKCkge1xuICAgIHZhciBnYXAgPSB1bml0KG9wdGlvbnMuZ2FwKTtcbiAgICByZXR1cm4gXCJjYWxjKCgxMDAlXCIgKyAoZ2FwICYmIFwiICsgXCIgKyBnYXApICsgXCIpL1wiICsgKG9wdGlvbnMucGVyUGFnZSB8fCAxKSArIChnYXAgJiYgXCIgLSBcIiArIGdhcCkgKyBcIilcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxpc3RTaXplKCkge1xuICAgIHJldHVybiByZWN0KGxpc3QpW3Jlc29sdmUoXCJ3aWR0aFwiKV07XG4gIH1cblxuICBmdW5jdGlvbiBzbGlkZVNpemUoaW5kZXgsIHdpdGhvdXRHYXApIHtcbiAgICB2YXIgU2xpZGUgPSBnZXRBdChpbmRleCB8fCAwKTtcbiAgICByZXR1cm4gU2xpZGUgPyByZWN0KFNsaWRlLnNsaWRlKVtyZXNvbHZlKFwid2lkdGhcIildICsgKHdpdGhvdXRHYXAgPyAwIDogZ2V0R2FwKCkpIDogMDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvdGFsU2l6ZShpbmRleCwgd2l0aG91dEdhcCkge1xuICAgIHZhciBTbGlkZSA9IGdldEF0KGluZGV4KTtcblxuICAgIGlmIChTbGlkZSkge1xuICAgICAgdmFyIHJpZ2h0ID0gcmVjdChTbGlkZS5zbGlkZSlbcmVzb2x2ZShcInJpZ2h0XCIpXTtcbiAgICAgIHZhciBsZWZ0ID0gcmVjdChsaXN0KVtyZXNvbHZlKFwibGVmdFwiKV07XG4gICAgICByZXR1cm4gYWJzKHJpZ2h0IC0gbGVmdCkgKyAod2l0aG91dEdhcCA/IDAgOiBnZXRHYXAoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBmdW5jdGlvbiBzbGlkZXJTaXplKHdpdGhvdXRHYXApIHtcbiAgICByZXR1cm4gdG90YWxTaXplKFNwbGlkZTIubGVuZ3RoIC0gMSkgLSB0b3RhbFNpemUoMCkgKyBzbGlkZVNpemUoMCwgd2l0aG91dEdhcCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRHYXAoKSB7XG4gICAgdmFyIFNsaWRlID0gZ2V0QXQoMCk7XG4gICAgcmV0dXJuIFNsaWRlICYmIHBhcnNlRmxvYXQoc3R5bGUoU2xpZGUuc2xpZGUsIHJlc29sdmUoXCJtYXJnaW5SaWdodFwiKSkpIHx8IDA7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRQYWRkaW5nKHJpZ2h0KSB7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQoc3R5bGUodHJhY2ssIHJlc29sdmUoXCJwYWRkaW5nXCIgKyAocmlnaHQgPyBcIlJpZ2h0XCIgOiBcIkxlZnRcIikpKSkgfHwgMDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzT3ZlcmZsb3coKSB7XG4gICAgcmV0dXJuIFNwbGlkZTIuaXMoRkFERSkgfHwgc2xpZGVyU2l6ZSh0cnVlKSA+IGxpc3RTaXplKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1vdW50OiBtb3VudCxcbiAgICByZXNpemU6IHJlc2l6ZSxcbiAgICBsaXN0U2l6ZTogbGlzdFNpemUsXG4gICAgc2xpZGVTaXplOiBzbGlkZVNpemUsXG4gICAgc2xpZGVyU2l6ZTogc2xpZGVyU2l6ZSxcbiAgICB0b3RhbFNpemU6IHRvdGFsU2l6ZSxcbiAgICBnZXRQYWRkaW5nOiBnZXRQYWRkaW5nLFxuICAgIGlzT3ZlcmZsb3c6IGlzT3ZlcmZsb3dcbiAgfTtcbn1cblxudmFyIE1VTFRJUExJRVIgPSAyO1xuXG5mdW5jdGlvbiBDbG9uZXMoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIGV2ZW50ID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMik7XG4gIHZhciBvbiA9IGV2ZW50Lm9uO1xuICB2YXIgRWxlbWVudHMgPSBDb21wb25lbnRzMi5FbGVtZW50cyxcbiAgICAgIFNsaWRlcyA9IENvbXBvbmVudHMyLlNsaWRlcztcbiAgdmFyIHJlc29sdmUgPSBDb21wb25lbnRzMi5EaXJlY3Rpb24ucmVzb2x2ZTtcbiAgdmFyIGNsb25lcyA9IFtdO1xuICB2YXIgY2xvbmVDb3VudDtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBvbihFVkVOVF9SRUZSRVNILCByZW1vdW50KTtcbiAgICBvbihbRVZFTlRfVVBEQVRFRCwgRVZFTlRfUkVTSVpFXSwgb2JzZXJ2ZSk7XG5cbiAgICBpZiAoY2xvbmVDb3VudCA9IGNvbXB1dGVDbG9uZUNvdW50KCkpIHtcbiAgICAgIGdlbmVyYXRlKGNsb25lQ291bnQpO1xuICAgICAgQ29tcG9uZW50czIuTGF5b3V0LnJlc2l6ZSh0cnVlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdW50KCkge1xuICAgIGRlc3Ryb3koKTtcbiAgICBtb3VudCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICByZW1vdmUoY2xvbmVzKTtcbiAgICBlbXB0eShjbG9uZXMpO1xuICAgIGV2ZW50LmRlc3Ryb3koKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9ic2VydmUoKSB7XG4gICAgdmFyIGNvdW50ID0gY29tcHV0ZUNsb25lQ291bnQoKTtcblxuICAgIGlmIChjbG9uZUNvdW50ICE9PSBjb3VudCkge1xuICAgICAgaWYgKGNsb25lQ291bnQgPCBjb3VudCB8fCAhY291bnQpIHtcbiAgICAgICAgZXZlbnQuZW1pdChFVkVOVF9SRUZSRVNIKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZW5lcmF0ZShjb3VudCkge1xuICAgIHZhciBzbGlkZXMgPSBTbGlkZXMuZ2V0KCkuc2xpY2UoKTtcbiAgICB2YXIgbGVuZ3RoID0gc2xpZGVzLmxlbmd0aDtcblxuICAgIGlmIChsZW5ndGgpIHtcbiAgICAgIHdoaWxlIChzbGlkZXMubGVuZ3RoIDwgY291bnQpIHtcbiAgICAgICAgcHVzaChzbGlkZXMsIHNsaWRlcyk7XG4gICAgICB9XG5cbiAgICAgIHB1c2goc2xpZGVzLnNsaWNlKC1jb3VudCksIHNsaWRlcy5zbGljZSgwLCBjb3VudCkpLmZvckVhY2goZnVuY3Rpb24gKFNsaWRlLCBpbmRleCkge1xuICAgICAgICB2YXIgaXNIZWFkID0gaW5kZXggPCBjb3VudDtcbiAgICAgICAgdmFyIGNsb25lID0gY2xvbmVEZWVwKFNsaWRlLnNsaWRlLCBpbmRleCk7XG4gICAgICAgIGlzSGVhZCA/IGJlZm9yZShjbG9uZSwgc2xpZGVzWzBdLnNsaWRlKSA6IGFwcGVuZChFbGVtZW50cy5saXN0LCBjbG9uZSk7XG4gICAgICAgIHB1c2goY2xvbmVzLCBjbG9uZSk7XG4gICAgICAgIFNsaWRlcy5yZWdpc3RlcihjbG9uZSwgaW5kZXggLSBjb3VudCArIChpc0hlYWQgPyAwIDogbGVuZ3RoKSwgU2xpZGUuaW5kZXgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2xvbmVEZWVwKGVsbSwgaW5kZXgpIHtcbiAgICB2YXIgY2xvbmUgPSBlbG0uY2xvbmVOb2RlKHRydWUpO1xuICAgIGFkZENsYXNzKGNsb25lLCBvcHRpb25zLmNsYXNzZXMuY2xvbmUpO1xuICAgIGNsb25lLmlkID0gU3BsaWRlMi5yb290LmlkICsgXCItY2xvbmVcIiArIHBhZChpbmRleCArIDEpO1xuICAgIHJldHVybiBjbG9uZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbXB1dGVDbG9uZUNvdW50KCkge1xuICAgIHZhciBjbG9uZXMyID0gb3B0aW9ucy5jbG9uZXM7XG5cbiAgICBpZiAoIVNwbGlkZTIuaXMoTE9PUCkpIHtcbiAgICAgIGNsb25lczIgPSAwO1xuICAgIH0gZWxzZSBpZiAoaXNVbmRlZmluZWQoY2xvbmVzMikpIHtcbiAgICAgIHZhciBmaXhlZFNpemUgPSBvcHRpb25zW3Jlc29sdmUoXCJmaXhlZFdpZHRoXCIpXSAmJiBDb21wb25lbnRzMi5MYXlvdXQuc2xpZGVTaXplKDApO1xuICAgICAgdmFyIGZpeGVkQ291bnQgPSBmaXhlZFNpemUgJiYgY2VpbChyZWN0KEVsZW1lbnRzLnRyYWNrKVtyZXNvbHZlKFwid2lkdGhcIildIC8gZml4ZWRTaXplKTtcbiAgICAgIGNsb25lczIgPSBmaXhlZENvdW50IHx8IG9wdGlvbnNbcmVzb2x2ZShcImF1dG9XaWR0aFwiKV0gJiYgU3BsaWRlMi5sZW5ndGggfHwgb3B0aW9ucy5wZXJQYWdlICogTVVMVElQTElFUjtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xvbmVzMjtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3lcbiAgfTtcbn1cblxuZnVuY3Rpb24gTW92ZShTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgX0V2ZW50SW50ZXJmYWNlNCA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpLFxuICAgICAgb24gPSBfRXZlbnRJbnRlcmZhY2U0Lm9uLFxuICAgICAgZW1pdCA9IF9FdmVudEludGVyZmFjZTQuZW1pdDtcblxuICB2YXIgc2V0ID0gU3BsaWRlMi5zdGF0ZS5zZXQ7XG4gIHZhciBfQ29tcG9uZW50czIkTGF5b3V0ID0gQ29tcG9uZW50czIuTGF5b3V0LFxuICAgICAgc2xpZGVTaXplID0gX0NvbXBvbmVudHMyJExheW91dC5zbGlkZVNpemUsXG4gICAgICBnZXRQYWRkaW5nID0gX0NvbXBvbmVudHMyJExheW91dC5nZXRQYWRkaW5nLFxuICAgICAgdG90YWxTaXplID0gX0NvbXBvbmVudHMyJExheW91dC50b3RhbFNpemUsXG4gICAgICBsaXN0U2l6ZSA9IF9Db21wb25lbnRzMiRMYXlvdXQubGlzdFNpemUsXG4gICAgICBzbGlkZXJTaXplID0gX0NvbXBvbmVudHMyJExheW91dC5zbGlkZXJTaXplO1xuICB2YXIgX0NvbXBvbmVudHMyJERpcmVjdGlvID0gQ29tcG9uZW50czIuRGlyZWN0aW9uLFxuICAgICAgcmVzb2x2ZSA9IF9Db21wb25lbnRzMiREaXJlY3Rpby5yZXNvbHZlLFxuICAgICAgb3JpZW50ID0gX0NvbXBvbmVudHMyJERpcmVjdGlvLm9yaWVudDtcbiAgdmFyIF9Db21wb25lbnRzMiRFbGVtZW50czMgPSBDb21wb25lbnRzMi5FbGVtZW50cyxcbiAgICAgIGxpc3QgPSBfQ29tcG9uZW50czIkRWxlbWVudHMzLmxpc3QsXG4gICAgICB0cmFjayA9IF9Db21wb25lbnRzMiRFbGVtZW50czMudHJhY2s7XG4gIHZhciBUcmFuc2l0aW9uO1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIFRyYW5zaXRpb24gPSBDb21wb25lbnRzMi5UcmFuc2l0aW9uO1xuICAgIG9uKFtFVkVOVF9NT1VOVEVELCBFVkVOVF9SRVNJWkVELCBFVkVOVF9VUERBVEVELCBFVkVOVF9SRUZSRVNIXSwgcmVwb3NpdGlvbik7XG4gIH1cblxuICBmdW5jdGlvbiByZXBvc2l0aW9uKCkge1xuICAgIGlmICghQ29tcG9uZW50czIuQ29udHJvbGxlci5pc0J1c3koKSkge1xuICAgICAgQ29tcG9uZW50czIuU2Nyb2xsLmNhbmNlbCgpO1xuICAgICAganVtcChTcGxpZGUyLmluZGV4KTtcbiAgICAgIENvbXBvbmVudHMyLlNsaWRlcy51cGRhdGUoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBtb3ZlKGRlc3QsIGluZGV4LCBwcmV2LCBjYWxsYmFjaykge1xuICAgIGlmIChkZXN0ICE9PSBpbmRleCAmJiBjYW5TaGlmdChkZXN0ID4gcHJldikpIHtcbiAgICAgIGNhbmNlbCgpO1xuICAgICAgdHJhbnNsYXRlKHNoaWZ0KGdldFBvc2l0aW9uKCksIGRlc3QgPiBwcmV2KSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgc2V0KE1PVklORyk7XG4gICAgZW1pdChFVkVOVF9NT1ZFLCBpbmRleCwgcHJldiwgZGVzdCk7XG4gICAgVHJhbnNpdGlvbi5zdGFydChpbmRleCwgZnVuY3Rpb24gKCkge1xuICAgICAgc2V0KElETEUpO1xuICAgICAgZW1pdChFVkVOVF9NT1ZFRCwgaW5kZXgsIHByZXYsIGRlc3QpO1xuICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGp1bXAoaW5kZXgpIHtcbiAgICB0cmFuc2xhdGUodG9Qb3NpdGlvbihpbmRleCwgdHJ1ZSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhbnNsYXRlKHBvc2l0aW9uLCBwcmV2ZW50TG9vcCkge1xuICAgIGlmICghU3BsaWRlMi5pcyhGQURFKSkge1xuICAgICAgdmFyIGRlc3RpbmF0aW9uID0gcHJldmVudExvb3AgPyBwb3NpdGlvbiA6IGxvb3AocG9zaXRpb24pO1xuICAgICAgc3R5bGUobGlzdCwgXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGVcIiArIHJlc29sdmUoXCJYXCIpICsgXCIoXCIgKyBkZXN0aW5hdGlvbiArIFwicHgpXCIpO1xuICAgICAgcG9zaXRpb24gIT09IGRlc3RpbmF0aW9uICYmIGVtaXQoRVZFTlRfU0hJRlRFRCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9vcChwb3NpdGlvbikge1xuICAgIGlmIChTcGxpZGUyLmlzKExPT1ApKSB7XG4gICAgICB2YXIgaW5kZXggPSB0b0luZGV4KHBvc2l0aW9uKTtcbiAgICAgIHZhciBleGNlZWRlZE1heCA9IGluZGV4ID4gQ29tcG9uZW50czIuQ29udHJvbGxlci5nZXRFbmQoKTtcbiAgICAgIHZhciBleGNlZWRlZE1pbiA9IGluZGV4IDwgMDtcblxuICAgICAgaWYgKGV4Y2VlZGVkTWluIHx8IGV4Y2VlZGVkTWF4KSB7XG4gICAgICAgIHBvc2l0aW9uID0gc2hpZnQocG9zaXRpb24sIGV4Y2VlZGVkTWF4KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcG9zaXRpb247XG4gIH1cblxuICBmdW5jdGlvbiBzaGlmdChwb3NpdGlvbiwgYmFja3dhcmRzKSB7XG4gICAgdmFyIGV4Y2VzcyA9IHBvc2l0aW9uIC0gZ2V0TGltaXQoYmFja3dhcmRzKTtcbiAgICB2YXIgc2l6ZSA9IHNsaWRlclNpemUoKTtcbiAgICBwb3NpdGlvbiAtPSBvcmllbnQoc2l6ZSAqIChjZWlsKGFicyhleGNlc3MpIC8gc2l6ZSkgfHwgMSkpICogKGJhY2t3YXJkcyA/IDEgOiAtMSk7XG4gICAgcmV0dXJuIHBvc2l0aW9uO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgIHRyYW5zbGF0ZShnZXRQb3NpdGlvbigpLCB0cnVlKTtcbiAgICBUcmFuc2l0aW9uLmNhbmNlbCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gdG9JbmRleChwb3NpdGlvbikge1xuICAgIHZhciBTbGlkZXMgPSBDb21wb25lbnRzMi5TbGlkZXMuZ2V0KCk7XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB2YXIgbWluRGlzdGFuY2UgPSBJbmZpbml0eTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgU2xpZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc2xpZGVJbmRleCA9IFNsaWRlc1tpXS5pbmRleDtcbiAgICAgIHZhciBkaXN0YW5jZSA9IGFicyh0b1Bvc2l0aW9uKHNsaWRlSW5kZXgsIHRydWUpIC0gcG9zaXRpb24pO1xuXG4gICAgICBpZiAoZGlzdGFuY2UgPD0gbWluRGlzdGFuY2UpIHtcbiAgICAgICAgbWluRGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICAgICAgaW5kZXggPSBzbGlkZUluZGV4O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG5cbiAgZnVuY3Rpb24gdG9Qb3NpdGlvbihpbmRleCwgdHJpbW1pbmcpIHtcbiAgICB2YXIgcG9zaXRpb24gPSBvcmllbnQodG90YWxTaXplKGluZGV4IC0gMSkgLSBvZmZzZXQoaW5kZXgpKTtcbiAgICByZXR1cm4gdHJpbW1pbmcgPyB0cmltKHBvc2l0aW9uKSA6IHBvc2l0aW9uO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UG9zaXRpb24oKSB7XG4gICAgdmFyIGxlZnQgPSByZXNvbHZlKFwibGVmdFwiKTtcbiAgICByZXR1cm4gcmVjdChsaXN0KVtsZWZ0XSAtIHJlY3QodHJhY2spW2xlZnRdICsgb3JpZW50KGdldFBhZGRpbmcoZmFsc2UpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyaW0ocG9zaXRpb24pIHtcbiAgICBpZiAob3B0aW9ucy50cmltU3BhY2UgJiYgU3BsaWRlMi5pcyhTTElERSkpIHtcbiAgICAgIHBvc2l0aW9uID0gY2xhbXAocG9zaXRpb24sIDAsIG9yaWVudChzbGlkZXJTaXplKHRydWUpIC0gbGlzdFNpemUoKSkpO1xuICAgIH1cblxuICAgIHJldHVybiBwb3NpdGlvbjtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9mZnNldChpbmRleCkge1xuICAgIHZhciBmb2N1cyA9IG9wdGlvbnMuZm9jdXM7XG4gICAgcmV0dXJuIGZvY3VzID09PSBcImNlbnRlclwiID8gKGxpc3RTaXplKCkgLSBzbGlkZVNpemUoaW5kZXgsIHRydWUpKSAvIDIgOiArZm9jdXMgKiBzbGlkZVNpemUoaW5kZXgpIHx8IDA7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRMaW1pdChtYXgpIHtcbiAgICByZXR1cm4gdG9Qb3NpdGlvbihtYXggPyBDb21wb25lbnRzMi5Db250cm9sbGVyLmdldEVuZCgpIDogMCwgISFvcHRpb25zLnRyaW1TcGFjZSk7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5TaGlmdChiYWNrd2FyZHMpIHtcbiAgICB2YXIgc2hpZnRlZCA9IG9yaWVudChzaGlmdChnZXRQb3NpdGlvbigpLCBiYWNrd2FyZHMpKTtcbiAgICByZXR1cm4gYmFja3dhcmRzID8gc2hpZnRlZCA+PSAwIDogc2hpZnRlZCA8PSBsaXN0W3Jlc29sdmUoXCJzY3JvbGxXaWR0aFwiKV0gLSByZWN0KHRyYWNrKVtyZXNvbHZlKFwid2lkdGhcIildO1xuICB9XG5cbiAgZnVuY3Rpb24gZXhjZWVkZWRMaW1pdChtYXgsIHBvc2l0aW9uKSB7XG4gICAgcG9zaXRpb24gPSBpc1VuZGVmaW5lZChwb3NpdGlvbikgPyBnZXRQb3NpdGlvbigpIDogcG9zaXRpb247XG4gICAgdmFyIGV4Y2VlZGVkTWluID0gbWF4ICE9PSB0cnVlICYmIG9yaWVudChwb3NpdGlvbikgPCBvcmllbnQoZ2V0TGltaXQoZmFsc2UpKTtcbiAgICB2YXIgZXhjZWVkZWRNYXggPSBtYXggIT09IGZhbHNlICYmIG9yaWVudChwb3NpdGlvbikgPiBvcmllbnQoZ2V0TGltaXQodHJ1ZSkpO1xuICAgIHJldHVybiBleGNlZWRlZE1pbiB8fCBleGNlZWRlZE1heDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50LFxuICAgIG1vdmU6IG1vdmUsXG4gICAganVtcDoganVtcCxcbiAgICB0cmFuc2xhdGU6IHRyYW5zbGF0ZSxcbiAgICBzaGlmdDogc2hpZnQsXG4gICAgY2FuY2VsOiBjYW5jZWwsXG4gICAgdG9JbmRleDogdG9JbmRleCxcbiAgICB0b1Bvc2l0aW9uOiB0b1Bvc2l0aW9uLFxuICAgIGdldFBvc2l0aW9uOiBnZXRQb3NpdGlvbixcbiAgICBnZXRMaW1pdDogZ2V0TGltaXQsXG4gICAgZXhjZWVkZWRMaW1pdDogZXhjZWVkZWRMaW1pdCxcbiAgICByZXBvc2l0aW9uOiByZXBvc2l0aW9uXG4gIH07XG59XG5cbmZ1bmN0aW9uIENvbnRyb2xsZXIoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIF9FdmVudEludGVyZmFjZTUgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKSxcbiAgICAgIG9uID0gX0V2ZW50SW50ZXJmYWNlNS5vbixcbiAgICAgIGVtaXQgPSBfRXZlbnRJbnRlcmZhY2U1LmVtaXQ7XG5cbiAgdmFyIE1vdmUgPSBDb21wb25lbnRzMi5Nb3ZlO1xuICB2YXIgZ2V0UG9zaXRpb24gPSBNb3ZlLmdldFBvc2l0aW9uLFxuICAgICAgZ2V0TGltaXQgPSBNb3ZlLmdldExpbWl0LFxuICAgICAgdG9Qb3NpdGlvbiA9IE1vdmUudG9Qb3NpdGlvbjtcbiAgdmFyIF9Db21wb25lbnRzMiRTbGlkZXMgPSBDb21wb25lbnRzMi5TbGlkZXMsXG4gICAgICBpc0Vub3VnaCA9IF9Db21wb25lbnRzMiRTbGlkZXMuaXNFbm91Z2gsXG4gICAgICBnZXRMZW5ndGggPSBfQ29tcG9uZW50czIkU2xpZGVzLmdldExlbmd0aDtcbiAgdmFyIG9taXRFbmQgPSBvcHRpb25zLm9taXRFbmQ7XG4gIHZhciBpc0xvb3AgPSBTcGxpZGUyLmlzKExPT1ApO1xuICB2YXIgaXNTbGlkZSA9IFNwbGlkZTIuaXMoU0xJREUpO1xuICB2YXIgZ2V0TmV4dCA9IGFwcGx5KGdldEFkamFjZW50LCBmYWxzZSk7XG4gIHZhciBnZXRQcmV2ID0gYXBwbHkoZ2V0QWRqYWNlbnQsIHRydWUpO1xuICB2YXIgY3VyckluZGV4ID0gb3B0aW9ucy5zdGFydCB8fCAwO1xuICB2YXIgZW5kSW5kZXg7XG4gIHZhciBwcmV2SW5kZXggPSBjdXJySW5kZXg7XG4gIHZhciBzbGlkZUNvdW50O1xuICB2YXIgcGVyTW92ZTtcbiAgdmFyIHBlclBhZ2U7XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgaW5pdCgpO1xuICAgIG9uKFtFVkVOVF9VUERBVEVELCBFVkVOVF9SRUZSRVNILCBFVkVOVF9FTkRfSU5ERVhfQ0hBTkdFRF0sIGluaXQpO1xuICAgIG9uKEVWRU5UX1JFU0laRUQsIG9uUmVzaXplZCk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHNsaWRlQ291bnQgPSBnZXRMZW5ndGgodHJ1ZSk7XG4gICAgcGVyTW92ZSA9IG9wdGlvbnMucGVyTW92ZTtcbiAgICBwZXJQYWdlID0gb3B0aW9ucy5wZXJQYWdlO1xuICAgIGVuZEluZGV4ID0gZ2V0RW5kKCk7XG4gICAgdmFyIGluZGV4ID0gY2xhbXAoY3VyckluZGV4LCAwLCBvbWl0RW5kID8gZW5kSW5kZXggOiBzbGlkZUNvdW50IC0gMSk7XG5cbiAgICBpZiAoaW5kZXggIT09IGN1cnJJbmRleCkge1xuICAgICAgY3VyckluZGV4ID0gaW5kZXg7XG4gICAgICBNb3ZlLnJlcG9zaXRpb24oKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvblJlc2l6ZWQoKSB7XG4gICAgaWYgKGVuZEluZGV4ICE9PSBnZXRFbmQoKSkge1xuICAgICAgZW1pdChFVkVOVF9FTkRfSU5ERVhfQ0hBTkdFRCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ28oY29udHJvbCwgYWxsb3dTYW1lSW5kZXgsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCFpc0J1c3koKSkge1xuICAgICAgdmFyIGRlc3QgPSBwYXJzZShjb250cm9sKTtcbiAgICAgIHZhciBpbmRleCA9IGxvb3AoZGVzdCk7XG5cbiAgICAgIGlmIChpbmRleCA+IC0xICYmIChhbGxvd1NhbWVJbmRleCB8fCBpbmRleCAhPT0gY3VyckluZGV4KSkge1xuICAgICAgICBzZXRJbmRleChpbmRleCk7XG4gICAgICAgIE1vdmUubW92ZShkZXN0LCBpbmRleCwgcHJldkluZGV4LCBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2Nyb2xsKGRlc3RpbmF0aW9uLCBkdXJhdGlvbiwgc25hcCwgY2FsbGJhY2spIHtcbiAgICBDb21wb25lbnRzMi5TY3JvbGwuc2Nyb2xsKGRlc3RpbmF0aW9uLCBkdXJhdGlvbiwgc25hcCwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGluZGV4ID0gbG9vcChNb3ZlLnRvSW5kZXgoZ2V0UG9zaXRpb24oKSkpO1xuICAgICAgc2V0SW5kZXgob21pdEVuZCA/IG1pbihpbmRleCwgZW5kSW5kZXgpIDogaW5kZXgpO1xuICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhcnNlKGNvbnRyb2wpIHtcbiAgICB2YXIgaW5kZXggPSBjdXJySW5kZXg7XG5cbiAgICBpZiAoaXNTdHJpbmcoY29udHJvbCkpIHtcbiAgICAgIHZhciBfcmVmID0gY29udHJvbC5tYXRjaCgvKFsrXFwtPD5dKShcXGQrKT8vKSB8fCBbXSxcbiAgICAgICAgICBpbmRpY2F0b3IgPSBfcmVmWzFdLFxuICAgICAgICAgIG51bWJlciA9IF9yZWZbMl07XG5cbiAgICAgIGlmIChpbmRpY2F0b3IgPT09IFwiK1wiIHx8IGluZGljYXRvciA9PT0gXCItXCIpIHtcbiAgICAgICAgaW5kZXggPSBjb21wdXRlRGVzdEluZGV4KGN1cnJJbmRleCArICsoXCJcIiArIGluZGljYXRvciArICgrbnVtYmVyIHx8IDEpKSwgY3VyckluZGV4KTtcbiAgICAgIH0gZWxzZSBpZiAoaW5kaWNhdG9yID09PSBcIj5cIikge1xuICAgICAgICBpbmRleCA9IG51bWJlciA/IHRvSW5kZXgoK251bWJlcikgOiBnZXROZXh0KHRydWUpO1xuICAgICAgfSBlbHNlIGlmIChpbmRpY2F0b3IgPT09IFwiPFwiKSB7XG4gICAgICAgIGluZGV4ID0gZ2V0UHJldih0cnVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaW5kZXggPSBpc0xvb3AgPyBjb250cm9sIDogY2xhbXAoY29udHJvbCwgMCwgZW5kSW5kZXgpO1xuICAgIH1cblxuICAgIHJldHVybiBpbmRleDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEFkamFjZW50KHByZXYsIGRlc3RpbmF0aW9uKSB7XG4gICAgdmFyIG51bWJlciA9IHBlck1vdmUgfHwgKGhhc0ZvY3VzKCkgPyAxIDogcGVyUGFnZSk7XG4gICAgdmFyIGRlc3QgPSBjb21wdXRlRGVzdEluZGV4KGN1cnJJbmRleCArIG51bWJlciAqIChwcmV2ID8gLTEgOiAxKSwgY3VyckluZGV4LCAhKHBlck1vdmUgfHwgaGFzRm9jdXMoKSkpO1xuXG4gICAgaWYgKGRlc3QgPT09IC0xICYmIGlzU2xpZGUpIHtcbiAgICAgIGlmICghYXBwcm94aW1hdGVseUVxdWFsKGdldFBvc2l0aW9uKCksIGdldExpbWl0KCFwcmV2KSwgMSkpIHtcbiAgICAgICAgcmV0dXJuIHByZXYgPyAwIDogZW5kSW5kZXg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlc3RpbmF0aW9uID8gZGVzdCA6IGxvb3AoZGVzdCk7XG4gIH1cblxuICBmdW5jdGlvbiBjb21wdXRlRGVzdEluZGV4KGRlc3QsIGZyb20sIHNuYXBQYWdlKSB7XG4gICAgaWYgKGlzRW5vdWdoKCkgfHwgaGFzRm9jdXMoKSkge1xuICAgICAgdmFyIGluZGV4ID0gY29tcHV0ZU1vdmFibGVEZXN0SW5kZXgoZGVzdCk7XG5cbiAgICAgIGlmIChpbmRleCAhPT0gZGVzdCkge1xuICAgICAgICBmcm9tID0gZGVzdDtcbiAgICAgICAgZGVzdCA9IGluZGV4O1xuICAgICAgICBzbmFwUGFnZSA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGVzdCA8IDAgfHwgZGVzdCA+IGVuZEluZGV4KSB7XG4gICAgICAgIGlmICghcGVyTW92ZSAmJiAoYmV0d2VlbigwLCBkZXN0LCBmcm9tLCB0cnVlKSB8fCBiZXR3ZWVuKGVuZEluZGV4LCBmcm9tLCBkZXN0LCB0cnVlKSkpIHtcbiAgICAgICAgICBkZXN0ID0gdG9JbmRleCh0b1BhZ2UoZGVzdCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChpc0xvb3ApIHtcbiAgICAgICAgICAgIGRlc3QgPSBzbmFwUGFnZSA/IGRlc3QgPCAwID8gLShzbGlkZUNvdW50ICUgcGVyUGFnZSB8fCBwZXJQYWdlKSA6IHNsaWRlQ291bnQgOiBkZXN0O1xuICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5yZXdpbmQpIHtcbiAgICAgICAgICAgIGRlc3QgPSBkZXN0IDwgMCA/IGVuZEluZGV4IDogMDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVzdCA9IC0xO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHNuYXBQYWdlICYmIGRlc3QgIT09IGZyb20pIHtcbiAgICAgICAgICBkZXN0ID0gdG9JbmRleCh0b1BhZ2UoZnJvbSkgKyAoZGVzdCA8IGZyb20gPyAtMSA6IDEpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkZXN0ID0gLTE7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlc3Q7XG4gIH1cblxuICBmdW5jdGlvbiBjb21wdXRlTW92YWJsZURlc3RJbmRleChkZXN0KSB7XG4gICAgaWYgKGlzU2xpZGUgJiYgb3B0aW9ucy50cmltU3BhY2UgPT09IFwibW92ZVwiICYmIGRlc3QgIT09IGN1cnJJbmRleCkge1xuICAgICAgdmFyIHBvc2l0aW9uID0gZ2V0UG9zaXRpb24oKTtcblxuICAgICAgd2hpbGUgKHBvc2l0aW9uID09PSB0b1Bvc2l0aW9uKGRlc3QsIHRydWUpICYmIGJldHdlZW4oZGVzdCwgMCwgU3BsaWRlMi5sZW5ndGggLSAxLCAhb3B0aW9ucy5yZXdpbmQpKSB7XG4gICAgICAgIGRlc3QgPCBjdXJySW5kZXggPyAtLWRlc3QgOiArK2Rlc3Q7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlc3Q7XG4gIH1cblxuICBmdW5jdGlvbiBsb29wKGluZGV4KSB7XG4gICAgcmV0dXJuIGlzTG9vcCA/IChpbmRleCArIHNsaWRlQ291bnQpICUgc2xpZGVDb3VudCB8fCAwIDogaW5kZXg7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRFbmQoKSB7XG4gICAgdmFyIGVuZCA9IHNsaWRlQ291bnQgLSAoaGFzRm9jdXMoKSB8fCBpc0xvb3AgJiYgcGVyTW92ZSA/IDEgOiBwZXJQYWdlKTtcblxuICAgIHdoaWxlIChvbWl0RW5kICYmIGVuZC0tID4gMCkge1xuICAgICAgaWYgKHRvUG9zaXRpb24oc2xpZGVDb3VudCAtIDEsIHRydWUpICE9PSB0b1Bvc2l0aW9uKGVuZCwgdHJ1ZSkpIHtcbiAgICAgICAgZW5kKys7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjbGFtcChlbmQsIDAsIHNsaWRlQ291bnQgLSAxKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvSW5kZXgocGFnZSkge1xuICAgIHJldHVybiBjbGFtcChoYXNGb2N1cygpID8gcGFnZSA6IHBlclBhZ2UgKiBwYWdlLCAwLCBlbmRJbmRleCk7XG4gIH1cblxuICBmdW5jdGlvbiB0b1BhZ2UoaW5kZXgpIHtcbiAgICByZXR1cm4gaGFzRm9jdXMoKSA/IG1pbihpbmRleCwgZW5kSW5kZXgpIDogZmxvb3IoKGluZGV4ID49IGVuZEluZGV4ID8gc2xpZGVDb3VudCAtIDEgOiBpbmRleCkgLyBwZXJQYWdlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvRGVzdChkZXN0aW5hdGlvbikge1xuICAgIHZhciBjbG9zZXN0ID0gTW92ZS50b0luZGV4KGRlc3RpbmF0aW9uKTtcbiAgICByZXR1cm4gaXNTbGlkZSA/IGNsYW1wKGNsb3Nlc3QsIDAsIGVuZEluZGV4KSA6IGNsb3Nlc3Q7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRJbmRleChpbmRleCkge1xuICAgIGlmIChpbmRleCAhPT0gY3VyckluZGV4KSB7XG4gICAgICBwcmV2SW5kZXggPSBjdXJySW5kZXg7XG4gICAgICBjdXJySW5kZXggPSBpbmRleDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRJbmRleChwcmV2KSB7XG4gICAgcmV0dXJuIHByZXYgPyBwcmV2SW5kZXggOiBjdXJySW5kZXg7XG4gIH1cblxuICBmdW5jdGlvbiBoYXNGb2N1cygpIHtcbiAgICByZXR1cm4gIWlzVW5kZWZpbmVkKG9wdGlvbnMuZm9jdXMpIHx8IG9wdGlvbnMuaXNOYXZpZ2F0aW9uO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNCdXN5KCkge1xuICAgIHJldHVybiBTcGxpZGUyLnN0YXRlLmlzKFtNT1ZJTkcsIFNDUk9MTElOR10pICYmICEhb3B0aW9ucy53YWl0Rm9yVHJhbnNpdGlvbjtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGdvOiBnbyxcbiAgICBzY3JvbGw6IHNjcm9sbCxcbiAgICBnZXROZXh0OiBnZXROZXh0LFxuICAgIGdldFByZXY6IGdldFByZXYsXG4gICAgZ2V0QWRqYWNlbnQ6IGdldEFkamFjZW50LFxuICAgIGdldEVuZDogZ2V0RW5kLFxuICAgIHNldEluZGV4OiBzZXRJbmRleCxcbiAgICBnZXRJbmRleDogZ2V0SW5kZXgsXG4gICAgdG9JbmRleDogdG9JbmRleCxcbiAgICB0b1BhZ2U6IHRvUGFnZSxcbiAgICB0b0Rlc3Q6IHRvRGVzdCxcbiAgICBoYXNGb2N1czogaGFzRm9jdXMsXG4gICAgaXNCdXN5OiBpc0J1c3lcbiAgfTtcbn1cblxudmFyIFhNTF9OQU1FX1NQQUNFID0gXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiO1xudmFyIFBBVEggPSBcIm0xNS41IDAuOTMyLTQuMyA0LjM4IDE0LjUgMTQuNi0xNC41IDE0LjUgNC4zIDQuNCAxNC42LTE0LjYgNC40LTQuMy00LjQtNC40LTE0LjYtMTQuNnpcIjtcbnZhciBTSVpFID0gNDA7XG5cbmZ1bmN0aW9uIEFycm93cyhTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgZXZlbnQgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKTtcbiAgdmFyIG9uID0gZXZlbnQub24sXG4gICAgICBiaW5kID0gZXZlbnQuYmluZCxcbiAgICAgIGVtaXQgPSBldmVudC5lbWl0O1xuICB2YXIgY2xhc3NlcyA9IG9wdGlvbnMuY2xhc3NlcyxcbiAgICAgIGkxOG4gPSBvcHRpb25zLmkxOG47XG4gIHZhciBFbGVtZW50cyA9IENvbXBvbmVudHMyLkVsZW1lbnRzLFxuICAgICAgQ29udHJvbGxlciA9IENvbXBvbmVudHMyLkNvbnRyb2xsZXI7XG4gIHZhciBwbGFjZWhvbGRlciA9IEVsZW1lbnRzLmFycm93cyxcbiAgICAgIHRyYWNrID0gRWxlbWVudHMudHJhY2s7XG4gIHZhciB3cmFwcGVyID0gcGxhY2Vob2xkZXI7XG4gIHZhciBwcmV2ID0gRWxlbWVudHMucHJldjtcbiAgdmFyIG5leHQgPSBFbGVtZW50cy5uZXh0O1xuICB2YXIgY3JlYXRlZDtcbiAgdmFyIHdyYXBwZXJDbGFzc2VzO1xuICB2YXIgYXJyb3dzID0ge307XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgaW5pdCgpO1xuICAgIG9uKEVWRU5UX1VQREFURUQsIHJlbW91bnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3VudCgpIHtcbiAgICBkZXN0cm95KCk7XG4gICAgbW91bnQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIGVuYWJsZWQgPSBvcHRpb25zLmFycm93cztcblxuICAgIGlmIChlbmFibGVkICYmICEocHJldiAmJiBuZXh0KSkge1xuICAgICAgY3JlYXRlQXJyb3dzKCk7XG4gICAgfVxuXG4gICAgaWYgKHByZXYgJiYgbmV4dCkge1xuICAgICAgYXNzaWduKGFycm93cywge1xuICAgICAgICBwcmV2OiBwcmV2LFxuICAgICAgICBuZXh0OiBuZXh0XG4gICAgICB9KTtcbiAgICAgIGRpc3BsYXkod3JhcHBlciwgZW5hYmxlZCA/IFwiXCIgOiBcIm5vbmVcIik7XG4gICAgICBhZGRDbGFzcyh3cmFwcGVyLCB3cmFwcGVyQ2xhc3NlcyA9IENMQVNTX0FSUk9XUyArIFwiLS1cIiArIG9wdGlvbnMuZGlyZWN0aW9uKTtcblxuICAgICAgaWYgKGVuYWJsZWQpIHtcbiAgICAgICAgbGlzdGVuKCk7XG4gICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICBzZXRBdHRyaWJ1dGUoW3ByZXYsIG5leHRdLCBBUklBX0NPTlRST0xTLCB0cmFjay5pZCk7XG4gICAgICAgIGVtaXQoRVZFTlRfQVJST1dTX01PVU5URUQsIHByZXYsIG5leHQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgZXZlbnQuZGVzdHJveSgpO1xuICAgIHJlbW92ZUNsYXNzKHdyYXBwZXIsIHdyYXBwZXJDbGFzc2VzKTtcblxuICAgIGlmIChjcmVhdGVkKSB7XG4gICAgICByZW1vdmUocGxhY2Vob2xkZXIgPyBbcHJldiwgbmV4dF0gOiB3cmFwcGVyKTtcbiAgICAgIHByZXYgPSBuZXh0ID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlQXR0cmlidXRlKFtwcmV2LCBuZXh0XSwgQUxMX0FUVFJJQlVURVMpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGxpc3RlbigpIHtcbiAgICBvbihbRVZFTlRfTU9VTlRFRCwgRVZFTlRfTU9WRUQsIEVWRU5UX1JFRlJFU0gsIEVWRU5UX1NDUk9MTEVELCBFVkVOVF9FTkRfSU5ERVhfQ0hBTkdFRF0sIHVwZGF0ZSk7XG4gICAgYmluZChuZXh0LCBcImNsaWNrXCIsIGFwcGx5KGdvLCBcIj5cIikpO1xuICAgIGJpbmQocHJldiwgXCJjbGlja1wiLCBhcHBseShnbywgXCI8XCIpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdvKGNvbnRyb2wpIHtcbiAgICBDb250cm9sbGVyLmdvKGNvbnRyb2wsIHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlQXJyb3dzKCkge1xuICAgIHdyYXBwZXIgPSBwbGFjZWhvbGRlciB8fCBjcmVhdGUoXCJkaXZcIiwgY2xhc3Nlcy5hcnJvd3MpO1xuICAgIHByZXYgPSBjcmVhdGVBcnJvdyh0cnVlKTtcbiAgICBuZXh0ID0gY3JlYXRlQXJyb3coZmFsc2UpO1xuICAgIGNyZWF0ZWQgPSB0cnVlO1xuICAgIGFwcGVuZCh3cmFwcGVyLCBbcHJldiwgbmV4dF0pO1xuICAgICFwbGFjZWhvbGRlciAmJiBiZWZvcmUod3JhcHBlciwgdHJhY2spO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlQXJyb3cocHJldjIpIHtcbiAgICB2YXIgYXJyb3cgPSBcIjxidXR0b24gY2xhc3M9XFxcIlwiICsgY2xhc3Nlcy5hcnJvdyArIFwiIFwiICsgKHByZXYyID8gY2xhc3Nlcy5wcmV2IDogY2xhc3Nlcy5uZXh0KSArIFwiXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiPjxzdmcgeG1sbnM9XFxcIlwiICsgWE1MX05BTUVfU1BBQ0UgKyBcIlxcXCIgdmlld0JveD1cXFwiMCAwIFwiICsgU0laRSArIFwiIFwiICsgU0laRSArIFwiXFxcIiB3aWR0aD1cXFwiXCIgKyBTSVpFICsgXCJcXFwiIGhlaWdodD1cXFwiXCIgKyBTSVpFICsgXCJcXFwiIGZvY3VzYWJsZT1cXFwiZmFsc2VcXFwiPjxwYXRoIGQ9XFxcIlwiICsgKG9wdGlvbnMuYXJyb3dQYXRoIHx8IFBBVEgpICsgXCJcXFwiIC8+XCI7XG4gICAgcmV0dXJuIHBhcnNlSHRtbChhcnJvdyk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgaWYgKHByZXYgJiYgbmV4dCkge1xuICAgICAgdmFyIGluZGV4ID0gU3BsaWRlMi5pbmRleDtcbiAgICAgIHZhciBwcmV2SW5kZXggPSBDb250cm9sbGVyLmdldFByZXYoKTtcbiAgICAgIHZhciBuZXh0SW5kZXggPSBDb250cm9sbGVyLmdldE5leHQoKTtcbiAgICAgIHZhciBwcmV2TGFiZWwgPSBwcmV2SW5kZXggPiAtMSAmJiBpbmRleCA8IHByZXZJbmRleCA/IGkxOG4ubGFzdCA6IGkxOG4ucHJldjtcbiAgICAgIHZhciBuZXh0TGFiZWwgPSBuZXh0SW5kZXggPiAtMSAmJiBpbmRleCA+IG5leHRJbmRleCA/IGkxOG4uZmlyc3QgOiBpMThuLm5leHQ7XG4gICAgICBwcmV2LmRpc2FibGVkID0gcHJldkluZGV4IDwgMDtcbiAgICAgIG5leHQuZGlzYWJsZWQgPSBuZXh0SW5kZXggPCAwO1xuICAgICAgc2V0QXR0cmlidXRlKHByZXYsIEFSSUFfTEFCRUwsIHByZXZMYWJlbCk7XG4gICAgICBzZXRBdHRyaWJ1dGUobmV4dCwgQVJJQV9MQUJFTCwgbmV4dExhYmVsKTtcbiAgICAgIGVtaXQoRVZFTlRfQVJST1dTX1VQREFURUQsIHByZXYsIG5leHQsIHByZXZJbmRleCwgbmV4dEluZGV4KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGFycm93czogYXJyb3dzLFxuICAgIG1vdW50OiBtb3VudCxcbiAgICBkZXN0cm95OiBkZXN0cm95LFxuICAgIHVwZGF0ZTogdXBkYXRlXG4gIH07XG59XG5cbnZhciBJTlRFUlZBTF9EQVRBX0FUVFJJQlVURSA9IERBVEFfQVRUUklCVVRFICsgXCItaW50ZXJ2YWxcIjtcblxuZnVuY3Rpb24gQXV0b3BsYXkoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIF9FdmVudEludGVyZmFjZTYgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKSxcbiAgICAgIG9uID0gX0V2ZW50SW50ZXJmYWNlNi5vbixcbiAgICAgIGJpbmQgPSBfRXZlbnRJbnRlcmZhY2U2LmJpbmQsXG4gICAgICBlbWl0ID0gX0V2ZW50SW50ZXJmYWNlNi5lbWl0O1xuXG4gIHZhciBpbnRlcnZhbCA9IFJlcXVlc3RJbnRlcnZhbChvcHRpb25zLmludGVydmFsLCBTcGxpZGUyLmdvLmJpbmQoU3BsaWRlMiwgXCI+XCIpLCBvbkFuaW1hdGlvbkZyYW1lKTtcbiAgdmFyIGlzUGF1c2VkID0gaW50ZXJ2YWwuaXNQYXVzZWQ7XG4gIHZhciBFbGVtZW50cyA9IENvbXBvbmVudHMyLkVsZW1lbnRzLFxuICAgICAgX0NvbXBvbmVudHMyJEVsZW1lbnRzNCA9IENvbXBvbmVudHMyLkVsZW1lbnRzLFxuICAgICAgcm9vdCA9IF9Db21wb25lbnRzMiRFbGVtZW50czQucm9vdCxcbiAgICAgIHRvZ2dsZSA9IF9Db21wb25lbnRzMiRFbGVtZW50czQudG9nZ2xlO1xuICB2YXIgYXV0b3BsYXkgPSBvcHRpb25zLmF1dG9wbGF5O1xuICB2YXIgaG92ZXJlZDtcbiAgdmFyIGZvY3VzZWQ7XG4gIHZhciBzdG9wcGVkID0gYXV0b3BsYXkgPT09IFwicGF1c2VcIjtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBpZiAoYXV0b3BsYXkpIHtcbiAgICAgIGxpc3RlbigpO1xuICAgICAgdG9nZ2xlICYmIHNldEF0dHJpYnV0ZSh0b2dnbGUsIEFSSUFfQ09OVFJPTFMsIEVsZW1lbnRzLnRyYWNrLmlkKTtcbiAgICAgIHN0b3BwZWQgfHwgcGxheSgpO1xuICAgICAgdXBkYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbGlzdGVuKCkge1xuICAgIGlmIChvcHRpb25zLnBhdXNlT25Ib3Zlcikge1xuICAgICAgYmluZChyb290LCBcIm1vdXNlZW50ZXIgbW91c2VsZWF2ZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBob3ZlcmVkID0gZS50eXBlID09PSBcIm1vdXNlZW50ZXJcIjtcbiAgICAgICAgYXV0b1RvZ2dsZSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMucGF1c2VPbkZvY3VzKSB7XG4gICAgICBiaW5kKHJvb3QsIFwiZm9jdXNpbiBmb2N1c291dFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBmb2N1c2VkID0gZS50eXBlID09PSBcImZvY3VzaW5cIjtcbiAgICAgICAgYXV0b1RvZ2dsZSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRvZ2dsZSkge1xuICAgICAgYmluZCh0b2dnbGUsIFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBzdG9wcGVkID8gcGxheSgpIDogcGF1c2UodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBvbihbRVZFTlRfTU9WRSwgRVZFTlRfU0NST0xMLCBFVkVOVF9SRUZSRVNIXSwgaW50ZXJ2YWwucmV3aW5kKTtcbiAgICBvbihFVkVOVF9NT1ZFLCBvbk1vdmUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICBpZiAoaXNQYXVzZWQoKSAmJiBDb21wb25lbnRzMi5TbGlkZXMuaXNFbm91Z2goKSkge1xuICAgICAgaW50ZXJ2YWwuc3RhcnQoIW9wdGlvbnMucmVzZXRQcm9ncmVzcyk7XG4gICAgICBmb2N1c2VkID0gaG92ZXJlZCA9IHN0b3BwZWQgPSBmYWxzZTtcbiAgICAgIHVwZGF0ZSgpO1xuICAgICAgZW1pdChFVkVOVF9BVVRPUExBWV9QTEFZKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZShzdG9wKSB7XG4gICAgaWYgKHN0b3AgPT09IHZvaWQgMCkge1xuICAgICAgc3RvcCA9IHRydWU7XG4gICAgfVxuXG4gICAgc3RvcHBlZCA9ICEhc3RvcDtcbiAgICB1cGRhdGUoKTtcblxuICAgIGlmICghaXNQYXVzZWQoKSkge1xuICAgICAgaW50ZXJ2YWwucGF1c2UoKTtcbiAgICAgIGVtaXQoRVZFTlRfQVVUT1BMQVlfUEFVU0UpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGF1dG9Ub2dnbGUoKSB7XG4gICAgaWYgKCFzdG9wcGVkKSB7XG4gICAgICBob3ZlcmVkIHx8IGZvY3VzZWQgPyBwYXVzZShmYWxzZSkgOiBwbGF5KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgIGlmICh0b2dnbGUpIHtcbiAgICAgIHRvZ2dsZUNsYXNzKHRvZ2dsZSwgQ0xBU1NfQUNUSVZFLCAhc3RvcHBlZCk7XG4gICAgICBzZXRBdHRyaWJ1dGUodG9nZ2xlLCBBUklBX0xBQkVMLCBvcHRpb25zLmkxOG5bc3RvcHBlZCA/IFwicGxheVwiIDogXCJwYXVzZVwiXSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25BbmltYXRpb25GcmFtZShyYXRlKSB7XG4gICAgdmFyIGJhciA9IEVsZW1lbnRzLmJhcjtcbiAgICBiYXIgJiYgc3R5bGUoYmFyLCBcIndpZHRoXCIsIHJhdGUgKiAxMDAgKyBcIiVcIik7XG4gICAgZW1pdChFVkVOVF9BVVRPUExBWV9QTEFZSU5HLCByYXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uTW92ZShpbmRleCkge1xuICAgIHZhciBTbGlkZSA9IENvbXBvbmVudHMyLlNsaWRlcy5nZXRBdChpbmRleCk7XG4gICAgaW50ZXJ2YWwuc2V0KFNsaWRlICYmICtnZXRBdHRyaWJ1dGUoU2xpZGUuc2xpZGUsIElOVEVSVkFMX0RBVEFfQVRUUklCVVRFKSB8fCBvcHRpb25zLmludGVydmFsKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGRlc3Ryb3k6IGludGVydmFsLmNhbmNlbCxcbiAgICBwbGF5OiBwbGF5LFxuICAgIHBhdXNlOiBwYXVzZSxcbiAgICBpc1BhdXNlZDogaXNQYXVzZWRcbiAgfTtcbn1cblxuZnVuY3Rpb24gQ292ZXIoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIF9FdmVudEludGVyZmFjZTcgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKSxcbiAgICAgIG9uID0gX0V2ZW50SW50ZXJmYWNlNy5vbjtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBpZiAob3B0aW9ucy5jb3Zlcikge1xuICAgICAgb24oRVZFTlRfTEFaWUxPQURfTE9BREVELCBhcHBseSh0b2dnbGUsIHRydWUpKTtcbiAgICAgIG9uKFtFVkVOVF9NT1VOVEVELCBFVkVOVF9VUERBVEVELCBFVkVOVF9SRUZSRVNIXSwgYXBwbHkoY292ZXIsIHRydWUpKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjb3Zlcihjb3ZlcjIpIHtcbiAgICBDb21wb25lbnRzMi5TbGlkZXMuZm9yRWFjaChmdW5jdGlvbiAoU2xpZGUpIHtcbiAgICAgIHZhciBpbWcgPSBjaGlsZChTbGlkZS5jb250YWluZXIgfHwgU2xpZGUuc2xpZGUsIFwiaW1nXCIpO1xuXG4gICAgICBpZiAoaW1nICYmIGltZy5zcmMpIHtcbiAgICAgICAgdG9nZ2xlKGNvdmVyMiwgaW1nLCBTbGlkZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiB0b2dnbGUoY292ZXIyLCBpbWcsIFNsaWRlKSB7XG4gICAgU2xpZGUuc3R5bGUoXCJiYWNrZ3JvdW5kXCIsIGNvdmVyMiA/IFwiY2VudGVyL2NvdmVyIG5vLXJlcGVhdCB1cmwoXFxcIlwiICsgaW1nLnNyYyArIFwiXFxcIilcIiA6IFwiXCIsIHRydWUpO1xuICAgIGRpc3BsYXkoaW1nLCBjb3ZlcjIgPyBcIm5vbmVcIiA6IFwiXCIpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb3VudDogbW91bnQsXG4gICAgZGVzdHJveTogYXBwbHkoY292ZXIsIGZhbHNlKVxuICB9O1xufVxuXG52YXIgQk9VTkNFX0RJRkZfVEhSRVNIT0xEID0gMTA7XG52YXIgQk9VTkNFX0RVUkFUSU9OID0gNjAwO1xudmFyIEZSSUNUSU9OX0ZBQ1RPUiA9IDAuNjtcbnZhciBCQVNFX1ZFTE9DSVRZID0gMS41O1xudmFyIE1JTl9EVVJBVElPTiA9IDgwMDtcblxuZnVuY3Rpb24gU2Nyb2xsKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBfRXZlbnRJbnRlcmZhY2U4ID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMiksXG4gICAgICBvbiA9IF9FdmVudEludGVyZmFjZTgub24sXG4gICAgICBlbWl0ID0gX0V2ZW50SW50ZXJmYWNlOC5lbWl0O1xuXG4gIHZhciBzZXQgPSBTcGxpZGUyLnN0YXRlLnNldDtcbiAgdmFyIE1vdmUgPSBDb21wb25lbnRzMi5Nb3ZlO1xuICB2YXIgZ2V0UG9zaXRpb24gPSBNb3ZlLmdldFBvc2l0aW9uLFxuICAgICAgZ2V0TGltaXQgPSBNb3ZlLmdldExpbWl0LFxuICAgICAgZXhjZWVkZWRMaW1pdCA9IE1vdmUuZXhjZWVkZWRMaW1pdCxcbiAgICAgIHRyYW5zbGF0ZSA9IE1vdmUudHJhbnNsYXRlO1xuICB2YXIgaXNTbGlkZSA9IFNwbGlkZTIuaXMoU0xJREUpO1xuICB2YXIgaW50ZXJ2YWw7XG4gIHZhciBjYWxsYmFjaztcbiAgdmFyIGZyaWN0aW9uID0gMTtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBvbihFVkVOVF9NT1ZFLCBjbGVhcik7XG4gICAgb24oW0VWRU5UX1VQREFURUQsIEVWRU5UX1JFRlJFU0hdLCBjYW5jZWwpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2Nyb2xsKGRlc3RpbmF0aW9uLCBkdXJhdGlvbiwgc25hcCwgb25TY3JvbGxlZCwgbm9Db25zdHJhaW4pIHtcbiAgICB2YXIgZnJvbSA9IGdldFBvc2l0aW9uKCk7XG4gICAgY2xlYXIoKTtcblxuICAgIGlmIChzbmFwICYmICghaXNTbGlkZSB8fCAhZXhjZWVkZWRMaW1pdCgpKSkge1xuICAgICAgdmFyIHNpemUgPSBDb21wb25lbnRzMi5MYXlvdXQuc2xpZGVyU2l6ZSgpO1xuICAgICAgdmFyIG9mZnNldCA9IHNpZ24oZGVzdGluYXRpb24pICogc2l6ZSAqIGZsb29yKGFicyhkZXN0aW5hdGlvbikgLyBzaXplKSB8fCAwO1xuICAgICAgZGVzdGluYXRpb24gPSBNb3ZlLnRvUG9zaXRpb24oQ29tcG9uZW50czIuQ29udHJvbGxlci50b0Rlc3QoZGVzdGluYXRpb24gJSBzaXplKSkgKyBvZmZzZXQ7XG4gICAgfVxuXG4gICAgdmFyIG5vRGlzdGFuY2UgPSBhcHByb3hpbWF0ZWx5RXF1YWwoZnJvbSwgZGVzdGluYXRpb24sIDEpO1xuICAgIGZyaWN0aW9uID0gMTtcbiAgICBkdXJhdGlvbiA9IG5vRGlzdGFuY2UgPyAwIDogZHVyYXRpb24gfHwgbWF4KGFicyhkZXN0aW5hdGlvbiAtIGZyb20pIC8gQkFTRV9WRUxPQ0lUWSwgTUlOX0RVUkFUSU9OKTtcbiAgICBjYWxsYmFjayA9IG9uU2Nyb2xsZWQ7XG4gICAgaW50ZXJ2YWwgPSBSZXF1ZXN0SW50ZXJ2YWwoZHVyYXRpb24sIG9uRW5kLCBhcHBseSh1cGRhdGUsIGZyb20sIGRlc3RpbmF0aW9uLCBub0NvbnN0cmFpbiksIDEpO1xuICAgIHNldChTQ1JPTExJTkcpO1xuICAgIGVtaXQoRVZFTlRfU0NST0xMKTtcbiAgICBpbnRlcnZhbC5zdGFydCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25FbmQoKSB7XG4gICAgc2V0KElETEUpO1xuICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7XG4gICAgZW1pdChFVkVOVF9TQ1JPTExFRCk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGUoZnJvbSwgdG8sIG5vQ29uc3RyYWluLCByYXRlKSB7XG4gICAgdmFyIHBvc2l0aW9uID0gZ2V0UG9zaXRpb24oKTtcbiAgICB2YXIgdGFyZ2V0ID0gZnJvbSArICh0byAtIGZyb20pICogZWFzaW5nKHJhdGUpO1xuICAgIHZhciBkaWZmID0gKHRhcmdldCAtIHBvc2l0aW9uKSAqIGZyaWN0aW9uO1xuICAgIHRyYW5zbGF0ZShwb3NpdGlvbiArIGRpZmYpO1xuXG4gICAgaWYgKGlzU2xpZGUgJiYgIW5vQ29uc3RyYWluICYmIGV4Y2VlZGVkTGltaXQoKSkge1xuICAgICAgZnJpY3Rpb24gKj0gRlJJQ1RJT05fRkFDVE9SO1xuXG4gICAgICBpZiAoYWJzKGRpZmYpIDwgQk9VTkNFX0RJRkZfVEhSRVNIT0xEKSB7XG4gICAgICAgIHNjcm9sbChnZXRMaW1pdChleGNlZWRlZExpbWl0KHRydWUpKSwgQk9VTkNFX0RVUkFUSU9OLCBmYWxzZSwgY2FsbGJhY2ssIHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgIGlmIChpbnRlcnZhbCkge1xuICAgICAgaW50ZXJ2YWwuY2FuY2VsKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgIGlmIChpbnRlcnZhbCAmJiAhaW50ZXJ2YWwuaXNQYXVzZWQoKSkge1xuICAgICAgY2xlYXIoKTtcbiAgICAgIG9uRW5kKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZWFzaW5nKHQpIHtcbiAgICB2YXIgZWFzaW5nRnVuYyA9IG9wdGlvbnMuZWFzaW5nRnVuYztcbiAgICByZXR1cm4gZWFzaW5nRnVuYyA/IGVhc2luZ0Z1bmModCkgOiAxIC0gTWF0aC5wb3coMSAtIHQsIDQpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb3VudDogbW91bnQsXG4gICAgZGVzdHJveTogY2xlYXIsXG4gICAgc2Nyb2xsOiBzY3JvbGwsXG4gICAgY2FuY2VsOiBjYW5jZWxcbiAgfTtcbn1cblxudmFyIFNDUk9MTF9MSVNURU5FUl9PUFRJT05TID0ge1xuICBwYXNzaXZlOiBmYWxzZSxcbiAgY2FwdHVyZTogdHJ1ZVxufTtcblxuZnVuY3Rpb24gRHJhZyhTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgX0V2ZW50SW50ZXJmYWNlOSA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpLFxuICAgICAgb24gPSBfRXZlbnRJbnRlcmZhY2U5Lm9uLFxuICAgICAgZW1pdCA9IF9FdmVudEludGVyZmFjZTkuZW1pdCxcbiAgICAgIGJpbmQgPSBfRXZlbnRJbnRlcmZhY2U5LmJpbmQsXG4gICAgICB1bmJpbmQgPSBfRXZlbnRJbnRlcmZhY2U5LnVuYmluZDtcblxuICB2YXIgc3RhdGUgPSBTcGxpZGUyLnN0YXRlO1xuICB2YXIgTW92ZSA9IENvbXBvbmVudHMyLk1vdmUsXG4gICAgICBTY3JvbGwgPSBDb21wb25lbnRzMi5TY3JvbGwsXG4gICAgICBDb250cm9sbGVyID0gQ29tcG9uZW50czIuQ29udHJvbGxlcixcbiAgICAgIHRyYWNrID0gQ29tcG9uZW50czIuRWxlbWVudHMudHJhY2ssXG4gICAgICByZWR1Y2UgPSBDb21wb25lbnRzMi5NZWRpYS5yZWR1Y2U7XG4gIHZhciBfQ29tcG9uZW50czIkRGlyZWN0aW8yID0gQ29tcG9uZW50czIuRGlyZWN0aW9uLFxuICAgICAgcmVzb2x2ZSA9IF9Db21wb25lbnRzMiREaXJlY3RpbzIucmVzb2x2ZSxcbiAgICAgIG9yaWVudCA9IF9Db21wb25lbnRzMiREaXJlY3RpbzIub3JpZW50O1xuICB2YXIgZ2V0UG9zaXRpb24gPSBNb3ZlLmdldFBvc2l0aW9uLFxuICAgICAgZXhjZWVkZWRMaW1pdCA9IE1vdmUuZXhjZWVkZWRMaW1pdDtcbiAgdmFyIGJhc2VQb3NpdGlvbjtcbiAgdmFyIGJhc2VFdmVudDtcbiAgdmFyIHByZXZCYXNlRXZlbnQ7XG4gIHZhciBpc0ZyZWU7XG4gIHZhciBkcmFnZ2luZztcbiAgdmFyIGV4Y2VlZGVkID0gZmFsc2U7XG4gIHZhciBjbGlja1ByZXZlbnRlZDtcbiAgdmFyIGRpc2FibGVkO1xuICB2YXIgdGFyZ2V0O1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIGJpbmQodHJhY2ssIFBPSU5URVJfTU9WRV9FVkVOVFMsIG5vb3AsIFNDUk9MTF9MSVNURU5FUl9PUFRJT05TKTtcbiAgICBiaW5kKHRyYWNrLCBQT0lOVEVSX1VQX0VWRU5UUywgbm9vcCwgU0NST0xMX0xJU1RFTkVSX09QVElPTlMpO1xuICAgIGJpbmQodHJhY2ssIFBPSU5URVJfRE9XTl9FVkVOVFMsIG9uUG9pbnRlckRvd24sIFNDUk9MTF9MSVNURU5FUl9PUFRJT05TKTtcbiAgICBiaW5kKHRyYWNrLCBcImNsaWNrXCIsIG9uQ2xpY2ssIHtcbiAgICAgIGNhcHR1cmU6IHRydWVcbiAgICB9KTtcbiAgICBiaW5kKHRyYWNrLCBcImRyYWdzdGFydFwiLCBwcmV2ZW50KTtcbiAgICBvbihbRVZFTlRfTU9VTlRFRCwgRVZFTlRfVVBEQVRFRF0sIGluaXQpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIgZHJhZyA9IG9wdGlvbnMuZHJhZztcbiAgICBkaXNhYmxlKCFkcmFnKTtcbiAgICBpc0ZyZWUgPSBkcmFnID09PSBcImZyZWVcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUG9pbnRlckRvd24oZSkge1xuICAgIGNsaWNrUHJldmVudGVkID0gZmFsc2U7XG5cbiAgICBpZiAoIWRpc2FibGVkKSB7XG4gICAgICB2YXIgaXNUb3VjaCA9IGlzVG91Y2hFdmVudChlKTtcblxuICAgICAgaWYgKGlzRHJhZ2dhYmxlKGUudGFyZ2V0KSAmJiAoaXNUb3VjaCB8fCAhZS5idXR0b24pKSB7XG4gICAgICAgIGlmICghQ29udHJvbGxlci5pc0J1c3koKSkge1xuICAgICAgICAgIHRhcmdldCA9IGlzVG91Y2ggPyB0cmFjayA6IHdpbmRvdztcbiAgICAgICAgICBkcmFnZ2luZyA9IHN0YXRlLmlzKFtNT1ZJTkcsIFNDUk9MTElOR10pO1xuICAgICAgICAgIHByZXZCYXNlRXZlbnQgPSBudWxsO1xuICAgICAgICAgIGJpbmQodGFyZ2V0LCBQT0lOVEVSX01PVkVfRVZFTlRTLCBvblBvaW50ZXJNb3ZlLCBTQ1JPTExfTElTVEVORVJfT1BUSU9OUyk7XG4gICAgICAgICAgYmluZCh0YXJnZXQsIFBPSU5URVJfVVBfRVZFTlRTLCBvblBvaW50ZXJVcCwgU0NST0xMX0xJU1RFTkVSX09QVElPTlMpO1xuICAgICAgICAgIE1vdmUuY2FuY2VsKCk7XG4gICAgICAgICAgU2Nyb2xsLmNhbmNlbCgpO1xuICAgICAgICAgIHNhdmUoZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJldmVudChlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUG9pbnRlck1vdmUoZSkge1xuICAgIGlmICghc3RhdGUuaXMoRFJBR0dJTkcpKSB7XG4gICAgICBzdGF0ZS5zZXQoRFJBR0dJTkcpO1xuICAgICAgZW1pdChFVkVOVF9EUkFHKTtcbiAgICB9XG5cbiAgICBpZiAoZS5jYW5jZWxhYmxlKSB7XG4gICAgICBpZiAoZHJhZ2dpbmcpIHtcbiAgICAgICAgTW92ZS50cmFuc2xhdGUoYmFzZVBvc2l0aW9uICsgY29uc3RyYWluKGRpZmZDb29yZChlKSkpO1xuICAgICAgICB2YXIgZXhwaXJlZCA9IGRpZmZUaW1lKGUpID4gTE9HX0lOVEVSVkFMO1xuICAgICAgICB2YXIgaGFzRXhjZWVkZWQgPSBleGNlZWRlZCAhPT0gKGV4Y2VlZGVkID0gZXhjZWVkZWRMaW1pdCgpKTtcblxuICAgICAgICBpZiAoZXhwaXJlZCB8fCBoYXNFeGNlZWRlZCkge1xuICAgICAgICAgIHNhdmUoZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjbGlja1ByZXZlbnRlZCA9IHRydWU7XG4gICAgICAgIGVtaXQoRVZFTlRfRFJBR0dJTkcpO1xuICAgICAgICBwcmV2ZW50KGUpO1xuICAgICAgfSBlbHNlIGlmIChpc1NsaWRlckRpcmVjdGlvbihlKSkge1xuICAgICAgICBkcmFnZ2luZyA9IHNob3VsZFN0YXJ0KGUpO1xuICAgICAgICBwcmV2ZW50KGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUG9pbnRlclVwKGUpIHtcbiAgICBpZiAoc3RhdGUuaXMoRFJBR0dJTkcpKSB7XG4gICAgICBzdGF0ZS5zZXQoSURMRSk7XG4gICAgICBlbWl0KEVWRU5UX0RSQUdHRUQpO1xuICAgIH1cblxuICAgIGlmIChkcmFnZ2luZykge1xuICAgICAgbW92ZShlKTtcbiAgICAgIHByZXZlbnQoZSk7XG4gICAgfVxuXG4gICAgdW5iaW5kKHRhcmdldCwgUE9JTlRFUl9NT1ZFX0VWRU5UUywgb25Qb2ludGVyTW92ZSk7XG4gICAgdW5iaW5kKHRhcmdldCwgUE9JTlRFUl9VUF9FVkVOVFMsIG9uUG9pbnRlclVwKTtcbiAgICBkcmFnZ2luZyA9IGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgaWYgKCFkaXNhYmxlZCAmJiBjbGlja1ByZXZlbnRlZCkge1xuICAgICAgcHJldmVudChlLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzYXZlKGUpIHtcbiAgICBwcmV2QmFzZUV2ZW50ID0gYmFzZUV2ZW50O1xuICAgIGJhc2VFdmVudCA9IGU7XG4gICAgYmFzZVBvc2l0aW9uID0gZ2V0UG9zaXRpb24oKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmUoZSkge1xuICAgIHZhciB2ZWxvY2l0eSA9IGNvbXB1dGVWZWxvY2l0eShlKTtcbiAgICB2YXIgZGVzdGluYXRpb24gPSBjb21wdXRlRGVzdGluYXRpb24odmVsb2NpdHkpO1xuICAgIHZhciByZXdpbmQgPSBvcHRpb25zLnJld2luZCAmJiBvcHRpb25zLnJld2luZEJ5RHJhZztcbiAgICByZWR1Y2UoZmFsc2UpO1xuXG4gICAgaWYgKGlzRnJlZSkge1xuICAgICAgQ29udHJvbGxlci5zY3JvbGwoZGVzdGluYXRpb24sIDAsIG9wdGlvbnMuc25hcCk7XG4gICAgfSBlbHNlIGlmIChTcGxpZGUyLmlzKEZBREUpKSB7XG4gICAgICBDb250cm9sbGVyLmdvKG9yaWVudChzaWduKHZlbG9jaXR5KSkgPCAwID8gcmV3aW5kID8gXCI8XCIgOiBcIi1cIiA6IHJld2luZCA/IFwiPlwiIDogXCIrXCIpO1xuICAgIH0gZWxzZSBpZiAoU3BsaWRlMi5pcyhTTElERSkgJiYgZXhjZWVkZWQgJiYgcmV3aW5kKSB7XG4gICAgICBDb250cm9sbGVyLmdvKGV4Y2VlZGVkTGltaXQodHJ1ZSkgPyBcIj5cIiA6IFwiPFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgQ29udHJvbGxlci5nbyhDb250cm9sbGVyLnRvRGVzdChkZXN0aW5hdGlvbiksIHRydWUpO1xuICAgIH1cblxuICAgIHJlZHVjZSh0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3VsZFN0YXJ0KGUpIHtcbiAgICB2YXIgdGhyZXNob2xkcyA9IG9wdGlvbnMuZHJhZ01pblRocmVzaG9sZDtcbiAgICB2YXIgaXNPYmogPSBpc09iamVjdCh0aHJlc2hvbGRzKTtcbiAgICB2YXIgbW91c2UgPSBpc09iaiAmJiB0aHJlc2hvbGRzLm1vdXNlIHx8IDA7XG4gICAgdmFyIHRvdWNoID0gKGlzT2JqID8gdGhyZXNob2xkcy50b3VjaCA6ICt0aHJlc2hvbGRzKSB8fCAxMDtcbiAgICByZXR1cm4gYWJzKGRpZmZDb29yZChlKSkgPiAoaXNUb3VjaEV2ZW50KGUpID8gdG91Y2ggOiBtb3VzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc1NsaWRlckRpcmVjdGlvbihlKSB7XG4gICAgcmV0dXJuIGFicyhkaWZmQ29vcmQoZSkpID4gYWJzKGRpZmZDb29yZChlLCB0cnVlKSk7XG4gIH1cblxuICBmdW5jdGlvbiBjb21wdXRlVmVsb2NpdHkoZSkge1xuICAgIGlmIChTcGxpZGUyLmlzKExPT1ApIHx8ICFleGNlZWRlZCkge1xuICAgICAgdmFyIHRpbWUgPSBkaWZmVGltZShlKTtcblxuICAgICAgaWYgKHRpbWUgJiYgdGltZSA8IExPR19JTlRFUlZBTCkge1xuICAgICAgICByZXR1cm4gZGlmZkNvb3JkKGUpIC8gdGltZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbXB1dGVEZXN0aW5hdGlvbih2ZWxvY2l0eSkge1xuICAgIHJldHVybiBnZXRQb3NpdGlvbigpICsgc2lnbih2ZWxvY2l0eSkgKiBtaW4oYWJzKHZlbG9jaXR5KSAqIChvcHRpb25zLmZsaWNrUG93ZXIgfHwgNjAwKSwgaXNGcmVlID8gSW5maW5pdHkgOiBDb21wb25lbnRzMi5MYXlvdXQubGlzdFNpemUoKSAqIChvcHRpb25zLmZsaWNrTWF4UGFnZXMgfHwgMSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlmZkNvb3JkKGUsIG9ydGhvZ29uYWwpIHtcbiAgICByZXR1cm4gY29vcmRPZihlLCBvcnRob2dvbmFsKSAtIGNvb3JkT2YoZ2V0QmFzZUV2ZW50KGUpLCBvcnRob2dvbmFsKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpZmZUaW1lKGUpIHtcbiAgICByZXR1cm4gdGltZU9mKGUpIC0gdGltZU9mKGdldEJhc2VFdmVudChlKSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRCYXNlRXZlbnQoZSkge1xuICAgIHJldHVybiBiYXNlRXZlbnQgPT09IGUgJiYgcHJldkJhc2VFdmVudCB8fCBiYXNlRXZlbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBjb29yZE9mKGUsIG9ydGhvZ29uYWwpIHtcbiAgICByZXR1cm4gKGlzVG91Y2hFdmVudChlKSA/IGUuY2hhbmdlZFRvdWNoZXNbMF0gOiBlKVtcInBhZ2VcIiArIHJlc29sdmUob3J0aG9nb25hbCA/IFwiWVwiIDogXCJYXCIpXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbnN0cmFpbihkaWZmKSB7XG4gICAgcmV0dXJuIGRpZmYgLyAoZXhjZWVkZWQgJiYgU3BsaWRlMi5pcyhTTElERSkgPyBGUklDVElPTiA6IDEpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNEcmFnZ2FibGUodGFyZ2V0Mikge1xuICAgIHZhciBub0RyYWcgPSBvcHRpb25zLm5vRHJhZztcbiAgICByZXR1cm4gIW1hdGNoZXModGFyZ2V0MiwgXCIuXCIgKyBDTEFTU19QQUdJTkFUSU9OX1BBR0UgKyBcIiwgLlwiICsgQ0xBU1NfQVJST1cpICYmICghbm9EcmFnIHx8ICFtYXRjaGVzKHRhcmdldDIsIG5vRHJhZykpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNUb3VjaEV2ZW50KGUpIHtcbiAgICByZXR1cm4gdHlwZW9mIFRvdWNoRXZlbnQgIT09IFwidW5kZWZpbmVkXCIgJiYgZSBpbnN0YW5jZW9mIFRvdWNoRXZlbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBpc0RyYWdnaW5nKCkge1xuICAgIHJldHVybiBkcmFnZ2luZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc2FibGUodmFsdWUpIHtcbiAgICBkaXNhYmxlZCA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb3VudDogbW91bnQsXG4gICAgZGlzYWJsZTogZGlzYWJsZSxcbiAgICBpc0RyYWdnaW5nOiBpc0RyYWdnaW5nXG4gIH07XG59XG5cbnZhciBOT1JNQUxJWkFUSU9OX01BUCA9IHtcbiAgU3BhY2ViYXI6IFwiIFwiLFxuICBSaWdodDogQVJST1dfUklHSFQsXG4gIExlZnQ6IEFSUk9XX0xFRlQsXG4gIFVwOiBBUlJPV19VUCxcbiAgRG93bjogQVJST1dfRE9XTlxufTtcblxuZnVuY3Rpb24gbm9ybWFsaXplS2V5KGtleSkge1xuICBrZXkgPSBpc1N0cmluZyhrZXkpID8ga2V5IDoga2V5LmtleTtcbiAgcmV0dXJuIE5PUk1BTElaQVRJT05fTUFQW2tleV0gfHwga2V5O1xufVxuXG52YXIgS0VZQk9BUkRfRVZFTlQgPSBcImtleWRvd25cIjtcblxuZnVuY3Rpb24gS2V5Ym9hcmQoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIF9FdmVudEludGVyZmFjZTEwID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMiksXG4gICAgICBvbiA9IF9FdmVudEludGVyZmFjZTEwLm9uLFxuICAgICAgYmluZCA9IF9FdmVudEludGVyZmFjZTEwLmJpbmQsXG4gICAgICB1bmJpbmQgPSBfRXZlbnRJbnRlcmZhY2UxMC51bmJpbmQ7XG5cbiAgdmFyIHJvb3QgPSBTcGxpZGUyLnJvb3Q7XG4gIHZhciByZXNvbHZlID0gQ29tcG9uZW50czIuRGlyZWN0aW9uLnJlc29sdmU7XG4gIHZhciB0YXJnZXQ7XG4gIHZhciBkaXNhYmxlZDtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBpbml0KCk7XG4gICAgb24oRVZFTlRfVVBEQVRFRCwgZGVzdHJveSk7XG4gICAgb24oRVZFTlRfVVBEQVRFRCwgaW5pdCk7XG4gICAgb24oRVZFTlRfTU9WRSwgb25Nb3ZlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIGtleWJvYXJkID0gb3B0aW9ucy5rZXlib2FyZDtcblxuICAgIGlmIChrZXlib2FyZCkge1xuICAgICAgdGFyZ2V0ID0ga2V5Ym9hcmQgPT09IFwiZ2xvYmFsXCIgPyB3aW5kb3cgOiByb290O1xuICAgICAgYmluZCh0YXJnZXQsIEtFWUJPQVJEX0VWRU5ULCBvbktleWRvd24pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgdW5iaW5kKHRhcmdldCwgS0VZQk9BUkRfRVZFTlQpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlzYWJsZSh2YWx1ZSkge1xuICAgIGRpc2FibGVkID0gdmFsdWU7XG4gIH1cblxuICBmdW5jdGlvbiBvbk1vdmUoKSB7XG4gICAgdmFyIF9kaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgIGRpc2FibGVkID0gdHJ1ZTtcbiAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICBkaXNhYmxlZCA9IF9kaXNhYmxlZDtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uS2V5ZG93bihlKSB7XG4gICAgaWYgKCFkaXNhYmxlZCkge1xuICAgICAgdmFyIGtleSA9IG5vcm1hbGl6ZUtleShlKTtcblxuICAgICAgaWYgKGtleSA9PT0gcmVzb2x2ZShBUlJPV19MRUZUKSkge1xuICAgICAgICBTcGxpZGUyLmdvKFwiPFwiKTtcbiAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSByZXNvbHZlKEFSUk9XX1JJR0hUKSkge1xuICAgICAgICBTcGxpZGUyLmdvKFwiPlwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1vdW50OiBtb3VudCxcbiAgICBkZXN0cm95OiBkZXN0cm95LFxuICAgIGRpc2FibGU6IGRpc2FibGVcbiAgfTtcbn1cblxudmFyIFNSQ19EQVRBX0FUVFJJQlVURSA9IERBVEFfQVRUUklCVVRFICsgXCItbGF6eVwiO1xudmFyIFNSQ1NFVF9EQVRBX0FUVFJJQlVURSA9IFNSQ19EQVRBX0FUVFJJQlVURSArIFwiLXNyY3NldFwiO1xudmFyIElNQUdFX1NFTEVDVE9SID0gXCJbXCIgKyBTUkNfREFUQV9BVFRSSUJVVEUgKyBcIl0sIFtcIiArIFNSQ1NFVF9EQVRBX0FUVFJJQlVURSArIFwiXVwiO1xuXG5mdW5jdGlvbiBMYXp5TG9hZChTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgX0V2ZW50SW50ZXJmYWNlMTEgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKSxcbiAgICAgIG9uID0gX0V2ZW50SW50ZXJmYWNlMTEub24sXG4gICAgICBvZmYgPSBfRXZlbnRJbnRlcmZhY2UxMS5vZmYsXG4gICAgICBiaW5kID0gX0V2ZW50SW50ZXJmYWNlMTEuYmluZCxcbiAgICAgIGVtaXQgPSBfRXZlbnRJbnRlcmZhY2UxMS5lbWl0O1xuXG4gIHZhciBpc1NlcXVlbnRpYWwgPSBvcHRpb25zLmxhenlMb2FkID09PSBcInNlcXVlbnRpYWxcIjtcbiAgdmFyIGV2ZW50cyA9IFtFVkVOVF9NT1ZFRCwgRVZFTlRfU0NST0xMRURdO1xuICB2YXIgZW50cmllcyA9IFtdO1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIGlmIChvcHRpb25zLmxhenlMb2FkKSB7XG4gICAgICBpbml0KCk7XG4gICAgICBvbihFVkVOVF9SRUZSRVNILCBpbml0KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIGVtcHR5KGVudHJpZXMpO1xuICAgIHJlZ2lzdGVyKCk7XG5cbiAgICBpZiAoaXNTZXF1ZW50aWFsKSB7XG4gICAgICBsb2FkTmV4dCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvZmYoZXZlbnRzKTtcbiAgICAgIG9uKGV2ZW50cywgY2hlY2spO1xuICAgICAgY2hlY2soKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWdpc3RlcigpIHtcbiAgICBDb21wb25lbnRzMi5TbGlkZXMuZm9yRWFjaChmdW5jdGlvbiAoU2xpZGUpIHtcbiAgICAgIHF1ZXJ5QWxsKFNsaWRlLnNsaWRlLCBJTUFHRV9TRUxFQ1RPUikuZm9yRWFjaChmdW5jdGlvbiAoaW1nKSB7XG4gICAgICAgIHZhciBzcmMgPSBnZXRBdHRyaWJ1dGUoaW1nLCBTUkNfREFUQV9BVFRSSUJVVEUpO1xuICAgICAgICB2YXIgc3Jjc2V0ID0gZ2V0QXR0cmlidXRlKGltZywgU1JDU0VUX0RBVEFfQVRUUklCVVRFKTtcblxuICAgICAgICBpZiAoc3JjICE9PSBpbWcuc3JjIHx8IHNyY3NldCAhPT0gaW1nLnNyY3NldCkge1xuICAgICAgICAgIHZhciBjbGFzc05hbWUgPSBvcHRpb25zLmNsYXNzZXMuc3Bpbm5lcjtcbiAgICAgICAgICB2YXIgcGFyZW50ID0gaW1nLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgdmFyIHNwaW5uZXIgPSBjaGlsZChwYXJlbnQsIFwiLlwiICsgY2xhc3NOYW1lKSB8fCBjcmVhdGUoXCJzcGFuXCIsIGNsYXNzTmFtZSwgcGFyZW50KTtcbiAgICAgICAgICBlbnRyaWVzLnB1c2goW2ltZywgU2xpZGUsIHNwaW5uZXJdKTtcbiAgICAgICAgICBpbWcuc3JjIHx8IGRpc3BsYXkoaW1nLCBcIm5vbmVcIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY2hlY2soKSB7XG4gICAgZW50cmllcyA9IGVudHJpZXMuZmlsdGVyKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICB2YXIgZGlzdGFuY2UgPSBvcHRpb25zLnBlclBhZ2UgKiAoKG9wdGlvbnMucHJlbG9hZFBhZ2VzIHx8IDEpICsgMSkgLSAxO1xuICAgICAgcmV0dXJuIGRhdGFbMV0uaXNXaXRoaW4oU3BsaWRlMi5pbmRleCwgZGlzdGFuY2UpID8gbG9hZChkYXRhKSA6IHRydWU7XG4gICAgfSk7XG4gICAgZW50cmllcy5sZW5ndGggfHwgb2ZmKGV2ZW50cyk7XG4gIH1cblxuICBmdW5jdGlvbiBsb2FkKGRhdGEpIHtcbiAgICB2YXIgaW1nID0gZGF0YVswXTtcbiAgICBhZGRDbGFzcyhkYXRhWzFdLnNsaWRlLCBDTEFTU19MT0FESU5HKTtcbiAgICBiaW5kKGltZywgXCJsb2FkIGVycm9yXCIsIGFwcGx5KG9uTG9hZCwgZGF0YSkpO1xuICAgIHNldEF0dHJpYnV0ZShpbWcsIFwic3JjXCIsIGdldEF0dHJpYnV0ZShpbWcsIFNSQ19EQVRBX0FUVFJJQlVURSkpO1xuICAgIHNldEF0dHJpYnV0ZShpbWcsIFwic3Jjc2V0XCIsIGdldEF0dHJpYnV0ZShpbWcsIFNSQ1NFVF9EQVRBX0FUVFJJQlVURSkpO1xuICAgIHJlbW92ZUF0dHJpYnV0ZShpbWcsIFNSQ19EQVRBX0FUVFJJQlVURSk7XG4gICAgcmVtb3ZlQXR0cmlidXRlKGltZywgU1JDU0VUX0RBVEFfQVRUUklCVVRFKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uTG9hZChkYXRhLCBlKSB7XG4gICAgdmFyIGltZyA9IGRhdGFbMF0sXG4gICAgICAgIFNsaWRlID0gZGF0YVsxXTtcbiAgICByZW1vdmVDbGFzcyhTbGlkZS5zbGlkZSwgQ0xBU1NfTE9BRElORyk7XG5cbiAgICBpZiAoZS50eXBlICE9PSBcImVycm9yXCIpIHtcbiAgICAgIHJlbW92ZShkYXRhWzJdKTtcbiAgICAgIGRpc3BsYXkoaW1nLCBcIlwiKTtcbiAgICAgIGVtaXQoRVZFTlRfTEFaWUxPQURfTE9BREVELCBpbWcsIFNsaWRlKTtcbiAgICAgIGVtaXQoRVZFTlRfUkVTSVpFKTtcbiAgICB9XG5cbiAgICBpc1NlcXVlbnRpYWwgJiYgbG9hZE5leHQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvYWROZXh0KCkge1xuICAgIGVudHJpZXMubGVuZ3RoICYmIGxvYWQoZW50cmllcy5zaGlmdCgpKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGRlc3Ryb3k6IGFwcGx5KGVtcHR5LCBlbnRyaWVzKSxcbiAgICBjaGVjazogY2hlY2tcbiAgfTtcbn1cblxuZnVuY3Rpb24gUGFnaW5hdGlvbihTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgZXZlbnQgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKTtcbiAgdmFyIG9uID0gZXZlbnQub24sXG4gICAgICBlbWl0ID0gZXZlbnQuZW1pdCxcbiAgICAgIGJpbmQgPSBldmVudC5iaW5kO1xuICB2YXIgU2xpZGVzID0gQ29tcG9uZW50czIuU2xpZGVzLFxuICAgICAgRWxlbWVudHMgPSBDb21wb25lbnRzMi5FbGVtZW50cyxcbiAgICAgIENvbnRyb2xsZXIgPSBDb21wb25lbnRzMi5Db250cm9sbGVyO1xuICB2YXIgaGFzRm9jdXMgPSBDb250cm9sbGVyLmhhc0ZvY3VzLFxuICAgICAgZ2V0SW5kZXggPSBDb250cm9sbGVyLmdldEluZGV4LFxuICAgICAgZ28gPSBDb250cm9sbGVyLmdvO1xuICB2YXIgcmVzb2x2ZSA9IENvbXBvbmVudHMyLkRpcmVjdGlvbi5yZXNvbHZlO1xuICB2YXIgcGxhY2Vob2xkZXIgPSBFbGVtZW50cy5wYWdpbmF0aW9uO1xuICB2YXIgaXRlbXMgPSBbXTtcbiAgdmFyIGxpc3Q7XG4gIHZhciBwYWdpbmF0aW9uQ2xhc3NlcztcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBkZXN0cm95KCk7XG4gICAgb24oW0VWRU5UX1VQREFURUQsIEVWRU5UX1JFRlJFU0gsIEVWRU5UX0VORF9JTkRFWF9DSEFOR0VEXSwgbW91bnQpO1xuICAgIHZhciBlbmFibGVkID0gb3B0aW9ucy5wYWdpbmF0aW9uO1xuICAgIHBsYWNlaG9sZGVyICYmIGRpc3BsYXkocGxhY2Vob2xkZXIsIGVuYWJsZWQgPyBcIlwiIDogXCJub25lXCIpO1xuXG4gICAgaWYgKGVuYWJsZWQpIHtcbiAgICAgIG9uKFtFVkVOVF9NT1ZFLCBFVkVOVF9TQ1JPTEwsIEVWRU5UX1NDUk9MTEVEXSwgdXBkYXRlKTtcbiAgICAgIGNyZWF0ZVBhZ2luYXRpb24oKTtcbiAgICAgIHVwZGF0ZSgpO1xuICAgICAgZW1pdChFVkVOVF9QQUdJTkFUSU9OX01PVU5URUQsIHtcbiAgICAgICAgbGlzdDogbGlzdCxcbiAgICAgICAgaXRlbXM6IGl0ZW1zXG4gICAgICB9LCBnZXRBdChTcGxpZGUyLmluZGV4KSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICBpZiAobGlzdCkge1xuICAgICAgcmVtb3ZlKHBsYWNlaG9sZGVyID8gc2xpY2UobGlzdC5jaGlsZHJlbikgOiBsaXN0KTtcbiAgICAgIHJlbW92ZUNsYXNzKGxpc3QsIHBhZ2luYXRpb25DbGFzc2VzKTtcbiAgICAgIGVtcHR5KGl0ZW1zKTtcbiAgICAgIGxpc3QgPSBudWxsO1xuICAgIH1cblxuICAgIGV2ZW50LmRlc3Ryb3koKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVBhZ2luYXRpb24oKSB7XG4gICAgdmFyIGxlbmd0aCA9IFNwbGlkZTIubGVuZ3RoO1xuICAgIHZhciBjbGFzc2VzID0gb3B0aW9ucy5jbGFzc2VzLFxuICAgICAgICBpMThuID0gb3B0aW9ucy5pMThuLFxuICAgICAgICBwZXJQYWdlID0gb3B0aW9ucy5wZXJQYWdlO1xuICAgIHZhciBtYXggPSBoYXNGb2N1cygpID8gQ29udHJvbGxlci5nZXRFbmQoKSArIDEgOiBjZWlsKGxlbmd0aCAvIHBlclBhZ2UpO1xuICAgIGxpc3QgPSBwbGFjZWhvbGRlciB8fCBjcmVhdGUoXCJ1bFwiLCBjbGFzc2VzLnBhZ2luYXRpb24sIEVsZW1lbnRzLnRyYWNrLnBhcmVudEVsZW1lbnQpO1xuICAgIGFkZENsYXNzKGxpc3QsIHBhZ2luYXRpb25DbGFzc2VzID0gQ0xBU1NfUEFHSU5BVElPTiArIFwiLS1cIiArIGdldERpcmVjdGlvbigpKTtcbiAgICBzZXRBdHRyaWJ1dGUobGlzdCwgUk9MRSwgXCJ0YWJsaXN0XCIpO1xuICAgIHNldEF0dHJpYnV0ZShsaXN0LCBBUklBX0xBQkVMLCBpMThuLnNlbGVjdCk7XG4gICAgc2V0QXR0cmlidXRlKGxpc3QsIEFSSUFfT1JJRU5UQVRJT04sIGdldERpcmVjdGlvbigpID09PSBUVEIgPyBcInZlcnRpY2FsXCIgOiBcIlwiKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHtcbiAgICAgIHZhciBsaSA9IGNyZWF0ZShcImxpXCIsIG51bGwsIGxpc3QpO1xuICAgICAgdmFyIGJ1dHRvbiA9IGNyZWF0ZShcImJ1dHRvblwiLCB7XG4gICAgICAgIGNsYXNzOiBjbGFzc2VzLnBhZ2UsXG4gICAgICAgIHR5cGU6IFwiYnV0dG9uXCJcbiAgICAgIH0sIGxpKTtcbiAgICAgIHZhciBjb250cm9scyA9IFNsaWRlcy5nZXRJbihpKS5tYXAoZnVuY3Rpb24gKFNsaWRlKSB7XG4gICAgICAgIHJldHVybiBTbGlkZS5zbGlkZS5pZDtcbiAgICAgIH0pO1xuICAgICAgdmFyIHRleHQgPSAhaGFzRm9jdXMoKSAmJiBwZXJQYWdlID4gMSA/IGkxOG4ucGFnZVggOiBpMThuLnNsaWRlWDtcbiAgICAgIGJpbmQoYnV0dG9uLCBcImNsaWNrXCIsIGFwcGx5KG9uQ2xpY2ssIGkpKTtcblxuICAgICAgaWYgKG9wdGlvbnMucGFnaW5hdGlvbktleWJvYXJkKSB7XG4gICAgICAgIGJpbmQoYnV0dG9uLCBcImtleWRvd25cIiwgYXBwbHkob25LZXlkb3duLCBpKSk7XG4gICAgICB9XG5cbiAgICAgIHNldEF0dHJpYnV0ZShsaSwgUk9MRSwgXCJwcmVzZW50YXRpb25cIik7XG4gICAgICBzZXRBdHRyaWJ1dGUoYnV0dG9uLCBST0xFLCBcInRhYlwiKTtcbiAgICAgIHNldEF0dHJpYnV0ZShidXR0b24sIEFSSUFfQ09OVFJPTFMsIGNvbnRyb2xzLmpvaW4oXCIgXCIpKTtcbiAgICAgIHNldEF0dHJpYnV0ZShidXR0b24sIEFSSUFfTEFCRUwsIGZvcm1hdCh0ZXh0LCBpICsgMSkpO1xuICAgICAgc2V0QXR0cmlidXRlKGJ1dHRvbiwgVEFCX0lOREVYLCAtMSk7XG4gICAgICBpdGVtcy5wdXNoKHtcbiAgICAgICAgbGk6IGxpLFxuICAgICAgICBidXR0b246IGJ1dHRvbixcbiAgICAgICAgcGFnZTogaVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25DbGljayhwYWdlKSB7XG4gICAgZ28oXCI+XCIgKyBwYWdlLCB0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uS2V5ZG93bihwYWdlLCBlKSB7XG4gICAgdmFyIGxlbmd0aCA9IGl0ZW1zLmxlbmd0aDtcbiAgICB2YXIga2V5ID0gbm9ybWFsaXplS2V5KGUpO1xuICAgIHZhciBkaXIgPSBnZXREaXJlY3Rpb24oKTtcbiAgICB2YXIgbmV4dFBhZ2UgPSAtMTtcblxuICAgIGlmIChrZXkgPT09IHJlc29sdmUoQVJST1dfUklHSFQsIGZhbHNlLCBkaXIpKSB7XG4gICAgICBuZXh0UGFnZSA9ICsrcGFnZSAlIGxlbmd0aDtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gcmVzb2x2ZShBUlJPV19MRUZULCBmYWxzZSwgZGlyKSkge1xuICAgICAgbmV4dFBhZ2UgPSAoLS1wYWdlICsgbGVuZ3RoKSAlIGxlbmd0aDtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJIb21lXCIpIHtcbiAgICAgIG5leHRQYWdlID0gMDtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJFbmRcIikge1xuICAgICAgbmV4dFBhZ2UgPSBsZW5ndGggLSAxO1xuICAgIH1cblxuICAgIHZhciBpdGVtID0gaXRlbXNbbmV4dFBhZ2VdO1xuXG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIGZvY3VzKGl0ZW0uYnV0dG9uKTtcbiAgICAgIGdvKFwiPlwiICsgbmV4dFBhZ2UpO1xuICAgICAgcHJldmVudChlLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXREaXJlY3Rpb24oKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMucGFnaW5hdGlvbkRpcmVjdGlvbiB8fCBvcHRpb25zLmRpcmVjdGlvbjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEF0KGluZGV4KSB7XG4gICAgcmV0dXJuIGl0ZW1zW0NvbnRyb2xsZXIudG9QYWdlKGluZGV4KV07XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgdmFyIHByZXYgPSBnZXRBdChnZXRJbmRleCh0cnVlKSk7XG4gICAgdmFyIGN1cnIgPSBnZXRBdChnZXRJbmRleCgpKTtcblxuICAgIGlmIChwcmV2KSB7XG4gICAgICB2YXIgYnV0dG9uID0gcHJldi5idXR0b247XG4gICAgICByZW1vdmVDbGFzcyhidXR0b24sIENMQVNTX0FDVElWRSk7XG4gICAgICByZW1vdmVBdHRyaWJ1dGUoYnV0dG9uLCBBUklBX1NFTEVDVEVEKTtcbiAgICAgIHNldEF0dHJpYnV0ZShidXR0b24sIFRBQl9JTkRFWCwgLTEpO1xuICAgIH1cblxuICAgIGlmIChjdXJyKSB7XG4gICAgICB2YXIgX2J1dHRvbiA9IGN1cnIuYnV0dG9uO1xuICAgICAgYWRkQ2xhc3MoX2J1dHRvbiwgQ0xBU1NfQUNUSVZFKTtcbiAgICAgIHNldEF0dHJpYnV0ZShfYnV0dG9uLCBBUklBX1NFTEVDVEVELCB0cnVlKTtcbiAgICAgIHNldEF0dHJpYnV0ZShfYnV0dG9uLCBUQUJfSU5ERVgsIFwiXCIpO1xuICAgIH1cblxuICAgIGVtaXQoRVZFTlRfUEFHSU5BVElPTl9VUERBVEVELCB7XG4gICAgICBsaXN0OiBsaXN0LFxuICAgICAgaXRlbXM6IGl0ZW1zXG4gICAgfSwgcHJldiwgY3Vycik7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGl0ZW1zOiBpdGVtcyxcbiAgICBtb3VudDogbW91bnQsXG4gICAgZGVzdHJveTogZGVzdHJveSxcbiAgICBnZXRBdDogZ2V0QXQsXG4gICAgdXBkYXRlOiB1cGRhdGVcbiAgfTtcbn1cblxudmFyIFRSSUdHRVJfS0VZUyA9IFtcIiBcIiwgXCJFbnRlclwiXTtcblxuZnVuY3Rpb24gU3luYyhTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgaXNOYXZpZ2F0aW9uID0gb3B0aW9ucy5pc05hdmlnYXRpb24sXG4gICAgICBzbGlkZUZvY3VzID0gb3B0aW9ucy5zbGlkZUZvY3VzO1xuICB2YXIgZXZlbnRzID0gW107XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgU3BsaWRlMi5zcGxpZGVzLmZvckVhY2goZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgaWYgKCF0YXJnZXQuaXNQYXJlbnQpIHtcbiAgICAgICAgc3luYyhTcGxpZGUyLCB0YXJnZXQuc3BsaWRlKTtcbiAgICAgICAgc3luYyh0YXJnZXQuc3BsaWRlLCBTcGxpZGUyKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChpc05hdmlnYXRpb24pIHtcbiAgICAgIG5hdmlnYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICBldmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LmRlc3Ryb3koKTtcbiAgICB9KTtcbiAgICBlbXB0eShldmVudHMpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3VudCgpIHtcbiAgICBkZXN0cm95KCk7XG4gICAgbW91bnQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN5bmMoc3BsaWRlLCB0YXJnZXQpIHtcbiAgICB2YXIgZXZlbnQgPSBFdmVudEludGVyZmFjZShzcGxpZGUpO1xuICAgIGV2ZW50Lm9uKEVWRU5UX01PVkUsIGZ1bmN0aW9uIChpbmRleCwgcHJldiwgZGVzdCkge1xuICAgICAgdGFyZ2V0LmdvKHRhcmdldC5pcyhMT09QKSA/IGRlc3QgOiBpbmRleCk7XG4gICAgfSk7XG4gICAgZXZlbnRzLnB1c2goZXZlbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gbmF2aWdhdGUoKSB7XG4gICAgdmFyIGV2ZW50ID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMik7XG4gICAgdmFyIG9uID0gZXZlbnQub247XG4gICAgb24oRVZFTlRfQ0xJQ0ssIG9uQ2xpY2spO1xuICAgIG9uKEVWRU5UX1NMSURFX0tFWURPV04sIG9uS2V5ZG93bik7XG4gICAgb24oW0VWRU5UX01PVU5URUQsIEVWRU5UX1VQREFURURdLCB1cGRhdGUpO1xuICAgIGV2ZW50cy5wdXNoKGV2ZW50KTtcbiAgICBldmVudC5lbWl0KEVWRU5UX05BVklHQVRJT05fTU9VTlRFRCwgU3BsaWRlMi5zcGxpZGVzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICBzZXRBdHRyaWJ1dGUoQ29tcG9uZW50czIuRWxlbWVudHMubGlzdCwgQVJJQV9PUklFTlRBVElPTiwgb3B0aW9ucy5kaXJlY3Rpb24gPT09IFRUQiA/IFwidmVydGljYWxcIiA6IFwiXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25DbGljayhTbGlkZSkge1xuICAgIFNwbGlkZTIuZ28oU2xpZGUuaW5kZXgpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25LZXlkb3duKFNsaWRlLCBlKSB7XG4gICAgaWYgKGluY2x1ZGVzKFRSSUdHRVJfS0VZUywgbm9ybWFsaXplS2V5KGUpKSkge1xuICAgICAgb25DbGljayhTbGlkZSk7XG4gICAgICBwcmV2ZW50KGUpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc2V0dXA6IGFwcGx5KENvbXBvbmVudHMyLk1lZGlhLnNldCwge1xuICAgICAgc2xpZGVGb2N1czogaXNVbmRlZmluZWQoc2xpZGVGb2N1cykgPyBpc05hdmlnYXRpb24gOiBzbGlkZUZvY3VzXG4gICAgfSwgdHJ1ZSksXG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3ksXG4gICAgcmVtb3VudDogcmVtb3VudFxuICB9O1xufVxuXG5mdW5jdGlvbiBXaGVlbChTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgX0V2ZW50SW50ZXJmYWNlMTIgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKSxcbiAgICAgIGJpbmQgPSBfRXZlbnRJbnRlcmZhY2UxMi5iaW5kO1xuXG4gIHZhciBsYXN0VGltZSA9IDA7XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgaWYgKG9wdGlvbnMud2hlZWwpIHtcbiAgICAgIGJpbmQoQ29tcG9uZW50czIuRWxlbWVudHMudHJhY2ssIFwid2hlZWxcIiwgb25XaGVlbCwgU0NST0xMX0xJU1RFTkVSX09QVElPTlMpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uV2hlZWwoZSkge1xuICAgIGlmIChlLmNhbmNlbGFibGUpIHtcbiAgICAgIHZhciBkZWx0YVkgPSBlLmRlbHRhWTtcbiAgICAgIHZhciBiYWNrd2FyZHMgPSBkZWx0YVkgPCAwO1xuICAgICAgdmFyIHRpbWVTdGFtcCA9IHRpbWVPZihlKTtcblxuICAgICAgdmFyIF9taW4gPSBvcHRpb25zLndoZWVsTWluVGhyZXNob2xkIHx8IDA7XG5cbiAgICAgIHZhciBzbGVlcCA9IG9wdGlvbnMud2hlZWxTbGVlcCB8fCAwO1xuXG4gICAgICBpZiAoYWJzKGRlbHRhWSkgPiBfbWluICYmIHRpbWVTdGFtcCAtIGxhc3RUaW1lID4gc2xlZXApIHtcbiAgICAgICAgU3BsaWRlMi5nbyhiYWNrd2FyZHMgPyBcIjxcIiA6IFwiPlwiKTtcbiAgICAgICAgbGFzdFRpbWUgPSB0aW1lU3RhbXA7XG4gICAgICB9XG5cbiAgICAgIHNob3VsZFByZXZlbnQoYmFja3dhcmRzKSAmJiBwcmV2ZW50KGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3VsZFByZXZlbnQoYmFja3dhcmRzKSB7XG4gICAgcmV0dXJuICFvcHRpb25zLnJlbGVhc2VXaGVlbCB8fCBTcGxpZGUyLnN0YXRlLmlzKE1PVklORykgfHwgQ29tcG9uZW50czIuQ29udHJvbGxlci5nZXRBZGphY2VudChiYWNrd2FyZHMpICE9PSAtMTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50XG4gIH07XG59XG5cbnZhciBTUl9SRU1PVkFMX0RFTEFZID0gOTA7XG5cbmZ1bmN0aW9uIExpdmUoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIF9FdmVudEludGVyZmFjZTEzID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMiksXG4gICAgICBvbiA9IF9FdmVudEludGVyZmFjZTEzLm9uO1xuXG4gIHZhciB0cmFjayA9IENvbXBvbmVudHMyLkVsZW1lbnRzLnRyYWNrO1xuICB2YXIgZW5hYmxlZCA9IG9wdGlvbnMubGl2ZSAmJiAhb3B0aW9ucy5pc05hdmlnYXRpb247XG4gIHZhciBzciA9IGNyZWF0ZShcInNwYW5cIiwgQ0xBU1NfU1IpO1xuICB2YXIgaW50ZXJ2YWwgPSBSZXF1ZXN0SW50ZXJ2YWwoU1JfUkVNT1ZBTF9ERUxBWSwgYXBwbHkodG9nZ2xlLCBmYWxzZSkpO1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIGlmIChlbmFibGVkKSB7XG4gICAgICBkaXNhYmxlKCFDb21wb25lbnRzMi5BdXRvcGxheS5pc1BhdXNlZCgpKTtcbiAgICAgIHNldEF0dHJpYnV0ZSh0cmFjaywgQVJJQV9BVE9NSUMsIHRydWUpO1xuICAgICAgc3IudGV4dENvbnRlbnQgPSBcIlxcdTIwMjZcIjtcbiAgICAgIG9uKEVWRU5UX0FVVE9QTEFZX1BMQVksIGFwcGx5KGRpc2FibGUsIHRydWUpKTtcbiAgICAgIG9uKEVWRU5UX0FVVE9QTEFZX1BBVVNFLCBhcHBseShkaXNhYmxlLCBmYWxzZSkpO1xuICAgICAgb24oW0VWRU5UX01PVkVELCBFVkVOVF9TQ1JPTExFRF0sIGFwcGx5KHRvZ2dsZSwgdHJ1ZSkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRvZ2dsZShhY3RpdmUpIHtcbiAgICBzZXRBdHRyaWJ1dGUodHJhY2ssIEFSSUFfQlVTWSwgYWN0aXZlKTtcblxuICAgIGlmIChhY3RpdmUpIHtcbiAgICAgIGFwcGVuZCh0cmFjaywgc3IpO1xuICAgICAgaW50ZXJ2YWwuc3RhcnQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKHNyKTtcbiAgICAgIGludGVydmFsLmNhbmNlbCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgcmVtb3ZlQXR0cmlidXRlKHRyYWNrLCBbQVJJQV9MSVZFLCBBUklBX0FUT01JQywgQVJJQV9CVVNZXSk7XG4gICAgcmVtb3ZlKHNyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc2FibGUoZGlzYWJsZWQpIHtcbiAgICBpZiAoZW5hYmxlZCkge1xuICAgICAgc2V0QXR0cmlidXRlKHRyYWNrLCBBUklBX0xJVkUsIGRpc2FibGVkID8gXCJvZmZcIiA6IFwicG9saXRlXCIpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGRpc2FibGU6IGRpc2FibGUsXG4gICAgZGVzdHJveTogZGVzdHJveVxuICB9O1xufVxuXG52YXIgQ29tcG9uZW50Q29uc3RydWN0b3JzID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIE1lZGlhOiBNZWRpYSxcbiAgRGlyZWN0aW9uOiBEaXJlY3Rpb24sXG4gIEVsZW1lbnRzOiBFbGVtZW50cyxcbiAgU2xpZGVzOiBTbGlkZXMsXG4gIExheW91dDogTGF5b3V0LFxuICBDbG9uZXM6IENsb25lcyxcbiAgTW92ZTogTW92ZSxcbiAgQ29udHJvbGxlcjogQ29udHJvbGxlcixcbiAgQXJyb3dzOiBBcnJvd3MsXG4gIEF1dG9wbGF5OiBBdXRvcGxheSxcbiAgQ292ZXI6IENvdmVyLFxuICBTY3JvbGw6IFNjcm9sbCxcbiAgRHJhZzogRHJhZyxcbiAgS2V5Ym9hcmQ6IEtleWJvYXJkLFxuICBMYXp5TG9hZDogTGF6eUxvYWQsXG4gIFBhZ2luYXRpb246IFBhZ2luYXRpb24sXG4gIFN5bmM6IFN5bmMsXG4gIFdoZWVsOiBXaGVlbCxcbiAgTGl2ZTogTGl2ZVxufSk7XG52YXIgSTE4TiA9IHtcbiAgcHJldjogXCJQcmV2aW91cyBzbGlkZVwiLFxuICBuZXh0OiBcIk5leHQgc2xpZGVcIixcbiAgZmlyc3Q6IFwiR28gdG8gZmlyc3Qgc2xpZGVcIixcbiAgbGFzdDogXCJHbyB0byBsYXN0IHNsaWRlXCIsXG4gIHNsaWRlWDogXCJHbyB0byBzbGlkZSAlc1wiLFxuICBwYWdlWDogXCJHbyB0byBwYWdlICVzXCIsXG4gIHBsYXk6IFwiU3RhcnQgYXV0b3BsYXlcIixcbiAgcGF1c2U6IFwiUGF1c2UgYXV0b3BsYXlcIixcbiAgY2Fyb3VzZWw6IFwiY2Fyb3VzZWxcIixcbiAgc2xpZGU6IFwic2xpZGVcIixcbiAgc2VsZWN0OiBcIlNlbGVjdCBhIHNsaWRlIHRvIHNob3dcIixcbiAgc2xpZGVMYWJlbDogXCIlcyBvZiAlc1wiXG59O1xudmFyIERFRkFVTFRTID0ge1xuICB0eXBlOiBcInNsaWRlXCIsXG4gIHJvbGU6IFwicmVnaW9uXCIsXG4gIHNwZWVkOiA0MDAsXG4gIHBlclBhZ2U6IDEsXG4gIGNsb25lU3RhdHVzOiB0cnVlLFxuICBhcnJvd3M6IHRydWUsXG4gIHBhZ2luYXRpb246IHRydWUsXG4gIHBhZ2luYXRpb25LZXlib2FyZDogdHJ1ZSxcbiAgaW50ZXJ2YWw6IDVlMyxcbiAgcGF1c2VPbkhvdmVyOiB0cnVlLFxuICBwYXVzZU9uRm9jdXM6IHRydWUsXG4gIHJlc2V0UHJvZ3Jlc3M6IHRydWUsXG4gIGVhc2luZzogXCJjdWJpYy1iZXppZXIoMC4yNSwgMSwgMC41LCAxKVwiLFxuICBkcmFnOiB0cnVlLFxuICBkaXJlY3Rpb246IFwibHRyXCIsXG4gIHRyaW1TcGFjZTogdHJ1ZSxcbiAgZm9jdXNhYmxlTm9kZXM6IFwiYSwgYnV0dG9uLCB0ZXh0YXJlYSwgaW5wdXQsIHNlbGVjdCwgaWZyYW1lXCIsXG4gIGxpdmU6IHRydWUsXG4gIGNsYXNzZXM6IENMQVNTRVMsXG4gIGkxOG46IEkxOE4sXG4gIHJlZHVjZWRNb3Rpb246IHtcbiAgICBzcGVlZDogMCxcbiAgICByZXdpbmRTcGVlZDogMCxcbiAgICBhdXRvcGxheTogXCJwYXVzZVwiXG4gIH1cbn07XG5cbmZ1bmN0aW9uIEZhZGUoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIFNsaWRlcyA9IENvbXBvbmVudHMyLlNsaWRlcztcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBFdmVudEludGVyZmFjZShTcGxpZGUyKS5vbihbRVZFTlRfTU9VTlRFRCwgRVZFTlRfUkVGUkVTSF0sIGluaXQpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICBTbGlkZXMuZm9yRWFjaChmdW5jdGlvbiAoU2xpZGUpIHtcbiAgICAgIFNsaWRlLnN0eWxlKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlWCgtXCIgKyAxMDAgKiBTbGlkZS5pbmRleCArIFwiJSlcIik7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydChpbmRleCwgZG9uZSkge1xuICAgIFNsaWRlcy5zdHlsZShcInRyYW5zaXRpb25cIiwgXCJvcGFjaXR5IFwiICsgb3B0aW9ucy5zcGVlZCArIFwibXMgXCIgKyBvcHRpb25zLmVhc2luZyk7XG4gICAgbmV4dFRpY2soZG9uZSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1vdW50OiBtb3VudCxcbiAgICBzdGFydDogc3RhcnQsXG4gICAgY2FuY2VsOiBub29wXG4gIH07XG59XG5cbmZ1bmN0aW9uIFNsaWRlKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBNb3ZlID0gQ29tcG9uZW50czIuTW92ZSxcbiAgICAgIENvbnRyb2xsZXIgPSBDb21wb25lbnRzMi5Db250cm9sbGVyLFxuICAgICAgU2Nyb2xsID0gQ29tcG9uZW50czIuU2Nyb2xsO1xuICB2YXIgbGlzdCA9IENvbXBvbmVudHMyLkVsZW1lbnRzLmxpc3Q7XG4gIHZhciB0cmFuc2l0aW9uID0gYXBwbHkoc3R5bGUsIGxpc3QsIFwidHJhbnNpdGlvblwiKTtcbiAgdmFyIGVuZENhbGxiYWNrO1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpLmJpbmQobGlzdCwgXCJ0cmFuc2l0aW9uZW5kXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoZS50YXJnZXQgPT09IGxpc3QgJiYgZW5kQ2FsbGJhY2spIHtcbiAgICAgICAgY2FuY2VsKCk7XG4gICAgICAgIGVuZENhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydChpbmRleCwgZG9uZSkge1xuICAgIHZhciBkZXN0aW5hdGlvbiA9IE1vdmUudG9Qb3NpdGlvbihpbmRleCwgdHJ1ZSk7XG4gICAgdmFyIHBvc2l0aW9uID0gTW92ZS5nZXRQb3NpdGlvbigpO1xuICAgIHZhciBzcGVlZCA9IGdldFNwZWVkKGluZGV4KTtcblxuICAgIGlmIChhYnMoZGVzdGluYXRpb24gLSBwb3NpdGlvbikgPj0gMSAmJiBzcGVlZCA+PSAxKSB7XG4gICAgICBpZiAob3B0aW9ucy51c2VTY3JvbGwpIHtcbiAgICAgICAgU2Nyb2xsLnNjcm9sbChkZXN0aW5hdGlvbiwgc3BlZWQsIGZhbHNlLCBkb25lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyYW5zaXRpb24oXCJ0cmFuc2Zvcm0gXCIgKyBzcGVlZCArIFwibXMgXCIgKyBvcHRpb25zLmVhc2luZyk7XG4gICAgICAgIE1vdmUudHJhbnNsYXRlKGRlc3RpbmF0aW9uLCB0cnVlKTtcbiAgICAgICAgZW5kQ2FsbGJhY2sgPSBkb25lO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBNb3ZlLmp1bXAoaW5kZXgpO1xuICAgICAgZG9uZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICB0cmFuc2l0aW9uKFwiXCIpO1xuICAgIFNjcm9sbC5jYW5jZWwoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFNwZWVkKGluZGV4KSB7XG4gICAgdmFyIHJld2luZFNwZWVkID0gb3B0aW9ucy5yZXdpbmRTcGVlZDtcblxuICAgIGlmIChTcGxpZGUyLmlzKFNMSURFKSAmJiByZXdpbmRTcGVlZCkge1xuICAgICAgdmFyIHByZXYgPSBDb250cm9sbGVyLmdldEluZGV4KHRydWUpO1xuICAgICAgdmFyIGVuZCA9IENvbnRyb2xsZXIuZ2V0RW5kKCk7XG5cbiAgICAgIGlmIChwcmV2ID09PSAwICYmIGluZGV4ID49IGVuZCB8fCBwcmV2ID49IGVuZCAmJiBpbmRleCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gcmV3aW5kU3BlZWQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG9wdGlvbnMuc3BlZWQ7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1vdW50OiBtb3VudCxcbiAgICBzdGFydDogc3RhcnQsXG4gICAgY2FuY2VsOiBjYW5jZWxcbiAgfTtcbn1cblxudmFyIF9TcGxpZGUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBfU3BsaWRlKHRhcmdldCwgb3B0aW9ucykge1xuICAgIHRoaXMuZXZlbnQgPSBFdmVudEludGVyZmFjZSgpO1xuICAgIHRoaXMuQ29tcG9uZW50cyA9IHt9O1xuICAgIHRoaXMuc3RhdGUgPSBTdGF0ZShDUkVBVEVEKTtcbiAgICB0aGlzLnNwbGlkZXMgPSBbXTtcbiAgICB0aGlzLl9vID0ge307XG4gICAgdGhpcy5fRSA9IHt9O1xuICAgIHZhciByb290ID0gaXNTdHJpbmcodGFyZ2V0KSA/IHF1ZXJ5KGRvY3VtZW50LCB0YXJnZXQpIDogdGFyZ2V0O1xuICAgIGFzc2VydChyb290LCByb290ICsgXCIgaXMgaW52YWxpZC5cIik7XG4gICAgdGhpcy5yb290ID0gcm9vdDtcbiAgICBvcHRpb25zID0gbWVyZ2Uoe1xuICAgICAgbGFiZWw6IGdldEF0dHJpYnV0ZShyb290LCBBUklBX0xBQkVMKSB8fCBcIlwiLFxuICAgICAgbGFiZWxsZWRieTogZ2V0QXR0cmlidXRlKHJvb3QsIEFSSUFfTEFCRUxMRURCWSkgfHwgXCJcIlxuICAgIH0sIERFRkFVTFRTLCBfU3BsaWRlLmRlZmF1bHRzLCBvcHRpb25zIHx8IHt9KTtcblxuICAgIHRyeSB7XG4gICAgICBtZXJnZShvcHRpb25zLCBKU09OLnBhcnNlKGdldEF0dHJpYnV0ZShyb290LCBEQVRBX0FUVFJJQlVURSkpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBhc3NlcnQoZmFsc2UsIFwiSW52YWxpZCBKU09OXCIpO1xuICAgIH1cblxuICAgIHRoaXMuX28gPSBPYmplY3QuY3JlYXRlKG1lcmdlKHt9LCBvcHRpb25zKSk7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gX1NwbGlkZS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLm1vdW50ID0gZnVuY3Rpb24gbW91bnQoRXh0ZW5zaW9ucywgVHJhbnNpdGlvbikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlLFxuICAgICAgICBDb21wb25lbnRzMiA9IHRoaXMuQ29tcG9uZW50cztcbiAgICBhc3NlcnQoc3RhdGUuaXMoW0NSRUFURUQsIERFU1RST1lFRF0pLCBcIkFscmVhZHkgbW91bnRlZCFcIik7XG4gICAgc3RhdGUuc2V0KENSRUFURUQpO1xuICAgIHRoaXMuX0MgPSBDb21wb25lbnRzMjtcbiAgICB0aGlzLl9UID0gVHJhbnNpdGlvbiB8fCB0aGlzLl9UIHx8ICh0aGlzLmlzKEZBREUpID8gRmFkZSA6IFNsaWRlKTtcbiAgICB0aGlzLl9FID0gRXh0ZW5zaW9ucyB8fCB0aGlzLl9FO1xuICAgIHZhciBDb25zdHJ1Y3RvcnMgPSBhc3NpZ24oe30sIENvbXBvbmVudENvbnN0cnVjdG9ycywgdGhpcy5fRSwge1xuICAgICAgVHJhbnNpdGlvbjogdGhpcy5fVFxuICAgIH0pO1xuICAgIGZvck93bihDb25zdHJ1Y3RvcnMsIGZ1bmN0aW9uIChDb21wb25lbnQsIGtleSkge1xuICAgICAgdmFyIGNvbXBvbmVudCA9IENvbXBvbmVudChfdGhpcywgQ29tcG9uZW50czIsIF90aGlzLl9vKTtcbiAgICAgIENvbXBvbmVudHMyW2tleV0gPSBjb21wb25lbnQ7XG4gICAgICBjb21wb25lbnQuc2V0dXAgJiYgY29tcG9uZW50LnNldHVwKCk7XG4gICAgfSk7XG4gICAgZm9yT3duKENvbXBvbmVudHMyLCBmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICBjb21wb25lbnQubW91bnQgJiYgY29tcG9uZW50Lm1vdW50KCk7XG4gICAgfSk7XG4gICAgdGhpcy5lbWl0KEVWRU5UX01PVU5URUQpO1xuICAgIGFkZENsYXNzKHRoaXMucm9vdCwgQ0xBU1NfSU5JVElBTElaRUQpO1xuICAgIHN0YXRlLnNldChJRExFKTtcbiAgICB0aGlzLmVtaXQoRVZFTlRfUkVBRFkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIF9wcm90by5zeW5jID0gZnVuY3Rpb24gc3luYyhzcGxpZGUpIHtcbiAgICB0aGlzLnNwbGlkZXMucHVzaCh7XG4gICAgICBzcGxpZGU6IHNwbGlkZVxuICAgIH0pO1xuICAgIHNwbGlkZS5zcGxpZGVzLnB1c2goe1xuICAgICAgc3BsaWRlOiB0aGlzLFxuICAgICAgaXNQYXJlbnQ6IHRydWVcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLnN0YXRlLmlzKElETEUpKSB7XG4gICAgICB0aGlzLl9DLlN5bmMucmVtb3VudCgpO1xuXG4gICAgICBzcGxpZGUuQ29tcG9uZW50cy5TeW5jLnJlbW91bnQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBfcHJvdG8uZ28gPSBmdW5jdGlvbiBnbyhjb250cm9sKSB7XG4gICAgdGhpcy5fQy5Db250cm9sbGVyLmdvKGNvbnRyb2wpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgX3Byb3RvLm9uID0gZnVuY3Rpb24gb24oZXZlbnRzLCBjYWxsYmFjaykge1xuICAgIHRoaXMuZXZlbnQub24oZXZlbnRzLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgX3Byb3RvLm9mZiA9IGZ1bmN0aW9uIG9mZihldmVudHMpIHtcbiAgICB0aGlzLmV2ZW50Lm9mZihldmVudHMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIF9wcm90by5lbWl0ID0gZnVuY3Rpb24gZW1pdChldmVudCkge1xuICAgIHZhciBfdGhpcyRldmVudDtcblxuICAgIChfdGhpcyRldmVudCA9IHRoaXMuZXZlbnQpLmVtaXQuYXBwbHkoX3RoaXMkZXZlbnQsIFtldmVudF0uY29uY2F0KHNsaWNlKGFyZ3VtZW50cywgMSkpKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIF9wcm90by5hZGQgPSBmdW5jdGlvbiBhZGQoc2xpZGVzLCBpbmRleCkge1xuICAgIHRoaXMuX0MuU2xpZGVzLmFkZChzbGlkZXMsIGluZGV4KTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIF9wcm90by5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUobWF0Y2hlcikge1xuICAgIHRoaXMuX0MuU2xpZGVzLnJlbW92ZShtYXRjaGVyKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIF9wcm90by5pcyA9IGZ1bmN0aW9uIGlzKHR5cGUpIHtcbiAgICByZXR1cm4gdGhpcy5fby50eXBlID09PSB0eXBlO1xuICB9O1xuXG4gIF9wcm90by5yZWZyZXNoID0gZnVuY3Rpb24gcmVmcmVzaCgpIHtcbiAgICB0aGlzLmVtaXQoRVZFTlRfUkVGUkVTSCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgX3Byb3RvLmRlc3Ryb3kgPSBmdW5jdGlvbiBkZXN0cm95KGNvbXBsZXRlbHkpIHtcbiAgICBpZiAoY29tcGxldGVseSA9PT0gdm9pZCAwKSB7XG4gICAgICBjb21wbGV0ZWx5ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgZXZlbnQgPSB0aGlzLmV2ZW50LFxuICAgICAgICBzdGF0ZSA9IHRoaXMuc3RhdGU7XG5cbiAgICBpZiAoc3RhdGUuaXMoQ1JFQVRFRCkpIHtcbiAgICAgIEV2ZW50SW50ZXJmYWNlKHRoaXMpLm9uKEVWRU5UX1JFQURZLCB0aGlzLmRlc3Ryb3kuYmluZCh0aGlzLCBjb21wbGV0ZWx5KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvck93bih0aGlzLl9DLCBmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICAgIGNvbXBvbmVudC5kZXN0cm95ICYmIGNvbXBvbmVudC5kZXN0cm95KGNvbXBsZXRlbHkpO1xuICAgICAgfSwgdHJ1ZSk7XG4gICAgICBldmVudC5lbWl0KEVWRU5UX0RFU1RST1kpO1xuICAgICAgZXZlbnQuZGVzdHJveSgpO1xuICAgICAgY29tcGxldGVseSAmJiBlbXB0eSh0aGlzLnNwbGlkZXMpO1xuICAgICAgc3RhdGUuc2V0KERFU1RST1lFRCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgX2NyZWF0ZUNsYXNzKF9TcGxpZGUsIFt7XG4gICAga2V5OiBcIm9wdGlvbnNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9vO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQob3B0aW9ucykge1xuICAgICAgdGhpcy5fQy5NZWRpYS5zZXQob3B0aW9ucywgdHJ1ZSwgdHJ1ZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImxlbmd0aFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX0MuU2xpZGVzLmdldExlbmd0aCh0cnVlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5kZXhcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9DLkNvbnRyb2xsZXIuZ2V0SW5kZXgoKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gX1NwbGlkZTtcbn0oKTtcblxudmFyIFNwbGlkZSA9IF9TcGxpZGU7XG5TcGxpZGUuZGVmYXVsdHMgPSB7fTtcblNwbGlkZS5TVEFURVMgPSBTVEFURVM7XG52YXIgQ0xBU1NfUkVOREVSRUQgPSBcImlzLXJlbmRlcmVkXCI7XG52YXIgUkVOREVSRVJfREVGQVVMVF9DT05GSUcgPSB7XG4gIGxpc3RUYWc6IFwidWxcIixcbiAgc2xpZGVUYWc6IFwibGlcIlxufTtcblxudmFyIFN0eWxlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU3R5bGUoaWQsIG9wdGlvbnMpIHtcbiAgICB0aGlzLnN0eWxlcyA9IHt9O1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgdmFyIF9wcm90bzIgPSBTdHlsZS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvMi5ydWxlID0gZnVuY3Rpb24gcnVsZShzZWxlY3RvciwgcHJvcCwgdmFsdWUsIGJyZWFrcG9pbnQpIHtcbiAgICBicmVha3BvaW50ID0gYnJlYWtwb2ludCB8fCBcImRlZmF1bHRcIjtcbiAgICB2YXIgc2VsZWN0b3JzID0gdGhpcy5zdHlsZXNbYnJlYWtwb2ludF0gPSB0aGlzLnN0eWxlc1ticmVha3BvaW50XSB8fCB7fTtcbiAgICB2YXIgc3R5bGVzID0gc2VsZWN0b3JzW3NlbGVjdG9yXSA9IHNlbGVjdG9yc1tzZWxlY3Rvcl0gfHwge307XG4gICAgc3R5bGVzW3Byb3BdID0gdmFsdWU7XG4gIH07XG5cbiAgX3Byb3RvMi5idWlsZCA9IGZ1bmN0aW9uIGJ1aWxkKCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIGNzcyA9IFwiXCI7XG5cbiAgICBpZiAodGhpcy5zdHlsZXMuZGVmYXVsdCkge1xuICAgICAgY3NzICs9IHRoaXMuYnVpbGRTZWxlY3RvcnModGhpcy5zdHlsZXMuZGVmYXVsdCk7XG4gICAgfVxuXG4gICAgT2JqZWN0LmtleXModGhpcy5zdHlsZXMpLnNvcnQoZnVuY3Rpb24gKG4sIG0pIHtcbiAgICAgIHJldHVybiBfdGhpczIub3B0aW9ucy5tZWRpYVF1ZXJ5ID09PSBcIm1pblwiID8gK24gLSArbSA6ICttIC0gK247XG4gICAgfSkuZm9yRWFjaChmdW5jdGlvbiAoYnJlYWtwb2ludCkge1xuICAgICAgaWYgKGJyZWFrcG9pbnQgIT09IFwiZGVmYXVsdFwiKSB7XG4gICAgICAgIGNzcyArPSBcIkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IFwiICsgYnJlYWtwb2ludCArIFwicHgpIHtcIjtcbiAgICAgICAgY3NzICs9IF90aGlzMi5idWlsZFNlbGVjdG9ycyhfdGhpczIuc3R5bGVzW2JyZWFrcG9pbnRdKTtcbiAgICAgICAgY3NzICs9IFwifVwiO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjc3M7XG4gIH07XG5cbiAgX3Byb3RvMi5idWlsZFNlbGVjdG9ycyA9IGZ1bmN0aW9uIGJ1aWxkU2VsZWN0b3JzKHNlbGVjdG9ycykge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgdmFyIGNzcyA9IFwiXCI7XG4gICAgZm9yT3duKHNlbGVjdG9ycywgZnVuY3Rpb24gKHN0eWxlcywgc2VsZWN0b3IpIHtcbiAgICAgIHNlbGVjdG9yID0gKFwiI1wiICsgX3RoaXMzLmlkICsgXCIgXCIgKyBzZWxlY3RvcikudHJpbSgpO1xuICAgICAgY3NzICs9IHNlbGVjdG9yICsgXCIge1wiO1xuICAgICAgZm9yT3duKHN0eWxlcywgZnVuY3Rpb24gKHZhbHVlLCBwcm9wKSB7XG4gICAgICAgIGlmICh2YWx1ZSB8fCB2YWx1ZSA9PT0gMCkge1xuICAgICAgICAgIGNzcyArPSBwcm9wICsgXCI6IFwiICsgdmFsdWUgKyBcIjtcIjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjc3MgKz0gXCJ9XCI7XG4gICAgfSk7XG4gICAgcmV0dXJuIGNzcztcbiAgfTtcblxuICByZXR1cm4gU3R5bGU7XG59KCk7XG5cbnZhciBTcGxpZGVSZW5kZXJlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFNwbGlkZVJlbmRlcmVyKGNvbnRlbnRzLCBvcHRpb25zLCBjb25maWcsIGRlZmF1bHRzKSB7XG4gICAgdGhpcy5zbGlkZXMgPSBbXTtcbiAgICB0aGlzLm9wdGlvbnMgPSB7fTtcbiAgICB0aGlzLmJyZWFrcG9pbnRzID0gW107XG4gICAgbWVyZ2UoREVGQVVMVFMsIGRlZmF1bHRzIHx8IHt9KTtcbiAgICBtZXJnZShtZXJnZSh0aGlzLm9wdGlvbnMsIERFRkFVTFRTKSwgb3B0aW9ucyB8fCB7fSk7XG4gICAgdGhpcy5jb250ZW50cyA9IGNvbnRlbnRzO1xuICAgIHRoaXMuY29uZmlnID0gYXNzaWduKHt9LCBSRU5ERVJFUl9ERUZBVUxUX0NPTkZJRywgY29uZmlnIHx8IHt9KTtcbiAgICB0aGlzLmlkID0gdGhpcy5jb25maWcuaWQgfHwgdW5pcXVlSWQoXCJzcGxpZGVcIik7XG4gICAgdGhpcy5TdHlsZSA9IG5ldyBTdHlsZSh0aGlzLmlkLCB0aGlzLm9wdGlvbnMpO1xuICAgIHRoaXMuRGlyZWN0aW9uID0gRGlyZWN0aW9uKG51bGwsIG51bGwsIHRoaXMub3B0aW9ucyk7XG4gICAgYXNzZXJ0KHRoaXMuY29udGVudHMubGVuZ3RoLCBcIlByb3ZpZGUgYXQgbGVhc3QgMSBjb250ZW50LlwiKTtcbiAgICB0aGlzLmluaXQoKTtcbiAgfVxuXG4gIFNwbGlkZVJlbmRlcmVyLmNsZWFuID0gZnVuY3Rpb24gY2xlYW4oc3BsaWRlKSB7XG4gICAgdmFyIF9FdmVudEludGVyZmFjZTE0ID0gRXZlbnRJbnRlcmZhY2Uoc3BsaWRlKSxcbiAgICAgICAgb24gPSBfRXZlbnRJbnRlcmZhY2UxNC5vbjtcblxuICAgIHZhciByb290ID0gc3BsaWRlLnJvb3Q7XG4gICAgdmFyIGNsb25lcyA9IHF1ZXJ5QWxsKHJvb3QsIFwiLlwiICsgQ0xBU1NfQ0xPTkUpO1xuICAgIG9uKEVWRU5UX01PVU5URUQsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlbW92ZShjaGlsZChyb290LCBcInN0eWxlXCIpKTtcbiAgICB9KTtcbiAgICByZW1vdmUoY2xvbmVzKTtcbiAgfTtcblxuICB2YXIgX3Byb3RvMyA9IFNwbGlkZVJlbmRlcmVyLnByb3RvdHlwZTtcblxuICBfcHJvdG8zLmluaXQgPSBmdW5jdGlvbiBpbml0KCkge1xuICAgIHRoaXMucGFyc2VCcmVha3BvaW50cygpO1xuICAgIHRoaXMuaW5pdFNsaWRlcygpO1xuICAgIHRoaXMucmVnaXN0ZXJSb290U3R5bGVzKCk7XG4gICAgdGhpcy5yZWdpc3RlclRyYWNrU3R5bGVzKCk7XG4gICAgdGhpcy5yZWdpc3RlclNsaWRlU3R5bGVzKCk7XG4gICAgdGhpcy5yZWdpc3Rlckxpc3RTdHlsZXMoKTtcbiAgfTtcblxuICBfcHJvdG8zLmluaXRTbGlkZXMgPSBmdW5jdGlvbiBpbml0U2xpZGVzKCkge1xuICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgcHVzaCh0aGlzLnNsaWRlcywgdGhpcy5jb250ZW50cy5tYXAoZnVuY3Rpb24gKGNvbnRlbnQsIGluZGV4KSB7XG4gICAgICBjb250ZW50ID0gaXNTdHJpbmcoY29udGVudCkgPyB7XG4gICAgICAgIGh0bWw6IGNvbnRlbnRcbiAgICAgIH0gOiBjb250ZW50O1xuICAgICAgY29udGVudC5zdHlsZXMgPSBjb250ZW50LnN0eWxlcyB8fCB7fTtcbiAgICAgIGNvbnRlbnQuYXR0cnMgPSBjb250ZW50LmF0dHJzIHx8IHt9O1xuXG4gICAgICBfdGhpczQuY292ZXIoY29udGVudCk7XG5cbiAgICAgIHZhciBjbGFzc2VzID0gX3RoaXM0Lm9wdGlvbnMuY2xhc3Nlcy5zbGlkZSArIFwiIFwiICsgKGluZGV4ID09PSAwID8gQ0xBU1NfQUNUSVZFIDogXCJcIik7XG4gICAgICBhc3NpZ24oY29udGVudC5hdHRycywge1xuICAgICAgICBjbGFzczogKGNsYXNzZXMgKyBcIiBcIiArIChjb250ZW50LmF0dHJzLmNsYXNzIHx8IFwiXCIpKS50cmltKCksXG4gICAgICAgIHN0eWxlOiBfdGhpczQuYnVpbGRTdHlsZXMoY29udGVudC5zdHlsZXMpXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pKTtcblxuICAgIGlmICh0aGlzLmlzTG9vcCgpKSB7XG4gICAgICB0aGlzLmdlbmVyYXRlQ2xvbmVzKHRoaXMuc2xpZGVzKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvMy5yZWdpc3RlclJvb3RTdHlsZXMgPSBmdW5jdGlvbiByZWdpc3RlclJvb3RTdHlsZXMoKSB7XG4gICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICB0aGlzLmJyZWFrcG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKF9yZWYyKSB7XG4gICAgICB2YXIgd2lkdGggPSBfcmVmMlswXSxcbiAgICAgICAgICBvcHRpb25zID0gX3JlZjJbMV07XG5cbiAgICAgIF90aGlzNS5TdHlsZS5ydWxlKFwiIFwiLCBcIm1heC13aWR0aFwiLCB1bml0KG9wdGlvbnMud2lkdGgpLCB3aWR0aCk7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvMy5yZWdpc3RlclRyYWNrU3R5bGVzID0gZnVuY3Rpb24gcmVnaXN0ZXJUcmFja1N0eWxlcygpIHtcbiAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgIHZhciBTdHlsZTIgPSB0aGlzLlN0eWxlO1xuICAgIHZhciBzZWxlY3RvciA9IFwiLlwiICsgQ0xBU1NfVFJBQ0s7XG4gICAgdGhpcy5icmVha3BvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmMykge1xuICAgICAgdmFyIHdpZHRoID0gX3JlZjNbMF0sXG4gICAgICAgICAgb3B0aW9ucyA9IF9yZWYzWzFdO1xuICAgICAgU3R5bGUyLnJ1bGUoc2VsZWN0b3IsIF90aGlzNi5yZXNvbHZlKFwicGFkZGluZ0xlZnRcIiksIF90aGlzNi5jc3NQYWRkaW5nKG9wdGlvbnMsIGZhbHNlKSwgd2lkdGgpO1xuICAgICAgU3R5bGUyLnJ1bGUoc2VsZWN0b3IsIF90aGlzNi5yZXNvbHZlKFwicGFkZGluZ1JpZ2h0XCIpLCBfdGhpczYuY3NzUGFkZGluZyhvcHRpb25zLCB0cnVlKSwgd2lkdGgpO1xuICAgICAgU3R5bGUyLnJ1bGUoc2VsZWN0b3IsIFwiaGVpZ2h0XCIsIF90aGlzNi5jc3NUcmFja0hlaWdodChvcHRpb25zKSwgd2lkdGgpO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90bzMucmVnaXN0ZXJMaXN0U3R5bGVzID0gZnVuY3Rpb24gcmVnaXN0ZXJMaXN0U3R5bGVzKCkge1xuICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgdmFyIFN0eWxlMiA9IHRoaXMuU3R5bGU7XG4gICAgdmFyIHNlbGVjdG9yID0gXCIuXCIgKyBDTEFTU19MSVNUO1xuICAgIHRoaXMuYnJlYWtwb2ludHMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZjQpIHtcbiAgICAgIHZhciB3aWR0aCA9IF9yZWY0WzBdLFxuICAgICAgICAgIG9wdGlvbnMgPSBfcmVmNFsxXTtcbiAgICAgIFN0eWxlMi5ydWxlKHNlbGVjdG9yLCBcInRyYW5zZm9ybVwiLCBfdGhpczcuYnVpbGRUcmFuc2xhdGUob3B0aW9ucyksIHdpZHRoKTtcblxuICAgICAgaWYgKCFfdGhpczcuY3NzU2xpZGVIZWlnaHQob3B0aW9ucykpIHtcbiAgICAgICAgU3R5bGUyLnJ1bGUoc2VsZWN0b3IsIFwiYXNwZWN0LXJhdGlvXCIsIF90aGlzNy5jc3NBc3BlY3RSYXRpbyhvcHRpb25zKSwgd2lkdGgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90bzMucmVnaXN0ZXJTbGlkZVN0eWxlcyA9IGZ1bmN0aW9uIHJlZ2lzdGVyU2xpZGVTdHlsZXMoKSB7XG4gICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cbiAgICB2YXIgU3R5bGUyID0gdGhpcy5TdHlsZTtcbiAgICB2YXIgc2VsZWN0b3IgPSBcIi5cIiArIENMQVNTX1NMSURFO1xuICAgIHRoaXMuYnJlYWtwb2ludHMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZjUpIHtcbiAgICAgIHZhciB3aWR0aCA9IF9yZWY1WzBdLFxuICAgICAgICAgIG9wdGlvbnMgPSBfcmVmNVsxXTtcbiAgICAgIFN0eWxlMi5ydWxlKHNlbGVjdG9yLCBcIndpZHRoXCIsIF90aGlzOC5jc3NTbGlkZVdpZHRoKG9wdGlvbnMpLCB3aWR0aCk7XG4gICAgICBTdHlsZTIucnVsZShzZWxlY3RvciwgXCJoZWlnaHRcIiwgX3RoaXM4LmNzc1NsaWRlSGVpZ2h0KG9wdGlvbnMpIHx8IFwiMTAwJVwiLCB3aWR0aCk7XG4gICAgICBTdHlsZTIucnVsZShzZWxlY3RvciwgX3RoaXM4LnJlc29sdmUoXCJtYXJnaW5SaWdodFwiKSwgdW5pdChvcHRpb25zLmdhcCkgfHwgXCIwcHhcIiwgd2lkdGgpO1xuICAgICAgU3R5bGUyLnJ1bGUoc2VsZWN0b3IgKyBcIiA+IGltZ1wiLCBcImRpc3BsYXlcIiwgb3B0aW9ucy5jb3ZlciA/IFwibm9uZVwiIDogXCJpbmxpbmVcIiwgd2lkdGgpO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90bzMuYnVpbGRUcmFuc2xhdGUgPSBmdW5jdGlvbiBidWlsZFRyYW5zbGF0ZShvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzJERpcmVjdGlvbiA9IHRoaXMuRGlyZWN0aW9uLFxuICAgICAgICByZXNvbHZlID0gX3RoaXMkRGlyZWN0aW9uLnJlc29sdmUsXG4gICAgICAgIG9yaWVudCA9IF90aGlzJERpcmVjdGlvbi5vcmllbnQ7XG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgIHZhbHVlcy5wdXNoKHRoaXMuY3NzT2Zmc2V0Q2xvbmVzKG9wdGlvbnMpKTtcbiAgICB2YWx1ZXMucHVzaCh0aGlzLmNzc09mZnNldEdhcHMob3B0aW9ucykpO1xuXG4gICAgaWYgKHRoaXMuaXNDZW50ZXIob3B0aW9ucykpIHtcbiAgICAgIHZhbHVlcy5wdXNoKHRoaXMuYnVpbGRDc3NWYWx1ZShvcmllbnQoLTUwKSwgXCIlXCIpKTtcbiAgICAgIHZhbHVlcy5wdXNoLmFwcGx5KHZhbHVlcywgdGhpcy5jc3NPZmZzZXRDZW50ZXIob3B0aW9ucykpO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZXMuZmlsdGVyKEJvb2xlYW4pLm1hcChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHJldHVybiBcInRyYW5zbGF0ZVwiICsgcmVzb2x2ZShcIlhcIikgKyBcIihcIiArIHZhbHVlICsgXCIpXCI7XG4gICAgfSkuam9pbihcIiBcIik7XG4gIH07XG5cbiAgX3Byb3RvMy5jc3NPZmZzZXRDbG9uZXMgPSBmdW5jdGlvbiBjc3NPZmZzZXRDbG9uZXMob3B0aW9ucykge1xuICAgIHZhciBfdGhpcyREaXJlY3Rpb24yID0gdGhpcy5EaXJlY3Rpb24sXG4gICAgICAgIHJlc29sdmUgPSBfdGhpcyREaXJlY3Rpb24yLnJlc29sdmUsXG4gICAgICAgIG9yaWVudCA9IF90aGlzJERpcmVjdGlvbjIub3JpZW50O1xuICAgIHZhciBjbG9uZUNvdW50ID0gdGhpcy5nZXRDbG9uZUNvdW50KCk7XG5cbiAgICBpZiAodGhpcy5pc0ZpeGVkV2lkdGgob3B0aW9ucykpIHtcbiAgICAgIHZhciBfdGhpcyRwYXJzZUNzc1ZhbHVlID0gdGhpcy5wYXJzZUNzc1ZhbHVlKG9wdGlvbnNbcmVzb2x2ZShcImZpeGVkV2lkdGhcIildKSxcbiAgICAgICAgICB2YWx1ZSA9IF90aGlzJHBhcnNlQ3NzVmFsdWUudmFsdWUsXG4gICAgICAgICAgdW5pdDIgPSBfdGhpcyRwYXJzZUNzc1ZhbHVlLnVuaXQ7XG5cbiAgICAgIHJldHVybiB0aGlzLmJ1aWxkQ3NzVmFsdWUob3JpZW50KHZhbHVlKSAqIGNsb25lQ291bnQsIHVuaXQyKTtcbiAgICB9XG5cbiAgICB2YXIgcGVyY2VudCA9IDEwMCAqIGNsb25lQ291bnQgLyBvcHRpb25zLnBlclBhZ2U7XG4gICAgcmV0dXJuIG9yaWVudChwZXJjZW50KSArIFwiJVwiO1xuICB9O1xuXG4gIF9wcm90bzMuY3NzT2Zmc2V0Q2VudGVyID0gZnVuY3Rpb24gY3NzT2Zmc2V0Q2VudGVyKG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXMkRGlyZWN0aW9uMyA9IHRoaXMuRGlyZWN0aW9uLFxuICAgICAgICByZXNvbHZlID0gX3RoaXMkRGlyZWN0aW9uMy5yZXNvbHZlLFxuICAgICAgICBvcmllbnQgPSBfdGhpcyREaXJlY3Rpb24zLm9yaWVudDtcblxuICAgIGlmICh0aGlzLmlzRml4ZWRXaWR0aChvcHRpb25zKSkge1xuICAgICAgdmFyIF90aGlzJHBhcnNlQ3NzVmFsdWUyID0gdGhpcy5wYXJzZUNzc1ZhbHVlKG9wdGlvbnNbcmVzb2x2ZShcImZpeGVkV2lkdGhcIildKSxcbiAgICAgICAgICB2YWx1ZSA9IF90aGlzJHBhcnNlQ3NzVmFsdWUyLnZhbHVlLFxuICAgICAgICAgIHVuaXQyID0gX3RoaXMkcGFyc2VDc3NWYWx1ZTIudW5pdDtcblxuICAgICAgcmV0dXJuIFt0aGlzLmJ1aWxkQ3NzVmFsdWUob3JpZW50KHZhbHVlIC8gMiksIHVuaXQyKV07XG4gICAgfVxuXG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgIHZhciBwZXJQYWdlID0gb3B0aW9ucy5wZXJQYWdlLFxuICAgICAgICBnYXAgPSBvcHRpb25zLmdhcDtcbiAgICB2YWx1ZXMucHVzaChvcmllbnQoNTAgLyBwZXJQYWdlKSArIFwiJVwiKTtcblxuICAgIGlmIChnYXApIHtcbiAgICAgIHZhciBfdGhpcyRwYXJzZUNzc1ZhbHVlMyA9IHRoaXMucGFyc2VDc3NWYWx1ZShnYXApLFxuICAgICAgICAgIF92YWx1ZSA9IF90aGlzJHBhcnNlQ3NzVmFsdWUzLnZhbHVlLFxuICAgICAgICAgIF91bml0ID0gX3RoaXMkcGFyc2VDc3NWYWx1ZTMudW5pdDtcblxuICAgICAgdmFyIGdhcE9mZnNldCA9IChfdmFsdWUgLyBwZXJQYWdlIC0gX3ZhbHVlKSAvIDI7XG4gICAgICB2YWx1ZXMucHVzaCh0aGlzLmJ1aWxkQ3NzVmFsdWUob3JpZW50KGdhcE9mZnNldCksIF91bml0KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfTtcblxuICBfcHJvdG8zLmNzc09mZnNldEdhcHMgPSBmdW5jdGlvbiBjc3NPZmZzZXRHYXBzKG9wdGlvbnMpIHtcbiAgICB2YXIgY2xvbmVDb3VudCA9IHRoaXMuZ2V0Q2xvbmVDb3VudCgpO1xuXG4gICAgaWYgKGNsb25lQ291bnQgJiYgb3B0aW9ucy5nYXApIHtcbiAgICAgIHZhciBvcmllbnQgPSB0aGlzLkRpcmVjdGlvbi5vcmllbnQ7XG5cbiAgICAgIHZhciBfdGhpcyRwYXJzZUNzc1ZhbHVlNCA9IHRoaXMucGFyc2VDc3NWYWx1ZShvcHRpb25zLmdhcCksXG4gICAgICAgICAgdmFsdWUgPSBfdGhpcyRwYXJzZUNzc1ZhbHVlNC52YWx1ZSxcbiAgICAgICAgICB1bml0MiA9IF90aGlzJHBhcnNlQ3NzVmFsdWU0LnVuaXQ7XG5cbiAgICAgIGlmICh0aGlzLmlzRml4ZWRXaWR0aChvcHRpb25zKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWlsZENzc1ZhbHVlKG9yaWVudCh2YWx1ZSAqIGNsb25lQ291bnQpLCB1bml0Mik7XG4gICAgICB9XG5cbiAgICAgIHZhciBwZXJQYWdlID0gb3B0aW9ucy5wZXJQYWdlO1xuICAgICAgdmFyIGdhcHMgPSBjbG9uZUNvdW50IC8gcGVyUGFnZTtcbiAgICAgIHJldHVybiB0aGlzLmJ1aWxkQ3NzVmFsdWUob3JpZW50KGdhcHMgKiB2YWx1ZSksIHVuaXQyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gXCJcIjtcbiAgfTtcblxuICBfcHJvdG8zLnJlc29sdmUgPSBmdW5jdGlvbiByZXNvbHZlKHByb3ApIHtcbiAgICByZXR1cm4gY2FtZWxUb0tlYmFiKHRoaXMuRGlyZWN0aW9uLnJlc29sdmUocHJvcCkpO1xuICB9O1xuXG4gIF9wcm90bzMuY3NzUGFkZGluZyA9IGZ1bmN0aW9uIGNzc1BhZGRpbmcob3B0aW9ucywgcmlnaHQpIHtcbiAgICB2YXIgcGFkZGluZyA9IG9wdGlvbnMucGFkZGluZztcbiAgICB2YXIgcHJvcCA9IHRoaXMuRGlyZWN0aW9uLnJlc29sdmUocmlnaHQgPyBcInJpZ2h0XCIgOiBcImxlZnRcIiwgdHJ1ZSk7XG4gICAgcmV0dXJuIHBhZGRpbmcgJiYgdW5pdChwYWRkaW5nW3Byb3BdIHx8IChpc09iamVjdChwYWRkaW5nKSA/IDAgOiBwYWRkaW5nKSkgfHwgXCIwcHhcIjtcbiAgfTtcblxuICBfcHJvdG8zLmNzc1RyYWNrSGVpZ2h0ID0gZnVuY3Rpb24gY3NzVHJhY2tIZWlnaHQob3B0aW9ucykge1xuICAgIHZhciBoZWlnaHQgPSBcIlwiO1xuXG4gICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCgpKSB7XG4gICAgICBoZWlnaHQgPSB0aGlzLmNzc0hlaWdodChvcHRpb25zKTtcbiAgICAgIGFzc2VydChoZWlnaHQsICdcImhlaWdodFwiIGlzIG1pc3NpbmcuJyk7XG4gICAgICBoZWlnaHQgPSBcImNhbGMoXCIgKyBoZWlnaHQgKyBcIiAtIFwiICsgdGhpcy5jc3NQYWRkaW5nKG9wdGlvbnMsIGZhbHNlKSArIFwiIC0gXCIgKyB0aGlzLmNzc1BhZGRpbmcob3B0aW9ucywgdHJ1ZSkgKyBcIilcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gaGVpZ2h0O1xuICB9O1xuXG4gIF9wcm90bzMuY3NzSGVpZ2h0ID0gZnVuY3Rpb24gY3NzSGVpZ2h0KG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdW5pdChvcHRpb25zLmhlaWdodCk7XG4gIH07XG5cbiAgX3Byb3RvMy5jc3NTbGlkZVdpZHRoID0gZnVuY3Rpb24gY3NzU2xpZGVXaWR0aChvcHRpb25zKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMuYXV0b1dpZHRoID8gXCJcIiA6IHVuaXQob3B0aW9ucy5maXhlZFdpZHRoKSB8fCAodGhpcy5pc1ZlcnRpY2FsKCkgPyBcIlwiIDogdGhpcy5jc3NTbGlkZVNpemUob3B0aW9ucykpO1xuICB9O1xuXG4gIF9wcm90bzMuY3NzU2xpZGVIZWlnaHQgPSBmdW5jdGlvbiBjc3NTbGlkZUhlaWdodChvcHRpb25zKSB7XG4gICAgcmV0dXJuIHVuaXQob3B0aW9ucy5maXhlZEhlaWdodCkgfHwgKHRoaXMuaXNWZXJ0aWNhbCgpID8gb3B0aW9ucy5hdXRvSGVpZ2h0ID8gXCJcIiA6IHRoaXMuY3NzU2xpZGVTaXplKG9wdGlvbnMpIDogdGhpcy5jc3NIZWlnaHQob3B0aW9ucykpO1xuICB9O1xuXG4gIF9wcm90bzMuY3NzU2xpZGVTaXplID0gZnVuY3Rpb24gY3NzU2xpZGVTaXplKG9wdGlvbnMpIHtcbiAgICB2YXIgZ2FwID0gdW5pdChvcHRpb25zLmdhcCk7XG4gICAgcmV0dXJuIFwiY2FsYygoMTAwJVwiICsgKGdhcCAmJiBcIiArIFwiICsgZ2FwKSArIFwiKS9cIiArIChvcHRpb25zLnBlclBhZ2UgfHwgMSkgKyAoZ2FwICYmIFwiIC0gXCIgKyBnYXApICsgXCIpXCI7XG4gIH07XG5cbiAgX3Byb3RvMy5jc3NBc3BlY3RSYXRpbyA9IGZ1bmN0aW9uIGNzc0FzcGVjdFJhdGlvKG9wdGlvbnMpIHtcbiAgICB2YXIgaGVpZ2h0UmF0aW8gPSBvcHRpb25zLmhlaWdodFJhdGlvO1xuICAgIHJldHVybiBoZWlnaHRSYXRpbyA/IFwiXCIgKyAxIC8gaGVpZ2h0UmF0aW8gOiBcIlwiO1xuICB9O1xuXG4gIF9wcm90bzMuYnVpbGRDc3NWYWx1ZSA9IGZ1bmN0aW9uIGJ1aWxkQ3NzVmFsdWUodmFsdWUsIHVuaXQyKSB7XG4gICAgcmV0dXJuIFwiXCIgKyB2YWx1ZSArIHVuaXQyO1xuICB9O1xuXG4gIF9wcm90bzMucGFyc2VDc3NWYWx1ZSA9IGZ1bmN0aW9uIHBhcnNlQ3NzVmFsdWUodmFsdWUpIHtcbiAgICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICB2YXIgbnVtYmVyID0gcGFyc2VGbG9hdCh2YWx1ZSkgfHwgMDtcbiAgICAgIHZhciB1bml0MiA9IHZhbHVlLnJlcGxhY2UoL1xcZCooXFwuXFxkKik/LywgXCJcIikgfHwgXCJweFwiO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IG51bWJlcixcbiAgICAgICAgdW5pdDogdW5pdDJcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIHVuaXQ6IFwicHhcIlxuICAgIH07XG4gIH07XG5cbiAgX3Byb3RvMy5wYXJzZUJyZWFrcG9pbnRzID0gZnVuY3Rpb24gcGFyc2VCcmVha3BvaW50cygpIHtcbiAgICB2YXIgX3RoaXM5ID0gdGhpcztcblxuICAgIHZhciBicmVha3BvaW50cyA9IHRoaXMub3B0aW9ucy5icmVha3BvaW50cztcbiAgICB0aGlzLmJyZWFrcG9pbnRzLnB1c2goW1wiZGVmYXVsdFwiLCB0aGlzLm9wdGlvbnNdKTtcblxuICAgIGlmIChicmVha3BvaW50cykge1xuICAgICAgZm9yT3duKGJyZWFrcG9pbnRzLCBmdW5jdGlvbiAob3B0aW9ucywgd2lkdGgpIHtcbiAgICAgICAgX3RoaXM5LmJyZWFrcG9pbnRzLnB1c2goW3dpZHRoLCBtZXJnZShtZXJnZSh7fSwgX3RoaXM5Lm9wdGlvbnMpLCBvcHRpb25zKV0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90bzMuaXNGaXhlZFdpZHRoID0gZnVuY3Rpb24gaXNGaXhlZFdpZHRoKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gISFvcHRpb25zW3RoaXMuRGlyZWN0aW9uLnJlc29sdmUoXCJmaXhlZFdpZHRoXCIpXTtcbiAgfTtcblxuICBfcHJvdG8zLmlzTG9vcCA9IGZ1bmN0aW9uIGlzTG9vcCgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnR5cGUgPT09IExPT1A7XG4gIH07XG5cbiAgX3Byb3RvMy5pc0NlbnRlciA9IGZ1bmN0aW9uIGlzQ2VudGVyKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5mb2N1cyA9PT0gXCJjZW50ZXJcIikge1xuICAgICAgaWYgKHRoaXMuaXNMb29wKCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMudHlwZSA9PT0gU0xJREUpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLm9wdGlvbnMudHJpbVNwYWNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBfcHJvdG8zLmlzVmVydGljYWwgPSBmdW5jdGlvbiBpc1ZlcnRpY2FsKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uID09PSBUVEI7XG4gIH07XG5cbiAgX3Byb3RvMy5idWlsZENsYXNzZXMgPSBmdW5jdGlvbiBidWlsZENsYXNzZXMoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgcmV0dXJuIFtDTEFTU19ST09ULCBDTEFTU19ST09UICsgXCItLVwiICsgb3B0aW9ucy50eXBlLCBDTEFTU19ST09UICsgXCItLVwiICsgb3B0aW9ucy5kaXJlY3Rpb24sIG9wdGlvbnMuZHJhZyAmJiBDTEFTU19ST09UICsgXCItLWRyYWdnYWJsZVwiLCBvcHRpb25zLmlzTmF2aWdhdGlvbiAmJiBDTEFTU19ST09UICsgXCItLW5hdlwiLCBDTEFTU19BQ1RJVkUsICF0aGlzLmNvbmZpZy5oaWRkZW4gJiYgQ0xBU1NfUkVOREVSRURdLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKTtcbiAgfTtcblxuICBfcHJvdG8zLmJ1aWxkQXR0cnMgPSBmdW5jdGlvbiBidWlsZEF0dHJzKGF0dHJzKSB7XG4gICAgdmFyIGF0dHIgPSBcIlwiO1xuICAgIGZvck93bihhdHRycywgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgIGF0dHIgKz0gdmFsdWUgPyBcIiBcIiArIGNhbWVsVG9LZWJhYihrZXkpICsgXCI9XFxcIlwiICsgdmFsdWUgKyBcIlxcXCJcIiA6IFwiXCI7XG4gICAgfSk7XG4gICAgcmV0dXJuIGF0dHIudHJpbSgpO1xuICB9O1xuXG4gIF9wcm90bzMuYnVpbGRTdHlsZXMgPSBmdW5jdGlvbiBidWlsZFN0eWxlcyhzdHlsZXMpIHtcbiAgICB2YXIgc3R5bGUgPSBcIlwiO1xuICAgIGZvck93bihzdHlsZXMsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICBzdHlsZSArPSBcIiBcIiArIGNhbWVsVG9LZWJhYihrZXkpICsgXCI6XCIgKyB2YWx1ZSArIFwiO1wiO1xuICAgIH0pO1xuICAgIHJldHVybiBzdHlsZS50cmltKCk7XG4gIH07XG5cbiAgX3Byb3RvMy5yZW5kZXJTbGlkZXMgPSBmdW5jdGlvbiByZW5kZXJTbGlkZXMoKSB7XG4gICAgdmFyIF90aGlzMTAgPSB0aGlzO1xuXG4gICAgdmFyIHRhZyA9IHRoaXMuY29uZmlnLnNsaWRlVGFnO1xuICAgIHJldHVybiB0aGlzLnNsaWRlcy5tYXAoZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgIHJldHVybiBcIjxcIiArIHRhZyArIFwiIFwiICsgX3RoaXMxMC5idWlsZEF0dHJzKGNvbnRlbnQuYXR0cnMpICsgXCI+XCIgKyAoY29udGVudC5odG1sIHx8IFwiXCIpICsgXCI8L1wiICsgdGFnICsgXCI+XCI7XG4gICAgfSkuam9pbihcIlwiKTtcbiAgfTtcblxuICBfcHJvdG8zLmNvdmVyID0gZnVuY3Rpb24gY292ZXIoY29udGVudCkge1xuICAgIHZhciBzdHlsZXMgPSBjb250ZW50LnN0eWxlcyxcbiAgICAgICAgX2NvbnRlbnQkaHRtbCA9IGNvbnRlbnQuaHRtbCxcbiAgICAgICAgaHRtbCA9IF9jb250ZW50JGh0bWwgPT09IHZvaWQgMCA/IFwiXCIgOiBfY29udGVudCRodG1sO1xuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5jb3ZlciAmJiAhdGhpcy5vcHRpb25zLmxhenlMb2FkKSB7XG4gICAgICB2YXIgc3JjID0gaHRtbC5tYXRjaCgvPGltZy4qP3NyY1xccyo9XFxzKihbJ1wiXSkoLis/KVxcMS4qPz4vKTtcblxuICAgICAgaWYgKHNyYyAmJiBzcmNbMl0pIHtcbiAgICAgICAgc3R5bGVzLmJhY2tncm91bmQgPSBcImNlbnRlci9jb3ZlciBuby1yZXBlYXQgdXJsKCdcIiArIHNyY1syXSArIFwiJylcIjtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvMy5nZW5lcmF0ZUNsb25lcyA9IGZ1bmN0aW9uIGdlbmVyYXRlQ2xvbmVzKGNvbnRlbnRzKSB7XG4gICAgdmFyIGNsYXNzZXMgPSB0aGlzLm9wdGlvbnMuY2xhc3NlcztcbiAgICB2YXIgY291bnQgPSB0aGlzLmdldENsb25lQ291bnQoKTtcbiAgICB2YXIgc2xpZGVzID0gY29udGVudHMuc2xpY2UoKTtcblxuICAgIHdoaWxlIChzbGlkZXMubGVuZ3RoIDwgY291bnQpIHtcbiAgICAgIHB1c2goc2xpZGVzLCBzbGlkZXMpO1xuICAgIH1cblxuICAgIHB1c2goc2xpZGVzLnNsaWNlKC1jb3VudCkucmV2ZXJzZSgpLCBzbGlkZXMuc2xpY2UoMCwgY291bnQpKS5mb3JFYWNoKGZ1bmN0aW9uIChjb250ZW50LCBpbmRleCkge1xuICAgICAgdmFyIGF0dHJzID0gYXNzaWduKHt9LCBjb250ZW50LmF0dHJzLCB7XG4gICAgICAgIGNsYXNzOiBjb250ZW50LmF0dHJzLmNsYXNzICsgXCIgXCIgKyBjbGFzc2VzLmNsb25lXG4gICAgICB9KTtcbiAgICAgIHZhciBjbG9uZSA9IGFzc2lnbih7fSwgY29udGVudCwge1xuICAgICAgICBhdHRyczogYXR0cnNcbiAgICAgIH0pO1xuICAgICAgaW5kZXggPCBjb3VudCA/IGNvbnRlbnRzLnVuc2hpZnQoY2xvbmUpIDogY29udGVudHMucHVzaChjbG9uZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvMy5nZXRDbG9uZUNvdW50ID0gZnVuY3Rpb24gZ2V0Q2xvbmVDb3VudCgpIHtcbiAgICBpZiAodGhpcy5pc0xvb3AoKSkge1xuICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgICAgIGlmIChvcHRpb25zLmNsb25lcykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5jbG9uZXM7XG4gICAgICB9XG5cbiAgICAgIHZhciBwZXJQYWdlID0gbWF4LmFwcGx5KHZvaWQgMCwgdGhpcy5icmVha3BvaW50cy5tYXAoZnVuY3Rpb24gKF9yZWY2KSB7XG4gICAgICAgIHZhciBvcHRpb25zMiA9IF9yZWY2WzFdO1xuICAgICAgICByZXR1cm4gb3B0aW9uczIucGVyUGFnZTtcbiAgICAgIH0pKTtcbiAgICAgIHJldHVybiBwZXJQYWdlICogKChvcHRpb25zLmZsaWNrTWF4UGFnZXMgfHwgMSkgKyAxKTtcbiAgICB9XG5cbiAgICByZXR1cm4gMDtcbiAgfTtcblxuICBfcHJvdG8zLnJlbmRlckFycm93cyA9IGZ1bmN0aW9uIHJlbmRlckFycm93cygpIHtcbiAgICB2YXIgaHRtbCA9IFwiXCI7XG4gICAgaHRtbCArPSBcIjxkaXYgY2xhc3M9XFxcIlwiICsgdGhpcy5vcHRpb25zLmNsYXNzZXMuYXJyb3dzICsgXCJcXFwiPlwiO1xuICAgIGh0bWwgKz0gdGhpcy5yZW5kZXJBcnJvdyh0cnVlKTtcbiAgICBodG1sICs9IHRoaXMucmVuZGVyQXJyb3coZmFsc2UpO1xuICAgIGh0bWwgKz0gXCI8L2Rpdj5cIjtcbiAgICByZXR1cm4gaHRtbDtcbiAgfTtcblxuICBfcHJvdG8zLnJlbmRlckFycm93ID0gZnVuY3Rpb24gcmVuZGVyQXJyb3cocHJldikge1xuICAgIHZhciBfdGhpcyRvcHRpb25zID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBjbGFzc2VzID0gX3RoaXMkb3B0aW9ucy5jbGFzc2VzLFxuICAgICAgICBpMThuID0gX3RoaXMkb3B0aW9ucy5pMThuO1xuICAgIHZhciBhdHRycyA9IHtcbiAgICAgIGNsYXNzOiBjbGFzc2VzLmFycm93ICsgXCIgXCIgKyAocHJldiA/IGNsYXNzZXMucHJldiA6IGNsYXNzZXMubmV4dCksXG4gICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgYXJpYUxhYmVsOiBwcmV2ID8gaTE4bi5wcmV2IDogaTE4bi5uZXh0XG4gICAgfTtcbiAgICByZXR1cm4gXCI8YnV0dG9uIFwiICsgdGhpcy5idWlsZEF0dHJzKGF0dHJzKSArIFwiPjxzdmcgeG1sbnM9XFxcIlwiICsgWE1MX05BTUVfU1BBQ0UgKyBcIlxcXCIgdmlld0JveD1cXFwiMCAwIFwiICsgU0laRSArIFwiIFwiICsgU0laRSArIFwiXFxcIiB3aWR0aD1cXFwiXCIgKyBTSVpFICsgXCJcXFwiIGhlaWdodD1cXFwiXCIgKyBTSVpFICsgXCJcXFwiPjxwYXRoIGQ9XFxcIlwiICsgKHRoaXMub3B0aW9ucy5hcnJvd1BhdGggfHwgUEFUSCkgKyBcIlxcXCIgLz48L3N2Zz48L2J1dHRvbj5cIjtcbiAgfTtcblxuICBfcHJvdG8zLmh0bWwgPSBmdW5jdGlvbiBodG1sKCkge1xuICAgIHZhciBfdGhpcyRjb25maWcgPSB0aGlzLmNvbmZpZyxcbiAgICAgICAgcm9vdENsYXNzID0gX3RoaXMkY29uZmlnLnJvb3RDbGFzcyxcbiAgICAgICAgbGlzdFRhZyA9IF90aGlzJGNvbmZpZy5saXN0VGFnLFxuICAgICAgICBhcnJvd3MgPSBfdGhpcyRjb25maWcuYXJyb3dzLFxuICAgICAgICBiZWZvcmVUcmFjayA9IF90aGlzJGNvbmZpZy5iZWZvcmVUcmFjayxcbiAgICAgICAgYWZ0ZXJUcmFjayA9IF90aGlzJGNvbmZpZy5hZnRlclRyYWNrLFxuICAgICAgICBzbGlkZXIgPSBfdGhpcyRjb25maWcuc2xpZGVyLFxuICAgICAgICBiZWZvcmVTbGlkZXIgPSBfdGhpcyRjb25maWcuYmVmb3JlU2xpZGVyLFxuICAgICAgICBhZnRlclNsaWRlciA9IF90aGlzJGNvbmZpZy5hZnRlclNsaWRlcjtcbiAgICB2YXIgaHRtbCA9IFwiXCI7XG4gICAgaHRtbCArPSBcIjxkaXYgaWQ9XFxcIlwiICsgdGhpcy5pZCArIFwiXFxcIiBjbGFzcz1cXFwiXCIgKyB0aGlzLmJ1aWxkQ2xhc3NlcygpICsgXCIgXCIgKyAocm9vdENsYXNzIHx8IFwiXCIpICsgXCJcXFwiPlwiO1xuICAgIGh0bWwgKz0gXCI8c3R5bGU+XCIgKyB0aGlzLlN0eWxlLmJ1aWxkKCkgKyBcIjwvc3R5bGU+XCI7XG5cbiAgICBpZiAoc2xpZGVyKSB7XG4gICAgICBodG1sICs9IGJlZm9yZVNsaWRlciB8fCBcIlwiO1xuICAgICAgaHRtbCArPSBcIjxkaXYgY2xhc3M9XFxcInNwbGlkZV9fc2xpZGVyXFxcIj5cIjtcbiAgICB9XG5cbiAgICBodG1sICs9IGJlZm9yZVRyYWNrIHx8IFwiXCI7XG5cbiAgICBpZiAoYXJyb3dzKSB7XG4gICAgICBodG1sICs9IHRoaXMucmVuZGVyQXJyb3dzKCk7XG4gICAgfVxuXG4gICAgaHRtbCArPSBcIjxkaXYgY2xhc3M9XFxcInNwbGlkZV9fdHJhY2tcXFwiPlwiO1xuICAgIGh0bWwgKz0gXCI8XCIgKyBsaXN0VGFnICsgXCIgY2xhc3M9XFxcInNwbGlkZV9fbGlzdFxcXCI+XCI7XG4gICAgaHRtbCArPSB0aGlzLnJlbmRlclNsaWRlcygpO1xuICAgIGh0bWwgKz0gXCI8L1wiICsgbGlzdFRhZyArIFwiPlwiO1xuICAgIGh0bWwgKz0gXCI8L2Rpdj5cIjtcbiAgICBodG1sICs9IGFmdGVyVHJhY2sgfHwgXCJcIjtcblxuICAgIGlmIChzbGlkZXIpIHtcbiAgICAgIGh0bWwgKz0gXCI8L2Rpdj5cIjtcbiAgICAgIGh0bWwgKz0gYWZ0ZXJTbGlkZXIgfHwgXCJcIjtcbiAgICB9XG5cbiAgICBodG1sICs9IFwiPC9kaXY+XCI7XG4gICAgcmV0dXJuIGh0bWw7XG4gIH07XG5cbiAgcmV0dXJuIFNwbGlkZVJlbmRlcmVyO1xufSgpO1xuXG5leHBvcnQgeyBDTEFTU0VTLCBDTEFTU19BQ1RJVkUsIENMQVNTX0FSUk9XLCBDTEFTU19BUlJPV1MsIENMQVNTX0FSUk9XX05FWFQsIENMQVNTX0FSUk9XX1BSRVYsIENMQVNTX0NMT05FLCBDTEFTU19DT05UQUlORVIsIENMQVNTX0ZPQ1VTX0lOLCBDTEFTU19JTklUSUFMSVpFRCwgQ0xBU1NfTElTVCwgQ0xBU1NfTE9BRElORywgQ0xBU1NfTkVYVCwgQ0xBU1NfT1ZFUkZMT1csIENMQVNTX1BBR0lOQVRJT04sIENMQVNTX1BBR0lOQVRJT05fUEFHRSwgQ0xBU1NfUFJFViwgQ0xBU1NfUFJPR1JFU1MsIENMQVNTX1BST0dSRVNTX0JBUiwgQ0xBU1NfUk9PVCwgQ0xBU1NfU0xJREUsIENMQVNTX1NQSU5ORVIsIENMQVNTX1NSLCBDTEFTU19UT0dHTEUsIENMQVNTX1RPR0dMRV9QQVVTRSwgQ0xBU1NfVE9HR0xFX1BMQVksIENMQVNTX1RSQUNLLCBDTEFTU19WSVNJQkxFLCBERUZBVUxUUywgRVZFTlRfQUNUSVZFLCBFVkVOVF9BUlJPV1NfTU9VTlRFRCwgRVZFTlRfQVJST1dTX1VQREFURUQsIEVWRU5UX0FVVE9QTEFZX1BBVVNFLCBFVkVOVF9BVVRPUExBWV9QTEFZLCBFVkVOVF9BVVRPUExBWV9QTEFZSU5HLCBFVkVOVF9DTElDSywgRVZFTlRfREVTVFJPWSwgRVZFTlRfRFJBRywgRVZFTlRfRFJBR0dFRCwgRVZFTlRfRFJBR0dJTkcsIEVWRU5UX0VORF9JTkRFWF9DSEFOR0VELCBFVkVOVF9ISURERU4sIEVWRU5UX0lOQUNUSVZFLCBFVkVOVF9MQVpZTE9BRF9MT0FERUQsIEVWRU5UX01PVU5URUQsIEVWRU5UX01PVkUsIEVWRU5UX01PVkVELCBFVkVOVF9OQVZJR0FUSU9OX01PVU5URUQsIEVWRU5UX09WRVJGTE9XLCBFVkVOVF9QQUdJTkFUSU9OX01PVU5URUQsIEVWRU5UX1BBR0lOQVRJT05fVVBEQVRFRCwgRVZFTlRfUkVBRFksIEVWRU5UX1JFRlJFU0gsIEVWRU5UX1JFU0laRSwgRVZFTlRfUkVTSVpFRCwgRVZFTlRfU0NST0xMLCBFVkVOVF9TQ1JPTExFRCwgRVZFTlRfU0hJRlRFRCwgRVZFTlRfU0xJREVfS0VZRE9XTiwgRVZFTlRfVVBEQVRFRCwgRVZFTlRfVklTSUJMRSwgRXZlbnRCaW5kZXIsIEV2ZW50SW50ZXJmYWNlLCBGQURFLCBMT09QLCBMVFIsIFJUTCwgUmVxdWVzdEludGVydmFsLCBTTElERSwgU1RBVFVTX0NMQVNTRVMsIFNwbGlkZSwgU3BsaWRlUmVuZGVyZXIsIFN0YXRlLCBUVEIsIFRocm90dGxlLCBTcGxpZGUgYXMgZGVmYXVsdCB9O1xuIiwiXHJcbi8vIENsYXNzIHRoYXQgaGFuZGxlcyB0aGUgcGxheWJhY2sgb2YgdGhlIHdob2xlIGJvb2tcclxuaW1wb3J0IHsgQm9vaywgQm9va1R5cGUsIFBhZ2UsIFRleHRFbGVtZW50LCBJbWFnZUVsZW1lbnQsIEF1ZGlvRWxlbWVudCAgfSBmcm9tIFwiLi4vTW9kZWxzL01vZGVsc1wiO1xyXG5pbXBvcnQgeyBTcGxpZGUgfSBmcm9tIFwiQHNwbGlkZWpzL3NwbGlkZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBsYXlCYWNrRW5naW5lIHtcclxuXHJcbiAgICBjdXJyZW50UGFnZTogbnVtYmVyO1xyXG4gICAgbnVtYmVyT2ZQYWdlczogbnVtYmVyO1xyXG4gICAgdHJhbnNpdGlvbmluZ1RvUGFnZTogYm9vbGVhbjtcclxuXHJcbiAgICBpbWFnZXNQYXRoOiBzdHJpbmc7XHJcbiAgICBhdWRpb1BhdGg6IHN0cmluZztcclxuXHJcbiAgICBlbXB0eUdsb3dJbWFnZVRhZzogc3RyaW5nID0gXCJlbXB0eV9nbG93X2ltYWdlXCI7XHJcblxyXG4gICAgc3BsaWRlSGFuZGxlOiBTcGxpZGU7XHJcblxyXG4gICAgY3VycmVudEJvb2tUeXBlOiBCb29rVHlwZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihpbWFnZXNQYXRoOiBzdHJpbmcsIGF1ZGlvUGF0aDogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5pbWFnZXNQYXRoID0gaW1hZ2VzUGF0aDtcclxuICAgICAgICB0aGlzLmF1ZGlvUGF0aCA9IGF1ZGlvUGF0aDtcclxuICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMDtcclxuICAgICAgICB0aGlzLnNwbGlkZUhhbmRsZSA9IG5ldyBTcGxpZGUoJy5zcGxpZGUnLCB7XHJcbiAgICAgICAgICAgIGZpeGVkSGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQgLSAyMFxyXG4gICAgICAgIH0pLm1vdW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdGFrZSBsZXRzIGZseSBzdG9yeSwgdGFrZSB0aGUgZG9jcywgaW5zdGFsbGluZyB3b3JrYm94IGFuZCBtYWtpbmcgc3VyZVxyXG4gICAgLy8gdGhlIGxldHMgZmx5IGlzIGF2YWlsYWJsZSBhcyBhIHNlcnZpY2Ugd29ya2VyIFBXQVxyXG5cclxuICAgIGluaXRpYWxpemVCb29rKGJvb2s6IEJvb2spIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRCb29rVHlwZSA9IGJvb2suYm9va1R5cGU7XHJcbiAgICAgICAgdGhpcy5udW1iZXJPZlBhZ2VzID0gYm9vay5wYWdlcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRCb29rVHlwZSA9PT0gQm9va1R5cGUuQ3VyaW91c1JlYWRlcikge1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVDdXJpb3VzUmVhZGVyQm9vayhib29rKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY3VycmVudEJvb2tUeXBlID09PSBCb29rVHlwZS5HREwpIHtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplR0RMQm9vayhib29rKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVDdXJpb3VzUmVhZGVyQm9vayhib29rOiBCb29rKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib29rLnBhZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNsaWRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICAgICAgICAgICAgc2xpZGUuY2xhc3NMaXN0LmFkZCgnc3BsaWRlX19zbGlkZScpO1xyXG5cclxuICAgICAgICAgICAgLy8gZm9yZWFjaCB2aXN1YWxlbGVtZW50IGluIHBhZ2UgYWRkIHRvIHNsaWRlXHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYm9vay5wYWdlc1tpXS52aXN1YWxFbGVtZW50cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHZpc3VhbEVsZW1lbnQgPSBib29rLnBhZ2VzW2ldLnZpc3VhbEVsZW1lbnRzW2pdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZpc3VhbEVsZW1lbnQudHlwZSA9PSBcInRleHRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0ZXh0RWxlbWVudDogVGV4dEVsZW1lbnQgPSB2aXN1YWxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0ZXh0RWxlbWVudERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0ZXh0RWxlbWVudERpdi5jbGFzc0xpc3QuYWRkKCdjci10ZXh0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUud2Via2l0VGV4dFN0cm9rZSA9IFwiMXB4ICMzMDMwMzBcIjtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5jb2xvciA9IFwiI0ZGRkZGRlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLnRleHRTaGFkb3cgPSBcIjAuMXJlbSAwLjE1cmVtIDAuMXJlbSAjMzAzMDMwXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUuZm9udEZhbWlseSA9IFwiUXVpY2tzYW5kXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUuZm9udFdlaWdodCA9IFwiODAwXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUuZm9udFNpemUgPSBcIjEuN2VtXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUudG9wID0gdGV4dEVsZW1lbnQucG9zaXRpb25ZICsgXCIlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUubGVmdCA9IHRleHRFbGVtZW50LnBvc2l0aW9uWCArIFwiJVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLndpZHRoID0gdGV4dEVsZW1lbnQud2lkdGggKyBcIiVcIjtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5oZWlnaHQgPSB0ZXh0RWxlbWVudC5oZWlnaHQgKyBcIiVcIjtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0RWxlbWVudERpdi5pbm5lckhUTUwgPSB0ZXh0RWxlbWVudC50ZXh0Q29udGVudEFzSFRNTDtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZS5hcHBlbmRDaGlsZCh0ZXh0RWxlbWVudERpdik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZpc3VhbEVsZW1lbnQudHlwZSA9PSBcImltYWdlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW1hZ2VFbGVtZW50OiBJbWFnZUVsZW1lbnQgPSB2aXN1YWxFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2VFbGVtZW50LmltYWdlU291cmNlID09PSB0aGlzLmVtcHR5R2xvd0ltYWdlVGFnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdlRWxlbWVudERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnREaXYuY2xhc3NMaXN0LmFkZCgnY3ItaW1hZ2UnKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnREaXYuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50RGl2LnN0eWxlLnRvcCA9IGltYWdlRWxlbWVudC5wb3NpdGlvblkgKyBcIiVcIjtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnREaXYuc3R5bGUubGVmdCA9IGltYWdlRWxlbWVudC5wb3NpdGlvblggKyBcIiVcIjtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnREaXYuc3R5bGUud2lkdGggPSBpbWFnZUVsZW1lbnQud2lkdGggKyBcIiVcIjtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnREaXYuc3R5bGUuaGVpZ2h0ID0gaW1hZ2VFbGVtZW50LmhlaWdodCArIFwiJVwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW1hZ2VFbGVtZW50SW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50SW1nLnNyYyA9IHRoaXMuaW1hZ2VzUGF0aCArIGltYWdlRWxlbWVudC5pbWFnZVNvdXJjZS5yZXBsYWNlKFwiaW1hZ2VzL1wiLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnRJbWcuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnRJbWcuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50RGl2LmFwcGVuZENoaWxkKGltYWdlRWxlbWVudEltZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGUuYXBwZW5kQ2hpbGQoaW1hZ2VFbGVtZW50RGl2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwbGlkZUhhbmRsZS5hZGQoc2xpZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVHRExCb29rKGJvb2s6IEJvb2spIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvb2sucGFnZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc2xpZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gICAgICAgICAgICBzbGlkZS5jbGFzc0xpc3QuYWRkKCdzcGxpZGVfX3NsaWRlJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgYSBmbGV4Ym94IGNvbnRhaW5lciB0byB0aGUgc2xpZGUgd2l0aCBhIGNvbHVtbiBsYXlvdXRcclxuICAgICAgICAgICAgbGV0IGZsZXhDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgZmxleENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdnZGwtZmxleC1jb250YWluZXInKTtcclxuICAgICAgICAgICAgZmxleENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgICAgIGZsZXhDb250YWluZXIuc3R5bGUuZmxleERpcmVjdGlvbiA9IFwiY29sdW1uXCI7XHJcbiAgICAgICAgICAgIGZsZXhDb250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImNlbnRlclwiO1xyXG4gICAgICAgICAgICBmbGV4Q29udGFpbmVyLnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xyXG4gICAgICAgICAgICBmbGV4Q29udGFpbmVyLnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xyXG4gICAgICAgICAgICBmbGV4Q29udGFpbmVyLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgIHNsaWRlLmFwcGVuZENoaWxkKGZsZXhDb250YWluZXIpO1xyXG5cclxuICAgICAgICAgICAgLy8gZm9yZWFjaCB2aXN1YWxlbGVtZW50IGluIHBhZ2UgYWRkIHRvIHNsaWRlXHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYm9vay5wYWdlc1tpXS52aXN1YWxFbGVtZW50cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHZpc3VhbEVsZW1lbnQgPSBib29rLnBhZ2VzW2ldLnZpc3VhbEVsZW1lbnRzW2pdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZpc3VhbEVsZW1lbnQudHlwZSA9PSBcInRleHRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0ZXh0RWxlbWVudDogVGV4dEVsZW1lbnQgPSB2aXN1YWxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0ZXh0RWxlbWVudERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLndpZHRoID0gXCI2MCVcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuY2xhc3NMaXN0LmFkZCgnZ2RsLXRleHQnKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS53ZWJraXRUZXh0U3Ryb2tlID0gXCIxcHggIzMwMzAzMFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmNvbG9yID0gXCIjRkZGRkZGXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUudGV4dFNoYWRvdyA9IFwiMC4xcmVtIDAuMTVyZW0gMC4xcmVtICMzMDMwMzBcIjtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5mb250RmFtaWx5ID0gXCJRdWlja3NhbmRcIjtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5mb250V2VpZ2h0ID0gXCI4MDBcIjtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5mb250U2l6ZSA9IFwiMS43ZW1cIjtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0RWxlbWVudERpdi5pbm5lckhUTUwgPSB0ZXh0RWxlbWVudC50ZXh0Q29udGVudEFzSFRNTDtcclxuICAgICAgICAgICAgICAgICAgICBmbGV4Q29udGFpbmVyLmFwcGVuZENoaWxkKHRleHRFbGVtZW50RGl2KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmlzdWFsRWxlbWVudC50eXBlID09IFwiaW1hZ2VcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbWFnZUVsZW1lbnQ6IEltYWdlRWxlbWVudCA9IHZpc3VhbEVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbWFnZUVsZW1lbnREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnREaXYuY2xhc3NMaXN0LmFkZCgnZ2RsLWltYWdlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbWFnZUVsZW1lbnRJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnRJbWcuc3JjID0gdGhpcy5pbWFnZXNQYXRoICsgaW1hZ2VFbGVtZW50LmltYWdlU291cmNlLnJlcGxhY2UoXCJpbWFnZXMvXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudEltZy5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudEltZy5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnREaXYuYXBwZW5kQ2hpbGQoaW1hZ2VFbGVtZW50SW1nKTtcclxuICAgICAgICAgICAgICAgICAgICBmbGV4Q29udGFpbmVyLmFwcGVuZENoaWxkKGltYWdlRWxlbWVudERpdik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc3BsaWRlSGFuZGxlLmFkZChzbGlkZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdvVG9OZXh0UGFnZSgpIHtcclxuICAgICAgICBpZiAodGhpcy50cmFuc2l0aW9uaW5nVG9QYWdlKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFBhZ2UgPCB0aGlzLm51bWJlck9mUGFnZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRyYW5zaXRpb25Ub1BhZ2UodGhpcy5jdXJyZW50UGFnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ29Ub1ByZXZpb3VzUGFnZSgpIHtcclxuICAgICAgICBpZiAodGhpcy50cmFuc2l0aW9uaW5nVG9QYWdlKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFBhZ2UgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UtLTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uVG9QYWdlKHRoaXMuY3VycmVudFBhZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHRyYW5zaXRpb25Ub1BhZ2UocGFnZU51bWJlcjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uaW5nVG9QYWdlID0gdHJ1ZTtcclxuICAgIH1cclxufSIsIi8qXG4gIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcblxuICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGVcbiAgbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0XG4gIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULlxuKi9cbmltcG9ydCB7IG1lc3NhZ2VHZW5lcmF0b3IgfSBmcm9tICcuLi9tb2RlbHMvbWVzc2FnZXMvbWVzc2FnZUdlbmVyYXRvci5qcyc7XG5pbXBvcnQgJy4uL192ZXJzaW9uLmpzJztcbi8qKlxuICogV29ya2JveCBlcnJvcnMgc2hvdWxkIGJlIHRocm93biB3aXRoIHRoaXMgY2xhc3MuXG4gKiBUaGlzIGFsbG93cyB1c2UgdG8gZW5zdXJlIHRoZSB0eXBlIGVhc2lseSBpbiB0ZXN0cyxcbiAqIGhlbHBzIGRldmVsb3BlcnMgaWRlbnRpZnkgZXJyb3JzIGZyb20gd29ya2JveFxuICogZWFzaWx5IGFuZCBhbGxvd3MgdXNlIHRvIG9wdGltaXNlIGVycm9yXG4gKiBtZXNzYWdlcyBjb3JyZWN0bHkuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuY2xhc3MgV29ya2JveEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yQ29kZSBUaGUgZXJyb3IgY29kZSB0aGF0XG4gICAgICogaWRlbnRpZmllcyB0aGlzIHBhcnRpY3VsYXIgZXJyb3IuXG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBkZXRhaWxzIEFueSByZWxldmFudCBhcmd1bWVudHNcbiAgICAgKiB0aGF0IHdpbGwgaGVscCBkZXZlbG9wZXJzIGlkZW50aWZ5IGlzc3VlcyBzaG91bGRcbiAgICAgKiBiZSBhZGRlZCBhcyBhIGtleSBvbiB0aGUgY29udGV4dCBvYmplY3QuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZXJyb3JDb2RlLCBkZXRhaWxzKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBtZXNzYWdlR2VuZXJhdG9yKGVycm9yQ29kZSwgZGV0YWlscyk7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSBlcnJvckNvZGU7XG4gICAgICAgIHRoaXMuZGV0YWlscyA9IGRldGFpbHM7XG4gICAgfVxufVxuZXhwb3J0IHsgV29ya2JveEVycm9yIH07XG4iLCIvKlxuICBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG5cbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG5pbXBvcnQgeyBtZXNzYWdlcyB9IGZyb20gJy4vbWVzc2FnZXMuanMnO1xuaW1wb3J0ICcuLi8uLi9fdmVyc2lvbi5qcyc7XG5jb25zdCBmYWxsYmFjayA9IChjb2RlLCAuLi5hcmdzKSA9PiB7XG4gICAgbGV0IG1zZyA9IGNvZGU7XG4gICAgaWYgKGFyZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICBtc2cgKz0gYCA6OiAke0pTT04uc3RyaW5naWZ5KGFyZ3MpfWA7XG4gICAgfVxuICAgIHJldHVybiBtc2c7XG59O1xuY29uc3QgZ2VuZXJhdG9yRnVuY3Rpb24gPSAoY29kZSwgZGV0YWlscyA9IHt9KSA9PiB7XG4gICAgY29uc3QgbWVzc2FnZSA9IG1lc3NhZ2VzW2NvZGVdO1xuICAgIGlmICghbWVzc2FnZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBmaW5kIG1lc3NhZ2UgZm9yIGNvZGUgJyR7Y29kZX0nLmApO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZShkZXRhaWxzKTtcbn07XG5leHBvcnQgY29uc3QgbWVzc2FnZUdlbmVyYXRvciA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyBmYWxsYmFjayA6IGdlbmVyYXRvckZ1bmN0aW9uO1xuIiwiLypcbiAgQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuXG4gIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZVxuICBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXRcbiAgaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuXG4qL1xuaW1wb3J0ICcuLi9fdmVyc2lvbi5qcyc7XG4vKipcbiAqIFRoZSBkZWZhdWx0IEhUVFAgbWV0aG9kLCAnR0VUJywgdXNlZCB3aGVuIHRoZXJlJ3Mgbm8gc3BlY2lmaWMgbWV0aG9kXG4gKiBjb25maWd1cmVkIGZvciBhIHJvdXRlLlxuICpcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRNZXRob2QgPSAnR0VUJztcbi8qKlxuICogVGhlIGxpc3Qgb2YgdmFsaWQgSFRUUCBtZXRob2RzIGFzc29jaWF0ZWQgd2l0aCByZXF1ZXN0cyB0aGF0IGNvdWxkIGJlIHJvdXRlZC5cbiAqXG4gKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY29uc3QgdmFsaWRNZXRob2RzID0gW1xuICAgICdERUxFVEUnLFxuICAgICdHRVQnLFxuICAgICdIRUFEJyxcbiAgICAnUEFUQ0gnLFxuICAgICdQT1NUJyxcbiAgICAnUFVUJyxcbl07XG4iLCIvKlxuICBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG5cbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICd3b3JrYm94LWNvcmUvX3ByaXZhdGUvYXNzZXJ0LmpzJztcbmltcG9ydCAnLi4vX3ZlcnNpb24uanMnO1xuLyoqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCl8T2JqZWN0fSBoYW5kbGVyIEVpdGhlciBhIGZ1bmN0aW9uLCBvciBhbiBvYmplY3Qgd2l0aCBhXG4gKiAnaGFuZGxlJyBtZXRob2QuXG4gKiBAcmV0dXJuIHtPYmplY3R9IEFuIG9iamVjdCB3aXRoIGEgaGFuZGxlIG1ldGhvZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY29uc3Qgbm9ybWFsaXplSGFuZGxlciA9IChoYW5kbGVyKSA9PiB7XG4gICAgaWYgKGhhbmRsZXIgJiYgdHlwZW9mIGhhbmRsZXIgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICBhc3NlcnQuaGFzTWV0aG9kKGhhbmRsZXIsICdoYW5kbGUnLCB7XG4gICAgICAgICAgICAgICAgbW9kdWxlTmFtZTogJ3dvcmtib3gtcm91dGluZycsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnUm91dGUnLFxuICAgICAgICAgICAgICAgIGZ1bmNOYW1lOiAnY29uc3RydWN0b3InLFxuICAgICAgICAgICAgICAgIHBhcmFtTmFtZTogJ2hhbmRsZXInLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhhbmRsZXI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgYXNzZXJ0LmlzVHlwZShoYW5kbGVyLCAnZnVuY3Rpb24nLCB7XG4gICAgICAgICAgICAgICAgbW9kdWxlTmFtZTogJ3dvcmtib3gtcm91dGluZycsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnUm91dGUnLFxuICAgICAgICAgICAgICAgIGZ1bmNOYW1lOiAnY29uc3RydWN0b3InLFxuICAgICAgICAgICAgICAgIHBhcmFtTmFtZTogJ2hhbmRsZXInLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgaGFuZGxlOiBoYW5kbGVyIH07XG4gICAgfVxufTtcbiIsIi8qXG4gIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcblxuICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGVcbiAgbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0XG4gIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULlxuKi9cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJ3dvcmtib3gtY29yZS9fcHJpdmF0ZS9hc3NlcnQuanMnO1xuaW1wb3J0IHsgZGVmYXVsdE1ldGhvZCwgdmFsaWRNZXRob2RzIH0gZnJvbSAnLi91dGlscy9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgbm9ybWFsaXplSGFuZGxlciB9IGZyb20gJy4vdXRpbHMvbm9ybWFsaXplSGFuZGxlci5qcyc7XG5pbXBvcnQgJy4vX3ZlcnNpb24uanMnO1xuLyoqXG4gKiBBIGBSb3V0ZWAgY29uc2lzdHMgb2YgYSBwYWlyIG9mIGNhbGxiYWNrIGZ1bmN0aW9ucywgXCJtYXRjaFwiIGFuZCBcImhhbmRsZXJcIi5cbiAqIFRoZSBcIm1hdGNoXCIgY2FsbGJhY2sgZGV0ZXJtaW5lIGlmIGEgcm91dGUgc2hvdWxkIGJlIHVzZWQgdG8gXCJoYW5kbGVcIiBhXG4gKiByZXF1ZXN0IGJ5IHJldHVybmluZyBhIG5vbi1mYWxzeSB2YWx1ZSBpZiBpdCBjYW4uIFRoZSBcImhhbmRsZXJcIiBjYWxsYmFja1xuICogaXMgY2FsbGVkIHdoZW4gdGhlcmUgaXMgYSBtYXRjaCBhbmQgc2hvdWxkIHJldHVybiBhIFByb21pc2UgdGhhdCByZXNvbHZlc1xuICogdG8gYSBgUmVzcG9uc2VgLlxuICpcbiAqIEBtZW1iZXJvZiB3b3JrYm94LXJvdXRpbmdcbiAqL1xuY2xhc3MgUm91dGUge1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yIGZvciBSb3V0ZSBjbGFzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7d29ya2JveC1yb3V0aW5nfm1hdGNoQ2FsbGJhY2t9IG1hdGNoXG4gICAgICogQSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IGRldGVybWluZXMgd2hldGhlciB0aGUgcm91dGUgbWF0Y2hlcyBhIGdpdmVuXG4gICAgICogYGZldGNoYCBldmVudCBieSByZXR1cm5pbmcgYSBub24tZmFsc3kgdmFsdWUuXG4gICAgICogQHBhcmFtIHt3b3JrYm94LXJvdXRpbmd+aGFuZGxlckNhbGxiYWNrfSBoYW5kbGVyIEEgY2FsbGJhY2tcbiAgICAgKiBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBQcm9taXNlIHJlc29sdmluZyB0byBhIFJlc3BvbnNlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbWV0aG9kPSdHRVQnXSBUaGUgSFRUUCBtZXRob2QgdG8gbWF0Y2ggdGhlIFJvdXRlXG4gICAgICogYWdhaW5zdC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihtYXRjaCwgaGFuZGxlciwgbWV0aG9kID0gZGVmYXVsdE1ldGhvZCkge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgYXNzZXJ0LmlzVHlwZShtYXRjaCwgJ2Z1bmN0aW9uJywge1xuICAgICAgICAgICAgICAgIG1vZHVsZU5hbWU6ICd3b3JrYm94LXJvdXRpbmcnLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ1JvdXRlJyxcbiAgICAgICAgICAgICAgICBmdW5jTmFtZTogJ2NvbnN0cnVjdG9yJyxcbiAgICAgICAgICAgICAgICBwYXJhbU5hbWU6ICdtYXRjaCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChtZXRob2QpIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQuaXNPbmVPZihtZXRob2QsIHZhbGlkTWV0aG9kcywgeyBwYXJhbU5hbWU6ICdtZXRob2QnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFRoZXNlIHZhbHVlcyBhcmUgcmVmZXJlbmNlZCBkaXJlY3RseSBieSBSb3V0ZXIgc28gY2Fubm90IGJlXG4gICAgICAgIC8vIGFsdGVyZWQgYnkgbWluaWZpY2F0b24uXG4gICAgICAgIHRoaXMuaGFuZGxlciA9IG5vcm1hbGl6ZUhhbmRsZXIoaGFuZGxlcik7XG4gICAgICAgIHRoaXMubWF0Y2ggPSBtYXRjaDtcbiAgICAgICAgdGhpcy5tZXRob2QgPSBtZXRob2Q7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHt3b3JrYm94LXJvdXRpbmctaGFuZGxlckNhbGxiYWNrfSBoYW5kbGVyIEEgY2FsbGJhY2tcbiAgICAgKiBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBQcm9taXNlIHJlc29sdmluZyB0byBhIFJlc3BvbnNlXG4gICAgICovXG4gICAgc2V0Q2F0Y2hIYW5kbGVyKGhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5jYXRjaEhhbmRsZXIgPSBub3JtYWxpemVIYW5kbGVyKGhhbmRsZXIpO1xuICAgIH1cbn1cbmV4cG9ydCB7IFJvdXRlIH07XG4iLCIvKlxuICBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG5cbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICd3b3JrYm94LWNvcmUvX3ByaXZhdGUvYXNzZXJ0LmpzJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ3dvcmtib3gtY29yZS9fcHJpdmF0ZS9sb2dnZXIuanMnO1xuaW1wb3J0IHsgUm91dGUgfSBmcm9tICcuL1JvdXRlLmpzJztcbmltcG9ydCAnLi9fdmVyc2lvbi5qcyc7XG4vKipcbiAqIFJlZ0V4cFJvdXRlIG1ha2VzIGl0IGVhc3kgdG8gY3JlYXRlIGEgcmVndWxhciBleHByZXNzaW9uIGJhc2VkXG4gKiB7QGxpbmsgd29ya2JveC1yb3V0aW5nLlJvdXRlfS5cbiAqXG4gKiBGb3Igc2FtZS1vcmlnaW4gcmVxdWVzdHMgdGhlIFJlZ0V4cCBvbmx5IG5lZWRzIHRvIG1hdGNoIHBhcnQgb2YgdGhlIFVSTC4gRm9yXG4gKiByZXF1ZXN0cyBhZ2FpbnN0IHRoaXJkLXBhcnR5IHNlcnZlcnMsIHlvdSBtdXN0IGRlZmluZSBhIFJlZ0V4cCB0aGF0IG1hdGNoZXNcbiAqIHRoZSBzdGFydCBvZiB0aGUgVVJMLlxuICpcbiAqIEBtZW1iZXJvZiB3b3JrYm94LXJvdXRpbmdcbiAqIEBleHRlbmRzIHdvcmtib3gtcm91dGluZy5Sb3V0ZVxuICovXG5jbGFzcyBSZWdFeHBSb3V0ZSBleHRlbmRzIFJvdXRlIHtcbiAgICAvKipcbiAgICAgKiBJZiB0aGUgcmVndWxhciBleHByZXNzaW9uIGNvbnRhaW5zXG4gICAgICogW2NhcHR1cmUgZ3JvdXBzXXtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9SZWdFeHAjZ3JvdXBpbmctYmFjay1yZWZlcmVuY2VzfSxcbiAgICAgKiB0aGUgY2FwdHVyZWQgdmFsdWVzIHdpbGwgYmUgcGFzc2VkIHRvIHRoZVxuICAgICAqIHtAbGluayB3b3JrYm94LXJvdXRpbmd+aGFuZGxlckNhbGxiYWNrfSBgcGFyYW1zYFxuICAgICAqIGFyZ3VtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZWdFeHB9IHJlZ0V4cCBUaGUgcmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIGFnYWluc3QgVVJMcy5cbiAgICAgKiBAcGFyYW0ge3dvcmtib3gtcm91dGluZ35oYW5kbGVyQ2FsbGJhY2t9IGhhbmRsZXIgQSBjYWxsYmFja1xuICAgICAqIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIFByb21pc2UgcmVzdWx0aW5nIGluIGEgUmVzcG9uc2UuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFttZXRob2Q9J0dFVCddIFRoZSBIVFRQIG1ldGhvZCB0byBtYXRjaCB0aGUgUm91dGVcbiAgICAgKiBhZ2FpbnN0LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlZ0V4cCwgaGFuZGxlciwgbWV0aG9kKSB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICBhc3NlcnQuaXNJbnN0YW5jZShyZWdFeHAsIFJlZ0V4cCwge1xuICAgICAgICAgICAgICAgIG1vZHVsZU5hbWU6ICd3b3JrYm94LXJvdXRpbmcnLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ1JlZ0V4cFJvdXRlJyxcbiAgICAgICAgICAgICAgICBmdW5jTmFtZTogJ2NvbnN0cnVjdG9yJyxcbiAgICAgICAgICAgICAgICBwYXJhbU5hbWU6ICdwYXR0ZXJuJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1hdGNoID0gKHsgdXJsIH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlZ0V4cC5leGVjKHVybC5ocmVmKTtcbiAgICAgICAgICAgIC8vIFJldHVybiBpbW1lZGlhdGVseSBpZiB0aGVyZSdzIG5vIG1hdGNoLlxuICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZXF1aXJlIHRoYXQgdGhlIG1hdGNoIHN0YXJ0IGF0IHRoZSBmaXJzdCBjaGFyYWN0ZXIgaW4gdGhlIFVSTCBzdHJpbmdcbiAgICAgICAgICAgIC8vIGlmIGl0J3MgYSBjcm9zcy1vcmlnaW4gcmVxdWVzdC5cbiAgICAgICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vR29vZ2xlQ2hyb21lL3dvcmtib3gvaXNzdWVzLzI4MSBmb3IgdGhlIGNvbnRleHRcbiAgICAgICAgICAgIC8vIGJlaGluZCB0aGlzIGJlaGF2aW9yLlxuICAgICAgICAgICAgaWYgKHVybC5vcmlnaW4gIT09IGxvY2F0aW9uLm9yaWdpbiAmJiByZXN1bHQuaW5kZXggIT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYFRoZSByZWd1bGFyIGV4cHJlc3Npb24gJyR7cmVnRXhwLnRvU3RyaW5nKCl9JyBvbmx5IHBhcnRpYWxseSBtYXRjaGVkIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYGFnYWluc3QgdGhlIGNyb3NzLW9yaWdpbiBVUkwgJyR7dXJsLnRvU3RyaW5nKCl9Jy4gUmVnRXhwUm91dGUncyB3aWxsIG9ubHkgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgaGFuZGxlIGNyb3NzLW9yaWdpbiByZXF1ZXN0cyBpZiB0aGV5IG1hdGNoIHRoZSBlbnRpcmUgVVJMLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB0aGUgcm91dGUgbWF0Y2hlcywgYnV0IHRoZXJlIGFyZW4ndCBhbnkgY2FwdHVyZSBncm91cHMgZGVmaW5lZCwgdGhlblxuICAgICAgICAgICAgLy8gdGhpcyB3aWxsIHJldHVybiBbXSwgd2hpY2ggaXMgdHJ1dGh5IGFuZCB0aGVyZWZvcmUgc3VmZmljaWVudCB0b1xuICAgICAgICAgICAgLy8gaW5kaWNhdGUgYSBtYXRjaC5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBjYXB0dXJlIGdyb3VwcywgdGhlbiBpdCB3aWxsIHJldHVybiB0aGVpciB2YWx1ZXMuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LnNsaWNlKDEpO1xuICAgICAgICB9O1xuICAgICAgICBzdXBlcihtYXRjaCwgaGFuZGxlciwgbWV0aG9kKTtcbiAgICB9XG59XG5leHBvcnQgeyBSZWdFeHBSb3V0ZSB9O1xuIiwiLypcbiAgQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuXG4gIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZVxuICBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXRcbiAgaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuXG4qL1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnd29ya2JveC1jb3JlL19wcml2YXRlL2Fzc2VydC5qcyc7XG5pbXBvcnQgeyBnZXRGcmllbmRseVVSTCB9IGZyb20gJ3dvcmtib3gtY29yZS9fcHJpdmF0ZS9nZXRGcmllbmRseVVSTC5qcyc7XG5pbXBvcnQgeyBkZWZhdWx0TWV0aG9kIH0gZnJvbSAnLi91dGlscy9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnd29ya2JveC1jb3JlL19wcml2YXRlL2xvZ2dlci5qcyc7XG5pbXBvcnQgeyBub3JtYWxpemVIYW5kbGVyIH0gZnJvbSAnLi91dGlscy9ub3JtYWxpemVIYW5kbGVyLmpzJztcbmltcG9ydCB7IFdvcmtib3hFcnJvciB9IGZyb20gJ3dvcmtib3gtY29yZS9fcHJpdmF0ZS9Xb3JrYm94RXJyb3IuanMnO1xuaW1wb3J0ICcuL192ZXJzaW9uLmpzJztcbi8qKlxuICogVGhlIFJvdXRlciBjYW4gYmUgdXNlZCB0byBwcm9jZXNzIGEgYEZldGNoRXZlbnRgIHVzaW5nIG9uZSBvciBtb3JlXG4gKiB7QGxpbmsgd29ya2JveC1yb3V0aW5nLlJvdXRlfSwgcmVzcG9uZGluZyB3aXRoIGEgYFJlc3BvbnNlYCBpZlxuICogYSBtYXRjaGluZyByb3V0ZSBleGlzdHMuXG4gKlxuICogSWYgbm8gcm91dGUgbWF0Y2hlcyBhIGdpdmVuIGEgcmVxdWVzdCwgdGhlIFJvdXRlciB3aWxsIHVzZSBhIFwiZGVmYXVsdFwiXG4gKiBoYW5kbGVyIGlmIG9uZSBpcyBkZWZpbmVkLlxuICpcbiAqIFNob3VsZCB0aGUgbWF0Y2hpbmcgUm91dGUgdGhyb3cgYW4gZXJyb3IsIHRoZSBSb3V0ZXIgd2lsbCB1c2UgYSBcImNhdGNoXCJcbiAqIGhhbmRsZXIgaWYgb25lIGlzIGRlZmluZWQgdG8gZ3JhY2VmdWxseSBkZWFsIHdpdGggaXNzdWVzIGFuZCByZXNwb25kIHdpdGggYVxuICogUmVxdWVzdC5cbiAqXG4gKiBJZiBhIHJlcXVlc3QgbWF0Y2hlcyBtdWx0aXBsZSByb3V0ZXMsIHRoZSAqKmVhcmxpZXN0KiogcmVnaXN0ZXJlZCByb3V0ZSB3aWxsXG4gKiBiZSB1c2VkIHRvIHJlc3BvbmQgdG8gdGhlIHJlcXVlc3QuXG4gKlxuICogQG1lbWJlcm9mIHdvcmtib3gtcm91dGluZ1xuICovXG5jbGFzcyBSb3V0ZXIge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGEgbmV3IFJvdXRlci5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fcm91dGVzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9kZWZhdWx0SGFuZGxlck1hcCA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7TWFwPHN0cmluZywgQXJyYXk8d29ya2JveC1yb3V0aW5nLlJvdXRlPj59IHJvdXRlcyBBIGBNYXBgIG9mIEhUVFBcbiAgICAgKiBtZXRob2QgbmFtZSAoJ0dFVCcsIGV0Yy4pIHRvIGFuIGFycmF5IG9mIGFsbCB0aGUgY29ycmVzcG9uZGluZyBgUm91dGVgXG4gICAgICogaW5zdGFuY2VzIHRoYXQgYXJlIHJlZ2lzdGVyZWQuXG4gICAgICovXG4gICAgZ2V0IHJvdXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JvdXRlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIGZldGNoIGV2ZW50IGxpc3RlbmVyIHRvIHJlc3BvbmQgdG8gZXZlbnRzIHdoZW4gYSByb3V0ZSBtYXRjaGVzXG4gICAgICogdGhlIGV2ZW50J3MgcmVxdWVzdC5cbiAgICAgKi9cbiAgICBhZGRGZXRjaExpc3RlbmVyKCkge1xuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8yODM1NyNpc3N1ZWNvbW1lbnQtNDM2NDg0NzA1XG4gICAgICAgIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcignZmV0Y2gnLCAoKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHJlcXVlc3QgfSA9IGV2ZW50O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VQcm9taXNlID0gdGhpcy5oYW5kbGVSZXF1ZXN0KHsgcmVxdWVzdCwgZXZlbnQgfSk7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2VQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucmVzcG9uZFdpdGgocmVzcG9uc2VQcm9taXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbWVzc2FnZSBldmVudCBsaXN0ZW5lciBmb3IgVVJMcyB0byBjYWNoZSBmcm9tIHRoZSB3aW5kb3cuXG4gICAgICogVGhpcyBpcyB1c2VmdWwgdG8gY2FjaGUgcmVzb3VyY2VzIGxvYWRlZCBvbiB0aGUgcGFnZSBwcmlvciB0byB3aGVuIHRoZVxuICAgICAqIHNlcnZpY2Ugd29ya2VyIHN0YXJ0ZWQgY29udHJvbGxpbmcgaXQuXG4gICAgICpcbiAgICAgKiBUaGUgZm9ybWF0IG9mIHRoZSBtZXNzYWdlIGRhdGEgc2VudCBmcm9tIHRoZSB3aW5kb3cgc2hvdWxkIGJlIGFzIGZvbGxvd3MuXG4gICAgICogV2hlcmUgdGhlIGB1cmxzVG9DYWNoZWAgYXJyYXkgbWF5IGNvbnNpc3Qgb2YgVVJMIHN0cmluZ3Mgb3IgYW4gYXJyYXkgb2ZcbiAgICAgKiBVUkwgc3RyaW5nICsgYHJlcXVlc3RJbml0YCBvYmplY3QgKHRoZSBzYW1lIGFzIHlvdSdkIHBhc3MgdG8gYGZldGNoKClgKS5cbiAgICAgKlxuICAgICAqIGBgYFxuICAgICAqIHtcbiAgICAgKiAgIHR5cGU6ICdDQUNIRV9VUkxTJyxcbiAgICAgKiAgIHBheWxvYWQ6IHtcbiAgICAgKiAgICAgdXJsc1RvQ2FjaGU6IFtcbiAgICAgKiAgICAgICAnLi9zY3JpcHQxLmpzJyxcbiAgICAgKiAgICAgICAnLi9zY3JpcHQyLmpzJyxcbiAgICAgKiAgICAgICBbJy4vc2NyaXB0My5qcycsIHttb2RlOiAnbm8tY29ycyd9XSxcbiAgICAgKiAgICAgXSxcbiAgICAgKiAgIH0sXG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGFkZENhY2hlTGlzdGVuZXIoKSB7XG4gICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzI4MzU3I2lzc3VlY29tbWVudC00MzY0ODQ3MDVcbiAgICAgICAgc2VsZi5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKChldmVudCkgPT4ge1xuICAgICAgICAgICAgLy8gZXZlbnQuZGF0YSBpcyB0eXBlICdhbnknXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgICAgICAgICBpZiAoZXZlbnQuZGF0YSAmJiBldmVudC5kYXRhLnR5cGUgPT09ICdDQUNIRV9VUkxTJykge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbiAgICAgICAgICAgICAgICBjb25zdCB7IHBheWxvYWQgfSA9IGV2ZW50LmRhdGE7XG4gICAgICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBDYWNoaW5nIFVSTHMgZnJvbSB0aGUgd2luZG93YCwgcGF5bG9hZC51cmxzVG9DYWNoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RQcm9taXNlcyA9IFByb21pc2UuYWxsKHBheWxvYWQudXJsc1RvQ2FjaGUubWFwKChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkgPSBbZW50cnldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCguLi5lbnRyeSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZVJlcXVlc3QoeyByZXF1ZXN0LCBldmVudCB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhwaGlsaXB3YWx0b24pOiBUeXBlU2NyaXB0IGVycm9ycyB3aXRob3V0IHRoaXMgdHlwZWNhc3QgZm9yXG4gICAgICAgICAgICAgICAgICAgIC8vIHNvbWUgcmVhc29uIChwcm9iYWJseSBhIGJ1ZykuIFRoZSByZWFsIHR5cGUgaGVyZSBzaG91bGQgd29yayBidXRcbiAgICAgICAgICAgICAgICAgICAgLy8gZG9lc24ndDogYEFycmF5PFByb21pc2U8UmVzcG9uc2U+IHwgdW5kZWZpbmVkPmAuXG4gICAgICAgICAgICAgICAgfSkpOyAvLyBUeXBlU2NyaXB0XG4gICAgICAgICAgICAgICAgZXZlbnQud2FpdFVudGlsKHJlcXVlc3RQcm9taXNlcyk7XG4gICAgICAgICAgICAgICAgLy8gSWYgYSBNZXNzYWdlQ2hhbm5lbCB3YXMgdXNlZCwgcmVwbHkgdG8gdGhlIG1lc3NhZ2Ugb24gc3VjY2Vzcy5cbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQucG9ydHMgJiYgZXZlbnQucG9ydHNbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgdm9pZCByZXF1ZXN0UHJvbWlzZXMudGhlbigoKSA9PiBldmVudC5wb3J0c1swXS5wb3N0TWVzc2FnZSh0cnVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGx5IHRoZSByb3V0aW5nIHJ1bGVzIHRvIGEgRmV0Y2hFdmVudCBvYmplY3QgdG8gZ2V0IGEgUmVzcG9uc2UgZnJvbSBhblxuICAgICAqIGFwcHJvcHJpYXRlIFJvdXRlJ3MgaGFuZGxlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICogQHBhcmFtIHtSZXF1ZXN0fSBvcHRpb25zLnJlcXVlc3QgVGhlIHJlcXVlc3QgdG8gaGFuZGxlLlxuICAgICAqIEBwYXJhbSB7RXh0ZW5kYWJsZUV2ZW50fSBvcHRpb25zLmV2ZW50IFRoZSBldmVudCB0aGF0IHRyaWdnZXJlZCB0aGVcbiAgICAgKiAgICAgcmVxdWVzdC5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFJlc3BvbnNlPnx1bmRlZmluZWR9IEEgcHJvbWlzZSBpcyByZXR1cm5lZCBpZiBhXG4gICAgICogICAgIHJlZ2lzdGVyZWQgcm91dGUgY2FuIGhhbmRsZSB0aGUgcmVxdWVzdC4gSWYgdGhlcmUgaXMgbm8gbWF0Y2hpbmdcbiAgICAgKiAgICAgcm91dGUgYW5kIHRoZXJlJ3Mgbm8gYGRlZmF1bHRIYW5kbGVyYCwgYHVuZGVmaW5lZGAgaXMgcmV0dXJuZWQuXG4gICAgICovXG4gICAgaGFuZGxlUmVxdWVzdCh7IHJlcXVlc3QsIGV2ZW50LCB9KSB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICBhc3NlcnQuaXNJbnN0YW5jZShyZXF1ZXN0LCBSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgbW9kdWxlTmFtZTogJ3dvcmtib3gtcm91dGluZycsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnUm91dGVyJyxcbiAgICAgICAgICAgICAgICBmdW5jTmFtZTogJ2hhbmRsZVJlcXVlc3QnLFxuICAgICAgICAgICAgICAgIHBhcmFtTmFtZTogJ29wdGlvbnMucmVxdWVzdCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHJlcXVlc3QudXJsLCBsb2NhdGlvbi5ocmVmKTtcbiAgICAgICAgaWYgKCF1cmwucHJvdG9jb2wuc3RhcnRzV2l0aCgnaHR0cCcpKSB7XG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgV29ya2JveCBSb3V0ZXIgb25seSBzdXBwb3J0cyBVUkxzIHRoYXQgc3RhcnQgd2l0aCAnaHR0cCcuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2FtZU9yaWdpbiA9IHVybC5vcmlnaW4gPT09IGxvY2F0aW9uLm9yaWdpbjtcbiAgICAgICAgY29uc3QgeyBwYXJhbXMsIHJvdXRlIH0gPSB0aGlzLmZpbmRNYXRjaGluZ1JvdXRlKHtcbiAgICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgICAgIHNhbWVPcmlnaW4sXG4gICAgICAgICAgICB1cmwsXG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgaGFuZGxlciA9IHJvdXRlICYmIHJvdXRlLmhhbmRsZXI7XG4gICAgICAgIGNvbnN0IGRlYnVnTWVzc2FnZXMgPSBbXTtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgZGVidWdNZXNzYWdlcy5wdXNoKFtgRm91bmQgYSByb3V0ZSB0byBoYW5kbGUgdGhpcyByZXF1ZXN0OmAsIHJvdXRlXSk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z01lc3NhZ2VzLnB1c2goW1xuICAgICAgICAgICAgICAgICAgICAgICAgYFBhc3NpbmcgdGhlIGZvbGxvd2luZyBwYXJhbXMgdG8gdGhlIHJvdXRlJ3MgaGFuZGxlcjpgLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhIGhhbmRsZXIgYmVjYXVzZSB0aGVyZSB3YXMgbm8gbWF0Y2hpbmcgcm91dGUsIHRoZW5cbiAgICAgICAgLy8gZmFsbCBiYWNrIHRvIGRlZmF1bHRIYW5kbGVyIGlmIHRoYXQncyBkZWZpbmVkLlxuICAgICAgICBjb25zdCBtZXRob2QgPSByZXF1ZXN0Lm1ldGhvZDtcbiAgICAgICAgaWYgKCFoYW5kbGVyICYmIHRoaXMuX2RlZmF1bHRIYW5kbGVyTWFwLmhhcyhtZXRob2QpKSB7XG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAgIGRlYnVnTWVzc2FnZXMucHVzaChgRmFpbGVkIHRvIGZpbmQgYSBtYXRjaGluZyByb3V0ZS4gRmFsbGluZyBgICtcbiAgICAgICAgICAgICAgICAgICAgYGJhY2sgdG8gdGhlIGRlZmF1bHQgaGFuZGxlciBmb3IgJHttZXRob2R9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGFuZGxlciA9IHRoaXMuX2RlZmF1bHRIYW5kbGVyTWFwLmdldChtZXRob2QpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaGFuZGxlcikge1xuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgICAgICAvLyBObyBoYW5kbGVyIHNvIFdvcmtib3ggd2lsbCBkbyBub3RoaW5nLiBJZiBsb2dzIGlzIHNldCBvZiBkZWJ1Z1xuICAgICAgICAgICAgICAgIC8vIGkuZS4gdmVyYm9zZSwgd2Ugc2hvdWxkIHByaW50IG91dCB0aGlzIGluZm9ybWF0aW9uLlxuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgTm8gcm91dGUgZm91bmQgZm9yOiAke2dldEZyaWVuZGx5VVJMKHVybCl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIC8vIFdlIGhhdmUgYSBoYW5kbGVyLCBtZWFuaW5nIFdvcmtib3ggaXMgZ29pbmcgdG8gaGFuZGxlIHRoZSByb3V0ZS5cbiAgICAgICAgICAgIC8vIHByaW50IHRoZSByb3V0aW5nIGRldGFpbHMgdG8gdGhlIGNvbnNvbGUuXG4gICAgICAgICAgICBsb2dnZXIuZ3JvdXBDb2xsYXBzZWQoYFJvdXRlciBpcyByZXNwb25kaW5nIHRvOiAke2dldEZyaWVuZGx5VVJMKHVybCl9YCk7XG4gICAgICAgICAgICBkZWJ1Z01lc3NhZ2VzLmZvckVhY2goKG1zZykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG1zZykpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmxvZyguLi5tc2cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmxvZyhtc2cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbG9nZ2VyLmdyb3VwRW5kKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV3JhcCBpbiB0cnkgYW5kIGNhdGNoIGluIGNhc2UgdGhlIGhhbmRsZSBtZXRob2QgdGhyb3dzIGEgc3luY2hyb25vdXNcbiAgICAgICAgLy8gZXJyb3IuIEl0IHNob3VsZCBzdGlsbCBjYWxsYmFjayB0byB0aGUgY2F0Y2ggaGFuZGxlci5cbiAgICAgICAgbGV0IHJlc3BvbnNlUHJvbWlzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3BvbnNlUHJvbWlzZSA9IGhhbmRsZXIuaGFuZGxlKHsgdXJsLCByZXF1ZXN0LCBldmVudCwgcGFyYW1zIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlUHJvbWlzZSA9IFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gR2V0IHJvdXRlJ3MgY2F0Y2ggaGFuZGxlciwgaWYgaXQgZXhpc3RzXG4gICAgICAgIGNvbnN0IGNhdGNoSGFuZGxlciA9IHJvdXRlICYmIHJvdXRlLmNhdGNoSGFuZGxlcjtcbiAgICAgICAgaWYgKHJlc3BvbnNlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UgJiZcbiAgICAgICAgICAgICh0aGlzLl9jYXRjaEhhbmRsZXIgfHwgY2F0Y2hIYW5kbGVyKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VQcm9taXNlID0gcmVzcG9uc2VQcm9taXNlLmNhdGNoKGFzeW5jIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgcm91dGUgY2F0Y2ggaGFuZGxlciwgcHJvY2VzcyB0aGF0IGZpcnN0XG4gICAgICAgICAgICAgICAgaWYgKGNhdGNoSGFuZGxlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RpbGwgaW5jbHVkZSBVUkwgaGVyZSBhcyBpdCB3aWxsIGJlIGFzeW5jIGZyb20gdGhlIGNvbnNvbGUgZ3JvdXBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBtYXkgbm90IG1ha2Ugc2Vuc2Ugd2l0aG91dCB0aGUgVVJMXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZ3JvdXBDb2xsYXBzZWQoYEVycm9yIHRocm93biB3aGVuIHJlc3BvbmRpbmcgdG86IGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAgJHtnZXRGcmllbmRseVVSTCh1cmwpfS4gRmFsbGluZyBiYWNrIHRvIHJvdXRlJ3MgQ2F0Y2ggSGFuZGxlci5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgRXJyb3IgdGhyb3duIGJ5OmAsIHJvdXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmdyb3VwRW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBjYXRjaEhhbmRsZXIuaGFuZGxlKHsgdXJsLCByZXF1ZXN0LCBldmVudCwgcGFyYW1zIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChjYXRjaEVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhdGNoRXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnIgPSBjYXRjaEVycjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fY2F0Y2hIYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTdGlsbCBpbmNsdWRlIFVSTCBoZXJlIGFzIGl0IHdpbGwgYmUgYXN5bmMgZnJvbSB0aGUgY29uc29sZSBncm91cFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIG1heSBub3QgbWFrZSBzZW5zZSB3aXRob3V0IHRoZSBVUkxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5ncm91cENvbGxhcHNlZChgRXJyb3IgdGhyb3duIHdoZW4gcmVzcG9uZGluZyB0bzogYCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYCAke2dldEZyaWVuZGx5VVJMKHVybCl9LiBGYWxsaW5nIGJhY2sgdG8gZ2xvYmFsIENhdGNoIEhhbmRsZXIuYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIHRocm93biBieTpgLCByb3V0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5ncm91cEVuZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYXRjaEhhbmRsZXIuaGFuZGxlKHsgdXJsLCByZXF1ZXN0LCBldmVudCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlUHJvbWlzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGEgcmVxdWVzdCBhbmQgVVJMIChhbmQgb3B0aW9uYWxseSBhbiBldmVudCkgYWdhaW5zdCB0aGUgbGlzdCBvZlxuICAgICAqIHJlZ2lzdGVyZWQgcm91dGVzLCBhbmQgaWYgdGhlcmUncyBhIG1hdGNoLCByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nXG4gICAgICogcm91dGUgYWxvbmcgd2l0aCBhbnkgcGFyYW1zIGdlbmVyYXRlZCBieSB0aGUgbWF0Y2guXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7VVJMfSBvcHRpb25zLnVybFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5zYW1lT3JpZ2luIFRoZSByZXN1bHQgb2YgY29tcGFyaW5nIGB1cmwub3JpZ2luYFxuICAgICAqICAgICBhZ2FpbnN0IHRoZSBjdXJyZW50IG9yaWdpbi5cbiAgICAgKiBAcGFyYW0ge1JlcXVlc3R9IG9wdGlvbnMucmVxdWVzdCBUaGUgcmVxdWVzdCB0byBtYXRjaC5cbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBvcHRpb25zLmV2ZW50IFRoZSBjb3JyZXNwb25kaW5nIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQW4gb2JqZWN0IHdpdGggYHJvdXRlYCBhbmQgYHBhcmFtc2AgcHJvcGVydGllcy5cbiAgICAgKiAgICAgVGhleSBhcmUgcG9wdWxhdGVkIGlmIGEgbWF0Y2hpbmcgcm91dGUgd2FzIGZvdW5kIG9yIGB1bmRlZmluZWRgXG4gICAgICogICAgIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBmaW5kTWF0Y2hpbmdSb3V0ZSh7IHVybCwgc2FtZU9yaWdpbiwgcmVxdWVzdCwgZXZlbnQsIH0pIHtcbiAgICAgICAgY29uc3Qgcm91dGVzID0gdGhpcy5fcm91dGVzLmdldChyZXF1ZXN0Lm1ldGhvZCkgfHwgW107XG4gICAgICAgIGZvciAoY29uc3Qgcm91dGUgb2Ygcm91dGVzKSB7XG4gICAgICAgICAgICBsZXQgcGFyYW1zO1xuICAgICAgICAgICAgLy8gcm91dGUubWF0Y2ggcmV0dXJucyB0eXBlIGFueSwgbm90IHBvc3NpYmxlIHRvIGNoYW5nZSByaWdodCBub3cuXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG4gICAgICAgICAgICBjb25zdCBtYXRjaFJlc3VsdCA9IHJvdXRlLm1hdGNoKHsgdXJsLCBzYW1lT3JpZ2luLCByZXF1ZXN0LCBldmVudCB9KTtcbiAgICAgICAgICAgIGlmIChtYXRjaFJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdhcm4gZGV2ZWxvcGVycyB0aGF0IHVzaW5nIGFuIGFzeW5jIG1hdGNoQ2FsbGJhY2sgaXMgYWxtb3N0IGFsd2F5c1xuICAgICAgICAgICAgICAgICAgICAvLyBub3QgdGhlIHJpZ2h0IHRoaW5nIHRvIGRvLlxuICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hSZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihgV2hpbGUgcm91dGluZyAke2dldEZyaWVuZGx5VVJMKHVybCl9LCBhbiBhc3luYyBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgbWF0Y2hDYWxsYmFjayBmdW5jdGlvbiB3YXMgdXNlZC4gUGxlYXNlIGNvbnZlcnQgdGhlIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBmb2xsb3dpbmcgcm91dGUgdG8gdXNlIGEgc3luY2hyb25vdXMgbWF0Y2hDYWxsYmFjayBmdW5jdGlvbjpgLCByb3V0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Hb29nbGVDaHJvbWUvd29ya2JveC9pc3N1ZXMvMjA3OVxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbiAgICAgICAgICAgICAgICBwYXJhbXMgPSBtYXRjaFJlc3VsdDtcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwYXJhbXMpICYmIHBhcmFtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSW5zdGVhZCBvZiBwYXNzaW5nIGFuIGVtcHR5IGFycmF5IGluIGFzIHBhcmFtcywgdXNlIHVuZGVmaW5lZC5cbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtYXRjaFJlc3VsdC5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0ICYmIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMobWF0Y2hSZXN1bHQpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbnN0ZWFkIG9mIHBhc3NpbmcgYW4gZW1wdHkgb2JqZWN0IGluIGFzIHBhcmFtcywgdXNlIHVuZGVmaW5lZC5cbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWF0Y2hSZXN1bHQgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBGb3IgdGhlIGJvb2xlYW4gdmFsdWUgdHJ1ZSAocmF0aGVyIHRoYW4ganVzdCBzb21ldGhpbmcgdHJ1dGgteSksXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvbid0IHNldCBwYXJhbXMuXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vR29vZ2xlQ2hyb21lL3dvcmtib3gvcHVsbC8yMTM0I2lzc3VlY29tbWVudC01MTM5MjQzNTNcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gZWFybHkgaWYgaGF2ZSBhIG1hdGNoLlxuICAgICAgICAgICAgICAgIHJldHVybiB7IHJvdXRlLCBwYXJhbXMgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBubyBtYXRjaCB3YXMgZm91bmQgYWJvdmUsIHJldHVybiBhbmQgZW1wdHkgb2JqZWN0LlxuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlZmluZSBhIGRlZmF1bHQgYGhhbmRsZXJgIHRoYXQncyBjYWxsZWQgd2hlbiBubyByb3V0ZXMgZXhwbGljaXRseVxuICAgICAqIG1hdGNoIHRoZSBpbmNvbWluZyByZXF1ZXN0LlxuICAgICAqXG4gICAgICogRWFjaCBIVFRQIG1ldGhvZCAoJ0dFVCcsICdQT1NUJywgZXRjLikgZ2V0cyBpdHMgb3duIGRlZmF1bHQgaGFuZGxlci5cbiAgICAgKlxuICAgICAqIFdpdGhvdXQgYSBkZWZhdWx0IGhhbmRsZXIsIHVubWF0Y2hlZCByZXF1ZXN0cyB3aWxsIGdvIGFnYWluc3QgdGhlXG4gICAgICogbmV0d29yayBhcyBpZiB0aGVyZSB3ZXJlIG5vIHNlcnZpY2Ugd29ya2VyIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3dvcmtib3gtcm91dGluZ35oYW5kbGVyQ2FsbGJhY2t9IGhhbmRsZXIgQSBjYWxsYmFja1xuICAgICAqIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIFByb21pc2UgcmVzdWx0aW5nIGluIGEgUmVzcG9uc2UuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFttZXRob2Q9J0dFVCddIFRoZSBIVFRQIG1ldGhvZCB0byBhc3NvY2lhdGUgd2l0aCB0aGlzXG4gICAgICogZGVmYXVsdCBoYW5kbGVyLiBFYWNoIG1ldGhvZCBoYXMgaXRzIG93biBkZWZhdWx0LlxuICAgICAqL1xuICAgIHNldERlZmF1bHRIYW5kbGVyKGhhbmRsZXIsIG1ldGhvZCA9IGRlZmF1bHRNZXRob2QpIHtcbiAgICAgICAgdGhpcy5fZGVmYXVsdEhhbmRsZXJNYXAuc2V0KG1ldGhvZCwgbm9ybWFsaXplSGFuZGxlcihoYW5kbGVyKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIGEgUm91dGUgdGhyb3dzIGFuIGVycm9yIHdoaWxlIGhhbmRsaW5nIGEgcmVxdWVzdCwgdGhpcyBgaGFuZGxlcmBcbiAgICAgKiB3aWxsIGJlIGNhbGxlZCBhbmQgZ2l2ZW4gYSBjaGFuY2UgdG8gcHJvdmlkZSBhIHJlc3BvbnNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHt3b3JrYm94LXJvdXRpbmd+aGFuZGxlckNhbGxiYWNrfSBoYW5kbGVyIEEgY2FsbGJhY2tcbiAgICAgKiBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBQcm9taXNlIHJlc3VsdGluZyBpbiBhIFJlc3BvbnNlLlxuICAgICAqL1xuICAgIHNldENhdGNoSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuX2NhdGNoSGFuZGxlciA9IG5vcm1hbGl6ZUhhbmRsZXIoaGFuZGxlcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIHJvdXRlIHdpdGggdGhlIHJvdXRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7d29ya2JveC1yb3V0aW5nLlJvdXRlfSByb3V0ZSBUaGUgcm91dGUgdG8gcmVnaXN0ZXIuXG4gICAgICovXG4gICAgcmVnaXN0ZXJSb3V0ZShyb3V0ZSkge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgYXNzZXJ0LmlzVHlwZShyb3V0ZSwgJ29iamVjdCcsIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVOYW1lOiAnd29ya2JveC1yb3V0aW5nJyxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdSb3V0ZXInLFxuICAgICAgICAgICAgICAgIGZ1bmNOYW1lOiAncmVnaXN0ZXJSb3V0ZScsXG4gICAgICAgICAgICAgICAgcGFyYW1OYW1lOiAncm91dGUnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhc3NlcnQuaGFzTWV0aG9kKHJvdXRlLCAnbWF0Y2gnLCB7XG4gICAgICAgICAgICAgICAgbW9kdWxlTmFtZTogJ3dvcmtib3gtcm91dGluZycsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnUm91dGVyJyxcbiAgICAgICAgICAgICAgICBmdW5jTmFtZTogJ3JlZ2lzdGVyUm91dGUnLFxuICAgICAgICAgICAgICAgIHBhcmFtTmFtZTogJ3JvdXRlJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXNzZXJ0LmlzVHlwZShyb3V0ZS5oYW5kbGVyLCAnb2JqZWN0Jywge1xuICAgICAgICAgICAgICAgIG1vZHVsZU5hbWU6ICd3b3JrYm94LXJvdXRpbmcnLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ1JvdXRlcicsXG4gICAgICAgICAgICAgICAgZnVuY05hbWU6ICdyZWdpc3RlclJvdXRlJyxcbiAgICAgICAgICAgICAgICBwYXJhbU5hbWU6ICdyb3V0ZScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFzc2VydC5oYXNNZXRob2Qocm91dGUuaGFuZGxlciwgJ2hhbmRsZScsIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVOYW1lOiAnd29ya2JveC1yb3V0aW5nJyxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdSb3V0ZXInLFxuICAgICAgICAgICAgICAgIGZ1bmNOYW1lOiAncmVnaXN0ZXJSb3V0ZScsXG4gICAgICAgICAgICAgICAgcGFyYW1OYW1lOiAncm91dGUuaGFuZGxlcicsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFzc2VydC5pc1R5cGUocm91dGUubWV0aG9kLCAnc3RyaW5nJywge1xuICAgICAgICAgICAgICAgIG1vZHVsZU5hbWU6ICd3b3JrYm94LXJvdXRpbmcnLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ1JvdXRlcicsXG4gICAgICAgICAgICAgICAgZnVuY05hbWU6ICdyZWdpc3RlclJvdXRlJyxcbiAgICAgICAgICAgICAgICBwYXJhbU5hbWU6ICdyb3V0ZS5tZXRob2QnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9yb3V0ZXMuaGFzKHJvdXRlLm1ldGhvZCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3JvdXRlcy5zZXQocm91dGUubWV0aG9kLCBbXSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gR2l2ZSBwcmVjZWRlbmNlIHRvIGFsbCBvZiB0aGUgZWFybGllciByb3V0ZXMgYnkgYWRkaW5nIHRoaXMgYWRkaXRpb25hbFxuICAgICAgICAvLyByb3V0ZSB0byB0aGUgZW5kIG9mIHRoZSBhcnJheS5cbiAgICAgICAgdGhpcy5fcm91dGVzLmdldChyb3V0ZS5tZXRob2QpLnB1c2gocm91dGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbnJlZ2lzdGVycyBhIHJvdXRlIHdpdGggdGhlIHJvdXRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7d29ya2JveC1yb3V0aW5nLlJvdXRlfSByb3V0ZSBUaGUgcm91dGUgdG8gdW5yZWdpc3Rlci5cbiAgICAgKi9cbiAgICB1bnJlZ2lzdGVyUm91dGUocm91dGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9yb3V0ZXMuaGFzKHJvdXRlLm1ldGhvZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBXb3JrYm94RXJyb3IoJ3VucmVnaXN0ZXItcm91dGUtYnV0LW5vdC1mb3VuZC13aXRoLW1ldGhvZCcsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IHJvdXRlLm1ldGhvZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJvdXRlSW5kZXggPSB0aGlzLl9yb3V0ZXMuZ2V0KHJvdXRlLm1ldGhvZCkuaW5kZXhPZihyb3V0ZSk7XG4gICAgICAgIGlmIChyb3V0ZUluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuX3JvdXRlcy5nZXQocm91dGUubWV0aG9kKS5zcGxpY2Uocm91dGVJbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgV29ya2JveEVycm9yKCd1bnJlZ2lzdGVyLXJvdXRlLXJvdXRlLW5vdC1yZWdpc3RlcmVkJyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgeyBSb3V0ZXIgfTtcbiIsIi8qXG4gIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcblxuICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGVcbiAgbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0XG4gIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULlxuKi9cbmltcG9ydCB7IFJvdXRlciB9IGZyb20gJy4uL1JvdXRlci5qcyc7XG5pbXBvcnQgJy4uL192ZXJzaW9uLmpzJztcbmxldCBkZWZhdWx0Um91dGVyO1xuLyoqXG4gKiBDcmVhdGVzIGEgbmV3LCBzaW5nbGV0b24gUm91dGVyIGluc3RhbmNlIGlmIG9uZSBkb2VzIG5vdCBleGlzdC4gSWYgb25lXG4gKiBkb2VzIGFscmVhZHkgZXhpc3QsIHRoYXQgaW5zdGFuY2UgaXMgcmV0dXJuZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEByZXR1cm4ge1JvdXRlcn1cbiAqL1xuZXhwb3J0IGNvbnN0IGdldE9yQ3JlYXRlRGVmYXVsdFJvdXRlciA9ICgpID0+IHtcbiAgICBpZiAoIWRlZmF1bHRSb3V0ZXIpIHtcbiAgICAgICAgZGVmYXVsdFJvdXRlciA9IG5ldyBSb3V0ZXIoKTtcbiAgICAgICAgLy8gVGhlIGhlbHBlcnMgdGhhdCB1c2UgdGhlIGRlZmF1bHQgUm91dGVyIGFzc3VtZSB0aGVzZSBsaXN0ZW5lcnMgZXhpc3QuXG4gICAgICAgIGRlZmF1bHRSb3V0ZXIuYWRkRmV0Y2hMaXN0ZW5lcigpO1xuICAgICAgICBkZWZhdWx0Um91dGVyLmFkZENhY2hlTGlzdGVuZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmF1bHRSb3V0ZXI7XG59O1xuIiwiLypcbiAgQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuXG4gIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZVxuICBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXRcbiAgaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuXG4qL1xuaW1wb3J0ICcuLi9fdmVyc2lvbi5qcyc7XG5jb25zdCBfY2FjaGVOYW1lRGV0YWlscyA9IHtcbiAgICBnb29nbGVBbmFseXRpY3M6ICdnb29nbGVBbmFseXRpY3MnLFxuICAgIHByZWNhY2hlOiAncHJlY2FjaGUtdjInLFxuICAgIHByZWZpeDogJ3dvcmtib3gnLFxuICAgIHJ1bnRpbWU6ICdydW50aW1lJyxcbiAgICBzdWZmaXg6IHR5cGVvZiByZWdpc3RyYXRpb24gIT09ICd1bmRlZmluZWQnID8gcmVnaXN0cmF0aW9uLnNjb3BlIDogJycsXG59O1xuY29uc3QgX2NyZWF0ZUNhY2hlTmFtZSA9IChjYWNoZU5hbWUpID0+IHtcbiAgICByZXR1cm4gW19jYWNoZU5hbWVEZXRhaWxzLnByZWZpeCwgY2FjaGVOYW1lLCBfY2FjaGVOYW1lRGV0YWlscy5zdWZmaXhdXG4gICAgICAgIC5maWx0ZXIoKHZhbHVlKSA9PiB2YWx1ZSAmJiB2YWx1ZS5sZW5ndGggPiAwKVxuICAgICAgICAuam9pbignLScpO1xufTtcbmNvbnN0IGVhY2hDYWNoZU5hbWVEZXRhaWwgPSAoZm4pID0+IHtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhfY2FjaGVOYW1lRGV0YWlscykpIHtcbiAgICAgICAgZm4oa2V5KTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IGNhY2hlTmFtZXMgPSB7XG4gICAgdXBkYXRlRGV0YWlsczogKGRldGFpbHMpID0+IHtcbiAgICAgICAgZWFjaENhY2hlTmFtZURldGFpbCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRldGFpbHNba2V5XSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBfY2FjaGVOYW1lRGV0YWlsc1trZXldID0gZGV0YWlsc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGdldEdvb2dsZUFuYWx5dGljc05hbWU6ICh1c2VyQ2FjaGVOYW1lKSA9PiB7XG4gICAgICAgIHJldHVybiB1c2VyQ2FjaGVOYW1lIHx8IF9jcmVhdGVDYWNoZU5hbWUoX2NhY2hlTmFtZURldGFpbHMuZ29vZ2xlQW5hbHl0aWNzKTtcbiAgICB9LFxuICAgIGdldFByZWNhY2hlTmFtZTogKHVzZXJDYWNoZU5hbWUpID0+IHtcbiAgICAgICAgcmV0dXJuIHVzZXJDYWNoZU5hbWUgfHwgX2NyZWF0ZUNhY2hlTmFtZShfY2FjaGVOYW1lRGV0YWlscy5wcmVjYWNoZSk7XG4gICAgfSxcbiAgICBnZXRQcmVmaXg6ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIF9jYWNoZU5hbWVEZXRhaWxzLnByZWZpeDtcbiAgICB9LFxuICAgIGdldFJ1bnRpbWVOYW1lOiAodXNlckNhY2hlTmFtZSkgPT4ge1xuICAgICAgICByZXR1cm4gdXNlckNhY2hlTmFtZSB8fCBfY3JlYXRlQ2FjaGVOYW1lKF9jYWNoZU5hbWVEZXRhaWxzLnJ1bnRpbWUpO1xuICAgIH0sXG4gICAgZ2V0U3VmZml4OiAoKSA9PiB7XG4gICAgICAgIHJldHVybiBfY2FjaGVOYW1lRGV0YWlscy5zdWZmaXg7XG4gICAgfSxcbn07XG4iLCIvKlxuICBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZVxuICBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXRcbiAgaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuXG4qL1xuaW1wb3J0ICcuLi9fdmVyc2lvbi5qcyc7XG5mdW5jdGlvbiBzdHJpcFBhcmFtcyhmdWxsVVJMLCBpZ25vcmVQYXJhbXMpIHtcbiAgICBjb25zdCBzdHJpcHBlZFVSTCA9IG5ldyBVUkwoZnVsbFVSTCk7XG4gICAgZm9yIChjb25zdCBwYXJhbSBvZiBpZ25vcmVQYXJhbXMpIHtcbiAgICAgICAgc3RyaXBwZWRVUkwuc2VhcmNoUGFyYW1zLmRlbGV0ZShwYXJhbSk7XG4gICAgfVxuICAgIHJldHVybiBzdHJpcHBlZFVSTC5ocmVmO1xufVxuLyoqXG4gKiBNYXRjaGVzIGFuIGl0ZW0gaW4gdGhlIGNhY2hlLCBpZ25vcmluZyBzcGVjaWZpYyBVUkwgcGFyYW1zLiBUaGlzIGlzIHNpbWlsYXJcbiAqIHRvIHRoZSBgaWdub3JlU2VhcmNoYCBvcHRpb24sIGJ1dCBpdCBhbGxvd3MgeW91IHRvIGlnbm9yZSBqdXN0IHNwZWNpZmljXG4gKiBwYXJhbXMgKHdoaWxlIGNvbnRpbnVpbmcgdG8gbWF0Y2ggb24gdGhlIG90aGVycykuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Q2FjaGV9IGNhY2hlXG4gKiBAcGFyYW0ge1JlcXVlc3R9IHJlcXVlc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBtYXRjaE9wdGlvbnNcbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gaWdub3JlUGFyYW1zXG4gKiBAcmV0dXJuIHtQcm9taXNlPFJlc3BvbnNlfHVuZGVmaW5lZD59XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNhY2hlTWF0Y2hJZ25vcmVQYXJhbXMoY2FjaGUsIHJlcXVlc3QsIGlnbm9yZVBhcmFtcywgbWF0Y2hPcHRpb25zKSB7XG4gICAgY29uc3Qgc3RyaXBwZWRSZXF1ZXN0VVJMID0gc3RyaXBQYXJhbXMocmVxdWVzdC51cmwsIGlnbm9yZVBhcmFtcyk7XG4gICAgLy8gSWYgdGhlIHJlcXVlc3QgZG9lc24ndCBpbmNsdWRlIGFueSBpZ25vcmVkIHBhcmFtcywgbWF0Y2ggYXMgbm9ybWFsLlxuICAgIGlmIChyZXF1ZXN0LnVybCA9PT0gc3RyaXBwZWRSZXF1ZXN0VVJMKSB7XG4gICAgICAgIHJldHVybiBjYWNoZS5tYXRjaChyZXF1ZXN0LCBtYXRjaE9wdGlvbnMpO1xuICAgIH1cbiAgICAvLyBPdGhlcndpc2UsIG1hdGNoIGJ5IGNvbXBhcmluZyBrZXlzXG4gICAgY29uc3Qga2V5c09wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG1hdGNoT3B0aW9ucyksIHsgaWdub3JlU2VhcmNoOiB0cnVlIH0pO1xuICAgIGNvbnN0IGNhY2hlS2V5cyA9IGF3YWl0IGNhY2hlLmtleXMocmVxdWVzdCwga2V5c09wdGlvbnMpO1xuICAgIGZvciAoY29uc3QgY2FjaGVLZXkgb2YgY2FjaGVLZXlzKSB7XG4gICAgICAgIGNvbnN0IHN0cmlwcGVkQ2FjaGVLZXlVUkwgPSBzdHJpcFBhcmFtcyhjYWNoZUtleS51cmwsIGlnbm9yZVBhcmFtcyk7XG4gICAgICAgIGlmIChzdHJpcHBlZFJlcXVlc3RVUkwgPT09IHN0cmlwcGVkQ2FjaGVLZXlVUkwpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWNoZS5tYXRjaChjYWNoZUtleSwgbWF0Y2hPcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm47XG59XG5leHBvcnQgeyBjYWNoZU1hdGNoSWdub3JlUGFyYW1zIH07XG4iLCIvKlxuICBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG5cbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG5pbXBvcnQgJy4uL192ZXJzaW9uLmpzJztcbi8qKlxuICogVGhlIERlZmVycmVkIGNsYXNzIGNvbXBvc2VzIFByb21pc2VzIGluIGEgd2F5IHRoYXQgYWxsb3dzIGZvciB0aGVtIHRvIGJlXG4gKiByZXNvbHZlZCBvciByZWplY3RlZCBmcm9tIG91dHNpZGUgdGhlIGNvbnN0cnVjdG9yLiBJbiBtb3N0IGNhc2VzIHByb21pc2VzXG4gKiBzaG91bGQgYmUgdXNlZCBkaXJlY3RseSwgYnV0IERlZmVycmVkcyBjYW4gYmUgbmVjZXNzYXJ5IHdoZW4gdGhlIGxvZ2ljIHRvXG4gKiByZXNvbHZlIGEgcHJvbWlzZSBtdXN0IGJlIHNlcGFyYXRlLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmNsYXNzIERlZmVycmVkIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcHJvbWlzZSBhbmQgZXhwb3NlcyBpdHMgcmVzb2x2ZSBhbmQgcmVqZWN0IGZ1bmN0aW9ucyBhcyBtZXRob2RzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICAgICAgdGhpcy5yZWplY3QgPSByZWplY3Q7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCB7IERlZmVycmVkIH07XG4iLCIvKlxuICBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG5cbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG5pbXBvcnQgJy4uL192ZXJzaW9uLmpzJztcbi8vIENhbGxiYWNrcyB0byBiZSBleGVjdXRlZCB3aGVuZXZlciB0aGVyZSdzIGEgcXVvdGEgZXJyb3IuXG4vLyBDYW4ndCBjaGFuZ2UgRnVuY3Rpb24gdHlwZSByaWdodCBub3cuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xuY29uc3QgcXVvdGFFcnJvckNhbGxiYWNrcyA9IG5ldyBTZXQoKTtcbmV4cG9ydCB7IHF1b3RhRXJyb3JDYWxsYmFja3MgfTtcbiIsIi8qXG4gIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcblxuICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGVcbiAgbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0XG4gIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULlxuKi9cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJ3dvcmtib3gtY29yZS9fcHJpdmF0ZS9hc3NlcnQuanMnO1xuaW1wb3J0IHsgY2FjaGVNYXRjaElnbm9yZVBhcmFtcyB9IGZyb20gJ3dvcmtib3gtY29yZS9fcHJpdmF0ZS9jYWNoZU1hdGNoSWdub3JlUGFyYW1zLmpzJztcbmltcG9ydCB7IERlZmVycmVkIH0gZnJvbSAnd29ya2JveC1jb3JlL19wcml2YXRlL0RlZmVycmVkLmpzJztcbmltcG9ydCB7IGV4ZWN1dGVRdW90YUVycm9yQ2FsbGJhY2tzIH0gZnJvbSAnd29ya2JveC1jb3JlL19wcml2YXRlL2V4ZWN1dGVRdW90YUVycm9yQ2FsbGJhY2tzLmpzJztcbmltcG9ydCB7IGdldEZyaWVuZGx5VVJMIH0gZnJvbSAnd29ya2JveC1jb3JlL19wcml2YXRlL2dldEZyaWVuZGx5VVJMLmpzJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ3dvcmtib3gtY29yZS9fcHJpdmF0ZS9sb2dnZXIuanMnO1xuaW1wb3J0IHsgdGltZW91dCB9IGZyb20gJ3dvcmtib3gtY29yZS9fcHJpdmF0ZS90aW1lb3V0LmpzJztcbmltcG9ydCB7IFdvcmtib3hFcnJvciB9IGZyb20gJ3dvcmtib3gtY29yZS9fcHJpdmF0ZS9Xb3JrYm94RXJyb3IuanMnO1xuaW1wb3J0ICcuL192ZXJzaW9uLmpzJztcbmZ1bmN0aW9uIHRvUmVxdWVzdChpbnB1dCkge1xuICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnID8gbmV3IFJlcXVlc3QoaW5wdXQpIDogaW5wdXQ7XG59XG4vKipcbiAqIEEgY2xhc3MgY3JlYXRlZCBldmVyeSB0aW1lIGEgU3RyYXRlZ3kgaW5zdGFuY2UgaW5zdGFuY2UgY2FsbHNcbiAqIHtAbGluayB3b3JrYm94LXN0cmF0ZWdpZXMuU3RyYXRlZ3l+aGFuZGxlfSBvclxuICoge0BsaW5rIHdvcmtib3gtc3RyYXRlZ2llcy5TdHJhdGVneX5oYW5kbGVBbGx9IHRoYXQgd3JhcHMgYWxsIGZldGNoIGFuZFxuICogY2FjaGUgYWN0aW9ucyBhcm91bmQgcGx1Z2luIGNhbGxiYWNrcyBhbmQga2VlcHMgdHJhY2sgb2Ygd2hlbiB0aGUgc3RyYXRlZ3lcbiAqIGlzIFwiZG9uZVwiIChpLmUuIGFsbCBhZGRlZCBgZXZlbnQud2FpdFVudGlsKClgIHByb21pc2VzIGhhdmUgcmVzb2x2ZWQpLlxuICpcbiAqIEBtZW1iZXJvZiB3b3JrYm94LXN0cmF0ZWdpZXNcbiAqL1xuY2xhc3MgU3RyYXRlZ3lIYW5kbGVyIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGluc3RhbmNlIGFzc29jaWF0ZWQgd2l0aCB0aGUgcGFzc2VkIHN0cmF0ZWd5IGFuZCBldmVudFxuICAgICAqIHRoYXQncyBoYW5kbGluZyB0aGUgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIFRoZSBjb25zdHJ1Y3RvciBhbHNvIGluaXRpYWxpemVzIHRoZSBzdGF0ZSB0aGF0IHdpbGwgYmUgcGFzc2VkIHRvIGVhY2ggb2ZcbiAgICAgKiB0aGUgcGx1Z2lucyBoYW5kbGluZyB0aGlzIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3dvcmtib3gtc3RyYXRlZ2llcy5TdHJhdGVneX0gc3RyYXRlZ3lcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7UmVxdWVzdHxzdHJpbmd9IG9wdGlvbnMucmVxdWVzdCBBIHJlcXVlc3QgdG8gcnVuIHRoaXMgc3RyYXRlZ3kgZm9yLlxuICAgICAqIEBwYXJhbSB7RXh0ZW5kYWJsZUV2ZW50fSBvcHRpb25zLmV2ZW50IFRoZSBldmVudCBhc3NvY2lhdGVkIHdpdGggdGhlXG4gICAgICogICAgIHJlcXVlc3QuXG4gICAgICogQHBhcmFtIHtVUkx9IFtvcHRpb25zLnVybF1cbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zLnBhcmFtc10gVGhlIHJldHVybiB2YWx1ZSBmcm9tIHRoZVxuICAgICAqICAgICB7QGxpbmsgd29ya2JveC1yb3V0aW5nfm1hdGNoQ2FsbGJhY2t9IChpZiBhcHBsaWNhYmxlKS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzdHJhdGVneSwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLl9jYWNoZUtleXMgPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSByZXF1ZXN0IHRoZSBzdHJhdGVneSBpcyBwZXJmb3JtaW5nIChwYXNzZWQgdG8gdGhlIHN0cmF0ZWd5J3NcbiAgICAgICAgICogYGhhbmRsZSgpYCBvciBgaGFuZGxlQWxsKClgIG1ldGhvZCkuXG4gICAgICAgICAqIEBuYW1lIHJlcXVlc3RcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEB0eXBlIHtSZXF1ZXN0fVxuICAgICAgICAgKiBAbWVtYmVyb2Ygd29ya2JveC1zdHJhdGVnaWVzLlN0cmF0ZWd5SGFuZGxlclxuICAgICAgICAgKi9cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBldmVudCBhc3NvY2lhdGVkIHdpdGggdGhpcyByZXF1ZXN0LlxuICAgICAgICAgKiBAbmFtZSBldmVudFxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQHR5cGUge0V4dGVuZGFibGVFdmVudH1cbiAgICAgICAgICogQG1lbWJlcm9mIHdvcmtib3gtc3RyYXRlZ2llcy5TdHJhdGVneUhhbmRsZXJcbiAgICAgICAgICovXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGBVUkxgIGluc3RhbmNlIG9mIGByZXF1ZXN0LnVybGAgKGlmIHBhc3NlZCB0byB0aGUgc3RyYXRlZ3knc1xuICAgICAgICAgKiBgaGFuZGxlKClgIG9yIGBoYW5kbGVBbGwoKWAgbWV0aG9kKS5cbiAgICAgICAgICogTm90ZTogdGhlIGB1cmxgIHBhcmFtIHdpbGwgYmUgcHJlc2VudCBpZiB0aGUgc3RyYXRlZ3kgd2FzIGludm9rZWRcbiAgICAgICAgICogZnJvbSBhIHdvcmtib3ggYFJvdXRlYCBvYmplY3QuXG4gICAgICAgICAqIEBuYW1lIHVybFxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQHR5cGUge1VSTHx1bmRlZmluZWR9XG4gICAgICAgICAqIEBtZW1iZXJvZiB3b3JrYm94LXN0cmF0ZWdpZXMuU3RyYXRlZ3lIYW5kbGVyXG4gICAgICAgICAqL1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBgcGFyYW1gIHZhbHVlIChpZiBwYXNzZWQgdG8gdGhlIHN0cmF0ZWd5J3NcbiAgICAgICAgICogYGhhbmRsZSgpYCBvciBgaGFuZGxlQWxsKClgIG1ldGhvZCkuXG4gICAgICAgICAqIE5vdGU6IHRoZSBgcGFyYW1gIHBhcmFtIHdpbGwgYmUgcHJlc2VudCBpZiB0aGUgc3RyYXRlZ3kgd2FzIGludm9rZWRcbiAgICAgICAgICogZnJvbSBhIHdvcmtib3ggYFJvdXRlYCBvYmplY3QgYW5kIHRoZVxuICAgICAgICAgKiB7QGxpbmsgd29ya2JveC1yb3V0aW5nfm1hdGNoQ2FsbGJhY2t9IHJldHVybmVkXG4gICAgICAgICAqIGEgdHJ1dGh5IHZhbHVlIChpdCB3aWxsIGJlIHRoYXQgdmFsdWUpLlxuICAgICAgICAgKiBAbmFtZSBwYXJhbXNcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEB0eXBlIHsqfHVuZGVmaW5lZH1cbiAgICAgICAgICogQG1lbWJlcm9mIHdvcmtib3gtc3RyYXRlZ2llcy5TdHJhdGVneUhhbmRsZXJcbiAgICAgICAgICovXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICBhc3NlcnQuaXNJbnN0YW5jZShvcHRpb25zLmV2ZW50LCBFeHRlbmRhYmxlRXZlbnQsIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVOYW1lOiAnd29ya2JveC1zdHJhdGVnaWVzJyxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdTdHJhdGVneUhhbmRsZXInLFxuICAgICAgICAgICAgICAgIGZ1bmNOYW1lOiAnY29uc3RydWN0b3InLFxuICAgICAgICAgICAgICAgIHBhcmFtTmFtZTogJ29wdGlvbnMuZXZlbnQnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5ldmVudCA9IG9wdGlvbnMuZXZlbnQ7XG4gICAgICAgIHRoaXMuX3N0cmF0ZWd5ID0gc3RyYXRlZ3k7XG4gICAgICAgIHRoaXMuX2hhbmRsZXJEZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICB0aGlzLl9leHRlbmRMaWZldGltZVByb21pc2VzID0gW107XG4gICAgICAgIC8vIENvcHkgdGhlIHBsdWdpbnMgbGlzdCAoc2luY2UgaXQncyBtdXRhYmxlIG9uIHRoZSBzdHJhdGVneSksXG4gICAgICAgIC8vIHNvIGFueSBtdXRhdGlvbnMgZG9uJ3QgYWZmZWN0IHRoaXMgaGFuZGxlciBpbnN0YW5jZS5cbiAgICAgICAgdGhpcy5fcGx1Z2lucyA9IFsuLi5zdHJhdGVneS5wbHVnaW5zXTtcbiAgICAgICAgdGhpcy5fcGx1Z2luU3RhdGVNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIGZvciAoY29uc3QgcGx1Z2luIG9mIHRoaXMuX3BsdWdpbnMpIHtcbiAgICAgICAgICAgIHRoaXMuX3BsdWdpblN0YXRlTWFwLnNldChwbHVnaW4sIHt9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmV2ZW50LndhaXRVbnRpbCh0aGlzLl9oYW5kbGVyRGVmZXJyZWQucHJvbWlzZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgYSBnaXZlbiByZXF1ZXN0IChhbmQgaW52b2tlcyBhbnkgYXBwbGljYWJsZSBwbHVnaW4gY2FsbGJhY2tcbiAgICAgKiBtZXRob2RzKSB1c2luZyB0aGUgYGZldGNoT3B0aW9uc2AgKGZvciBub24tbmF2aWdhdGlvbiByZXF1ZXN0cykgYW5kXG4gICAgICogYHBsdWdpbnNgIGRlZmluZWQgb24gdGhlIGBTdHJhdGVneWAgb2JqZWN0LlxuICAgICAqXG4gICAgICogVGhlIGZvbGxvd2luZyBwbHVnaW4gbGlmZWN5Y2xlIG1ldGhvZHMgYXJlIGludm9rZWQgd2hlbiB1c2luZyB0aGlzIG1ldGhvZDpcbiAgICAgKiAtIGByZXF1ZXN0V2lsbEZldGNoKClgXG4gICAgICogLSBgZmV0Y2hEaWRTdWNjZWVkKClgXG4gICAgICogLSBgZmV0Y2hEaWRGYWlsKClgXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlcXVlc3R8c3RyaW5nfSBpbnB1dCBUaGUgVVJMIG9yIHJlcXVlc3QgdG8gZmV0Y2guXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxSZXNwb25zZT59XG4gICAgICovXG4gICAgYXN5bmMgZmV0Y2goaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBldmVudCB9ID0gdGhpcztcbiAgICAgICAgbGV0IHJlcXVlc3QgPSB0b1JlcXVlc3QoaW5wdXQpO1xuICAgICAgICBpZiAocmVxdWVzdC5tb2RlID09PSAnbmF2aWdhdGUnICYmXG4gICAgICAgICAgICBldmVudCBpbnN0YW5jZW9mIEZldGNoRXZlbnQgJiZcbiAgICAgICAgICAgIGV2ZW50LnByZWxvYWRSZXNwb25zZSkge1xuICAgICAgICAgICAgY29uc3QgcG9zc2libGVQcmVsb2FkUmVzcG9uc2UgPSAoYXdhaXQgZXZlbnQucHJlbG9hZFJlc3BvbnNlKTtcbiAgICAgICAgICAgIGlmIChwb3NzaWJsZVByZWxvYWRSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coYFVzaW5nIGEgcHJlbG9hZGVkIG5hdmlnYXRpb24gcmVzcG9uc2UgZm9yIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYCcke2dldEZyaWVuZGx5VVJMKHJlcXVlc3QudXJsKX0nYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBwb3NzaWJsZVByZWxvYWRSZXNwb25zZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0aGVyZSBpcyBhIGZldGNoRGlkRmFpbCBwbHVnaW4sIHdlIG5lZWQgdG8gc2F2ZSBhIGNsb25lIG9mIHRoZVxuICAgICAgICAvLyBvcmlnaW5hbCByZXF1ZXN0IGJlZm9yZSBpdCdzIGVpdGhlciBtb2RpZmllZCBieSBhIHJlcXVlc3RXaWxsRmV0Y2hcbiAgICAgICAgLy8gcGx1Z2luIG9yIGJlZm9yZSB0aGUgb3JpZ2luYWwgcmVxdWVzdCdzIGJvZHkgaXMgY29uc3VtZWQgdmlhIGZldGNoKCkuXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsUmVxdWVzdCA9IHRoaXMuaGFzQ2FsbGJhY2soJ2ZldGNoRGlkRmFpbCcpXG4gICAgICAgICAgICA/IHJlcXVlc3QuY2xvbmUoKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBjYiBvZiB0aGlzLml0ZXJhdGVDYWxsYmFja3MoJ3JlcXVlc3RXaWxsRmV0Y2gnKSkge1xuICAgICAgICAgICAgICAgIHJlcXVlc3QgPSBhd2FpdCBjYih7IHJlcXVlc3Q6IHJlcXVlc3QuY2xvbmUoKSwgZXZlbnQgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFdvcmtib3hFcnJvcigncGx1Z2luLWVycm9yLXJlcXVlc3Qtd2lsbC1mZXRjaCcsIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3duRXJyb3JNZXNzYWdlOiBlcnIubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgcmVxdWVzdCBjYW4gYmUgYWx0ZXJlZCBieSBwbHVnaW5zIHdpdGggYHJlcXVlc3RXaWxsRmV0Y2hgIG1ha2luZ1xuICAgICAgICAvLyB0aGUgb3JpZ2luYWwgcmVxdWVzdCAobW9zdCBsaWtlbHkgZnJvbSBhIGBmZXRjaGAgZXZlbnQpIGRpZmZlcmVudFxuICAgICAgICAvLyBmcm9tIHRoZSBSZXF1ZXN0IHdlIG1ha2UuIFBhc3MgYm90aCB0byBgZmV0Y2hEaWRGYWlsYCB0byBhaWQgZGVidWdnaW5nLlxuICAgICAgICBjb25zdCBwbHVnaW5GaWx0ZXJlZFJlcXVlc3QgPSByZXF1ZXN0LmNsb25lKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgZmV0Y2hSZXNwb25zZTtcbiAgICAgICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vR29vZ2xlQ2hyb21lL3dvcmtib3gvaXNzdWVzLzE3OTZcbiAgICAgICAgICAgIGZldGNoUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChyZXF1ZXN0LCByZXF1ZXN0Lm1vZGUgPT09ICduYXZpZ2F0ZScgPyB1bmRlZmluZWQgOiB0aGlzLl9zdHJhdGVneS5mZXRjaE9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYE5ldHdvcmsgcmVxdWVzdCBmb3IgYCArXG4gICAgICAgICAgICAgICAgICAgIGAnJHtnZXRGcmllbmRseVVSTChyZXF1ZXN0LnVybCl9JyByZXR1cm5lZCBhIHJlc3BvbnNlIHdpdGggYCArXG4gICAgICAgICAgICAgICAgICAgIGBzdGF0dXMgJyR7ZmV0Y2hSZXNwb25zZS5zdGF0dXN9Jy5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgdGhpcy5pdGVyYXRlQ2FsbGJhY2tzKCdmZXRjaERpZFN1Y2NlZWQnKSkge1xuICAgICAgICAgICAgICAgIGZldGNoUmVzcG9uc2UgPSBhd2FpdCBjYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0OiBwbHVnaW5GaWx0ZXJlZFJlcXVlc3QsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlOiBmZXRjaFJlc3BvbnNlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZldGNoUmVzcG9uc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coYE5ldHdvcmsgcmVxdWVzdCBmb3IgYCArXG4gICAgICAgICAgICAgICAgICAgIGAnJHtnZXRGcmllbmRseVVSTChyZXF1ZXN0LnVybCl9JyB0aHJldyBhbiBlcnJvci5gLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBgb3JpZ2luYWxSZXF1ZXN0YCB3aWxsIG9ubHkgZXhpc3QgaWYgYSBgZmV0Y2hEaWRGYWlsYCBjYWxsYmFja1xuICAgICAgICAgICAgLy8gaXMgYmVpbmcgdXNlZCAoc2VlIGFib3ZlKS5cbiAgICAgICAgICAgIGlmIChvcmlnaW5hbFJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJ1bkNhbGxiYWNrcygnZmV0Y2hEaWRGYWlsJywge1xuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFJlcXVlc3Q6IG9yaWdpbmFsUmVxdWVzdC5jbG9uZSgpLFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0OiBwbHVnaW5GaWx0ZXJlZFJlcXVlc3QuY2xvbmUoKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxzIGB0aGlzLmZldGNoKClgIGFuZCAoaW4gdGhlIGJhY2tncm91bmQpIHJ1bnMgYHRoaXMuY2FjaGVQdXQoKWAgb25cbiAgICAgKiB0aGUgcmVzcG9uc2UgZ2VuZXJhdGVkIGJ5IGB0aGlzLmZldGNoKClgLlxuICAgICAqXG4gICAgICogVGhlIGNhbGwgdG8gYHRoaXMuY2FjaGVQdXQoKWAgYXV0b21hdGljYWxseSBpbnZva2VzIGB0aGlzLndhaXRVbnRpbCgpYCxcbiAgICAgKiBzbyB5b3UgZG8gbm90IGhhdmUgdG8gbWFudWFsbHkgY2FsbCBgd2FpdFVudGlsKClgIG9uIHRoZSBldmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UmVxdWVzdHxzdHJpbmd9IGlucHV0IFRoZSByZXF1ZXN0IG9yIFVSTCB0byBmZXRjaCBhbmQgY2FjaGUuXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxSZXNwb25zZT59XG4gICAgICovXG4gICAgYXN5bmMgZmV0Y2hBbmRDYWNoZVB1dChpbnB1dCkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZmV0Y2goaW5wdXQpO1xuICAgICAgICBjb25zdCByZXNwb25zZUNsb25lID0gcmVzcG9uc2UuY2xvbmUoKTtcbiAgICAgICAgdm9pZCB0aGlzLndhaXRVbnRpbCh0aGlzLmNhY2hlUHV0KGlucHV0LCByZXNwb25zZUNsb25lKSk7XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWF0Y2hlcyBhIHJlcXVlc3QgZnJvbSB0aGUgY2FjaGUgKGFuZCBpbnZva2VzIGFueSBhcHBsaWNhYmxlIHBsdWdpblxuICAgICAqIGNhbGxiYWNrIG1ldGhvZHMpIHVzaW5nIHRoZSBgY2FjaGVOYW1lYCwgYG1hdGNoT3B0aW9uc2AsIGFuZCBgcGx1Z2luc2BcbiAgICAgKiBkZWZpbmVkIG9uIHRoZSBzdHJhdGVneSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBUaGUgZm9sbG93aW5nIHBsdWdpbiBsaWZlY3ljbGUgbWV0aG9kcyBhcmUgaW52b2tlZCB3aGVuIHVzaW5nIHRoaXMgbWV0aG9kOlxuICAgICAqIC0gY2FjaGVLZXlXaWxsQnlVc2VkKClcbiAgICAgKiAtIGNhY2hlZFJlc3BvbnNlV2lsbEJ5VXNlZCgpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlcXVlc3R8c3RyaW5nfSBrZXkgVGhlIFJlcXVlc3Qgb3IgVVJMIHRvIHVzZSBhcyB0aGUgY2FjaGUga2V5LlxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8UmVzcG9uc2V8dW5kZWZpbmVkPn0gQSBtYXRjaGluZyByZXNwb25zZSwgaWYgZm91bmQuXG4gICAgICovXG4gICAgYXN5bmMgY2FjaGVNYXRjaChrZXkpIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRvUmVxdWVzdChrZXkpO1xuICAgICAgICBsZXQgY2FjaGVkUmVzcG9uc2U7XG4gICAgICAgIGNvbnN0IHsgY2FjaGVOYW1lLCBtYXRjaE9wdGlvbnMgfSA9IHRoaXMuX3N0cmF0ZWd5O1xuICAgICAgICBjb25zdCBlZmZlY3RpdmVSZXF1ZXN0ID0gYXdhaXQgdGhpcy5nZXRDYWNoZUtleShyZXF1ZXN0LCAncmVhZCcpO1xuICAgICAgICBjb25zdCBtdWx0aU1hdGNoT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbWF0Y2hPcHRpb25zKSwgeyBjYWNoZU5hbWUgfSk7XG4gICAgICAgIGNhY2hlZFJlc3BvbnNlID0gYXdhaXQgY2FjaGVzLm1hdGNoKGVmZmVjdGl2ZVJlcXVlc3QsIG11bHRpTWF0Y2hPcHRpb25zKTtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIGlmIChjYWNoZWRSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgRm91bmQgYSBjYWNoZWQgcmVzcG9uc2UgaW4gJyR7Y2FjaGVOYW1lfScuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYE5vIGNhY2hlZCByZXNwb25zZSBmb3VuZCBpbiAnJHtjYWNoZU5hbWV9Jy5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIHRoaXMuaXRlcmF0ZUNhbGxiYWNrcygnY2FjaGVkUmVzcG9uc2VXaWxsQmVVc2VkJykpIHtcbiAgICAgICAgICAgIGNhY2hlZFJlc3BvbnNlID1cbiAgICAgICAgICAgICAgICAoYXdhaXQgY2FsbGJhY2soe1xuICAgICAgICAgICAgICAgICAgICBjYWNoZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoT3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVkUmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3Q6IGVmZmVjdGl2ZVJlcXVlc3QsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiB0aGlzLmV2ZW50LFxuICAgICAgICAgICAgICAgIH0pKSB8fCB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhY2hlZFJlc3BvbnNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdXRzIGEgcmVxdWVzdC9yZXNwb25zZSBwYWlyIGluIHRoZSBjYWNoZSAoYW5kIGludm9rZXMgYW55IGFwcGxpY2FibGVcbiAgICAgKiBwbHVnaW4gY2FsbGJhY2sgbWV0aG9kcykgdXNpbmcgdGhlIGBjYWNoZU5hbWVgIGFuZCBgcGx1Z2luc2AgZGVmaW5lZCBvblxuICAgICAqIHRoZSBzdHJhdGVneSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBUaGUgZm9sbG93aW5nIHBsdWdpbiBsaWZlY3ljbGUgbWV0aG9kcyBhcmUgaW52b2tlZCB3aGVuIHVzaW5nIHRoaXMgbWV0aG9kOlxuICAgICAqIC0gY2FjaGVLZXlXaWxsQnlVc2VkKClcbiAgICAgKiAtIGNhY2hlV2lsbFVwZGF0ZSgpXG4gICAgICogLSBjYWNoZURpZFVwZGF0ZSgpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlcXVlc3R8c3RyaW5nfSBrZXkgVGhlIHJlcXVlc3Qgb3IgVVJMIHRvIHVzZSBhcyB0aGUgY2FjaGUga2V5LlxuICAgICAqIEBwYXJhbSB7UmVzcG9uc2V9IHJlc3BvbnNlIFRoZSByZXNwb25zZSB0byBjYWNoZS5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPGJvb2xlYW4+fSBgZmFsc2VgIGlmIGEgY2FjaGVXaWxsVXBkYXRlIGNhdXNlZCB0aGUgcmVzcG9uc2VcbiAgICAgKiBub3QgYmUgY2FjaGVkLCBhbmQgYHRydWVgIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBhc3luYyBjYWNoZVB1dChrZXksIHJlc3BvbnNlKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0b1JlcXVlc3Qoa2V5KTtcbiAgICAgICAgLy8gUnVuIGluIHRoZSBuZXh0IHRhc2sgdG8gYXZvaWQgYmxvY2tpbmcgb3RoZXIgY2FjaGUgcmVhZHMuXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93M2MvU2VydmljZVdvcmtlci9pc3N1ZXMvMTM5N1xuICAgICAgICBhd2FpdCB0aW1lb3V0KDApO1xuICAgICAgICBjb25zdCBlZmZlY3RpdmVSZXF1ZXN0ID0gYXdhaXQgdGhpcy5nZXRDYWNoZUtleShyZXF1ZXN0LCAnd3JpdGUnKTtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIGlmIChlZmZlY3RpdmVSZXF1ZXN0Lm1ldGhvZCAmJiBlZmZlY3RpdmVSZXF1ZXN0Lm1ldGhvZCAhPT0gJ0dFVCcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgV29ya2JveEVycm9yKCdhdHRlbXB0LXRvLWNhY2hlLW5vbi1nZXQtcmVxdWVzdCcsIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBnZXRGcmllbmRseVVSTChlZmZlY3RpdmVSZXF1ZXN0LnVybCksXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogZWZmZWN0aXZlUmVxdWVzdC5tZXRob2QsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0dvb2dsZUNocm9tZS93b3JrYm94L2lzc3Vlcy8yODE4XG4gICAgICAgICAgICBjb25zdCB2YXJ5ID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ1ZhcnknKTtcbiAgICAgICAgICAgIGlmICh2YXJ5KSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBUaGUgcmVzcG9uc2UgZm9yICR7Z2V0RnJpZW5kbHlVUkwoZWZmZWN0aXZlUmVxdWVzdC51cmwpfSBgICtcbiAgICAgICAgICAgICAgICAgICAgYGhhcyBhICdWYXJ5OiAke3Zhcnl9JyBoZWFkZXIuIGAgK1xuICAgICAgICAgICAgICAgICAgICBgQ29uc2lkZXIgc2V0dGluZyB0aGUge2lnbm9yZVZhcnk6IHRydWV9IG9wdGlvbiBvbiB5b3VyIHN0cmF0ZWd5IGAgK1xuICAgICAgICAgICAgICAgICAgICBgdG8gZW5zdXJlIGNhY2hlIG1hdGNoaW5nIGFuZCBkZWxldGlvbiB3b3JrcyBhcyBleHBlY3RlZC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgQ2Fubm90IGNhY2hlIG5vbi1leGlzdGVudCByZXNwb25zZSBmb3IgYCArXG4gICAgICAgICAgICAgICAgICAgIGAnJHtnZXRGcmllbmRseVVSTChlZmZlY3RpdmVSZXF1ZXN0LnVybCl9Jy5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBXb3JrYm94RXJyb3IoJ2NhY2hlLXB1dC13aXRoLW5vLXJlc3BvbnNlJywge1xuICAgICAgICAgICAgICAgIHVybDogZ2V0RnJpZW5kbHlVUkwoZWZmZWN0aXZlUmVxdWVzdC51cmwpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcG9uc2VUb0NhY2hlID0gYXdhaXQgdGhpcy5fZW5zdXJlUmVzcG9uc2VTYWZlVG9DYWNoZShyZXNwb25zZSk7XG4gICAgICAgIGlmICghcmVzcG9uc2VUb0NhY2hlKSB7XG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgUmVzcG9uc2UgJyR7Z2V0RnJpZW5kbHlVUkwoZWZmZWN0aXZlUmVxdWVzdC51cmwpfScgYCArXG4gICAgICAgICAgICAgICAgICAgIGB3aWxsIG5vdCBiZSBjYWNoZWQuYCwgcmVzcG9uc2VUb0NhY2hlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGNhY2hlTmFtZSwgbWF0Y2hPcHRpb25zIH0gPSB0aGlzLl9zdHJhdGVneTtcbiAgICAgICAgY29uc3QgY2FjaGUgPSBhd2FpdCBzZWxmLmNhY2hlcy5vcGVuKGNhY2hlTmFtZSk7XG4gICAgICAgIGNvbnN0IGhhc0NhY2hlVXBkYXRlQ2FsbGJhY2sgPSB0aGlzLmhhc0NhbGxiYWNrKCdjYWNoZURpZFVwZGF0ZScpO1xuICAgICAgICBjb25zdCBvbGRSZXNwb25zZSA9IGhhc0NhY2hlVXBkYXRlQ2FsbGJhY2tcbiAgICAgICAgICAgID8gYXdhaXQgY2FjaGVNYXRjaElnbm9yZVBhcmFtcyhcbiAgICAgICAgICAgIC8vIFRPRE8ocGhpbGlwd2FsdG9uKTogdGhlIGBfX1dCX1JFVklTSU9OX19gIHBhcmFtIGlzIGEgcHJlY2FjaGluZ1xuICAgICAgICAgICAgLy8gZmVhdHVyZS4gQ29uc2lkZXIgaW50byB3YXlzIHRvIG9ubHkgYWRkIHRoaXMgYmVoYXZpb3IgaWYgdXNpbmdcbiAgICAgICAgICAgIC8vIHByZWNhY2hpbmcuXG4gICAgICAgICAgICBjYWNoZSwgZWZmZWN0aXZlUmVxdWVzdC5jbG9uZSgpLCBbJ19fV0JfUkVWSVNJT05fXyddLCBtYXRjaE9wdGlvbnMpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFVwZGF0aW5nIHRoZSAnJHtjYWNoZU5hbWV9JyBjYWNoZSB3aXRoIGEgbmV3IFJlc3BvbnNlIGAgK1xuICAgICAgICAgICAgICAgIGBmb3IgJHtnZXRGcmllbmRseVVSTChlZmZlY3RpdmVSZXF1ZXN0LnVybCl9LmApO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBjYWNoZS5wdXQoZWZmZWN0aXZlUmVxdWVzdCwgaGFzQ2FjaGVVcGRhdGVDYWxsYmFjayA/IHJlc3BvbnNlVG9DYWNoZS5jbG9uZSgpIDogcmVzcG9uc2VUb0NhY2hlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9ET01FeGNlcHRpb24jZXhjZXB0aW9uLVF1b3RhRXhjZWVkZWRFcnJvclxuICAgICAgICAgICAgICAgIGlmIChlcnJvci5uYW1lID09PSAnUXVvdGFFeGNlZWRlZEVycm9yJykge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBleGVjdXRlUXVvdGFFcnJvckNhbGxiYWNrcygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIHRoaXMuaXRlcmF0ZUNhbGxiYWNrcygnY2FjaGVEaWRVcGRhdGUnKSkge1xuICAgICAgICAgICAgYXdhaXQgY2FsbGJhY2soe1xuICAgICAgICAgICAgICAgIGNhY2hlTmFtZSxcbiAgICAgICAgICAgICAgICBvbGRSZXNwb25zZSxcbiAgICAgICAgICAgICAgICBuZXdSZXNwb25zZTogcmVzcG9uc2VUb0NhY2hlLmNsb25lKCksXG4gICAgICAgICAgICAgICAgcmVxdWVzdDogZWZmZWN0aXZlUmVxdWVzdCxcbiAgICAgICAgICAgICAgICBldmVudDogdGhpcy5ldmVudCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdGhlIGxpc3Qgb2YgcGx1Z2lucyBmb3IgdGhlIGBjYWNoZUtleVdpbGxCZVVzZWRgIGNhbGxiYWNrLCBhbmRcbiAgICAgKiBleGVjdXRlcyBhbnkgb2YgdGhvc2UgY2FsbGJhY2tzIGZvdW5kIGluIHNlcXVlbmNlLiBUaGUgZmluYWwgYFJlcXVlc3RgXG4gICAgICogb2JqZWN0IHJldHVybmVkIGJ5IHRoZSBsYXN0IHBsdWdpbiBpcyB0cmVhdGVkIGFzIHRoZSBjYWNoZSBrZXkgZm9yIGNhY2hlXG4gICAgICogcmVhZHMgYW5kL29yIHdyaXRlcy4gSWYgbm8gYGNhY2hlS2V5V2lsbEJlVXNlZGAgcGx1Z2luIGNhbGxiYWNrcyBoYXZlXG4gICAgICogYmVlbiByZWdpc3RlcmVkLCB0aGUgcGFzc2VkIHJlcXVlc3QgaXMgcmV0dXJuZWQgdW5tb2RpZmllZFxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZXF1ZXN0fSByZXF1ZXN0XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGVcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFJlcXVlc3Q+fVxuICAgICAqL1xuICAgIGFzeW5jIGdldENhY2hlS2V5KHJlcXVlc3QsIG1vZGUpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gYCR7cmVxdWVzdC51cmx9IHwgJHttb2RlfWA7XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGVLZXlzW2tleV0pIHtcbiAgICAgICAgICAgIGxldCBlZmZlY3RpdmVSZXF1ZXN0ID0gcmVxdWVzdDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgdGhpcy5pdGVyYXRlQ2FsbGJhY2tzKCdjYWNoZUtleVdpbGxCZVVzZWQnKSkge1xuICAgICAgICAgICAgICAgIGVmZmVjdGl2ZVJlcXVlc3QgPSB0b1JlcXVlc3QoYXdhaXQgY2FsbGJhY2soe1xuICAgICAgICAgICAgICAgICAgICBtb2RlLFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0OiBlZmZlY3RpdmVSZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICBldmVudDogdGhpcy5ldmVudCxcbiAgICAgICAgICAgICAgICAgICAgLy8gcGFyYW1zIGhhcyBhIHR5cGUgYW55IGNhbid0IGNoYW5nZSByaWdodCBub3cuXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczogdGhpcy5wYXJhbXMsIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9jYWNoZUtleXNba2V5XSA9IGVmZmVjdGl2ZVJlcXVlc3Q7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlS2V5c1trZXldO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmF0ZWd5IGhhcyBhdCBsZWFzdCBvbmUgcGx1Z2luIHdpdGggdGhlIGdpdmVuXG4gICAgICogY2FsbGJhY2suXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgY2FsbGJhY2sgdG8gY2hlY2sgZm9yLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgaGFzQ2FsbGJhY2sobmFtZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHBsdWdpbiBvZiB0aGlzLl9zdHJhdGVneS5wbHVnaW5zKSB7XG4gICAgICAgICAgICBpZiAobmFtZSBpbiBwbHVnaW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJ1bnMgYWxsIHBsdWdpbiBjYWxsYmFja3MgbWF0Y2hpbmcgdGhlIGdpdmVuIG5hbWUsIGluIG9yZGVyLCBwYXNzaW5nIHRoZVxuICAgICAqIGdpdmVuIHBhcmFtIG9iamVjdCAobWVyZ2VkIGl0aCB0aGUgY3VycmVudCBwbHVnaW4gc3RhdGUpIGFzIHRoZSBvbmx5XG4gICAgICogYXJndW1lbnQuXG4gICAgICpcbiAgICAgKiBOb3RlOiBzaW5jZSB0aGlzIG1ldGhvZCBydW5zIGFsbCBwbHVnaW5zLCBpdCdzIG5vdCBzdWl0YWJsZSBmb3IgY2FzZXNcbiAgICAgKiB3aGVyZSB0aGUgcmV0dXJuIHZhbHVlIG9mIGEgY2FsbGJhY2sgbmVlZHMgdG8gYmUgYXBwbGllZCBwcmlvciB0byBjYWxsaW5nXG4gICAgICogdGhlIG5leHQgY2FsbGJhY2suIFNlZVxuICAgICAqIHtAbGluayB3b3JrYm94LXN0cmF0ZWdpZXMuU3RyYXRlZ3lIYW5kbGVyI2l0ZXJhdGVDYWxsYmFja3N9XG4gICAgICogYmVsb3cgZm9yIGhvdyB0byBoYW5kbGUgdGhhdCBjYXNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGNhbGxiYWNrIHRvIHJ1biB3aXRoaW4gZWFjaCBwbHVnaW4uXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtIFRoZSBvYmplY3QgdG8gcGFzcyBhcyB0aGUgZmlyc3QgKGFuZCBvbmx5KSBwYXJhbVxuICAgICAqICAgICB3aGVuIGV4ZWN1dGluZyBlYWNoIGNhbGxiYWNrLiBUaGlzIG9iamVjdCB3aWxsIGJlIG1lcmdlZCB3aXRoIHRoZVxuICAgICAqICAgICBjdXJyZW50IHBsdWdpbiBzdGF0ZSBwcmlvciB0byBjYWxsYmFjayBleGVjdXRpb24uXG4gICAgICovXG4gICAgYXN5bmMgcnVuQ2FsbGJhY2tzKG5hbWUsIHBhcmFtKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgdGhpcy5pdGVyYXRlQ2FsbGJhY2tzKG5hbWUpKSB7XG4gICAgICAgICAgICAvLyBUT0RPKHBoaWxpcHdhbHRvbik6IG5vdCBzdXJlIHdoeSBgYW55YCBpcyBuZWVkZWQuIEl0IHNlZW1zIGxpa2VcbiAgICAgICAgICAgIC8vIHRoaXMgc2hvdWxkIHdvcmsgd2l0aCBgYXMgV29ya2JveFBsdWdpbkNhbGxiYWNrUGFyYW1bQ11gLlxuICAgICAgICAgICAgYXdhaXQgY2FsbGJhY2socGFyYW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFjY2VwdHMgYSBjYWxsYmFjayBhbmQgcmV0dXJucyBhbiBpdGVyYWJsZSBvZiBtYXRjaGluZyBwbHVnaW4gY2FsbGJhY2tzLFxuICAgICAqIHdoZXJlIGVhY2ggY2FsbGJhY2sgaXMgd3JhcHBlZCB3aXRoIHRoZSBjdXJyZW50IGhhbmRsZXIgc3RhdGUgKGkuZS4gd2hlblxuICAgICAqIHlvdSBjYWxsIGVhY2ggY2FsbGJhY2ssIHdoYXRldmVyIG9iamVjdCBwYXJhbWV0ZXIgeW91IHBhc3MgaXQgd2lsbFxuICAgICAqIGJlIG1lcmdlZCB3aXRoIHRoZSBwbHVnaW4ncyBjdXJyZW50IHN0YXRlKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIGZvIHRoZSBjYWxsYmFjayB0byBydW5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxGdW5jdGlvbj59XG4gICAgICovXG4gICAgKml0ZXJhdGVDYWxsYmFja3MobmFtZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHBsdWdpbiBvZiB0aGlzLl9zdHJhdGVneS5wbHVnaW5zKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBsdWdpbltuYW1lXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fcGx1Z2luU3RhdGVNYXAuZ2V0KHBsdWdpbik7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdGVmdWxDYWxsYmFjayA9IChwYXJhbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZWZ1bFBhcmFtID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwYXJhbSksIHsgc3RhdGUgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8ocGhpbGlwd2FsdG9uKTogbm90IHN1cmUgd2h5IGBhbnlgIGlzIG5lZWRlZC4gSXQgc2VlbXMgbGlrZVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIHNob3VsZCB3b3JrIHdpdGggYGFzIFdvcmtib3hQbHVnaW5DYWxsYmFja1BhcmFtW0NdYC5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBsdWdpbltuYW1lXShzdGF0ZWZ1bFBhcmFtKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHlpZWxkIHN0YXRlZnVsQ2FsbGJhY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIHByb21pc2UgdG8gdGhlXG4gICAgICogW2V4dGVuZCBsaWZldGltZSBwcm9taXNlc117QGxpbmsgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL1NlcnZpY2VXb3JrZXIvI2V4dGVuZGFibGVldmVudC1leHRlbmQtbGlmZXRpbWUtcHJvbWlzZXN9XG4gICAgICogb2YgdGhlIGV2ZW50IGV2ZW50IGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVxdWVzdCBiZWluZyBoYW5kbGVkICh1c3VhbGx5IGFcbiAgICAgKiBgRmV0Y2hFdmVudGApLlxuICAgICAqXG4gICAgICogTm90ZTogeW91IGNhbiBhd2FpdFxuICAgICAqIHtAbGluayB3b3JrYm94LXN0cmF0ZWdpZXMuU3RyYXRlZ3lIYW5kbGVyfmRvbmVXYWl0aW5nfVxuICAgICAqIHRvIGtub3cgd2hlbiBhbGwgYWRkZWQgcHJvbWlzZXMgaGF2ZSBzZXR0bGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQcm9taXNlfSBwcm9taXNlIEEgcHJvbWlzZSB0byBhZGQgdG8gdGhlIGV4dGVuZCBsaWZldGltZSBwcm9taXNlc1xuICAgICAqICAgICBvZiB0aGUgZXZlbnQgdGhhdCB0cmlnZ2VyZWQgdGhlIHJlcXVlc3QuXG4gICAgICovXG4gICAgd2FpdFVudGlsKHByb21pc2UpIHtcbiAgICAgICAgdGhpcy5fZXh0ZW5kTGlmZXRpbWVQcm9taXNlcy5wdXNoKHByb21pc2UpO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBvbmNlIGFsbCBwcm9taXNlcyBwYXNzZWQgdG9cbiAgICAgKiB7QGxpbmsgd29ya2JveC1zdHJhdGVnaWVzLlN0cmF0ZWd5SGFuZGxlcn53YWl0VW50aWx9XG4gICAgICogaGF2ZSBzZXR0bGVkLlxuICAgICAqXG4gICAgICogTm90ZTogYW55IHdvcmsgZG9uZSBhZnRlciBgZG9uZVdhaXRpbmcoKWAgc2V0dGxlcyBzaG91bGQgYmUgbWFudWFsbHlcbiAgICAgKiBwYXNzZWQgdG8gYW4gZXZlbnQncyBgd2FpdFVudGlsKClgIG1ldGhvZCAobm90IHRoaXMgaGFuZGxlcidzXG4gICAgICogYHdhaXRVbnRpbCgpYCBtZXRob2QpLCBvdGhlcndpc2UgdGhlIHNlcnZpY2Ugd29ya2VyIHRocmVhZCBteSBiZSBraWxsZWRcbiAgICAgKiBwcmlvciB0byB5b3VyIHdvcmsgY29tcGxldGluZy5cbiAgICAgKi9cbiAgICBhc3luYyBkb25lV2FpdGluZygpIHtcbiAgICAgICAgbGV0IHByb21pc2U7XG4gICAgICAgIHdoaWxlICgocHJvbWlzZSA9IHRoaXMuX2V4dGVuZExpZmV0aW1lUHJvbWlzZXMuc2hpZnQoKSkpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb21pc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RvcHMgcnVubmluZyB0aGUgc3RyYXRlZ3kgYW5kIGltbWVkaWF0ZWx5IHJlc29sdmVzIGFueSBwZW5kaW5nXG4gICAgICogYHdhaXRVbnRpbCgpYCBwcm9taXNlcy5cbiAgICAgKi9cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLl9oYW5kbGVyRGVmZXJyZWQucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCBjYWxsIGNhY2hlV2lsbFVwZGF0ZSBvbiB0aGUgYXZhaWxhYmxlIHBsdWdpbnMgKG9yIHVzZVxuICAgICAqIHN0YXR1cyA9PT0gMjAwKSB0byBkZXRlcm1pbmUgaWYgdGhlIFJlc3BvbnNlIGlzIHNhZmUgYW5kIHZhbGlkIHRvIGNhY2hlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZXF1ZXN0fSBvcHRpb25zLnJlcXVlc3RcbiAgICAgKiBAcGFyYW0ge1Jlc3BvbnNlfSBvcHRpb25zLnJlc3BvbnNlXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxSZXNwb25zZXx1bmRlZmluZWQ+fVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBhc3luYyBfZW5zdXJlUmVzcG9uc2VTYWZlVG9DYWNoZShyZXNwb25zZSkge1xuICAgICAgICBsZXQgcmVzcG9uc2VUb0NhY2hlID0gcmVzcG9uc2U7XG4gICAgICAgIGxldCBwbHVnaW5zVXNlZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIHRoaXMuaXRlcmF0ZUNhbGxiYWNrcygnY2FjaGVXaWxsVXBkYXRlJykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVG9DYWNoZSA9XG4gICAgICAgICAgICAgICAgKGF3YWl0IGNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdDogdGhpcy5yZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZTogcmVzcG9uc2VUb0NhY2hlLFxuICAgICAgICAgICAgICAgICAgICBldmVudDogdGhpcy5ldmVudCxcbiAgICAgICAgICAgICAgICB9KSkgfHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgcGx1Z2luc1VzZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZVRvQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXBsdWdpbnNVc2VkKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2VUb0NhY2hlICYmIHJlc3BvbnNlVG9DYWNoZS5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVG9DYWNoZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlVG9DYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VUb0NhY2hlLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VUb0NhY2hlLnN0YXR1cyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKGBUaGUgcmVzcG9uc2UgZm9yICcke3RoaXMucmVxdWVzdC51cmx9JyBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYGlzIGFuIG9wYXF1ZSByZXNwb25zZS4gVGhlIGNhY2hpbmcgc3RyYXRlZ3kgdGhhdCB5b3UncmUgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB1c2luZyB3aWxsIG5vdCBjYWNoZSBvcGFxdWUgcmVzcG9uc2VzIGJ5IGRlZmF1bHQuYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYFRoZSByZXNwb25zZSBmb3IgJyR7dGhpcy5yZXF1ZXN0LnVybH0nIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgcmV0dXJuZWQgYSBzdGF0dXMgY29kZSBvZiAnJHtyZXNwb25zZS5zdGF0dXN9JyBhbmQgd29uJ3QgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBiZSBjYWNoZWQgYXMgYSByZXN1bHQuYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlVG9DYWNoZTtcbiAgICB9XG59XG5leHBvcnQgeyBTdHJhdGVneUhhbmRsZXIgfTtcbiIsIi8qXG4gIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG5pbXBvcnQgJy4uL192ZXJzaW9uLmpzJztcbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBhbmQgdGhlIHBhc3NlZCBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLlxuICogVGhpcyB1dGlsaXR5IGlzIGFuIGFzeW5jL2F3YWl0LWZyaWVuZGx5IHZlcnNpb24gb2YgYHNldFRpbWVvdXRgLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBtc1xuICogQHJldHVybiB7UHJvbWlzZX1cbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0aW1lb3V0KG1zKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG59XG4iLCIvKlxuICBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG5cbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG5pbXBvcnQgJy4uL192ZXJzaW9uLmpzJztcbmNvbnN0IGdldEZyaWVuZGx5VVJMID0gKHVybCkgPT4ge1xuICAgIGNvbnN0IHVybE9iaiA9IG5ldyBVUkwoU3RyaW5nKHVybCksIGxvY2F0aW9uLmhyZWYpO1xuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vR29vZ2xlQ2hyb21lL3dvcmtib3gvaXNzdWVzLzIzMjNcbiAgICAvLyBXZSB3YW50IHRvIGluY2x1ZGUgZXZlcnl0aGluZywgZXhjZXB0IGZvciB0aGUgb3JpZ2luIGlmIGl0J3Mgc2FtZS1vcmlnaW4uXG4gICAgcmV0dXJuIHVybE9iai5ocmVmLnJlcGxhY2UobmV3IFJlZ0V4cChgXiR7bG9jYXRpb24ub3JpZ2lufWApLCAnJyk7XG59O1xuZXhwb3J0IHsgZ2V0RnJpZW5kbHlVUkwgfTtcbiIsIi8qXG4gIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcblxuICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGVcbiAgbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0XG4gIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULlxuKi9cbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL19wcml2YXRlL2xvZ2dlci5qcyc7XG5pbXBvcnQgeyBxdW90YUVycm9yQ2FsbGJhY2tzIH0gZnJvbSAnLi4vbW9kZWxzL3F1b3RhRXJyb3JDYWxsYmFja3MuanMnO1xuaW1wb3J0ICcuLi9fdmVyc2lvbi5qcyc7XG4vKipcbiAqIFJ1bnMgYWxsIG9mIHRoZSBjYWxsYmFjayBmdW5jdGlvbnMsIG9uZSBhdCBhIHRpbWUgc2VxdWVudGlhbGx5LCBpbiB0aGUgb3JkZXJcbiAqIGluIHdoaWNoIHRoZXkgd2VyZSByZWdpc3RlcmVkLlxuICpcbiAqIEBtZW1iZXJvZiB3b3JrYm94LWNvcmVcbiAqIEBwcml2YXRlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVRdW90YUVycm9yQ2FsbGJhY2tzKCkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGxvZ2dlci5sb2coYEFib3V0IHRvIHJ1biAke3F1b3RhRXJyb3JDYWxsYmFja3Muc2l6ZX0gYCArXG4gICAgICAgICAgICBgY2FsbGJhY2tzIHRvIGNsZWFuIHVwIGNhY2hlcy5gKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBxdW90YUVycm9yQ2FsbGJhY2tzKSB7XG4gICAgICAgIGF3YWl0IGNhbGxiYWNrKCk7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICBsb2dnZXIubG9nKGNhbGxiYWNrLCAnaXMgY29tcGxldGUuJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgbG9nZ2VyLmxvZygnRmluaXNoZWQgcnVubmluZyBjYWxsYmFja3MuJyk7XG4gICAgfVxufVxuZXhwb3J0IHsgZXhlY3V0ZVF1b3RhRXJyb3JDYWxsYmFja3MgfTtcbiIsIi8qXG4gIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcblxuICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGVcbiAgbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0XG4gIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULlxuKi9cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJ3dvcmtib3gtY29yZS9fcHJpdmF0ZS9hc3NlcnQuanMnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnd29ya2JveC1jb3JlL19wcml2YXRlL2xvZ2dlci5qcyc7XG5pbXBvcnQgeyBXb3JrYm94RXJyb3IgfSBmcm9tICd3b3JrYm94LWNvcmUvX3ByaXZhdGUvV29ya2JveEVycm9yLmpzJztcbmltcG9ydCB7IFN0cmF0ZWd5IH0gZnJvbSAnLi9TdHJhdGVneS5qcyc7XG5pbXBvcnQgeyBtZXNzYWdlcyB9IGZyb20gJy4vdXRpbHMvbWVzc2FnZXMuanMnO1xuaW1wb3J0ICcuL192ZXJzaW9uLmpzJztcbi8qKlxuICogQW4gaW1wbGVtZW50YXRpb24gb2YgYSBbY2FjaGUtZmlyc3RdKGh0dHBzOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vZG9jcy93b3JrYm94L2NhY2hpbmctc3RyYXRlZ2llcy1vdmVydmlldy8jY2FjaGUtZmlyc3QtZmFsbGluZy1iYWNrLXRvLW5ldHdvcmspXG4gKiByZXF1ZXN0IHN0cmF0ZWd5LlxuICpcbiAqIEEgY2FjaGUgZmlyc3Qgc3RyYXRlZ3kgaXMgdXNlZnVsIGZvciBhc3NldHMgdGhhdCBoYXZlIGJlZW4gcmV2aXNpb25lZCxcbiAqIHN1Y2ggYXMgVVJMcyBsaWtlIGAvc3R5bGVzL2V4YW1wbGUuYThmNWYxLmNzc2AsIHNpbmNlIHRoZXlcbiAqIGNhbiBiZSBjYWNoZWQgZm9yIGxvbmcgcGVyaW9kcyBvZiB0aW1lLlxuICpcbiAqIElmIHRoZSBuZXR3b3JrIHJlcXVlc3QgZmFpbHMsIGFuZCB0aGVyZSBpcyBubyBjYWNoZSBtYXRjaCwgdGhpcyB3aWxsIHRocm93XG4gKiBhIGBXb3JrYm94RXJyb3JgIGV4Y2VwdGlvbi5cbiAqXG4gKiBAZXh0ZW5kcyB3b3JrYm94LXN0cmF0ZWdpZXMuU3RyYXRlZ3lcbiAqIEBtZW1iZXJvZiB3b3JrYm94LXN0cmF0ZWdpZXNcbiAqL1xuY2xhc3MgQ2FjaGVGaXJzdCBleHRlbmRzIFN0cmF0ZWd5IHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7UmVxdWVzdHxzdHJpbmd9IHJlcXVlc3QgQSByZXF1ZXN0IHRvIHJ1biB0aGlzIHN0cmF0ZWd5IGZvci5cbiAgICAgKiBAcGFyYW0ge3dvcmtib3gtc3RyYXRlZ2llcy5TdHJhdGVneUhhbmRsZXJ9IGhhbmRsZXIgVGhlIGV2ZW50IHRoYXRcbiAgICAgKiAgICAgdHJpZ2dlcmVkIHRoZSByZXF1ZXN0LlxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8UmVzcG9uc2U+fVxuICAgICAqL1xuICAgIGFzeW5jIF9oYW5kbGUocmVxdWVzdCwgaGFuZGxlcikge1xuICAgICAgICBjb25zdCBsb2dzID0gW107XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICBhc3NlcnQuaXNJbnN0YW5jZShyZXF1ZXN0LCBSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgbW9kdWxlTmFtZTogJ3dvcmtib3gtc3RyYXRlZ2llcycsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB0aGlzLmNvbnN0cnVjdG9yLm5hbWUsXG4gICAgICAgICAgICAgICAgZnVuY05hbWU6ICdtYWtlUmVxdWVzdCcsXG4gICAgICAgICAgICAgICAgcGFyYW1OYW1lOiAncmVxdWVzdCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBoYW5kbGVyLmNhY2hlTWF0Y2gocmVxdWVzdCk7XG4gICAgICAgIGxldCBlcnJvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKCFyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgICAgICBsb2dzLnB1c2goYE5vIHJlc3BvbnNlIGZvdW5kIGluIHRoZSAnJHt0aGlzLmNhY2hlTmFtZX0nIGNhY2hlLiBgICtcbiAgICAgICAgICAgICAgICAgICAgYFdpbGwgcmVzcG9uZCB3aXRoIGEgbmV0d29yayByZXF1ZXN0LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IGhhbmRsZXIuZmV0Y2hBbmRDYWNoZVB1dChyZXF1ZXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9ncy5wdXNoKGBHb3QgcmVzcG9uc2UgZnJvbSBuZXR3b3JrLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9ncy5wdXNoKGBVbmFibGUgdG8gZ2V0IGEgcmVzcG9uc2UgZnJvbSB0aGUgbmV0d29yay5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAgIGxvZ3MucHVzaChgRm91bmQgYSBjYWNoZWQgcmVzcG9uc2UgaW4gdGhlICcke3RoaXMuY2FjaGVOYW1lfScgY2FjaGUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIGxvZ2dlci5ncm91cENvbGxhcHNlZChtZXNzYWdlcy5zdHJhdGVneVN0YXJ0KHRoaXMuY29uc3RydWN0b3IubmFtZSwgcmVxdWVzdCkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBsb2cgb2YgbG9ncykge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2cobG9nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1lc3NhZ2VzLnByaW50RmluYWxSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgICBsb2dnZXIuZ3JvdXBFbmQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgV29ya2JveEVycm9yKCduby1yZXNwb25zZScsIHsgdXJsOiByZXF1ZXN0LnVybCwgZXJyb3IgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cbn1cbmV4cG9ydCB7IENhY2hlRmlyc3QgfTtcbiIsIi8qXG4gIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcblxuICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGVcbiAgbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0XG4gIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULlxuKi9cbmltcG9ydCB7IGNhY2hlTmFtZXMgfSBmcm9tICd3b3JrYm94LWNvcmUvX3ByaXZhdGUvY2FjaGVOYW1lcy5qcyc7XG5pbXBvcnQgeyBXb3JrYm94RXJyb3IgfSBmcm9tICd3b3JrYm94LWNvcmUvX3ByaXZhdGUvV29ya2JveEVycm9yLmpzJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ3dvcmtib3gtY29yZS9fcHJpdmF0ZS9sb2dnZXIuanMnO1xuaW1wb3J0IHsgZ2V0RnJpZW5kbHlVUkwgfSBmcm9tICd3b3JrYm94LWNvcmUvX3ByaXZhdGUvZ2V0RnJpZW5kbHlVUkwuanMnO1xuaW1wb3J0IHsgU3RyYXRlZ3lIYW5kbGVyIH0gZnJvbSAnLi9TdHJhdGVneUhhbmRsZXIuanMnO1xuaW1wb3J0ICcuL192ZXJzaW9uLmpzJztcbi8qKlxuICogQW4gYWJzdHJhY3QgYmFzZSBjbGFzcyB0aGF0IGFsbCBvdGhlciBzdHJhdGVneSBjbGFzc2VzIG11c3QgZXh0ZW5kIGZyb206XG4gKlxuICogQG1lbWJlcm9mIHdvcmtib3gtc3RyYXRlZ2llc1xuICovXG5jbGFzcyBTdHJhdGVneSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgc3RyYXRlZ3kgYW5kIHNldHMgYWxsIGRvY3VtZW50ZWQgb3B0aW9uXG4gICAgICogcHJvcGVydGllcyBhcyBwdWJsaWMgaW5zdGFuY2UgcHJvcGVydGllcy5cbiAgICAgKlxuICAgICAqIE5vdGU6IGlmIGEgY3VzdG9tIHN0cmF0ZWd5IGNsYXNzIGV4dGVuZHMgdGhlIGJhc2UgU3RyYXRlZ3kgY2xhc3MgYW5kIGRvZXNcbiAgICAgKiBub3QgbmVlZCBtb3JlIHRoYW4gdGhlc2UgcHJvcGVydGllcywgaXQgZG9lcyBub3QgbmVlZCB0byBkZWZpbmUgaXRzIG93blxuICAgICAqIGNvbnN0cnVjdG9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5jYWNoZU5hbWVdIENhY2hlIG5hbWUgdG8gc3RvcmUgYW5kIHJldHJpZXZlXG4gICAgICogcmVxdWVzdHMuIERlZmF1bHRzIHRvIHRoZSBjYWNoZSBuYW1lcyBwcm92aWRlZCBieVxuICAgICAqIHtAbGluayB3b3JrYm94LWNvcmUuY2FjaGVOYW1lc30uXG4gICAgICogQHBhcmFtIHtBcnJheTxPYmplY3Q+fSBbb3B0aW9ucy5wbHVnaW5zXSBbUGx1Z2luc117QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vd2ViL3Rvb2xzL3dvcmtib3gvZ3VpZGVzL3VzaW5nLXBsdWdpbnN9XG4gICAgICogdG8gdXNlIGluIGNvbmp1bmN0aW9uIHdpdGggdGhpcyBjYWNoaW5nIHN0cmF0ZWd5LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5mZXRjaE9wdGlvbnNdIFZhbHVlcyBwYXNzZWQgYWxvbmcgdG8gdGhlXG4gICAgICogW2Bpbml0YF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dpbmRvd09yV29ya2VyR2xvYmFsU2NvcGUvZmV0Y2gjUGFyYW1ldGVycylcbiAgICAgKiBvZiBbbm9uLW5hdmlnYXRpb25dKGh0dHBzOi8vZ2l0aHViLmNvbS9Hb29nbGVDaHJvbWUvd29ya2JveC9pc3N1ZXMvMTc5NilcbiAgICAgKiBgZmV0Y2goKWAgcmVxdWVzdHMgbWFkZSBieSB0aGlzIHN0cmF0ZWd5LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5tYXRjaE9wdGlvbnNdIFRoZVxuICAgICAqIFtgQ2FjaGVRdWVyeU9wdGlvbnNgXXtAbGluayBodHRwczovL3czYy5naXRodWIuaW8vU2VydmljZVdvcmtlci8jZGljdGRlZi1jYWNoZXF1ZXJ5b3B0aW9uc31cbiAgICAgKiBmb3IgYW55IGBjYWNoZS5tYXRjaCgpYCBvciBgY2FjaGUucHV0KClgIGNhbGxzIG1hZGUgYnkgdGhpcyBzdHJhdGVneS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhY2hlIG5hbWUgdG8gc3RvcmUgYW5kIHJldHJpZXZlXG4gICAgICAgICAqIHJlcXVlc3RzLiBEZWZhdWx0cyB0byB0aGUgY2FjaGUgbmFtZXMgcHJvdmlkZWQgYnlcbiAgICAgICAgICoge0BsaW5rIHdvcmtib3gtY29yZS5jYWNoZU5hbWVzfS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2FjaGVOYW1lID0gY2FjaGVOYW1lcy5nZXRSdW50aW1lTmFtZShvcHRpb25zLmNhY2hlTmFtZSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbGlzdFxuICAgICAgICAgKiBbUGx1Z2luc117QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vd2ViL3Rvb2xzL3dvcmtib3gvZ3VpZGVzL3VzaW5nLXBsdWdpbnN9XG4gICAgICAgICAqIHVzZWQgYnkgdGhpcyBzdHJhdGVneS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge0FycmF5PE9iamVjdD59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBsdWdpbnMgPSBvcHRpb25zLnBsdWdpbnMgfHwgW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWYWx1ZXMgcGFzc2VkIGFsb25nIHRvIHRoZVxuICAgICAgICAgKiBbYGluaXRgXXtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2luZG93T3JXb3JrZXJHbG9iYWxTY29wZS9mZXRjaCNQYXJhbWV0ZXJzfVxuICAgICAgICAgKiBvZiBhbGwgZmV0Y2goKSByZXF1ZXN0cyBtYWRlIGJ5IHRoaXMgc3RyYXRlZ3kuXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZldGNoT3B0aW9ucyA9IG9wdGlvbnMuZmV0Y2hPcHRpb25zO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlXG4gICAgICAgICAqIFtgQ2FjaGVRdWVyeU9wdGlvbnNgXXtAbGluayBodHRwczovL3czYy5naXRodWIuaW8vU2VydmljZVdvcmtlci8jZGljdGRlZi1jYWNoZXF1ZXJ5b3B0aW9uc31cbiAgICAgICAgICogZm9yIGFueSBgY2FjaGUubWF0Y2goKWAgb3IgYGNhY2hlLnB1dCgpYCBjYWxscyBtYWRlIGJ5IHRoaXMgc3RyYXRlZ3kuXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1hdGNoT3B0aW9ucyA9IG9wdGlvbnMubWF0Y2hPcHRpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGEgcmVxdWVzdCBzdHJhdGVneSBhbmQgcmV0dXJucyBhIGBQcm9taXNlYCB0aGF0IHdpbGwgcmVzb2x2ZSB3aXRoXG4gICAgICogYSBgUmVzcG9uc2VgLCBpbnZva2luZyBhbGwgcmVsZXZhbnQgcGx1Z2luIGNhbGxiYWNrcy5cbiAgICAgKlxuICAgICAqIFdoZW4gYSBzdHJhdGVneSBpbnN0YW5jZSBpcyByZWdpc3RlcmVkIHdpdGggYSBXb3JrYm94XG4gICAgICoge0BsaW5rIHdvcmtib3gtcm91dGluZy5Sb3V0ZX0sIHRoaXMgbWV0aG9kIGlzIGF1dG9tYXRpY2FsbHlcbiAgICAgKiBjYWxsZWQgd2hlbiB0aGUgcm91dGUgbWF0Y2hlcy5cbiAgICAgKlxuICAgICAqIEFsdGVybmF0aXZlbHksIHRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIGluIGEgc3RhbmRhbG9uZSBgRmV0Y2hFdmVudGBcbiAgICAgKiBsaXN0ZW5lciBieSBwYXNzaW5nIGl0IHRvIGBldmVudC5yZXNwb25kV2l0aCgpYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RmV0Y2hFdmVudHxPYmplY3R9IG9wdGlvbnMgQSBgRmV0Y2hFdmVudGAgb3IgYW4gb2JqZWN0IHdpdGggdGhlXG4gICAgICogICAgIHByb3BlcnRpZXMgbGlzdGVkIGJlbG93LlxuICAgICAqIEBwYXJhbSB7UmVxdWVzdHxzdHJpbmd9IG9wdGlvbnMucmVxdWVzdCBBIHJlcXVlc3QgdG8gcnVuIHRoaXMgc3RyYXRlZ3kgZm9yLlxuICAgICAqIEBwYXJhbSB7RXh0ZW5kYWJsZUV2ZW50fSBvcHRpb25zLmV2ZW50IFRoZSBldmVudCBhc3NvY2lhdGVkIHdpdGggdGhlXG4gICAgICogICAgIHJlcXVlc3QuXG4gICAgICogQHBhcmFtIHtVUkx9IFtvcHRpb25zLnVybF1cbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zLnBhcmFtc11cbiAgICAgKi9cbiAgICBoYW5kbGUob3B0aW9ucykge1xuICAgICAgICBjb25zdCBbcmVzcG9uc2VEb25lXSA9IHRoaXMuaGFuZGxlQWxsKG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2VEb25lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaW1pbGFyIHRvIHtAbGluayB3b3JrYm94LXN0cmF0ZWdpZXMuU3RyYXRlZ3l+aGFuZGxlfSwgYnV0XG4gICAgICogaW5zdGVhZCBvZiBqdXN0IHJldHVybmluZyBhIGBQcm9taXNlYCB0aGF0IHJlc29sdmVzIHRvIGEgYFJlc3BvbnNlYCBpdFxuICAgICAqIGl0IHdpbGwgcmV0dXJuIGFuIHR1cGxlIG9mIGBbcmVzcG9uc2UsIGRvbmVdYCBwcm9taXNlcywgd2hlcmUgdGhlIGZvcm1lclxuICAgICAqIChgcmVzcG9uc2VgKSBpcyBlcXVpdmFsZW50IHRvIHdoYXQgYGhhbmRsZSgpYCByZXR1cm5zLCBhbmQgdGhlIGxhdHRlciBpcyBhXG4gICAgICogUHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSBvbmNlIGFueSBwcm9taXNlcyB0aGF0IHdlcmUgYWRkZWQgdG9cbiAgICAgKiBgZXZlbnQud2FpdFVudGlsKClgIGFzIHBhcnQgb2YgcGVyZm9ybWluZyB0aGUgc3RyYXRlZ3kgaGF2ZSBjb21wbGV0ZWQuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIGF3YWl0IHRoZSBgZG9uZWAgcHJvbWlzZSB0byBlbnN1cmUgYW55IGV4dHJhIHdvcmsgcGVyZm9ybWVkIGJ5XG4gICAgICogdGhlIHN0cmF0ZWd5ICh1c3VhbGx5IGNhY2hpbmcgcmVzcG9uc2VzKSBjb21wbGV0ZXMgc3VjY2Vzc2Z1bGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGZXRjaEV2ZW50fE9iamVjdH0gb3B0aW9ucyBBIGBGZXRjaEV2ZW50YCBvciBhbiBvYmplY3Qgd2l0aCB0aGVcbiAgICAgKiAgICAgcHJvcGVydGllcyBsaXN0ZWQgYmVsb3cuXG4gICAgICogQHBhcmFtIHtSZXF1ZXN0fHN0cmluZ30gb3B0aW9ucy5yZXF1ZXN0IEEgcmVxdWVzdCB0byBydW4gdGhpcyBzdHJhdGVneSBmb3IuXG4gICAgICogQHBhcmFtIHtFeHRlbmRhYmxlRXZlbnR9IG9wdGlvbnMuZXZlbnQgVGhlIGV2ZW50IGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAgICAgKiAgICAgcmVxdWVzdC5cbiAgICAgKiBAcGFyYW0ge1VSTH0gW29wdGlvbnMudXJsXVxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnMucGFyYW1zXVxuICAgICAqIEByZXR1cm4ge0FycmF5PFByb21pc2U+fSBBIHR1cGxlIG9mIFtyZXNwb25zZSwgZG9uZV1cbiAgICAgKiAgICAgcHJvbWlzZXMgdGhhdCBjYW4gYmUgdXNlZCB0byBkZXRlcm1pbmUgd2hlbiB0aGUgcmVzcG9uc2UgcmVzb2x2ZXMgYXNcbiAgICAgKiAgICAgd2VsbCBhcyB3aGVuIHRoZSBoYW5kbGVyIGhhcyBjb21wbGV0ZWQgYWxsIGl0cyB3b3JrLlxuICAgICAqL1xuICAgIGhhbmRsZUFsbChvcHRpb25zKSB7XG4gICAgICAgIC8vIEFsbG93IGZvciBmbGV4aWJsZSBvcHRpb25zIHRvIGJlIHBhc3NlZC5cbiAgICAgICAgaWYgKG9wdGlvbnMgaW5zdGFuY2VvZiBGZXRjaEV2ZW50KSB7XG4gICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIGV2ZW50OiBvcHRpb25zLFxuICAgICAgICAgICAgICAgIHJlcXVlc3Q6IG9wdGlvbnMucmVxdWVzdCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXZlbnQgPSBvcHRpb25zLmV2ZW50O1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdHlwZW9mIG9wdGlvbnMucmVxdWVzdCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gbmV3IFJlcXVlc3Qob3B0aW9ucy5yZXF1ZXN0KVxuICAgICAgICAgICAgOiBvcHRpb25zLnJlcXVlc3Q7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9ICdwYXJhbXMnIGluIG9wdGlvbnMgPyBvcHRpb25zLnBhcmFtcyA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgaGFuZGxlciA9IG5ldyBTdHJhdGVneUhhbmRsZXIodGhpcywgeyBldmVudCwgcmVxdWVzdCwgcGFyYW1zIH0pO1xuICAgICAgICBjb25zdCByZXNwb25zZURvbmUgPSB0aGlzLl9nZXRSZXNwb25zZShoYW5kbGVyLCByZXF1ZXN0LCBldmVudCk7XG4gICAgICAgIGNvbnN0IGhhbmRsZXJEb25lID0gdGhpcy5fYXdhaXRDb21wbGV0ZShyZXNwb25zZURvbmUsIGhhbmRsZXIsIHJlcXVlc3QsIGV2ZW50KTtcbiAgICAgICAgLy8gUmV0dXJuIGFuIGFycmF5IG9mIHByb21pc2VzLCBzdWl0YWJsZSBmb3IgdXNlIHdpdGggUHJvbWlzZS5hbGwoKS5cbiAgICAgICAgcmV0dXJuIFtyZXNwb25zZURvbmUsIGhhbmRsZXJEb25lXTtcbiAgICB9XG4gICAgYXN5bmMgX2dldFJlc3BvbnNlKGhhbmRsZXIsIHJlcXVlc3QsIGV2ZW50KSB7XG4gICAgICAgIGF3YWl0IGhhbmRsZXIucnVuQ2FsbGJhY2tzKCdoYW5kbGVyV2lsbFN0YXJ0JywgeyBldmVudCwgcmVxdWVzdCB9KTtcbiAgICAgICAgbGV0IHJlc3BvbnNlID0gdW5kZWZpbmVkO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLl9oYW5kbGUocmVxdWVzdCwgaGFuZGxlcik7XG4gICAgICAgICAgICAvLyBUaGUgXCJvZmZpY2lhbFwiIFN0cmF0ZWd5IHN1YmNsYXNzZXMgYWxsIHRocm93IHRoaXMgZXJyb3IgYXV0b21hdGljYWxseSxcbiAgICAgICAgICAgIC8vIGJ1dCBpbiBjYXNlIGEgdGhpcmQtcGFydHkgU3RyYXRlZ3kgZG9lc24ndCwgZW5zdXJlIHRoYXQgd2UgaGF2ZSBhXG4gICAgICAgICAgICAvLyBjb25zaXN0ZW50IGZhaWx1cmUgd2hlbiB0aGVyZSdzIG5vIHJlc3BvbnNlIG9yIGFuIGVycm9yIHJlc3BvbnNlLlxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCByZXNwb25zZS50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFdvcmtib3hFcnJvcignbm8tcmVzcG9uc2UnLCB7IHVybDogcmVxdWVzdC51cmwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgaGFuZGxlci5pdGVyYXRlQ2FsbGJhY2tzKCdoYW5kbGVyRGlkRXJyb3InKSkge1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IGNhbGxiYWNrKHsgZXJyb3IsIGV2ZW50LCByZXF1ZXN0IH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coYFdoaWxlIHJlc3BvbmRpbmcgdG8gJyR7Z2V0RnJpZW5kbHlVUkwocmVxdWVzdC51cmwpfScsIGAgK1xuICAgICAgICAgICAgICAgICAgICBgYW4gJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IudG9TdHJpbmcoKSA6ICcnfSBlcnJvciBvY2N1cnJlZC4gVXNpbmcgYSBmYWxsYmFjayByZXNwb25zZSBwcm92aWRlZCBieSBgICtcbiAgICAgICAgICAgICAgICAgICAgYGEgaGFuZGxlckRpZEVycm9yIHBsdWdpbi5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGhhbmRsZXIuaXRlcmF0ZUNhbGxiYWNrcygnaGFuZGxlcldpbGxSZXNwb25kJykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgY2FsbGJhY2soeyBldmVudCwgcmVxdWVzdCwgcmVzcG9uc2UgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cbiAgICBhc3luYyBfYXdhaXRDb21wbGV0ZShyZXNwb25zZURvbmUsIGhhbmRsZXIsIHJlcXVlc3QsIGV2ZW50KSB7XG4gICAgICAgIGxldCByZXNwb25zZTtcbiAgICAgICAgbGV0IGVycm9yO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCByZXNwb25zZURvbmU7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBJZ25vcmUgZXJyb3JzLCBhcyByZXNwb25zZSBlcnJvcnMgc2hvdWxkIGJlIGNhdWdodCB2aWEgdGhlIGByZXNwb25zZWBcbiAgICAgICAgICAgIC8vIHByb21pc2UgYWJvdmUuIFRoZSBgZG9uZWAgcHJvbWlzZSB3aWxsIG9ubHkgdGhyb3cgZm9yIGVycm9ycyBpblxuICAgICAgICAgICAgLy8gcHJvbWlzZXMgcGFzc2VkIHRvIGBoYW5kbGVyLndhaXRVbnRpbCgpYC5cbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5ydW5DYWxsYmFja3MoJ2hhbmRsZXJEaWRSZXNwb25kJywge1xuICAgICAgICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgICAgICAgIHJlcXVlc3QsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuZG9uZVdhaXRpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAod2FpdFVudGlsRXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh3YWl0VW50aWxFcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgZXJyb3IgPSB3YWl0VW50aWxFcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBoYW5kbGVyLnJ1bkNhbGxiYWNrcygnaGFuZGxlckRpZENvbXBsZXRlJywge1xuICAgICAgICAgICAgZXZlbnQsXG4gICAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IsXG4gICAgICAgIH0pO1xuICAgICAgICBoYW5kbGVyLmRlc3Ryb3koKTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCB7IFN0cmF0ZWd5IH07XG4vKipcbiAqIENsYXNzZXMgZXh0ZW5kaW5nIHRoZSBgU3RyYXRlZ3lgIGJhc2VkIGNsYXNzIHNob3VsZCBpbXBsZW1lbnQgdGhpcyBtZXRob2QsXG4gKiBhbmQgbGV2ZXJhZ2UgdGhlIHtAbGluayB3b3JrYm94LXN0cmF0ZWdpZXMuU3RyYXRlZ3lIYW5kbGVyfVxuICogYXJnIHRvIHBlcmZvcm0gYWxsIGZldGNoaW5nIGFuZCBjYWNoZSBsb2dpYywgd2hpY2ggd2lsbCBlbnN1cmUgYWxsIHJlbGV2YW50XG4gKiBjYWNoZSwgY2FjaGUgb3B0aW9ucywgZmV0Y2ggb3B0aW9ucyBhbmQgcGx1Z2lucyBhcmUgdXNlZCAocGVyIHRoZSBjdXJyZW50XG4gKiBzdHJhdGVneSBpbnN0YW5jZSkuXG4gKlxuICogQG5hbWUgX2hhbmRsZVxuICogQGluc3RhbmNlXG4gKiBAYWJzdHJhY3RcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtSZXF1ZXN0fSByZXF1ZXN0XG4gKiBAcGFyYW0ge3dvcmtib3gtc3RyYXRlZ2llcy5TdHJhdGVneUhhbmRsZXJ9IGhhbmRsZXJcbiAqIEByZXR1cm4ge1Byb21pc2U8UmVzcG9uc2U+fVxuICpcbiAqIEBtZW1iZXJvZiB3b3JrYm94LXN0cmF0ZWdpZXMuU3RyYXRlZ3lcbiAqL1xuIiwiLypcbiAgQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGVcbiAgbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0XG4gIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULlxuKi9cbmltcG9ydCAnLi4vX3ZlcnNpb24uanMnO1xuLyoqXG4gKiBBIGhlbHBlciBmdW5jdGlvbiB0aGF0IHByZXZlbnRzIGEgcHJvbWlzZSBmcm9tIGJlaW5nIGZsYWdnZWQgYXMgdW51c2VkLlxuICpcbiAqIEBwcml2YXRlXG4gKiovXG5leHBvcnQgZnVuY3Rpb24gZG9udFdhaXRGb3IocHJvbWlzZSkge1xuICAgIC8vIEVmZmVjdGl2ZSBuby1vcC5cbiAgICB2b2lkIHByb21pc2UudGhlbigoKSA9PiB7IH0pO1xufVxuIiwiY29uc3QgaW5zdGFuY2VPZkFueSA9IChvYmplY3QsIGNvbnN0cnVjdG9ycykgPT4gY29uc3RydWN0b3JzLnNvbWUoKGMpID0+IG9iamVjdCBpbnN0YW5jZW9mIGMpO1xuXG5sZXQgaWRiUHJveHlhYmxlVHlwZXM7XG5sZXQgY3Vyc29yQWR2YW5jZU1ldGhvZHM7XG4vLyBUaGlzIGlzIGEgZnVuY3Rpb24gdG8gcHJldmVudCBpdCB0aHJvd2luZyB1cCBpbiBub2RlIGVudmlyb25tZW50cy5cbmZ1bmN0aW9uIGdldElkYlByb3h5YWJsZVR5cGVzKCkge1xuICAgIHJldHVybiAoaWRiUHJveHlhYmxlVHlwZXMgfHxcbiAgICAgICAgKGlkYlByb3h5YWJsZVR5cGVzID0gW1xuICAgICAgICAgICAgSURCRGF0YWJhc2UsXG4gICAgICAgICAgICBJREJPYmplY3RTdG9yZSxcbiAgICAgICAgICAgIElEQkluZGV4LFxuICAgICAgICAgICAgSURCQ3Vyc29yLFxuICAgICAgICAgICAgSURCVHJhbnNhY3Rpb24sXG4gICAgICAgIF0pKTtcbn1cbi8vIFRoaXMgaXMgYSBmdW5jdGlvbiB0byBwcmV2ZW50IGl0IHRocm93aW5nIHVwIGluIG5vZGUgZW52aXJvbm1lbnRzLlxuZnVuY3Rpb24gZ2V0Q3Vyc29yQWR2YW5jZU1ldGhvZHMoKSB7XG4gICAgcmV0dXJuIChjdXJzb3JBZHZhbmNlTWV0aG9kcyB8fFxuICAgICAgICAoY3Vyc29yQWR2YW5jZU1ldGhvZHMgPSBbXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmFkdmFuY2UsXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmNvbnRpbnVlLFxuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5jb250aW51ZVByaW1hcnlLZXksXG4gICAgICAgIF0pKTtcbn1cbmNvbnN0IGN1cnNvclJlcXVlc3RNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNhY3Rpb25Eb25lTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2Zvcm1DYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gcHJvbWlzaWZ5UmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgdW5saXN0ZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICByZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBzdWNjZXNzKTtcbiAgICAgICAgICAgIHJlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKHdyYXAocmVxdWVzdC5yZXN1bHQpKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgc3VjY2Vzcyk7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgfSk7XG4gICAgcHJvbWlzZVxuICAgICAgICAudGhlbigodmFsdWUpID0+IHtcbiAgICAgICAgLy8gU2luY2UgY3Vyc29yaW5nIHJldXNlcyB0aGUgSURCUmVxdWVzdCAoKnNpZ2gqKSwgd2UgY2FjaGUgaXQgZm9yIGxhdGVyIHJldHJpZXZhbFxuICAgICAgICAvLyAoc2VlIHdyYXBGdW5jdGlvbikuXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQkN1cnNvcikge1xuICAgICAgICAgICAgY3Vyc29yUmVxdWVzdE1hcC5zZXQodmFsdWUsIHJlcXVlc3QpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENhdGNoaW5nIHRvIGF2b2lkIFwiVW5jYXVnaHQgUHJvbWlzZSBleGNlcHRpb25zXCJcbiAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAvLyBUaGlzIG1hcHBpbmcgZXhpc3RzIGluIHJldmVyc2VUcmFuc2Zvcm1DYWNoZSBidXQgZG9lc24ndCBkb2Vzbid0IGV4aXN0IGluIHRyYW5zZm9ybUNhY2hlLiBUaGlzXG4gICAgLy8gaXMgYmVjYXVzZSB3ZSBjcmVhdGUgbWFueSBwcm9taXNlcyBmcm9tIGEgc2luZ2xlIElEQlJlcXVlc3QuXG4gICAgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLnNldChwcm9taXNlLCByZXF1ZXN0KTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbih0eCkge1xuICAgIC8vIEVhcmx5IGJhaWwgaWYgd2UndmUgYWxyZWFkeSBjcmVhdGVkIGEgZG9uZSBwcm9taXNlIGZvciB0aGlzIHRyYW5zYWN0aW9uLlxuICAgIGlmICh0cmFuc2FjdGlvbkRvbmVNYXAuaGFzKHR4KSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGRvbmUgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHVubGlzdGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29tcGxldGUnLCBjb21wbGV0ZSk7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjb21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KHR4LmVycm9yIHx8IG5ldyBET01FeGNlcHRpb24oJ0Fib3J0RXJyb3InLCAnQWJvcnRFcnJvcicpKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgY29tcGxldGUpO1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBlcnJvcik7XG4gICAgfSk7XG4gICAgLy8gQ2FjaGUgaXQgZm9yIGxhdGVyIHJldHJpZXZhbC5cbiAgICB0cmFuc2FjdGlvbkRvbmVNYXAuc2V0KHR4LCBkb25lKTtcbn1cbmxldCBpZGJQcm94eVRyYXBzID0ge1xuICAgIGdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgdHJhbnNhY3Rpb24uZG9uZS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnZG9uZScpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uRG9uZU1hcC5nZXQodGFyZ2V0KTtcbiAgICAgICAgICAgIC8vIFBvbHlmaWxsIGZvciBvYmplY3RTdG9yZU5hbWVzIGJlY2F1c2Ugb2YgRWRnZS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnb2JqZWN0U3RvcmVOYW1lcycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0Lm9iamVjdFN0b3JlTmFtZXMgfHwgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwLmdldCh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTWFrZSB0eC5zdG9yZSByZXR1cm4gdGhlIG9ubHkgc3RvcmUgaW4gdGhlIHRyYW5zYWN0aW9uLCBvciB1bmRlZmluZWQgaWYgdGhlcmUgYXJlIG1hbnkuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ3N0b3JlJykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWNlaXZlci5vYmplY3RTdG9yZU5hbWVzWzFdXG4gICAgICAgICAgICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIDogcmVjZWl2ZXIub2JqZWN0U3RvcmUocmVjZWl2ZXIub2JqZWN0U3RvcmVOYW1lc1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gRWxzZSB0cmFuc2Zvcm0gd2hhdGV2ZXIgd2UgZ2V0IGJhY2suXG4gICAgICAgIHJldHVybiB3cmFwKHRhcmdldFtwcm9wXSk7XG4gICAgfSxcbiAgICBzZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBoYXModGFyZ2V0LCBwcm9wKSB7XG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbiAmJlxuICAgICAgICAgICAgKHByb3AgPT09ICdkb25lJyB8fCBwcm9wID09PSAnc3RvcmUnKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByb3AgaW4gdGFyZ2V0O1xuICAgIH0sXG59O1xuZnVuY3Rpb24gcmVwbGFjZVRyYXBzKGNhbGxiYWNrKSB7XG4gICAgaWRiUHJveHlUcmFwcyA9IGNhbGxiYWNrKGlkYlByb3h5VHJhcHMpO1xufVxuZnVuY3Rpb24gd3JhcEZ1bmN0aW9uKGZ1bmMpIHtcbiAgICAvLyBEdWUgdG8gZXhwZWN0ZWQgb2JqZWN0IGVxdWFsaXR5ICh3aGljaCBpcyBlbmZvcmNlZCBieSB0aGUgY2FjaGluZyBpbiBgd3JhcGApLCB3ZVxuICAgIC8vIG9ubHkgY3JlYXRlIG9uZSBuZXcgZnVuYyBwZXIgZnVuYy5cbiAgICAvLyBFZGdlIGRvZXNuJ3Qgc3VwcG9ydCBvYmplY3RTdG9yZU5hbWVzIChib29vKSwgc28gd2UgcG9seWZpbGwgaXQgaGVyZS5cbiAgICBpZiAoZnVuYyA9PT0gSURCRGF0YWJhc2UucHJvdG90eXBlLnRyYW5zYWN0aW9uICYmXG4gICAgICAgICEoJ29iamVjdFN0b3JlTmFtZXMnIGluIElEQlRyYW5zYWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdG9yZU5hbWVzLCAuLi5hcmdzKSB7XG4gICAgICAgICAgICBjb25zdCB0eCA9IGZ1bmMuY2FsbCh1bndyYXAodGhpcyksIHN0b3JlTmFtZXMsIC4uLmFyZ3MpO1xuICAgICAgICAgICAgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwLnNldCh0eCwgc3RvcmVOYW1lcy5zb3J0ID8gc3RvcmVOYW1lcy5zb3J0KCkgOiBbc3RvcmVOYW1lc10pO1xuICAgICAgICAgICAgcmV0dXJuIHdyYXAodHgpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyBDdXJzb3IgbWV0aG9kcyBhcmUgc3BlY2lhbCwgYXMgdGhlIGJlaGF2aW91ciBpcyBhIGxpdHRsZSBtb3JlIGRpZmZlcmVudCB0byBzdGFuZGFyZCBJREIuIEluXG4gICAgLy8gSURCLCB5b3UgYWR2YW5jZSB0aGUgY3Vyc29yIGFuZCB3YWl0IGZvciBhIG5ldyAnc3VjY2Vzcycgb24gdGhlIElEQlJlcXVlc3QgdGhhdCBnYXZlIHlvdSB0aGVcbiAgICAvLyBjdXJzb3IuIEl0J3Mga2luZGEgbGlrZSBhIHByb21pc2UgdGhhdCBjYW4gcmVzb2x2ZSB3aXRoIG1hbnkgdmFsdWVzLiBUaGF0IGRvZXNuJ3QgbWFrZSBzZW5zZVxuICAgIC8vIHdpdGggcmVhbCBwcm9taXNlcywgc28gZWFjaCBhZHZhbmNlIG1ldGhvZHMgcmV0dXJucyBhIG5ldyBwcm9taXNlIGZvciB0aGUgY3Vyc29yIG9iamVjdCwgb3JcbiAgICAvLyB1bmRlZmluZWQgaWYgdGhlIGVuZCBvZiB0aGUgY3Vyc29yIGhhcyBiZWVuIHJlYWNoZWQuXG4gICAgaWYgKGdldEN1cnNvckFkdmFuY2VNZXRob2RzKCkuaW5jbHVkZXMoZnVuYykpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAvLyBDYWxsaW5nIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm94eSBhcyAndGhpcycgY2F1c2VzIElMTEVHQUwgSU5WT0NBVElPTiwgc28gd2UgdXNlXG4gICAgICAgICAgICAvLyB0aGUgb3JpZ2luYWwgb2JqZWN0LlxuICAgICAgICAgICAgZnVuYy5hcHBseSh1bndyYXAodGhpcyksIGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIHdyYXAoY3Vyc29yUmVxdWVzdE1hcC5nZXQodGhpcykpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gQ2FsbGluZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJveHkgYXMgJ3RoaXMnIGNhdXNlcyBJTExFR0FMIElOVk9DQVRJT04sIHNvIHdlIHVzZVxuICAgICAgICAvLyB0aGUgb3JpZ2luYWwgb2JqZWN0LlxuICAgICAgICByZXR1cm4gd3JhcChmdW5jLmFwcGx5KHVud3JhcCh0aGlzKSwgYXJncykpO1xuICAgIH07XG59XG5mdW5jdGlvbiB0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgcmV0dXJuIHdyYXBGdW5jdGlvbih2YWx1ZSk7XG4gICAgLy8gVGhpcyBkb2Vzbid0IHJldHVybiwgaXQganVzdCBjcmVhdGVzIGEgJ2RvbmUnIHByb21pc2UgZm9yIHRoZSB0cmFuc2FjdGlvbixcbiAgICAvLyB3aGljaCBpcyBsYXRlciByZXR1cm5lZCBmb3IgdHJhbnNhY3Rpb24uZG9uZSAoc2VlIGlkYk9iamVjdEhhbmRsZXIpLlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uKVxuICAgICAgICBjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24odmFsdWUpO1xuICAgIGlmIChpbnN0YW5jZU9mQW55KHZhbHVlLCBnZXRJZGJQcm94eWFibGVUeXBlcygpKSlcbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eSh2YWx1ZSwgaWRiUHJveHlUcmFwcyk7XG4gICAgLy8gUmV0dXJuIHRoZSBzYW1lIHZhbHVlIGJhY2sgaWYgd2UncmUgbm90IGdvaW5nIHRvIHRyYW5zZm9ybSBpdC5cbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiB3cmFwKHZhbHVlKSB7XG4gICAgLy8gV2Ugc29tZXRpbWVzIGdlbmVyYXRlIG11bHRpcGxlIHByb21pc2VzIGZyb20gYSBzaW5nbGUgSURCUmVxdWVzdCAoZWcgd2hlbiBjdXJzb3JpbmcpLCBiZWNhdXNlXG4gICAgLy8gSURCIGlzIHdlaXJkIGFuZCBhIHNpbmdsZSBJREJSZXF1ZXN0IGNhbiB5aWVsZCBtYW55IHJlc3BvbnNlcywgc28gdGhlc2UgY2FuJ3QgYmUgY2FjaGVkLlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQlJlcXVlc3QpXG4gICAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0KHZhbHVlKTtcbiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IHRyYW5zZm9ybWVkIHRoaXMgdmFsdWUgYmVmb3JlLCByZXVzZSB0aGUgdHJhbnNmb3JtZWQgdmFsdWUuXG4gICAgLy8gVGhpcyBpcyBmYXN0ZXIsIGJ1dCBpdCBhbHNvIHByb3ZpZGVzIG9iamVjdCBlcXVhbGl0eS5cbiAgICBpZiAodHJhbnNmb3JtQ2FjaGUuaGFzKHZhbHVlKSlcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUNhY2hlLmdldCh2YWx1ZSk7XG4gICAgY29uc3QgbmV3VmFsdWUgPSB0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlKHZhbHVlKTtcbiAgICAvLyBOb3QgYWxsIHR5cGVzIGFyZSB0cmFuc2Zvcm1lZC5cbiAgICAvLyBUaGVzZSBtYXkgYmUgcHJpbWl0aXZlIHR5cGVzLCBzbyB0aGV5IGNhbid0IGJlIFdlYWtNYXAga2V5cy5cbiAgICBpZiAobmV3VmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgIHRyYW5zZm9ybUNhY2hlLnNldCh2YWx1ZSwgbmV3VmFsdWUpO1xuICAgICAgICByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuc2V0KG5ld1ZhbHVlLCB2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBuZXdWYWx1ZTtcbn1cbmNvbnN0IHVud3JhcCA9ICh2YWx1ZSkgPT4gcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLmdldCh2YWx1ZSk7XG5cbmV4cG9ydCB7IHJldmVyc2VUcmFuc2Zvcm1DYWNoZSBhcyBhLCBpbnN0YW5jZU9mQW55IGFzIGksIHJlcGxhY2VUcmFwcyBhcyByLCB1bndyYXAgYXMgdSwgd3JhcCBhcyB3IH07XG4iLCJpbXBvcnQgeyB3IGFzIHdyYXAsIHIgYXMgcmVwbGFjZVRyYXBzIH0gZnJvbSAnLi93cmFwLWlkYi12YWx1ZS5qcyc7XG5leHBvcnQgeyB1IGFzIHVud3JhcCwgdyBhcyB3cmFwIH0gZnJvbSAnLi93cmFwLWlkYi12YWx1ZS5qcyc7XG5cbi8qKlxuICogT3BlbiBhIGRhdGFiYXNlLlxuICpcbiAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIGRhdGFiYXNlLlxuICogQHBhcmFtIHZlcnNpb24gU2NoZW1hIHZlcnNpb24uXG4gKiBAcGFyYW0gY2FsbGJhY2tzIEFkZGl0aW9uYWwgY2FsbGJhY2tzLlxuICovXG5mdW5jdGlvbiBvcGVuREIobmFtZSwgdmVyc2lvbiwgeyBibG9ja2VkLCB1cGdyYWRlLCBibG9ja2luZywgdGVybWluYXRlZCB9ID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4obmFtZSwgdmVyc2lvbik7XG4gICAgY29uc3Qgb3BlblByb21pc2UgPSB3cmFwKHJlcXVlc3QpO1xuICAgIGlmICh1cGdyYWRlKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigndXBncmFkZW5lZWRlZCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdXBncmFkZSh3cmFwKHJlcXVlc3QucmVzdWx0KSwgZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQubmV3VmVyc2lvbiwgd3JhcChyZXF1ZXN0LnRyYW5zYWN0aW9uKSwgZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGJsb2NrZWQpIHtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdibG9ja2VkJywgKGV2ZW50KSA9PiBibG9ja2VkKFxuICAgICAgICAvLyBDYXN0aW5nIGR1ZSB0byBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQtRE9NLWxpYi1nZW5lcmF0b3IvcHVsbC8xNDA1XG4gICAgICAgIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50Lm5ld1ZlcnNpb24sIGV2ZW50KSk7XG4gICAgfVxuICAgIG9wZW5Qcm9taXNlXG4gICAgICAgIC50aGVuKChkYikgPT4ge1xuICAgICAgICBpZiAodGVybWluYXRlZClcbiAgICAgICAgICAgIGRiLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgKCkgPT4gdGVybWluYXRlZCgpKTtcbiAgICAgICAgaWYgKGJsb2NraW5nKSB7XG4gICAgICAgICAgICBkYi5hZGRFdmVudExpc3RlbmVyKCd2ZXJzaW9uY2hhbmdlJywgKGV2ZW50KSA9PiBibG9ja2luZyhldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCBldmVudCkpO1xuICAgICAgICB9XG4gICAgfSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgcmV0dXJuIG9wZW5Qcm9taXNlO1xufVxuLyoqXG4gKiBEZWxldGUgYSBkYXRhYmFzZS5cbiAqXG4gKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBkYXRhYmFzZS5cbiAqL1xuZnVuY3Rpb24gZGVsZXRlREIobmFtZSwgeyBibG9ja2VkIH0gPSB7fSkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIuZGVsZXRlRGF0YWJhc2UobmFtZSk7XG4gICAgaWYgKGJsb2NrZWQpIHtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdibG9ja2VkJywgKGV2ZW50KSA9PiBibG9ja2VkKFxuICAgICAgICAvLyBDYXN0aW5nIGR1ZSB0byBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQtRE9NLWxpYi1nZW5lcmF0b3IvcHVsbC8xNDA1XG4gICAgICAgIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50KSk7XG4gICAgfVxuICAgIHJldHVybiB3cmFwKHJlcXVlc3QpLnRoZW4oKCkgPT4gdW5kZWZpbmVkKTtcbn1cblxuY29uc3QgcmVhZE1ldGhvZHMgPSBbJ2dldCcsICdnZXRLZXknLCAnZ2V0QWxsJywgJ2dldEFsbEtleXMnLCAnY291bnQnXTtcbmNvbnN0IHdyaXRlTWV0aG9kcyA9IFsncHV0JywgJ2FkZCcsICdkZWxldGUnLCAnY2xlYXInXTtcbmNvbnN0IGNhY2hlZE1ldGhvZHMgPSBuZXcgTWFwKCk7XG5mdW5jdGlvbiBnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB7XG4gICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgSURCRGF0YWJhc2UgJiZcbiAgICAgICAgIShwcm9wIGluIHRhcmdldCkgJiZcbiAgICAgICAgdHlwZW9mIHByb3AgPT09ICdzdHJpbmcnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjYWNoZWRNZXRob2RzLmdldChwcm9wKSlcbiAgICAgICAgcmV0dXJuIGNhY2hlZE1ldGhvZHMuZ2V0KHByb3ApO1xuICAgIGNvbnN0IHRhcmdldEZ1bmNOYW1lID0gcHJvcC5yZXBsYWNlKC9Gcm9tSW5kZXgkLywgJycpO1xuICAgIGNvbnN0IHVzZUluZGV4ID0gcHJvcCAhPT0gdGFyZ2V0RnVuY05hbWU7XG4gICAgY29uc3QgaXNXcml0ZSA9IHdyaXRlTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSk7XG4gICAgaWYgKFxuICAgIC8vIEJhaWwgaWYgdGhlIHRhcmdldCBkb2Vzbid0IGV4aXN0IG9uIHRoZSB0YXJnZXQuIEVnLCBnZXRBbGwgaXNuJ3QgaW4gRWRnZS5cbiAgICAhKHRhcmdldEZ1bmNOYW1lIGluICh1c2VJbmRleCA/IElEQkluZGV4IDogSURCT2JqZWN0U3RvcmUpLnByb3RvdHlwZSkgfHxcbiAgICAgICAgIShpc1dyaXRlIHx8IHJlYWRNZXRob2RzLmluY2x1ZGVzKHRhcmdldEZ1bmNOYW1lKSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtZXRob2QgPSBhc3luYyBmdW5jdGlvbiAoc3RvcmVOYW1lLCAuLi5hcmdzKSB7XG4gICAgICAgIC8vIGlzV3JpdGUgPyAncmVhZHdyaXRlJyA6IHVuZGVmaW5lZCBnemlwcHMgYmV0dGVyLCBidXQgZmFpbHMgaW4gRWRnZSA6KFxuICAgICAgICBjb25zdCB0eCA9IHRoaXMudHJhbnNhY3Rpb24oc3RvcmVOYW1lLCBpc1dyaXRlID8gJ3JlYWR3cml0ZScgOiAncmVhZG9ubHknKTtcbiAgICAgICAgbGV0IHRhcmdldCA9IHR4LnN0b3JlO1xuICAgICAgICBpZiAodXNlSW5kZXgpXG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQuaW5kZXgoYXJncy5zaGlmdCgpKTtcbiAgICAgICAgLy8gTXVzdCByZWplY3QgaWYgb3AgcmVqZWN0cy5cbiAgICAgICAgLy8gSWYgaXQncyBhIHdyaXRlIG9wZXJhdGlvbiwgbXVzdCByZWplY3QgaWYgdHguZG9uZSByZWplY3RzLlxuICAgICAgICAvLyBNdXN0IHJlamVjdCB3aXRoIG9wIHJlamVjdGlvbiBmaXJzdC5cbiAgICAgICAgLy8gTXVzdCByZXNvbHZlIHdpdGggb3AgdmFsdWUuXG4gICAgICAgIC8vIE11c3QgaGFuZGxlIGJvdGggcHJvbWlzZXMgKG5vIHVuaGFuZGxlZCByZWplY3Rpb25zKVxuICAgICAgICByZXR1cm4gKGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIHRhcmdldFt0YXJnZXRGdW5jTmFtZV0oLi4uYXJncyksXG4gICAgICAgICAgICBpc1dyaXRlICYmIHR4LmRvbmUsXG4gICAgICAgIF0pKVswXTtcbiAgICB9O1xuICAgIGNhY2hlZE1ldGhvZHMuc2V0KHByb3AsIG1ldGhvZCk7XG4gICAgcmV0dXJuIG1ldGhvZDtcbn1cbnJlcGxhY2VUcmFwcygob2xkVHJhcHMpID0+ICh7XG4gICAgLi4ub2xkVHJhcHMsXG4gICAgZ2V0OiAodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikgPT4gZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpLFxuICAgIGhhczogKHRhcmdldCwgcHJvcCkgPT4gISFnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB8fCBvbGRUcmFwcy5oYXModGFyZ2V0LCBwcm9wKSxcbn0pKTtcblxuZXhwb3J0IHsgZGVsZXRlREIsIG9wZW5EQiB9O1xuIiwiLypcbiAgQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuXG4gIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZVxuICBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXRcbiAgaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuXG4qL1xuaW1wb3J0IHsgb3BlbkRCLCBkZWxldGVEQiB9IGZyb20gJ2lkYic7XG5pbXBvcnQgJy4uL192ZXJzaW9uLmpzJztcbmNvbnN0IERCX05BTUUgPSAnd29ya2JveC1leHBpcmF0aW9uJztcbmNvbnN0IENBQ0hFX09CSkVDVF9TVE9SRSA9ICdjYWNoZS1lbnRyaWVzJztcbmNvbnN0IG5vcm1hbGl6ZVVSTCA9ICh1bk5vcm1hbGl6ZWRVcmwpID0+IHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHVuTm9ybWFsaXplZFVybCwgbG9jYXRpb24uaHJlZik7XG4gICAgdXJsLmhhc2ggPSAnJztcbiAgICByZXR1cm4gdXJsLmhyZWY7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSB0aW1lc3RhbXAgbW9kZWwuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuY2xhc3MgQ2FjaGVUaW1lc3RhbXBzTW9kZWwge1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNhY2hlTmFtZVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihjYWNoZU5hbWUpIHtcbiAgICAgICAgdGhpcy5fZGIgPSBudWxsO1xuICAgICAgICB0aGlzLl9jYWNoZU5hbWUgPSBjYWNoZU5hbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGFuIHVwZ3JhZGUgb2YgaW5kZXhlZERCLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtJREJQRGF0YWJhc2U8Q2FjaGVEYlNjaGVtYT59IGRiXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF91cGdyYWRlRGIoZGIpIHtcbiAgICAgICAgLy8gVE9ETyhwaGlsaXB3YWx0b24pOiBFZGdlSFRNTCBkb2Vzbid0IHN1cHBvcnQgYXJyYXlzIGFzIGEga2V5UGF0aCwgc28gd2VcbiAgICAgICAgLy8gaGF2ZSB0byB1c2UgdGhlIGBpZGAga2V5UGF0aCBoZXJlIGFuZCBjcmVhdGUgb3VyIG93biB2YWx1ZXMgKGFcbiAgICAgICAgLy8gY29uY2F0ZW5hdGlvbiBvZiBgdXJsICsgY2FjaGVOYW1lYCkgaW5zdGVhZCBvZiBzaW1wbHkgdXNpbmdcbiAgICAgICAgLy8gYGtleVBhdGg6IFsndXJsJywgJ2NhY2hlTmFtZSddYCwgd2hpY2ggaXMgc3VwcG9ydGVkIGluIG90aGVyIGJyb3dzZXJzLlxuICAgICAgICBjb25zdCBvYmpTdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKENBQ0hFX09CSkVDVF9TVE9SRSwgeyBrZXlQYXRoOiAnaWQnIH0pO1xuICAgICAgICAvLyBUT0RPKHBoaWxpcHdhbHRvbik6IG9uY2Ugd2UgZG9uJ3QgaGF2ZSB0byBzdXBwb3J0IEVkZ2VIVE1MLCB3ZSBjYW5cbiAgICAgICAgLy8gY3JlYXRlIGEgc2luZ2xlIGluZGV4IHdpdGggdGhlIGtleVBhdGggYFsnY2FjaGVOYW1lJywgJ3RpbWVzdGFtcCddYFxuICAgICAgICAvLyBpbnN0ZWFkIG9mIGRvaW5nIGJvdGggdGhlc2UgaW5kZXhlcy5cbiAgICAgICAgb2JqU3RvcmUuY3JlYXRlSW5kZXgoJ2NhY2hlTmFtZScsICdjYWNoZU5hbWUnLCB7IHVuaXF1ZTogZmFsc2UgfSk7XG4gICAgICAgIG9ialN0b3JlLmNyZWF0ZUluZGV4KCd0aW1lc3RhbXAnLCAndGltZXN0YW1wJywgeyB1bmlxdWU6IGZhbHNlIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhbiB1cGdyYWRlIG9mIGluZGV4ZWREQiBhbmQgZGVsZXRlcyBkZXByZWNhdGVkIERCcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SURCUERhdGFiYXNlPENhY2hlRGJTY2hlbWE+fSBkYlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfdXBncmFkZURiQW5kRGVsZXRlT2xkRGJzKGRiKSB7XG4gICAgICAgIHRoaXMuX3VwZ3JhZGVEYihkYik7XG4gICAgICAgIGlmICh0aGlzLl9jYWNoZU5hbWUpIHtcbiAgICAgICAgICAgIHZvaWQgZGVsZXRlREIodGhpcy5fY2FjaGVOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVzdGFtcFxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBhc3luYyBzZXRUaW1lc3RhbXAodXJsLCB0aW1lc3RhbXApIHtcbiAgICAgICAgdXJsID0gbm9ybWFsaXplVVJMKHVybCk7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0ge1xuICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgdGltZXN0YW1wLFxuICAgICAgICAgICAgY2FjaGVOYW1lOiB0aGlzLl9jYWNoZU5hbWUsXG4gICAgICAgICAgICAvLyBDcmVhdGluZyBhbiBJRCBmcm9tIHRoZSBVUkwgYW5kIGNhY2hlIG5hbWUgd29uJ3QgYmUgbmVjZXNzYXJ5IG9uY2VcbiAgICAgICAgICAgIC8vIEVkZ2Ugc3dpdGNoZXMgdG8gQ2hyb21pdW0gYW5kIGFsbCBicm93c2VycyB3ZSBzdXBwb3J0IHdvcmsgd2l0aFxuICAgICAgICAgICAgLy8gYXJyYXkga2V5UGF0aHMuXG4gICAgICAgICAgICBpZDogdGhpcy5fZ2V0SWQodXJsKSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZGIgPSBhd2FpdCB0aGlzLmdldERiKCk7XG4gICAgICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oQ0FDSEVfT0JKRUNUX1NUT1JFLCAncmVhZHdyaXRlJywge1xuICAgICAgICAgICAgZHVyYWJpbGl0eTogJ3JlbGF4ZWQnLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdHguc3RvcmUucHV0KGVudHJ5KTtcbiAgICAgICAgYXdhaXQgdHguZG9uZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdGltZXN0YW1wIHN0b3JlZCBmb3IgYSBnaXZlbiBVUkwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAgICogQHJldHVybiB7bnVtYmVyIHwgdW5kZWZpbmVkfVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBhc3luYyBnZXRUaW1lc3RhbXAodXJsKSB7XG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgdGhpcy5nZXREYigpO1xuICAgICAgICBjb25zdCBlbnRyeSA9IGF3YWl0IGRiLmdldChDQUNIRV9PQkpFQ1RfU1RPUkUsIHRoaXMuX2dldElkKHVybCkpO1xuICAgICAgICByZXR1cm4gZW50cnkgPT09IG51bGwgfHwgZW50cnkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVudHJ5LnRpbWVzdGFtcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgdGhyb3VnaCBhbGwgdGhlIGVudHJpZXMgaW4gdGhlIG9iamVjdCBzdG9yZSAoZnJvbSBuZXdlc3QgdG9cbiAgICAgKiBvbGRlc3QpIGFuZCByZW1vdmVzIGVudHJpZXMgb25jZSBlaXRoZXIgYG1heENvdW50YCBpcyByZWFjaGVkIG9yIHRoZVxuICAgICAqIGVudHJ5J3MgdGltZXN0YW1wIGlzIGxlc3MgdGhhbiBgbWluVGltZXN0YW1wYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5UaW1lc3RhbXBcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4Q291bnRcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBhc3luYyBleHBpcmVFbnRyaWVzKG1pblRpbWVzdGFtcCwgbWF4Q291bnQpIHtcbiAgICAgICAgY29uc3QgZGIgPSBhd2FpdCB0aGlzLmdldERiKCk7XG4gICAgICAgIGxldCBjdXJzb3IgPSBhd2FpdCBkYlxuICAgICAgICAgICAgLnRyYW5zYWN0aW9uKENBQ0hFX09CSkVDVF9TVE9SRSlcbiAgICAgICAgICAgIC5zdG9yZS5pbmRleCgndGltZXN0YW1wJylcbiAgICAgICAgICAgIC5vcGVuQ3Vyc29yKG51bGwsICdwcmV2Jyk7XG4gICAgICAgIGNvbnN0IGVudHJpZXNUb0RlbGV0ZSA9IFtdO1xuICAgICAgICBsZXQgZW50cmllc05vdERlbGV0ZWRDb3VudCA9IDA7XG4gICAgICAgIHdoaWxlIChjdXJzb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGN1cnNvci52YWx1ZTtcbiAgICAgICAgICAgIC8vIFRPRE8ocGhpbGlwd2FsdG9uKTogb25jZSB3ZSBjYW4gdXNlIGEgbXVsdGkta2V5IGluZGV4LCB3ZVxuICAgICAgICAgICAgLy8gd29uJ3QgaGF2ZSB0byBjaGVjayBgY2FjaGVOYW1lYCBoZXJlLlxuICAgICAgICAgICAgaWYgKHJlc3VsdC5jYWNoZU5hbWUgPT09IHRoaXMuX2NhY2hlTmFtZSkge1xuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBhbiBlbnRyeSBpZiBpdCdzIG9sZGVyIHRoYW4gdGhlIG1heCBhZ2Ugb3JcbiAgICAgICAgICAgICAgICAvLyBpZiB3ZSBhbHJlYWR5IGhhdmUgdGhlIG1heCBudW1iZXIgYWxsb3dlZC5cbiAgICAgICAgICAgICAgICBpZiAoKG1pblRpbWVzdGFtcCAmJiByZXN1bHQudGltZXN0YW1wIDwgbWluVGltZXN0YW1wKSB8fFxuICAgICAgICAgICAgICAgICAgICAobWF4Q291bnQgJiYgZW50cmllc05vdERlbGV0ZWRDb3VudCA+PSBtYXhDb3VudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhwaGlsaXB3YWx0b24pOiB3ZSBzaG91bGQgYmUgYWJsZSB0byBkZWxldGUgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGVudHJ5IHJpZ2h0IGhlcmUsIGJ1dCBkb2luZyBzbyBjYXVzZXMgYW4gaXRlcmF0aW9uXG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1ZyBpbiBTYWZhcmkgc3RhYmxlIChmaXhlZCBpbiBUUCkuIEluc3RlYWQgd2UgY2FuXG4gICAgICAgICAgICAgICAgICAgIC8vIHN0b3JlIHRoZSBrZXlzIG9mIHRoZSBlbnRyaWVzIHRvIGRlbGV0ZSwgYW5kIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSBzZXBhcmF0ZSB0cmFuc2FjdGlvbnMuXG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9Hb29nbGVDaHJvbWUvd29ya2JveC9pc3N1ZXMvMTk3OFxuICAgICAgICAgICAgICAgICAgICAvLyBjdXJzb3IuZGVsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG9ubHkgbmVlZCB0byByZXR1cm4gdGhlIFVSTCwgbm90IHRoZSB3aG9sZSBlbnRyeS5cbiAgICAgICAgICAgICAgICAgICAgZW50cmllc1RvRGVsZXRlLnB1c2goY3Vyc29yLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVudHJpZXNOb3REZWxldGVkQ291bnQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJzb3IgPSBhd2FpdCBjdXJzb3IuY29udGludWUoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPKHBoaWxpcHdhbHRvbik6IG9uY2UgdGhlIFNhZmFyaSBidWcgaW4gdGhlIGZvbGxvd2luZyBpc3N1ZSBpcyBmaXhlZCxcbiAgICAgICAgLy8gd2Ugc2hvdWxkIGJlIGFibGUgdG8gcmVtb3ZlIHRoaXMgbG9vcCBhbmQgZG8gdGhlIGVudHJ5IGRlbGV0aW9uIGluIHRoZVxuICAgICAgICAvLyBjdXJzb3IgbG9vcCBhYm92ZTpcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0dvb2dsZUNocm9tZS93b3JrYm94L2lzc3Vlcy8xOTc4XG4gICAgICAgIGNvbnN0IHVybHNEZWxldGVkID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllc1RvRGVsZXRlKSB7XG4gICAgICAgICAgICBhd2FpdCBkYi5kZWxldGUoQ0FDSEVfT0JKRUNUX1NUT1JFLCBlbnRyeS5pZCk7XG4gICAgICAgICAgICB1cmxzRGVsZXRlZC5wdXNoKGVudHJ5LnVybCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVybHNEZWxldGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUYWtlcyBhIFVSTCBhbmQgcmV0dXJucyBhbiBJRCB0aGF0IHdpbGwgYmUgdW5pcXVlIGluIHRoZSBvYmplY3Qgc3RvcmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfZ2V0SWQodXJsKSB7XG4gICAgICAgIC8vIENyZWF0aW5nIGFuIElEIGZyb20gdGhlIFVSTCBhbmQgY2FjaGUgbmFtZSB3b24ndCBiZSBuZWNlc3Nhcnkgb25jZVxuICAgICAgICAvLyBFZGdlIHN3aXRjaGVzIHRvIENocm9taXVtIGFuZCBhbGwgYnJvd3NlcnMgd2Ugc3VwcG9ydCB3b3JrIHdpdGhcbiAgICAgICAgLy8gYXJyYXkga2V5UGF0aHMuXG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZU5hbWUgKyAnfCcgKyBub3JtYWxpemVVUkwodXJsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBvcGVuIGNvbm5lY3Rpb24gdG8gdGhlIGRhdGFiYXNlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBhc3luYyBnZXREYigpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9kYikge1xuICAgICAgICAgICAgdGhpcy5fZGIgPSBhd2FpdCBvcGVuREIoREJfTkFNRSwgMSwge1xuICAgICAgICAgICAgICAgIHVwZ3JhZGU6IHRoaXMuX3VwZ3JhZGVEYkFuZERlbGV0ZU9sZERicy5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2RiO1xuICAgIH1cbn1cbmV4cG9ydCB7IENhY2hlVGltZXN0YW1wc01vZGVsIH07XG4iLCIvKlxuICBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG5cbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICd3b3JrYm94LWNvcmUvX3ByaXZhdGUvYXNzZXJ0LmpzJztcbmltcG9ydCB7IGRvbnRXYWl0Rm9yIH0gZnJvbSAnd29ya2JveC1jb3JlL19wcml2YXRlL2RvbnRXYWl0Rm9yLmpzJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ3dvcmtib3gtY29yZS9fcHJpdmF0ZS9sb2dnZXIuanMnO1xuaW1wb3J0IHsgV29ya2JveEVycm9yIH0gZnJvbSAnd29ya2JveC1jb3JlL19wcml2YXRlL1dvcmtib3hFcnJvci5qcyc7XG5pbXBvcnQgeyBDYWNoZVRpbWVzdGFtcHNNb2RlbCB9IGZyb20gJy4vbW9kZWxzL0NhY2hlVGltZXN0YW1wc01vZGVsLmpzJztcbmltcG9ydCAnLi9fdmVyc2lvbi5qcyc7XG4vKipcbiAqIFRoZSBgQ2FjaGVFeHBpcmF0aW9uYCBjbGFzcyBhbGxvd3MgeW91IGRlZmluZSBhbiBleHBpcmF0aW9uIGFuZCAvIG9yXG4gKiBsaW1pdCBvbiB0aGUgbnVtYmVyIG9mIHJlc3BvbnNlcyBzdG9yZWQgaW4gYVxuICogW2BDYWNoZWBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DYWNoZSkuXG4gKlxuICogQG1lbWJlcm9mIHdvcmtib3gtZXhwaXJhdGlvblxuICovXG5jbGFzcyBDYWNoZUV4cGlyYXRpb24ge1xuICAgIC8qKlxuICAgICAqIFRvIGNvbnN0cnVjdCBhIG5ldyBDYWNoZUV4cGlyYXRpb24gaW5zdGFuY2UgeW91IG11c3QgcHJvdmlkZSBhdCBsZWFzdFxuICAgICAqIG9uZSBvZiB0aGUgYGNvbmZpZ2AgcHJvcGVydGllcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjYWNoZU5hbWUgTmFtZSBvZiB0aGUgY2FjaGUgdG8gYXBwbHkgcmVzdHJpY3Rpb25zIHRvLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2NvbmZpZy5tYXhFbnRyaWVzXSBUaGUgbWF4aW11bSBudW1iZXIgb2YgZW50cmllcyB0byBjYWNoZS5cbiAgICAgKiBFbnRyaWVzIHVzZWQgdGhlIGxlYXN0IHdpbGwgYmUgcmVtb3ZlZCBhcyB0aGUgbWF4aW11bSBpcyByZWFjaGVkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbY29uZmlnLm1heEFnZVNlY29uZHNdIFRoZSBtYXhpbXVtIGFnZSBvZiBhbiBlbnRyeSBiZWZvcmVcbiAgICAgKiBpdCdzIHRyZWF0ZWQgYXMgc3RhbGUgYW5kIHJlbW92ZWQuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtjb25maWcubWF0Y2hPcHRpb25zXSBUaGUgW2BDYWNoZVF1ZXJ5T3B0aW9uc2BdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DYWNoZS9kZWxldGUjUGFyYW1ldGVycylcbiAgICAgKiB0aGF0IHdpbGwgYmUgdXNlZCB3aGVuIGNhbGxpbmcgYGRlbGV0ZSgpYCBvbiB0aGUgY2FjaGUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY2FjaGVOYW1lLCBjb25maWcgPSB7fSkge1xuICAgICAgICB0aGlzLl9pc1J1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcmVydW5SZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIGFzc2VydC5pc1R5cGUoY2FjaGVOYW1lLCAnc3RyaW5nJywge1xuICAgICAgICAgICAgICAgIG1vZHVsZU5hbWU6ICd3b3JrYm94LWV4cGlyYXRpb24nLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ0NhY2hlRXhwaXJhdGlvbicsXG4gICAgICAgICAgICAgICAgZnVuY05hbWU6ICdjb25zdHJ1Y3RvcicsXG4gICAgICAgICAgICAgICAgcGFyYW1OYW1lOiAnY2FjaGVOYW1lJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCEoY29uZmlnLm1heEVudHJpZXMgfHwgY29uZmlnLm1heEFnZVNlY29uZHMpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFdvcmtib3hFcnJvcignbWF4LWVudHJpZXMtb3ItYWdlLXJlcXVpcmVkJywge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGVOYW1lOiAnd29ya2JveC1leHBpcmF0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnQ2FjaGVFeHBpcmF0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgZnVuY05hbWU6ICdjb25zdHJ1Y3RvcicsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29uZmlnLm1heEVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQuaXNUeXBlKGNvbmZpZy5tYXhFbnRyaWVzLCAnbnVtYmVyJywge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGVOYW1lOiAnd29ya2JveC1leHBpcmF0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnQ2FjaGVFeHBpcmF0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgZnVuY05hbWU6ICdjb25zdHJ1Y3RvcicsXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtTmFtZTogJ2NvbmZpZy5tYXhFbnRyaWVzJyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb25maWcubWF4QWdlU2Vjb25kcykge1xuICAgICAgICAgICAgICAgIGFzc2VydC5pc1R5cGUoY29uZmlnLm1heEFnZVNlY29uZHMsICdudW1iZXInLCB7XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZU5hbWU6ICd3b3JrYm94LWV4cGlyYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdDYWNoZUV4cGlyYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICBmdW5jTmFtZTogJ2NvbnN0cnVjdG9yJyxcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1OYW1lOiAnY29uZmlnLm1heEFnZVNlY29uZHMnLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21heEVudHJpZXMgPSBjb25maWcubWF4RW50cmllcztcbiAgICAgICAgdGhpcy5fbWF4QWdlU2Vjb25kcyA9IGNvbmZpZy5tYXhBZ2VTZWNvbmRzO1xuICAgICAgICB0aGlzLl9tYXRjaE9wdGlvbnMgPSBjb25maWcubWF0Y2hPcHRpb25zO1xuICAgICAgICB0aGlzLl9jYWNoZU5hbWUgPSBjYWNoZU5hbWU7XG4gICAgICAgIHRoaXMuX3RpbWVzdGFtcE1vZGVsID0gbmV3IENhY2hlVGltZXN0YW1wc01vZGVsKGNhY2hlTmFtZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4cGlyZXMgZW50cmllcyBmb3IgdGhlIGdpdmVuIGNhY2hlIGFuZCBnaXZlbiBjcml0ZXJpYS5cbiAgICAgKi9cbiAgICBhc3luYyBleHBpcmVFbnRyaWVzKCkge1xuICAgICAgICBpZiAodGhpcy5faXNSdW5uaW5nKSB7XG4gICAgICAgICAgICB0aGlzLl9yZXJ1blJlcXVlc3RlZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faXNSdW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgbWluVGltZXN0YW1wID0gdGhpcy5fbWF4QWdlU2Vjb25kc1xuICAgICAgICAgICAgPyBEYXRlLm5vdygpIC0gdGhpcy5fbWF4QWdlU2Vjb25kcyAqIDEwMDBcbiAgICAgICAgICAgIDogMDtcbiAgICAgICAgY29uc3QgdXJsc0V4cGlyZWQgPSBhd2FpdCB0aGlzLl90aW1lc3RhbXBNb2RlbC5leHBpcmVFbnRyaWVzKG1pblRpbWVzdGFtcCwgdGhpcy5fbWF4RW50cmllcyk7XG4gICAgICAgIC8vIERlbGV0ZSBVUkxzIGZyb20gdGhlIGNhY2hlXG4gICAgICAgIGNvbnN0IGNhY2hlID0gYXdhaXQgc2VsZi5jYWNoZXMub3Blbih0aGlzLl9jYWNoZU5hbWUpO1xuICAgICAgICBmb3IgKGNvbnN0IHVybCBvZiB1cmxzRXhwaXJlZCkge1xuICAgICAgICAgICAgYXdhaXQgY2FjaGUuZGVsZXRlKHVybCwgdGhpcy5fbWF0Y2hPcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgaWYgKHVybHNFeHBpcmVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZ3JvdXBDb2xsYXBzZWQoYEV4cGlyZWQgJHt1cmxzRXhwaXJlZC5sZW5ndGh9IGAgK1xuICAgICAgICAgICAgICAgICAgICBgJHt1cmxzRXhwaXJlZC5sZW5ndGggPT09IDEgPyAnZW50cnknIDogJ2VudHJpZXMnfSBhbmQgcmVtb3ZlZCBgICtcbiAgICAgICAgICAgICAgICAgICAgYCR7dXJsc0V4cGlyZWQubGVuZ3RoID09PSAxID8gJ2l0JyA6ICd0aGVtJ30gZnJvbSB0aGUgYCArXG4gICAgICAgICAgICAgICAgICAgIGAnJHt0aGlzLl9jYWNoZU5hbWV9JyBjYWNoZS5gKTtcbiAgICAgICAgICAgICAgICBsb2dnZXIubG9nKGBFeHBpcmVkIHRoZSBmb2xsb3dpbmcgJHt1cmxzRXhwaXJlZC5sZW5ndGggPT09IDEgPyAnVVJMJyA6ICdVUkxzJ306YCk7XG4gICAgICAgICAgICAgICAgdXJsc0V4cGlyZWQuZm9yRWFjaCgodXJsKSA9PiBsb2dnZXIubG9nKGAgICAgJHt1cmx9YCkpO1xuICAgICAgICAgICAgICAgIGxvZ2dlci5ncm91cEVuZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBDYWNoZSBleHBpcmF0aW9uIHJhbiBhbmQgZm91bmQgbm8gZW50cmllcyB0byByZW1vdmUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faXNSdW5uaW5nID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLl9yZXJ1blJlcXVlc3RlZCkge1xuICAgICAgICAgICAgdGhpcy5fcmVydW5SZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGRvbnRXYWl0Rm9yKHRoaXMuZXhwaXJlRW50cmllcygpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHRpbWVzdGFtcCBmb3IgdGhlIGdpdmVuIFVSTC4gVGhpcyBlbnN1cmVzIHRoZSB3aGVuXG4gICAgICogcmVtb3ZpbmcgZW50cmllcyBiYXNlZCBvbiBtYXhpbXVtIGVudHJpZXMsIG1vc3QgcmVjZW50bHkgdXNlZFxuICAgICAqIGlzIGFjY3VyYXRlIG9yIHdoZW4gZXhwaXJpbmcsIHRoZSB0aW1lc3RhbXAgaXMgdXAtdG8tZGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAgICAgKi9cbiAgICBhc3luYyB1cGRhdGVUaW1lc3RhbXAodXJsKSB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICBhc3NlcnQuaXNUeXBlKHVybCwgJ3N0cmluZycsIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVOYW1lOiAnd29ya2JveC1leHBpcmF0aW9uJyxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdDYWNoZUV4cGlyYXRpb24nLFxuICAgICAgICAgICAgICAgIGZ1bmNOYW1lOiAndXBkYXRlVGltZXN0YW1wJyxcbiAgICAgICAgICAgICAgICBwYXJhbU5hbWU6ICd1cmwnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5fdGltZXN0YW1wTW9kZWwuc2V0VGltZXN0YW1wKHVybCwgRGF0ZS5ub3coKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbiBiZSB1c2VkIHRvIGNoZWNrIGlmIGEgVVJMIGhhcyBleHBpcmVkIG9yIG5vdCBiZWZvcmUgaXQncyB1c2VkLlxuICAgICAqXG4gICAgICogVGhpcyByZXF1aXJlcyBhIGxvb2sgdXAgZnJvbSBJbmRleGVkREIsIHNvIGNhbiBiZSBzbG93LlxuICAgICAqXG4gICAgICogTm90ZTogVGhpcyBtZXRob2Qgd2lsbCBub3QgcmVtb3ZlIHRoZSBjYWNoZWQgZW50cnksIGNhbGxcbiAgICAgKiBgZXhwaXJlRW50cmllcygpYCB0byByZW1vdmUgaW5kZXhlZERCIGFuZCBDYWNoZSBlbnRyaWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgYXN5bmMgaXNVUkxFeHBpcmVkKHVybCkge1xuICAgICAgICBpZiAoIXRoaXMuX21heEFnZVNlY29uZHMpIHtcbiAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFdvcmtib3hFcnJvcihgZXhwaXJlZC10ZXN0LXdpdGhvdXQtbWF4LWFnZWAsIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kTmFtZTogJ2lzVVJMRXhwaXJlZCcsXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtTmFtZTogJ21heEFnZVNlY29uZHMnLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wID0gYXdhaXQgdGhpcy5fdGltZXN0YW1wTW9kZWwuZ2V0VGltZXN0YW1wKHVybCk7XG4gICAgICAgICAgICBjb25zdCBleHBpcmVPbGRlclRoYW4gPSBEYXRlLm5vdygpIC0gdGhpcy5fbWF4QWdlU2Vjb25kcyAqIDEwMDA7XG4gICAgICAgICAgICByZXR1cm4gdGltZXN0YW1wICE9PSB1bmRlZmluZWQgPyB0aW1lc3RhbXAgPCBleHBpcmVPbGRlclRoYW4gOiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIEluZGV4ZWREQiBvYmplY3Qgc3RvcmUgdXNlZCB0byBrZWVwIHRyYWNrIG9mIGNhY2hlIGV4cGlyYXRpb25cbiAgICAgKiBtZXRhZGF0YS5cbiAgICAgKi9cbiAgICBhc3luYyBkZWxldGUoKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBkb24ndCBhdHRlbXB0IGFub3RoZXIgcmVydW4gaWYgd2UncmUgY2FsbGVkIGluIHRoZSBtaWRkbGUgb2ZcbiAgICAgICAgLy8gYSBjYWNoZSBleHBpcmF0aW9uLlxuICAgICAgICB0aGlzLl9yZXJ1blJlcXVlc3RlZCA9IGZhbHNlO1xuICAgICAgICBhd2FpdCB0aGlzLl90aW1lc3RhbXBNb2RlbC5leHBpcmVFbnRyaWVzKEluZmluaXR5KTsgLy8gRXhwaXJlcyBhbGwuXG4gICAgfVxufVxuZXhwb3J0IHsgQ2FjaGVFeHBpcmF0aW9uIH07XG4iLCIvKlxuICBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG5cbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICd3b3JrYm94LWNvcmUvX3ByaXZhdGUvYXNzZXJ0LmpzJztcbmltcG9ydCB7IGNhY2hlTmFtZXMgfSBmcm9tICd3b3JrYm94LWNvcmUvX3ByaXZhdGUvY2FjaGVOYW1lcy5qcyc7XG5pbXBvcnQgeyBkb250V2FpdEZvciB9IGZyb20gJ3dvcmtib3gtY29yZS9fcHJpdmF0ZS9kb250V2FpdEZvci5qcyc7XG5pbXBvcnQgeyBnZXRGcmllbmRseVVSTCB9IGZyb20gJ3dvcmtib3gtY29yZS9fcHJpdmF0ZS9nZXRGcmllbmRseVVSTC5qcyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICd3b3JrYm94LWNvcmUvX3ByaXZhdGUvbG9nZ2VyLmpzJztcbmltcG9ydCB7IHJlZ2lzdGVyUXVvdGFFcnJvckNhbGxiYWNrIH0gZnJvbSAnd29ya2JveC1jb3JlL3JlZ2lzdGVyUXVvdGFFcnJvckNhbGxiYWNrLmpzJztcbmltcG9ydCB7IFdvcmtib3hFcnJvciB9IGZyb20gJ3dvcmtib3gtY29yZS9fcHJpdmF0ZS9Xb3JrYm94RXJyb3IuanMnO1xuaW1wb3J0IHsgQ2FjaGVFeHBpcmF0aW9uIH0gZnJvbSAnLi9DYWNoZUV4cGlyYXRpb24uanMnO1xuaW1wb3J0ICcuL192ZXJzaW9uLmpzJztcbi8qKlxuICogVGhpcyBwbHVnaW4gY2FuIGJlIHVzZWQgaW4gYSBgd29ya2JveC1zdHJhdGVneWAgdG8gcmVndWxhcmx5IGVuZm9yY2UgYVxuICogbGltaXQgb24gdGhlIGFnZSBhbmQgLyBvciB0aGUgbnVtYmVyIG9mIGNhY2hlZCByZXF1ZXN0cy5cbiAqXG4gKiBJdCBjYW4gb25seSBiZSB1c2VkIHdpdGggYHdvcmtib3gtc3RyYXRlZ3lgIGluc3RhbmNlcyB0aGF0IGhhdmUgYVxuICogW2N1c3RvbSBgY2FjaGVOYW1lYCBwcm9wZXJ0eSBzZXRdKC93ZWIvdG9vbHMvd29ya2JveC9ndWlkZXMvY29uZmlndXJlLXdvcmtib3gjY3VzdG9tX2NhY2hlX25hbWVzX2luX3N0cmF0ZWdpZXMpLlxuICogSW4gb3RoZXIgd29yZHMsIGl0IGNhbid0IGJlIHVzZWQgdG8gZXhwaXJlIGVudHJpZXMgaW4gc3RyYXRlZ3kgdGhhdCB1c2VzIHRoZVxuICogZGVmYXVsdCBydW50aW1lIGNhY2hlIG5hbWUuXG4gKlxuICogV2hlbmV2ZXIgYSBjYWNoZWQgcmVzcG9uc2UgaXMgdXNlZCBvciB1cGRhdGVkLCB0aGlzIHBsdWdpbiB3aWxsIGxvb2tcbiAqIGF0IHRoZSBhc3NvY2lhdGVkIGNhY2hlIGFuZCByZW1vdmUgYW55IG9sZCBvciBleHRyYSByZXNwb25zZXMuXG4gKlxuICogV2hlbiB1c2luZyBgbWF4QWdlU2Vjb25kc2AsIHJlc3BvbnNlcyBtYXkgYmUgdXNlZCAqb25jZSogYWZ0ZXIgZXhwaXJpbmdcbiAqIGJlY2F1c2UgdGhlIGV4cGlyYXRpb24gY2xlYW4gdXAgd2lsbCBub3QgaGF2ZSBvY2N1cnJlZCB1bnRpbCAqYWZ0ZXIqIHRoZVxuICogY2FjaGVkIHJlc3BvbnNlIGhhcyBiZWVuIHVzZWQuIElmIHRoZSByZXNwb25zZSBoYXMgYSBcIkRhdGVcIiBoZWFkZXIsIHRoZW5cbiAqIGEgbGlnaHQgd2VpZ2h0IGV4cGlyYXRpb24gY2hlY2sgaXMgcGVyZm9ybWVkIGFuZCB0aGUgcmVzcG9uc2Ugd2lsbCBub3QgYmVcbiAqIHVzZWQgaW1tZWRpYXRlbHkuXG4gKlxuICogV2hlbiB1c2luZyBgbWF4RW50cmllc2AsIHRoZSBlbnRyeSBsZWFzdC1yZWNlbnRseSByZXF1ZXN0ZWQgd2lsbCBiZSByZW1vdmVkXG4gKiBmcm9tIHRoZSBjYWNoZSBmaXJzdC5cbiAqXG4gKiBAbWVtYmVyb2Ygd29ya2JveC1leHBpcmF0aW9uXG4gKi9cbmNsYXNzIEV4cGlyYXRpb25QbHVnaW4ge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RXhwaXJhdGlvblBsdWdpbk9wdGlvbnN9IGNvbmZpZ1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbY29uZmlnLm1heEVudHJpZXNdIFRoZSBtYXhpbXVtIG51bWJlciBvZiBlbnRyaWVzIHRvIGNhY2hlLlxuICAgICAqIEVudHJpZXMgdXNlZCB0aGUgbGVhc3Qgd2lsbCBiZSByZW1vdmVkIGFzIHRoZSBtYXhpbXVtIGlzIHJlYWNoZWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtjb25maWcubWF4QWdlU2Vjb25kc10gVGhlIG1heGltdW0gYWdlIG9mIGFuIGVudHJ5IGJlZm9yZVxuICAgICAqIGl0J3MgdHJlYXRlZCBhcyBzdGFsZSBhbmQgcmVtb3ZlZC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW2NvbmZpZy5tYXRjaE9wdGlvbnNdIFRoZSBbYENhY2hlUXVlcnlPcHRpb25zYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NhY2hlL2RlbGV0ZSNQYXJhbWV0ZXJzKVxuICAgICAqIHRoYXQgd2lsbCBiZSB1c2VkIHdoZW4gY2FsbGluZyBgZGVsZXRlKClgIG9uIHRoZSBjYWNoZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtjb25maWcucHVyZ2VPblF1b3RhRXJyb3JdIFdoZXRoZXIgdG8gb3B0IHRoaXMgY2FjaGUgaW4gdG9cbiAgICAgKiBhdXRvbWF0aWMgZGVsZXRpb24gaWYgdGhlIGF2YWlsYWJsZSBzdG9yYWdlIHF1b3RhIGhhcyBiZWVuIGV4Y2VlZGVkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIFwibGlmZWN5Y2xlXCIgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIHRyaWdnZXJlZCBhdXRvbWF0aWNhbGx5IGJ5IHRoZVxuICAgICAgICAgKiBgd29ya2JveC1zdHJhdGVnaWVzYCBoYW5kbGVycyB3aGVuIGEgYFJlc3BvbnNlYCBpcyBhYm91dCB0byBiZSByZXR1cm5lZFxuICAgICAgICAgKiBmcm9tIGEgW0NhY2hlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ2FjaGUpIHRvXG4gICAgICAgICAqIHRoZSBoYW5kbGVyLiBJdCBhbGxvd3MgdGhlIGBSZXNwb25zZWAgdG8gYmUgaW5zcGVjdGVkIGZvciBmcmVzaG5lc3MgYW5kXG4gICAgICAgICAqIHByZXZlbnRzIGl0IGZyb20gYmVpbmcgdXNlZCBpZiB0aGUgYFJlc3BvbnNlYCdzIGBEYXRlYCBoZWFkZXIgdmFsdWUgaXNcbiAgICAgICAgICogb2xkZXIgdGhhbiB0aGUgY29uZmlndXJlZCBgbWF4QWdlU2Vjb25kc2AuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmNhY2hlTmFtZSBOYW1lIG9mIHRoZSBjYWNoZSB0aGUgcmVzcG9uc2UgaXMgaW4uXG4gICAgICAgICAqIEBwYXJhbSB7UmVzcG9uc2V9IG9wdGlvbnMuY2FjaGVkUmVzcG9uc2UgVGhlIGBSZXNwb25zZWAgb2JqZWN0IHRoYXQncyBiZWVuXG4gICAgICAgICAqICAgICByZWFkIGZyb20gYSBjYWNoZSBhbmQgd2hvc2UgZnJlc2huZXNzIHNob3VsZCBiZSBjaGVja2VkLlxuICAgICAgICAgKiBAcmV0dXJuIHtSZXNwb25zZX0gRWl0aGVyIHRoZSBgY2FjaGVkUmVzcG9uc2VgLCBpZiBpdCdzXG4gICAgICAgICAqICAgICBmcmVzaCwgb3IgYG51bGxgIGlmIHRoZSBgUmVzcG9uc2VgIGlzIG9sZGVyIHRoYW4gYG1heEFnZVNlY29uZHNgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jYWNoZWRSZXNwb25zZVdpbGxCZVVzZWQgPSBhc3luYyAoeyBldmVudCwgcmVxdWVzdCwgY2FjaGVOYW1lLCBjYWNoZWRSZXNwb25zZSwgfSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFjYWNoZWRSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaXNGcmVzaCA9IHRoaXMuX2lzUmVzcG9uc2VEYXRlRnJlc2goY2FjaGVkUmVzcG9uc2UpO1xuICAgICAgICAgICAgLy8gRXhwaXJlIGVudHJpZXMgdG8gZW5zdXJlIHRoYXQgZXZlbiBpZiB0aGUgZXhwaXJhdGlvbiBkYXRlIGhhc1xuICAgICAgICAgICAgLy8gZXhwaXJlZCwgaXQnbGwgb25seSBiZSB1c2VkIG9uY2UuXG4gICAgICAgICAgICBjb25zdCBjYWNoZUV4cGlyYXRpb24gPSB0aGlzLl9nZXRDYWNoZUV4cGlyYXRpb24oY2FjaGVOYW1lKTtcbiAgICAgICAgICAgIGRvbnRXYWl0Rm9yKGNhY2hlRXhwaXJhdGlvbi5leHBpcmVFbnRyaWVzKCkpO1xuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBtZXRhZGF0YSBmb3IgdGhlIHJlcXVlc3QgVVJMIHRvIHRoZSBjdXJyZW50IHRpbWVzdGFtcCxcbiAgICAgICAgICAgIC8vIGJ1dCBkb24ndCBgYXdhaXRgIGl0IGFzIHdlIGRvbid0IHdhbnQgdG8gYmxvY2sgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgY29uc3QgdXBkYXRlVGltZXN0YW1wRG9uZSA9IGNhY2hlRXhwaXJhdGlvbi51cGRhdGVUaW1lc3RhbXAocmVxdWVzdC51cmwpO1xuICAgICAgICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQud2FpdFVudGlsKHVwZGF0ZVRpbWVzdGFtcERvbmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBldmVudCBtYXkgbm90IGJlIGEgZmV0Y2ggZXZlbnQ7IG9ubHkgbG9nIHRoZSBVUkwgaWYgaXQgaXMuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ3JlcXVlc3QnIGluIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oYFVuYWJsZSB0byBlbnN1cmUgc2VydmljZSB3b3JrZXIgc3RheXMgYWxpdmUgd2hlbiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYHVwZGF0aW5nIGNhY2hlIGVudHJ5IGZvciBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCcke2dldEZyaWVuZGx5VVJMKGV2ZW50LnJlcXVlc3QudXJsKX0nLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlzRnJlc2ggPyBjYWNoZWRSZXNwb25zZSA6IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIFwibGlmZWN5Y2xlXCIgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIHRyaWdnZXJlZCBhdXRvbWF0aWNhbGx5IGJ5IHRoZVxuICAgICAgICAgKiBgd29ya2JveC1zdHJhdGVnaWVzYCBoYW5kbGVycyB3aGVuIGFuIGVudHJ5IGlzIGFkZGVkIHRvIGEgY2FjaGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmNhY2hlTmFtZSBOYW1lIG9mIHRoZSBjYWNoZSB0aGF0IHdhcyB1cGRhdGVkLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5yZXF1ZXN0IFRoZSBSZXF1ZXN0IGZvciB0aGUgY2FjaGVkIGVudHJ5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jYWNoZURpZFVwZGF0ZSA9IGFzeW5jICh7IGNhY2hlTmFtZSwgcmVxdWVzdCwgfSkgPT4ge1xuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQuaXNUeXBlKGNhY2hlTmFtZSwgJ3N0cmluZycsIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlTmFtZTogJ3dvcmtib3gtZXhwaXJhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ1BsdWdpbicsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmNOYW1lOiAnY2FjaGVEaWRVcGRhdGUnLFxuICAgICAgICAgICAgICAgICAgICBwYXJhbU5hbWU6ICdjYWNoZU5hbWUnLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFzc2VydC5pc0luc3RhbmNlKHJlcXVlc3QsIFJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlTmFtZTogJ3dvcmtib3gtZXhwaXJhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ1BsdWdpbicsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmNOYW1lOiAnY2FjaGVEaWRVcGRhdGUnLFxuICAgICAgICAgICAgICAgICAgICBwYXJhbU5hbWU6ICdyZXF1ZXN0JyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNhY2hlRXhwaXJhdGlvbiA9IHRoaXMuX2dldENhY2hlRXhwaXJhdGlvbihjYWNoZU5hbWUpO1xuICAgICAgICAgICAgYXdhaXQgY2FjaGVFeHBpcmF0aW9uLnVwZGF0ZVRpbWVzdGFtcChyZXF1ZXN0LnVybCk7XG4gICAgICAgICAgICBhd2FpdCBjYWNoZUV4cGlyYXRpb24uZXhwaXJlRW50cmllcygpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgaWYgKCEoY29uZmlnLm1heEVudHJpZXMgfHwgY29uZmlnLm1heEFnZVNlY29uZHMpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFdvcmtib3hFcnJvcignbWF4LWVudHJpZXMtb3ItYWdlLXJlcXVpcmVkJywge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGVOYW1lOiAnd29ya2JveC1leHBpcmF0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnUGx1Z2luJyxcbiAgICAgICAgICAgICAgICAgICAgZnVuY05hbWU6ICdjb25zdHJ1Y3RvcicsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29uZmlnLm1heEVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQuaXNUeXBlKGNvbmZpZy5tYXhFbnRyaWVzLCAnbnVtYmVyJywge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGVOYW1lOiAnd29ya2JveC1leHBpcmF0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnUGx1Z2luJyxcbiAgICAgICAgICAgICAgICAgICAgZnVuY05hbWU6ICdjb25zdHJ1Y3RvcicsXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtTmFtZTogJ2NvbmZpZy5tYXhFbnRyaWVzJyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb25maWcubWF4QWdlU2Vjb25kcykge1xuICAgICAgICAgICAgICAgIGFzc2VydC5pc1R5cGUoY29uZmlnLm1heEFnZVNlY29uZHMsICdudW1iZXInLCB7XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZU5hbWU6ICd3b3JrYm94LWV4cGlyYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdQbHVnaW4nLFxuICAgICAgICAgICAgICAgICAgICBmdW5jTmFtZTogJ2NvbnN0cnVjdG9yJyxcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1OYW1lOiAnY29uZmlnLm1heEFnZVNlY29uZHMnLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5fbWF4QWdlU2Vjb25kcyA9IGNvbmZpZy5tYXhBZ2VTZWNvbmRzO1xuICAgICAgICB0aGlzLl9jYWNoZUV4cGlyYXRpb25zID0gbmV3IE1hcCgpO1xuICAgICAgICBpZiAoY29uZmlnLnB1cmdlT25RdW90YUVycm9yKSB7XG4gICAgICAgICAgICByZWdpc3RlclF1b3RhRXJyb3JDYWxsYmFjaygoKSA9PiB0aGlzLmRlbGV0ZUNhY2hlQW5kTWV0YWRhdGEoKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBzaW1wbGUgaGVscGVyIG1ldGhvZCB0byByZXR1cm4gYSBDYWNoZUV4cGlyYXRpb24gaW5zdGFuY2UgZm9yIGEgZ2l2ZW5cbiAgICAgKiBjYWNoZSBuYW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNhY2hlTmFtZVxuICAgICAqIEByZXR1cm4ge0NhY2hlRXhwaXJhdGlvbn1cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2dldENhY2hlRXhwaXJhdGlvbihjYWNoZU5hbWUpIHtcbiAgICAgICAgaWYgKGNhY2hlTmFtZSA9PT0gY2FjaGVOYW1lcy5nZXRSdW50aW1lTmFtZSgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgV29ya2JveEVycm9yKCdleHBpcmUtY3VzdG9tLWNhY2hlcy1vbmx5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNhY2hlRXhwaXJhdGlvbiA9IHRoaXMuX2NhY2hlRXhwaXJhdGlvbnMuZ2V0KGNhY2hlTmFtZSk7XG4gICAgICAgIGlmICghY2FjaGVFeHBpcmF0aW9uKSB7XG4gICAgICAgICAgICBjYWNoZUV4cGlyYXRpb24gPSBuZXcgQ2FjaGVFeHBpcmF0aW9uKGNhY2hlTmFtZSwgdGhpcy5fY29uZmlnKTtcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlRXhwaXJhdGlvbnMuc2V0KGNhY2hlTmFtZSwgY2FjaGVFeHBpcmF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FjaGVFeHBpcmF0aW9uO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1Jlc3BvbnNlfSBjYWNoZWRSZXNwb25zZVxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9pc1Jlc3BvbnNlRGF0ZUZyZXNoKGNhY2hlZFJlc3BvbnNlKSB7XG4gICAgICAgIGlmICghdGhpcy5fbWF4QWdlU2Vjb25kcykge1xuICAgICAgICAgICAgLy8gV2UgYXJlbid0IGV4cGlyaW5nIGJ5IGFnZSwgc28gcmV0dXJuIHRydWUsIGl0J3MgZnJlc2hcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSAnZGF0ZScgaGVhZGVyIHdpbGwgc3VmZmljZSBhIHF1aWNrIGV4cGlyYXRpb24gY2hlY2suXG4gICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vR29vZ2xlQ2hyb21lTGFicy9zdy10b29sYm94L2lzc3Vlcy8xNjQgZm9yXG4gICAgICAgIC8vIGRpc2N1c3Npb24uXG4gICAgICAgIGNvbnN0IGRhdGVIZWFkZXJUaW1lc3RhbXAgPSB0aGlzLl9nZXREYXRlSGVhZGVyVGltZXN0YW1wKGNhY2hlZFJlc3BvbnNlKTtcbiAgICAgICAgaWYgKGRhdGVIZWFkZXJUaW1lc3RhbXAgPT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIFVuYWJsZSB0byBwYXJzZSBkYXRlLCBzbyBhc3N1bWUgaXQncyBmcmVzaC5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHdlIGhhdmUgYSB2YWxpZCBoZWFkZXJUaW1lLCB0aGVuIG91ciByZXNwb25zZSBpcyBmcmVzaCBpZmYgdGhlXG4gICAgICAgIC8vIGhlYWRlclRpbWUgcGx1cyBtYXhBZ2VTZWNvbmRzIGlzIGdyZWF0ZXIgdGhhbiB0aGUgY3VycmVudCB0aW1lLlxuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gZGF0ZUhlYWRlclRpbWVzdGFtcCA+PSBub3cgLSB0aGlzLl9tYXhBZ2VTZWNvbmRzICogMTAwMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCBleHRyYWN0IHRoZSBkYXRhIGhlYWRlciBhbmQgcGFyc2UgaXQgaW50byBhIHVzZWZ1bFxuICAgICAqIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZXNwb25zZX0gY2FjaGVkUmVzcG9uc2VcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8bnVsbH1cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2dldERhdGVIZWFkZXJUaW1lc3RhbXAoY2FjaGVkUmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKCFjYWNoZWRSZXNwb25zZS5oZWFkZXJzLmhhcygnZGF0ZScpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRlSGVhZGVyID0gY2FjaGVkUmVzcG9uc2UuaGVhZGVycy5nZXQoJ2RhdGUnKTtcbiAgICAgICAgY29uc3QgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGVIZWFkZXIpO1xuICAgICAgICBjb25zdCBoZWFkZXJUaW1lID0gcGFyc2VkRGF0ZS5nZXRUaW1lKCk7XG4gICAgICAgIC8vIElmIHRoZSBEYXRlIGhlYWRlciB3YXMgaW52YWxpZCBmb3Igc29tZSByZWFzb24sIHBhcnNlZERhdGUuZ2V0VGltZSgpXG4gICAgICAgIC8vIHdpbGwgcmV0dXJuIE5hTi5cbiAgICAgICAgaWYgKGlzTmFOKGhlYWRlclRpbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGVhZGVyVGltZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBpcyBhIGhlbHBlciBtZXRob2QgdGhhdCBwZXJmb3JtcyB0d28gb3BlcmF0aW9uczpcbiAgICAgKlxuICAgICAqIC0gRGVsZXRlcyAqYWxsKiB0aGUgdW5kZXJseWluZyBDYWNoZSBpbnN0YW5jZXMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcGx1Z2luXG4gICAgICogaW5zdGFuY2UsIGJ5IGNhbGxpbmcgY2FjaGVzLmRlbGV0ZSgpIG9uIHlvdXIgYmVoYWxmLlxuICAgICAqIC0gRGVsZXRlcyB0aGUgbWV0YWRhdGEgZnJvbSBJbmRleGVkREIgdXNlZCB0byBrZWVwIHRyYWNrIG9mIGV4cGlyYXRpb25cbiAgICAgKiBkZXRhaWxzIGZvciBlYWNoIENhY2hlIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogV2hlbiB1c2luZyBjYWNoZSBleHBpcmF0aW9uLCBjYWxsaW5nIHRoaXMgbWV0aG9kIGlzIHByZWZlcmFibGUgdG8gY2FsbGluZ1xuICAgICAqIGBjYWNoZXMuZGVsZXRlKClgIGRpcmVjdGx5LCBzaW5jZSB0aGlzIHdpbGwgZW5zdXJlIHRoYXQgdGhlIEluZGV4ZWREQlxuICAgICAqIG1ldGFkYXRhIGlzIGFsc28gY2xlYW5seSByZW1vdmVkIGFuZCBvcGVuIEluZGV4ZWREQiBpbnN0YW5jZXMgYXJlIGRlbGV0ZWQuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgaWYgeW91J3JlICpub3QqIHVzaW5nIGNhY2hlIGV4cGlyYXRpb24gZm9yIGEgZ2l2ZW4gY2FjaGUsIGNhbGxpbmdcbiAgICAgKiBgY2FjaGVzLmRlbGV0ZSgpYCBhbmQgcGFzc2luZyBpbiB0aGUgY2FjaGUncyBuYW1lIHNob3VsZCBiZSBzdWZmaWNpZW50LlxuICAgICAqIFRoZXJlIGlzIG5vIFdvcmtib3gtc3BlY2lmaWMgbWV0aG9kIG5lZWRlZCBmb3IgY2xlYW51cCBpbiB0aGF0IGNhc2UuXG4gICAgICovXG4gICAgYXN5bmMgZGVsZXRlQ2FjaGVBbmRNZXRhZGF0YSgpIHtcbiAgICAgICAgLy8gRG8gdGhpcyBvbmUgYXQgYSB0aW1lIGluc3RlYWQgb2YgYWxsIGF0IG9uY2UgdmlhIGBQcm9taXNlLmFsbCgpYCB0b1xuICAgICAgICAvLyByZWR1Y2UgdGhlIGNoYW5jZSBvZiBpbmNvbnNpc3RlbmN5IGlmIGEgcHJvbWlzZSByZWplY3RzLlxuICAgICAgICBmb3IgKGNvbnN0IFtjYWNoZU5hbWUsIGNhY2hlRXhwaXJhdGlvbl0gb2YgdGhpcy5fY2FjaGVFeHBpcmF0aW9ucykge1xuICAgICAgICAgICAgYXdhaXQgc2VsZi5jYWNoZXMuZGVsZXRlKGNhY2hlTmFtZSk7XG4gICAgICAgICAgICBhd2FpdCBjYWNoZUV4cGlyYXRpb24uZGVsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVzZXQgdGhpcy5fY2FjaGVFeHBpcmF0aW9ucyB0byBpdHMgaW5pdGlhbCBzdGF0ZS5cbiAgICAgICAgdGhpcy5fY2FjaGVFeHBpcmF0aW9ucyA9IG5ldyBNYXAoKTtcbiAgICB9XG59XG5leHBvcnQgeyBFeHBpcmF0aW9uUGx1Z2luIH07XG4iLCIvKlxuICBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG5cbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL19wcml2YXRlL2xvZ2dlci5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuL19wcml2YXRlL2Fzc2VydC5qcyc7XG5pbXBvcnQgeyBxdW90YUVycm9yQ2FsbGJhY2tzIH0gZnJvbSAnLi9tb2RlbHMvcXVvdGFFcnJvckNhbGxiYWNrcy5qcyc7XG5pbXBvcnQgJy4vX3ZlcnNpb24uanMnO1xuLyoqXG4gKiBBZGRzIGEgZnVuY3Rpb24gdG8gdGhlIHNldCBvZiBxdW90YUVycm9yQ2FsbGJhY2tzIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBpZlxuICogdGhlcmUncyBhIHF1b3RhIGVycm9yLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAbWVtYmVyb2Ygd29ya2JveC1jb3JlXG4gKi9cbi8vIENhbid0IGNoYW5nZSBGdW5jdGlvbiB0eXBlXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xuZnVuY3Rpb24gcmVnaXN0ZXJRdW90YUVycm9yQ2FsbGJhY2soY2FsbGJhY2spIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBhc3NlcnQuaXNUeXBlKGNhbGxiYWNrLCAnZnVuY3Rpb24nLCB7XG4gICAgICAgICAgICBtb2R1bGVOYW1lOiAnd29ya2JveC1jb3JlJyxcbiAgICAgICAgICAgIGZ1bmNOYW1lOiAncmVnaXN0ZXInLFxuICAgICAgICAgICAgcGFyYW1OYW1lOiAnY2FsbGJhY2snLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcXVvdGFFcnJvckNhbGxiYWNrcy5hZGQoY2FsbGJhY2spO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGxvZ2dlci5sb2coJ1JlZ2lzdGVyZWQgYSBjYWxsYmFjayB0byByZXNwb25kIHRvIHF1b3RhIGVycm9ycy4nLCBjYWxsYmFjayk7XG4gICAgfVxufVxuZXhwb3J0IHsgcmVnaXN0ZXJRdW90YUVycm9yQ2FsbGJhY2sgfTtcbiIsIi8vIFNlcnZpY2UgV29ya2VyIGhlbHBlciBjbGFzcyBmb3Igd29ya2luZyB3aXRoIFdvcmtCb3ggZnVuY3Rpb25hbGl0aWVzXHJcbmltcG9ydCB7IGNsaWVudHNDbGFpbSB9IGZyb20gJ3dvcmtib3gtY29yZSc7XHJcbmltcG9ydCB7IFdvcmtib3gsIH0gZnJvbSAnd29ya2JveC13aW5kb3cnO1xyXG5pbXBvcnQgeyByZWdpc3RlclJvdXRlLCBzZXRDYXRjaEhhbmRsZXIsIH0gZnJvbSAnd29ya2JveC1yb3V0aW5nJztcclxuaW1wb3J0IHsgQ2FjaGVGaXJzdCB9IGZyb20gJ3dvcmtib3gtc3RyYXRlZ2llcyc7XHJcbmltcG9ydCB7IEV4cGlyYXRpb25QbHVnaW4sIH0gZnJvbSAnd29ya2JveC1leHBpcmF0aW9uJztcclxuaW1wb3J0IHsgcHJlY2FjaGVBbmRSb3V0ZSB9IGZyb20gJ3dvcmtib3gtcHJlY2FjaGluZyc7XHJcbi8vLyA8cmVmZXJlbmNlIGxpYj1cIndlYndvcmtlclwiIC8+XHJcblxyXG4vLyBAdHMtaWdub3JlIFdCX01BTklGRVNUIGlzIGluamVjdGVkIGJ5IHdvcmtib3gtd2VicGFjay1wbHVnaW5cclxuLy8gcHJlY2FjaGVBbmRSb3V0ZShzZWxmLl9fV0JfTUFOSUZFU1QpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgbnVsbDtcclxuLy8gQHRzLWlnbm9yZSBTZXJ2aWNlV29ya2VyR2xvYmFsU2NvcGUgaXMgZGVmaW5lZCBieSBsaWI9XCJ3ZWJ3b3JrZXJcIlxyXG4vLyBkZWNsYXJlIGxldCBzZWxmOiBTZXJ2aWNlV29ya2VyR2xvYmFsU2NvcGU7XHJcblxyXG5jb25zdCB7IGNsaWVudHMsIGFkZEV2ZW50TGlzdGVuZXIsIHNraXBXYWl0aW5nLCByZWdpc3RyYXRpb24gfSA9IHNlbGYgYXMgU2VydmljZVdvcmtlckdsb2JhbFNjb3BlO1xyXG5cclxuZGVjbGFyZSBnbG9iYWwge1xyXG4gIGludGVyZmFjZSBFeHRlbmRhYmxlRXZlbnQgZXh0ZW5kcyBFdmVudCB7XHJcbiAgICB3YWl0VW50aWwoZm46IFByb21pc2U8YW55Pik6IHZvaWQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ1JTZXJ2aWNlV29ya2VyIHtcclxuXHJcbiAgICBjYWNoZU5hbWVUYWc6IHN0cmluZztcclxuICAgIHZlcnNpb246IHN0cmluZztcclxuXHJcbiAgICBpbWFnZXNDYWNoZU5hbWU6IHN0cmluZztcclxuICAgIGZvbnRzQ2FjaGVOYW1lOiBzdHJpbmc7XHJcbiAgICBzdHlsZXNTY3JpcHRzQ2FjaGVOYW1lOiBzdHJpbmc7XHJcbiAgICBkb2N1bWVudENhY2hlTmFtZTogc3RyaW5nO1xyXG5cclxuICAgIC8vIEV4cGlyYXRpb24gUGx1Z2luc1xyXG4gICAgc3R5bGVzU2NyaXB0c0V4cGlyYXRpb25QbHVnaW46IEV4cGlyYXRpb25QbHVnaW47XHJcbiAgICBpbWFnZXNFeHBpcmF0aW9uUGx1Z2luOiBFeHBpcmF0aW9uUGx1Z2luO1xyXG4gICAgZm9udHNFeHBpcmF0aW9uUGx1Z2luOiBFeHBpcmF0aW9uUGx1Z2luO1xyXG4gICAgZG9jdW1lbnRFeHBpcmF0aW9uUGx1Z2luOiBFeHBpcmF0aW9uUGx1Z2luO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuY2FjaGVOYW1lVGFnID0gXCJDUkNhY2hlXCI7XHJcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gXCJ2MC4wLjFcIjtcclxuICAgICAgICB0aGlzLmltYWdlc0NhY2hlTmFtZSA9IGAke3RoaXMuY2FjaGVOYW1lVGFnfS0ke3RoaXMudmVyc2lvbn0taW1hZ2VzYDtcclxuICAgICAgICB0aGlzLmZvbnRzQ2FjaGVOYW1lID0gYCR7dGhpcy5jYWNoZU5hbWVUYWd9LSR7dGhpcy52ZXJzaW9ufS1mb250c2A7XHJcbiAgICAgICAgdGhpcy5zdHlsZXNTY3JpcHRzQ2FjaGVOYW1lID0gYCR7dGhpcy5jYWNoZU5hbWVUYWd9LSR7dGhpcy52ZXJzaW9ufS1zdHlsZXNTY3JpcHRzYDtcclxuICAgICAgICB0aGlzLmRvY3VtZW50Q2FjaGVOYW1lID0gYCR7dGhpcy5jYWNoZU5hbWVUYWd9LSR7dGhpcy52ZXJzaW9ufS1kb2N1bWVudGA7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgRXhwaXJhdGlvbiBQbHVnaW5zXHJcbiAgICAgICAgdGhpcy5zdHlsZXNTY3JpcHRzRXhwaXJhdGlvblBsdWdpbiA9IG5ldyBFeHBpcmF0aW9uUGx1Z2luKHtcclxuICAgICAgICAgICAgbWF4RW50cmllczogMjAsXHJcbiAgICAgICAgICAgIG1heEFnZVNlY29uZHM6IDE1ICogMjQgKiA2MCAqIDYwLCAvLyAxNSBEYXlzXHJcbiAgICAgICAgICAgIHB1cmdlT25RdW90YUVycm9yOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5mb250c0V4cGlyYXRpb25QbHVnaW4gPSBuZXcgRXhwaXJhdGlvblBsdWdpbih7XHJcbiAgICAgICAgICAgIG1heEVudHJpZXM6IDUsXHJcbiAgICAgICAgICAgIG1heEFnZVNlY29uZHM6IDE4MCAqIDI0ICogNjAgKiA2MCwgLy8gMTgwIERheXNcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmltYWdlc0V4cGlyYXRpb25QbHVnaW4gPSBuZXcgRXhwaXJhdGlvblBsdWdpbih7XHJcbiAgICAgICAgICAgIG1heEVudHJpZXM6IDE1MCxcclxuICAgICAgICAgICAgbWF4QWdlU2Vjb25kczogNjAgKiAyNCAqIDYwICogNjAsIC8vIDYwIERheXNcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmRvY3VtZW50RXhwaXJhdGlvblBsdWdpbiA9IG5ldyBFeHBpcmF0aW9uUGx1Z2luKHtcclxuICAgICAgICAgICAgbWF4RW50cmllczogNTAsXHJcbiAgICAgICAgICAgIG1heEFnZVNlY29uZHM6IDYwICogMjQgKiA2MCAqIDYwLCAvLyA2MCBEYXlzXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgSW5pdGlhbGl6ZUFuZFJlZ2lzdGVyKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJy9zdy5qcycpLnRoZW4oKHJlZ2lzdHJhdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlV29ya2VyIHJlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsIHdpdGggc2NvcGU6ICcsIHJlZ2lzdHJhdGlvbi5zY29wZSk7XHJcbiAgICAgICAgICAgICAgICB9LCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2VXb3JrZXIgcmVnaXN0cmF0aW9uIGZhaWxlZDogJywgZXJyKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJlZ2lzdGVyIENhY2hlRmlyc3QgUm91dGVzXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyQ2FjaGVGaXJzdFJvdXRlVXNpbmcoXCJpbWFnZVwiLCB0aGlzLmltYWdlc0NhY2hlTmFtZSwgdGhpcy5pbWFnZXNFeHBpcmF0aW9uUGx1Z2luKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJDYWNoZUZpcnN0Um91dGVVc2luZyhcImZvbnRcIiwgdGhpcy5mb250c0NhY2hlTmFtZSwgdGhpcy5mb250c0V4cGlyYXRpb25QbHVnaW4pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlckNhY2hlRmlyc3RSb3V0ZVVzaW5nKFwic2NyaXB0XCIsIHRoaXMuc3R5bGVzU2NyaXB0c0NhY2hlTmFtZSwgdGhpcy5zdHlsZXNTY3JpcHRzRXhwaXJhdGlvblBsdWdpbik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyQ2FjaGVGaXJzdFJvdXRlVXNpbmcoXCJzdHlsZVwiLCB0aGlzLnN0eWxlc1NjcmlwdHNDYWNoZU5hbWUsIHRoaXMuc3R5bGVzU2NyaXB0c0V4cGlyYXRpb25QbHVnaW4pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlckNhY2hlRmlyc3RSb3V0ZVVzaW5nKFwiZG9jdW1lbnRcIiwgdGhpcy5kb2N1bWVudENhY2hlTmFtZSwgdGhpcy5kb2N1bWVudEV4cGlyYXRpb25QbHVnaW4pO1xyXG5cclxuICAgICAgICAgICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2luc3RhbGwnLCBhc3luYyAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmljZVdvcmtlciBpbnN0YWxsZWQhJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2tpcFdhaXRpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgICAgICBldmVudC53YWl0VW50aWwoUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZXMuZGVsZXRlKHRoaXMuaW1hZ2VzQ2FjaGVOYW1lKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVzLmRlbGV0ZSh0aGlzLmZvbnRzQ2FjaGVOYW1lKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVzLmRlbGV0ZSh0aGlzLnN0eWxlc1NjcmlwdHNDYWNoZU5hbWUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZXMuZGVsZXRlKHRoaXMuZG9jdW1lbnRDYWNoZU5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgXSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBza2lwV2FpdGluZygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignYWN0aXZhdGUnLCBhc3luYyAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmljZVdvcmtlciBhY3RpdmF0ZWQhJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LndhaXRVbnRpbChzZWxmLmNsaWVudHMuY2xhaW0oKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5hZGRFdmVudExpc3RlbmVyKCdmZXRjaCcsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlV29ya2VyIGZldGNoOiAnLCBldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucmVzcG9uZFdpdGgoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVzLm1hdGNoKGV2ZW50LnJlcXVlc3QpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaChldmVudC5yZXF1ZXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU2VuZCBtZXNzYWdlIHRvIGNsaWVudHMgdGhhdCBsb2FkaW5nIGlzIGRvbmVcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIHNlbGYuY2xpZW50cy5tYXRjaEFsbCgpLnRoZW4oKGNsaWVudHMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjbGllbnRzLmZvckVhY2goKGNsaWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnQucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiBcIkxvYWRpbmdcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVNlcnZpY2VXb3JrZXJNZXNzYWdlKGV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKGV2ZW50LmRhdGEubXNnID09IFwiTG9hZGluZ1wiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlTG9hZGluZ01lc3NhZ2UoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUxvYWRpbmdNZXNzYWdlKGRhdGEpOiB2b2lkIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcmVnaXN0ZXJDYWNoZUZpcnN0Um91dGVVc2luZyhkZXN0aW5hdGlvbjogUmVxdWVzdERlc3RpbmF0aW9uLCBjYWNoZU5hbWU6IHN0cmluZywgZXhwaXJhdGlvblBsdWdpbjogRXhwaXJhdGlvblBsdWdpbik6IHZvaWQge1xyXG4gICAgICAgIHJlZ2lzdGVyUm91dGUoXHJcbiAgICAgICAgICAgICh7IHJlcXVlc3QgfSkgPT4gcmVxdWVzdC5kZXN0aW5hdGlvbiA9PT0gZGVzdGluYXRpb24sXHJcbiAgICAgICAgICAgIG5ldyBDYWNoZUZpcnN0KHtcclxuICAgICAgICAgICAgICAgIGNhY2hlTmFtZTogY2FjaGVOYW1lLFxyXG4gICAgICAgICAgICAgICAgcGx1Z2luczogW1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyYXRpb25QbHVnaW5cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG4iLCIvKlxuICBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG5cbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICd3b3JrYm94LWNvcmUvX3ByaXZhdGUvbG9nZ2VyLmpzJztcbmltcG9ydCB7IFdvcmtib3hFcnJvciB9IGZyb20gJ3dvcmtib3gtY29yZS9fcHJpdmF0ZS9Xb3JrYm94RXJyb3IuanMnO1xuaW1wb3J0IHsgUm91dGUgfSBmcm9tICcuL1JvdXRlLmpzJztcbmltcG9ydCB7IFJlZ0V4cFJvdXRlIH0gZnJvbSAnLi9SZWdFeHBSb3V0ZS5qcyc7XG5pbXBvcnQgeyBnZXRPckNyZWF0ZURlZmF1bHRSb3V0ZXIgfSBmcm9tICcuL3V0aWxzL2dldE9yQ3JlYXRlRGVmYXVsdFJvdXRlci5qcyc7XG5pbXBvcnQgJy4vX3ZlcnNpb24uanMnO1xuLyoqXG4gKiBFYXNpbHkgcmVnaXN0ZXIgYSBSZWdFeHAsIHN0cmluZywgb3IgZnVuY3Rpb24gd2l0aCBhIGNhY2hpbmdcbiAqIHN0cmF0ZWd5IHRvIGEgc2luZ2xldG9uIFJvdXRlciBpbnN0YW5jZS5cbiAqXG4gKiBUaGlzIG1ldGhvZCB3aWxsIGdlbmVyYXRlIGEgUm91dGUgZm9yIHlvdSBpZiBuZWVkZWQgYW5kXG4gKiBjYWxsIHtAbGluayB3b3JrYm94LXJvdXRpbmcuUm91dGVyI3JlZ2lzdGVyUm91dGV9LlxuICpcbiAqIEBwYXJhbSB7UmVnRXhwfHN0cmluZ3x3b3JrYm94LXJvdXRpbmcuUm91dGV+bWF0Y2hDYWxsYmFja3x3b3JrYm94LXJvdXRpbmcuUm91dGV9IGNhcHR1cmVcbiAqIElmIHRoZSBjYXB0dXJlIHBhcmFtIGlzIGEgYFJvdXRlYCwgYWxsIG90aGVyIGFyZ3VtZW50cyB3aWxsIGJlIGlnbm9yZWQuXG4gKiBAcGFyYW0ge3dvcmtib3gtcm91dGluZ35oYW5kbGVyQ2FsbGJhY2t9IFtoYW5kbGVyXSBBIGNhbGxiYWNrXG4gKiBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBQcm9taXNlIHJlc3VsdGluZyBpbiBhIFJlc3BvbnNlLiBUaGlzIHBhcmFtZXRlclxuICogaXMgcmVxdWlyZWQgaWYgYGNhcHR1cmVgIGlzIG5vdCBhIGBSb3V0ZWAgb2JqZWN0LlxuICogQHBhcmFtIHtzdHJpbmd9IFttZXRob2Q9J0dFVCddIFRoZSBIVFRQIG1ldGhvZCB0byBtYXRjaCB0aGUgUm91dGVcbiAqIGFnYWluc3QuXG4gKiBAcmV0dXJuIHt3b3JrYm94LXJvdXRpbmcuUm91dGV9IFRoZSBnZW5lcmF0ZWQgYFJvdXRlYC5cbiAqXG4gKiBAbWVtYmVyb2Ygd29ya2JveC1yb3V0aW5nXG4gKi9cbmZ1bmN0aW9uIHJlZ2lzdGVyUm91dGUoY2FwdHVyZSwgaGFuZGxlciwgbWV0aG9kKSB7XG4gICAgbGV0IHJvdXRlO1xuICAgIGlmICh0eXBlb2YgY2FwdHVyZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc3QgY2FwdHVyZVVybCA9IG5ldyBVUkwoY2FwdHVyZSwgbG9jYXRpb24uaHJlZik7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICBpZiAoIShjYXB0dXJlLnN0YXJ0c1dpdGgoJy8nKSB8fCBjYXB0dXJlLnN0YXJ0c1dpdGgoJ2h0dHAnKSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgV29ya2JveEVycm9yKCdpbnZhbGlkLXN0cmluZycsIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlTmFtZTogJ3dvcmtib3gtcm91dGluZycsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmNOYW1lOiAncmVnaXN0ZXJSb3V0ZScsXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtTmFtZTogJ2NhcHR1cmUnLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gV2Ugd2FudCB0byBjaGVjayBpZiBFeHByZXNzLXN0eWxlIHdpbGRjYXJkcyBhcmUgaW4gdGhlIHBhdGhuYW1lIG9ubHkuXG4gICAgICAgICAgICAvLyBUT0RPOiBSZW1vdmUgdGhpcyBsb2cgbWVzc2FnZSBpbiB2NC5cbiAgICAgICAgICAgIGNvbnN0IHZhbHVlVG9DaGVjayA9IGNhcHR1cmUuc3RhcnRzV2l0aCgnaHR0cCcpXG4gICAgICAgICAgICAgICAgPyBjYXB0dXJlVXJsLnBhdGhuYW1lXG4gICAgICAgICAgICAgICAgOiBjYXB0dXJlO1xuICAgICAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waWxsYXJqcy9wYXRoLXRvLXJlZ2V4cCNwYXJhbWV0ZXJzXG4gICAgICAgICAgICBjb25zdCB3aWxkY2FyZHMgPSAnWyo6PytdJztcbiAgICAgICAgICAgIGlmIChuZXcgUmVnRXhwKGAke3dpbGRjYXJkc31gKS5leGVjKHZhbHVlVG9DaGVjaykpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYFRoZSAnJGNhcHR1cmUnIHBhcmFtZXRlciBjb250YWlucyBhbiBFeHByZXNzLXN0eWxlIHdpbGRjYXJkIGAgK1xuICAgICAgICAgICAgICAgICAgICBgY2hhcmFjdGVyICgke3dpbGRjYXJkc30pLiBTdHJpbmdzIGFyZSBub3cgYWx3YXlzIGludGVycHJldGVkIGFzIGAgK1xuICAgICAgICAgICAgICAgICAgICBgZXhhY3QgbWF0Y2hlczsgdXNlIGEgUmVnRXhwIGZvciBwYXJ0aWFsIG9yIHdpbGRjYXJkIG1hdGNoZXMuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWF0Y2hDYWxsYmFjayA9ICh7IHVybCB9KSA9PiB7XG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAgIGlmICh1cmwucGF0aG5hbWUgPT09IGNhcHR1cmVVcmwucGF0aG5hbWUgJiZcbiAgICAgICAgICAgICAgICAgICAgdXJsLm9yaWdpbiAhPT0gY2FwdHVyZVVybC5vcmlnaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGAke2NhcHR1cmV9IG9ubHkgcGFydGlhbGx5IG1hdGNoZXMgdGhlIGNyb3NzLW9yaWdpbiBVUkwgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgJHt1cmwudG9TdHJpbmcoKX0uIFRoaXMgcm91dGUgd2lsbCBvbmx5IGhhbmRsZSBjcm9zcy1vcmlnaW4gcmVxdWVzdHMgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgaWYgdGhleSBtYXRjaCB0aGUgZW50aXJlIFVSTC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdXJsLmhyZWYgPT09IGNhcHR1cmVVcmwuaHJlZjtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gSWYgYGNhcHR1cmVgIGlzIGEgc3RyaW5nIHRoZW4gYGhhbmRsZXJgIGFuZCBgbWV0aG9kYCBtdXN0IGJlIHByZXNlbnQuXG4gICAgICAgIHJvdXRlID0gbmV3IFJvdXRlKG1hdGNoQ2FsbGJhY2ssIGhhbmRsZXIsIG1ldGhvZCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNhcHR1cmUgaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAgICAgLy8gSWYgYGNhcHR1cmVgIGlzIGEgYFJlZ0V4cGAgdGhlbiBgaGFuZGxlcmAgYW5kIGBtZXRob2RgIG11c3QgYmUgcHJlc2VudC5cbiAgICAgICAgcm91dGUgPSBuZXcgUmVnRXhwUm91dGUoY2FwdHVyZSwgaGFuZGxlciwgbWV0aG9kKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGNhcHR1cmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gSWYgYGNhcHR1cmVgIGlzIGEgZnVuY3Rpb24gdGhlbiBgaGFuZGxlcmAgYW5kIGBtZXRob2RgIG11c3QgYmUgcHJlc2VudC5cbiAgICAgICAgcm91dGUgPSBuZXcgUm91dGUoY2FwdHVyZSwgaGFuZGxlciwgbWV0aG9kKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY2FwdHVyZSBpbnN0YW5jZW9mIFJvdXRlKSB7XG4gICAgICAgIHJvdXRlID0gY2FwdHVyZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBXb3JrYm94RXJyb3IoJ3Vuc3VwcG9ydGVkLXJvdXRlLXR5cGUnLCB7XG4gICAgICAgICAgICBtb2R1bGVOYW1lOiAnd29ya2JveC1yb3V0aW5nJyxcbiAgICAgICAgICAgIGZ1bmNOYW1lOiAncmVnaXN0ZXJSb3V0ZScsXG4gICAgICAgICAgICBwYXJhbU5hbWU6ICdjYXB0dXJlJyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGRlZmF1bHRSb3V0ZXIgPSBnZXRPckNyZWF0ZURlZmF1bHRSb3V0ZXIoKTtcbiAgICBkZWZhdWx0Um91dGVyLnJlZ2lzdGVyUm91dGUocm91dGUpO1xuICAgIHJldHVybiByb3V0ZTtcbn1cbmV4cG9ydCB7IHJlZ2lzdGVyUm91dGUgfTtcbiIsIi8vIE1haW4gRW50cnkgZm9yIHRoZSBDdXJpb3VzIFJlYWRlciBXZWIgUGxheWVyIEFwcFxyXG5pbXBvcnQgeyBDb250ZW50UGFyc2VyIH0gZnJvbSBcIi4vUGFyc2VyL0NvbnRlbnRQYXJzZXJcIjtcclxuaW1wb3J0IHsgUGxheUJhY2tFbmdpbmUgfSBmcm9tIFwiLi9QbGF5QmFja0VuZ2luZS9QbGF5QmFja0VuZ2luZVwiO1xyXG5pbXBvcnQgeyBDUlNlcnZpY2VXb3JrZXIgfSBmcm9tIFwiLi9IZWxwZXJzL1NlcnZpY2VXb3JrZXIvU2VydmljZVdvcmtlclwiO1xyXG5pbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vTW9kZWxzL01vZGVsc1wiO1xyXG5pbXBvcnQgeyBTcGxpZGUgfSBmcm9tIFwiQHNwbGlkZWpzL3NwbGlkZVwiO1xyXG5cclxuIGV4cG9ydCBjbGFzcyBBcHAge1xyXG5cclxuICAgIGNvbnRlbnRQYXJzZXI6IENvbnRlbnRQYXJzZXI7XHJcbiAgICBwbGF5QmFja0VuZ2luZTogUGxheUJhY2tFbmdpbmU7XHJcbiAgICBzZXJ2aWNlV29ya2VyOiBDUlNlcnZpY2VXb3JrZXI7XHJcbiAgICBcclxuICAgIGNvbnRlbnRGaWxlUGF0aDogc3RyaW5nO1xyXG4gICAgaW1hZ2VzUGF0aDogc3RyaW5nO1xyXG4gICAgYXVkaW9QYXRoOiBzdHJpbmc7XHJcblxyXG4gICAgY2FjaGVkTGFuZ3VhZ2VzOiBNYXA8c3RyaW5nLCBzdHJpbmc+IHwgbnVsbCA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCk7XHJcbiAgICAvLyBjYWNoZWRMYW5ndWFnZXNUYWc6IHN0cmluZyA9IFwiY2FjaGVkX2xhbmd1YWdlc1wiO1xyXG4gICAgbGFuZzogc3RyaW5nID0gXCJlbmdsaXNoXCI7XHJcbiAgICBpc0NhY2hlZDogc3RyaW5nID0gXCJpc19jYWNoZWRcIjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZW50RmlsZVBhdGg6IHN0cmluZywgaW1hZ2VzUGF0aDogc3RyaW5nLCBhdWRpb1BhdGg6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuY29udGVudEZpbGVQYXRoID0gY29udGVudEZpbGVQYXRoO1xyXG4gICAgICAgIHRoaXMuaW1hZ2VzUGF0aCA9IGltYWdlc1BhdGg7XHJcbiAgICAgICAgdGhpcy5hdWRpb1BhdGggPSBhdWRpb1BhdGg7XHJcbiAgICAgICAgdGhpcy5jb250ZW50UGFyc2VyID0gbmV3IENvbnRlbnRQYXJzZXIoY29udGVudEZpbGVQYXRoKTtcclxuICAgICAgICB0aGlzLnBsYXlCYWNrRW5naW5lID0gbmV3IFBsYXlCYWNrRW5naW5lKGltYWdlc1BhdGgsIGF1ZGlvUGF0aCk7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlV29ya2VyID0gbmV3IENSU2VydmljZVdvcmtlcigpO1xyXG4gICAgICAgIHRoaXMuc2VydmljZVdvcmtlci5Jbml0aWFsaXplQW5kUmVnaXN0ZXIoKTtcclxuXHJcbiAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuaXNDYWNoZWQpID09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZWRMYW5ndWFnZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGNhY2hlZExhbmd1YWdlU3RyaW5nOiBzdHJpbmcgfCBudWxsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5pc0NhY2hlZCkhO1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlZExhbmd1YWdlcyA9IG5ldyBNYXAoSlNPTi5wYXJzZShjYWNoZWRMYW5ndWFnZVN0cmluZykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIGxldCBib29rOiBCb29rID0gYXdhaXQgdGhpcy5jb250ZW50UGFyc2VyLnBhcnNlQm9vaygpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhcIkRldiBBcHAgaW5pdGlhbGl6ZWQhXCIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGJvb2spO1xyXG5cclxuICAgICAgICB0aGlzLmVuZm9yY2VMYW5kc2NhcGVNb2RlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKFwic2VydmljZVdvcmtlclwiIGluIG5hdmlnYXRvcikge1xyXG4gICAgICAgICAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEubXNnID09IFwiTG9hZGluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhLmRhdGEgPT0gMTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhY2hlZExhbmd1YWdlcz8uc2V0KHRoaXMubGFuZywgXCJ0cnVlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0NhY2hlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh0aGlzLmNhY2hlZExhbmd1YWdlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlYWRMYW5ndWFnZURhdGFGcm9tQ2FjaGVBbmROb3RpZnlBbmRyb2lkQXBwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnBsYXlCYWNrRW5naW5lLmluaXRpYWxpemVCb29rKGJvb2spO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRMYW5ndWFnZURhdGFGcm9tQ2FjaGVBbmROb3RpZnlBbmRyb2lkQXBwKCkge1xyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIGlmICh3aW5kb3cuQW5kcm9pZCkge1xyXG4gICAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgICAgd2luZG93LkFuZHJvaWQucmVjZWl2ZURhdGEoY2FjaGVkTGFuZ3VhZ2VzLmhhcyhsYW5nKSA/IGNhY2hlZExhbmd1YWdlcy5nZXQobGFuZykgOiBudWxsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZW5mb3JjZUxhbmRzY2FwZU1vZGUoKSB7XHJcbiAgICAgICAgaWYgKHNjcmVlbi5vcmllbnRhdGlvbiAmJiBzY3JlZW4ub3JpZW50YXRpb24ubG9jaykge1xyXG4gICAgICAgICAgICBzY3JlZW4ub3JpZW50YXRpb24ubG9jayhcImxhbmRzY2FwZVwiKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNjcmVlbiBvcmllbnRhdGlvbiBsb2NrZWQgdG8gbGFuZHNjYXBlIVwiKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBsb2NrIHNjcmVlbiBvcmllbnRhdGlvbjogXCIsIGVycm9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiU2NyZWVuIG9yaWVudGF0aW9uIGxvY2sgbm90IHN1cHBvcnRlZCEgSW50ZXJmYWNlIG1heSBub3Qgd29yayBhcyBleHBlY3RlZCBvbiBtb2JpbGUgZGV2aWNlcyFcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuIH1cclxuXHJcbiAvLyBQYXNzaW5nIGFic29sdXRlIHBhdGggdG8gdGhlIGNvbnRlbnQgZmlsZSBhbmQgcmVzb3VyY2UgZGlyZWN0b3JpZXNcclxuIC8vIEN1cmlvdXMgUmVhZGVyIEJvb2s6IExldCdzIEZseSBMZXZlbCAyXHJcbi8vIGxldCBhcHA6IEFwcCA9IG5ldyBBcHAoXCIvQm9va0NvbnRlbnQvTGV0c0ZseUxldmVsMkVuL2NvbnRlbnQvY29udGVudC5qc29uXCIsXHJcbi8vICAgICBcIi9Cb29rQ29udGVudC9MZXRzRmx5TGV2ZWwyRW4vY29udGVudC9pbWFnZXMvXCIsXHJcbi8vICAgICBcIi9Cb29rQ29udGVudC9MZXRzRmx5TGV2ZWwyRW4vY29udGVudC9hdWRpby9cIik7XHJcblxyXG4vLyBHREwgQm9vazogVGFsa2luZyBCYWcgRW5nbGlzaFxyXG5sZXQgYXBwOiBBcHAgPSBuZXcgQXBwKFwiL0Jvb2tDb250ZW50L1RhbGtpbmdCYWdFbi9jb250ZW50L2NvbnRlbnQuanNvblwiLFxyXG4gICAgXCIvQm9va0NvbnRlbnQvVGFsa2luZ0JhZ0VuL2NvbnRlbnQvaW1hZ2VzL1wiLFxyXG4gICAgXCIvQm9va0NvbnRlbnQvVGFsa2luZ0JhZ0VuL2NvbnRlbnQvYXVkaW8vXCIpO1xyXG5cclxuLy8gSW5pdGlhbGl6ZSB0aGUgYXBwLCBiZWdpbm5pbmcgdG8gcmVhZCB0aGUgY29udGVudCBmaWxlLCBwYXJzaW5nICBhbmQgZGlzcGxheWluZyB0aGUgYm9va1xyXG5hcHAuaW5pdGlhbGl6ZSgpOyJdLCJuYW1lcyI6WyJzZWxmIiwiXyIsImUiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIkJvb2tUeXBlIiwiQ29udGVudFBhcnNlciIsImNvbnN0cnVjdG9yIiwiY29udGVudEZpbGVQYXRoIiwiZW1wdHlHbG93SW1hZ2VUYWciLCJ0aGlzIiwicGFyc2VCb29rIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJwYXJzZUNvbnRlbnRKU09ORmlsZSIsInRoZW4iLCJjb250ZW50SlNPTiIsImNvbnNvbGUiLCJsb2ciLCJib29rIiwicGFnZXMiLCJib29rVHlwZSIsImRldGVybWluZUJvb2tUeXBlIiwicGFyc2VQYWdlcyIsImNhdGNoIiwiZXJyb3IiLCJDdXJpb3VzUmVhZGVyIiwiR0RMIiwiVW5rbm93biIsInBhZ2VzSlNPTiIsImdsb2JhbEZpbGxDb2xvciIsImkiLCJsZW5ndGgiLCJwYWdlSlNPTiIsInBhZ2UiLCJ2aXN1YWxFbGVtZW50cyIsImJhY2tncm91bmRDb2xvciIsInBhcnNlUGFnZUNSIiwicHVzaCIsInBhcnNlUGFnZUdETCIsImVsZW1lbnRzSlNPTiIsImxpYnJhcnlTdHJpbmciLCJpbmNsdWRlcyIsInRleHRFbGVtZW50IiwicGFyc2VUZXh0RWxlbWVudENSIiwiaW1hZ2VFbGVtZW50IiwicGFyc2VJbWFnZUVsZW1lbnRDUiIsImVsZW1lbnRzSlNPTkFycmF5IiwicGFyc2VUZXh0RWxlbWVudEdETCIsInBhcnNlSW1hZ2VFbGVtZW50R0RMIiwiZWxlbWVudEpTT04iLCJ0eXBlIiwicG9zaXRpb25YIiwicG9zaXRpb25ZIiwid2lkdGgiLCJoZWlnaHQiLCJ0ZXh0Q29udGVudEFzSFRNTCIsIk5hTiIsInBhdGgiLCJpbWFnZVNvdXJjZSIsInBhcnNlQXVkaW9FbGVtZW50Q1IiLCJhdWRpb1NyYyIsInN0eWxlcyIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInJlc3BvbnNlVHlwZSIsIm9ubG9hZCIsInN0YXR1cyIsInJlc3BvbnNlIiwic2VuZCIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJNRURJQV9QUkVGRVJTX1JFRFVDRURfTU9USU9OIiwiZW1wdHkiLCJhcnJheSIsInNsaWNlIiwiYXJyYXlMaWtlIiwic3RhcnQiLCJlbmQiLCJBcnJheSIsInByb3RvdHlwZSIsImNhbGwiLCJhcHBseSIsImZ1bmMiLCJiaW5kIiwiY29uY2F0IiwiYXJndW1lbnRzIiwibmV4dFRpY2siLCJzZXRUaW1lb3V0Iiwibm9vcCIsInJhZiIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInR5cGVPZiIsInN1YmplY3QiLCJpc09iamVjdCIsImlzTnVsbCIsImlzQXJyYXkiLCJpc0Z1bmN0aW9uIiwiaXNTdHJpbmciLCJpc1VuZGVmaW5lZCIsImlzSFRNTEVsZW1lbnQiLCJvd25lckRvY3VtZW50IiwiZGVmYXVsdFZpZXciLCJ3aW5kb3ciLCJIVE1MRWxlbWVudCIsInRvQXJyYXkiLCJ2YWx1ZSIsImZvckVhY2giLCJ2YWx1ZXMiLCJpdGVyYXRlZSIsImluZGV4T2YiLCJpdGVtcyIsInRvZ2dsZUNsYXNzIiwiZWxtIiwiY2xhc3NlcyIsImFkZCIsIm5hbWUiLCJjbGFzc0xpc3QiLCJhZGRDbGFzcyIsInNwbGl0IiwiYXBwZW5kIiwicGFyZW50IiwiY2hpbGRyZW4iLCJhcHBlbmRDaGlsZCIsImJlZm9yZSIsIm5vZGVzIiwicmVmIiwibm9kZSIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiLCJtYXRjaGVzIiwic2VsZWN0b3IiLCJjaGlsZHJlbjIiLCJmaWx0ZXIiLCJjaGlsZCIsImZpcnN0RWxlbWVudENoaWxkIiwib3duS2V5cyIsImtleXMiLCJmb3JPd24iLCJvYmplY3QiLCJyaWdodCIsInJldmVyc2UiLCJzb3VyY2UiLCJtZXJnZSIsIm9taXQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJlbG1zIiwiYXR0cnMiLCJhdHRyIiwic2V0QXR0cmlidXRlIiwidmFsdWUyIiwiU3RyaW5nIiwiY3JlYXRlIiwidGFnIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJwcm9wIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImRpc3BsYXkiLCJkaXNwbGF5MiIsImZvY3VzIiwicHJldmVudFNjcm9sbCIsImdldEF0dHJpYnV0ZSIsImhhc0NsYXNzIiwiY2xhc3NOYW1lIiwiY29udGFpbnMiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicmVtb3ZlIiwicmVtb3ZlQ2hpbGQiLCJwYXJzZUh0bWwiLCJodG1sIiwiRE9NUGFyc2VyIiwicGFyc2VGcm9tU3RyaW5nIiwiYm9keSIsInByZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsInF1ZXJ5IiwicXVlcnlTZWxlY3RvciIsInF1ZXJ5QWxsIiwicXVlcnlTZWxlY3RvckFsbCIsInJlbW92ZUNsYXNzIiwidGltZU9mIiwidGltZVN0YW1wIiwidW5pdCIsIlBST0pFQ1RfQ09ERSIsImFzc2VydCIsImNvbmRpdGlvbiIsIm1lc3NhZ2UiLCJFcnJvciIsIm1pbiIsIk1hdGgiLCJtYXgiLCJmbG9vciIsImNlaWwiLCJhYnMiLCJhcHByb3hpbWF0ZWx5RXF1YWwiLCJ4IiwieSIsImVwc2lsb24iLCJiZXR3ZWVuIiwibnVtYmVyIiwiZXhjbHVzaXZlIiwibWluaW11bSIsIm1heGltdW0iLCJjbGFtcCIsInNpZ24iLCJmb3JtYXQiLCJzdHJpbmciLCJyZXBsYWNlbWVudHMiLCJyZXBsYWNlbWVudCIsInJlcGxhY2UiLCJwYWQiLCJpZHMiLCJFdmVudEJpbmRlciIsImxpc3RlbmVycyIsImZvckVhY2hFdmVudCIsInRhcmdldHMiLCJldmVudHMiLCJldmVudHMyIiwiZXZlbnROUyIsImZyYWdtZW50IiwiY2FsbGJhY2siLCJvcHRpb25zIiwiZXZlbnQiLCJuYW1lc3BhY2UiLCJpc0V2ZW50VGFyZ2V0IiwicmVtb3ZlciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwidW5iaW5kIiwibGlzdGVuZXIiLCJkaXNwYXRjaCIsImRldGFpbCIsIkN1c3RvbUV2ZW50IiwiYnViYmxlcyIsImNyZWF0ZUV2ZW50IiwiaW5pdEN1c3RvbUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsImRlc3Ryb3kiLCJkYXRhIiwiRVZFTlRfTU9VTlRFRCIsIkVWRU5UX1JFQURZIiwiRVZFTlRfTU9WRSIsIkVWRU5UX01PVkVEIiwiRVZFTlRfQ0xJQ0siLCJFVkVOVF9SRUZSRVNIIiwiRVZFTlRfVVBEQVRFRCIsIkVWRU5UX1JFU0laRSIsIkVWRU5UX1JFU0laRUQiLCJFVkVOVF9TQ1JPTEwiLCJFVkVOVF9TQ1JPTExFRCIsIkVWRU5UX0RFU1RST1kiLCJFVkVOVF9OQVZJR0FUSU9OX01PVU5URUQiLCJFVkVOVF9BVVRPUExBWV9QTEFZIiwiRVZFTlRfQVVUT1BMQVlfUEFVU0UiLCJFVkVOVF9MQVpZTE9BRF9MT0FERUQiLCJFVkVOVF9FTkRfSU5ERVhfQ0hBTkdFRCIsIkV2ZW50SW50ZXJmYWNlIiwiU3BsaWRlMiIsImJ1cyIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJiaW5kZXIiLCJvbiIsImpvaW4iLCJvZmYiLCJlbWl0IiwiUmVxdWVzdEludGVydmFsIiwiaW50ZXJ2YWwiLCJvbkludGVydmFsIiwib25VcGRhdGUiLCJsaW1pdCIsInN0YXJ0VGltZSIsImlkIiwibm93IiwiRGF0ZSIsInJhdGUiLCJwYXVzZWQiLCJjb3VudCIsInVwZGF0ZSIsInBhdXNlIiwiY2FuY2VsIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJyZXN1bWUiLCJyZXdpbmQiLCJzZXQiLCJ0aW1lIiwiaXNQYXVzZWQiLCJBUlJPV19MRUZUIiwiQVJST1ciLCJBUlJPV19SSUdIVCIsIkFSUk9XX1VQIiwiQVJST1dfRE9XTiIsIlRUQiIsIk9SSUVOVEFUSU9OX01BUCIsImxlZnQiLCJYIiwiWSIsIkFycm93TGVmdCIsIkFycm93UmlnaHQiLCJST0xFIiwiVEFCX0lOREVYIiwiQVJJQV9DT05UUk9MUyIsIkFSSUFfUFJFRklYIiwiQVJJQV9DVVJSRU5UIiwiQVJJQV9TRUxFQ1RFRCIsIkFSSUFfTEFCRUwiLCJBUklBX0xBQkVMTEVEQlkiLCJBUklBX0hJRERFTiIsIkFSSUFfT1JJRU5UQVRJT04iLCJBUklBX1JPTEVERVNDUklQVElPTiIsIkFSSUFfTElWRSIsIkFSSUFfQlVTWSIsIkFSSUFfQVRPTUlDIiwiQUxMX0FUVFJJQlVURVMiLCJDTEFTU19ST09UIiwiQ0xBU1NfVFJBQ0siLCJDTEFTU19QUkVGSVgiLCJDTEFTU19TTElERSIsIkNMQVNTX0NMT05FIiwiQ0xBU1NfQVJST1dTIiwiQ0xBU1NfQVJST1ciLCJDTEFTU19BUlJPV19QUkVWIiwiQ0xBU1NfQVJST1dfTkVYVCIsIkNMQVNTX1BBR0lOQVRJT04iLCJDTEFTU19BQ1RJVkUiLCJTVEFUVVNfQ0xBU1NfUFJFRklYIiwiQ0xBU1NfUFJFViIsIkNMQVNTX05FWFQiLCJDTEFTU19WSVNJQkxFIiwiQ0xBU1NfTE9BRElORyIsIkNMQVNTX0ZPQ1VTX0lOIiwiQ0xBU1NfT1ZFUkZMT1ciLCJTVEFUVVNfQ0xBU1NFUyIsIkNMQVNTRVMiLCJzbGlkZSIsImNsb25lIiwiYXJyb3dzIiwiYXJyb3ciLCJwcmV2IiwibmV4dCIsInBhZ2luYXRpb24iLCJzcGlubmVyIiwiUE9JTlRFUl9NT1ZFX0VWRU5UUyIsIlBPSU5URVJfVVBfRVZFTlRTIiwiU0xJREUiLCJMT09QIiwiRkFERSIsIlNDUk9MTF9MSVNURU5FUl9PUFRJT05TIiwicGFzc2l2ZSIsImNhcHR1cmUiLCJOT1JNQUxJWkFUSU9OX01BUCIsIlNwYWNlYmFyIiwiUmlnaHQiLCJMZWZ0IiwiVXAiLCJEb3duIiwibm9ybWFsaXplS2V5IiwiS0VZQk9BUkRfRVZFTlQiLCJTUkNfREFUQV9BVFRSSUJVVEUiLCJEQVRBX0FUVFJJQlVURSIsIlNSQ1NFVF9EQVRBX0FUVFJJQlVURSIsIlRSSUdHRVJfS0VZUyIsIkNvbXBvbmVudENvbnN0cnVjdG9ycyIsImZyZWV6ZSIsIl9fcHJvdG9fXyIsIk1lZGlhIiwiQ29tcG9uZW50czIiLCJzdGF0ZSIsImJyZWFrcG9pbnRzIiwicmVkdWNlZE1vdGlvbiIsInF1ZXJpZXMiLCJjb21wbGV0ZWx5IiwicmVnaXN0ZXIiLCJvcHRpb25zMiIsInF1ZXJ5TGlzdCIsIm1hdGNoTWVkaWEiLCJkZXN0cm95ZWQiLCJpcyIsImRpcmVjdGlvbiIsIm1lcmdlZCIsInJlZHVjZSIsIm1lcmdlZDIiLCJlbnRyeSIsIm1vdW50IiwicmVmcmVzaCIsIm9wdHMiLCJiYXNlIiwibm90aWZ5IiwiZ2V0UHJvdG90eXBlT2YiLCJzZXR1cCIsImlzTWluIiwibWVkaWFRdWVyeSIsInNvcnQiLCJuIiwibSIsImVuYWJsZSIsIkRpcmVjdGlvbiIsImF4aXNPbmx5IiwiaW5kZXgiLCJtYXRjaCIsIm9mZnNldCIsInRvTG93ZXJDYXNlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJvcmllbnQiLCJFbGVtZW50cyIsInRyYWNrIiwibGlzdCIsImlzVXNpbmdLZXkiLCJfRXZlbnRJbnRlcmZhY2UiLCJyb290IiwiaTE4biIsImVsZW1lbnRzIiwic2xpZGVzIiwicm9vdENsYXNzZXMiLCJ0cmFja0NsYXNzZXMiLCJwcmVmaXgiLCJyb2xlIiwiZmluZCIsImJhciIsIkNMQVNTX1BST0dSRVNTIiwidG9nZ2xlIiwidGFnTmFtZSIsImNhcm91c2VsIiwiZ2V0Q2xhc3NlcyIsImxhYmVsIiwibGFiZWxsZWRieSIsImZyb20iLCJjbG9zZXN0Iiwibm9kZVR5cGUiLCJwYXJlbnRFbGVtZW50IiwiZHJhZyIsImlzTmF2aWdhdGlvbiIsIlBPSU5URVJfRE9XTl9FVkVOVFMiLCJTbGlkZXMiLCJfRXZlbnRJbnRlcmZhY2UyIiwiX0NvbXBvbmVudHMyJEVsZW1lbnRzIiwiU2xpZGVzMiIsImluaXQiLCJmb3JFYWNoJDEiLCJTbGlkZTIiLCJzbGlkZUluZGV4IiwiQ29tcG9uZW50cyIsInVwZGF0ZU9uTW92ZSIsInNsaWRlRm9jdXMiLCJpc0Nsb25lIiwiY29udGFpbmVyIiwiaW5pdE5hdmlnYXRpb24iLCJjb250cm9scyIsInNwbGlkZXMiLCJtYXAiLCJzcGxpZGUiLCJnZXRBdCIsInNsaWRlWCIsIm9uTW92ZSIsImN1cnIiLCJhY3RpdmUiLCJpc0FjdGl2ZSIsInZpc2libGUiLCJ0cmFja1JlY3QiLCJzbGlkZVJlY3QiLCJpc1Zpc2libGUiLCJoaWRkZW4iLCJmb2N1c2FibGVOb2RlcyIsImFjdGl2ZUVsZW1lbnQiLCJ1cGRhdGVWaXNpYmlsaXR5IiwiY2xvbmVTdGF0dXMiLCJzbGlkZUxhYmVsIiwidXNlQ29udGFpbmVyIiwiaXNXaXRoaW4iLCJkaXN0YW5jZSIsImRpZmYiLCJTbGlkZSQxIiwiU2xpZGUxIiwiZ2V0IiwiZXhjbHVkZUNsb25lcyIsIm1hdGNoZXIiLCJnZXRJbiIsIkNvbnRyb2xsZXIiLCJ0b0luZGV4IiwiaGFzRm9jdXMiLCJwZXJQYWdlIiwiaW1hZ2VzIiwiaW1nIiwiZ2V0TGVuZ3RoIiwiaXNFbm91Z2giLCJMYXlvdXQiLCJ2ZXJ0aWNhbCIsInJvb3RSZWN0Iiwib3ZlcmZsb3ciLCJfRXZlbnRJbnRlcmZhY2UzIiwiX0NvbXBvbmVudHMyJEVsZW1lbnRzMiIsInN0eWxlU2xpZGVzIiwiY3NzUGFkZGluZyIsInJlc2l6ZSIsImZvcmNlIiwibmV3UmVjdCIsImNzc0hlaWdodCIsImdhcCIsImF1dG9XaWR0aCIsImZpeGVkV2lkdGgiLCJjc3NTbGlkZVNpemUiLCJmaXhlZEhlaWdodCIsImF1dG9IZWlnaHQiLCJpc092ZXJmbG93IiwicGFkZGluZyIsImhlaWdodFJhdGlvIiwibGlzdFNpemUiLCJzbGlkZVNpemUiLCJ3aXRob3V0R2FwIiwiU2xpZGUiLCJnZXRHYXAiLCJ0b3RhbFNpemUiLCJzbGlkZXJTaXplIiwicGFyc2VGbG9hdCIsImdldFBhZGRpbmciLCJDbG9uZXMiLCJjbG9uZUNvdW50IiwiY2xvbmVzIiwicmVtb3VudCIsIm9ic2VydmUiLCJjb21wdXRlQ2xvbmVDb3VudCIsImlzSGVhZCIsImNsb25lTm9kZSIsImNsb25lRGVlcCIsImdlbmVyYXRlIiwiY2xvbmVzMiIsImZpeGVkU2l6ZSIsIk1vdmUiLCJUcmFuc2l0aW9uIiwiX0V2ZW50SW50ZXJmYWNlNCIsIl9Db21wb25lbnRzMiRMYXlvdXQiLCJfQ29tcG9uZW50czIkRGlyZWN0aW8iLCJfQ29tcG9uZW50czIkRWxlbWVudHMzIiwicmVwb3NpdGlvbiIsImlzQnVzeSIsIlNjcm9sbCIsImp1bXAiLCJ0cmFuc2xhdGUiLCJ0b1Bvc2l0aW9uIiwicG9zaXRpb24iLCJwcmV2ZW50TG9vcCIsImRlc3RpbmF0aW9uIiwiZXhjZWVkZWRNYXgiLCJnZXRFbmQiLCJzaGlmdCIsImxvb3AiLCJiYWNrd2FyZHMiLCJleGNlc3MiLCJnZXRMaW1pdCIsInNpemUiLCJnZXRQb3NpdGlvbiIsIm1pbkRpc3RhbmNlIiwiSW5maW5pdHkiLCJ0cmltbWluZyIsInRyaW1TcGFjZSIsInRyaW0iLCJtb3ZlIiwiZGVzdCIsInNoaWZ0ZWQiLCJleGNlZWRlZExpbWl0IiwiZXhjZWVkZWRNaW4iLCJlbmRJbmRleCIsInNsaWRlQ291bnQiLCJwZXJNb3ZlIiwiX0V2ZW50SW50ZXJmYWNlNSIsIl9Db21wb25lbnRzMiRTbGlkZXMiLCJvbWl0RW5kIiwiaXNMb29wIiwiaXNTbGlkZSIsImdldE5leHQiLCJnZXRBZGphY2VudCIsImdldFByZXYiLCJjdXJySW5kZXgiLCJwcmV2SW5kZXgiLCJvblJlc2l6ZWQiLCJjb21wdXRlRGVzdEluZGV4Iiwic25hcFBhZ2UiLCJjb21wdXRlTW92YWJsZURlc3RJbmRleCIsInRvUGFnZSIsInNldEluZGV4Iiwid2FpdEZvclRyYW5zaXRpb24iLCJnbyIsImNvbnRyb2wiLCJhbGxvd1NhbWVJbmRleCIsIl9yZWYiLCJpbmRpY2F0b3IiLCJwYXJzZSIsInNjcm9sbCIsImR1cmF0aW9uIiwic25hcCIsImdldEluZGV4IiwidG9EZXN0IiwiQXJyb3dzIiwiY3JlYXRlZCIsIndyYXBwZXJDbGFzc2VzIiwicGxhY2Vob2xkZXIiLCJ3cmFwcGVyIiwiZW5hYmxlZCIsImNyZWF0ZUFycm93IiwicHJldjIiLCJhcnJvd1BhdGgiLCJuZXh0SW5kZXgiLCJwcmV2TGFiZWwiLCJsYXN0IiwibmV4dExhYmVsIiwiZmlyc3QiLCJkaXNhYmxlZCIsIkF1dG9wbGF5IiwiaG92ZXJlZCIsImZvY3VzZWQiLCJfRXZlbnRJbnRlcmZhY2U2IiwiX0NvbXBvbmVudHMyJEVsZW1lbnRzNCIsImF1dG9wbGF5Iiwic3RvcHBlZCIsInBsYXkiLCJyZXNldFByb2dyZXNzIiwic3RvcCIsImF1dG9Ub2dnbGUiLCJwYXVzZU9uSG92ZXIiLCJwYXVzZU9uRm9jdXMiLCJDb3ZlciIsImNvdmVyIiwiY292ZXIyIiwic3JjIiwiX0V2ZW50SW50ZXJmYWNlOCIsImZyaWN0aW9uIiwib25TY3JvbGxlZCIsIm5vQ29uc3RyYWluIiwiY2xlYXIiLCJub0Rpc3RhbmNlIiwib25FbmQiLCJ0byIsInQiLCJlYXNpbmdGdW5jIiwicG93IiwiRHJhZyIsImJhc2VQb3NpdGlvbiIsImJhc2VFdmVudCIsInByZXZCYXNlRXZlbnQiLCJpc0ZyZWUiLCJkcmFnZ2luZyIsImNsaWNrUHJldmVudGVkIiwiX0V2ZW50SW50ZXJmYWNlOSIsIl9Db21wb25lbnRzMiREaXJlY3RpbzIiLCJleGNlZWRlZCIsImRpc2FibGUiLCJvblBvaW50ZXJEb3duIiwiaXNUb3VjaCIsImlzVG91Y2hFdmVudCIsInRhcmdldDIiLCJub0RyYWciLCJidXR0b24iLCJvblBvaW50ZXJNb3ZlIiwib25Qb2ludGVyVXAiLCJzYXZlIiwiY2FuY2VsYWJsZSIsImRpZmZDb29yZCIsImV4cGlyZWQiLCJkaWZmVGltZSIsImhhc0V4Y2VlZGVkIiwiaXNTbGlkZXJEaXJlY3Rpb24iLCJ0aHJlc2hvbGRzIiwiZHJhZ01pblRocmVzaG9sZCIsImlzT2JqIiwibW91c2UiLCJ0b3VjaCIsInNob3VsZFN0YXJ0IiwidmVsb2NpdHkiLCJjb21wdXRlVmVsb2NpdHkiLCJmbGlja1Bvd2VyIiwiZmxpY2tNYXhQYWdlcyIsImNvbXB1dGVEZXN0aW5hdGlvbiIsInJld2luZEJ5RHJhZyIsIm9uQ2xpY2siLCJvcnRob2dvbmFsIiwiY29vcmRPZiIsImdldEJhc2VFdmVudCIsImNoYW5nZWRUb3VjaGVzIiwiVG91Y2hFdmVudCIsImlzRHJhZ2dpbmciLCJLZXlib2FyZCIsIl9FdmVudEludGVyZmFjZTEwIiwia2V5Ym9hcmQiLCJvbktleWRvd24iLCJfZGlzYWJsZWQiLCJMYXp5TG9hZCIsIl9FdmVudEludGVyZmFjZTExIiwiaXNTZXF1ZW50aWFsIiwibGF6eUxvYWQiLCJlbnRyaWVzIiwic3Jjc2V0IiwibG9hZE5leHQiLCJjaGVjayIsInByZWxvYWRQYWdlcyIsImxvYWQiLCJvbkxvYWQiLCJQYWdpbmF0aW9uIiwicGFnaW5hdGlvbkNsYXNzZXMiLCJkaXIiLCJnZXREaXJlY3Rpb24iLCJuZXh0UGFnZSIsIml0ZW0iLCJwYWdpbmF0aW9uRGlyZWN0aW9uIiwiX2J1dHRvbiIsInNlbGVjdCIsImxpIiwiY2xhc3MiLCJ0ZXh0IiwicGFnZVgiLCJwYWdpbmF0aW9uS2V5Ym9hcmQiLCJjcmVhdGVQYWdpbmF0aW9uIiwiU3luYyIsImlzUGFyZW50Iiwic3luYyIsIldoZWVsIiwibGFzdFRpbWUiLCJvbldoZWVsIiwiZGVsdGFZIiwiX21pbiIsIndoZWVsTWluVGhyZXNob2xkIiwic2xlZXAiLCJ3aGVlbFNsZWVwIiwicmVsZWFzZVdoZWVsIiwic2hvdWxkUHJldmVudCIsIndoZWVsIiwiTGl2ZSIsImxpdmUiLCJzciIsInRleHRDb250ZW50IiwiREVGQVVMVFMiLCJzcGVlZCIsImVhc2luZyIsInJld2luZFNwZWVkIiwiRmFkZSIsImRvbmUiLCJlbmRDYWxsYmFjayIsInRyYW5zaXRpb24iLCJnZXRTcGVlZCIsInVzZVNjcm9sbCIsIlNwbGlkZSIsIl9TcGxpZGUiLCJzdGF0ZXMiLCJfbyIsIl9FIiwiZGVmYXVsdHMiLCJKU09OIiwiQ29uc3RydWN0b3IiLCJwcm90b1Byb3BzIiwiX3Byb3RvIiwiRXh0ZW5zaW9ucyIsIl90aGlzIiwiX0MiLCJfVCIsIkNvbXBvbmVudCIsImNvbXBvbmVudCIsIl90aGlzJGV2ZW50IiwiU1RBVEVTIiwiQ1JFQVRFRCIsIk1PVU5URUQiLCJJRExFIiwiTU9WSU5HIiwiU0NST0xMSU5HIiwiRFJBR0dJTkciLCJERVNUUk9ZRUQiLCJQbGF5QmFja0VuZ2luZSIsImltYWdlc1BhdGgiLCJhdWRpb1BhdGgiLCJjdXJyZW50UGFnZSIsInNwbGlkZUhhbmRsZSIsImlubmVySGVpZ2h0IiwiaW5pdGlhbGl6ZUJvb2siLCJjdXJyZW50Qm9va1R5cGUiLCJudW1iZXJPZlBhZ2VzIiwiaW5pdGlhbGl6ZUN1cmlvdXNSZWFkZXJCb29rIiwiaW5pdGlhbGl6ZUdETEJvb2siLCJqIiwidmlzdWFsRWxlbWVudCIsInRleHRFbGVtZW50RGl2Iiwid2Via2l0VGV4dFN0cm9rZSIsImNvbG9yIiwidGV4dFNoYWRvdyIsImZvbnRGYW1pbHkiLCJmb250V2VpZ2h0IiwiZm9udFNpemUiLCJ0b3AiLCJpbm5lckhUTUwiLCJpbWFnZUVsZW1lbnREaXYiLCJpbWFnZUVsZW1lbnRJbWciLCJmbGV4Q29udGFpbmVyIiwiZmxleERpcmVjdGlvbiIsImp1c3RpZnlDb250ZW50IiwiYWxpZ25JdGVtcyIsImdvVG9OZXh0UGFnZSIsInRyYW5zaXRpb25pbmdUb1BhZ2UiLCJ0cmFuc2l0aW9uVG9QYWdlIiwiZ29Ub1ByZXZpb3VzUGFnZSIsInBhZ2VOdW1iZXIiLCJlcnJvckNvZGUiLCJkZXRhaWxzIiwic3VwZXIiLCJjb2RlIiwiYXJncyIsIm1zZyIsInN0cmluZ2lmeSIsIm1lc3NhZ2VHZW5lcmF0b3IiLCJub3JtYWxpemVIYW5kbGVyIiwiaGFuZGxlciIsImhhbmRsZSIsIm1ldGhvZCIsInNldENhdGNoSGFuZGxlciIsImNhdGNoSGFuZGxlciIsIlJlZ0V4cFJvdXRlIiwicmVnRXhwIiwidXJsIiwicmVzdWx0IiwiZXhlYyIsImhyZWYiLCJvcmlnaW4iLCJsb2NhdGlvbiIsIlJvdXRlciIsIl9yb3V0ZXMiLCJNYXAiLCJfZGVmYXVsdEhhbmRsZXJNYXAiLCJyb3V0ZXMiLCJhZGRGZXRjaExpc3RlbmVyIiwicmVxdWVzdCIsInJlc3BvbnNlUHJvbWlzZSIsImhhbmRsZVJlcXVlc3QiLCJyZXNwb25kV2l0aCIsImFkZENhY2hlTGlzdGVuZXIiLCJwYXlsb2FkIiwicmVxdWVzdFByb21pc2VzIiwiYWxsIiwidXJsc1RvQ2FjaGUiLCJSZXF1ZXN0Iiwid2FpdFVudGlsIiwicG9ydHMiLCJwb3N0TWVzc2FnZSIsIlVSTCIsInByb3RvY29sIiwic3RhcnRzV2l0aCIsInNhbWVPcmlnaW4iLCJwYXJhbXMiLCJyb3V0ZSIsImZpbmRNYXRjaGluZ1JvdXRlIiwiaGFzIiwiZXJyIiwiX2NhdGNoSGFuZGxlciIsImFzeW5jIiwiY2F0Y2hFcnIiLCJtYXRjaFJlc3VsdCIsInNldERlZmF1bHRIYW5kbGVyIiwicmVnaXN0ZXJSb3V0ZSIsInVucmVnaXN0ZXJSb3V0ZSIsInJvdXRlSW5kZXgiLCJzcGxpY2UiLCJkZWZhdWx0Um91dGVyIiwiX2NhY2hlTmFtZURldGFpbHMiLCJnb29nbGVBbmFseXRpY3MiLCJwcmVjYWNoZSIsInJ1bnRpbWUiLCJzdWZmaXgiLCJyZWdpc3RyYXRpb24iLCJzY29wZSIsImNhY2hlTmFtZXMiLCJ1c2VyQ2FjaGVOYW1lIiwiY2FjaGVOYW1lIiwic3RyaXBQYXJhbXMiLCJmdWxsVVJMIiwiaWdub3JlUGFyYW1zIiwic3RyaXBwZWRVUkwiLCJwYXJhbSIsInNlYXJjaFBhcmFtcyIsImRlbGV0ZSIsIkRlZmVycmVkIiwicHJvbWlzZSIsInF1b3RhRXJyb3JDYWxsYmFja3MiLCJTZXQiLCJ0b1JlcXVlc3QiLCJpbnB1dCIsIlN0cmF0ZWd5SGFuZGxlciIsInN0cmF0ZWd5IiwiX2NhY2hlS2V5cyIsImFzc2lnbiIsIl9zdHJhdGVneSIsIl9oYW5kbGVyRGVmZXJyZWQiLCJfZXh0ZW5kTGlmZXRpbWVQcm9taXNlcyIsIl9wbHVnaW5zIiwicGx1Z2lucyIsIl9wbHVnaW5TdGF0ZU1hcCIsInBsdWdpbiIsIm1vZGUiLCJGZXRjaEV2ZW50IiwicHJlbG9hZFJlc3BvbnNlIiwicG9zc2libGVQcmVsb2FkUmVzcG9uc2UiLCJvcmlnaW5hbFJlcXVlc3QiLCJoYXNDYWxsYmFjayIsImNiIiwiaXRlcmF0ZUNhbGxiYWNrcyIsInRocm93bkVycm9yTWVzc2FnZSIsInBsdWdpbkZpbHRlcmVkUmVxdWVzdCIsImZldGNoUmVzcG9uc2UiLCJmZXRjaCIsImZldGNoT3B0aW9ucyIsInJ1bkNhbGxiYWNrcyIsInJlc3BvbnNlQ2xvbmUiLCJjYWNoZVB1dCIsImNhY2hlZFJlc3BvbnNlIiwibWF0Y2hPcHRpb25zIiwiZWZmZWN0aXZlUmVxdWVzdCIsImdldENhY2hlS2V5IiwibXVsdGlNYXRjaE9wdGlvbnMiLCJjYWNoZXMiLCJSZWdFeHAiLCJyZXNwb25zZVRvQ2FjaGUiLCJfZW5zdXJlUmVzcG9uc2VTYWZlVG9DYWNoZSIsImNhY2hlIiwiaGFzQ2FjaGVVcGRhdGVDYWxsYmFjayIsIm9sZFJlc3BvbnNlIiwic3RyaXBwZWRSZXF1ZXN0VVJMIiwia2V5c09wdGlvbnMiLCJpZ25vcmVTZWFyY2giLCJjYWNoZUtleXMiLCJjYWNoZUtleSIsImNhY2hlTWF0Y2hJZ25vcmVQYXJhbXMiLCJwdXQiLCJleGVjdXRlUXVvdGFFcnJvckNhbGxiYWNrcyIsIm5ld1Jlc3BvbnNlIiwic3RhdGVmdWxDYWxsYmFjayIsInN0YXRlZnVsUGFyYW0iLCJwbHVnaW5zVXNlZCIsIkNhY2hlRmlyc3QiLCJyZXNwb25zZURvbmUiLCJoYW5kbGVBbGwiLCJfZ2V0UmVzcG9uc2UiLCJfYXdhaXRDb21wbGV0ZSIsIl9oYW5kbGUiLCJkb25lV2FpdGluZyIsIndhaXRVbnRpbEVycm9yIiwiY2FjaGVNYXRjaCIsImZldGNoQW5kQ2FjaGVQdXQiLCJkb250V2FpdEZvciIsImlkYlByb3h5YWJsZVR5cGVzIiwiY3Vyc29yQWR2YW5jZU1ldGhvZHMiLCJjdXJzb3JSZXF1ZXN0TWFwIiwiV2Vha01hcCIsInRyYW5zYWN0aW9uRG9uZU1hcCIsInRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcCIsInRyYW5zZm9ybUNhY2hlIiwicmV2ZXJzZVRyYW5zZm9ybUNhY2hlIiwiaWRiUHJveHlUcmFwcyIsInJlY2VpdmVyIiwiSURCVHJhbnNhY3Rpb24iLCJvYmplY3RTdG9yZU5hbWVzIiwib2JqZWN0U3RvcmUiLCJ3cmFwIiwidHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSIsIklEQkRhdGFiYXNlIiwidHJhbnNhY3Rpb24iLCJJREJDdXJzb3IiLCJhZHZhbmNlIiwiY29udGludWUiLCJjb250aW51ZVByaW1hcnlLZXkiLCJ1bndyYXAiLCJzdG9yZU5hbWVzIiwidHgiLCJ1bmxpc3RlbiIsImNvbXBsZXRlIiwiRE9NRXhjZXB0aW9uIiwiY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uIiwiSURCT2JqZWN0U3RvcmUiLCJJREJJbmRleCIsInNvbWUiLCJjIiwiUHJveHkiLCJJREJSZXF1ZXN0Iiwic3VjY2VzcyIsInByb21pc2lmeVJlcXVlc3QiLCJuZXdWYWx1ZSIsInJlYWRNZXRob2RzIiwid3JpdGVNZXRob2RzIiwiY2FjaGVkTWV0aG9kcyIsImdldE1ldGhvZCIsInRhcmdldEZ1bmNOYW1lIiwidXNlSW5kZXgiLCJpc1dyaXRlIiwic3RvcmVOYW1lIiwic3RvcmUiLCJvbGRUcmFwcyIsIkNBQ0hFX09CSkVDVF9TVE9SRSIsIm5vcm1hbGl6ZVVSTCIsInVuTm9ybWFsaXplZFVybCIsImhhc2giLCJDYWNoZVRpbWVzdGFtcHNNb2RlbCIsIl9kYiIsIl9jYWNoZU5hbWUiLCJfdXBncmFkZURiIiwiZGIiLCJvYmpTdG9yZSIsImNyZWF0ZU9iamVjdFN0b3JlIiwia2V5UGF0aCIsImNyZWF0ZUluZGV4IiwidW5pcXVlIiwiX3VwZ3JhZGVEYkFuZERlbGV0ZU9sZERicyIsImJsb2NrZWQiLCJpbmRleGVkREIiLCJkZWxldGVEYXRhYmFzZSIsIm9sZFZlcnNpb24iLCJkZWxldGVEQiIsInRpbWVzdGFtcCIsIl9nZXRJZCIsImdldERiIiwiZHVyYWJpbGl0eSIsIm1pblRpbWVzdGFtcCIsIm1heENvdW50IiwiY3Vyc29yIiwib3BlbkN1cnNvciIsImVudHJpZXNUb0RlbGV0ZSIsImVudHJpZXNOb3REZWxldGVkQ291bnQiLCJ1cmxzRGVsZXRlZCIsInZlcnNpb24iLCJ1cGdyYWRlIiwiYmxvY2tpbmciLCJ0ZXJtaW5hdGVkIiwib3BlblByb21pc2UiLCJuZXdWZXJzaW9uIiwib3BlbkRCIiwiQ2FjaGVFeHBpcmF0aW9uIiwiY29uZmlnIiwiX2lzUnVubmluZyIsIl9yZXJ1blJlcXVlc3RlZCIsIl9tYXhFbnRyaWVzIiwibWF4RW50cmllcyIsIl9tYXhBZ2VTZWNvbmRzIiwibWF4QWdlU2Vjb25kcyIsIl9tYXRjaE9wdGlvbnMiLCJfdGltZXN0YW1wTW9kZWwiLCJ1cmxzRXhwaXJlZCIsImV4cGlyZUVudHJpZXMiLCJzZXRUaW1lc3RhbXAiLCJnZXRUaW1lc3RhbXAiLCJleHBpcmVPbGRlclRoYW4iLCJFeHBpcmF0aW9uUGx1Z2luIiwiY2FjaGVkUmVzcG9uc2VXaWxsQmVVc2VkIiwiaXNGcmVzaCIsIl9pc1Jlc3BvbnNlRGF0ZUZyZXNoIiwiY2FjaGVFeHBpcmF0aW9uIiwiX2dldENhY2hlRXhwaXJhdGlvbiIsInVwZGF0ZVRpbWVzdGFtcERvbmUiLCJ1cGRhdGVUaW1lc3RhbXAiLCJjYWNoZURpZFVwZGF0ZSIsIl9jb25maWciLCJfY2FjaGVFeHBpcmF0aW9ucyIsInB1cmdlT25RdW90YUVycm9yIiwiZGVsZXRlQ2FjaGVBbmRNZXRhZGF0YSIsImRhdGVIZWFkZXJUaW1lc3RhbXAiLCJfZ2V0RGF0ZUhlYWRlclRpbWVzdGFtcCIsImhlYWRlcnMiLCJkYXRlSGVhZGVyIiwiaGVhZGVyVGltZSIsImdldFRpbWUiLCJpc05hTiIsImNsaWVudHMiLCJza2lwV2FpdGluZyIsIkNSU2VydmljZVdvcmtlciIsImNhY2hlTmFtZVRhZyIsImltYWdlc0NhY2hlTmFtZSIsImZvbnRzQ2FjaGVOYW1lIiwic3R5bGVzU2NyaXB0c0NhY2hlTmFtZSIsImRvY3VtZW50Q2FjaGVOYW1lIiwic3R5bGVzU2NyaXB0c0V4cGlyYXRpb25QbHVnaW4iLCJmb250c0V4cGlyYXRpb25QbHVnaW4iLCJpbWFnZXNFeHBpcmF0aW9uUGx1Z2luIiwiZG9jdW1lbnRFeHBpcmF0aW9uUGx1Z2luIiwiSW5pdGlhbGl6ZUFuZFJlZ2lzdGVyIiwibmF2aWdhdG9yIiwic2VydmljZVdvcmtlciIsInJlZ2lzdGVyQ2FjaGVGaXJzdFJvdXRlVXNpbmciLCJjbGFpbSIsIm1hdGNoQWxsIiwiY2xpZW50IiwiaGFuZGxlU2VydmljZVdvcmtlck1lc3NhZ2UiLCJoYW5kbGVMb2FkaW5nTWVzc2FnZSIsImV4cGlyYXRpb25QbHVnaW4iLCJjYWNoZWRMYW5ndWFnZXMiLCJsYW5nIiwiaXNDYWNoZWQiLCJjb250ZW50UGFyc2VyIiwicGxheUJhY2tFbmdpbmUiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiY2FjaGVkTGFuZ3VhZ2VTdHJpbmciLCJpbml0aWFsaXplIiwiZW5mb3JjZUxhbmRzY2FwZU1vZGUiLCJzZXRJdGVtIiwicmVhZExhbmd1YWdlRGF0YUZyb21DYWNoZUFuZE5vdGlmeUFuZHJvaWRBcHAiLCJBbmRyb2lkIiwicmVjZWl2ZURhdGEiLCJzY3JlZW4iLCJvcmllbnRhdGlvbiIsImxvY2siLCJ3YXJuIl0sInNvdXJjZVJvb3QiOiIifQ==